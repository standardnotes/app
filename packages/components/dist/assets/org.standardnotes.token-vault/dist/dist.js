/*! For license information please see dist.js.LICENSE.txt */
(()=>{var e={7049:(e,t,r)=>{"use strict";var n=r(9321),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return n.isMemo(e)?a:s[e.$$typeof]||i}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var l=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var i=h(r);i&&i!==f&&e(t,i,n)}var a=u(r);d&&(a=a.concat(d(r)));for(var s=c(t),y=c(r),v=0;v<a.length;++v){var g=a[v];if(!(o[g]||n&&n[g]||y&&y[g]||s&&s[g])){var m=p(r,g);try{l(t,g,m)}catch(e){}}}}return t}},1937:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,m=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,S=r?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case d:case o:case s:case a:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case v:case y:case c:return e;default:return t}}case i:return t}}}function P(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=n,t.ForwardRef=p,t.Fragment=o,t.Lazy=v,t.Memo=y,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=h,t.isAsyncMode=function(e){return P(e)||w(e)===u},t.isConcurrentMode=P,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===y},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===s||e===a||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===m||e.$$typeof===b||e.$$typeof===S||e.$$typeof===g)},t.typeOf=w},9321:(e,t,r)=>{"use strict";e.exports=r(1937)},3456:(e,t)=>{"use strict";function r(e){return"object"!=typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var n="object"==typeof process&&!0;function i(e,t){if(!e){if(n)throw new Error("Invariant failed");throw new Error(t())}}t.invariant=i;var o=Object.prototype.hasOwnProperty,a=Array.prototype.splice,s=Object.prototype.toString;function c(e){return s.call(e).slice(8,-1)}var l=Object.assign||function(e,t){return u(t).forEach((function(r){o.call(t,r)&&(e[r]=t[r])})),e},u="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function d(e){return Array.isArray(e)?l(e.constructor(e.length),e):"Map"===c(e)?new Map(e):"Set"===c(e)?new Set(e):e&&"object"==typeof e?l(Object.create(Object.getPrototypeOf(e)),e):e}var p=function(){function e(){this.commands=l({},h),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var r=this,n="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(n)||i(!Array.isArray(n),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),i("object"==typeof n&&null!==n,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(r.commands).join(", ")+"."}));var a=e;return u(n).forEach((function(t){if(o.call(r.commands,t)){var i=e===a;a=r.commands[t](n[t],a,n,e),i&&r.isEquals(a,e)&&(a=e)}else{var s="Map"===c(e)?r.update(e.get(t),n[t]):r.update(e[t],n[t]),l="Map"===c(a)?a.get(t):a[t];r.isEquals(s,l)&&(void 0!==s||o.call(e,t))||(a===e&&(a=d(e)),"Map"===c(a)?a.set(t,s):a[t]=s)}})),a},e}();t.Context=p;var h={$push:function(e,t,r){return y(t,r,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,r){return y(t,r,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,o){return function(e,t){i(Array.isArray(e),(function(){return"Expected $splice target to be an array; got "+r(e)})),g(t.$splice)}(t,n),e.forEach((function(e){g(e),t===o&&e.length&&(t=d(o)),a.apply(t,e)})),t},$set:function(e,t,r){return function(e){i(1===Object.keys(e).length,(function(){return"Cannot have more than one key in an object with $set"}))}(r),e},$toggle:function(e,t){v(e,"$toggle");var r=e.length?d(t):t;return e.forEach((function(e){r[e]=!t[e]})),r},$unset:function(e,t,r,n){return v(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===n&&(t=d(n)),delete t[e])})),t},$add:function(e,t,r,n){return m(t,"$add"),v(e,"$add"),"Map"===c(t)?e.forEach((function(e){var r=e[0],i=e[1];t===n&&t.get(r)!==i&&(t=d(n)),t.set(r,i)})):e.forEach((function(e){t!==n||t.has(e)||(t=d(n)),t.add(e)})),t},$remove:function(e,t,r,n){return m(t,"$remove"),v(e,"$remove"),e.forEach((function(e){t===n&&t.has(e)&&(t=d(n)),t.delete(e)})),t},$merge:function(e,t,n,o){var a,s;return a=t,i((s=e)&&"object"==typeof s,(function(){return"update(): $merge expects a spec of type 'object'; got "+r(s)})),i(a&&"object"==typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+r(a)})),u(e).forEach((function(r){e[r]!==t[r]&&(t===o&&(t=d(o)),t[r]=e[r])})),t},$apply:function(e,t){var n;return i("function"==typeof(n=e),(function(){return"update(): expected spec of $apply to be a function; got "+r(n)+"."})),e(t)}},f=new p;function y(e,t,n){i(Array.isArray(e),(function(){return"update(): expected target of "+r(n)+" to be an array; got "+r(e)+"."})),v(t[n],n)}function v(e,t){i(Array.isArray(e),(function(){return"update(): expected spec of "+r(t)+" to be an array; got "+r(e)+". Did you forget to wrap your parameter in an array?"}))}function g(e){i(Array.isArray(e),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+r(e)+". Did you forget to wrap your parameters in an array?"}))}function m(e,t){var n=c(e);i("Map"===n||"Set"===n,(function(){return"update(): "+r(t)+" expects a target of type Set or Map; got "+r(n)}))}t.isEquals=f.update.isEquals,t.extend=f.extend,t.default=f.update,t.default.default=e.exports=l(t.default,t)},3710:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,r){return new e(new Uint8ClampedArray(t*r),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height||!this.data[t*this.width+e])},e.prototype.set=function(e,t,r){this.data[t*this.width+e]=r?1:0},e.prototype.setRegion=function(e,t,r,n,i){for(var o=t;o<t+n;o++)for(var a=e;a<e+r;a++)this.set(a,o,!!i)},e}();t.BitMatrix=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.addOrSubtractGF=function(e,t){return e^t};var i=function(){function e(e,t,r){this.primitive=e,this.size=t,this.generatorBase=r,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var i=1,o=0;o<this.size;o++)this.expTable[o]=i,(i*=2)>=this.size&&(i=(i^this.primitive)&this.size-1);for(o=0;o<this.size-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new n.default(this,Uint8ClampedArray.from([0])),this.one=new n.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("Invalid monomial degree less than 0");if(0===t)return this.zero;var r=new Uint8ClampedArray(e+1);return r[0]=t,new n.default(this,r)},e.prototype.log=function(e){if(0===e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e,t){if(0===t.length)throw new Error("No coefficients.");this.field=e;var r=t.length;if(r>1&&0===t[0]){for(var n=1;n<r&&0===t[n];)n++;if(n===r)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(r-n);for(var i=0;i<this.coefficients.length;i++)this.coefficients[i]=t[n+i]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var r;if(this.isZero())return t;if(t.isZero())return this;var i=this.coefficients,o=t.coefficients;i.length>o.length&&(i=(r=[o,i])[0],o=r[1]);for(var a=new Uint8ClampedArray(o.length),s=o.length-i.length,c=0;c<s;c++)a[c]=o[c];for(c=s;c<o.length;c++)a[c]=n.addOrSubtractGF(i[c-s],o[c]);return new e(this.field,a)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var r=this.coefficients.length,n=new Uint8ClampedArray(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],t);return new e(this.field,n)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var r=this.coefficients,i=r.length,o=t.coefficients,a=o.length,s=new Uint8ClampedArray(i+a-1),c=0;c<i;c++)for(var l=r[c],u=0;u<a;u++)s[c+u]=n.addOrSubtractGF(s[c+u],this.field.multiply(l,o[u]));return new e(this.field,s)},e.prototype.multiplyByMonomial=function(t,r){if(t<0)throw new Error("Invalid degree less than 0");if(0===r)return this.field.zero;for(var n=this.coefficients.length,i=new Uint8ClampedArray(n+t),o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],r);return new e(this.field,i)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var r=this.coefficients.length;if(1===e)return this.coefficients.forEach((function(e){t=n.addOrSubtractGF(t,e)})),t;t=this.coefficients[0];for(var i=1;i<r;i++)t=n.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[i]);return t},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(5),o=r(11),a=r(12);function s(e){var t=a.locate(e);if(!t)return null;for(var r=0,n=t;r<n.length;r++){var s=n[r],c=o.extract(e,s),l=i.decode(c.matrix);if(l)return{binaryData:l.bytes,data:l.text,chunks:l.chunks,version:l.version,location:{topRightCorner:c.mappingFunction(s.dimension,0),topLeftCorner:c.mappingFunction(0,0),bottomRightCorner:c.mappingFunction(s.dimension,s.dimension),bottomLeftCorner:c.mappingFunction(0,s.dimension),topRightFinderPattern:s.topRight,topLeftFinderPattern:s.topLeft,bottomLeftFinderPattern:s.bottomLeft,bottomRightAlignmentPattern:s.alignmentPattern}}}return null}var c={inversionAttempts:"attemptBoth"};function l(e,t,r,i){void 0===i&&(i={});var o=c;Object.keys(o||{}).forEach((function(e){o[e]=i[e]||o[e]}));var a="attemptBoth"===o.inversionAttempts||"invertFirst"===o.inversionAttempts,l="onlyInvert"===o.inversionAttempts||"invertFirst"===o.inversionAttempts,u=n.binarize(e,t,r,a),d=u.binarized,p=u.inverted,h=s(l?p:d);return h||"attemptBoth"!==o.inversionAttempts&&"invertFirst"!==o.inversionAttempts||(h=s(l?d:p)),h}l.default=l,t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);function i(e,t,r){return e<t?t:e>r?r:e}var o=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,r){this.data[t*this.width+e]=r},e}();t.binarize=function(e,t,r,a){if(e.length!==t*r*4)throw new Error("Malformed data passed to binarizer.");for(var s=new o(t,r),c=0;c<t;c++)for(var l=0;l<r;l++){var u=e[4*(l*t+c)+0],d=e[4*(l*t+c)+1],p=e[4*(l*t+c)+2];s.set(c,l,.2126*u+.7152*d+.0722*p)}for(var h=Math.ceil(t/8),f=Math.ceil(r/8),y=new o(h,f),v=0;v<f;v++)for(var g=0;g<h;g++){var m=0,b=1/0,S=0;for(l=0;l<8;l++)for(c=0;c<8;c++){var w=s.get(8*g+c,8*v+l);m+=w,b=Math.min(b,w),S=Math.max(S,w)}var P=m/Math.pow(8,2);if(S-b<=24&&(P=b/2,v>0&&g>0)){var _=(y.get(g,v-1)+2*y.get(g-1,v)+y.get(g-1,v-1))/4;b<_&&(P=_)}y.set(g,v,P)}var E=n.BitMatrix.createEmpty(t,r),C=null;for(a&&(C=n.BitMatrix.createEmpty(t,r)),v=0;v<f;v++)for(g=0;g<h;g++){for(var k=i(g,2,h-3),O=i(v,2,f-3),x=(m=0,-2);x<=2;x++)for(var I=-2;I<=2;I++)m+=y.get(k+x,O+I);var A=m/25;for(x=0;x<8;x++)for(I=0;I<8;I++){c=8*g+x,l=8*v+I;var M=s.get(c,l);E.set(c,l,M<=A),a&&C.set(c,l,!(M<=A))}}return a?{binarized:E,inverted:C}:{binarized:E}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(6),o=r(9),a=r(10);function s(e,t){for(var r=e^t,n=0;r;)n++,r&=r-1;return n}function c(e,t){return t<<1|e}var l=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],u=[function(e){return(e.y+e.x)%2==0},function(e){return e.y%2==0},function(e){return e.x%3==0},function(e){return(e.y+e.x)%3==0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2==0},function(e){return e.x*e.y%2+e.x*e.y%3==0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2==0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2==0}];function d(e,t,r){for(var i=u[r.dataMask],o=e.height,a=function(e){var t=17+4*e.versionNumber,r=n.BitMatrix.createEmpty(t,t);r.setRegion(0,0,9,9,!0),r.setRegion(t-8,0,8,9,!0),r.setRegion(0,t-8,9,8,!0);for(var i=0,o=e.alignmentPatternCenters;i<o.length;i++)for(var a=o[i],s=0,c=e.alignmentPatternCenters;s<c.length;s++){var l=c[s];6===a&&6===l||6===a&&l===t-7||a===t-7&&6===l||r.setRegion(a-2,l-2,5,5,!0)}return r.setRegion(6,9,1,t-17,!0),r.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(r.setRegion(t-11,0,3,6,!0),r.setRegion(0,t-11,6,3,!0)),r}(t),s=[],l=0,d=0,p=!0,h=o-1;h>0;h-=2){6===h&&h--;for(var f=0;f<o;f++)for(var y=p?o-1-f:f,v=0;v<2;v++){var g=h-v;if(!a.get(g,y)){d++;var m=e.get(g,y);i({y,x:g})&&(m=!m),l=c(m,l),8===d&&(s.push(l),d=0,l=0)}}p=!p}return s}function p(e){var t=function(e){var t=e.height,r=Math.floor((t-17)/4);if(r<=6)return a.VERSIONS[r-1];for(var n=0,i=5;i>=0;i--)for(var o=t-9;o>=t-11;o--)n=c(e.get(o,i),n);var l=0;for(o=5;o>=0;o--)for(i=t-9;i>=t-11;i--)l=c(e.get(o,i),l);for(var u,d=1/0,p=0,h=a.VERSIONS;p<h.length;p++){var f=h[p];if(f.infoBits===n||f.infoBits===l)return f;var y=s(n,f.infoBits);y<d&&(u=f,d=y),(y=s(l,f.infoBits))<d&&(u=f,d=y)}return d<=3?u:void 0}(e);if(!t)return null;var r=function(e){for(var t=0,r=0;r<=8;r++)6!==r&&(t=c(e.get(r,8),t));for(var n=7;n>=0;n--)6!==n&&(t=c(e.get(8,n),t));var i=e.height,o=0;for(n=i-1;n>=i-7;n--)o=c(e.get(8,n),o);for(r=i-8;r<i;r++)o=c(e.get(r,8),o);for(var a=1/0,u=null,d=0,p=l;d<p.length;d++){var h=p[d],f=h.bits,y=h.formatInfo;if(f===t||f===o)return y;var v=s(t,f);v<a&&(u=y,a=v),t!==o&&(v=s(o,f))<a&&(u=y,a=v)}return a<=3?u:null}(e);if(!r)return null;var n=function(e,t,r){var n=t.errorCorrectionLevels[r],i=[],o=0;if(n.ecBlocks.forEach((function(e){for(var t=0;t<e.numBlocks;t++)i.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),o+=e.dataCodewordsPerBlock+n.ecCodewordsPerBlock})),e.length<o)return null;e=e.slice(0,o);for(var a=n.ecBlocks[0].dataCodewordsPerBlock,s=0;s<a;s++)for(var c=0,l=i;c<l.length;c++)l[c].codewords.push(e.shift());if(n.ecBlocks.length>1){var u=n.ecBlocks[0].numBlocks,d=n.ecBlocks[1].numBlocks;for(s=0;s<d;s++)i[u+s].codewords.push(e.shift())}for(;e.length>0;)for(var p=0,h=i;p<h.length;p++)h[p].codewords.push(e.shift());return i}(d(e,t,r),t,r.errorCorrectionLevel);if(!n)return null;for(var u=n.reduce((function(e,t){return e+t.numDataCodewords}),0),p=new Uint8ClampedArray(u),h=0,f=0,y=n;f<y.length;f++){var v=y[f],g=o.decode(v.codewords,v.codewords.length-v.numDataCodewords);if(!g)return null;for(var m=0;m<v.numDataCodewords;m++)p[h++]=g[m]}try{return i.decode(p,t.versionNumber)}catch(e){return null}}t.decode=function(e){if(null==e)return null;var t=p(e);if(t)return t;for(var r=0;r<e.width;r++)for(var n=r+1;n<e.height;n++)e.get(r,n)!==e.get(n,r)&&(e.set(r,n,!e.get(r,n)),e.set(n,r,!e.get(n,r)));return p(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(7),a=r(8);function s(e,t){for(var r=[],n="",i=[10,12,14][t],o=e.readBits(i);o>=3;){if((l=e.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var a=Math.floor(l/100),s=Math.floor(l/10)%10,c=l%10;r.push(48+a,48+s,48+c),n+=a.toString()+s.toString()+c.toString(),o-=3}if(2===o){if((l=e.readBits(7))>=100)throw new Error("Invalid numeric value above 99");a=Math.floor(l/10),s=l%10,r.push(48+a,48+s),n+=a.toString()+s.toString()}else if(1===o){var l;if((l=e.readBits(4))>=10)throw new Error("Invalid numeric value above 9");r.push(48+l),n+=l.toString()}return{bytes:r,text:n}}!function(e){e.Numeric="numeric",e.Alphanumeric="alphanumeric",e.Byte="byte",e.Kanji="kanji",e.ECI="eci"}(n=t.Mode||(t.Mode={})),function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI"}(i||(i={}));var c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(e,t){for(var r=[],n="",i=[9,11,13][t],o=e.readBits(i);o>=2;){var a=e.readBits(11),s=Math.floor(a/45),l=a%45;r.push(c[s].charCodeAt(0),c[l].charCodeAt(0)),n+=c[s]+c[l],o-=2}return 1===o&&(s=e.readBits(6),r.push(c[s].charCodeAt(0)),n+=c[s]),{bytes:r,text:n}}function u(e,t){for(var r=[],n="",i=[8,16,16][t],o=e.readBits(i),a=0;a<o;a++){var s=e.readBits(8);r.push(s)}try{n+=decodeURIComponent(r.map((function(e){return"%"+("0"+e.toString(16)).substr(-2)})).join(""))}catch(e){}return{bytes:r,text:n}}function d(e,t){for(var r=[],n="",i=[8,10,12][t],o=e.readBits(i),s=0;s<o;s++){var c=e.readBits(13),l=Math.floor(c/192)<<8|c%192;l+=l<7936?33088:49472,r.push(l>>8,255&l),n+=String.fromCharCode(a.shiftJISTable[l])}return{bytes:r,text:n}}t.decode=function(e,t){for(var r,a,c,p,h=new o.BitStream(e),f=t<=9?0:t<=26?1:2,y={text:"",bytes:[],chunks:[],version:t};h.available()>=4;){var v=h.readBits(4);if(v===i.Terminator)return y;if(v===i.ECI)0===h.readBits(1)?y.chunks.push({type:n.ECI,assignmentNumber:h.readBits(7)}):0===h.readBits(1)?y.chunks.push({type:n.ECI,assignmentNumber:h.readBits(14)}):0===h.readBits(1)?y.chunks.push({type:n.ECI,assignmentNumber:h.readBits(21)}):y.chunks.push({type:n.ECI,assignmentNumber:-1});else if(v===i.Numeric){var g=s(h,f);y.text+=g.text,(r=y.bytes).push.apply(r,g.bytes),y.chunks.push({type:n.Numeric,text:g.text})}else if(v===i.Alphanumeric){var m=l(h,f);y.text+=m.text,(a=y.bytes).push.apply(a,m.bytes),y.chunks.push({type:n.Alphanumeric,text:m.text})}else if(v===i.Byte){var b=u(h,f);y.text+=b.text,(c=y.bytes).push.apply(c,b.bytes),y.chunks.push({type:n.Byte,bytes:b.bytes,text:b.text})}else if(v===i.Kanji){var S=d(h,f);y.text+=S.text,(p=y.bytes).push.apply(p,S.bytes),y.chunks.push({type:n.Kanji,bytes:S.bytes,text:S.text})}}if(0===h.available()||0===h.readBits(h.available()))return y}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var r=8-this.bitOffset,n=e<r?e:r,i=255>>8-n<<(o=r-n);t=(this.bytes[this.byteOffset]&i)>>o,e-=n,this.bitOffset+=n,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;var o;if(e>0)i=255>>(o=8-e)<<o,t=t<<e|(this.bytes[this.byteOffset]&i)>>o,this.bitOffset+=e}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(2);t.decode=function(e,t){var r=new Uint8ClampedArray(e.length);r.set(e);for(var o=new n.default(285,256,0),a=new i.default(o,r),s=new Uint8ClampedArray(t),c=!1,l=0;l<t;l++){var u=a.evaluateAt(o.exp(l+o.generatorBase));s[s.length-1-l]=u,0!==u&&(c=!0)}if(!c)return r;var d=new i.default(o,s),p=function(e,t,r,n){var i;t.degree()<r.degree()&&(t=(i=[r,t])[0],r=i[1]);for(var o=t,a=r,s=e.zero,c=e.one;a.degree()>=n/2;){var l=o,u=s;if(s=c,(o=a).isZero())return null;a=l;for(var d=e.zero,p=o.getCoefficient(o.degree()),h=e.inverse(p);a.degree()>=o.degree()&&!a.isZero();){var f=a.degree()-o.degree(),y=e.multiply(a.getCoefficient(a.degree()),h);d=d.addOrSubtract(e.buildMonomial(f,y)),a=a.addOrSubtract(o.multiplyByMonomial(f,y))}if(c=d.multiplyPoly(s).addOrSubtract(u),a.degree()>=o.degree())return null}var v=c.getCoefficient(0);if(0===v)return null;var g=e.inverse(v);return[c.multiply(g),a.multiply(g)]}(o,o.buildMonomial(t,1),d,t);if(null===p)return null;var h=function(e,t){var r=t.degree();if(1===r)return[t.getCoefficient(1)];for(var n=new Array(r),i=0,o=1;o<e.size&&i<r;o++)0===t.evaluateAt(o)&&(n[i]=e.inverse(o),i++);return i!==r?null:n}(o,p[0]);if(null==h)return null;for(var f=function(e,t,r){for(var i=r.length,o=new Array(i),a=0;a<i;a++){for(var s=e.inverse(r[a]),c=1,l=0;l<i;l++)a!==l&&(c=e.multiply(c,n.addOrSubtractGF(1,e.multiply(r[l],s))));o[a]=e.multiply(t.evaluateAt(s),e.inverse(c)),0!==e.generatorBase&&(o[a]=e.multiply(o[a],s))}return o}(o,p[1],h),y=0;y<h.length;y++){var v=r.length-1-o.log(h[y]);if(v<0)return null;r[v]=n.addOrSubtractGF(r[v],f[y])}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);function i(e,t,r,n){var i=e.x-t.x+r.x-n.x,o=e.y-t.y+r.y-n.y;if(0===i&&0===o)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:r.x-t.x,a22:r.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var a=t.x-r.x,s=n.x-r.x,c=t.y-r.y,l=n.y-r.y,u=a*l-s*c,d=(i*l-s*o)/u,p=(a*o-i*c)/u;return{a11:t.x-e.x+d*t.x,a12:t.y-e.y+d*t.y,a13:d,a21:n.x-e.x+p*n.x,a22:n.y-e.y+p*n.y,a23:p,a31:e.x,a32:e.y,a33:1}}t.extract=function(e,t){for(var r,o,a=function(e,t,r,n){var o=i(e,t,r,n);return{a11:o.a22*o.a33-o.a23*o.a32,a12:o.a13*o.a32-o.a12*o.a33,a13:o.a12*o.a23-o.a13*o.a22,a21:o.a23*o.a31-o.a21*o.a33,a22:o.a11*o.a33-o.a13*o.a31,a23:o.a13*o.a21-o.a11*o.a23,a31:o.a21*o.a32-o.a22*o.a31,a32:o.a12*o.a31-o.a11*o.a32,a33:o.a11*o.a22-o.a12*o.a21}}({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),s=i(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),c=(o=a,{a11:(r=s).a11*o.a11+r.a21*o.a12+r.a31*o.a13,a12:r.a12*o.a11+r.a22*o.a12+r.a32*o.a13,a13:r.a13*o.a11+r.a23*o.a12+r.a33*o.a13,a21:r.a11*o.a21+r.a21*o.a22+r.a31*o.a23,a22:r.a12*o.a21+r.a22*o.a22+r.a32*o.a23,a23:r.a13*o.a21+r.a23*o.a22+r.a33*o.a23,a31:r.a11*o.a31+r.a21*o.a32+r.a31*o.a33,a32:r.a12*o.a31+r.a22*o.a32+r.a32*o.a33,a33:r.a13*o.a31+r.a23*o.a32+r.a33*o.a33}),l=n.BitMatrix.createEmpty(t.dimension,t.dimension),u=function(e,t){var r=c.a13*e+c.a23*t+c.a33;return{x:(c.a11*e+c.a21*t+c.a31)/r,y:(c.a12*e+c.a22*t+c.a32)/r}},d=0;d<t.dimension;d++)for(var p=0;p<t.dimension;p++){var h=u(p+.5,d+.5);l.set(p,d,e.get(Math.floor(h.x),Math.floor(h.y)))}return{matrix:l,mappingFunction:u}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function i(e){return e.reduce((function(e,t){return e+t}))}function o(e,t,r,i){var o,a,s,c,l=[{x:Math.floor(e.x),y:Math.floor(e.y)}],u=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);u?(o=Math.floor(e.y),a=Math.floor(e.x),s=Math.floor(t.y),c=Math.floor(t.x)):(o=Math.floor(e.x),a=Math.floor(e.y),s=Math.floor(t.x),c=Math.floor(t.y));for(var d=Math.abs(s-o),p=Math.abs(c-a),h=Math.floor(-d/2),f=o<s?1:-1,y=a<c?1:-1,v=!0,g=o,m=a;g!==s+f;g+=f){var b=u?m:g,S=u?g:m;if(r.get(b,S)!==v&&(v=!v,l.push({x:b,y:S}),l.length===i+1))break;if((h+=p)>0){if(m===c)break;m+=y,h-=d}}for(var w=[],P=0;P<i;P++)l[P]&&l[P+1]?w.push(n(l[P],l[P+1])):w.push(0);return w}function a(e,t,r,n){var i,a=t.y-e.y,s=t.x-e.x,c=o(e,t,r,Math.ceil(n/2)),l=o(e,{x:e.x-s,y:e.y-a},r,Math.ceil(n/2)),u=c.shift()+l.shift()-1;return(i=l.concat(u)).concat.apply(i,c)}function s(e,t){var r=i(e)/i(t),n=0;return t.forEach((function(t,i){n+=Math.pow(e[i]-t*r,2)})),{averageSize:r,error:n}}function c(e,t,r){try{var n=a(e,{x:-1,y:e.y},r,t.length),i=a(e,{x:e.x,y:-1},r,t.length),o=a(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},r,t.length),c=a(e,{x:Math.min(r.width,e.x+e.y)+1,y:Math.min(r.height,e.y+e.x)+1},r,t.length),l=s(n,t),u=s(i,t),d=s(o,t),p=s(c,t),h=Math.sqrt(l.error*l.error+u.error*u.error+d.error*d.error+p.error*p.error),f=(l.averageSize+u.averageSize+d.averageSize+p.averageSize)/4;return h+(Math.pow(l.averageSize-f,2)+Math.pow(u.averageSize-f,2)+Math.pow(d.averageSize-f,2)+Math.pow(p.averageSize-f,2))/f}catch(e){return 1/0}}function l(e,t){for(var r=Math.round(t.x);e.get(r,Math.round(t.y));)r--;for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n++;for(var i=(r+n)/2,o=Math.round(t.y);e.get(Math.round(i),o);)o--;for(var a=Math.round(t.y);e.get(Math.round(i),a);)a++;return{x:i,y:(o+a)/2}}function u(e,t,r,o,s){var l,u,d;try{l=function(e,t,r,o){var s=(i(a(e,r,o,5))/7+i(a(e,t,o,5))/7+i(a(r,e,o,5))/7+i(a(t,e,o,5))/7)/4;if(s<1)throw new Error("Invalid module size");var c=Math.round(n(e,t)/s),l=Math.round(n(e,r)/s),u=Math.floor((c+l)/2)+7;switch(u%4){case 0:u++;break;case 2:u--}return{dimension:u,moduleSize:s}}(o,r,s,e),u=l.dimension,d=l.moduleSize}catch(e){return null}var p=r.x-o.x+s.x,h=r.y-o.y+s.y,f=(n(o,s)+n(o,r))/2/d,y=1-3/f,v={x:o.x+y*(p-o.x),y:o.y+y*(h-o.y)},g=t.map((function(t){var r=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,o=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.floor(r),Math.floor(o))){var a=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1];return i(a),{x:r,y:o,score:c({x:Math.floor(r),y:Math.floor(o)},[1,1,1],e)+n({x:r,y:o},v)}}})).filter((function(e){return!!e})).sort((function(e,t){return e.score-t.score}));return{alignmentPattern:f>=15&&g.length?g[0]:v,dimension:u}}t.locate=function(e){for(var t=[],r=[],o=[],a=[],s=function(n){for(var s=0,c=!1,l=[0,0,0,0,0],u=function(t){var o=e.get(t,n);if(o===c)s++;else{l=[l[1],l[2],l[3],l[4],s],s=1,c=o;var u=i(l)/7,d=Math.abs(l[0]-u)<u&&Math.abs(l[1]-u)<u&&Math.abs(l[2]-3*u)<3*u&&Math.abs(l[3]-u)<u&&Math.abs(l[4]-u)<u&&!o,p=i(l.slice(-3))/3,h=Math.abs(l[2]-p)<p&&Math.abs(l[3]-p)<p&&Math.abs(l[4]-p)<p&&o;if(d){var f=t-l[3]-l[4],y=f-l[2],v={startX:y,endX:f,y:n};(g=r.filter((function(e){return y>=e.bottom.startX&&y<=e.bottom.endX||f>=e.bottom.startX&&y<=e.bottom.endX||y<=e.bottom.startX&&f>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5}))).length>0?g[0].bottom=v:r.push({top:v,bottom:v})}if(h){var g,m=t-l[4],b=m-l[3];v={startX:b,y:n,endX:m},(g=a.filter((function(e){return b>=e.bottom.startX&&b<=e.bottom.endX||m>=e.bottom.startX&&b<=e.bottom.endX||b<=e.bottom.startX&&m>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5}))).length>0?g[0].bottom=v:a.push({top:v,bottom:v})}}},d=-1;d<=e.width;d++)u(d);t.push.apply(t,r.filter((function(e){return e.bottom.y!==n&&e.bottom.y-e.top.y>=2}))),r=r.filter((function(e){return e.bottom.y===n})),o.push.apply(o,a.filter((function(e){return e.bottom.y!==n}))),a=a.filter((function(e){return e.bottom.y===n}))},d=0;d<=e.height;d++)s(d);t.push.apply(t,r.filter((function(e){return e.bottom.y-e.top.y>=2}))),o.push.apply(o,a);var p=t.filter((function(e){return e.bottom.y-e.top.y>=2})).map((function(t){var r=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,n=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(r),Math.round(n))){var o=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],a=i(o)/o.length;return{score:c({x:Math.round(r),y:Math.round(n)},[1,1,3,1,1],e),x:r,y:n,size:a}}})).filter((function(e){return!!e})).sort((function(e,t){return e.score-t.score})).map((function(e,t,r){if(t>4)return null;var n=r.filter((function(e,r){return t!==r})).map((function(t){return{x:t.x,y:t.y,score:t.score+Math.pow(t.size-e.size,2)/e.size,size:t.size}})).sort((function(e,t){return e.score-t.score}));if(n.length<2)return null;var i=e.score+n[0].score+n[1].score;return{points:[e].concat(n.slice(0,2)),score:i}})).filter((function(e){return!!e})).sort((function(e,t){return e.score-t.score}));if(0===p.length)return null;var h=function(e,t,r){var i,o,a,s,c,l,u,d=n(e,t),p=n(t,r),h=n(e,r);return p>=d&&p>=h?(c=(i=[t,e,r])[0],l=i[1],u=i[2]):h>=p&&h>=d?(c=(o=[e,t,r])[0],l=o[1],u=o[2]):(c=(a=[e,r,t])[0],l=a[1],u=a[2]),(u.x-l.x)*(c.y-l.y)-(u.y-l.y)*(c.x-l.x)<0&&(c=(s=[u,c])[0],u=s[1]),{bottomLeft:c,topLeft:l,topRight:u}}(p[0].points[0],p[0].points[1],p[0].points[2]),f=h.topRight,y=h.topLeft,v=h.bottomLeft,g=u(e,o,f,y,v),m=[];g&&m.push({alignmentPattern:{x:g.alignmentPattern.x,y:g.alignmentPattern.y},bottomLeft:{x:v.x,y:v.y},dimension:g.dimension,topLeft:{x:y.x,y:y.y},topRight:{x:f.x,y:f.y}});var b=l(e,f),S=l(e,y),w=l(e,v),P=u(e,o,b,S,w);return P&&m.push({alignmentPattern:{x:P.alignmentPattern.x,y:P.alignmentPattern.y},bottomLeft:{x:w.x,y:w.y},topLeft:{x:S.x,y:S.y},topRight:{x:b.x,y:b.y},dimension:P.dimension}),0===m.length?null:m}}]).default},e.exports=t()},77:(e,t,r)=>{var n=r(814)(r(5293),"DataView");e.exports=n},4946:(e,t,r)=>{var n=r(1335),i=r(1149),o=r(5680),a=r(1123),s=r(8211);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},7378:(e,t,r)=>{var n=r(655),i=r(5479),o=r(8287),a=r(7318),s=r(8757);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},1122:(e,t,r)=>{var n=r(814)(r(5293),"Map");e.exports=n},3235:(e,t,r)=>{var n=r(7521),i=r(9581),o=r(1806),a=r(4353),s=r(445);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},6450:(e,t,r)=>{var n=r(814)(r(5293),"Promise");e.exports=n},4651:(e,t,r)=>{var n=r(814)(r(5293),"Set");e.exports=n},2775:(e,t,r)=>{var n=r(3235),i=r(7066),o=r(714);function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},6573:(e,t,r)=>{var n=r(7378),i=r(2571),o=r(8864),a=r(8385),s=r(8262),c=r(7121);function l(e){var t=this.__data__=new n(e);this.size=t.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=c,e.exports=l},1767:(e,t,r)=>{var n=r(5293).Symbol;e.exports=n},9620:(e,t,r)=>{var n=r(5293).Uint8Array;e.exports=n},5120:(e,t,r)=>{var n=r(814)(r(5293),"WeakMap");e.exports=n},7747:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},9598:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}},3835:(e,t,r)=>{var n=r(55),i=r(5665),o=r(7945),a=r(8432),s=r(8353),c=r(9258),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),u=!r&&i(e),d=!r&&!u&&a(e),p=!r&&!u&&!d&&c(e),h=r||u||d||p,f=h?n(e.length,String):[],y=f.length;for(var v in e)!t&&!l.call(e,v)||h&&("length"==v||d&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,y))||f.push(v);return f}},665:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},3375:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},5998:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},1267:(e,t,r)=>{var n=r(7884),i=r(1887),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var a=e[t];o.call(e,t)&&i(a,r)&&(void 0!==r||t in e)||n(e,t,r)}},5019:(e,t,r)=>{var n=r(1887);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},1581:(e,t,r)=>{var n=r(1689),i=r(8814);e.exports=function(e,t){return e&&n(t,i(t),e)}},471:(e,t,r)=>{var n=r(1689),i=r(7178);e.exports=function(e,t){return e&&n(t,i(t),e)}},7884:(e,t,r)=>{var n=r(3473);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},1686:(e,t,r)=>{var n=r(6573),i=r(7747),o=r(1267),a=r(1581),s=r(471),c=r(3004),l=r(911),u=r(1396),d=r(4347),p=r(8018),h=r(3e3),f=r(5673),y=r(7748),v=r(1632),g=r(3127),m=r(7945),b=r(8432),S=r(8847),w=r(5163),P=r(37),_=r(8814),E=r(7178),C="[object Arguments]",k="[object Function]",O="[object Object]",x={};x[C]=x["[object Array]"]=x["[object ArrayBuffer]"]=x["[object DataView]"]=x["[object Boolean]"]=x["[object Date]"]=x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Map]"]=x["[object Number]"]=x[O]=x["[object RegExp]"]=x["[object Set]"]=x["[object String]"]=x["[object Symbol]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x["[object Error]"]=x[k]=x["[object WeakMap]"]=!1,e.exports=function e(t,r,I,A,M,D){var R,T=1&r,N=2&r,j=4&r;if(I&&(R=M?I(t,A,M,D):I(t)),void 0!==R)return R;if(!w(t))return t;var B=m(t);if(B){if(R=y(t),!T)return l(t,R)}else{var F=f(t),L=F==k||"[object GeneratorFunction]"==F;if(b(t))return c(t,T);if(F==O||F==C||L&&!M){if(R=N||L?{}:g(t),!T)return N?d(t,s(R,t)):u(t,a(R,t))}else{if(!x[F])return M?t:{};R=v(t,F,T)}}D||(D=new n);var K=D.get(t);if(K)return K;D.set(t,R),P(t)?t.forEach((function(n){R.add(e(n,r,I,n,t,D))})):S(t)&&t.forEach((function(n,i){R.set(i,e(n,r,I,i,t,D))}));var U=B?void 0:(j?N?h:p:N?E:_)(t);return i(U||t,(function(n,i){U&&(n=t[i=n]),o(R,i,e(n,r,I,i,t,D))})),R}},6646:(e,t,r)=>{var n=r(5163),i=Object.create,o=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=o},849:(e,t,r)=>{var n=r(2629),i=r(8119)(n);e.exports=i},2783:(e,t,r)=>{var n=r(8544)();e.exports=n},2629:(e,t,r)=>{var n=r(2783),i=r(8814);e.exports=function(e,t){return e&&n(e,t,i)}},331:(e,t,r)=>{var n=r(1173),i=r(6642);e.exports=function(e,t){for(var r=0,o=(t=n(t,e)).length;null!=e&&r<o;)e=e[i(t[r++])];return r&&r==o?e:void 0}},8097:(e,t,r)=>{var n=r(3375),i=r(7945);e.exports=function(e,t,r){var o=t(e);return i(e)?o:n(o,r(e))}},6947:(e,t,r)=>{var n=r(1767),i=r(568),o=r(8199),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},5245:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},749:(e,t,r)=>{var n=r(6947),i=r(567);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},8059:(e,t,r)=>{var n=r(7682),i=r(567);e.exports=function e(t,r,o,a,s){return t===r||(null==t||null==r||!i(t)&&!i(r)?t!=t&&r!=r:n(t,r,o,a,e,s))}},7682:(e,t,r)=>{var n=r(6573),i=r(6518),o=r(8162),a=r(5215),s=r(5673),c=r(7945),l=r(8432),u=r(9258),d="[object Arguments]",p="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,y,v,g){var m=c(e),b=c(t),S=m?p:s(e),w=b?p:s(t),P=(S=S==d?h:S)==h,_=(w=w==d?h:w)==h,E=S==w;if(E&&l(e)){if(!l(t))return!1;m=!0,P=!1}if(E&&!P)return g||(g=new n),m||u(e)?i(e,t,r,y,v,g):o(e,t,S,r,y,v,g);if(!(1&r)){var C=P&&f.call(e,"__wrapped__"),k=_&&f.call(t,"__wrapped__");if(C||k){var O=C?e.value():e,x=k?t.value():t;return g||(g=new n),v(O,x,r,y,g)}}return!!E&&(g||(g=new n),a(e,t,r,y,v,g))}},3220:(e,t,r)=>{var n=r(5673),i=r(567);e.exports=function(e){return i(e)&&"[object Map]"==n(e)}},1665:(e,t,r)=>{var n=r(6573),i=r(8059);e.exports=function(e,t,r,o){var a=r.length,s=a,c=!o;if(null==e)return!s;for(e=Object(e);a--;){var l=r[a];if(c&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){var u=(l=r[a])[0],d=e[u],p=l[1];if(c&&l[2]){if(void 0===d&&!(u in e))return!1}else{var h=new n;if(o)var f=o(d,p,u,e,t,h);if(!(void 0===f?i(p,d,3,o,h):f))return!1}}return!0}},2607:(e,t,r)=>{var n=r(7786),i=r(3545),o=r(5163),a=r(6072),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(n(e)?p:s).test(a(e))}},1323:(e,t,r)=>{var n=r(5673),i=r(567);e.exports=function(e){return i(e)&&"[object Set]"==n(e)}},9032:(e,t,r)=>{var n=r(6947),i=r(6182),o=r(567),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[n(e)]}},6004:(e,t,r)=>{var n=r(3659),i=r(3174),o=r(8168),a=r(7945),s=r(2863);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):n(e):s(e)}},9334:(e,t,r)=>{var n=r(8614),i=r(3043),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},1177:(e,t,r)=>{var n=r(5163),i=r(8614),o=r(5932),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=i(e),r=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&r.push(s);return r}},1930:(e,t,r)=>{var n=r(849),i=r(522);e.exports=function(e,t){var r=-1,o=i(e)?Array(e.length):[];return n(e,(function(e,n,i){o[++r]=t(e,n,i)})),o}},3659:(e,t,r)=>{var n=r(1665),i=r(2265),o=r(9099);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},3174:(e,t,r)=>{var n=r(8059),i=r(839),o=r(2303),a=r(9453),s=r(635),c=r(9099),l=r(6642);e.exports=function(e,t){return a(e)&&s(t)?c(l(e),t):function(r){var a=i(r,e);return void 0===a&&a===t?o(r,e):n(t,a,3)}}},5943:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},7853:(e,t,r)=>{var n=r(331);e.exports=function(e){return function(t){return n(t,e)}}},55:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},3626:(e,t,r)=>{var n=r(1767),i=r(665),o=r(7945),a=r(2679),s=n?n.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r}},5871:e=>{e.exports=function(e){return function(t){return e(t)}}},403:e=>{e.exports=function(e,t){return e.has(t)}},4367:(e,t,r)=>{var n=r(8168);e.exports=function(e){return"function"==typeof e?e:n}},1173:(e,t,r)=>{var n=r(7945),i=r(9453),o=r(5788),a=r(3686);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:o(a(e))}},2768:(e,t,r)=>{var n=r(9620);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},3004:(e,t,r)=>{e=r.nmd(e);var n=r(5293),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}},9559:(e,t,r)=>{var n=r(2768);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},3721:e=>{var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},4294:(e,t,r)=>{var n=r(1767),i=n?n.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},3785:(e,t,r)=>{var n=r(2768);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},911:e=>{e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},1689:(e,t,r)=>{var n=r(1267),i=r(7884);e.exports=function(e,t,r,o){var a=!r;r||(r={});for(var s=-1,c=t.length;++s<c;){var l=t[s],u=o?o(r[l],e[l],l,r,e):void 0;void 0===u&&(u=e[l]),a?i(r,l,u):n(r,l,u)}return r}},1396:(e,t,r)=>{var n=r(1689),i=r(4866);e.exports=function(e,t){return n(e,i(e),t)}},4347:(e,t,r)=>{var n=r(1689),i=r(2834);e.exports=function(e,t){return n(e,i(e),t)}},4205:(e,t,r)=>{var n=r(5293)["__core-js_shared__"];e.exports=n},8119:(e,t,r)=>{var n=r(522);e.exports=function(e,t){return function(r,i){if(null==r)return r;if(!n(r))return e(r,i);for(var o=r.length,a=t?o:-1,s=Object(r);(t?a--:++a<o)&&!1!==i(s[a],a,s););return r}}},8544:e=>{e.exports=function(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===r(o[c],c,o))break}return t}}},3473:(e,t,r)=>{var n=r(814),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},6518:(e,t,r)=>{var n=r(2775),i=r(5998),o=r(403);e.exports=function(e,t,r,a,s,c){var l=1&r,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var p=c.get(e),h=c.get(t);if(p&&h)return p==t&&h==e;var f=-1,y=!0,v=2&r?new n:void 0;for(c.set(e,t),c.set(t,e);++f<u;){var g=e[f],m=t[f];if(a)var b=l?a(m,g,f,t,e,c):a(g,m,f,e,t,c);if(void 0!==b){if(b)continue;y=!1;break}if(v){if(!i(t,(function(e,t){if(!o(v,t)&&(g===e||s(g,e,r,a,c)))return v.push(t)}))){y=!1;break}}else if(g!==m&&!s(g,m,r,a,c)){y=!1;break}}return c.delete(e),c.delete(t),y}},8162:(e,t,r)=>{var n=r(1767),i=r(9620),o=r(1887),a=r(6518),s=r(8273),c=r(8779),l=n?n.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,r,n,l,d,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=s;case"[object Set]":var f=1&n;if(h||(h=c),e.size!=t.size&&!f)return!1;var y=p.get(e);if(y)return y==t;n|=2,p.set(e,t);var v=a(h(e),h(t),n,l,d,p);return p.delete(e),v;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},5215:(e,t,r)=>{var n=r(8018),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,o,a,s){var c=1&r,l=n(e),u=l.length;if(u!=n(t).length&&!c)return!1;for(var d=u;d--;){var p=l[d];if(!(c?p in t:i.call(t,p)))return!1}var h=s.get(e),f=s.get(t);if(h&&f)return h==t&&f==e;var y=!0;s.set(e,t),s.set(t,e);for(var v=c;++d<u;){var g=e[p=l[d]],m=t[p];if(o)var b=c?o(m,g,p,t,e,s):o(g,m,p,e,t,s);if(!(void 0===b?g===m||a(g,m,r,o,s):b)){y=!1;break}v||(v="constructor"==p)}if(y&&!v){var S=e.constructor,w=t.constructor;S==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof w&&w instanceof w||(y=!1)}return s.delete(e),s.delete(t),y}},9680:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},8018:(e,t,r)=>{var n=r(8097),i=r(4866),o=r(8814);e.exports=function(e){return n(e,o,i)}},3e3:(e,t,r)=>{var n=r(8097),i=r(2834),o=r(7178);e.exports=function(e){return n(e,o,i)}},6284:(e,t,r)=>{var n=r(5142);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},2265:(e,t,r)=>{var n=r(635),i=r(8814);e.exports=function(e){for(var t=i(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,n(a)]}return t}},814:(e,t,r)=>{var n=r(2607),i=r(951);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},5755:(e,t,r)=>{var n=r(2723)(Object.getPrototypeOf,Object);e.exports=n},568:(e,t,r)=>{var n=r(1767),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=a.call(e);return n&&(t?e[s]=r:delete e[s]),i}},4866:(e,t,r)=>{var n=r(9598),i=r(6838),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},2834:(e,t,r)=>{var n=r(3375),i=r(5755),o=r(4866),a=r(6838),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,o(e)),e=i(e);return t}:a;e.exports=s},5673:(e,t,r)=>{var n=r(77),i=r(1122),o=r(6450),a=r(4651),s=r(5120),c=r(6947),l=r(6072),u="[object Map]",d="[object Promise]",p="[object Set]",h="[object WeakMap]",f="[object DataView]",y=l(n),v=l(i),g=l(o),m=l(a),b=l(s),S=c;(n&&S(new n(new ArrayBuffer(1)))!=f||i&&S(new i)!=u||o&&S(o.resolve())!=d||a&&S(new a)!=p||s&&S(new s)!=h)&&(S=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?l(r):"";if(n)switch(n){case y:return f;case v:return u;case g:return d;case m:return p;case b:return h}return t}),e.exports=S},951:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},6005:(e,t,r)=>{var n=r(1173),i=r(5665),o=r(7945),a=r(8353),s=r(6182),c=r(6642);e.exports=function(e,t,r){for(var l=-1,u=(t=n(t,e)).length,d=!1;++l<u;){var p=c(t[l]);if(!(d=null!=e&&r(e,p)))break;e=e[p]}return d||++l!=u?d:!!(u=null==e?0:e.length)&&s(u)&&a(p,u)&&(o(e)||i(e))}},1335:(e,t,r)=>{var n=r(6820);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},1149:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5680:(e,t,r)=>{var n=r(6820),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},1123:(e,t,r)=>{var n=r(6820),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},8211:(e,t,r)=>{var n=r(6820);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},7748:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},1632:(e,t,r)=>{var n=r(2768),i=r(9559),o=r(3721),a=r(4294),s=r(3785);e.exports=function(e,t,r){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return i(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,r);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},3127:(e,t,r)=>{var n=r(6646),i=r(5755),o=r(8614);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:n(i(e))}},8353:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},9453:(e,t,r)=>{var n=r(7945),i=r(2679),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},5142:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},3545:(e,t,r)=>{var n,i=r(4205),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},8614:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},635:(e,t,r)=>{var n=r(5163);e.exports=function(e){return e==e&&!n(e)}},655:e=>{e.exports=function(){this.__data__=[],this.size=0}},5479:(e,t,r)=>{var n=r(5019),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},8287:(e,t,r)=>{var n=r(5019);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},7318:(e,t,r)=>{var n=r(5019);e.exports=function(e){return n(this.__data__,e)>-1}},8757:(e,t,r)=>{var n=r(5019);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},7521:(e,t,r)=>{var n=r(4946),i=r(7378),o=r(1122);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},9581:(e,t,r)=>{var n=r(6284);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},1806:(e,t,r)=>{var n=r(6284);e.exports=function(e){return n(this,e).get(e)}},4353:(e,t,r)=>{var n=r(6284);e.exports=function(e){return n(this,e).has(e)}},445:(e,t,r)=>{var n=r(6284);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},8273:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},9099:e=>{e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},1286:(e,t,r)=>{var n=r(5798);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},6820:(e,t,r)=>{var n=r(814)(Object,"create");e.exports=n},3043:(e,t,r)=>{var n=r(2723)(Object.keys,Object);e.exports=n},5932:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},6924:(e,t,r)=>{e=r.nmd(e);var n=r(9680),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&n.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},8199:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2723:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},5293:(e,t,r)=>{var n=r(9680),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},7066:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},714:e=>{e.exports=function(e){return this.__data__.has(e)}},8779:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},2571:(e,t,r)=>{var n=r(7378);e.exports=function(){this.__data__=new n,this.size=0}},8864:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},8385:e=>{e.exports=function(e){return this.__data__.get(e)}},8262:e=>{e.exports=function(e){return this.__data__.has(e)}},7121:(e,t,r)=>{var n=r(7378),i=r(1122),o=r(3235);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(a)}return r.set(e,t),this.size=r.size,this}},5788:(e,t,r)=>{var n=r(1286),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,r,n,i){t.push(n?i.replace(o,"$1"):r||e)})),t}));e.exports=a},6642:(e,t,r)=>{var n=r(2679);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},6072:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7086:(e,t,r)=>{var n=r(1686);e.exports=function(e){return n(e,5)}},1887:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5423:(e,t,r)=>{var n=r(2629),i=r(4367);e.exports=function(e,t){return e&&n(e,i(t))}},839:(e,t,r)=>{var n=r(331);e.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},2303:(e,t,r)=>{var n=r(5245),i=r(6005);e.exports=function(e,t){return null!=e&&i(e,t,n)}},8168:e=>{e.exports=function(e){return e}},5665:(e,t,r)=>{var n=r(749),i=r(567),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},7945:e=>{var t=Array.isArray;e.exports=t},522:(e,t,r)=>{var n=r(7786),i=r(6182);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},8432:(e,t,r)=>{e=r.nmd(e);var n=r(5293),i=r(1218),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;e.exports=c},7786:(e,t,r)=>{var n=r(6947),i=r(5163);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},6182:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},8847:(e,t,r)=>{var n=r(3220),i=r(5871),o=r(6924),a=o&&o.isMap,s=a?i(a):n;e.exports=s},5163:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},567:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},7890:(e,t,r)=>{var n=r(6947),i=r(5755),o=r(567),a=Function.prototype,s=Object.prototype,c=a.toString,l=s.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=n(e))return!1;var t=i(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==u}},37:(e,t,r)=>{var n=r(1323),i=r(5871),o=r(6924),a=o&&o.isSet,s=a?i(a):n;e.exports=s},1953:(e,t,r)=>{var n=r(6947),i=r(7945),o=r(567);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==n(e)}},2679:(e,t,r)=>{var n=r(6947),i=r(567);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},9258:(e,t,r)=>{var n=r(9032),i=r(5871),o=r(6924),a=o&&o.isTypedArray,s=a?i(a):n;e.exports=s},8814:(e,t,r)=>{var n=r(3835),i=r(9334),o=r(522);e.exports=function(e){return o(e)?n(e):i(e)}},7178:(e,t,r)=>{var n=r(3835),i=r(1177),o=r(522);e.exports=function(e){return o(e)?n(e,!0):i(e)}},3183:(e,t,r)=>{var n=r(665),i=r(6004),o=r(1930),a=r(7945);e.exports=function(e,t){return(a(e)?n:o)(e,i(t,3))}},5798:(e,t,r)=>{var n=r(3235);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(i.Cache||n),r}i.Cache=n,e.exports=i},2863:(e,t,r)=>{var n=r(5943),i=r(7853),o=r(9453),a=r(6642);e.exports=function(e){return o(e)?n(a(e)):i(e)}},6838:e=>{e.exports=function(){return[]}},1218:e=>{e.exports=function(){return!1}},3686:(e,t,r)=>{var n=r(3626);e.exports=function(e){return null==e?"":n(e)}},3215:(e,t,r)=>{"use strict";var n=r(1378);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},3326:(e,t,r)=>{e.exports=r(3215)()},1378:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3733:(e,t,r)=>{var n;!function(i){var o=/^\s+/,a=/\s+$/,s=0,c=i.round,l=i.min,u=i.max,d=i.random;function p(e,t){if(t=t||{},(e=e||"")instanceof p)return e;if(!(this instanceof p))return new p(e,t);var r=function(e){var t={r:0,g:0,b:0},r=1,n=null,s=null,c=null,d=!1,p=!1;"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,r=!1;if(A[e])e=A[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=W.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=W.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=W.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=W.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=W.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=W.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=W.hex8.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),a:L(t[4]),format:r?"name":"hex8"};if(t=W.hex6.exec(e))return{r:N(t[1]),g:N(t[2]),b:N(t[3]),format:r?"name":"hex"};if(t=W.hex4.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),a:L(t[4]+""+t[4]),format:r?"name":"hex8"};if(t=W.hex3.exec(e))return{r:N(t[1]+""+t[1]),g:N(t[2]+""+t[2]),b:N(t[3]+""+t[3]),format:r?"name":"hex"};return!1}(e));"object"==typeof e&&(z(e.r)&&z(e.g)&&z(e.b)?(h=e.r,f=e.g,y=e.b,t={r:255*R(h,255),g:255*R(f,255),b:255*R(y,255)},d=!0,p="%"===String(e.r).substr(-1)?"prgb":"rgb"):z(e.h)&&z(e.s)&&z(e.v)?(n=B(e.s),s=B(e.v),t=function(e,t,r){e=6*R(e,360),t=R(t,100),r=R(r,100);var n=i.floor(e),o=e-n,a=r*(1-t),s=r*(1-o*t),c=r*(1-(1-o)*t),l=n%6;return{r:255*[r,s,a,a,c,r][l],g:255*[c,r,r,s,a,a][l],b:255*[a,a,c,r,r,s][l]}}(e.h,n,s),d=!0,p="hsv"):z(e.h)&&z(e.s)&&z(e.l)&&(n=B(e.s),c=B(e.l),t=function(e,t,r){var n,i,o;function a(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(e=R(e,360),t=R(t,100),r=R(r,100),0===t)n=i=o=r;else{var s=r<.5?r*(1+t):r+t-r*t,c=2*r-s;n=a(c,s,e+1/3),i=a(c,s,e),o=a(c,s,e-1/3)}return{r:255*n,g:255*i,b:255*o}}(e.h,n,c),d=!0,p="hsl"),e.hasOwnProperty("a")&&(r=e.a));var h,f,y;return r=D(r),{ok:d,format:e.format||p,r:l(255,u(t.r,0)),g:l(255,u(t.g,0)),b:l(255,u(t.b,0)),a:r}}(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=c(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=r.ok,this._tc_id=s++}function h(e,t,r){e=R(e,255),t=R(t,255),r=R(r,255);var n,i,o=u(e,t,r),a=l(e,t,r),s=(o+a)/2;if(o==a)n=i=0;else{var c=o-a;switch(i=s>.5?c/(2-o-a):c/(o+a),o){case e:n=(t-r)/c+(t<r?6:0);break;case t:n=(r-e)/c+2;break;case r:n=(e-t)/c+4}n/=6}return{h:n,s:i,l:s}}function f(e,t,r){e=R(e,255),t=R(t,255),r=R(r,255);var n,i,o=u(e,t,r),a=l(e,t,r),s=o,c=o-a;if(i=0===o?0:c/o,o==a)n=0;else{switch(o){case e:n=(t-r)/c+(t<r?6:0);break;case t:n=(r-e)/c+2;break;case r:n=(e-t)/c+4}n/=6}return{h:n,s:i,v:s}}function y(e,t,r,n){var i=[j(c(e).toString(16)),j(c(t).toString(16)),j(c(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function v(e,t,r,n){return[j(F(n)),j(c(e).toString(16)),j(c(t).toString(16)),j(c(r).toString(16))].join("")}function g(e,t){t=0===t?0:t||10;var r=p(e).toHsl();return r.s-=t/100,r.s=T(r.s),p(r)}function m(e,t){t=0===t?0:t||10;var r=p(e).toHsl();return r.s+=t/100,r.s=T(r.s),p(r)}function b(e){return p(e).desaturate(100)}function S(e,t){t=0===t?0:t||10;var r=p(e).toHsl();return r.l+=t/100,r.l=T(r.l),p(r)}function w(e,t){t=0===t?0:t||10;var r=p(e).toRgb();return r.r=u(0,l(255,r.r-c(-t/100*255))),r.g=u(0,l(255,r.g-c(-t/100*255))),r.b=u(0,l(255,r.b-c(-t/100*255))),p(r)}function P(e,t){t=0===t?0:t||10;var r=p(e).toHsl();return r.l-=t/100,r.l=T(r.l),p(r)}function _(e,t){var r=p(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,p(r)}function E(e){var t=p(e).toHsl();return t.h=(t.h+180)%360,p(t)}function C(e){var t=p(e).toHsl(),r=t.h;return[p(e),p({h:(r+120)%360,s:t.s,l:t.l}),p({h:(r+240)%360,s:t.s,l:t.l})]}function k(e){var t=p(e).toHsl(),r=t.h;return[p(e),p({h:(r+90)%360,s:t.s,l:t.l}),p({h:(r+180)%360,s:t.s,l:t.l}),p({h:(r+270)%360,s:t.s,l:t.l})]}function O(e){var t=p(e).toHsl(),r=t.h;return[p(e),p({h:(r+72)%360,s:t.s,l:t.l}),p({h:(r+216)%360,s:t.s,l:t.l})]}function x(e,t,r){t=t||6,r=r||30;var n=p(e).toHsl(),i=360/r,o=[p(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,o.push(p(n));return o}function I(e,t){t=t||6;for(var r=p(e).toHsv(),n=r.h,i=r.s,o=r.v,a=[],s=1/t;t--;)a.push(p({h:n,s:i,v:o})),o=(o+s)%1;return a}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,r,n=this.toRgb();return e=n.r/255,t=n.g/255,r=n.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:i.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=D(e),this._roundA=c(100*this._a)/100,this},toHsv:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=f(this._r,this._g,this._b),t=c(360*e.h),r=c(100*e.s),n=c(100*e.v);return 1==this._a?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=h(this._r,this._g,this._b),t=c(360*e.h),r=c(100*e.s),n=c(100*e.l);return 1==this._a?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return y(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,r,n,i){var o=[j(c(e).toString(16)),j(c(t).toString(16)),j(c(r).toString(16)),j(F(n))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*R(this._r,255))+"%",g:c(100*R(this._g,255))+"%",b:c(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*R(this._r,255))+"%, "+c(100*R(this._g,255))+"%, "+c(100*R(this._b,255))+"%)":"rgba("+c(100*R(this._r,255))+"%, "+c(100*R(this._g,255))+"%, "+c(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(M[y(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+v(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var i=p(e);r="#"+v(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return p(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(S,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(P,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(_,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(O,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},p.fromRatio=function(e,t){if("object"==typeof e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:B(e[n]));e=r}return p(e,t)},p.equals=function(e,t){return!(!e||!t)&&p(e).toRgbString()==p(t).toRgbString()},p.random=function(){return p.fromRatio({r:d(),g:d(),b:d()})},p.mix=function(e,t,r){r=0===r?0:r||50;var n=p(e).toRgb(),i=p(t).toRgb(),o=r/100;return p({r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a})},p.readability=function(e,t){var r=p(e),n=p(t);return(i.max(r.getLuminance(),n.getLuminance())+.05)/(i.min(r.getLuminance(),n.getLuminance())+.05)},p.isReadable=function(e,t,r){var n,i,o=p.readability(e,t);switch(i=!1,(n=function(e){var t,r;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==r&&"large"!==r&&(r="small");return{level:t,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},p.mostReadable=function(e,t,r){var n,i,o,a,s=null,c=0;i=(r=r||{}).includeFallbackColors,o=r.level,a=r.size;for(var l=0;l<t.length;l++)(n=p.readability(e,t[l]))>c&&(c=n,s=p(t[l]));return p.isReadable(e,s,{level:o,size:a})||!i?s:(r.includeFallbackColors=!1,p.mostReadable(e,["#fff","#000"],r))};var A=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=p.hexNames=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}(A);function D(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function R(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=l(t,u(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function T(e){return l(1,u(0,e))}function N(e){return parseInt(e,16)}function j(e){return 1==e.length?"0"+e:""+e}function B(e){return e<=1&&(e=100*e+"%"),e}function F(e){return i.round(255*parseFloat(e)).toString(16)}function L(e){return N(e)/255}var K,U,V,W=(U="[\\s|\\(]+("+(K="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",V="[\\s|\\(]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",{CSS_UNIT:new RegExp(K),rgb:new RegExp("rgb"+U),rgba:new RegExp("rgba"+V),hsl:new RegExp("hsl"+U),hsla:new RegExp("hsla"+V),hsv:new RegExp("hsv"+U),hsva:new RegExp("hsva"+V),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function z(e){return!!W.CSS_UNIT.exec(e)}e.exports?e.exports=p:void 0===(n=function(){return p}.call(t,r,t,e))||(e.exports=n)}(Math)},8092:(e,t)=>{"use strict";var r=60103,n=60106,i=60107,o=60108,a=60114,s=60109,c=60110,l=60112,u=60113,d=60120,p=60115,h=60116,f=60121,y=60122,v=60117,g=60129,m=60131;if("function"==typeof Symbol&&Symbol.for){var b=Symbol.for;r=b("react.element"),n=b("react.portal"),i=b("react.fragment"),o=b("react.strict_mode"),a=b("react.profiler"),s=b("react.provider"),c=b("react.context"),l=b("react.forward_ref"),u=b("react.suspense"),d=b("react.suspense_list"),p=b("react.memo"),h=b("react.lazy"),f=b("react.block"),y=b("react.server.block"),v=b("react.fundamental"),g=b("react.debug_trace_mode"),m=b("react.legacy_hidden")}function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case a:case o:case u:case d:return e;default:switch(e=e&&e.$$typeof){case c:case l:case h:case p:case s:return e;default:return t}}case n:return t}}}t.isContextConsumer=function(e){return S(e)===c}},9665:(e,t,r)=>{"use strict";e.exports=r(8092)},597:(e,t,r)=>{"use strict";var n,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(7294),a=(n=o)&&n.__esModule?n:{default:n};t.Z=function(e){var t=e.fill,r=void 0===t?"currentColor":t,n=e.width,o=void 0===n?24:n,s=e.height,c=void 0===s?24:s,l=e.style,u=void 0===l?{}:l,d=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["fill","width","height","style"]);return a.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:r,width:o,height:c},u)},d),a.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},3891:(e,t,r)=>{"use strict";var n,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(7294),a=(n=o)&&n.__esModule?n:{default:n};t.Z=function(e){var t=e.fill,r=void 0===t?"currentColor":t,n=e.width,o=void 0===n?24:n,s=e.height,c=void 0===s?24:s,l=e.style,u=void 0===l?{}:l,d=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["fill","width","height","style"]);return a.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:r,width:o,height:c},u)},d),a.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},5513:e=>{var t;self,t=()=>(()=>{var e={968:e=>{var t;self,t=()=>(()=>{var e={109:e=>{var t;self,t=()=>(()=>{"use strict";var e={31624:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContentDecoder=void 0,t.ContentDecoder=class{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;try{const r=t>0?e.substring(t):e,n=Buffer.from(r,"base64").toString();return JSON.parse(n)}catch(e){return{}}}encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const r=JSON.stringify(e),n=Buffer.from(r).toString("base64");return n.padStart(n.length+t,"0")}}},9457:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},19883:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayStringForContentType=t.ContentType=void 0,function(e){e.Any="*",e.Item="SF|Item",e.RootKey="SN|RootKey|NoSync",e.ItemsKey="SN|ItemsKey",e.EncryptedStorage="SN|EncryptedStorage",e.Privileges="SN|Privileges",e.Note="Note",e.Tag="Tag",e.SmartView="SN|SmartTag",e.Component="SN|Component",e.Editor="SN|Editor",e.ActionsExtension="Extension",e.UserPrefs="SN|UserPreferences",e.HistorySession="SN|HistorySession",e.Theme="SN|Theme",e.File="SN|File",e.FilesafeCredentials="SN|FileSafe|Credentials",e.FilesafeFileMetadata="SN|FileSafe|FileMetadata",e.FilesafeIntegration="SN|FileSafe|Integration",e.ExtensionRepo="SN|ExtensionRepo",e.Unknown="Unknown"}(r=t.ContentType||(t.ContentType={})),t.DisplayStringForContentType=function(e){return{[r.ActionsExtension]:"action-based extension",[r.Component]:"component",[r.Editor]:"editor",[r.File]:"file",[r.FilesafeCredentials]:"FileSafe credential",[r.FilesafeFileMetadata]:"FileSafe file",[r.FilesafeIntegration]:"FileSafe integration",[r.ItemsKey]:"encryption key",[r.Note]:"note",[r.SmartView]:"smart view",[r.Tag]:"tag",[r.Theme]:"theme",[r.UserPrefs]:"user preferences"}[e]}},56380:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},95892:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},63465:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},60187:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},37693:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},46923:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.EmailMessageIdentifier=void 0,(r=t.EmailMessageIdentifier||(t.EmailMessageIdentifier={})).WELCOME_EMAIL="WELCOME_EMAIL",r.ACCOUNT_CLAIM="ACCOUNT_CLAIM",r.ACCOUNT_RESET="ACCOUNT_RESET",r.ACTIVATION_CODE="ACTIVATION_CODE",r.VERSION_ADOPTION_REPORT="VERSION_ADOPTION_REPORT",r.FAILED_DROPBOX_BACKUP="FAILED_DROPBOX_BACKUP",r.FAILED_GOOGLE_DRIVE_BACKUP="FAILED_GOOGLE_DRIVE_BACKUP",r.FAILED_ONE_DRIVE_BACKUP="FAILED_ONE_DRIVE_BACKUP",r.DATA_BACKUP="DATA_BACKUP",r.FAILED_BACKUP_ATTACHMENT_TOO_BIG="FAILED_BACKUP_ATTACHMENT_TOO_BIG",r.OFFLINE_SUBSCRIPTION_ACCESS="OFFLINE_SUBSCRIPTION_ACCESS",r.SIGN_IN="SIGN_IN",r.SHARED_SUBSCRIPTION_INVITATION="SHARED_SUBSCRIPTION_INVITATION",r.ENCOURAGE_EMAIL_BACKUPS="ENCOURAGE_EMAIL_BACKUPS",r.ENCOURAGE_SUBSCRIPTION_PURCHASING="ENCOURAGE_SUBSCRIPTION_PURCHASING",r.EXIT_INTERVIEW="EXIT_INTERVIEW",r.STUDENT_DISCOUNT_REQUESTED="STUDENT_DISCOUNT_REQUESTED",r.STUDENT_DISCOUNT_APPROVED="STUDENT_DISCOUNT_APPROVED",r.MARKETING_CAMPAIGN_FILES="MARKETING_CAMPAIGN_FILES",r.PAYMENT_FAILED="PAYMENT_FAILED",r.SEND_INVOICE="SEND_INVOICE",r.DISCOUNT_NOTICE="DISCOUNT_NOTICE",r.REFUND_NOTICE="REFUND_NOTICE",r.REFUND_REQUESTED="REFUND_REQUESTED",r.RATE_ADJUSTMENT_NOTICE="RATE_ADJUSTMENT_NOTICE",r.WORKSPACE_INVITE_CREATED="WORKSPACE_INVITE_CREATED",r.EXIT_DISCOUNT="EXIT_DISCOUNT"},58162:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTag=void 0,(r=t.ErrorTag||(t.ErrorTag={})).MfaInvalid="mfa-invalid",r.MfaRequired="mfa-required",r.RefreshTokenInvalid="invalid-refresh-token",r.RefreshTokenExpired="expired-refresh-token",r.AccessTokenExpired="expired-access-token",r.ParametersInvalid="invalid-parameters",r.RevokedSession="revoked-session",r.AuthInvalid="invalid-auth",r.ReadOnlyAccess="read-only-access"},96148:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},44506:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},71411:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},81859:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},44021:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},15959:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},46278:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyParamsOrigination=void 0,(r=t.KeyParamsOrigination||(t.KeyParamsOrigination={})).Registration="registration",r.EmailChange="email-change",r.PasswordChange="password-change",r.ProtocolUpgrade="protocol-upgrade",r.PasscodeCreate="passcode-create",r.PasscodeChange="passcode-change"},57658:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentType=void 0,(r=t.PaymentType||(t.PaymentType={})).Initial="initial",r.Renewal="renewal"},23562:(e,t)=>{var r;function n(e,t){return Number(e)-Number(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isVersionLessThanOrEqualTo=t.leftVersionGreaterThanOrEqualToRight=t.compareVersions=t.protocolVersionFromEncryptedString=t.ProtocolVersionLength=t.isProtocolVersionExpired=t.ProtocolExpirationDates=t.ProtocolVersionLastNonrootItemsKey=t.ProtocolVersionLatest=t.ProtocolVersion=void 0,function(e){e.V001="001",e.V002="002",e.V003="003",e.V004="004",e.V005="005"}(r=t.ProtocolVersion||(t.ProtocolVersion={})),t.ProtocolVersionLatest=r.V004,t.ProtocolVersionLastNonrootItemsKey=r.V003,t.ProtocolExpirationDates=Object.freeze({[r.V001]:Date.parse("2018-01-01"),[r.V002]:Date.parse("2020-01-01")}),t.isProtocolVersionExpired=function(e){const r=t.ProtocolExpirationDates[e];return!!r&&(new Date).getTime()>r},t.ProtocolVersionLength=3,t.protocolVersionFromEncryptedString=function(e){const n=e.substring(0,t.ProtocolVersionLength);if(Object.values(r).includes(n))return n;throw Error("Unrecognized protocol version ".concat(n))},t.compareVersions=n,t.leftVersionGreaterThanOrEqualToRight=function(e,t){return n(e,t)>=0},t.isVersionLessThanOrEqualTo=function(e,t){return n(e,t)<=0}},89384:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaidRoles=void 0;const n=r(16374);t.PaidRoles=[n.RoleName.CoreUser,n.RoleName.PlusUser,n.RoleName.ProUser]},16374:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.RoleName=void 0,(r=t.RoleName||(t.RoleName={})).CoreUser="CORE_USER",r.PlusUser="PLUS_USER",r.ProUser="PRO_USER",r.FilesBetaUser="FILES_BETA_USER"},4160:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionBillingFrequency=void 0,(r=t.SubscriptionBillingFrequency||(t.SubscriptionBillingFrequency={}))[r.Monthly=1]="Monthly",r[r.Annual=12]="Annual"},38449:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionName=void 0,(r=t.SubscriptionName||(t.SubscriptionName={})).PlusPlan="PLUS_PLAN",r.ProPlan="PRO_PLAN"},20494:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},47781:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserRequestType=void 0,(t.UserRequestType||(t.UserRequestType={})).ExitDiscount="exit-discount"},1649:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UuidValidator=void 0,t.UuidValidator=class{constructor(){var e,t;t=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i,(e="UUID_REGEX")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}validate(e){return null!==String(e).toLowerCase().match(this.UUID_REGEX)}}},18851:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},93726:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceAccessLevel=void 0,(r=t.WorkspaceAccessLevel||(t.WorkspaceAccessLevel={})).Owner="owner",r.Admin="admin",r.ReadOnly="read-only",r.WriteAndRead="write-and-read"},6976:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceType=void 0,(r=t.WorkspaceType||(t.WorkspaceType={})).Root="root",r.Team="team",r.Private="private"},8404:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceUserStatus=void 0,(r=t.WorkspaceUserStatus||(t.WorkspaceUserStatus={})).Active="active",r.PendingKeyshare="pending-keyshare"},31679:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(19883),t),i(r(31624),t),i(r(9457),t),i(r(56380),t),i(r(63465),t),i(r(60187),t),i(r(37693),t),i(r(95892),t),i(r(46923),t),i(r(58162),t),i(r(96148),t),i(r(44506),t),i(r(71411),t),i(r(81859),t),i(r(44021),t),i(r(15959),t),i(r(46278),t),i(r(57658),t),i(r(23562),t),i(r(89384),t),i(r(16374),t),i(r(4160),t),i(r(38449),t),i(r(20494),t),i(r(76972),t),i(r(47781),t),i(r(1649),t),i(r(18851),t),i(r(93726),t),i(r(6976),t),i(r(8404),t)},10256:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(31679),t)},29606:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CloudProvider=void 0,(r=t.CloudProvider||(t.CloudProvider={})).Dropbox="Dropbox",r.Google="Google Drive",r.OneDrive="OneDrive"},23234:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DropboxBackupFrequency=void 0,(r=t.DropboxBackupFrequency||(t.DropboxBackupFrequency={})).Disabled="disabled",r.Daily="daily",r.Weekly="weekly"},60468:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.EmailBackupFrequency=void 0,(r=t.EmailBackupFrequency||(t.EmailBackupFrequency={})).Disabled="disabled",r.Daily="daily",r.Weekly="weekly"},53757:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleDriveBackupFrequency=void 0,(r=t.GoogleDriveBackupFrequency||(t.GoogleDriveBackupFrequency={})).Disabled="disabled",r.Daily="daily",r.Weekly="weekly"},51032:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},93063:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LogSessionUserAgentOption=void 0,(r=t.LogSessionUserAgentOption||(t.LogSessionUserAgentOption={})).Disabled="disabled",r.Enabled="enabled"},50722:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MuteFailedBackupsEmailsOption=void 0,(r=t.MuteFailedBackupsEmailsOption||(t.MuteFailedBackupsEmailsOption={})).Muted="muted",r.NotMuted="not_muted"},92360:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MuteFailedCloudBackupsEmailsOption=void 0,(r=t.MuteFailedCloudBackupsEmailsOption||(t.MuteFailedCloudBackupsEmailsOption={})).Muted="muted",r.NotMuted="not_muted"},35325:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MuteMarketingEmailsOption=void 0,(r=t.MuteMarketingEmailsOption||(t.MuteMarketingEmailsOption={})).Muted="muted",r.NotMuted="not_muted"},84395:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MuteSignInEmailsOption=void 0,(r=t.MuteSignInEmailsOption||(t.MuteSignInEmailsOption={})).Muted="muted",r.NotMuted="not_muted"},14822:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.OneDriveBackupFrequency=void 0,(r=t.OneDriveBackupFrequency||(t.OneDriveBackupFrequency={})).Disabled="disabled",r.Daily="daily",r.Weekly="weekly"},54342:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},78245:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SettingName=void 0,(r=t.SettingName||(t.SettingName={})).MfaSecret="MFA_SECRET",r.ExtensionKey="EXTENSION_KEY",r.EmailBackupFrequency="EMAIL_BACKUP_FREQUENCY",r.DropboxBackupFrequency="DROPBOX_BACKUP_FREQUENCY",r.DropboxBackupToken="DROPBOX_BACKUP_TOKEN",r.OneDriveBackupFrequency="ONE_DRIVE_BACKUP_FREQUENCY",r.OneDriveBackupToken="ONE_DRIVE_BACKUP_TOKEN",r.GoogleDriveBackupFrequency="GOOGLE_DRIVE_BACKUP_FREQUENCY",r.GoogleDriveBackupToken="GOOGLE_DRIVE_BACKUP_TOKEN",r.MuteFailedBackupsEmails="MUTE_FAILED_BACKUPS_EMAILS",r.MuteFailedCloudBackupsEmails="MUTE_FAILED_CLOUD_BACKUPS_EMAILS",r.MuteSignInEmails="MUTE_SIGN_IN_EMAILS",r.MuteMarketingEmails="MUTE_MARKETING_EMAILS",r.ListedAuthorSecrets="LISTED_AUTHOR_SECRETS",r.LogSessionUserAgent="LOG_SESSION_USER_AGENT"},16355:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionSettingName=void 0,(r=t.SubscriptionSettingName||(t.SubscriptionSettingName={})).FileUploadBytesLimit="FILE_UPLOAD_BYTES_LIMIT",r.FileUploadBytesUsed="FILE_UPLOAD_BYTES_USED"},91557:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(29606),t),i(r(23234),t),i(r(60468),t),i(r(53757),t),i(r(51032),t),i(r(93063),t),i(r(50722),t),i(r(92360),t),i(r(35325),t),i(r(84395),t),i(r(14822),t),i(r(54342),t),i(r(78245),t),i(r(16355),t)},9382:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(91557),t)},66181:function(e){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,r){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,r)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function n(e,i,o){return n=r()?Reflect.construct:function(e,r,n){var i=[null];i.push.apply(i,r);var o=new(Function.bind.apply(e,i));return n&&t(o,n.prototype),o},n.apply(null,arguments)}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=Object.hasOwnProperty,s=Object.setPrototypeOf,c=Object.isFrozen,l=Object.getPrototypeOf,u=Object.getOwnPropertyDescriptor,d=Object.freeze,p=Object.seal,h=Object.create,f="undefined"!=typeof Reflect&&Reflect,y=f.apply,v=f.construct;y||(y=function(e,t,r){return e.apply(t,r)}),d||(d=function(e){return e}),p||(p=function(e){return e}),v||(v=function(e,t){return n(e,i(t))});var g,m=x(Array.prototype.forEach),b=x(Array.prototype.pop),S=x(Array.prototype.push),w=x(String.prototype.toLowerCase),P=x(String.prototype.match),_=x(String.prototype.replace),E=x(String.prototype.indexOf),C=x(String.prototype.trim),k=x(RegExp.prototype.test),O=(g=TypeError,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v(g,t)});function x(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return y(e,t,n)}}function I(e,t,r){r=r||w,s&&s(e,null);for(var n=t.length;n--;){var i=t[n];if("string"==typeof i){var o=r(i);o!==i&&(c(t)||(t[n]=o),i=o)}e[i]=!0}return e}function A(e){var t,r=h(null);for(t in e)y(a,e,[t])&&(r[t]=e[t]);return r}function M(e,t){for(;null!==e;){var r=u(e,t);if(r){if(r.get)return x(r.get);if("function"==typeof r.value)return x(r.value)}e=l(e)}return function(e){return console.warn("fallback value for",e),null}}var D=d(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=d(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),T=d(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=d(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),j=d(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),B=d(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F=d(["#text"]),L=d(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),K=d(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=d(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V=d(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),W=p(/\{\{[\w\W]*|[\w\W]*\}\}/gm),z=p(/<%[\w\W]*|[\w\W]*%>/gm),H=p(/^data-[\-\w.\u00B7-\uFFFF]/),G=p(/^aria-[\-\w]+$/),q=p(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$=p(/^(?:\w+script|data):/i),X=p(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=p(/^html$/i),Q=function(){return"undefined"==typeof window?null:window},J=function(t,r){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var n=null,i="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(i)&&(n=r.currentScript.getAttribute(i));var o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};return function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q(),n=function(e){return t(e)};if(n.version="2.4.0",n.removed=[],!r||!r.document||9!==r.document.nodeType)return n.isSupported=!1,n;var o=r.document,a=r.document,s=r.DocumentFragment,c=r.HTMLTemplateElement,l=r.Node,u=r.Element,p=r.NodeFilter,h=r.NamedNodeMap,f=void 0===h?r.NamedNodeMap||r.MozNamedAttrMap:h,y=r.HTMLFormElement,v=r.DOMParser,g=r.trustedTypes,x=u.prototype,Z=M(x,"cloneNode"),ee=M(x,"nextSibling"),te=M(x,"childNodes"),re=M(x,"parentNode");if("function"==typeof c){var ne=a.createElement("template");ne.content&&ne.content.ownerDocument&&(a=ne.content.ownerDocument)}var ie=J(g,o),oe=ie?ie.createHTML(""):"",ae=a,se=ae.implementation,ce=ae.createNodeIterator,le=ae.createDocumentFragment,ue=ae.getElementsByTagName,de=o.importNode,pe={};try{pe=A(a).documentMode?a.documentMode:{}}catch(e){}var he={};n.isSupported="function"==typeof re&&se&&void 0!==se.createHTMLDocument&&9!==pe;var fe,ye,ve=W,ge=z,me=H,be=G,Se=$,we=X,Pe=q,_e=null,Ee=I({},[].concat(i(D),i(R),i(T),i(j),i(F))),Ce=null,ke=I({},[].concat(i(L),i(K),i(U),i(V))),Oe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xe=null,Ie=null,Ae=!0,Me=!0,De=!1,Re=!1,Te=!1,Ne=!1,je=!1,Be=!1,Fe=!1,Le=!1,Ke=!0,Ue=!1,Ve="user-content-",We=!0,ze=!1,He={},Ge=null,qe=I({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),$e=null,Xe=I({},["audio","video","img","source","image","track"]),Ye=null,Qe=I({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Ze="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml",tt=et,rt=!1,nt=["application/xhtml+xml","text/html"],it="text/html",ot=null,at=a.createElement("form"),st=function(e){return e instanceof RegExp||e instanceof Function},ct=function(t){ot&&ot===t||(t&&"object"===e(t)||(t={}),t=A(t),fe=fe=-1===nt.indexOf(t.PARSER_MEDIA_TYPE)?it:t.PARSER_MEDIA_TYPE,ye="application/xhtml+xml"===fe?function(e){return e}:w,_e="ALLOWED_TAGS"in t?I({},t.ALLOWED_TAGS,ye):Ee,Ce="ALLOWED_ATTR"in t?I({},t.ALLOWED_ATTR,ye):ke,Ye="ADD_URI_SAFE_ATTR"in t?I(A(Qe),t.ADD_URI_SAFE_ATTR,ye):Qe,$e="ADD_DATA_URI_TAGS"in t?I(A(Xe),t.ADD_DATA_URI_TAGS,ye):Xe,Ge="FORBID_CONTENTS"in t?I({},t.FORBID_CONTENTS,ye):qe,xe="FORBID_TAGS"in t?I({},t.FORBID_TAGS,ye):{},Ie="FORBID_ATTR"in t?I({},t.FORBID_ATTR,ye):{},He="USE_PROFILES"in t&&t.USE_PROFILES,Ae=!1!==t.ALLOW_ARIA_ATTR,Me=!1!==t.ALLOW_DATA_ATTR,De=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=t.SAFE_FOR_TEMPLATES||!1,Te=t.WHOLE_DOCUMENT||!1,Be=t.RETURN_DOM||!1,Fe=t.RETURN_DOM_FRAGMENT||!1,Le=t.RETURN_TRUSTED_TYPE||!1,je=t.FORCE_BODY||!1,Ke=!1!==t.SANITIZE_DOM,Ue=t.SANITIZE_NAMED_PROPS||!1,We=!1!==t.KEEP_CONTENT,ze=t.IN_PLACE||!1,Pe=t.ALLOWED_URI_REGEXP||Pe,tt=t.NAMESPACE||et,t.CUSTOM_ELEMENT_HANDLING&&st(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Oe.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&st(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Oe.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Oe.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Re&&(Me=!1),Fe&&(Be=!0),He&&(_e=I({},i(F)),Ce=[],!0===He.html&&(I(_e,D),I(Ce,L)),!0===He.svg&&(I(_e,R),I(Ce,K),I(Ce,V)),!0===He.svgFilters&&(I(_e,T),I(Ce,K),I(Ce,V)),!0===He.mathMl&&(I(_e,j),I(Ce,U),I(Ce,V))),t.ADD_TAGS&&(_e===Ee&&(_e=A(_e)),I(_e,t.ADD_TAGS,ye)),t.ADD_ATTR&&(Ce===ke&&(Ce=A(Ce)),I(Ce,t.ADD_ATTR,ye)),t.ADD_URI_SAFE_ATTR&&I(Ye,t.ADD_URI_SAFE_ATTR,ye),t.FORBID_CONTENTS&&(Ge===qe&&(Ge=A(Ge)),I(Ge,t.FORBID_CONTENTS,ye)),We&&(_e["#text"]=!0),Te&&I(_e,["html","head","body"]),_e.table&&(I(_e,["tbody"]),delete xe.tbody),d&&d(t),ot=t)},lt=I({},["mi","mo","mn","ms","mtext"]),ut=I({},["foreignobject","desc","title","annotation-xml"]),dt=I({},["title","style","font","a","script"]),pt=I({},R);I(pt,T),I(pt,N);var ht=I({},j);I(ht,B);var ft=function(e){var t=re(e);t&&t.tagName||(t={namespaceURI:et,tagName:"template"});var r=w(e.tagName),n=w(t.tagName);return e.namespaceURI===Ze?t.namespaceURI===et?"svg"===r:t.namespaceURI===Je?"svg"===r&&("annotation-xml"===n||lt[n]):Boolean(pt[r]):e.namespaceURI===Je?t.namespaceURI===et?"math"===r:t.namespaceURI===Ze?"math"===r&&ut[n]:Boolean(ht[r]):e.namespaceURI===et&&!(t.namespaceURI===Ze&&!ut[n])&&!(t.namespaceURI===Je&&!lt[n])&&!ht[r]&&(dt[r]||!pt[r])},yt=function(e){S(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=oe}catch(t){e.remove()}}},vt=function(e,t){try{S(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){S(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Ce[e])if(Be||Fe)try{yt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},gt=function(e){var t,r;if(je)e="<remove></remove>"+e;else{var n=P(e,/^[\r\n\t ]+/);r=n&&n[0]}"application/xhtml+xml"===fe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var i=ie?ie.createHTML(e):e;if(tt===et)try{t=(new v).parseFromString(i,fe)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(tt,"template",null);try{t.documentElement.innerHTML=rt?"":i}catch(e){}}var o=t.body||t.documentElement;return e&&r&&o.insertBefore(a.createTextNode(r),o.childNodes[0]||null),tt===et?ue.call(t,Te?"html":"body")[0]:Te?t.documentElement:o},mt=function(e){return ce.call(e.ownerDocument||e,e,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT,null,!1)},bt=function(e){return e instanceof y&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof f)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},St=function(t){return"object"===e(l)?t instanceof l:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},wt=function(e,t,r){he[e]&&m(he[e],(function(e){e.call(n,t,r,ot)}))},Pt=function(e){var t;if(wt("beforeSanitizeElements",e,null),bt(e))return yt(e),!0;if(k(/[\u0080-\uFFFF]/,e.nodeName))return yt(e),!0;var r=ye(e.nodeName);if(wt("uponSanitizeElement",e,{tagName:r,allowedTags:_e}),e.hasChildNodes()&&!St(e.firstElementChild)&&(!St(e.content)||!St(e.content.firstElementChild))&&k(/<[/\w]/g,e.innerHTML)&&k(/<[/\w]/g,e.textContent))return yt(e),!0;if("select"===r&&k(/<template/i,e.innerHTML))return yt(e),!0;if(!_e[r]||xe[r]){if(!xe[r]&&Et(r)){if(Oe.tagNameCheck instanceof RegExp&&k(Oe.tagNameCheck,r))return!1;if(Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(r))return!1}if(We&&!Ge[r]){var i=re(e)||e.parentNode,o=te(e)||e.childNodes;if(o&&i)for(var a=o.length-1;a>=0;--a)i.insertBefore(Z(o[a],!0),ee(e))}return yt(e),!0}return e instanceof u&&!ft(e)?(yt(e),!0):"noscript"!==r&&"noembed"!==r||!k(/<\/no(script|embed)/i,e.innerHTML)?(Re&&3===e.nodeType&&(t=e.textContent,t=_(t,ve," "),t=_(t,ge," "),e.textContent!==t&&(S(n.removed,{element:e.cloneNode()}),e.textContent=t)),wt("afterSanitizeElements",e,null),!1):(yt(e),!0)},_t=function(e,t,r){if(Ke&&("id"===t||"name"===t)&&(r in a||r in at))return!1;if(Me&&!Ie[t]&&k(me,t));else if(Ae&&k(be,t));else if(!Ce[t]||Ie[t]){if(!(Et(e)&&(Oe.tagNameCheck instanceof RegExp&&k(Oe.tagNameCheck,e)||Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(e))&&(Oe.attributeNameCheck instanceof RegExp&&k(Oe.attributeNameCheck,t)||Oe.attributeNameCheck instanceof Function&&Oe.attributeNameCheck(t))||"is"===t&&Oe.allowCustomizedBuiltInElements&&(Oe.tagNameCheck instanceof RegExp&&k(Oe.tagNameCheck,r)||Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(r))))return!1}else if(Ye[t]);else if(k(Pe,_(r,we,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==E(r,"data:")||!$e[e])if(De&&!k(Se,_(r,we,"")));else if(r)return!1;return!0},Et=function(e){return e.indexOf("-")>0},Ct=function(t){var r,i,o,a;wt("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ce};for(a=s.length;a--;){var l=r=s[a],u=l.name,d=l.namespaceURI;if(i="value"===u?r.value:C(r.value),o=ye(u),c.attrName=o,c.attrValue=i,c.keepAttr=!0,c.forceKeepAttr=void 0,wt("uponSanitizeAttribute",t,c),i=c.attrValue,!c.forceKeepAttr&&(vt(u,t),c.keepAttr))if(k(/\/>/i,i))vt(u,t);else{Re&&(i=_(i,ve," "),i=_(i,ge," "));var p=ye(t.nodeName);if(_t(p,o,i)){if(!Ue||"id"!==o&&"name"!==o||(vt(u,t),i=Ve+i),ie&&"object"===e(g)&&"function"==typeof g.getAttributeType)if(d);else switch(g.getAttributeType(p,o)){case"TrustedHTML":i=ie.createHTML(i);break;case"TrustedScriptURL":i=ie.createScriptURL(i)}try{d?t.setAttributeNS(d,u,i):t.setAttribute(u,i),b(n.removed)}catch(e){}}}}wt("afterSanitizeAttributes",t,null)}},kt=function e(t){var r,n=mt(t);for(wt("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)wt("uponSanitizeShadowNode",r,null),Pt(r)||(r.content instanceof s&&e(r.content),Ct(r));wt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(t){var i,a,c,u,d,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((rt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!St(t)){if("function"!=typeof t.toString)throw O("toString is not a function");if("string"!=typeof(t=t.toString()))throw O("dirty is not a string, aborting")}if(!n.isSupported){if("object"===e(r.toStaticHTML)||"function"==typeof r.toStaticHTML){if("string"==typeof t)return r.toStaticHTML(t);if(St(t))return r.toStaticHTML(t.outerHTML)}return t}if(Ne||ct(p),n.removed=[],"string"==typeof t&&(ze=!1),ze){if(t.nodeName){var h=ye(t.nodeName);if(!_e[h]||xe[h])throw O("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)1===(a=(i=gt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?i=a:i.appendChild(a);else{if(!Be&&!Re&&!Te&&-1===t.indexOf("<"))return ie&&Le?ie.createHTML(t):t;if(!(i=gt(t)))return Be?null:Le?oe:""}i&&je&&yt(i.firstChild);for(var f=mt(ze?t:i);c=f.nextNode();)3===c.nodeType&&c===u||Pt(c)||(c.content instanceof s&&kt(c.content),Ct(c),u=c);if(u=null,ze)return t;if(Be){if(Fe)for(d=le.call(i.ownerDocument);i.firstChild;)d.appendChild(i.firstChild);else d=i;return Ce.shadowroot&&(d=de.call(o,d,!0)),d}var y=Te?i.outerHTML:i.innerHTML;return Te&&_e["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&k(Y,i.ownerDocument.doctype.name)&&(y="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+y),Re&&(y=_(y,ve," "),y=_(y,ge," ")),ie&&Le?ie.createHTML(y):y},n.setConfig=function(e){ct(e),Ne=!0},n.clearConfig=function(){ot=null,Ne=!1},n.isValidAttribute=function(e,t,r){ot||ct({});var n=ye(e),i=ye(t);return _t(n,i,r)},n.addHook=function(e,t){"function"==typeof t&&(he[e]=he[e]||[],S(he[e],t))},n.removeHook=function(e){if(he[e])return b(he[e])},n.removeHooks=function(e){he[e]&&(he[e]=[])},n.removeAllHooks=function(){he={}},n}()}()},86200:(e,t,r)=>{var n=r(99805)(r(71188),"DataView");e.exports=n},45115:(e,t,r)=>{var n=r(70377),i=r(81239),o=r(31091),a=r(13932),s=r(69488);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},71089:(e,t,r)=>{var n=r(45977),i=r(4395),o=r(44807),a=r(87930),s=r(99045);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},16810:(e,t,r)=>{var n=r(99805)(r(71188),"Map");e.exports=n},10848:(e,t,r)=>{var n=r(19849),i=r(24184),o=r(24920),a=r(62638),s=r(60895);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},39774:(e,t,r)=>{var n=r(99805)(r(71188),"Promise");e.exports=n},50965:(e,t,r)=>{var n=r(99805)(r(71188),"Set");e.exports=n},44870:(e,t,r)=>{var n=r(10848),i=r(68579),o=r(5162);function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},41152:(e,t,r)=>{var n=r(71089),i=r(69064),o=r(45851),a=r(70927),s=r(10998),c=r(5108);function l(e){var t=this.__data__=new n(e);this.size=t.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=c,e.exports=l},89335:(e,t,r)=>{var n=r(71188).Symbol;e.exports=n},71293:(e,t,r)=>{var n=r(71188).Uint8Array;e.exports=n},62459:(e,t,r)=>{var n=r(99805)(r(71188),"WeakMap");e.exports=n},7359:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},21058:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}},26728:(e,t,r)=>{var n=r(34049);e.exports=function(e,t){return!(null==e||!e.length)&&n(e,t,0)>-1}},64087:e=>{e.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},84427:(e,t,r)=>{var n=r(54805),i=r(41041),o=r(19041),a=r(18962),s=r(83574),c=r(90299),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),u=!r&&i(e),d=!r&&!u&&a(e),p=!r&&!u&&!d&&c(e),h=r||u||d||p,f=h?n(e.length,String):[],y=f.length;for(var v in e)!t&&!l.call(e,v)||h&&("length"==v||d&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,y))||f.push(v);return f}},39600:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},50534:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},95681:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},36587:(e,t,r)=>{var n=r(95826),i=r(38288);e.exports=function(e,t,r){(void 0!==r&&!i(e[t],r)||void 0===r&&!(t in e))&&n(e,t,r)}},59521:(e,t,r)=>{var n=r(95826),i=r(38288),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var a=e[t];o.call(e,t)&&i(a,r)&&(void 0!==r||t in e)||n(e,t,r)}},25063:(e,t,r)=>{var n=r(38288);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},95826:(e,t,r)=>{var n=r(65745);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},92080:(e,t,r)=>{var n=r(57458),i=Object.create,o=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=o},36869:e=>{e.exports=function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},56609:(e,t,r)=>{var n=r(56345)();e.exports=n},34820:(e,t,r)=>{var n=r(67304),i=r(35657);e.exports=function(e,t){for(var r=0,o=(t=n(t,e)).length;null!=e&&r<o;)e=e[i(t[r++])];return r&&r==o?e:void 0}},48968:(e,t,r)=>{var n=r(50534),i=r(19041);e.exports=function(e,t,r){var o=t(e);return i(e)?o:n(o,r(e))}},84031:(e,t,r)=>{var n=r(89335),i=r(31307),o=r(95780),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},29043:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},34049:(e,t,r)=>{var n=r(36869),i=r(70439),o=r(63662);e.exports=function(e,t,r){return t==t?o(e,t,r):n(e,i,r)}},36720:(e,t,r)=>{var n=r(84031),i=r(85175);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},1570:(e,t,r)=>{var n=r(90930),i=r(85175);e.exports=function e(t,r,o,a,s){return t===r||(null==t||null==r||!i(t)&&!i(r)?t!=t&&r!=r:n(t,r,o,a,e,s))}},90930:(e,t,r)=>{var n=r(41152),i=r(39153),o=r(4237),a=r(92550),s=r(48584),c=r(19041),l=r(18962),u=r(90299),d="[object Arguments]",p="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,y,v,g){var m=c(e),b=c(t),S=m?p:s(e),w=b?p:s(t),P=(S=S==d?h:S)==h,_=(w=w==d?h:w)==h,E=S==w;if(E&&l(e)){if(!l(t))return!1;m=!0,P=!1}if(E&&!P)return g||(g=new n),m||u(e)?i(e,t,r,y,v,g):o(e,t,S,r,y,v,g);if(!(1&r)){var C=P&&f.call(e,"__wrapped__"),k=_&&f.call(t,"__wrapped__");if(C||k){var O=C?e.value():e,x=k?t.value():t;return g||(g=new n),v(O,x,r,y,g)}}return!!E&&(g||(g=new n),a(e,t,r,y,v,g))}},42382:(e,t,r)=>{var n=r(41152),i=r(1570);e.exports=function(e,t,r,o){var a=r.length,s=a,c=!o;if(null==e)return!s;for(e=Object(e);a--;){var l=r[a];if(c&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){var u=(l=r[a])[0],d=e[u],p=l[1];if(c&&l[2]){if(void 0===d&&!(u in e))return!1}else{var h=new n;if(o)var f=o(d,p,u,e,t,h);if(!(void 0===f?i(p,d,3,o,h):f))return!1}}return!0}},70439:e=>{e.exports=function(e){return e!=e}},50558:(e,t,r)=>{var n=r(41033),i=r(41518),o=r(57458),a=r(14309),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(n(e)?p:s).test(a(e))}},28229:(e,t,r)=>{var n=r(84031),i=r(94111),o=r(85175),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[n(e)]}},24064:(e,t,r)=>{var n=r(7305),i=r(8308),o=r(46391),a=r(19041),s=r(47973);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):n(e):s(e)}},13182:(e,t,r)=>{var n=r(58088),i=r(30622),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},78590:(e,t,r)=>{var n=r(57458),i=r(58088),o=r(83760),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=i(e),r=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&r.push(s);return r}},7305:(e,t,r)=>{var n=r(42382),i=r(74966),o=r(73356);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},8308:(e,t,r)=>{var n=r(1570),i=r(55772),o=r(42338),a=r(75374),s=r(39944),c=r(73356),l=r(35657);e.exports=function(e,t){return a(e)&&s(t)?c(l(e),t):function(r){var a=i(r,e);return void 0===a&&a===t?o(r,e):n(t,a,3)}}},90791:(e,t,r)=>{var n=r(41152),i=r(36587),o=r(56609),a=r(20005),s=r(57458),c=r(38929),l=r(19314);e.exports=function e(t,r,u,d,p){t!==r&&o(r,(function(o,c){if(p||(p=new n),s(o))a(t,r,c,u,e,d,p);else{var h=d?d(l(t,c),o,c+"",t,r,p):void 0;void 0===h&&(h=o),i(t,c,h)}}),c)}},20005:(e,t,r)=>{var n=r(36587),i=r(16971),o=r(96120),a=r(95531),s=r(24129),c=r(41041),l=r(19041),u=r(40541),d=r(18962),p=r(41033),h=r(57458),f=r(73748),y=r(90299),v=r(19314),g=r(95920);e.exports=function(e,t,r,m,b,S,w){var P=v(e,r),_=v(t,r),E=w.get(_);if(E)n(e,r,E);else{var C=S?S(P,_,r+"",e,t,w):void 0,k=void 0===C;if(k){var O=l(_),x=!O&&d(_),I=!O&&!x&&y(_);C=_,O||x||I?l(P)?C=P:u(P)?C=a(P):x?(k=!1,C=i(_,!0)):I?(k=!1,C=o(_,!0)):C=[]:f(_)||c(_)?(C=P,c(P)?C=g(P):h(P)&&!p(P)||(C=s(_))):k=!1}k&&(w.set(_,C),b(C,_,m,S,w),w.delete(_)),n(e,r,C)}}},91484:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},15571:(e,t,r)=>{var n=r(34820);e.exports=function(e){return function(t){return n(t,e)}}},70896:(e,t,r)=>{var n=r(79117),i=r(83574),o=Array.prototype.splice;e.exports=function(e,t){for(var r=e?t.length:0,a=r-1;r--;){var s=t[r];if(r==a||s!==c){var c=s;i(s)?o.call(e,s,1):n(e,s)}}return e}},49595:(e,t,r)=>{var n=r(46391),i=r(75969),o=r(34253);e.exports=function(e,t){return o(i(e,t,n),e+"")}},52920:(e,t,r)=>{var n=r(61845),i=r(65745),o=r(46391),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;e.exports=a},84539:e=>{e.exports=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}},54805:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},84372:(e,t,r)=>{var n=r(89335),i=r(39600),o=r(19041),a=r(5847),s=n?n.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},62555:(e,t,r)=>{var n=r(92456),i=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},45314:e=>{e.exports=function(e){return function(t){return e(t)}}},445:(e,t,r)=>{var n=r(44870),i=r(26728),o=r(64087),a=r(13359),s=r(19789),c=r(59805);e.exports=function(e,t,r){var l=-1,u=i,d=e.length,p=!0,h=[],f=h;if(r)p=!1,u=o;else if(d>=200){var y=t?null:s(e);if(y)return c(y);p=!1,u=a,f=new n}else f=t?[]:h;e:for(;++l<d;){var v=e[l],g=t?t(v):v;if(v=r||0!==v?v:0,p&&g==g){for(var m=f.length;m--;)if(f[m]===g)continue e;t&&f.push(g),h.push(v)}else u(f,g,r)||(f!==h&&f.push(g),h.push(v))}return h}},79117:(e,t,r)=>{var n=r(67304),i=r(4261),o=r(24719),a=r(35657);e.exports=function(e,t){return t=n(t,e),null==(e=o(e,t))||delete e[a(i(t))]}},13359:e=>{e.exports=function(e,t){return e.has(t)}},67304:(e,t,r)=>{var n=r(19041),i=r(75374),o=r(72996),a=r(40065);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:o(a(e))}},71402:(e,t,r)=>{var n=r(71293);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},16971:(e,t,r)=>{e=r.nmd(e);var n=r(71188),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}},96120:(e,t,r)=>{var n=r(71402);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},95531:e=>{e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},98775:(e,t,r)=>{var n=r(59521),i=r(95826);e.exports=function(e,t,r,o){var a=!r;r||(r={});for(var s=-1,c=t.length;++s<c;){var l=t[s],u=o?o(r[l],e[l],l,r,e):void 0;void 0===u&&(u=e[l]),a?i(r,l,u):n(r,l,u)}return r}},96953:(e,t,r)=>{var n=r(71188)["__core-js_shared__"];e.exports=n},11143:(e,t,r)=>{var n=r(49595),i=r(28411);e.exports=function(e){return n((function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var c=r[n];c&&e(t,c,n,a)}return t}))}},56345:e=>{e.exports=function(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===r(o[c],c,o))break}return t}}},63271:(e,t,r)=>{var n=r(24064),i=r(60798),o=r(75121);e.exports=function(e){return function(t,r,a){var s=Object(t);if(!i(t)){var c=n(r,3);t=o(t),r=function(e){return c(s[e],e,s)}}var l=e(t,r,a);return l>-1?s[c?t[l]:l]:void 0}}},19789:(e,t,r)=>{var n=r(50965),i=r(58569),o=r(59805),a=n&&1/o(new n([,-0]))[1]==1/0?function(e){return new n(e)}:i;e.exports=a},65745:(e,t,r)=>{var n=r(99805),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},39153:(e,t,r)=>{var n=r(44870),i=r(95681),o=r(13359);e.exports=function(e,t,r,a,s,c){var l=1&r,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var p=c.get(e),h=c.get(t);if(p&&h)return p==t&&h==e;var f=-1,y=!0,v=2&r?new n:void 0;for(c.set(e,t),c.set(t,e);++f<u;){var g=e[f],m=t[f];if(a)var b=l?a(m,g,f,t,e,c):a(g,m,f,e,t,c);if(void 0!==b){if(b)continue;y=!1;break}if(v){if(!i(t,(function(e,t){if(!o(v,t)&&(g===e||s(g,e,r,a,c)))return v.push(t)}))){y=!1;break}}else if(g!==m&&!s(g,m,r,a,c)){y=!1;break}}return c.delete(e),c.delete(t),y}},4237:(e,t,r)=>{var n=r(89335),i=r(71293),o=r(38288),a=r(39153),s=r(14857),c=r(59805),l=n?n.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,r,n,l,d,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=s;case"[object Set]":var f=1&n;if(h||(h=c),e.size!=t.size&&!f)return!1;var y=p.get(e);if(y)return y==t;n|=2,p.set(e,t);var v=a(h(e),h(t),n,l,d,p);return p.delete(e),v;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},92550:(e,t,r)=>{var n=r(86717),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,o,a,s){var c=1&r,l=n(e),u=l.length;if(u!=n(t).length&&!c)return!1;for(var d=u;d--;){var p=l[d];if(!(c?p in t:i.call(t,p)))return!1}var h=s.get(e),f=s.get(t);if(h&&f)return h==t&&f==e;var y=!0;s.set(e,t),s.set(t,e);for(var v=c;++d<u;){var g=e[p=l[d]],m=t[p];if(o)var b=c?o(m,g,p,t,e,s):o(g,m,p,e,t,s);if(!(void 0===b?g===m||a(g,m,r,o,s):b)){y=!1;break}v||(v="constructor"==p)}if(y&&!v){var S=e.constructor,w=t.constructor;S==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof w&&w instanceof w||(y=!1)}return s.delete(e),s.delete(t),y}},96407:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},86717:(e,t,r)=>{var n=r(48968),i=r(56519),o=r(75121);e.exports=function(e){return n(e,o,i)}},45510:(e,t,r)=>{var n=r(47113);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},74966:(e,t,r)=>{var n=r(39944),i=r(75121);e.exports=function(e){for(var t=i(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,n(a)]}return t}},99805:(e,t,r)=>{var n=r(50558),i=r(74733);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},49722:(e,t,r)=>{var n=r(88605)(Object.getPrototypeOf,Object);e.exports=n},31307:(e,t,r)=>{var n=r(89335),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=a.call(e);return n&&(t?e[s]=r:delete e[s]),i}},56519:(e,t,r)=>{var n=r(21058),i=r(38819),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},48584:(e,t,r)=>{var n=r(86200),i=r(16810),o=r(39774),a=r(50965),s=r(62459),c=r(84031),l=r(14309),u="[object Map]",d="[object Promise]",p="[object Set]",h="[object WeakMap]",f="[object DataView]",y=l(n),v=l(i),g=l(o),m=l(a),b=l(s),S=c;(n&&S(new n(new ArrayBuffer(1)))!=f||i&&S(new i)!=u||o&&S(o.resolve())!=d||a&&S(new a)!=p||s&&S(new s)!=h)&&(S=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?l(r):"";if(n)switch(n){case y:return f;case v:return u;case g:return d;case m:return p;case b:return h}return t}),e.exports=S},74733:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},6613:(e,t,r)=>{var n=r(67304),i=r(41041),o=r(19041),a=r(83574),s=r(94111),c=r(35657);e.exports=function(e,t,r){for(var l=-1,u=(t=n(t,e)).length,d=!1;++l<u;){var p=c(t[l]);if(!(d=null!=e&&r(e,p)))break;e=e[p]}return d||++l!=u?d:!!(u=null==e?0:e.length)&&s(u)&&a(p,u)&&(o(e)||i(e))}},70377:(e,t,r)=>{var n=r(42600);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},81239:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},31091:(e,t,r)=>{var n=r(42600),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},13932:(e,t,r)=>{var n=r(42600),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},69488:(e,t,r)=>{var n=r(42600);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},24129:(e,t,r)=>{var n=r(92080),i=r(49722),o=r(58088);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:n(i(e))}},83574:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},28411:(e,t,r)=>{var n=r(38288),i=r(60798),o=r(83574),a=r(57458);e.exports=function(e,t,r){if(!a(r))return!1;var s=typeof t;return!!("number"==s?i(r)&&o(t,r.length):"string"==s&&t in r)&&n(r[t],e)}},75374:(e,t,r)=>{var n=r(19041),i=r(5847),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},47113:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},41518:(e,t,r)=>{var n,i=r(96953),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},58088:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},39944:(e,t,r)=>{var n=r(57458);e.exports=function(e){return e==e&&!n(e)}},45977:e=>{e.exports=function(){this.__data__=[],this.size=0}},4395:(e,t,r)=>{var n=r(25063),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():i.call(t,r,1),--this.size,0))}},44807:(e,t,r)=>{var n=r(25063);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},87930:(e,t,r)=>{var n=r(25063);e.exports=function(e){return n(this.__data__,e)>-1}},99045:(e,t,r)=>{var n=r(25063);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},19849:(e,t,r)=>{var n=r(45115),i=r(71089),o=r(16810);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},24184:(e,t,r)=>{var n=r(45510);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},24920:(e,t,r)=>{var n=r(45510);e.exports=function(e){return n(this,e).get(e)}},62638:(e,t,r)=>{var n=r(45510);e.exports=function(e){return n(this,e).has(e)}},60895:(e,t,r)=>{var n=r(45510);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},14857:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},73356:e=>{e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},26993:(e,t,r)=>{var n=r(71608);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},42600:(e,t,r)=>{var n=r(99805)(Object,"create");e.exports=n},30622:(e,t,r)=>{var n=r(88605)(Object.keys,Object);e.exports=n},83760:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},83434:(e,t,r)=>{e=r.nmd(e);var n=r(96407),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&n.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},95780:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},88605:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},75969:(e,t,r)=>{var n=r(7359),i=Math.max;e.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),c=Array(s);++a<s;)c[a]=o[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=o[a];return l[t]=r(c),n(e,this,l)}}},24719:(e,t,r)=>{var n=r(34820),i=r(84539);e.exports=function(e,t){return t.length<2?e:n(e,i(t,0,-1))}},71188:(e,t,r)=>{var n=r(96407),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},19314:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},68579:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},5162:e=>{e.exports=function(e){return this.__data__.has(e)}},59805:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},34253:(e,t,r)=>{var n=r(52920),i=r(26254)(n);e.exports=i},26254:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var i=t(),o=16-(i-n);if(n=i,o>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},69064:(e,t,r)=>{var n=r(71089);e.exports=function(){this.__data__=new n,this.size=0}},45851:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},70927:e=>{e.exports=function(e){return this.__data__.get(e)}},10998:e=>{e.exports=function(e){return this.__data__.has(e)}},5108:(e,t,r)=>{var n=r(71089),i=r(16810),o=r(10848);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(a)}return r.set(e,t),this.size=r.size,this}},63662:e=>{e.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},72996:(e,t,r)=>{var n=r(26993),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,r,n,i){t.push(n?i.replace(o,"$1"):r||e)})),t}));e.exports=a},35657:(e,t,r)=>{var n=r(5847);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},14309:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},92456:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},61845:e=>{e.exports=function(e){return function(){return e}}},38288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3270:(e,t,r)=>{var n=r(63271)(r(59129));e.exports=n},59129:(e,t,r)=>{var n=r(36869),i=r(24064),o=r(3506),a=Math.max;e.exports=function(e,t,r){var s=null==e?0:e.length;if(!s)return-1;var c=null==r?0:o(r);return c<0&&(c=a(s+c,0)),n(e,i(t,3),c)}},55772:(e,t,r)=>{var n=r(34820);e.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},42338:(e,t,r)=>{var n=r(29043),i=r(6613);e.exports=function(e,t){return null!=e&&i(e,t,n)}},46391:e=>{e.exports=function(e){return e}},41041:(e,t,r)=>{var n=r(36720),i=r(85175),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},19041:e=>{var t=Array.isArray;e.exports=t},60798:(e,t,r)=>{var n=r(41033),i=r(94111);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},40541:(e,t,r)=>{var n=r(60798),i=r(85175);e.exports=function(e){return i(e)&&n(e)}},18962:(e,t,r)=>{e=r.nmd(e);var n=r(71188),i=r(67349),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;e.exports=c},41033:(e,t,r)=>{var n=r(84031),i=r(57458);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},94111:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},57458:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},85175:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},73748:(e,t,r)=>{var n=r(84031),i=r(49722),o=r(85175),a=Function.prototype,s=Object.prototype,c=a.toString,l=s.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=n(e))return!1;var t=i(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==u}},5847:(e,t,r)=>{var n=r(84031),i=r(85175);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},90299:(e,t,r)=>{var n=r(28229),i=r(45314),o=r(83434),a=o&&o.isTypedArray,s=a?i(a):n;e.exports=s},75121:(e,t,r)=>{var n=r(84427),i=r(13182),o=r(60798);e.exports=function(e){return o(e)?n(e):i(e)}},38929:(e,t,r)=>{var n=r(84427),i=r(78590),o=r(60798);e.exports=function(e){return o(e)?n(e,!0):i(e)}},4261:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},31773:function(e,t,r){var n;e=r.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",c=32,l=128,u=1/0,d=9007199254740991,p=NaN,h=4294967295,f=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],y="[object Arguments]",v="[object Array]",g="[object Boolean]",m="[object Date]",b="[object Error]",S="[object Function]",w="[object GeneratorFunction]",P="[object Map]",_="[object Number]",E="[object Object]",C="[object Promise]",k="[object RegExp]",O="[object Set]",x="[object String]",I="[object Symbol]",A="[object WeakMap]",M="[object ArrayBuffer]",D="[object DataView]",R="[object Float32Array]",T="[object Float64Array]",N="[object Int8Array]",j="[object Int16Array]",B="[object Int32Array]",F="[object Uint8Array]",L="[object Uint8ClampedArray]",K="[object Uint16Array]",U="[object Uint32Array]",V=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,q=RegExp(H.source),$=RegExp(G.source),X=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,re=RegExp(te.source),ne=/^\s+/,ie=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,me=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Pe="a-z\\xdf-\\xf6\\xf8-\\xff",_e="A-Z\\xc0-\\xd6\\xd8-\\xde",Ee="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ce="["+Ee+"]",ke="["+we+"]",Oe="\\d+",xe="["+Pe+"]",Ie="[^\\ud800-\\udfff"+Ee+Oe+"\\u2700-\\u27bf"+Pe+_e+"]",Ae="\\ud83c[\\udffb-\\udfff]",Me="[^\\ud800-\\udfff]",De="(?:\\ud83c[\\udde6-\\uddff]){2}",Re="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="["+_e+"]",Ne="(?:"+xe+"|"+Ie+")",je="(?:"+Te+"|"+Ie+")",Be="(?:['](?:d|ll|m|re|s|t|ve))?",Fe="(?:['](?:D|LL|M|RE|S|T|VE))?",Le="(?:"+ke+"|"+Ae+")?",Ke="[\\ufe0e\\ufe0f]?",Ue=Ke+Le+"(?:\\u200d(?:"+[Me,De,Re].join("|")+")"+Ke+Le+")*",Ve="(?:"+["[\\u2700-\\u27bf]",De,Re].join("|")+")"+Ue,We="(?:"+[Me+ke+"?",ke,De,Re,"[\\ud800-\\udfff]"].join("|")+")",ze=RegExp("[']","g"),He=RegExp(ke,"g"),Ge=RegExp(Ae+"(?="+Ae+")|"+We+Ue,"g"),qe=RegExp([Te+"?"+xe+"+"+Be+"(?="+[Ce,Te,"$"].join("|")+")",je+"+"+Fe+"(?="+[Ce,Te+Ne,"$"].join("|")+")",Te+"?"+Ne+"+"+Be,Te+"+"+Fe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Oe,Ve].join("|"),"g"),$e=RegExp("[\\u200d\\ud800-\\udfff"+we+"\\ufe0e\\ufe0f]"),Xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ye=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qe=-1,Je={};Je[R]=Je[T]=Je[N]=Je[j]=Je[B]=Je[F]=Je[L]=Je[K]=Je[U]=!0,Je[y]=Je[v]=Je[M]=Je[g]=Je[D]=Je[m]=Je[b]=Je[S]=Je[P]=Je[_]=Je[E]=Je[k]=Je[O]=Je[x]=Je[A]=!1;var Ze={};Ze[y]=Ze[v]=Ze[M]=Ze[D]=Ze[g]=Ze[m]=Ze[R]=Ze[T]=Ze[N]=Ze[j]=Ze[B]=Ze[P]=Ze[_]=Ze[E]=Ze[k]=Ze[O]=Ze[x]=Ze[I]=Ze[F]=Ze[L]=Ze[K]=Ze[U]=!0,Ze[b]=Ze[S]=Ze[A]=!1;var et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tt=parseFloat,rt=parseInt,nt="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,it="object"==typeof self&&self&&self.Object===Object&&self,ot=nt||it||Function("return this")(),at=t&&!t.nodeType&&t,st=at&&e&&!e.nodeType&&e,ct=st&&st.exports===at,lt=ct&&nt.process,ut=function(){try{return st&&st.require&&st.require("util").types||lt&&lt.binding&&lt.binding("util")}catch(e){}}(),dt=ut&&ut.isArrayBuffer,pt=ut&&ut.isDate,ht=ut&&ut.isMap,ft=ut&&ut.isRegExp,yt=ut&&ut.isSet,vt=ut&&ut.isTypedArray;function gt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function mt(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n}function bt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function St(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function wt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Pt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}function _t(e,t){return!(null==e||!e.length)&&Rt(e,t,0)>-1}function Et(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Ct(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function kt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Ot(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function xt(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function It(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var At=Bt("length");function Mt(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Dt(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Rt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Dt(e,Nt,r)}function Tt(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function Nt(e){return e!=e}function jt(e,t){var r=null==e?0:e.length;return r?Kt(e,t)/r:p}function Bt(e){return function(t){return null==t?i:t[e]}}function Ft(e){return function(t){return null==e?i:e[t]}}function Lt(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function Kt(e,t){for(var r,n=-1,o=e.length;++n<o;){var a=t(e[n]);a!==i&&(r=r===i?a:r+a)}return r}function Ut(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Vt(e){return e?e.slice(0,or(e)+1).replace(ne,""):e}function Wt(e){return function(t){return e(t)}}function zt(e,t){return Ct(t,(function(t){return e[t]}))}function Ht(e,t){return e.has(t)}function Gt(e,t){for(var r=-1,n=e.length;++r<n&&Rt(t,e[r],0)>-1;);return r}function qt(e,t){for(var r=e.length;r--&&Rt(t,e[r],0)>-1;);return r}function $t(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var Xt=Ft({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Yt=Ft({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Qt(e){return"\\"+et[e]}function Jt(e){return $e.test(e)}function Zt(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function er(e,t){return function(r){return e(t(r))}}function tr(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r];a!==t&&a!==s||(e[r]=s,o[i++]=r)}return o}function rr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function nr(e){return Jt(e)?function(e){for(var t=Ge.lastIndex=0;Ge.test(e);)++t;return t}(e):At(e)}function ir(e){return Jt(e)?function(e){return e.match(Ge)||[]}(e):function(e){return e.split("")}(e)}function or(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var ar=Ft({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),sr=function e(t){var r,n=(t=null==t?ot:sr.defaults(ot.Object(),t,sr.pick(ot,Ye))).Array,ie=t.Date,we=t.Error,Pe=t.Function,_e=t.Math,Ee=t.Object,Ce=t.RegExp,ke=t.String,Oe=t.TypeError,xe=n.prototype,Ie=Pe.prototype,Ae=Ee.prototype,Me=t["__core-js_shared__"],De=Ie.toString,Re=Ae.hasOwnProperty,Te=0,Ne=(r=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",je=Ae.toString,Be=De.call(Ee),Fe=ot._,Le=Ce("^"+De.call(Re).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=ct?t.Buffer:i,Ue=t.Symbol,Ve=t.Uint8Array,We=Ke?Ke.allocUnsafe:i,Ge=er(Ee.getPrototypeOf,Ee),$e=Ee.create,et=Ae.propertyIsEnumerable,nt=xe.splice,it=Ue?Ue.isConcatSpreadable:i,at=Ue?Ue.iterator:i,st=Ue?Ue.toStringTag:i,lt=function(){try{var e=co(Ee,"defineProperty");return e({},"",{}),e}catch(e){}}(),ut=t.clearTimeout!==ot.clearTimeout&&t.clearTimeout,At=ie&&ie.now!==ot.Date.now&&ie.now,Ft=t.setTimeout!==ot.setTimeout&&t.setTimeout,cr=_e.ceil,lr=_e.floor,ur=Ee.getOwnPropertySymbols,dr=Ke?Ke.isBuffer:i,pr=t.isFinite,hr=xe.join,fr=er(Ee.keys,Ee),yr=_e.max,vr=_e.min,gr=ie.now,mr=t.parseInt,br=_e.random,Sr=xe.reverse,wr=co(t,"DataView"),Pr=co(t,"Map"),_r=co(t,"Promise"),Er=co(t,"Set"),Cr=co(t,"WeakMap"),kr=co(Ee,"create"),Or=Cr&&new Cr,xr={},Ir=Fo(wr),Ar=Fo(Pr),Mr=Fo(_r),Dr=Fo(Er),Rr=Fo(Cr),Tr=Ue?Ue.prototype:i,Nr=Tr?Tr.valueOf:i,jr=Tr?Tr.toString:i;function Br(e){if(ts(e)&&!za(e)&&!(e instanceof Ur)){if(e instanceof Kr)return e;if(Re.call(e,"__wrapped__"))return Lo(e)}return new Kr(e)}var Fr=function(){function e(){}return function(t){if(!es(t))return{};if($e)return $e(t);e.prototype=t;var r=new e;return e.prototype=i,r}}();function Lr(){}function Kr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Ur(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function zr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new zr;++t<r;)this.add(e[t])}function Gr(e){var t=this.__data__=new Wr(e);this.size=t.size}function qr(e,t){var r=za(e),n=!r&&Wa(e),i=!r&&!n&&$a(e),o=!r&&!n&&!i&&ls(e),a=r||n||i||o,s=a?Ut(e.length,ke):[],c=s.length;for(var l in e)!t&&!Re.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||vo(l,c))||s.push(l);return s}function $r(e){var t=e.length;return t?e[Hn(0,t-1)]:i}function Xr(e,t){return Ro(ki(e),on(t,0,e.length))}function Yr(e){return Ro(ki(e))}function Qr(e,t,r){(r!==i&&!Ka(e[t],r)||r===i&&!(t in e))&&rn(e,t,r)}function Jr(e,t,r){var n=e[t];Re.call(e,t)&&Ka(n,r)&&(r!==i||t in e)||rn(e,t,r)}function Zr(e,t){for(var r=e.length;r--;)if(Ka(e[r][0],t))return r;return-1}function en(e,t,r,n){return un(e,(function(e,i,o){t(n,e,r(e),o)})),n}function tn(e,t){return e&&Oi(t,Ms(t),e)}function rn(e,t,r){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function nn(e,t){for(var r=-1,o=t.length,a=n(o),s=null==e;++r<o;)a[r]=s?i:ks(e,t[r]);return a}function on(e,t,r){return e==e&&(r!==i&&(e=e<=r?e:r),t!==i&&(e=e>=t?e:t)),e}function an(e,t,r,n,o,a){var s,c=1&t,l=2&t,u=4&t;if(r&&(s=o?r(e,n,o,a):r(e)),s!==i)return s;if(!es(e))return e;var d=za(e);if(d){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Re.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!c)return ki(e,s)}else{var p=po(e),h=p==S||p==w;if($a(e))return Si(e,c);if(p==E||p==y||h&&!o){if(s=l||h?{}:fo(e),!c)return l?function(e,t){return Oi(e,uo(e),t)}(e,function(e,t){return e&&Oi(t,Ds(t),e)}(s,e)):function(e,t){return Oi(e,lo(e),t)}(e,tn(s,e))}else{if(!Ze[p])return o?e:{};s=function(e,t,r){var n,i=e.constructor;switch(t){case M:return wi(e);case g:case m:return new i(+e);case D:return function(e,t){var r=t?wi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case R:case T:case N:case j:case B:case F:case L:case K:case U:return Pi(e,r);case P:return new i;case _:case x:return new i(e);case k:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new i;case I:return n=e,Nr?Ee(Nr.call(n)):{}}}(e,p,c)}}a||(a=new Gr);var f=a.get(e);if(f)return f;a.set(e,s),as(e)?e.forEach((function(n){s.add(an(n,t,r,n,e,a))})):rs(e)&&e.forEach((function(n,i){s.set(i,an(n,t,r,i,e,a))}));var v=d?i:(u?l?to:eo:l?Ds:Ms)(e);return bt(v||e,(function(n,i){v&&(n=e[i=n]),Jr(s,i,an(n,t,r,i,e,a))})),s}function sn(e,t,r){var n=r.length;if(null==e)return!n;for(e=Ee(e);n--;){var o=r[n],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function cn(e,t,r){if("function"!=typeof e)throw new Oe(o);return Io((function(){e.apply(i,r)}),t)}function ln(e,t,r,n){var i=-1,o=_t,a=!0,s=e.length,c=[],l=t.length;if(!s)return c;r&&(t=Ct(t,Wt(r))),n?(o=Et,a=!1):t.length>=200&&(o=Ht,a=!1,t=new Hr(t));e:for(;++i<s;){var u=e[i],d=null==r?u:r(u);if(u=n||0!==u?u:0,a&&d==d){for(var p=l;p--;)if(t[p]===d)continue e;c.push(u)}else o(t,d,n)||c.push(u)}return c}Br.templateSettings={escape:X,evaluate:Y,interpolate:Q,variable:"",imports:{_:Br}},Br.prototype=Lr.prototype,Br.prototype.constructor=Br,Kr.prototype=Fr(Lr.prototype),Kr.prototype.constructor=Kr,Ur.prototype=Fr(Lr.prototype),Ur.prototype.constructor=Ur,Vr.prototype.clear=function(){this.__data__=kr?kr(null):{},this.size=0},Vr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vr.prototype.get=function(e){var t=this.__data__;if(kr){var r=t[e];return r===a?i:r}return Re.call(t,e)?t[e]:i},Vr.prototype.has=function(e){var t=this.__data__;return kr?t[e]!==i:Re.call(t,e)},Vr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=kr&&t===i?a:t,this},Wr.prototype.clear=function(){this.__data__=[],this.size=0},Wr.prototype.delete=function(e){var t=this.__data__,r=Zr(t,e);return!(r<0||(r==t.length-1?t.pop():nt.call(t,r,1),--this.size,0))},Wr.prototype.get=function(e){var t=this.__data__,r=Zr(t,e);return r<0?i:t[r][1]},Wr.prototype.has=function(e){return Zr(this.__data__,e)>-1},Wr.prototype.set=function(e,t){var r=this.__data__,n=Zr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},zr.prototype.clear=function(){this.size=0,this.__data__={hash:new Vr,map:new(Pr||Wr),string:new Vr}},zr.prototype.delete=function(e){var t=ao(this,e).delete(e);return this.size-=t?1:0,t},zr.prototype.get=function(e){return ao(this,e).get(e)},zr.prototype.has=function(e){return ao(this,e).has(e)},zr.prototype.set=function(e,t){var r=ao(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Hr.prototype.add=Hr.prototype.push=function(e){return this.__data__.set(e,a),this},Hr.prototype.has=function(e){return this.__data__.has(e)},Gr.prototype.clear=function(){this.__data__=new Wr,this.size=0},Gr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Gr.prototype.get=function(e){return this.__data__.get(e)},Gr.prototype.has=function(e){return this.__data__.has(e)},Gr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Wr){var n=r.__data__;if(!Pr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new zr(n)}return r.set(e,t),this.size=r.size,this};var un=Ai(mn),dn=Ai(bn,!0);function pn(e,t){var r=!0;return un(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function hn(e,t,r){for(var n=-1,o=e.length;++n<o;){var a=e[n],s=t(a);if(null!=s&&(c===i?s==s&&!cs(s):r(s,c)))var c=s,l=a}return l}function fn(e,t){var r=[];return un(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function yn(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=yo),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?yn(s,t-1,r,n,i):kt(i,s):n||(i[i.length]=s)}return i}var vn=Mi(),gn=Mi(!0);function mn(e,t){return e&&vn(e,t,Ms)}function bn(e,t){return e&&gn(e,t,Ms)}function Sn(e,t){return Pt(t,(function(t){return Qa(e[t])}))}function wn(e,t){for(var r=0,n=(t=vi(t,e)).length;null!=e&&r<n;)e=e[Bo(t[r++])];return r&&r==n?e:i}function Pn(e,t,r){var n=t(e);return za(e)?n:kt(n,r(e))}function _n(e){return null==e?e===i?"[object Undefined]":"[object Null]":st&&st in Ee(e)?function(e){var t=Re.call(e,st),r=e[st];try{e[st]=i;var n=!0}catch(e){}var o=je.call(e);return n&&(t?e[st]=r:delete e[st]),o}(e):function(e){return je.call(e)}(e)}function En(e,t){return e>t}function Cn(e,t){return null!=e&&Re.call(e,t)}function kn(e,t){return null!=e&&t in Ee(e)}function On(e,t,r){for(var o=r?Et:_t,a=e[0].length,s=e.length,c=s,l=n(s),u=1/0,d=[];c--;){var p=e[c];c&&t&&(p=Ct(p,Wt(t))),u=vr(p.length,u),l[c]=!r&&(t||a>=120&&p.length>=120)?new Hr(c&&p):i}p=e[0];var h=-1,f=l[0];e:for(;++h<a&&d.length<u;){var y=p[h],v=t?t(y):y;if(y=r||0!==y?y:0,!(f?Ht(f,v):o(d,v,r))){for(c=s;--c;){var g=l[c];if(!(g?Ht(g,v):o(e[c],v,r)))continue e}f&&f.push(v),d.push(y)}}return d}function xn(e,t,r){var n=null==(e=Co(e,t=vi(t,e)))?e:e[Bo(Yo(t))];return null==n?i:gt(n,e,r)}function In(e){return ts(e)&&_n(e)==y}function An(e,t,r,n,o){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!=e&&t!=t:function(e,t,r,n,o,a){var s=za(e),c=za(t),l=s?v:po(e),u=c?v:po(t),d=(l=l==y?E:l)==E,p=(u=u==y?E:u)==E,h=l==u;if(h&&$a(e)){if(!$a(t))return!1;s=!0,d=!1}if(h&&!d)return a||(a=new Gr),s||ls(e)?Ji(e,t,r,n,o,a):function(e,t,r,n,i,o,a){switch(r){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!o(new Ve(e),new Ve(t)));case g:case m:case _:return Ka(+e,+t);case b:return e.name==t.name&&e.message==t.message;case k:case x:return e==t+"";case P:var s=Zt;case O:var c=1&n;if(s||(s=rr),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;n|=2,a.set(e,t);var u=Ji(s(e),s(t),n,i,o,a);return a.delete(e),u;case I:if(Nr)return Nr.call(e)==Nr.call(t)}return!1}(e,t,l,r,n,o,a);if(!(1&r)){var f=d&&Re.call(e,"__wrapped__"),S=p&&Re.call(t,"__wrapped__");if(f||S){var w=f?e.value():e,C=S?t.value():t;return a||(a=new Gr),o(w,C,r,n,a)}}return!!h&&(a||(a=new Gr),function(e,t,r,n,o,a){var s=1&r,c=eo(e),l=c.length;if(l!=eo(t).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in t:Re.call(t,d)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var f=!0;a.set(e,t),a.set(t,e);for(var y=s;++u<l;){var v=e[d=c[u]],g=t[d];if(n)var m=s?n(g,v,d,t,e,a):n(v,g,d,e,t,a);if(!(m===i?v===g||o(v,g,r,n,a):m)){f=!1;break}y||(y="constructor"==d)}if(f&&!y){var b=e.constructor,S=t.constructor;b==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S||(f=!1)}return a.delete(e),a.delete(t),f}(e,t,r,n,o,a))}(e,t,r,n,An,o))}function Mn(e,t,r,n){var o=r.length,a=o,s=!n;if(null==e)return!a;for(e=Ee(e);o--;){var c=r[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var l=(c=r[o])[0],u=e[l],d=c[1];if(s&&c[2]){if(u===i&&!(l in e))return!1}else{var p=new Gr;if(n)var h=n(u,d,l,e,t,p);if(!(h===i?An(d,u,3,n,p):h))return!1}}return!0}function Dn(e){return!(!es(e)||(t=e,Ne&&Ne in t))&&(Qa(e)?Le:ye).test(Fo(e));var t}function Rn(e){return"function"==typeof e?e:null==e?nc:"object"==typeof e?za(e)?Fn(e[0],e[1]):Bn(e):pc(e)}function Tn(e){if(!wo(e))return fr(e);var t=[];for(var r in Ee(e))Re.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Nn(e,t){return e<t}function jn(e,t){var r=-1,i=Ga(e)?n(e.length):[];return un(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Bn(e){var t=so(e);return 1==t.length&&t[0][2]?_o(t[0][0],t[0][1]):function(r){return r===e||Mn(r,e,t)}}function Fn(e,t){return mo(e)&&Po(t)?_o(Bo(e),t):function(r){var n=ks(r,e);return n===i&&n===t?Os(r,e):An(t,n,3)}}function Ln(e,t,r,n,o){e!==t&&vn(t,(function(a,s){if(o||(o=new Gr),es(a))!function(e,t,r,n,o,a,s){var c=Oo(e,r),l=Oo(t,r),u=s.get(l);if(u)Qr(e,r,u);else{var d=a?a(c,l,r+"",e,t,s):i,p=d===i;if(p){var h=za(l),f=!h&&$a(l),y=!h&&!f&&ls(l);d=l,h||f||y?za(c)?d=c:qa(c)?d=ki(c):f?(p=!1,d=Si(l,!0)):y?(p=!1,d=Pi(l,!0)):d=[]:is(l)||Wa(l)?(d=c,Wa(c)?d=gs(c):es(c)&&!Qa(c)||(d=fo(l))):p=!1}p&&(s.set(l,d),o(d,l,n,a,s),s.delete(l)),Qr(e,r,d)}}(e,t,s,r,Ln,n,o);else{var c=n?n(Oo(e,s),a,s+"",e,t,o):i;c===i&&(c=a),Qr(e,s,c)}}),Ds)}function Kn(e,t){var r=e.length;if(r)return vo(t+=t<0?r:0,r)?e[t]:i}function Un(e,t,r){t=t.length?Ct(t,(function(e){return za(e)?function(t){return wn(t,1===e.length?e[0]:e)}:e})):[nc];var n=-1;t=Ct(t,Wt(oo()));var i=jn(e,(function(e,r,i){var o=Ct(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return function(e,t){var n=e.length;for(e.sort((function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var c=_i(i[n],o[n]);if(c)return n>=s?c:c*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}));n--;)e[n]=e[n].value;return e}(i)}function Vn(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=wn(e,a);r(s,a)&&Yn(o,vi(a,e),s)}return o}function Wn(e,t,r,n){var i=n?Tt:Rt,o=-1,a=t.length,s=e;for(e===t&&(t=ki(t)),r&&(s=Ct(e,Wt(r)));++o<a;)for(var c=0,l=t[o],u=r?r(l):l;(c=i(s,u,c,n))>-1;)s!==e&&nt.call(s,c,1),nt.call(e,c,1);return e}function zn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;vo(i)?nt.call(e,i,1):ci(e,i)}}return e}function Hn(e,t){return e+lr(br()*(t-e+1))}function Gn(e,t){var r="";if(!e||t<1||t>d)return r;do{t%2&&(r+=e),(t=lr(t/2))&&(e+=e)}while(t);return r}function qn(e,t){return Ao(Eo(e,t,nc),e+"")}function $n(e){return $r(Ks(e))}function Xn(e,t){var r=Ks(e);return Ro(r,on(t,0,r.length))}function Yn(e,t,r,n){if(!es(e))return e;for(var o=-1,a=(t=vi(t,e)).length,s=a-1,c=e;null!=c&&++o<a;){var l=Bo(t[o]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=s){var d=c[l];(u=n?n(d,l,c):i)===i&&(u=es(d)?d:vo(t[o+1])?[]:{})}Jr(c,l,u),c=c[l]}return e}var Qn=Or?function(e,t){return Or.set(e,t),e}:nc,Jn=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:ec(t),writable:!0})}:nc;function Zn(e){return Ro(Ks(e))}function ei(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=n(o);++i<o;)a[i]=e[i+t];return a}function ti(e,t){var r;return un(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function ri(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,a=e[o];null!==a&&!cs(a)&&(r?a<=t:a<t)?n=o+1:i=o}return i}return ni(e,t,nc,r)}function ni(e,t,r,n){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=r(t))!=t,c=null===t,l=cs(t),u=t===i;o<a;){var d=lr((o+a)/2),p=r(e[d]),h=p!==i,f=null===p,y=p==p,v=cs(p);if(s)var g=n||y;else g=u?y&&(n||h):c?y&&h&&(n||!f):l?y&&h&&!f&&(n||!v):!f&&!v&&(n?p<=t:p<t);g?o=d+1:a=d}return vr(a,4294967294)}function ii(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r],s=t?t(a):a;if(!r||!Ka(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function oi(e){return"number"==typeof e?e:cs(e)?p:+e}function ai(e){if("string"==typeof e)return e;if(za(e))return Ct(e,ai)+"";if(cs(e))return jr?jr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function si(e,t,r){var n=-1,i=_t,o=e.length,a=!0,s=[],c=s;if(r)a=!1,i=Et;else if(o>=200){var l=t?null:Gi(e);if(l)return rr(l);a=!1,i=Ht,c=new Hr}else c=t?[]:s;e:for(;++n<o;){var u=e[n],d=t?t(u):u;if(u=r||0!==u?u:0,a&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),s.push(u)}else i(c,d,r)||(c!==s&&c.push(d),s.push(u))}return s}function ci(e,t){return null==(e=Co(e,t=vi(t,e)))||delete e[Bo(Yo(t))]}function li(e,t,r,n){return Yn(e,t,r(wn(e,t)),n)}function ui(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?ei(e,n?0:o,n?o+1:i):ei(e,n?o+1:0,n?i:o)}function di(e,t){var r=e;return r instanceof Ur&&(r=r.value()),Ot(t,(function(e,t){return t.func.apply(t.thisArg,kt([e],t.args))}),r)}function pi(e,t,r){var i=e.length;if(i<2)return i?si(e[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=e[o],c=-1;++c<i;)c!=o&&(a[o]=ln(a[o]||s,e[c],t,r));return si(yn(a,1),t,r)}function hi(e,t,r){for(var n=-1,o=e.length,a=t.length,s={};++n<o;){var c=n<a?t[n]:i;r(s,e[n],c)}return s}function fi(e){return qa(e)?e:[]}function yi(e){return"function"==typeof e?e:nc}function vi(e,t){return za(e)?e:mo(e,t)?[e]:jo(ms(e))}var gi=qn;function mi(e,t,r){var n=e.length;return r=r===i?n:r,!t&&r>=n?e:ei(e,t,r)}var bi=ut||function(e){return ot.clearTimeout(e)};function Si(e,t){if(t)return e.slice();var r=e.length,n=We?We(r):new e.constructor(r);return e.copy(n),n}function wi(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function Pi(e,t){var r=t?wi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function _i(e,t){if(e!==t){var r=e!==i,n=null===e,o=e==e,a=cs(e),s=t!==i,c=null===t,l=t==t,u=cs(t);if(!c&&!u&&!a&&e>t||a&&s&&l&&!c&&!u||n&&s&&l||!r&&l||!o)return 1;if(!n&&!a&&!u&&e<t||u&&r&&o&&!n&&!a||c&&r&&o||!s&&o||!l)return-1}return 0}function Ei(e,t,r,i){for(var o=-1,a=e.length,s=r.length,c=-1,l=t.length,u=yr(a-s,0),d=n(l+u),p=!i;++c<l;)d[c]=t[c];for(;++o<s;)(p||o<a)&&(d[r[o]]=e[o]);for(;u--;)d[c++]=e[o++];return d}function Ci(e,t,r,i){for(var o=-1,a=e.length,s=-1,c=r.length,l=-1,u=t.length,d=yr(a-c,0),p=n(d+u),h=!i;++o<d;)p[o]=e[o];for(var f=o;++l<u;)p[f+l]=t[l];for(;++s<c;)(h||o<a)&&(p[f+r[s]]=e[o++]);return p}function ki(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Oi(e,t,r,n){var o=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var c=t[a],l=n?n(r[c],e[c],c,r,e):i;l===i&&(l=e[c]),o?rn(r,c,l):Jr(r,c,l)}return r}function xi(e,t){return function(r,n){var i=za(r)?mt:en,o=t?t():{};return i(r,e,oo(n,2),o)}}function Ii(e){return qn((function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:i,s=o>2?r[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&go(r[0],r[1],s)&&(a=o<3?i:a,o=1),t=Ee(t);++n<o;){var c=r[n];c&&e(t,c,n,a)}return t}))}function Ai(e,t){return function(r,n){if(null==r)return r;if(!Ga(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Ee(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}function Mi(e){return function(t,r,n){for(var i=-1,o=Ee(t),a=n(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===r(o[c],c,o))break}return t}}function Di(e){return function(t){var r=Jt(t=ms(t))?ir(t):i,n=r?r[0]:t.charAt(0),o=r?mi(r,1).join(""):t.slice(1);return n[e]()+o}}function Ri(e){return function(t){return Ot(Qs(Ws(t).replace(ze,"")),e,"")}}function Ti(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Fr(e.prototype),n=e.apply(r,t);return es(n)?n:r}}function Ni(e){return function(t,r,n){var o=Ee(t);if(!Ga(t)){var a=oo(r,3);t=Ms(t),r=function(e){return a(o[e],e,o)}}var s=e(t,r,n);return s>-1?o[a?t[s]:s]:i}}function ji(e){return Zi((function(t){var r=t.length,n=r,a=Kr.prototype.thru;for(e&&t.reverse();n--;){var s=t[n];if("function"!=typeof s)throw new Oe(o);if(a&&!c&&"wrapper"==no(s))var c=new Kr([],!0)}for(n=c?n:r;++n<r;){var l=no(s=t[n]),u="wrapper"==l?ro(s):i;c=u&&bo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[no(u[0])].apply(c,u[3]):1==s.length&&bo(s)?c[l]():c.thru(s)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&za(n))return c.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}}))}function Bi(e,t,r,o,a,s,c,u,d,p){var h=t&l,f=1&t,y=2&t,v=24&t,g=512&t,m=y?i:Ti(e);return function i(){for(var l=arguments.length,b=n(l),S=l;S--;)b[S]=arguments[S];if(v)var w=io(i),P=$t(b,w);if(o&&(b=Ei(b,o,a,v)),s&&(b=Ci(b,s,c,v)),l-=P,v&&l<p){var _=tr(b,w);return zi(e,t,Bi,i.placeholder,r,b,_,u,d,p-l)}var E=f?r:this,C=y?E[e]:e;return l=b.length,u?b=ko(b,u):g&&l>1&&b.reverse(),h&&d<l&&(b.length=d),this&&this!==ot&&this instanceof i&&(C=m||Ti(C)),C.apply(E,b)}}function Fi(e,t){return function(r,n){return function(e,t,r,n){return mn(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}}function Li(e,t){return function(r,n){var o;if(r===i&&n===i)return t;if(r!==i&&(o=r),n!==i){if(o===i)return n;"string"==typeof r||"string"==typeof n?(r=ai(r),n=ai(n)):(r=oi(r),n=oi(n)),o=e(r,n)}return o}}function Ki(e){return Zi((function(t){return t=Ct(t,Wt(oo())),qn((function(r){var n=this;return e(t,(function(e){return gt(e,n,r)}))}))}))}function Ui(e,t){var r=(t=t===i?" ":ai(t)).length;if(r<2)return r?Gn(t,e):t;var n=Gn(t,cr(e/nr(t)));return Jt(t)?mi(ir(n),0,e).join(""):n.slice(0,e)}function Vi(e){return function(t,r,o){return o&&"number"!=typeof o&&go(t,r,o)&&(r=o=i),t=hs(t),r===i?(r=t,t=0):r=hs(r),function(e,t,r,i){for(var o=-1,a=yr(cr((t-e)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=e,e+=r;return s}(t,r,o=o===i?t<r?1:-1:hs(o),e)}}function Wi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=vs(t),r=vs(r)),e(t,r)}}function zi(e,t,r,n,o,a,s,l,u,d){var p=8&t;t|=p?c:64,4&(t&=~(p?64:c))||(t&=-4);var h=[e,t,o,p?a:i,p?s:i,p?i:a,p?i:s,l,u,d],f=r.apply(i,h);return bo(e)&&xo(f,h),f.placeholder=n,Mo(f,e,t)}function Hi(e){var t=_e[e];return function(e,r){if(e=vs(e),(r=null==r?0:vr(fs(r),292))&&pr(e)){var n=(ms(e)+"e").split("e");return+((n=(ms(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Gi=Er&&1/rr(new Er([,-0]))[1]==u?function(e){return new Er(e)}:cc;function qi(e){return function(t){var r=po(t);return r==P?Zt(t):r==O?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return Ct(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function $i(e,t,r,a,u,d,p,h){var f=2&t;if(!f&&"function"!=typeof e)throw new Oe(o);var y=a?a.length:0;if(y||(t&=-97,a=u=i),p=p===i?p:yr(fs(p),0),h=h===i?h:fs(h),y-=u?u.length:0,64&t){var v=a,g=u;a=u=i}var m=f?i:ro(e),b=[e,t,r,a,u,v,g,d,p,h];if(m&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,a=n==l&&8==r||n==l&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!o&&!a)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?Ei(u,c,t[4]):c,e[4]=u?tr(e[3],s):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Ci(u,c,t[6]):c,e[6]=u?tr(e[5],s):t[6]),(c=t[7])&&(e[7]=c),n&l&&(e[8]=null==e[8]?t[8]:vr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(b,m),e=b[0],t=b[1],r=b[2],a=b[3],u=b[4],!(h=b[9]=b[9]===i?f?0:e.length:yr(b[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||16==t?function(e,t,r){var o=Ti(e);return function a(){for(var s=arguments.length,c=n(s),l=s,u=io(a);l--;)c[l]=arguments[l];var d=s<3&&c[0]!==u&&c[s-1]!==u?[]:tr(c,u);return(s-=d.length)<r?zi(e,t,Bi,a.placeholder,i,c,d,i,i,r-s):gt(this&&this!==ot&&this instanceof a?o:e,this,c)}}(e,t,h):t!=c&&33!=t||u.length?Bi.apply(i,b):function(e,t,r,i){var o=1&t,a=Ti(e);return function t(){for(var s=-1,c=arguments.length,l=-1,u=i.length,d=n(u+c),p=this&&this!==ot&&this instanceof t?a:e;++l<u;)d[l]=i[l];for(;c--;)d[l++]=arguments[++s];return gt(p,o?r:this,d)}}(e,t,r,a);else var S=function(e,t,r){var n=1&t,i=Ti(e);return function t(){return(this&&this!==ot&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return Mo((m?Qn:xo)(S,b),e,t)}function Xi(e,t,r,n){return e===i||Ka(e,Ae[r])&&!Re.call(n,r)?t:e}function Yi(e,t,r,n,o,a){return es(e)&&es(t)&&(a.set(t,e),Ln(e,t,i,Yi,a),a.delete(t)),e}function Qi(e){return is(e)?i:e}function Ji(e,t,r,n,o,a){var s=1&r,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var p=-1,h=!0,f=2&r?new Hr:i;for(a.set(e,t),a.set(t,e);++p<c;){var y=e[p],v=t[p];if(n)var g=s?n(v,y,p,t,e,a):n(y,v,p,e,t,a);if(g!==i){if(g)continue;h=!1;break}if(f){if(!It(t,(function(e,t){if(!Ht(f,t)&&(y===e||o(y,e,r,n,a)))return f.push(t)}))){h=!1;break}}else if(y!==v&&!o(y,v,r,n,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Zi(e){return Ao(Eo(e,i,Ho),e+"")}function eo(e){return Pn(e,Ms,lo)}function to(e){return Pn(e,Ds,uo)}var ro=Or?function(e){return Or.get(e)}:cc;function no(e){for(var t=e.name+"",r=xr[t],n=Re.call(xr,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function io(e){return(Re.call(Br,"placeholder")?Br:e).placeholder}function oo(){var e=Br.iteratee||ic;return e=e===ic?Rn:e,arguments.length?e(arguments[0],arguments[1]):e}function ao(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function so(e){for(var t=Ms(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Po(i)]}return t}function co(e,t){var r=function(e,t){return null==e?i:e[t]}(e,t);return Dn(r)?r:i}var lo=ur?function(e){return null==e?[]:(e=Ee(e),Pt(ur(e),(function(t){return et.call(e,t)})))}:yc,uo=ur?function(e){for(var t=[];e;)kt(t,lo(e)),e=Ge(e);return t}:yc,po=_n;function ho(e,t,r){for(var n=-1,i=(t=vi(t,e)).length,o=!1;++n<i;){var a=Bo(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Za(i)&&vo(a,i)&&(za(e)||Wa(e))}function fo(e){return"function"!=typeof e.constructor||wo(e)?{}:Fr(Ge(e))}function yo(e){return za(e)||Wa(e)||!!(it&&e&&e[it])}function vo(e,t){var r=typeof e;return!!(t=null==t?d:t)&&("number"==r||"symbol"!=r&&ge.test(e))&&e>-1&&e%1==0&&e<t}function go(e,t,r){if(!es(r))return!1;var n=typeof t;return!!("number"==n?Ga(r)&&vo(t,r.length):"string"==n&&t in r)&&Ka(r[t],e)}function mo(e,t){if(za(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!cs(e))||Z.test(e)||!J.test(e)||null!=t&&e in Ee(t)}function bo(e){var t=no(e),r=Br[t];if("function"!=typeof r||!(t in Ur.prototype))return!1;if(e===r)return!0;var n=ro(r);return!!n&&e===n[0]}(wr&&po(new wr(new ArrayBuffer(1)))!=D||Pr&&po(new Pr)!=P||_r&&po(_r.resolve())!=C||Er&&po(new Er)!=O||Cr&&po(new Cr)!=A)&&(po=function(e){var t=_n(e),r=t==E?e.constructor:i,n=r?Fo(r):"";if(n)switch(n){case Ir:return D;case Ar:return P;case Mr:return C;case Dr:return O;case Rr:return A}return t});var So=Me?Qa:vc;function wo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)}function Po(e){return e==e&&!es(e)}function _o(e,t){return function(r){return null!=r&&r[e]===t&&(t!==i||e in Ee(r))}}function Eo(e,t,r){return t=yr(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=yr(i.length-t,0),s=n(a);++o<a;)s[o]=i[t+o];o=-1;for(var c=n(t+1);++o<t;)c[o]=i[o];return c[t]=r(s),gt(e,this,c)}}function Co(e,t){return t.length<2?e:wn(e,ei(t,0,-1))}function ko(e,t){for(var r=e.length,n=vr(t.length,r),o=ki(e);n--;){var a=t[n];e[n]=vo(a,r)?o[a]:i}return e}function Oo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var xo=Do(Qn),Io=Ft||function(e,t){return ot.setTimeout(e,t)},Ao=Do(Jn);function Mo(e,t,r){var n=t+"";return Ao(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return bt(f,(function(r){var n="_."+r[0];t&r[1]&&!_t(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(se):[]}(n),r)))}function Do(e){var t=0,r=0;return function(){var n=gr(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Ro(e,t){var r=-1,n=e.length,o=n-1;for(t=t===i?n:t;++r<t;){var a=Hn(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=t,e}var To,No,jo=(To=Ta((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,r,n,i){t.push(n?i.replace(ue,"$1"):r||e)})),t}),(function(e){return 500===No.size&&No.clear(),e})),No=To.cache,To);function Bo(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fo(e){if(null!=e){try{return De.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Lo(e){if(e instanceof Ur)return e.clone();var t=new Kr(e.__wrapped__,e.__chain__);return t.__actions__=ki(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ko=qn((function(e,t){return qa(e)?ln(e,yn(t,1,qa,!0)):[]})),Uo=qn((function(e,t){var r=Yo(t);return qa(r)&&(r=i),qa(e)?ln(e,yn(t,1,qa,!0),oo(r,2)):[]})),Vo=qn((function(e,t){var r=Yo(t);return qa(r)&&(r=i),qa(e)?ln(e,yn(t,1,qa,!0),i,r):[]}));function Wo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:fs(r);return i<0&&(i=yr(n+i,0)),Dt(e,oo(t,3),i)}function zo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return r!==i&&(o=fs(r),o=r<0?yr(n+o,0):vr(o,n-1)),Dt(e,oo(t,3),o,!0)}function Ho(e){return null!=e&&e.length?yn(e,1):[]}function Go(e){return e&&e.length?e[0]:i}var qo=qn((function(e){var t=Ct(e,fi);return t.length&&t[0]===e[0]?On(t):[]})),$o=qn((function(e){var t=Yo(e),r=Ct(e,fi);return t===Yo(r)?t=i:r.pop(),r.length&&r[0]===e[0]?On(r,oo(t,2)):[]})),Xo=qn((function(e){var t=Yo(e),r=Ct(e,fi);return(t="function"==typeof t?t:i)&&r.pop(),r.length&&r[0]===e[0]?On(r,i,t):[]}));function Yo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Qo=qn(Jo);function Jo(e,t){return e&&e.length&&t&&t.length?Wn(e,t):e}var Zo=Zi((function(e,t){var r=null==e?0:e.length,n=nn(e,t);return zn(e,Ct(t,(function(e){return vo(e,r)?+e:e})).sort(_i)),n}));function ea(e){return null==e?e:Sr.call(e)}var ta=qn((function(e){return si(yn(e,1,qa,!0))})),ra=qn((function(e){var t=Yo(e);return qa(t)&&(t=i),si(yn(e,1,qa,!0),oo(t,2))})),na=qn((function(e){var t=Yo(e);return t="function"==typeof t?t:i,si(yn(e,1,qa,!0),i,t)}));function ia(e){if(!e||!e.length)return[];var t=0;return e=Pt(e,(function(e){if(qa(e))return t=yr(e.length,t),!0})),Ut(t,(function(t){return Ct(e,Bt(t))}))}function oa(e,t){if(!e||!e.length)return[];var r=ia(e);return null==t?r:Ct(r,(function(e){return gt(t,i,e)}))}var aa=qn((function(e,t){return qa(e)?ln(e,t):[]})),sa=qn((function(e){return pi(Pt(e,qa))})),ca=qn((function(e){var t=Yo(e);return qa(t)&&(t=i),pi(Pt(e,qa),oo(t,2))})),la=qn((function(e){var t=Yo(e);return t="function"==typeof t?t:i,pi(Pt(e,qa),i,t)})),ua=qn(ia),da=qn((function(e){var t=e.length,r=t>1?e[t-1]:i;return r="function"==typeof r?(e.pop(),r):i,oa(e,r)}));function pa(e){var t=Br(e);return t.__chain__=!0,t}function ha(e,t){return t(e)}var fa=Zi((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,o=function(t){return nn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Ur&&vo(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:ha,args:[o],thisArg:i}),new Kr(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)})),ya=xi((function(e,t,r){Re.call(e,r)?++e[r]:rn(e,r,1)})),va=Ni(Wo),ga=Ni(zo);function ma(e,t){return(za(e)?bt:un)(e,oo(t,3))}function ba(e,t){return(za(e)?St:dn)(e,oo(t,3))}var Sa=xi((function(e,t,r){Re.call(e,r)?e[r].push(t):rn(e,r,[t])})),wa=qn((function(e,t,r){var i=-1,o="function"==typeof t,a=Ga(e)?n(e.length):[];return un(e,(function(e){a[++i]=o?gt(t,e,r):xn(e,t,r)})),a})),Pa=xi((function(e,t,r){rn(e,r,t)}));function _a(e,t){return(za(e)?Ct:jn)(e,oo(t,3))}var Ea=xi((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),Ca=qn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&go(e,t[0],t[1])?t=[]:r>2&&go(t[0],t[1],t[2])&&(t=[t[0]]),Un(e,yn(t,1),[])})),ka=At||function(){return ot.Date.now()};function Oa(e,t,r){return t=r?i:t,t=e&&null==t?e.length:t,$i(e,l,i,i,i,i,t)}function xa(e,t){var r;if("function"!=typeof t)throw new Oe(o);return e=fs(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var Ia=qn((function(e,t,r){var n=1;if(r.length){var i=tr(r,io(Ia));n|=c}return $i(e,n,t,r,i)})),Aa=qn((function(e,t,r){var n=3;if(r.length){var i=tr(r,io(Aa));n|=c}return $i(t,n,e,r,i)}));function Ma(e,t,r){var n,a,s,c,l,u,d=0,p=!1,h=!1,f=!0;if("function"!=typeof e)throw new Oe(o);function y(t){var r=n,o=a;return n=a=i,d=t,c=e.apply(o,r)}function v(e){return d=e,l=Io(m,t),p?y(e):c}function g(e){var r=e-u;return u===i||r>=t||r<0||h&&e-d>=s}function m(){var e=ka();if(g(e))return b(e);l=Io(m,function(e){var r=t-(e-u);return h?vr(r,s-(e-d)):r}(e))}function b(e){return l=i,f&&n?y(e):(n=a=i,c)}function S(){var e=ka(),r=g(e);if(n=arguments,a=this,u=e,r){if(l===i)return v(u);if(h)return bi(l),l=Io(m,t),y(u)}return l===i&&(l=Io(m,t)),c}return t=vs(t)||0,es(r)&&(p=!!r.leading,s=(h="maxWait"in r)?yr(vs(r.maxWait)||0,t):s,f="trailing"in r?!!r.trailing:f),S.cancel=function(){l!==i&&bi(l),d=0,n=u=a=l=i},S.flush=function(){return l===i?c:b(ka())},S}var Da=qn((function(e,t){return cn(e,1,t)})),Ra=qn((function(e,t,r){return cn(e,vs(t)||0,r)}));function Ta(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(o);var r=function r(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Ta.Cache||zr),r}function Na(e){if("function"!=typeof e)throw new Oe(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ta.Cache=zr;var ja=gi((function(e,t){var r=(t=1==t.length&&za(t[0])?Ct(t[0],Wt(oo())):Ct(yn(t,1),Wt(oo()))).length;return qn((function(n){for(var i=-1,o=vr(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return gt(e,this,n)}))})),Ba=qn((function(e,t){var r=tr(t,io(Ba));return $i(e,c,i,t,r)})),Fa=qn((function(e,t){var r=tr(t,io(Fa));return $i(e,64,i,t,r)})),La=Zi((function(e,t){return $i(e,256,i,i,i,t)}));function Ka(e,t){return e===t||e!=e&&t!=t}var Ua=Wi(En),Va=Wi((function(e,t){return e>=t})),Wa=In(function(){return arguments}())?In:function(e){return ts(e)&&Re.call(e,"callee")&&!et.call(e,"callee")},za=n.isArray,Ha=dt?Wt(dt):function(e){return ts(e)&&_n(e)==M};function Ga(e){return null!=e&&Za(e.length)&&!Qa(e)}function qa(e){return ts(e)&&Ga(e)}var $a=dr||vc,Xa=pt?Wt(pt):function(e){return ts(e)&&_n(e)==m};function Ya(e){if(!ts(e))return!1;var t=_n(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!is(e)}function Qa(e){if(!es(e))return!1;var t=_n(e);return t==S||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ja(e){return"number"==typeof e&&e==fs(e)}function Za(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var rs=ht?Wt(ht):function(e){return ts(e)&&po(e)==P};function ns(e){return"number"==typeof e||ts(e)&&_n(e)==_}function is(e){if(!ts(e)||_n(e)!=E)return!1;var t=Ge(e);if(null===t)return!0;var r=Re.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&De.call(r)==Be}var os=ft?Wt(ft):function(e){return ts(e)&&_n(e)==k},as=yt?Wt(yt):function(e){return ts(e)&&po(e)==O};function ss(e){return"string"==typeof e||!za(e)&&ts(e)&&_n(e)==x}function cs(e){return"symbol"==typeof e||ts(e)&&_n(e)==I}var ls=vt?Wt(vt):function(e){return ts(e)&&Za(e.length)&&!!Je[_n(e)]},us=Wi(Nn),ds=Wi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Ga(e))return ss(e)?ir(e):ki(e);if(at&&e[at])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[at]());var t=po(e);return(t==P?Zt:t==O?rr:Ks)(e)}function hs(e){return e?(e=vs(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fs(e){var t=hs(e),r=t%1;return t==t?r?t-r:t:0}function ys(e){return e?on(fs(e),0,h):0}function vs(e){if("number"==typeof e)return e;if(cs(e))return p;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Vt(e);var r=fe.test(e);return r||ve.test(e)?rt(e.slice(2),r?2:8):he.test(e)?p:+e}function gs(e){return Oi(e,Ds(e))}function ms(e){return null==e?"":ai(e)}var bs=Ii((function(e,t){if(wo(t)||Ga(t))Oi(t,Ms(t),e);else for(var r in t)Re.call(t,r)&&Jr(e,r,t[r])})),Ss=Ii((function(e,t){Oi(t,Ds(t),e)})),ws=Ii((function(e,t,r,n){Oi(t,Ds(t),e,n)})),Ps=Ii((function(e,t,r,n){Oi(t,Ms(t),e,n)})),_s=Zi(nn),Es=qn((function(e,t){e=Ee(e);var r=-1,n=t.length,o=n>2?t[2]:i;for(o&&go(t[0],t[1],o)&&(n=1);++r<n;)for(var a=t[r],s=Ds(a),c=-1,l=s.length;++c<l;){var u=s[c],d=e[u];(d===i||Ka(d,Ae[u])&&!Re.call(e,u))&&(e[u]=a[u])}return e})),Cs=qn((function(e){return e.push(i,Yi),gt(Ts,i,e)}));function ks(e,t,r){var n=null==e?i:wn(e,t);return n===i?r:n}function Os(e,t){return null!=e&&ho(e,t,kn)}var xs=Fi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=r}),ec(nc)),Is=Fi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),Re.call(e,t)?e[t].push(r):e[t]=[r]}),oo),As=qn(xn);function Ms(e){return Ga(e)?qr(e):Tn(e)}function Ds(e){return Ga(e)?qr(e,!0):function(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var r in Ee(e))t.push(r);return t}(e);var t=wo(e),r=[];for(var n in e)("constructor"!=n||!t&&Re.call(e,n))&&r.push(n);return r}(e)}var Rs=Ii((function(e,t,r){Ln(e,t,r)})),Ts=Ii((function(e,t,r,n){Ln(e,t,r,n)})),Ns=Zi((function(e,t){var r={};if(null==e)return r;var n=!1;t=Ct(t,(function(t){return t=vi(t,e),n||(n=t.length>1),t})),Oi(e,to(e),r),n&&(r=an(r,7,Qi));for(var i=t.length;i--;)ci(r,t[i]);return r})),js=Zi((function(e,t){return null==e?{}:function(e,t){return Vn(e,t,(function(t,r){return Os(e,r)}))}(e,t)}));function Bs(e,t){if(null==e)return{};var r=Ct(to(e),(function(e){return[e]}));return t=oo(t),Vn(e,r,(function(e,r){return t(e,r[0])}))}var Fs=qi(Ms),Ls=qi(Ds);function Ks(e){return null==e?[]:zt(e,Ms(e))}var Us=Ri((function(e,t,r){return t=t.toLowerCase(),e+(r?Vs(t):t)}));function Vs(e){return Ys(ms(e).toLowerCase())}function Ws(e){return(e=ms(e))&&e.replace(me,Xt).replace(He,"")}var zs=Ri((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Hs=Ri((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Gs=Di("toLowerCase"),qs=Ri((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),$s=Ri((function(e,t,r){return e+(r?" ":"")+Ys(t)})),Xs=Ri((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Ys=Di("toUpperCase");function Qs(e,t,r){return e=ms(e),(t=r?i:t)===i?function(e){return Xe.test(e)}(e)?function(e){return e.match(qe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Js=qn((function(e,t){try{return gt(e,i,t)}catch(e){return Ya(e)?e:new we(e)}})),Zs=Zi((function(e,t){return bt(t,(function(t){t=Bo(t),rn(e,t,Ia(e[t],e))})),e}));function ec(e){return function(){return e}}var tc=ji(),rc=ji(!0);function nc(e){return e}function ic(e){return Rn("function"==typeof e?e:an(e,1))}var oc=qn((function(e,t){return function(r){return xn(r,e,t)}})),ac=qn((function(e,t){return function(r){return xn(e,r,t)}}));function sc(e,t,r){var n=Ms(t),i=Sn(t,n);null!=r||es(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=Sn(t,Ms(t)));var o=!(es(r)&&"chain"in r&&!r.chain),a=Qa(e);return bt(i,(function(r){var n=t[r];e[r]=n,a&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__),i=r.__actions__=ki(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,kt([this.value()],arguments))})})),e}function cc(){}var lc=Ki(Ct),uc=Ki(wt),dc=Ki(It);function pc(e){return mo(e)?Bt(Bo(e)):function(e){return function(t){return wn(t,e)}}(e)}var hc=Vi(),fc=Vi(!0);function yc(){return[]}function vc(){return!1}var gc,mc=Li((function(e,t){return e+t}),0),bc=Hi("ceil"),Sc=Li((function(e,t){return e/t}),1),wc=Hi("floor"),Pc=Li((function(e,t){return e*t}),1),_c=Hi("round"),Ec=Li((function(e,t){return e-t}),0);return Br.after=function(e,t){if("function"!=typeof t)throw new Oe(o);return e=fs(e),function(){if(--e<1)return t.apply(this,arguments)}},Br.ary=Oa,Br.assign=bs,Br.assignIn=Ss,Br.assignInWith=ws,Br.assignWith=Ps,Br.at=_s,Br.before=xa,Br.bind=Ia,Br.bindAll=Zs,Br.bindKey=Aa,Br.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return za(e)?e:[e]},Br.chain=pa,Br.chunk=function(e,t,r){t=(r?go(e,t,r):t===i)?1:yr(fs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,c=n(cr(o/t));a<o;)c[s++]=ei(e,a,a+=t);return c},Br.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},Br.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return kt(za(r)?ki(r):[r],yn(t,1))},Br.cond=function(e){var t=null==e?0:e.length,r=oo();return e=t?Ct(e,(function(e){if("function"!=typeof e[1])throw new Oe(o);return[r(e[0]),e[1]]})):[],qn((function(r){for(var n=-1;++n<t;){var i=e[n];if(gt(i[0],this,r))return gt(i[1],this,r)}}))},Br.conforms=function(e){return function(e){var t=Ms(e);return function(r){return sn(r,e,t)}}(an(e,1))},Br.constant=ec,Br.countBy=ya,Br.create=function(e,t){var r=Fr(e);return null==t?r:tn(r,t)},Br.curry=function e(t,r,n){var o=$i(t,8,i,i,i,i,i,r=n?i:r);return o.placeholder=e.placeholder,o},Br.curryRight=function e(t,r,n){var o=$i(t,16,i,i,i,i,i,r=n?i:r);return o.placeholder=e.placeholder,o},Br.debounce=Ma,Br.defaults=Es,Br.defaultsDeep=Cs,Br.defer=Da,Br.delay=Ra,Br.difference=Ko,Br.differenceBy=Uo,Br.differenceWith=Vo,Br.drop=function(e,t,r){var n=null==e?0:e.length;return n?ei(e,(t=r||t===i?1:fs(t))<0?0:t,n):[]},Br.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?ei(e,0,(t=n-(t=r||t===i?1:fs(t)))<0?0:t):[]},Br.dropRightWhile=function(e,t){return e&&e.length?ui(e,oo(t,3),!0,!0):[]},Br.dropWhile=function(e,t){return e&&e.length?ui(e,oo(t,3),!0):[]},Br.fill=function(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&go(e,t,r)&&(r=0,n=o),function(e,t,r,n){var o=e.length;for((r=fs(r))<0&&(r=-r>o?0:o+r),(n=n===i||n>o?o:fs(n))<0&&(n+=o),n=r>n?0:ys(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},Br.filter=function(e,t){return(za(e)?Pt:fn)(e,oo(t,3))},Br.flatMap=function(e,t){return yn(_a(e,t),1)},Br.flatMapDeep=function(e,t){return yn(_a(e,t),u)},Br.flatMapDepth=function(e,t,r){return r=r===i?1:fs(r),yn(_a(e,t),r)},Br.flatten=Ho,Br.flattenDeep=function(e){return null!=e&&e.length?yn(e,u):[]},Br.flattenDepth=function(e,t){return null!=e&&e.length?yn(e,t=t===i?1:fs(t)):[]},Br.flip=function(e){return $i(e,512)},Br.flow=tc,Br.flowRight=rc,Br.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Br.functions=function(e){return null==e?[]:Sn(e,Ms(e))},Br.functionsIn=function(e){return null==e?[]:Sn(e,Ds(e))},Br.groupBy=Sa,Br.initial=function(e){return null!=e&&e.length?ei(e,0,-1):[]},Br.intersection=qo,Br.intersectionBy=$o,Br.intersectionWith=Xo,Br.invert=xs,Br.invertBy=Is,Br.invokeMap=wa,Br.iteratee=ic,Br.keyBy=Pa,Br.keys=Ms,Br.keysIn=Ds,Br.map=_a,Br.mapKeys=function(e,t){var r={};return t=oo(t,3),mn(e,(function(e,n,i){rn(r,t(e,n,i),e)})),r},Br.mapValues=function(e,t){var r={};return t=oo(t,3),mn(e,(function(e,n,i){rn(r,n,t(e,n,i))})),r},Br.matches=function(e){return Bn(an(e,1))},Br.matchesProperty=function(e,t){return Fn(e,an(t,1))},Br.memoize=Ta,Br.merge=Rs,Br.mergeWith=Ts,Br.method=oc,Br.methodOf=ac,Br.mixin=sc,Br.negate=Na,Br.nthArg=function(e){return e=fs(e),qn((function(t){return Kn(t,e)}))},Br.omit=Ns,Br.omitBy=function(e,t){return Bs(e,Na(oo(t)))},Br.once=function(e){return xa(2,e)},Br.orderBy=function(e,t,r,n){return null==e?[]:(za(t)||(t=null==t?[]:[t]),za(r=n?i:r)||(r=null==r?[]:[r]),Un(e,t,r))},Br.over=lc,Br.overArgs=ja,Br.overEvery=uc,Br.overSome=dc,Br.partial=Ba,Br.partialRight=Fa,Br.partition=Ea,Br.pick=js,Br.pickBy=Bs,Br.property=pc,Br.propertyOf=function(e){return function(t){return null==e?i:wn(e,t)}},Br.pull=Qo,Br.pullAll=Jo,Br.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Wn(e,t,oo(r,2)):e},Br.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Wn(e,t,i,r):e},Br.pullAt=Zo,Br.range=hc,Br.rangeRight=fc,Br.rearg=La,Br.reject=function(e,t){return(za(e)?Pt:fn)(e,Na(oo(t,3)))},Br.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=oo(t,3);++n<o;){var a=e[n];t(a,n,e)&&(r.push(a),i.push(n))}return zn(e,i),r},Br.rest=function(e,t){if("function"!=typeof e)throw new Oe(o);return qn(e,t=t===i?t:fs(t))},Br.reverse=ea,Br.sampleSize=function(e,t,r){return t=(r?go(e,t,r):t===i)?1:fs(t),(za(e)?Xr:Xn)(e,t)},Br.set=function(e,t,r){return null==e?e:Yn(e,t,r)},Br.setWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:Yn(e,t,r,n)},Br.shuffle=function(e){return(za(e)?Yr:Zn)(e)},Br.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&go(e,t,r)?(t=0,r=n):(t=null==t?0:fs(t),r=r===i?n:fs(r)),ei(e,t,r)):[]},Br.sortBy=Ca,Br.sortedUniq=function(e){return e&&e.length?ii(e):[]},Br.sortedUniqBy=function(e,t){return e&&e.length?ii(e,oo(t,2)):[]},Br.split=function(e,t,r){return r&&"number"!=typeof r&&go(e,t,r)&&(t=r=i),(r=r===i?h:r>>>0)?(e=ms(e))&&("string"==typeof t||null!=t&&!os(t))&&!(t=ai(t))&&Jt(e)?mi(ir(e),0,r):e.split(t,r):[]},Br.spread=function(e,t){if("function"!=typeof e)throw new Oe(o);return t=null==t?0:yr(fs(t),0),qn((function(r){var n=r[t],i=mi(r,0,t);return n&&kt(i,n),gt(e,this,i)}))},Br.tail=function(e){var t=null==e?0:e.length;return t?ei(e,1,t):[]},Br.take=function(e,t,r){return e&&e.length?ei(e,0,(t=r||t===i?1:fs(t))<0?0:t):[]},Br.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?ei(e,(t=n-(t=r||t===i?1:fs(t)))<0?0:t,n):[]},Br.takeRightWhile=function(e,t){return e&&e.length?ui(e,oo(t,3),!1,!0):[]},Br.takeWhile=function(e,t){return e&&e.length?ui(e,oo(t,3)):[]},Br.tap=function(e,t){return t(e),e},Br.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new Oe(o);return es(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ma(e,t,{leading:n,maxWait:t,trailing:i})},Br.thru=ha,Br.toArray=ps,Br.toPairs=Fs,Br.toPairsIn=Ls,Br.toPath=function(e){return za(e)?Ct(e,Bo):cs(e)?[e]:ki(jo(ms(e)))},Br.toPlainObject=gs,Br.transform=function(e,t,r){var n=za(e),i=n||$a(e)||ls(e);if(t=oo(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:es(e)&&Qa(o)?Fr(Ge(e)):{}}return(i?bt:mn)(e,(function(e,n,i){return t(r,e,n,i)})),r},Br.unary=function(e){return Oa(e,1)},Br.union=ta,Br.unionBy=ra,Br.unionWith=na,Br.uniq=function(e){return e&&e.length?si(e):[]},Br.uniqBy=function(e,t){return e&&e.length?si(e,oo(t,2)):[]},Br.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?si(e,i,t):[]},Br.unset=function(e,t){return null==e||ci(e,t)},Br.unzip=ia,Br.unzipWith=oa,Br.update=function(e,t,r){return null==e?e:li(e,t,yi(r))},Br.updateWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:li(e,t,yi(r),n)},Br.values=Ks,Br.valuesIn=function(e){return null==e?[]:zt(e,Ds(e))},Br.without=aa,Br.words=Qs,Br.wrap=function(e,t){return Ba(yi(t),e)},Br.xor=sa,Br.xorBy=ca,Br.xorWith=la,Br.zip=ua,Br.zipObject=function(e,t){return hi(e||[],t||[],Jr)},Br.zipObjectDeep=function(e,t){return hi(e||[],t||[],Yn)},Br.zipWith=da,Br.entries=Fs,Br.entriesIn=Ls,Br.extend=Ss,Br.extendWith=ws,sc(Br,Br),Br.add=mc,Br.attempt=Js,Br.camelCase=Us,Br.capitalize=Vs,Br.ceil=bc,Br.clamp=function(e,t,r){return r===i&&(r=t,t=i),r!==i&&(r=(r=vs(r))==r?r:0),t!==i&&(t=(t=vs(t))==t?t:0),on(vs(e),t,r)},Br.clone=function(e){return an(e,4)},Br.cloneDeep=function(e){return an(e,5)},Br.cloneDeepWith=function(e,t){return an(e,5,t="function"==typeof t?t:i)},Br.cloneWith=function(e,t){return an(e,4,t="function"==typeof t?t:i)},Br.conformsTo=function(e,t){return null==t||sn(e,t,Ms(t))},Br.deburr=Ws,Br.defaultTo=function(e,t){return null==e||e!=e?t:e},Br.divide=Sc,Br.endsWith=function(e,t,r){e=ms(e),t=ai(t);var n=e.length,o=r=r===i?n:on(fs(r),0,n);return(r-=t.length)>=0&&e.slice(r,o)==t},Br.eq=Ka,Br.escape=function(e){return(e=ms(e))&&$.test(e)?e.replace(G,Yt):e},Br.escapeRegExp=function(e){return(e=ms(e))&&re.test(e)?e.replace(te,"\\$&"):e},Br.every=function(e,t,r){var n=za(e)?wt:pn;return r&&go(e,t,r)&&(t=i),n(e,oo(t,3))},Br.find=va,Br.findIndex=Wo,Br.findKey=function(e,t){return Mt(e,oo(t,3),mn)},Br.findLast=ga,Br.findLastIndex=zo,Br.findLastKey=function(e,t){return Mt(e,oo(t,3),bn)},Br.floor=wc,Br.forEach=ma,Br.forEachRight=ba,Br.forIn=function(e,t){return null==e?e:vn(e,oo(t,3),Ds)},Br.forInRight=function(e,t){return null==e?e:gn(e,oo(t,3),Ds)},Br.forOwn=function(e,t){return e&&mn(e,oo(t,3))},Br.forOwnRight=function(e,t){return e&&bn(e,oo(t,3))},Br.get=ks,Br.gt=Ua,Br.gte=Va,Br.has=function(e,t){return null!=e&&ho(e,t,Cn)},Br.hasIn=Os,Br.head=Go,Br.identity=nc,Br.includes=function(e,t,r,n){e=Ga(e)?e:Ks(e),r=r&&!n?fs(r):0;var i=e.length;return r<0&&(r=yr(i+r,0)),ss(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&Rt(e,t,r)>-1},Br.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:fs(r);return i<0&&(i=yr(n+i,0)),Rt(e,t,i)},Br.inRange=function(e,t,r){return t=hs(t),r===i?(r=t,t=0):r=hs(r),function(e,t,r){return e>=vr(t,r)&&e<yr(t,r)}(e=vs(e),t,r)},Br.invoke=As,Br.isArguments=Wa,Br.isArray=za,Br.isArrayBuffer=Ha,Br.isArrayLike=Ga,Br.isArrayLikeObject=qa,Br.isBoolean=function(e){return!0===e||!1===e||ts(e)&&_n(e)==g},Br.isBuffer=$a,Br.isDate=Xa,Br.isElement=function(e){return ts(e)&&1===e.nodeType&&!is(e)},Br.isEmpty=function(e){if(null==e)return!0;if(Ga(e)&&(za(e)||"string"==typeof e||"function"==typeof e.splice||$a(e)||ls(e)||Wa(e)))return!e.length;var t=po(e);if(t==P||t==O)return!e.size;if(wo(e))return!Tn(e).length;for(var r in e)if(Re.call(e,r))return!1;return!0},Br.isEqual=function(e,t){return An(e,t)},Br.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:i)?r(e,t):i;return n===i?An(e,t,i,r):!!n},Br.isError=Ya,Br.isFinite=function(e){return"number"==typeof e&&pr(e)},Br.isFunction=Qa,Br.isInteger=Ja,Br.isLength=Za,Br.isMap=rs,Br.isMatch=function(e,t){return e===t||Mn(e,t,so(t))},Br.isMatchWith=function(e,t,r){return r="function"==typeof r?r:i,Mn(e,t,so(t),r)},Br.isNaN=function(e){return ns(e)&&e!=+e},Br.isNative=function(e){if(So(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dn(e)},Br.isNil=function(e){return null==e},Br.isNull=function(e){return null===e},Br.isNumber=ns,Br.isObject=es,Br.isObjectLike=ts,Br.isPlainObject=is,Br.isRegExp=os,Br.isSafeInteger=function(e){return Ja(e)&&e>=-9007199254740991&&e<=d},Br.isSet=as,Br.isString=ss,Br.isSymbol=cs,Br.isTypedArray=ls,Br.isUndefined=function(e){return e===i},Br.isWeakMap=function(e){return ts(e)&&po(e)==A},Br.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==_n(e)},Br.join=function(e,t){return null==e?"":hr.call(e,t)},Br.kebabCase=zs,Br.last=Yo,Br.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n;return r!==i&&(o=(o=fs(r))<0?yr(n+o,0):vr(o,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):Dt(e,Nt,o,!0)},Br.lowerCase=Hs,Br.lowerFirst=Gs,Br.lt=us,Br.lte=ds,Br.max=function(e){return e&&e.length?hn(e,nc,En):i},Br.maxBy=function(e,t){return e&&e.length?hn(e,oo(t,2),En):i},Br.mean=function(e){return jt(e,nc)},Br.meanBy=function(e,t){return jt(e,oo(t,2))},Br.min=function(e){return e&&e.length?hn(e,nc,Nn):i},Br.minBy=function(e,t){return e&&e.length?hn(e,oo(t,2),Nn):i},Br.stubArray=yc,Br.stubFalse=vc,Br.stubObject=function(){return{}},Br.stubString=function(){return""},Br.stubTrue=function(){return!0},Br.multiply=Pc,Br.nth=function(e,t){return e&&e.length?Kn(e,fs(t)):i},Br.noConflict=function(){return ot._===this&&(ot._=Fe),this},Br.noop=cc,Br.now=ka,Br.pad=function(e,t,r){e=ms(e);var n=(t=fs(t))?nr(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Ui(lr(i),r)+e+Ui(cr(i),r)},Br.padEnd=function(e,t,r){e=ms(e);var n=(t=fs(t))?nr(e):0;return t&&n<t?e+Ui(t-n,r):e},Br.padStart=function(e,t,r){e=ms(e);var n=(t=fs(t))?nr(e):0;return t&&n<t?Ui(t-n,r)+e:e},Br.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),mr(ms(e).replace(ne,""),t||0)},Br.random=function(e,t,r){if(r&&"boolean"!=typeof r&&go(e,t,r)&&(t=r=i),r===i&&("boolean"==typeof t?(r=t,t=i):"boolean"==typeof e&&(r=e,e=i)),e===i&&t===i?(e=0,t=1):(e=hs(e),t===i?(t=e,e=0):t=hs(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=br();return vr(e+o*(t-e+tt("1e-"+((o+"").length-1))),t)}return Hn(e,t)},Br.reduce=function(e,t,r){var n=za(e)?Ot:Lt,i=arguments.length<3;return n(e,oo(t,4),r,i,un)},Br.reduceRight=function(e,t,r){var n=za(e)?xt:Lt,i=arguments.length<3;return n(e,oo(t,4),r,i,dn)},Br.repeat=function(e,t,r){return t=(r?go(e,t,r):t===i)?1:fs(t),Gn(ms(e),t)},Br.replace=function(){var e=arguments,t=ms(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Br.result=function(e,t,r){var n=-1,o=(t=vi(t,e)).length;for(o||(o=1,e=i);++n<o;){var a=null==e?i:e[Bo(t[n])];a===i&&(n=o,a=r),e=Qa(a)?a.call(e):a}return e},Br.round=_c,Br.runInContext=e,Br.sample=function(e){return(za(e)?$r:$n)(e)},Br.size=function(e){if(null==e)return 0;if(Ga(e))return ss(e)?nr(e):e.length;var t=po(e);return t==P||t==O?e.size:Tn(e).length},Br.snakeCase=qs,Br.some=function(e,t,r){var n=za(e)?It:ti;return r&&go(e,t,r)&&(t=i),n(e,oo(t,3))},Br.sortedIndex=function(e,t){return ri(e,t)},Br.sortedIndexBy=function(e,t,r){return ni(e,t,oo(r,2))},Br.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ri(e,t);if(n<r&&Ka(e[n],t))return n}return-1},Br.sortedLastIndex=function(e,t){return ri(e,t,!0)},Br.sortedLastIndexBy=function(e,t,r){return ni(e,t,oo(r,2),!0)},Br.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ri(e,t,!0)-1;if(Ka(e[r],t))return r}return-1},Br.startCase=$s,Br.startsWith=function(e,t,r){return e=ms(e),r=null==r?0:on(fs(r),0,e.length),t=ai(t),e.slice(r,r+t.length)==t},Br.subtract=Ec,Br.sum=function(e){return e&&e.length?Kt(e,nc):0},Br.sumBy=function(e,t){return e&&e.length?Kt(e,oo(t,2)):0},Br.template=function(e,t,r){var n=Br.templateSettings;r&&go(e,t,r)&&(t=i),e=ms(e),t=ws({},t,n,Xi);var o,a,s=ws({},t.imports,n.imports,Xi),c=Ms(s),l=zt(s,c),u=0,d=t.interpolate||be,p="__p += '",h=Ce((t.escape||be).source+"|"+d.source+"|"+(d===Q?de:be).source+"|"+(t.evaluate||be).source+"|$","g"),f="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qe+"]")+"\n";e.replace(h,(function(t,r,n,i,s,c){return n||(n=i),p+=e.slice(u,c).replace(Se,Qt),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),p+="';\n";var y=Re.call(t,"variable")&&t.variable;if(y){if(le.test(y))throw new we("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(V,""):p).replace(W,"$1").replace(z,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Js((function(){return Pe(c,f+"return "+p).apply(i,l)}));if(v.source=p,Ya(v))throw v;return v},Br.times=function(e,t){if((e=fs(e))<1||e>d)return[];var r=h,n=vr(e,h);t=oo(t),e-=h;for(var i=Ut(n,t);++r<e;)t(r);return i},Br.toFinite=hs,Br.toInteger=fs,Br.toLength=ys,Br.toLower=function(e){return ms(e).toLowerCase()},Br.toNumber=vs,Br.toSafeInteger=function(e){return e?on(fs(e),-9007199254740991,d):0===e?e:0},Br.toString=ms,Br.toUpper=function(e){return ms(e).toUpperCase()},Br.trim=function(e,t,r){if((e=ms(e))&&(r||t===i))return Vt(e);if(!e||!(t=ai(t)))return e;var n=ir(e),o=ir(t);return mi(n,Gt(n,o),qt(n,o)+1).join("")},Br.trimEnd=function(e,t,r){if((e=ms(e))&&(r||t===i))return e.slice(0,or(e)+1);if(!e||!(t=ai(t)))return e;var n=ir(e);return mi(n,0,qt(n,ir(t))+1).join("")},Br.trimStart=function(e,t,r){if((e=ms(e))&&(r||t===i))return e.replace(ne,"");if(!e||!(t=ai(t)))return e;var n=ir(e);return mi(n,Gt(n,ir(t))).join("")},Br.truncate=function(e,t){var r=30,n="...";if(es(t)){var o="separator"in t?t.separator:o;r="length"in t?fs(t.length):r,n="omission"in t?ai(t.omission):n}var a=(e=ms(e)).length;if(Jt(e)){var s=ir(e);a=s.length}if(r>=a)return e;var c=r-nr(n);if(c<1)return n;var l=s?mi(s,0,c).join(""):e.slice(0,c);if(o===i)return l+n;if(s&&(c+=l.length-c),os(o)){if(e.slice(c).search(o)){var u,d=l;for(o.global||(o=Ce(o.source,ms(pe.exec(o))+"g")),o.lastIndex=0;u=o.exec(d);)var p=u.index;l=l.slice(0,p===i?c:p)}}else if(e.indexOf(ai(o),c)!=c){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+n},Br.unescape=function(e){return(e=ms(e))&&q.test(e)?e.replace(H,ar):e},Br.uniqueId=function(e){var t=++Te;return ms(e)+t},Br.upperCase=Xs,Br.upperFirst=Ys,Br.each=ma,Br.eachRight=ba,Br.first=Go,sc(Br,(gc={},mn(Br,(function(e,t){Re.call(Br.prototype,t)||(gc[t]=e)})),gc),{chain:!1}),Br.VERSION="4.17.21",bt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Br[e].placeholder=Br})),bt(["drop","take"],(function(e,t){Ur.prototype[e]=function(r){r=r===i?1:yr(fs(r),0);var n=this.__filtered__&&!t?new Ur(this):this.clone();return n.__filtered__?n.__takeCount__=vr(r,n.__takeCount__):n.__views__.push({size:vr(r,h),type:e+(n.__dir__<0?"Right":"")}),n},Ur.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),bt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Ur.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oo(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),bt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Ur.prototype[e]=function(){return this[r](1).value()[0]}})),bt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Ur.prototype[e]=function(){return this.__filtered__?new Ur(this):this[r](1)}})),Ur.prototype.compact=function(){return this.filter(nc)},Ur.prototype.find=function(e){return this.filter(e).head()},Ur.prototype.findLast=function(e){return this.reverse().find(e)},Ur.prototype.invokeMap=qn((function(e,t){return"function"==typeof e?new Ur(this):this.map((function(r){return xn(r,e,t)}))})),Ur.prototype.reject=function(e){return this.filter(Na(oo(e)))},Ur.prototype.slice=function(e,t){e=fs(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Ur(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==i&&(r=(t=fs(t))<0?r.dropRight(-t):r.take(t-e)),r)},Ur.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ur.prototype.toArray=function(){return this.take(h)},mn(Ur.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=Br[n?"take"+("last"==t?"Right":""):t],a=n||/^find/.test(t);o&&(Br.prototype[t]=function(){var t=this.__wrapped__,s=n?[1]:arguments,c=t instanceof Ur,l=s[0],u=c||za(t),d=function(e){var t=o.apply(Br,kt([e],s));return n&&p?t[0]:t};u&&r&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,h=!!this.__actions__.length,f=a&&!p,y=c&&!h;if(!a&&u){t=y?t:new Ur(this);var v=e.apply(t,s);return v.__actions__.push({func:ha,args:[d],thisArg:i}),new Kr(v,p)}return f&&y?e.apply(this,s):(v=this.thru(d),f?n?v.value()[0]:v.value():v)})})),bt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=xe[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Br.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(za(i)?i:[],e)}return this[r]((function(r){return t.apply(za(r)?r:[],e)}))}})),mn(Ur.prototype,(function(e,t){var r=Br[t];if(r){var n=r.name+"";Re.call(xr,n)||(xr[n]=[]),xr[n].push({name:t,func:r})}})),xr[Bi(i,2).name]=[{name:"wrapper",func:i}],Ur.prototype.clone=function(){var e=new Ur(this.__wrapped__);return e.__actions__=ki(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ki(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ki(this.__views__),e},Ur.prototype.reverse=function(){if(this.__filtered__){var e=new Ur(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ur.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=za(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=vr(t,e+a);break;case"takeRight":e=yr(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,l=n?s:a-1,u=this.__iteratees__,d=u.length,p=0,h=vr(c,this.__takeCount__);if(!r||!n&&i==c&&h==c)return di(e,this.__actions__);var f=[];e:for(;c--&&p<h;){for(var y=-1,v=e[l+=t];++y<d;){var g=u[y],m=g.iteratee,b=g.type,S=m(v);if(2==b)v=S;else if(!S){if(1==b)continue e;break e}}f[p++]=v}return f},Br.prototype.at=fa,Br.prototype.chain=function(){return pa(this)},Br.prototype.commit=function(){return new Kr(this.value(),this.__chain__)},Br.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Br.prototype.plant=function(e){for(var t,r=this;r instanceof Lr;){var n=Lo(r);n.__index__=0,n.__values__=i,t?o.__wrapped__=n:t=n;var o=n;r=r.__wrapped__}return o.__wrapped__=e,t},Br.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ur){var t=e;return this.__actions__.length&&(t=new Ur(this)),(t=t.reverse()).__actions__.push({func:ha,args:[ea],thisArg:i}),new Kr(t,this.__chain__)}return this.thru(ea)},Br.prototype.toJSON=Br.prototype.valueOf=Br.prototype.value=function(){return di(this.__wrapped__,this.__actions__)},Br.prototype.first=Br.prototype.head,at&&(Br.prototype[at]=function(){return this}),Br}();ot._=sr,(n=function(){return sr}.call(t,r,t,e))===i||(e.exports=n)}.call(this)},71608:(e,t,r)=>{var n=r(10848);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function r(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(i.Cache||n),r}i.Cache=n,e.exports=i},3363:(e,t,r)=>{var n=r(90791),i=r(11143)((function(e,t,r){n(e,t,r)}));e.exports=i},58569:e=>{e.exports=function(){}},47973:(e,t,r)=>{var n=r(91484),i=r(15571),o=r(75374),a=r(35657);e.exports=function(e){return o(e)?n(a(e)):i(e)}},1494:(e,t,r)=>{var n=r(24064),i=r(70896);e.exports=function(e,t){var r=[];if(!e||!e.length)return r;var o=-1,a=[],s=e.length;for(t=n(t,3);++o<s;){var c=e[o];t(c,o,e)&&(r.push(c),a.push(o))}return i(e,a),r}},38819:e=>{e.exports=function(){return[]}},67349:e=>{e.exports=function(){return!1}},6529:(e,t,r)=>{var n=r(33248);e.exports=function(e){return e?1/0===(e=n(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},3506:(e,t,r)=>{var n=r(6529);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},33248:(e,t,r)=>{var n=r(62555),i=r(57458),o=r(5847),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=s.test(e);return r||c.test(e)?l(e.slice(2),r?2:8):a.test(e)?NaN:+e}},95920:(e,t,r)=>{var n=r(98775),i=r(38929);e.exports=function(e){return n(e,i(e))}},40065:(e,t,r)=>{var n=r(84372);e.exports=function(e){return null==e?"":n(e)}},14293:(e,t,r)=>{var n=r(445);e.exports=function(e){return e&&e.length?n(e):[]}},962:(e,t,r)=>{const n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){const t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new u(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new d(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new d(this.value,t).test(e.semver);const r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=c(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=c(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||n||o&&a||s||l}}e.exports=i;const o=r(2102),{re:a,t:s}=r(13857),c=r(47753),l=r(91738),u=r(48457),d=r(84239)},84239:(e,t,r)=>{class n{constructor(e,t){if(t=o(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(e));if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!f(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&y(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=Object.keys(this.options).join(","),r="parseRange:".concat(t,":").concat(e),n=i.get(r);if(n)return n;const o=this.options.loose,c=o?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];e=e.replace(c,O(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(l[u.COMPARATORTRIM],d),s("comparator trim",e);let y=(e=(e=(e=e.replace(l[u.TILDETRIM],p)).replace(l[u.CARETTRIM],h)).split(/\s+/).join(" ")).split(" ").map((e=>g(e,this.options))).join(" ").split(/\s+/).map((e=>k(e,this.options)));o&&(y=y.filter((e=>(s("loose invalid filter",e,this.options),!!e.match(l[u.COMPARATORLOOSE]))))),s("range list",y);const v=new Map,m=y.map((e=>new a(e,this.options)));for(const e of m){if(f(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const b=[...v.values()];return i.set(r,b),b}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>v(r,t)&&e.set.some((e=>v(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const i=new(r(65980))({max:1e3}),o=r(2102),a=r(962),s=r(91738),c=r(48457),{re:l,t:u,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:h}=r(13857),f=e=>"<0.0.0-0"===e.value,y=e=>""===e.value,v=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},g=(e,t)=>(s("comp",e,t),e=w(e,t),s("caret",e),e=b(e,t),s("tildes",e),e=_(e,t),s("xrange",e),e=C(e,t),s("stars",e),e),m=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{const r=t.loose?l[u.TILDELOOSE]:l[u.TILDE];return e.replace(r,((t,r,n,i,o)=>{let a;return s("tilde",e,t,r,n,i,o),m(r)?a="":m(n)?a=">=".concat(r,".0.0 <").concat(+r+1,".0.0-0"):m(i)?a=">=".concat(r,".").concat(n,".0 <").concat(r,".").concat(+n+1,".0-0"):o?(s("replaceTilde pr",o),a=">=".concat(r,".").concat(n,".").concat(i,"-").concat(o," <").concat(r,".").concat(+n+1,".0-0")):a=">=".concat(r,".").concat(n,".").concat(i," <").concat(r,".").concat(+n+1,".0-0"),s("tilde return",a),a}))},w=(e,t)=>e.trim().split(/\s+/).map((e=>P(e,t))).join(" "),P=(e,t)=>{s("caret",e,t);const r=t.loose?l[u.CARETLOOSE]:l[u.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,o,a)=>{let c;return s("caret",e,t,r,i,o,a),m(r)?c="":m(i)?c=">=".concat(r,".0.0").concat(n," <").concat(+r+1,".0.0-0"):m(o)?c="0"===r?">=".concat(r,".").concat(i,".0").concat(n," <").concat(r,".").concat(+i+1,".0-0"):">=".concat(r,".").concat(i,".0").concat(n," <").concat(+r+1,".0.0-0"):a?(s("replaceCaret pr",a),c="0"===r?"0"===i?">=".concat(r,".").concat(i,".").concat(o,"-").concat(a," <").concat(r,".").concat(i,".").concat(+o+1,"-0"):">=".concat(r,".").concat(i,".").concat(o,"-").concat(a," <").concat(r,".").concat(+i+1,".0-0"):">=".concat(r,".").concat(i,".").concat(o,"-").concat(a," <").concat(+r+1,".0.0-0")):(s("no pr"),c="0"===r?"0"===i?">=".concat(r,".").concat(i,".").concat(o).concat(n," <").concat(r,".").concat(i,".").concat(+o+1,"-0"):">=".concat(r,".").concat(i,".").concat(o).concat(n," <").concat(r,".").concat(+i+1,".0-0"):">=".concat(r,".").concat(i,".").concat(o," <").concat(+r+1,".0.0-0")),s("caret return",c),c}))},_=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>E(e,t))).join(" ")),E=(e,t)=>{e=e.trim();const r=t.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return e.replace(r,((r,n,i,o,a,c)=>{s("xRange",e,r,n,i,o,a,c);const l=m(i),u=l||m(o),d=u||m(a),p=d;return"="===n&&p&&(n=""),c=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(u&&(o=0),a=0,">"===n?(n=">=",u?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===n&&(n="<",u?i=+i+1:o=+o+1),"<"===n&&(c="-0"),r="".concat(n+i,".").concat(o,".").concat(a).concat(c)):u?r=">=".concat(i,".0.0").concat(c," <").concat(+i+1,".0.0-0"):d&&(r=">=".concat(i,".").concat(o,".0").concat(c," <").concat(i,".").concat(+o+1,".0-0")),s("xRange return",r),r}))},C=(e,t)=>(s("replaceStars",e,t),e.trim().replace(l[u.STAR],"")),k=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=e=>(t,r,n,i,o,a,s,c,l,u,d,p,h)=>(r=m(n)?"":m(i)?">=".concat(n,".0.0").concat(e?"-0":""):m(o)?">=".concat(n,".").concat(i,".0").concat(e?"-0":""):a?">=".concat(r):">=".concat(r).concat(e?"-0":""),c=m(l)?"":m(u)?"<".concat(+l+1,".0.0-0"):m(d)?"<".concat(l,".").concat(+u+1,".0-0"):p?"<=".concat(l,".").concat(u,".").concat(d,"-").concat(p):e?"<".concat(l,".").concat(u,".").concat(+d+1,"-0"):"<=".concat(c),"".concat(r," ").concat(c).trim()),x=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==a.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},48457:(e,t,r)=>{const n=r(91738),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(43845),{re:a,t:s}=r(13857),c=r(2102),{compareIdentifiers:l}=r(42024);class u{constructor(e,t){if(t=c(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: ".concat(e));if(e.length>i)throw new TypeError("version is longer than ".concat(i," characters"));n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return l(r,i)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return l(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this}}e.exports=u},83737:(e,t,r)=>{const n=r(86797);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},47753:(e,t,r)=>{const n=r(35115),i=r(10432),o=r(21260),a=r(16902),s=r(39154),c=r(65555);e.exports=(e,t,r,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,l);case"!=":return i(e,r,l);case">":return o(e,r,l);case">=":return a(e,r,l);case"<":return s(e,r,l);case"<=":return c(e,r,l);default:throw new TypeError("Invalid operator: ".concat(t))}}},87304:(e,t,r)=>{const n=r(48457),i=r(86797),{re:o,t:a}=r(13857);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=o[a.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),o[a.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;o[a.COERCERTL].lastIndex=-1}else r=e.match(o[a.COERCE]);return null===r?null:i("".concat(r[2],".").concat(r[3]||"0",".").concat(r[4]||"0"),t)}},52814:(e,t,r)=>{const n=r(48457);e.exports=(e,t,r)=>{const i=new n(e,r),o=new n(t,r);return i.compare(o)||i.compareBuild(o)}},40315:(e,t,r)=>{const n=r(79496);e.exports=(e,t)=>n(e,t,!0)},79496:(e,t,r)=>{const n=r(48457);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},31813:(e,t,r)=>{const n=r(86797),i=r(35115);e.exports=(e,t)=>{if(i(e,t))return null;{const r=n(e),i=n(t),o=r.prerelease.length||i.prerelease.length,a=o?"pre":"",s=o?"prerelease":"";for(const e in r)if(("major"===e||"minor"===e||"patch"===e)&&r[e]!==i[e])return a+e;return s}}},35115:(e,t,r)=>{const n=r(79496);e.exports=(e,t,r)=>0===n(e,t,r)},21260:(e,t,r)=>{const n=r(79496);e.exports=(e,t,r)=>n(e,t,r)>0},16902:(e,t,r)=>{const n=r(79496);e.exports=(e,t,r)=>n(e,t,r)>=0},79098:(e,t,r)=>{const n=r(48457);e.exports=(e,t,r,i)=>{"string"==typeof r&&(i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i).version}catch(e){return null}}},39154:(e,t,r)=>{const n=r(79496);e.exports=(e,t,r)=>n(e,t,r)<0},65555:(e,t,r)=>{const n=r(79496);e.exports=(e,t,r)=>n(e,t,r)<=0},91741:(e,t,r)=>{const n=r(48457);e.exports=(e,t)=>new n(e,t).major},62458:(e,t,r)=>{const n=r(48457);e.exports=(e,t)=>new n(e,t).minor},10432:(e,t,r)=>{const n=r(79496);e.exports=(e,t,r)=>0!==n(e,t,r)},86797:(e,t,r)=>{const{MAX_LENGTH:n}=r(43845),{re:i,t:o}=r(13857),a=r(48457),s=r(2102);e.exports=(e,t)=>{if(t=s(t),e instanceof a)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?i[o.LOOSE]:i[o.FULL]).test(e))return null;try{return new a(e,t)}catch(e){return null}}},50155:(e,t,r)=>{const n=r(48457);e.exports=(e,t)=>new n(e,t).patch},88243:(e,t,r)=>{const n=r(86797);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},41383:(e,t,r)=>{const n=r(79496);e.exports=(e,t,r)=>n(t,e,r)},69664:(e,t,r)=>{const n=r(52814);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},35097:(e,t,r)=>{const n=r(84239);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},66585:(e,t,r)=>{const n=r(52814);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},71294:(e,t,r)=>{const n=r(86797);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},21503:(e,t,r)=>{const n=r(13857),i=r(43845),o=r(48457),a=r(42024),s=r(86797),c=r(71294),l=r(83737),u=r(79098),d=r(31813),p=r(91741),h=r(62458),f=r(50155),y=r(88243),v=r(79496),g=r(41383),m=r(40315),b=r(52814),S=r(66585),w=r(69664),P=r(21260),_=r(39154),E=r(35115),C=r(10432),k=r(16902),O=r(65555),x=r(47753),I=r(87304),A=r(962),M=r(84239),D=r(35097),R=r(39938),T=r(35841),N=r(98719),j=r(68664),B=r(85036),F=r(52614),L=r(65829),K=r(41937),U=r(90744),V=r(96559),W=r(45307);e.exports={parse:s,valid:c,clean:l,inc:u,diff:d,major:p,minor:h,patch:f,prerelease:y,compare:v,rcompare:g,compareLoose:m,compareBuild:b,sort:S,rsort:w,gt:P,lt:_,eq:E,neq:C,gte:k,lte:O,cmp:x,coerce:I,Comparator:A,Range:M,satisfies:D,toComparators:R,maxSatisfying:T,minSatisfying:N,minVersion:j,validRange:B,outside:F,gtr:L,ltr:K,intersects:U,simplifyRange:V,subset:W,SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},43845:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},91738:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return console.error("SEMVER",...t)}:()=>{};e.exports=t},42024:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},2102:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},13857:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n}=r(43845),i=r(91738),o=(t=e.exports={}).re=[],a=t.src=[],s=t.t={};let c=0;const l=(e,t,r)=>{const n=c++;i(e,n,t),s[e]=n,a[n]=t,o[n]=new RegExp(t,r?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION","(".concat(a[s.NUMERICIDENTIFIER],")\\.")+"(".concat(a[s.NUMERICIDENTIFIER],")\\.")+"(".concat(a[s.NUMERICIDENTIFIER],")")),l("MAINVERSIONLOOSE","(".concat(a[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(a[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(a[s.NUMERICIDENTIFIERLOOSE],")")),l("PRERELEASEIDENTIFIER","(?:".concat(a[s.NUMERICIDENTIFIER],"|").concat(a[s.NONNUMERICIDENTIFIER],")")),l("PRERELEASEIDENTIFIERLOOSE","(?:".concat(a[s.NUMERICIDENTIFIERLOOSE],"|").concat(a[s.NONNUMERICIDENTIFIER],")")),l("PRERELEASE","(?:-(".concat(a[s.PRERELEASEIDENTIFIER],"(?:\\.").concat(a[s.PRERELEASEIDENTIFIER],")*))")),l("PRERELEASELOOSE","(?:-?(".concat(a[s.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(a[s.PRERELEASEIDENTIFIERLOOSE],")*))")),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD","(?:\\+(".concat(a[s.BUILDIDENTIFIER],"(?:\\.").concat(a[s.BUILDIDENTIFIER],")*))")),l("FULLPLAIN","v?".concat(a[s.MAINVERSION]).concat(a[s.PRERELEASE],"?").concat(a[s.BUILD],"?")),l("FULL","^".concat(a[s.FULLPLAIN],"$")),l("LOOSEPLAIN","[v=\\s]*".concat(a[s.MAINVERSIONLOOSE]).concat(a[s.PRERELEASELOOSE],"?").concat(a[s.BUILD],"?")),l("LOOSE","^".concat(a[s.LOOSEPLAIN],"$")),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE","".concat(a[s.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),l("XRANGEIDENTIFIER","".concat(a[s.NUMERICIDENTIFIER],"|x|X|\\*")),l("XRANGEPLAIN","[v=\\s]*(".concat(a[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(a[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(a[s.XRANGEIDENTIFIER],")")+"(?:".concat(a[s.PRERELEASE],")?").concat(a[s.BUILD],"?")+")?)?"),l("XRANGEPLAINLOOSE","[v=\\s]*(".concat(a[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(a[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(a[s.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(a[s.PRERELEASELOOSE],")?").concat(a[s.BUILD],"?")+")?)?"),l("XRANGE","^".concat(a[s.GTLT],"\\s*").concat(a[s.XRANGEPLAIN],"$")),l("XRANGELOOSE","^".concat(a[s.GTLT],"\\s*").concat(a[s.XRANGEPLAINLOOSE],"$")),l("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),l("COERCERTL",a[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM","(\\s*)".concat(a[s.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",l("TILDE","^".concat(a[s.LONETILDE]).concat(a[s.XRANGEPLAIN],"$")),l("TILDELOOSE","^".concat(a[s.LONETILDE]).concat(a[s.XRANGEPLAINLOOSE],"$")),l("LONECARET","(?:\\^)"),l("CARETTRIM","(\\s*)".concat(a[s.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",l("CARET","^".concat(a[s.LONECARET]).concat(a[s.XRANGEPLAIN],"$")),l("CARETLOOSE","^".concat(a[s.LONECARET]).concat(a[s.XRANGEPLAINLOOSE],"$")),l("COMPARATORLOOSE","^".concat(a[s.GTLT],"\\s*(").concat(a[s.LOOSEPLAIN],")$|^$")),l("COMPARATOR","^".concat(a[s.GTLT],"\\s*(").concat(a[s.FULLPLAIN],")$|^$")),l("COMPARATORTRIM","(\\s*)".concat(a[s.GTLT],"\\s*(").concat(a[s.LOOSEPLAIN],"|").concat(a[s.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE","^\\s*(".concat(a[s.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(a[s.XRANGEPLAIN],")")+"\\s*$"),l("HYPHENRANGELOOSE","^\\s*(".concat(a[s.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(a[s.XRANGEPLAINLOOSE],")")+"\\s*$"),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},65980:(e,t,r)=>{const n=r(26493),i=Symbol("max"),o=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),u=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),h=Symbol("updateAgeOnGet"),f=()=>1,y=(e,t,r)=>{const n=e[p].get(t);if(n){const t=n.value;if(v(e,t)){if(m(e,n),!e[s])return}else r&&(e[h]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},v=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},g=e=>{if(e[o]>e[i])for(let t=e[d].tail;e[o]>e[i]&&null!==t;){const r=t.prev;m(e,t),t=r}},m=(e,t)=>{if(t){const r=t.value;e[l]&&e[l](r.key,r.value),e[o]-=r.length,e[p].delete(r.key),e[d].removeNode(t)}};class b{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const S=(e,t,r,n)=>{let i=r.value;v(e,i)&&(m(e,r),e[s]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||f;if(this[a]="function"!=typeof t?f:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[l]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[h]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,g(this)}get max(){return this[i]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,g(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[a]&&(this[a]=e,this[o]=0,this[d].forEach((e=>{e.length=this[a](e.value,e.key),this[o]+=e.length}))),g(this)}get lengthCalculator(){return this[a]}get length(){return this[o]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){const n=r.prev;S(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){const n=r.next;S(this,e,r,t),r=n}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[l]&&this[d]&&this[d].length&&this[d].forEach((e=>this[l](e.key,e.value))),this[p]=new Map,this[d]=new n,this[o]=0}dump(){return this[d].map((e=>!v(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,s=this[a](t,e);if(this[p].has(e)){if(s>this[i])return m(this,this[p].get(e)),!1;const a=this[p].get(e).value;return this[l]&&(this[u]||this[l](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[o]+=s-a.length,a.length=s,this.get(e),g(this),!0}const h=new b(e,t,s,n,r);return h.length>this[i]?(this[l]&&this[l](e,t),!1):(this[o]+=h.length,this[d].unshift(h),this[p].set(e,this[d].head),g(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!v(this,t)}get(e){return y(this,e,!0)}peek(e){return y(this,e,!1)}pop(){const e=this[d].tail;return e?(m(this,e),e.value):null}del(e){m(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach(((e,t)=>y(this,t,!1)))}}},65829:(e,t,r)=>{const n=r(52614);e.exports=(e,t,r)=>n(e,t,">",r)},90744:(e,t,r)=>{const n=r(84239);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t))},41937:(e,t,r)=>{const n=r(52614);e.exports=(e,t,r)=>n(e,t,"<",r)},35841:(e,t,r)=>{const n=r(48457),i=r(84239);e.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(o&&-1!==a.compare(e)||(o=e,a=new n(o,r)))})),o}},98719:(e,t,r)=>{const n=r(48457),i=r(84239);e.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(o&&1!==a.compare(e)||(o=e,a=new n(o,r)))})),o}},68664:(e,t,r)=>{const n=r(48457),i=r(84239),o=r(21260);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let a=null;i.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":a&&!o(t,a)||(a=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(e.operator))}})),!a||r&&!o(r,a)||(r=a)}return r&&e.test(r)?r:null}},52614:(e,t,r)=>{const n=r(48457),i=r(962),{ANY:o}=i,a=r(84239),s=r(35097),c=r(21260),l=r(39154),u=r(65555),d=r(16902);e.exports=(e,t,r,p)=>{let h,f,y,v,g;switch(e=new n(e,p),t=new a(t,p),r){case">":h=c,f=u,y=l,v=">",g=">=";break;case"<":h=l,f=d,y=c,v="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let a=null,s=null;if(n.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),a=a||e,s=s||e,h(e.semver,a.semver,p)?a=e:y(e.semver,s.semver,p)&&(s=e)})),a.operator===v||a.operator===g)return!1;if((!s.operator||s.operator===v)&&f(e,s.semver))return!1;if(s.operator===g&&y(e,s.semver))return!1}return!0}},96559:(e,t,r)=>{const n=r(35097),i=r(79496);e.exports=(e,t,r)=>{const o=[];let a=null,s=null;const c=e.sort(((e,t)=>i(e,t,r)));for(const e of c)n(e,t,r)?(s=e,a||(a=e)):(s&&o.push([a,s]),s=null,a=null);a&&o.push([a,null]);const l=[];for(const[e,t]of o)e===t?l.push(e):t||e!==c[0]?t?e===c[0]?l.push("<=".concat(t)):l.push("".concat(e," - ").concat(t)):l.push(">=".concat(e)):l.push("*");const u=l.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return u.length<d.length?u:t}},45307:(e,t,r)=>{const n=r(84239),i=r(962),{ANY:o}=i,a=r(35097),s=r(79496),c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=r.includePrerelease?[new i(">=0.0.0-0")]:[new i(">=0.0.0")]}if(1===t.length&&t[0].semver===o){if(r.includePrerelease)return!0;t=[new i(">=0.0.0")]}const n=new Set;let c,d,p,h,f,y,v;for(const t of e)">"===t.operator||">="===t.operator?c=l(c,t,r):"<"===t.operator||"<="===t.operator?d=u(d,t,r):n.add(t.semver);if(n.size>1)return null;if(c&&d){if(p=s(c.semver,d.semver,r),p>0)return null;if(0===p&&(">="!==c.operator||"<="!==d.operator))return null}for(const e of n){if(c&&!a(e,String(c),r))return null;if(d&&!a(e,String(d),r))return null;for(const n of t)if(!a(e,String(n),r))return!1;return!0}let g=!(!d||r.includePrerelease||!d.semver.prerelease.length)&&d.semver,m=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver;g&&1===g.prerelease.length&&"<"===d.operator&&0===g.prerelease[0]&&(g=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,y=y||"<"===e.operator||"<="===e.operator,c)if(m&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===m.major&&e.semver.minor===m.minor&&e.semver.patch===m.patch&&(m=!1),">"===e.operator||">="===e.operator){if(h=l(c,e,r),h===e&&h!==c)return!1}else if(">="===c.operator&&!a(c.semver,String(e),r))return!1;if(d)if(g&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===g.major&&e.semver.minor===g.minor&&e.semver.patch===g.patch&&(g=!1),"<"===e.operator||"<="===e.operator){if(f=u(d,e,r),f===e&&f!==d)return!1}else if("<="===d.operator&&!a(d.semver,String(e),r))return!1;if(!e.operator&&(d||c)&&0!==p)return!1}return!(c&&y&&!d&&0!==p||d&&v&&!c&&0!==p||m||g)},l=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},u=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},39938:(e,t,r)=>{const n=r(84239);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},85036:(e,t,r)=>{const n=r(84239);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},10784:e=>{e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},26493:(e,t,r)=>{function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r){var n=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function o(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)r.push(o.value);return r},n.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;var o=[];for(r=0;n&&r<t;r++)o.push(n.value),n=this.removeNode(n);for(null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev),r=0;r<(arguments.length<=2?0:arguments.length-2);r++)n=i(this,n,r+2<2||arguments.length<=r+2?void 0:arguments[r+2]);return o},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(10784)(n)}catch(e){}},9731:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiVersion=void 0,(t.ApiVersion||(t.ApiVersion={})).v0="20200115"},77415:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9731),t)},58604:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionApiOperations=void 0,(r=t.SubscriptionApiOperations||(t.SubscriptionApiOperations={}))[r.Inviting=0]="Inviting",r[r.CancelingInvite=1]="CancelingInvite",r[r.ListingInvites=2]="ListingInvites",r[r.AcceptingInvite=3]="AcceptingInvite"},88154:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionApiService=void 0;const i=r(11039),o=r(87211),a=r(9731),s=r(72301),c=r(58604);t.SubscriptionApiService=class{constructor(e){this.subscriptionServer=e,this.operationsInProgress=new Map}listInvites(){return n(this,void 0,void 0,(function*(){if(this.operationsInProgress.get(c.SubscriptionApiOperations.ListingInvites))throw new o.ApiCallError(i.ErrorMessage.GenericInProgress);this.operationsInProgress.set(c.SubscriptionApiOperations.ListingInvites,!0);try{const e=yield this.subscriptionServer.listInvites({[s.ApiEndpointParam.ApiVersion]:a.ApiVersion.v0});return this.operationsInProgress.set(c.SubscriptionApiOperations.ListingInvites,!1),e}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}cancelInvite(e){return n(this,void 0,void 0,(function*(){if(this.operationsInProgress.get(c.SubscriptionApiOperations.CancelingInvite))throw new o.ApiCallError(i.ErrorMessage.GenericInProgress);this.operationsInProgress.set(c.SubscriptionApiOperations.CancelingInvite,!0);try{const t=yield this.subscriptionServer.cancelInvite({[s.ApiEndpointParam.ApiVersion]:a.ApiVersion.v0,inviteUuid:e});return this.operationsInProgress.set(c.SubscriptionApiOperations.CancelingInvite,!1),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}invite(e){return n(this,void 0,void 0,(function*(){if(this.operationsInProgress.get(c.SubscriptionApiOperations.Inviting))throw new o.ApiCallError(i.ErrorMessage.GenericInProgress);this.operationsInProgress.set(c.SubscriptionApiOperations.Inviting,!0);try{const t=yield this.subscriptionServer.invite({[s.ApiEndpointParam.ApiVersion]:a.ApiVersion.v0,identifier:e});return this.operationsInProgress.set(c.SubscriptionApiOperations.Inviting,!1),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}acceptInvite(e){return n(this,void 0,void 0,(function*(){if(this.operationsInProgress.get(c.SubscriptionApiOperations.AcceptingInvite))throw new o.ApiCallError(i.ErrorMessage.GenericInProgress);this.operationsInProgress.set(c.SubscriptionApiOperations.AcceptingInvite,!0);try{const t=yield this.subscriptionServer.acceptInvite({inviteUuid:e});return this.operationsInProgress.set(c.SubscriptionApiOperations.AcceptingInvite,!1),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}}},82045:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},44952:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UserApiOperations=void 0,(r=t.UserApiOperations||(t.UserApiOperations={}))[r.Registering=0]="Registering",r[r.SubmittingRequest=1]="SubmittingRequest",r[r.DeletingAccount=2]="DeletingAccount"},93980:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserApiService=void 0;const i=r(11039),o=r(87211),a=r(9731),s=r(72301),c=r(44952);t.UserApiService=class{constructor(e,t){this.userServer=e,this.userRequestServer=t,this.operationsInProgress=new Map}deleteAccount(e){return n(this,void 0,void 0,(function*(){this.lockOperation(c.UserApiOperations.DeletingAccount);try{const t=yield this.userServer.deleteAccount({userUuid:e});return this.unlockOperation(c.UserApiOperations.DeletingAccount),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericRegistrationFail)}}))}submitUserRequest(e){return n(this,void 0,void 0,(function*(){this.lockOperation(c.UserApiOperations.SubmittingRequest);try{const t=yield this.userRequestServer.submitUserRequest({userUuid:e.userUuid,requestType:e.requestType});return this.unlockOperation(c.UserApiOperations.SubmittingRequest),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericRegistrationFail)}}))}register(e){return n(this,void 0,void 0,(function*(){this.lockOperation(c.UserApiOperations.Registering);try{const t=yield this.userServer.register(Object.assign({[s.ApiEndpointParam.ApiVersion]:a.ApiVersion.v0,password:e.serverPassword,email:e.email,ephemeral:e.ephemeral},e.keyParams.getPortableValue()));return this.unlockOperation(c.UserApiOperations.Registering),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericRegistrationFail)}}))}lockOperation(e){if(this.operationsInProgress.get(e))throw new o.ApiCallError(i.ErrorMessage.GenericInProgress);this.operationsInProgress.set(e,!0)}unlockOperation(e){this.operationsInProgress.set(e,!1)}}},60790:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},92089:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketApiOperations=void 0,(r=t.WebSocketApiOperations||(t.WebSocketApiOperations={}))[r.CreatingConnectionToken=0]="CreatingConnectionToken"},15846:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketApiService=void 0;const i=r(11039),o=r(87211),a=r(92089);t.WebSocketApiService=class{constructor(e){this.webSocketServer=e,this.operationsInProgress=new Map}createConnectionToken(){return n(this,void 0,void 0,(function*(){if(this.operationsInProgress.get(a.WebSocketApiOperations.CreatingConnectionToken))throw new o.ApiCallError(i.ErrorMessage.GenericInProgress);this.operationsInProgress.set(a.WebSocketApiOperations.CreatingConnectionToken,!0);try{const e=yield this.webSocketServer.createConnectionToken({});return this.operationsInProgress.set(a.WebSocketApiOperations.CreatingConnectionToken,!1),e}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}}},58714:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},90971:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceApiOperations=void 0,(r=t.WorkspaceApiOperations||(t.WorkspaceApiOperations={}))[r.Creating=0]="Creating",r[r.Inviting=1]="Inviting",r[r.Accepting=2]="Accepting",r[r.ListingWorkspaces=3]="ListingWorkspaces",r[r.ListingWorkspaceUsers=4]="ListingWorkspaceUsers",r[r.InitiatingKeyshare=5]="InitiatingKeyshare"},75542:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceApiService=void 0;const i=r(11039),o=r(87211),a=r(90971);t.WorkspaceApiService=class{constructor(e){this.workspaceServer=e,this.operationsInProgress=new Map}initiateKeyshare(e){return n(this,void 0,void 0,(function*(){this.lockOperation(a.WorkspaceApiOperations.InitiatingKeyshare);try{const t=yield this.workspaceServer.initiateKeyshare({workspaceUuid:e.workspaceUuid,userUuid:e.userUuid,encryptedWorkspaceKey:e.encryptedWorkspaceKey});return this.unlockOperation(a.WorkspaceApiOperations.InitiatingKeyshare),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}listWorkspaceUsers(e){return n(this,void 0,void 0,(function*(){this.lockOperation(a.WorkspaceApiOperations.ListingWorkspaceUsers);try{const t=yield this.workspaceServer.listWorkspaceUsers({workspaceUuid:e.workspaceUuid});return this.unlockOperation(a.WorkspaceApiOperations.ListingWorkspaceUsers),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}listWorkspaces(){return n(this,void 0,void 0,(function*(){this.lockOperation(a.WorkspaceApiOperations.ListingWorkspaces);try{const e=yield this.workspaceServer.listWorkspaces({});return this.unlockOperation(a.WorkspaceApiOperations.ListingWorkspaces),e}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}acceptInvite(e){return n(this,void 0,void 0,(function*(){this.lockOperation(a.WorkspaceApiOperations.Accepting);try{const t=yield this.workspaceServer.acceptInvite({encryptedPrivateKey:e.encryptedPrivateKey,publicKey:e.publicKey,inviteUuid:e.inviteUuid,userUuid:e.userUuid});return this.unlockOperation(a.WorkspaceApiOperations.Accepting),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}inviteToWorkspace(e){return n(this,void 0,void 0,(function*(){this.lockOperation(a.WorkspaceApiOperations.Inviting);try{const t=yield this.workspaceServer.inviteToWorkspace({inviteeEmail:e.inviteeEmail,workspaceUuid:e.workspaceUuid,accessLevel:e.accessLevel});return this.unlockOperation(a.WorkspaceApiOperations.Inviting),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}createWorkspace(e){return n(this,void 0,void 0,(function*(){this.lockOperation(a.WorkspaceApiOperations.Creating);try{const t=yield this.workspaceServer.createWorkspace({workspaceType:e.workspaceType,encryptedPrivateKey:e.encryptedPrivateKey,encryptedWorkspaceKey:e.encryptedWorkspaceKey,publicKey:e.publicKey,workspaceName:e.workspaceName});return this.unlockOperation(a.WorkspaceApiOperations.Creating),t}catch(e){throw new o.ApiCallError(i.ErrorMessage.GenericFail)}}))}lockOperation(e){if(this.operationsInProgress.get(e))throw new o.ApiCallError(i.ErrorMessage.GenericInProgress);this.operationsInProgress.set(e,!0)}unlockOperation(e){this.operationsInProgress.set(e,!1)}}},46075:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},26636:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(58604),t),i(r(88154),t),i(r(82045),t),i(r(44952),t),i(r(93980),t),i(r(60790),t),i(r(15846),t),i(r(58714),t),i(r(75542),t),i(r(46075),t)},87211:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiCallError=void 0;class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}t.ApiCallError=r},11039:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorMessage=void 0,(r=t.ErrorMessage||(t.ErrorMessage={})).RegistrationInProgress="An existing registration request is already in progress.",r.GenericRegistrationFail="A server error occurred while trying to register. Please try again.",r.RateLimited="Too many successive server requests. Please wait a few minutes and try again.",r.InsufficientPasswordMessage="Your password must be at least %LENGTH% characters in length. For your security, please choose a longer password or, ideally, a passphrase, and try again.",r.PasscodeRequired="Your passcode is required in order to register for an account.",r.GenericInProgress="An existing request is already in progress.",r.GenericFail="A server error occurred. Please try again."},88994:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(87211),t),i(r(11039),t)},64607:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTag=void 0,(r=t.ErrorTag||(t.ErrorTag={})).MfaInvalid="mfa-invalid",r.MfaRequired="mfa-required",r.RefreshTokenInvalid="invalid-refresh-token",r.RefreshTokenExpired="expired-refresh-token",r.AccessTokenExpired="expired-access-token",r.ParametersInvalid="invalid-parameters",r.RevokedSession="revoked-session",r.AuthInvalid="invalid-auth",r.ReadOnlyAccess="read-only-access"},43394:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},66089:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75340:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7612:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},61392:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},25469:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},71914:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},93125:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpService=void 0;const i=r(64657),o=r(16418),a=r(90510),s=r(50484),c=r(76098),l=r(11039);t.HttpService=class{constructor(e,t,r,n,i){this.environment=e,this.appVersion=t,this.snjsVersion=r,this.host=n,this.updateMetaCallback=i}setAuthorizationToken(e){this.authorizationToken=e}setHost(e){this.host=e}get(e,t,r){return n(this,void 0,void 0,(function*(){return this.runHttp({url:(0,i.joinPaths)(this.host,e),params:t,verb:a.HttpVerb.Get,authentication:null!=r?r:this.authorizationToken})}))}post(e,t,r){return n(this,void 0,void 0,(function*(){return this.runHttp({url:(0,i.joinPaths)(this.host,e),params:t,verb:a.HttpVerb.Post,authentication:null!=r?r:this.authorizationToken})}))}put(e,t,r){return n(this,void 0,void 0,(function*(){return this.runHttp({url:(0,i.joinPaths)(this.host,e),params:t,verb:a.HttpVerb.Put,authentication:null!=r?r:this.authorizationToken})}))}patch(e,t,r){return n(this,void 0,void 0,(function*(){return this.runHttp({url:(0,i.joinPaths)(this.host,e),params:t,verb:a.HttpVerb.Patch,authentication:null!=r?r:this.authorizationToken})}))}delete(e,t,r){return n(this,void 0,void 0,(function*(){return this.runHttp({url:(0,i.joinPaths)(this.host,e),params:t,verb:a.HttpVerb.Delete,authentication:null!=r?r:this.authorizationToken})}))}runHttp(e){return n(this,void 0,void 0,(function*(){const t=this.createXmlRequest(e),r=yield this.runRequest(t,this.createRequestBody(e));return r.meta&&this.updateMetaCallback(r.meta),r}))}createRequestBody(e){return void 0!==e.params&&[a.HttpVerb.Post,a.HttpVerb.Put,a.HttpVerb.Patch,a.HttpVerb.Delete].includes(e.verb)?JSON.stringify(e.params):e.rawBytes}createXmlRequest(e){var t;const r=new XMLHttpRequest;if(e.params&&e.verb===a.HttpVerb.Get&&Object.keys(e.params).length>0&&(e.url=this.urlForUrlAndParams(e.url,e.params)),r.open(e.verb,e.url,!0),r.responseType=null!==(t=e.responseType)&&void 0!==t?t:"",!e.external){r.setRequestHeader("X-SNJS-Version",this.snjsVersion);const t="".concat(o.Environment[this.environment],"-").concat(this.appVersion);r.setRequestHeader("X-Application-Version",t),e.authentication&&r.setRequestHeader("Authorization","Bearer "+e.authentication)}let n=!1;return e.customHeaders&&e.customHeaders.length>0&&e.customHeaders.forEach((e=>{let{key:t,value:i}=e;r.setRequestHeader(t,i),"Content-Type"===t&&(n=!0)})),n||e.external||r.setRequestHeader("Content-Type","application/json"),r}runRequest(e,t){return n(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{e.onreadystatechange=()=>{this.stateChangeHandlerForRequest(e,r,n)},e.send(t)}))}))}stateChangeHandlerForRequest(e,t,r){var n,o,a;if(e.readyState!==c.XMLHttpRequestState.Completed)return;const u=e.status,d={status:u,headers:new Map},p=null===(n=e.getAllResponseHeaders())||void 0===n?void 0:n.trim().split(/[\r\n]+/);null==p||p.forEach((e=>{const t=e.split(": "),r=t.shift(),n=t.join(": ");d.headers.set(r,n)}));try{if(u!==s.HttpStatusCode.NoContent){let t;const r=(null===(o=d.headers)||void 0===o?void 0:o.get("content-type"))||(null===(a=d.headers)||void 0===a?void 0:a.get("Content-Type"));t=(null==r?void 0:r.includes("application/json"))?JSON.parse(e.responseText):e.response,t.data||(d.data=t),(0,i.isString)(t)||Object.assign(d,t)}}catch(e){console.error(e)}u>=s.HttpStatusCode.Success&&u<s.HttpStatusCode.MultipleChoices?t(d):(u===s.HttpStatusCode.Forbidden&&d.data&&void 0!==d.data.error&&(d.data.error.message=l.ErrorMessage.RateLimited),r(d))}urlForUrlAndParams(e,t){const r=Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e]))).join("&");return e.includes("?")?e+"&"+r:e+"?"+r}}},78266:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},50484:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.HttpStatusCode=void 0,(r=t.HttpStatusCode||(t.HttpStatusCode={}))[r.Success=200]="Success",r[r.NoContent=204]="NoContent",r[r.MultipleChoices=300]="MultipleChoices",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.Forbidden=403]="Forbidden",r[r.Gone=410]="Gone",r[r.ExpiredAccessToken=498]="ExpiredAccessToken"},90510:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.HttpVerb=void 0,(r=t.HttpVerb||(t.HttpVerb={})).Get="GET",r.Post="POST",r.Put="PUT",r.Patch="PATCH",r.Delete="DELETE"},76098:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.XMLHttpRequestState=void 0,(r=t.XMLHttpRequestState||(t.XMLHttpRequestState={}))[r.Completed=4]="Completed"},19854:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(64607),t),i(r(43394),t),i(r(66089),t),i(r(75340),t),i(r(7612),t),i(r(61392),t),i(r(25469),t),i(r(71914),t),i(r(93125),t),i(r(78266),t),i(r(50484),t),i(r(90510),t),i(r(76098),t)},72301:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ApiEndpointParam=void 0,(r=t.ApiEndpointParam||(t.ApiEndpointParam={})).LastSyncToken="sync_token",r.PaginationToken="cursor_token",r.SyncDlLimit="limit",r.SyncPayloads="items",r.ApiVersion="api"},35133:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},54074:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(72301)},40849:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(72301)},19194:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(72301)},74210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(72301)},37888:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(72301)},40891:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},13870:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},48911:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},69346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},95440:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},73402:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},46226:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},18450:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},34779:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(72301),t),i(r(35133),t),i(r(54074),t),i(r(40849),t),i(r(19194),t),i(r(74210),t),i(r(37888),t),i(r(40891),t),i(r(13870),t),i(r(48911),t),i(r(69346),t),i(r(95440),t),i(r(73402),t),i(r(46226),t),i(r(18450),t)},55709:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},60427:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},69861:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},51715:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},24622:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8081:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},64999:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},51298:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},22034:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},42958:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},295:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},67206:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},59735:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},15189:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},78322:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},16590:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},12847:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},55676:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},43515:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75983:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},83143:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},85785:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},91127:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},99417:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},44516:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},93476:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},93106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},13785:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},92077:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5940:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},48179:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(55709),t),i(r(60427),t),i(r(69861),t),i(r(51715),t),i(r(24622),t),i(r(8081),t),i(r(64999),t),i(r(51298),t),i(r(22034),t),i(r(42958),t),i(r(295),t),i(r(67206),t),i(r(59735),t),i(r(15189),t),i(r(78322),t),i(r(16590),t),i(r(12847),t),i(r(55676),t),i(r(43515),t),i(r(75983),t),i(r(83143),t),i(r(85785),t),i(r(44516),t),i(r(93476),t),i(r(91127),t),i(r(99417),t),i(r(93106),t),i(r(13785),t),i(r(92077),t),i(r(5940),t)},24881:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Paths=void 0,t.Paths={v1:Object.assign({},{invite:"/v1/subscription-invites",acceptInvite:e=>"/v1/subscription-invites/".concat(e,"/accept"),declineInvite:e=>"/v1/subscription-invites/".concat(e,"/decline"),cancelInvite:e=>"/v1/subscription-invites/".concat(e),listInvites:"/v1/subscription-invites"})}},59005:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionServer=void 0;const i=r(24881);t.SubscriptionServer=class{constructor(e){this.httpService=e}acceptInvite(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.post(i.Paths.v1.acceptInvite(e.inviteUuid),e)}))}declineInvite(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.get(i.Paths.v1.declineInvite(e.inviteUuid),e)}))}cancelInvite(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.delete(i.Paths.v1.cancelInvite(e.inviteUuid),e)}))}listInvites(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.get(i.Paths.v1.listInvites,e)}))}invite(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.post(i.Paths.v1.invite,e)}))}}},99033:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},15290:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Paths=void 0,t.Paths={v1:Object.assign({},{register:"/v1/users",deleteAccount:e=>"/v1/users/".concat(e)})}},86930:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserServer=void 0;const i=r(15290);t.UserServer=class{constructor(e){this.httpService=e}deleteAccount(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.delete(i.Paths.v1.deleteAccount(e.userUuid),e)}))}register(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.post(i.Paths.v1.register,e)}))}}},62890:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},60744:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Paths=void 0,t.Paths={v1:Object.assign({},{submitUserRequest:e=>"/v1/users/".concat(e,"/requests")})}},32510:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserRequestServer=void 0;const i=r(60744);t.UserRequestServer=class{constructor(e){this.httpService=e}submitUserRequest(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.post(i.Paths.v1.submitUserRequest(e.userUuid),e)}))}}},25336:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},63782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Paths=void 0,t.Paths={v1:Object.assign({},{createConnectionToken:"/v1/sockets/tokens"})}},36604:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketServer=void 0;const i=r(63782);t.WebSocketServer=class{constructor(e){this.httpService=e}createConnectionToken(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.post(i.Paths.v1.createConnectionToken,e)}))}}},40400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},43853:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Paths=void 0,t.Paths={v1:Object.assign({},{createWorkspace:"/v1/workspaces",listWorkspaces:"/v1/workspaces",listWorkspaceUsers:e=>"/v1/workspaces/".concat(e,"/users"),initiateKeyshare:(e,t)=>"/v1/workspaces/".concat(e,"/users/").concat(t,"/keyshare"),inviteToWorkspace:e=>"/v1/workspaces/".concat(e,"/invites"),acceptInvite:e=>"/v1/invites/".concat(e,"/accept")})}},68986:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceServer=void 0;const i=r(43853);t.WorkspaceServer=class{constructor(e){this.httpService=e}initiateKeyshare(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.post(i.Paths.v1.initiateKeyshare(e.workspaceUuid,e.userUuid),e)}))}listWorkspaceUsers(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.get(i.Paths.v1.listWorkspaceUsers(e.workspaceUuid),e)}))}listWorkspaces(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.get(i.Paths.v1.listWorkspaces,e)}))}acceptInvite(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.post(i.Paths.v1.acceptInvite(e.inviteUuid),e)}))}inviteToWorkspace(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.post(i.Paths.v1.inviteToWorkspace(e.workspaceUuid),e)}))}createWorkspace(e){return n(this,void 0,void 0,(function*(){return yield this.httpService.post(i.Paths.v1.createWorkspace,e)}))}}},87171:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},99131:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(59005),t),i(r(99033),t),i(r(86930),t),i(r(62890),t),i(r(32510),t),i(r(25336),t),i(r(36604),t),i(r(40400),t),i(r(68986),t),i(r(87171),t)},30991:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(77415),t),i(r(26636),t),i(r(88994),t),i(r(19854),t),i(r(34779),t),i(r(48179),t),i(r(99131),t)},70297:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(30991),t)},55665:(e,t)=>{var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.V005Algorithm=t.V004Algorithm=t.V003Algorithm=t.V002Algorithm=t.V001Algorithm=void 0,t.V001Algorithm=Object.freeze({SaltSeedLength:128,PbkdfMinCost:3e3,PbkdfCostsUsed:[3e3,5e3,1e4,6e4],PbkdfOutputLength:512,EncryptionKeyLength:256}),t.V002Algorithm=Object.freeze({SaltSeedLength:128,PbkdfMinCost:3e3,PbkdfCostsUsed:t.V001Algorithm.PbkdfCostsUsed.concat([1e5,101e3,102e3,103e3]),ImprobablePbkdfCostsUsed:[3e3,5e3],PbkdfOutputLength:768,EncryptionKeyLength:256,EncryptionIvLength:128}),(i=t.V003Algorithm||(t.V003Algorithm={}))[i.SaltSeedLength=256]="SaltSeedLength",i[i.PbkdfCost=11e4]="PbkdfCost",i[i.PbkdfOutputLength=768]="PbkdfOutputLength",i[i.EncryptionKeyLength=256]="EncryptionKeyLength",i[i.EncryptionIvLength=128]="EncryptionIvLength",(n=t.V004Algorithm||(t.V004Algorithm={}))[n.ArgonSaltSeedLength=256]="ArgonSaltSeedLength",n[n.ArgonSaltLength=128]="ArgonSaltLength",n[n.ArgonIterations=5]="ArgonIterations",n[n.ArgonMemLimit=67108864]="ArgonMemLimit",n[n.ArgonOutputKeyBytes=64]="ArgonOutputKeyBytes",n[n.EncryptionKeyLength=256]="EncryptionKeyLength",n[n.EncryptionNonceLength=192]="EncryptionNonceLength",(r=t.V005Algorithm||(t.V005Algorithm={}))[r.AsymmetricEncryptionNonceLength=192]="AsymmetricEncryptionNonceLength",r[r.SymmetricEncryptionNonceLength=192]="SymmetricEncryptionNonceLength"},11393:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BackupFileType=void 0,(r=t.BackupFileType||(t.BackupFileType={})).Encrypted="Encrypted",r.EncryptedWithNonEncryptedItemsKey="EncryptedWithNonEncryptedItemsKey",r.FullyDecrypted="FullyDecrypted",r.Corrupt="Corrupt"},20593:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNItemsKey=t.isItemsKey=void 0;const n=r(10256),i=r(16418);t.isItemsKey=function(e){return e.content_type===n.ContentType.ItemsKey};class o extends i.DecryptedItem{constructor(e){super(e),this.keyVersion=e.content.version,this.isDefault=e.content.isDefault,this.itemsKey=this.payload.content.itemsKey}strategyWhenConflictingWithItem(e,t){return i.ConflictStrategy.KeepBase}get dataAuthenticationKey(){if(this.keyVersion===n.ProtocolVersion.V004)throw"Attempting to access legacy data authentication key.";return this.payload.content.dataAuthenticationKey}}t.SNItemsKey=o},73756:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemsKeyMutator=void 0;const n=r(16418);class i extends n.DecryptedItemMutator{set isDefault(e){this.mutableContent.isDefault=e}}t.ItemsKeyMutator=i},11542:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(10256),i=r(16418),o=r(20593),a=r(73756);(0,i.RegisterItemClass)(n.ContentType.ItemsKey,o.SNItemsKey,a.ItemsKeyMutator)},28809:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemContentTypeUsesRootKeyEncryption=t.ContentTypeUsesRootKeyEncryption=t.FillRootKeyContent=t.CreateNewRootKey=void 0;const n=r(10256),i=r(16418),o=r(64657),a=r(80026);function s(e){return e.version||(e.dataAuthenticationKey?e.version=n.ProtocolVersion.V002:e.version=n.ProtocolVersion.V001),(0,i.FillItemContentSpecialized)(e)}t.CreateNewRootKey=function(e){const t=o.UuidGenerator.GenerateUuid(),r=new i.DecryptedPayload(Object.assign({uuid:t,content_type:n.ContentType.RootKey,content:s(e)},(0,i.PayloadTimestampDefaults)()));return new a.SNRootKey(r)},t.FillRootKeyContent=s,t.ContentTypeUsesRootKeyEncryption=function(e){return e===n.ContentType.RootKey||e===n.ContentType.ItemsKey||e===n.ContentType.EncryptedStorage},t.ItemContentTypeUsesRootKeyEncryption=function(e){return e===n.ContentType.ItemsKey}},73913:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyParamsFromApiResponse=t.CreateAnyKeyParams=t.Create004KeyParams=t.Create003KeyParams=t.Create002KeyParams=t.Create001KeyParams=void 0;const n=r(41671),i=r(2392);function o(e){if("content"in e)throw Error("Raw key params shouldnt have content; perhaps you passed in a SNRootKeyParams object.");return new i.SNRootKeyParams(e)}t.Create001KeyParams=function(e){return o(e)},t.Create002KeyParams=function(e){return o(e)},t.Create003KeyParams=function(e){return o(e)},t.Create004KeyParams=function(e){return o(e)},t.CreateAnyKeyParams=o,t.KeyParamsFromApiResponse=function(e,t){return o({identifier:t||e.data.identifier,pw_cost:e.data.pw_cost,pw_nonce:e.data.pw_nonce,pw_salt:e.data.pw_salt,version:(0,n.ProtocolVersionForKeyParams)(e.data),origination:e.data.origination,created:e.data.created})}},41671:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolVersionForKeyParams=void 0;const n=r(10256),i=r(55665);t.ProtocolVersionForKeyParams=function(e){if(e.version)return e.version;const t=e.pw_cost,r=i.V001Algorithm.PbkdfCostsUsed.includes(t),o=i.V002Algorithm.PbkdfCostsUsed.includes(t);return r&&!o?n.ProtocolVersion.V001:o&&!r?n.ProtocolVersion.V002:o&&r&&e.pw_nonce&&i.V002Algorithm.ImprobablePbkdfCostsUsed.includes(t)?n.ProtocolVersion.V001:n.ProtocolVersion.V002}},80026:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNRootKey=void 0;const n=r(16418),i=r(86553),o=r(2392);class a extends n.DecryptedItem{constructor(e){super(e),this.keyParams=new o.SNRootKeyParams(e.content.keyParams)}get keyVersion(){return this.content.version}get itemsKey(){return this.masterKey}get masterKey(){return this.content.masterKey}get serverPassword(){return this.content.serverPassword}get dataAuthenticationKey(){return this.content.dataAuthenticationKey}compare(e){return this.keyVersion===e.keyVersion&&(this.serverPassword&&e.serverPassword?(0,i.timingSafeEqual)(this.masterKey,e.masterKey)&&(0,i.timingSafeEqual)(this.serverPassword,e.serverPassword):(0,i.timingSafeEqual)(this.masterKey,e.masterKey))}persistableValueWhenWrapping(){return Object.assign(Object.assign({},this.getKeychainValue()),{keyParams:this.keyParams.getPortableValue()})}getKeychainValue(){const e={version:this.keyVersion,masterKey:this.masterKey};return this.dataAuthenticationKey&&(e.dataAuthenticationKey=this.dataAuthenticationKey),e}}t.SNRootKey=a},2392:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNRootKeyParams=void 0;const n=r(10256),i=r(64657),o=r(41671),a=r(29153);t.SNRootKeyParams=class{constructor(e){this.content=Object.assign(Object.assign({},e),{origination:e.origination||n.KeyParamsOrigination.Registration,version:e.version||(0,o.ProtocolVersionForKeyParams)(e)})}get isKeyParamsObject(){return!0}get identifier(){return this.content004.identifier||this.content002.email}get version(){return this.content.version}get origination(){return this.content.origination}get content001(){return this.content}get content002(){return this.content}get content003(){return this.content}get content004(){return this.content}get createdDate(){if(this.content004.created)return new Date(Number(this.content004.created))}compare(e){if(this.version!==e.version)return!1;if([n.ProtocolVersion.V004,n.ProtocolVersion.V003].includes(this.version))return this.identifier===e.identifier&&this.content004.pw_nonce===e.content003.pw_nonce;if([n.ProtocolVersion.V002,n.ProtocolVersion.V001].includes(this.version))return this.identifier===e.identifier&&this.content002.pw_salt===e.content001.pw_salt;throw Error("Unhandled version in KeyParams.compare")}getPortableValue(){return(0,i.pickByCopy)(this.content,a.ValidKeyParamsKeys)}}},29153:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValidKeyParamsKeys=void 0,t.ValidKeyParamsKeys=["identifier","pw_cost","pw_nonce","pw_salt","version","origination","created"]},83262:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyRecoveryStrings=void 0;const n=r(10256);t.KeyRecoveryStrings={KeyRecoveryLoginFlowPrompt:e=>{var t;const r=null===(t=e.createdDate)||void 0===t?void 0:t.toLocaleString();switch(e.origination){case n.KeyParamsOrigination.EmailChange:return"Enter your account password as it was when you changed your email on ".concat(r,".");case n.KeyParamsOrigination.PasswordChange:return"Enter your account password after it was changed on ".concat(r,".");case n.KeyParamsOrigination.Registration:return"Enter your account password as it was when you registered ".concat(r,".");case n.KeyParamsOrigination.ProtocolUpgrade:return"Enter your account password as it was when you upgraded your encryption version on ".concat(r,".");case n.KeyParamsOrigination.PasscodeChange:return"Enter your application passcode after it was changed on ".concat(r,".");case n.KeyParamsOrigination.PasscodeCreate:return"Enter your application passcode as it was when you created it on ".concat(r,".");default:throw Error("Unhandled KeyParamsOrigination case for KeyRecoveryLoginFlowPrompt")}},KeyRecoveryLoginFlowReason:"Your account password is required to revalidate your session.",KeyRecoveryLoginFlowInvalidPassword:"Incorrect credentials entered. Please try again.",KeyRecoveryRootKeyReplaced:"Your credentials have successfully been updated.",KeyRecoveryPasscodeRequiredTitle:"Passcode Required",KeyRecoveryPasscodeRequiredText:"You must enter your passcode in order to save your new credentials.",KeyRecoveryPasswordRequired:"Your account password is required to recover an encryption key.",KeyRecoveryKeyRecovered:"Your key has successfully been recovered.",KeyRecoveryUnableToRecover:"Unable to recover your key with the attempted password. Please try again."}},94466:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SNProtocolOperator001=void 0;const i=r(10256),o=r(16418),a=r(64657),s=r(55665),c=r(20593),l=r(28809),u=r(73913),d="00000000000000000000000000000000";t.SNProtocolOperator001=class{constructor(e){this.crypto=e}getEncryptionDisplayName(){return"AES-256"}get version(){return i.ProtocolVersion.V001}generateNewItemsKeyContent(){const e=s.V001Algorithm.EncryptionKeyLength,t=this.crypto.generateRandomKey(e);return(0,o.FillItemContent)({itemsKey:t,version:i.ProtocolVersion.V001})}createItemsKey(){const e=new o.DecryptedPayload(Object.assign({uuid:a.UuidGenerator.GenerateUuid(),content_type:i.ContentType.ItemsKey,content:this.generateNewItemsKeyContent()},(0,o.PayloadTimestampDefaults)()));return(0,o.CreateDecryptedItemFromPayload)(e)}createRootKey(e,t,r){return n(this,void 0,void 0,(function*(){const n=s.V001Algorithm.PbkdfMinCost,o=this.crypto.generateRandomKey(s.V001Algorithm.SaltSeedLength),a=yield this.crypto.unsafeSha1(e+"SN"+o),c=(0,u.Create001KeyParams)({email:e,pw_cost:n,pw_nonce:o,pw_salt:a,version:i.ProtocolVersion.V001,origination:r,created:"".concat(Date.now())});return this.deriveKey(t,c)}))}getPayloadAuthenticatedData(e){}computeRootKey(e,t){return n(this,void 0,void 0,(function*(){return this.deriveKey(e,t)}))}decryptString(e,t){return n(this,void 0,void 0,(function*(){return this.crypto.aes256CbcDecrypt(e,d,t)}))}encryptString(e,t){return n(this,void 0,void 0,(function*(){return this.crypto.aes256CbcEncrypt(e,d,t)}))}generateEncryptedParametersAsync(e,t){return n(this,void 0,void 0,(function*(){const r=this.crypto.generateRandomKey(2*s.V001Algorithm.EncryptionKeyLength),n=yield this.encryptString(r,t.itemsKey),i=(0,a.firstHalfOfString)(r),o=(0,a.secondHalfOfString)(r),l=yield this.encryptString(JSON.stringify(e.content),i),u=t.keyVersion+l,d=yield this.crypto.hmac256(u,o);if(!d)throw Error("Error generating hmac256 authHash");return{uuid:e.uuid,items_key_id:(0,c.isItemsKey)(t)?t.uuid:void 0,content:u,enc_item_key:n,auth_hash:d,version:this.version}}))}generateDecryptedParametersAsync(e,t){return n(this,void 0,void 0,(function*(){if(!e.enc_item_key)return console.error(Error("Missing item encryption key, skipping decryption.")),{uuid:e.uuid,errorDecrypting:!0};let r=e.enc_item_key;r=this.version+r;const n=this.encryptionComponentsFromString(r,t.itemsKey),i=yield this.decryptString(n.ciphertext,n.key);if(!i)return console.error("Error decrypting parameters",e),{uuid:e.uuid,errorDecrypting:!0};const o=(0,a.firstHalfOfString)(i),s=this.encryptionComponentsFromString(e.content,o),c=yield this.decryptString(s.ciphertext,s.key);return c?{uuid:e.uuid,content:JSON.parse(c)}:{uuid:e.uuid,errorDecrypting:!0}}))}encryptionComponentsFromString(e,t){const r=e.substring(0,i.ProtocolVersionLength);return{ciphertext:e.substring(i.ProtocolVersionLength,e.length),version:r,key:t}}deriveKey(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.crypto.pbkdf2(e,t.content001.pw_salt,t.content001.pw_cost,s.V001Algorithm.PbkdfOutputLength);if(!r)throw Error("Error deriving PBKDF2 key");const n=(0,a.splitString)(r,2);return(0,l.CreateNewRootKey)({serverPassword:n[0],masterKey:n[1],version:i.ProtocolVersion.V001,keyParams:t.getPortableValue()})}))}}},91938:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SNProtocolOperator002=void 0;const i=r(10256),o=r(16418),a=r(16418),s=r(64657),c=r(64657),l=r(55665),u=r(20593),d=r(28809),p=r(73913),h=r(80026),f=r(94466);class y extends f.SNProtocolOperator001{get version(){return i.ProtocolVersion.V002}generateNewItemsKeyContent(){const e=l.V002Algorithm.EncryptionKeyLength,t=this.crypto.generateRandomKey(e),r=this.crypto.generateRandomKey(e);return o.FillItemContent({itemsKey:t,dataAuthenticationKey:r,version:i.ProtocolVersion.V002})}createItemsKey(){const e=new o.DecryptedPayload(Object.assign({uuid:c.UuidGenerator.GenerateUuid(),content_type:i.ContentType.ItemsKey,content:this.generateNewItemsKeyContent()},(0,a.PayloadTimestampDefaults)()));return o.CreateDecryptedItemFromPayload(e)}createRootKey(e,t,r){return n(this,void 0,void 0,(function*(){const n=s.lastElement(l.V002Algorithm.PbkdfCostsUsed),o=this.crypto.generateRandomKey(l.V002Algorithm.SaltSeedLength),a=yield this.crypto.unsafeSha1(e+":"+o),c=(0,p.Create002KeyParams)({email:e,pw_nonce:o,pw_cost:n,pw_salt:a,version:i.ProtocolVersion.V002,origination:r,created:"".concat(Date.now())});return this.deriveKey(t,c)}))}computeRootKey(e,t){return n(this,void 0,void 0,(function*(){return this.deriveKey(e,t)}))}decryptString002(e,t,r){return n(this,void 0,void 0,(function*(){return this.crypto.aes256CbcDecrypt(e,r,t)}))}encryptString002(e,t,r){return n(this,void 0,void 0,(function*(){return this.crypto.aes256CbcEncrypt(e,r,t)}))}encryptTextParams(e,t,r,i,o,a){return n(this,void 0,void 0,(function*(){const n=this.crypto.generateRandomKey(l.V002Algorithm.EncryptionIvLength),s=yield this.encryptString002(e,t,n),c=[o,i,n,s].join(":"),u=yield this.crypto.hmac256(c,r);if(!u)throw Error("Error generating hmac256 authHash");const d=[o,u,i,n,s];if(a){const e=this.crypto.base64Encode(JSON.stringify(a.content));d.push(e)}return d.join(":")}))}decryptTextParams(e,t,r,i,o,a){return n(this,void 0,void 0,(function*(){if(!r)throw"Attempting to decryptTextParams with null encryptionKey";const n=yield this.crypto.hmac256(e,a);if(!n)throw Error("Error generating hmac256 localAuthHash");return!1===this.crypto.timingSafeEqual(o,n)?(console.error(Error("Auth hash does not match.")),null):this.decryptString002(t,r,i)}))}getPayloadAuthenticatedData(e){const t=this.encryptionComponentsFromString002(e.enc_item_key).keyParams;if(!t)return;const r=JSON.parse(this.crypto.base64Decode(t));return Object.assign({},r)}generateEncryptedParametersAsync(e,t){return n(this,void 0,void 0,(function*(){const r=this.crypto.generateRandomKey(2*l.V002Algorithm.EncryptionKeyLength),n=yield this.encryptTextParams(r,t.itemsKey,t.dataAuthenticationKey,e.uuid,t.keyVersion,t instanceof h.SNRootKey?t.keyParams:void 0),i=s.firstHalfOfString(r),o=s.secondHalfOfString(r),a=yield this.encryptTextParams(JSON.stringify(e.content),i,o,e.uuid,t.keyVersion,t instanceof h.SNRootKey?t.keyParams:void 0);return{uuid:e.uuid,items_key_id:(0,u.isItemsKey)(t)?t.uuid:void 0,content:a,enc_item_key:n,version:this.version}}))}generateDecryptedParametersAsync(e,t){return n(this,void 0,void 0,(function*(){if(!e.enc_item_key)return console.error(Error("Missing item encryption key, skipping decryption.")),{uuid:e.uuid,errorDecrypting:!0};const r=e.enc_item_key,n=this.encryptionComponentsFromString002(r,t.itemsKey,t.dataAuthenticationKey),i=yield this.decryptTextParams(n.ciphertextToAuth,n.contentCiphertext,n.encryptionKey,n.iv,n.authHash,n.authKey);if(!i)return console.error("Error decrypting item_key parameters",e),{uuid:e.uuid,errorDecrypting:!0};const o=s.firstHalfOfString(i),a=s.secondHalfOfString(i),c=this.encryptionComponentsFromString002(e.content,o,a),l=yield this.decryptTextParams(c.ciphertextToAuth,c.contentCiphertext,c.encryptionKey,c.iv,c.authHash,c.authKey);return l?{uuid:e.uuid,content:JSON.parse(l)}:{uuid:e.uuid,errorDecrypting:!0}}))}deriveKey(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.crypto.pbkdf2(e,t.content002.pw_salt,t.content002.pw_cost,l.V002Algorithm.PbkdfOutputLength);if(!r)throw Error("Error deriving PBKDF2 key");const n=s.splitString(r,3);return(0,d.CreateNewRootKey)({serverPassword:n[0],masterKey:n[1],dataAuthenticationKey:n[2],version:i.ProtocolVersion.V002,keyParams:t.getPortableValue()})}))}encryptionComponentsFromString002(e,t,r){const n=e.split(":");return{encryptionVersion:n[0],authHash:n[1],uuid:n[2],iv:n[3],contentCiphertext:n[4],keyParams:n[5],ciphertextToAuth:[n[0],n[2],n[3],n[4]].join(":"),encryptionKey:t,authKey:r}}}t.SNProtocolOperator002=y},22405:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SNProtocolOperator003=void 0;const i=r(10256),o=r(16418),a=r(64657),s=r(55665),c=r(28809),l=r(73913),u=r(91938);class d extends u.SNProtocolOperator002{get version(){return i.ProtocolVersion.V003}generateNewItemsKeyContent(){const e=s.V003Algorithm.EncryptionKeyLength,t=this.crypto.generateRandomKey(e),r=this.crypto.generateRandomKey(e);return(0,o.FillItemContent)({itemsKey:t,dataAuthenticationKey:r,version:i.ProtocolVersion.V003})}createItemsKey(){const e=this.generateNewItemsKeyContent(),t=new o.DecryptedPayload(Object.assign({uuid:a.UuidGenerator.GenerateUuid(),content_type:i.ContentType.ItemsKey,content:(0,o.FillItemContent)(e)},(0,o.PayloadTimestampDefaults)()));return(0,o.CreateDecryptedItemFromPayload)(t)}computeRootKey(e,t){return n(this,void 0,void 0,(function*(){return this.deriveKey(e,t)}))}deriveKey(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.generateSalt(t.content003.identifier,i.ProtocolVersion.V003,s.V003Algorithm.PbkdfCost,t.content003.pw_nonce),n=yield this.crypto.pbkdf2(e,r,s.V003Algorithm.PbkdfCost,s.V003Algorithm.PbkdfOutputLength);if(!n)throw Error("Error deriving PBKDF2 key");const o=(0,a.splitString)(n,3);return(0,c.CreateNewRootKey)({serverPassword:o[0],masterKey:o[1],dataAuthenticationKey:o[2],version:i.ProtocolVersion.V003,keyParams:t.getPortableValue()})}))}createRootKey(e,t,r){return n(this,void 0,void 0,(function*(){const n=i.ProtocolVersion.V003,o=this.crypto.generateRandomKey(s.V003Algorithm.SaltSeedLength),a=(0,l.Create003KeyParams)({identifier:e,pw_nonce:o,version:n,origination:r,created:"".concat(Date.now())});return this.deriveKey(t,a)}))}generateSalt(e,t,r,i){return n(this,void 0,void 0,(function*(){return yield this.crypto.sha256([e,"SF",t,r,i].join(":"))}))}}t.SNProtocolOperator003=d},70542:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SNProtocolOperator004=void 0;const i=r(10256),o=r(16418),a=r(16418),s=r(64657),c=r(55665),l=r(20593),u=r(28809),d=r(73913);t.SNProtocolOperator004=class{constructor(e){this.crypto=e}getEncryptionDisplayName(){return"XChaCha20-Poly1305"}get version(){return i.ProtocolVersion.V004}generateNewItemsKeyContent(){const e=this.crypto.generateRandomKey(c.V004Algorithm.EncryptionKeyLength);return(0,a.FillItemContent)({itemsKey:e,version:i.ProtocolVersion.V004})}createItemsKey(){const e=new o.DecryptedPayload(Object.assign({uuid:s.UuidGenerator.GenerateUuid(),content_type:i.ContentType.ItemsKey,content:this.generateNewItemsKeyContent()},(0,a.PayloadTimestampDefaults)()));return(0,a.CreateDecryptedItemFromPayload)(e)}generateSalt004(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.crypto.sha256([e,t].join(":"));return s.truncateHexString(r,c.V004Algorithm.ArgonSaltLength)}))}computeRootKey(e,t){return n(this,void 0,void 0,(function*(){return this.deriveKey(e,t)}))}createRootKey(e,t,r){return n(this,void 0,void 0,(function*(){const n=i.ProtocolVersion.V004,o=this.crypto.generateRandomKey(c.V004Algorithm.ArgonSaltSeedLength),a=(0,d.Create004KeyParams)({identifier:e,pw_nonce:o,version:n,origination:r,created:"".concat(Date.now())});return this.deriveKey(t,a)}))}encryptString004(e,t,r,n){if(!r)throw"encryptString null nonce";if(!t)throw"encryptString null rawKey";return this.crypto.xchacha20Encrypt(e,r,t,this.authenticatedDataToString(n))}decryptString004(e,t,r,n){return this.crypto.xchacha20Decrypt(e,r,t,n)}generateEncryptionNonce(){return this.crypto.generateRandomKey(c.V004Algorithm.EncryptionNonceLength)}generateEncryptedProtocolString(e,t,r){const n=this.generateEncryptionNonce(),o=this.encryptString004(e,t,n,r);return[i.ProtocolVersion.V004,n,o,this.authenticatedDataToString(r)].join(":")}deconstructEncryptedPayloadString(e){const t=e.split(":");return{version:t[0],nonce:t[1],ciphertext:t[2],authenticatedData:t[3]}}getPayloadAuthenticatedData(e){const t=this.deconstructEncryptedPayloadString(e.enc_item_key).authenticatedData;return this.stringToAuthenticatedData(t)}generateAuthenticatedDataForPayload(e,t){const r={u:e.uuid,v:i.ProtocolVersion.V004};if((0,u.ContentTypeUsesRootKeyEncryption)(e.content_type))return Object.assign(Object.assign({},r),{kp:t.keyParams.content});if(!(0,l.isItemsKey)(t))throw Error("Attempting to use non-items key for regular item.");return r}authenticatedDataToString(e){return this.crypto.base64Encode(JSON.stringify(s.sortedCopy(s.omitUndefinedCopy(e))))}stringToAuthenticatedData(e,t){const r=JSON.parse(this.crypto.base64Decode(e));return s.sortedCopy(Object.assign(Object.assign({},r),t))}generateEncryptedParametersSync(e,t){const r=this.crypto.generateRandomKey(c.V004Algorithm.EncryptionKeyLength),n=JSON.stringify(e.content),i=this.generateAuthenticatedDataForPayload(e,t),o=this.generateEncryptedProtocolString(n,r,i),a=this.generateEncryptedProtocolString(r,t.itemsKey,i);return{uuid:e.uuid,items_key_id:(0,l.isItemsKey)(t)?t.uuid:void 0,content:o,enc_item_key:a,version:this.version}}generateDecryptedParametersSync(e,t){const r=this.deconstructEncryptedPayloadString(e.enc_item_key),n=this.stringToAuthenticatedData(r.authenticatedData,{u:e.uuid,v:e.version}),i=this.authenticatedDataToString(n),o=this.decryptString004(r.ciphertext,t.itemsKey,r.nonce,i);if(!o)return console.error("Error decrypting itemKey parameters",e),{uuid:e.uuid,errorDecrypting:!0};const a=this.deconstructEncryptedPayloadString(e.content),s=this.decryptString004(a.ciphertext,o,a.nonce,i);return s?{uuid:e.uuid,content:JSON.parse(s)}:{uuid:e.uuid,errorDecrypting:!0}}deriveKey(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.generateSalt004(t.content004.identifier,t.content004.pw_nonce),n=this.crypto.argon2(e,r,c.V004Algorithm.ArgonIterations,c.V004Algorithm.ArgonMemLimit,c.V004Algorithm.ArgonOutputKeyBytes),o=s.splitString(n,2),a=o[0],l=o[1];return(0,u.CreateNewRootKey)({masterKey:a,serverPassword:l,version:i.ProtocolVersion.V004,keyParams:t.getPortableValue()})}))}}},26455:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolOperator005=void 0;const n=r(55665),i=r(70542),o="005",a="".concat(o,"_KeySym"),s="".concat(o,"_KeyAsym");class c extends i.SNProtocolOperator004{getEncryptionDisplayName(){return"XChaCha20-Poly1305"}get version(){return o}generateKeyPair(){return this.crypto.sodiumCryptoBoxGenerateKeypair()}asymmetricEncryptKey(e,t,r){const i=this.crypto.generateRandomKey(n.V005Algorithm.AsymmetricEncryptionNonceLength),o=this.crypto.sodiumCryptoBoxEasyEncrypt(e,i,t,r);return[s,i,o].join(":")}asymmetricDecryptKey(e,t,r){const n=e.split(":")[1];return this.crypto.sodiumCryptoBoxEasyDecrypt(e,n,t,r)}symmetricEncryptPrivateKey(e,t){if(64!==t.length)throw new Error("Symmetric key length must be 256 bits");const r=this.crypto.generateRandomKey(n.V005Algorithm.SymmetricEncryptionNonceLength),i=this.crypto.xchacha20Encrypt(e,r,t);return[a,r,i].join(":")}symmetricDecryptPrivateKey(e,t){if(64!==t.length)throw new Error("Symmetric key length must be 256 bits");const r=e.split(":")[1];return this.crypto.xchacha20Decrypt(e,r,t)}}t.ProtocolOperator005=c},2163:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncOperator=t.createOperatorForVersion=void 0;const n=r(10256),i=r(94466),o=r(91938),a=r(22405),s=r(70542);t.createOperatorForVersion=function(e,t){if(e===n.ProtocolVersion.V001)return new i.SNProtocolOperator001(t);if(e===n.ProtocolVersion.V002)return new o.SNProtocolOperator002(t);if(e===n.ProtocolVersion.V003)return new a.SNProtocolOperator003(t);if(e===n.ProtocolVersion.V004)return new s.SNProtocolOperator004(t);throw Error("Unable to find operator for version ".concat(e))},t.isAsyncOperator=function(e){return void 0!==e.generateDecryptedParametersAsync}},89071:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},67913:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorManager=void 0;const n=r(10256),i=r(2163);t.OperatorManager=class{constructor(e){this.crypto=e,this.operators={},this.crypto=e}deinit(){this.crypto=void 0,this.operators={}}operatorForVersion(e){const t=e;let r=this.operators[t];return r||(r=(0,i.createOperatorForVersion)(e,this.crypto),this.operators[t]=r),r}defaultOperator(){return this.operatorForVersion(n.ProtocolVersionLatest)}}},8153:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.decryptPayload=t.encryptPayload=void 0;const i=r(47463),o=r(2163);t.encryptPayload=function(e,t,r){return n(this,void 0,void 0,(function*(){const n=r.operatorForVersion(t.keyVersion);let i;if(i=(0,o.isAsyncOperator)(n)?yield n.generateEncryptedParametersAsync(e,t):n.generateEncryptedParametersSync(e,t),!i)throw"Unable to generate encryption parameters";return i}))},t.decryptPayload=function(e,t,r){return n(this,void 0,void 0,(function*(){const n=r.operatorForVersion(e.version);try{return(0,o.isAsyncOperator)(n)?yield n.generateDecryptedParametersAsync((0,i.encryptedParametersFromPayload)(e),t):n.generateDecryptedParametersSync((0,i.encryptedParametersFromPayload)(e),t)}catch(t){return console.error("Error decrypting payload",e,t),{uuid:e.uuid,errorDecrypting:!0}}}))}},20547:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76379:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findDefaultItemsKey=void 0,t.findDefaultItemsKey=function(e){if(1===e.length)return e[0];const t=e.filter((e=>e.isDefault));if(t.length>1){const e=t.filter((e=>!e.neverSynced));if(e.length>0)return e[0]}return t[0]}},8708:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyMode=void 0,(r=t.KeyMode||(t.KeyMode={}))[r.RootKeyNone=0]="RootKeyNone",r[r.RootKeyOnly=1]="RootKeyOnly",r[r.RootKeyPlusWrapper=2]="RootKeyPlusWrapper",r[r.WrapperOnly=3]="WrapperOnly"},18652:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RootKeyServiceEvent=void 0,(t.RootKeyServiceEvent||(t.RootKeyServiceEvent={})).RootKeyStatusChanged="RootKeyStatusChanged"},79874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2536:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FindPayloadInDecryptionSplit=t.FindPayloadInEncryptionSplit=t.CreateDecryptionSplitWithKeyLookup=t.CreateEncryptionSplitWithKeyLookup=void 0,t.CreateEncryptionSplitWithKeyLookup=function(e){const t={};return e.rootKeyEncryption&&(t.usesRootKeyWithKeyLookup={items:e.rootKeyEncryption}),e.itemsKeyEncryption&&(t.usesItemsKeyWithKeyLookup={items:e.itemsKeyEncryption}),t},t.CreateDecryptionSplitWithKeyLookup=function(e){const t={};return e.rootKeyEncryption&&(t.usesRootKeyWithKeyLookup={items:e.rootKeyEncryption}),e.itemsKeyEncryption&&(t.usesItemsKeyWithKeyLookup={items:e.itemsKeyEncryption}),t},t.FindPayloadInEncryptionSplit=function(e,t){var r,n,i,o;const a=null===(r=t.usesItemsKey)||void 0===r?void 0:r.items.find((t=>t.uuid===e));if(a)return a;const s=null===(n=t.usesRootKey)||void 0===n?void 0:n.items.find((t=>t.uuid===e));if(s)return s;const c=null===(i=t.usesItemsKeyWithKeyLookup)||void 0===i?void 0:i.items.find((t=>t.uuid===e));if(c)return c;const l=null===(o=t.usesRootKeyWithKeyLookup)||void 0===o?void 0:o.items.find((t=>t.uuid===e));if(l)return l;throw Error("Cannot find payload in encryption split")},t.FindPayloadInDecryptionSplit=function(e,t){var r,n,i,o;const a=null===(r=t.usesItemsKey)||void 0===r?void 0:r.items.find((t=>t.uuid===e));if(a)return a;const s=null===(n=t.usesRootKey)||void 0===n?void 0:n.items.find((t=>t.uuid===e));if(s)return s;const c=null===(i=t.usesItemsKeyWithKeyLookup)||void 0===i?void 0:i.items.find((t=>t.uuid===e));if(c)return c;const l=null===(o=t.usesRootKeyWithKeyLookup)||void 0===o?void 0:o.items.find((t=>t.uuid===e));if(l)return l;throw Error("Cannot find payload in encryption split")}},74258:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},73650:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SplitPayloadsByEncryptionType=void 0;const n=r(28809);t.SplitPayloadsByEncryptionType=function(e){const t=[],r=[];for(const i of e)(0,n.ItemContentTypeUsesRootKeyEncryption)(i.content_type)?t.push(i):r.push(i);return{rootKeyEncryption:t.length>0?t:void 0,itemsKeyEncryption:r.length>0?r:void 0}}},86760:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},85488:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},25072:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StandardException=void 0,t.StandardException=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.message=e,t&&console.error("StandardException raised: ",e)}}},47463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedParametersFromPayload=t.isErrorDecryptingParameters=void 0,t.isErrorDecryptingParameters=function(e){return e.errorDecrypting},t.encryptedParametersFromPayload=function(e){return{uuid:e.uuid,content:e.content,items_key_id:e.items_key_id,enc_item_key:e.enc_item_key,version:e.version,auth_hash:e.auth_hash}}},64486:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},74195:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},68053:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},41025:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ComputePrivateUsername=void 0,t.ComputePrivateUsername=function(e,t){return r(this,void 0,void 0,(function*(){const r=yield e.hmac256(yield e.sha256("StandardNotes-PrivateUsername-V1"),yield e.sha256(t.trim().toLowerCase()));if(null!=r)return r}))}},72691:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(55665),t),i(r(11393),t),i(r(20593),t),i(r(73756),t),i(r(11542),t),i(r(28809),t),i(r(73913),t),i(r(41671),t),i(r(80026),t),i(r(2392),t),i(r(29153),t),i(r(83262),t),i(r(94466),t),i(r(91938),t),i(r(22405),t),i(r(70542),t),i(r(26455),t),i(r(2163),t),i(r(89071),t),i(r(67913),t),i(r(8153),t),i(r(20547),t),i(r(76379),t),i(r(8708),t),i(r(18652),t),i(r(79874),t),i(r(2536),t),i(r(74258),t),i(r(73650),t),i(r(86760),t),i(r(85488),t),i(r(25072),t),i(r(47463),t),i(r(64486),t),i(r(74195),t),i(r(68053),t),i(r(41025),t)},75082:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(72691),t)},13187:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentAction=void 0,(r=t.ComponentAction||(t.ComponentAction={})).SetSize="set-size",r.StreamItems="stream-items",r.StreamContextItem="stream-context-item",r.SaveItems="save-items",r.SelectItem="select-item",r.AssociateItem="associate-item",r.DeassociateItem="deassociate-item",r.ClearSelection="clear-selection",r.CreateItem="create-item",r.CreateItems="create-items",r.DeleteItems="delete-items",r.SetComponentData="set-component-data",r.ToggleActivateComponent="toggle-activate-component",r.RequestPermissions="request-permissions",r.PresentConflictResolution="present-conflict-resolution",r.DuplicateItem="duplicate-item",r.ComponentRegistered="component-registered",r.ActivateThemes="themes",r.Reply="reply",r.ThemesActivated="themes-activated",r.KeyDown="key-down",r.KeyUp="key-up",r.Click="click"},6793:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentArea=void 0,(r=t.ComponentArea||(t.ComponentArea={})).Editor="editor-editor",r.Themes="themes",r.EditorStack="editor-stack"},69266:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentFlag=void 0,(r=t.ComponentFlag||(t.ComponentFlag={})).New="New",r.Deprecated="Deprecated"},23444:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},31777:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.NoteType=void 0,(r=t.NoteType||(t.NoteType={})).Authentication="authentication",r.Code="code",r.Markdown="markdown",r.RichText="rich-text",r.Spreadsheet="spreadsheet",r.Task="task",r.Plain="plain-text"},11882:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},89877:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},32772:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentalFeatures=t.LegacyFileSafeIdentifier=t.FeatureIdentifier=void 0,(r=t.FeatureIdentifier||(t.FeatureIdentifier={})).AccountSwitcher="com.standardnotes.account-switcher",r.CloudLink="org.standardnotes.cloudlink",r.DailyDropboxBackup="org.standardnotes.daily-dropbox-backup",r.DailyEmailBackup="org.standardnotes.daily-email-backup",r.DailyGDriveBackup="org.standardnotes.daily-gdrive-backup",r.DailyOneDriveBackup="org.standardnotes.daily-onedrive-backup",r.Files="org.standardnotes.files",r.FilesBeta="org.standardnotes.files-beta",r.FilesLowStorageTier="org.standardnotes.files-low-storage-tier",r.FilesMaximumStorageTier="org.standardnotes.files-max-storage-tier",r.ListedCustomDomain="org.standardnotes.listed-custom-domain",r.NoteHistory30Days="org.standardnotes.note-history-30",r.NoteHistory365Days="org.standardnotes.note-history-365",r.NoteHistoryUnlimited="org.standardnotes.note-history-unlimited",r.SignInAlerts="com.standardnotes.sign-in-alerts",r.SmartFilters="org.standardnotes.smart-filters",r.TagNesting="org.standardnotes.tag-nesting",r.TwoFactorAuth="org.standardnotes.two-factor-auth",r.SubscriptionSharing="org.standardnotes.subscription-sharing",r.AutobiographyTheme="org.standardnotes.theme-autobiography",r.DynamicTheme="org.standardnotes.theme-dynamic",r.DarkTheme="org.standardnotes.theme-focus",r.FocusMode="org.standardnotes.focus-mode",r.FuturaTheme="org.standardnotes.theme-futura",r.MidnightTheme="org.standardnotes.theme-midnight",r.SolarizedDarkTheme="org.standardnotes.theme-solarized-dark",r.TitaniumTheme="org.standardnotes.theme-titanium",r.CodeEditor="org.standardnotes.code-editor",r.MarkdownProEditor="org.standardnotes.advanced-markdown-editor",r.MarkdownVisualEditor="org.standardnotes.markdown-visual-editor",r.PlainTextEditor="org.standardnotes.plain-text-editor",r.PlusEditor="org.standardnotes.plus-editor",r.SheetsEditor="org.standardnotes.standard-sheets",r.TaskEditor="org.standardnotes.simple-task-editor",r.TokenVaultEditor="org.standardnotes.token-vault",r.DeprecatedBoldEditor="org.standardnotes.bold-editor",r.DeprecatedMarkdownBasicEditor="org.standardnotes.simple-markdown-editor",r.DeprecatedMarkdownMathEditor="org.standardnotes.fancy-markdown-editor",r.DeprecatedMarkdownMinimistEditor="org.standardnotes.minimal-markdown-editor",r.DeprecatedFoldersComponent="org.standardnotes.folders",r.DeprecatedFileSafe="org.standardnotes.file-safe",t.LegacyFileSafeIdentifier="org.standardnotes.legacy.file-safe",t.ExperimentalFeatures=[]},63001:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FindNativeFeature=t.GetFeaturesForSubscription=t.GetFeatures=void 0;const n=r(45868),i=r(95143),o=r(83037),a=r(91375),s=r(34533),c=r(23712);function l(){return[...(0,i.themes)(),...(0,n.editors)(),...(0,o.serverFeatures)(),...(0,a.clientFeatures)(),...(0,c.experimentalFeatures)(),...(0,s.GetDeprecatedFeatures)()]}t.GetFeatures=l,t.GetFeaturesForSubscription=function(e){return l().filter((t=>t.availableInSubscriptions.includes(e)))},t.FindNativeFeature=function(e){return l().find((t=>t.identifier===e))}},91375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clientFeatures=void 0;const n=r(92680),i=r(32772),o=r(10256);t.clientFeatures=function(){return[{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Tag Nesting",identifier:i.FeatureIdentifier.TagNesting,permission_name:n.PermissionName.TagNesting,description:"Organize your tags into folders."},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Smart Filters",identifier:i.FeatureIdentifier.SmartFilters,permission_name:n.PermissionName.SmartFilters,description:"Create smart filters for viewing notes matching specific criteria."},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Encrypted files (coming soon)",identifier:i.FeatureIdentifier.Files,permission_name:n.PermissionName.Files,description:""},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Encrypted files beta",identifier:i.FeatureIdentifier.FilesBeta,permission_name:n.PermissionName.FilesBeta,description:""},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Focus Mode",identifier:i.FeatureIdentifier.FocusMode,permission_name:n.PermissionName.FocusMode,description:""},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Listed Custom Domain",identifier:i.FeatureIdentifier.ListedCustomDomain,permission_name:n.PermissionName.ListedCustomDomain,description:""},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Multiple accounts",identifier:i.FeatureIdentifier.AccountSwitcher,permission_name:n.PermissionName.AccountSwitcher,description:""}]}},34533:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetDeprecatedFeatures=void 0;const n=r(10256),i=r(92680),o=r(32772),a=r(31777),s=r(23822),c=r(13187),l=r(6793);t.GetDeprecatedFeatures=function(){return[(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Alternative Rich Text",identifier:o.FeatureIdentifier.DeprecatedBoldEditor,note_type:a.NoteType.RichText,file_type:"html",component_permissions:[{name:c.ComponentAction.StreamContextItem,content_types:[n.ContentType.Note]},{name:c.ComponentAction.StreamItems,content_types:[n.ContentType.FilesafeCredentials,n.ContentType.FilesafeFileMetadata,n.ContentType.FilesafeIntegration]}],spellcheckControl:!0,deprecated:!0,permission_name:i.PermissionName.BoldEditor,description:"A simple and peaceful rich editor that helps you write and think clearly.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/editors/bold.jpg"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Basic Markdown",identifier:o.FeatureIdentifier.DeprecatedMarkdownBasicEditor,note_type:a.NoteType.Markdown,spellcheckControl:!0,file_type:"md",deprecated:!0,permission_name:i.PermissionName.MarkdownBasicEditor,description:"A Markdown editor with dynamic split-pane preview.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/editors/simple-markdown.jpg"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Minimal Markdown",identifier:o.FeatureIdentifier.DeprecatedMarkdownMinimistEditor,note_type:a.NoteType.Markdown,file_type:"md",index_path:"index.html",permission_name:i.PermissionName.MarkdownMinimistEditor,spellcheckControl:!0,deprecated:!0,description:"A minimal Markdown editor with live rendering and in-text search via Ctrl/Cmd + F",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/editors/min-markdown.jpg"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Markdown with Math",identifier:o.FeatureIdentifier.DeprecatedMarkdownMathEditor,spellcheckControl:!0,permission_name:i.PermissionName.MarkdownMathEditor,note_type:a.NoteType.Markdown,file_type:"md",deprecated:!0,index_path:"index.html",description:"A beautiful split-pane Markdown editor with synced-scroll, LaTeX support, and colorful syntax.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/editors/fancy-markdown.jpg"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"FileSafe",identifier:o.FeatureIdentifier.DeprecatedFileSafe,component_permissions:[{name:c.ComponentAction.StreamContextItem,content_types:[n.ContentType.Note]},{name:c.ComponentAction.StreamItems,content_types:[n.ContentType.FilesafeCredentials,n.ContentType.FilesafeFileMetadata,n.ContentType.FilesafeIntegration]}],permission_name:i.PermissionName.ComponentFilesafe,area:l.ComponentArea.EditorStack,deprecated:!0,description:"Encrypted attachments for your notes using your Dropbox, Google Drive, or WebDAV server. Limited to 50MB per file.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/FileSafe-banner.png"})]}},45868:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editors=void 0;const n=r(10256),i=r(92680),o=r(32772),a=r(31777),s=r(23822);t.editors=function(){return[(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Code",spellcheckControl:!0,identifier:o.FeatureIdentifier.CodeEditor,permission_name:i.PermissionName.CodeEditor,note_type:a.NoteType.Code,file_type:"txt",interchangeable:!0,index_path:"index.html",description:"Syntax highlighting and convenient keyboard shortcuts for over 120 programming languages. Ideal for code snippets and procedures.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/editors/code.jpg"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Rich Text",note_type:a.NoteType.RichText,file_type:"html",identifier:o.FeatureIdentifier.PlusEditor,permission_name:i.PermissionName.PlusEditor,spellcheckControl:!0,description:"From highlighting to custom font sizes and colors, to tables and lists, this editor is perfect for crafting any document.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/editors/plus-editor.jpg"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Markdown",identifier:o.FeatureIdentifier.MarkdownProEditor,note_type:a.NoteType.Markdown,file_type:"md",permission_name:i.PermissionName.MarkdownProEditor,spellcheckControl:!0,description:"A fully featured Markdown editor that supports live preview, a styling toolbar, and split pane support.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/editors/adv-markdown.jpg"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Markdown Alternative",identifier:o.FeatureIdentifier.MarkdownVisualEditor,note_type:a.NoteType.Markdown,file_type:"md",permission_name:i.PermissionName.MarkdownVisualEditor,spellcheckControl:!0,description:"A WYSIWYG-style Markdown editor that renders Markdown in preview-mode while you type without displaying any syntax.",index_path:"build/index.html"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Checklist",identifier:o.FeatureIdentifier.TaskEditor,note_type:a.NoteType.Task,spellcheckControl:!0,file_type:"md",interchangeable:!1,permission_name:i.PermissionName.TaskEditor,description:'A great way to manage short-term and long-term to-do"s. You can mark tasks as completed, change their order, and edit the text naturally in place.',thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/editors/task-editor.jpg"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Authenticator",note_type:a.NoteType.Authentication,file_type:"json",interchangeable:!1,identifier:o.FeatureIdentifier.TokenVaultEditor,permission_name:i.PermissionName.TokenVaultEditor,description:"Encrypt and protect your 2FA secrets for all your internet accounts. Authenticator handles your 2FA secrets so that you never lose them again, or have to start over when you get a new device.",thumbnail_url:"https://standard-notes.s3.amazonaws.com/screenshots/models/editors/token-vault.png"}),(0,s.FillEditorComponentDefaults)({availableInSubscriptions:[n.SubscriptionName.PlusPlan,n.SubscriptionName.ProPlan],name:"Spreadsheet",identifier:o.FeatureIdentifier.SheetsEditor,note_type:a.NoteType.Spreadsheet,file_type:"json",interchangeable:!1,permission_name:i.PermissionName.SheetsEditor,description:"A powerful spreadsheet editor with formatting and formula support. Not recommended for large data sets, as encryption of such data may decrease editor performance.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/editors/spreadsheets.png"})]}},23712:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.experimentalFeatures=void 0,t.experimentalFeatures=function(){return[]}},83037:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serverFeatures=void 0;const n=r(92680),i=r(32772),o=r(10256);t.serverFeatures=function(){return[{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Two factor authentication",identifier:i.FeatureIdentifier.TwoFactorAuth,permission_name:n.PermissionName.TwoFactorAuth},{availableInSubscriptions:[o.SubscriptionName.ProPlan],name:"Unlimited note history",identifier:i.FeatureIdentifier.NoteHistoryUnlimited,permission_name:n.PermissionName.NoteHistoryUnlimited},{availableInSubscriptions:[o.SubscriptionName.PlusPlan],name:"365 days note history",identifier:i.FeatureIdentifier.NoteHistory365Days,permission_name:n.PermissionName.NoteHistory365Days},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Email backups",identifier:i.FeatureIdentifier.DailyEmailBackup,permission_name:n.PermissionName.DailyEmailBackup},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],name:"Sign-in email alerts",identifier:i.FeatureIdentifier.SignInAlerts,permission_name:n.PermissionName.SignInAlerts},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],identifier:i.FeatureIdentifier.DailyDropboxBackup,permission_name:n.PermissionName.DailyDropboxBackup},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],identifier:i.FeatureIdentifier.DailyGDriveBackup,permission_name:n.PermissionName.DailyGDriveBackup},{availableInSubscriptions:[o.SubscriptionName.PlusPlan,o.SubscriptionName.ProPlan],identifier:i.FeatureIdentifier.DailyOneDriveBackup,permission_name:n.PermissionName.DailyOneDriveBackup},{availableInSubscriptions:[o.SubscriptionName.ProPlan],identifier:i.FeatureIdentifier.FilesMaximumStorageTier,permission_name:n.PermissionName.FilesMaximumStorageTier},{availableInSubscriptions:[o.SubscriptionName.PlusPlan],identifier:i.FeatureIdentifier.FilesLowStorageTier,permission_name:n.PermissionName.FilesLowStorageTier},{availableInSubscriptions:[o.SubscriptionName.ProPlan],identifier:i.FeatureIdentifier.SubscriptionSharing,permission_name:n.PermissionName.SubscriptionSharing}]}},95143:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.themes=void 0;const n=r(92680),i=r(32772),o=r(62364),a=r(10256);t.themes=function(){return[(0,o.FillThemeComponentDefaults)({availableInSubscriptions:[a.SubscriptionName.PlusPlan,a.SubscriptionName.ProPlan],name:"Midnight",identifier:i.FeatureIdentifier.MidnightTheme,permission_name:n.PermissionName.MidnightTheme,description:"Elegant utilitarianism.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/themes/midnight-with-mobile.jpg",isDark:!0,dock_icon:{type:"circle",background_color:"#086DD6",foreground_color:"#ffffff",border_color:"#086DD6"}}),(0,o.FillThemeComponentDefaults)({availableInSubscriptions:[a.SubscriptionName.PlusPlan,a.SubscriptionName.ProPlan],name:"Futura",identifier:i.FeatureIdentifier.FuturaTheme,permission_name:n.PermissionName.FuturaTheme,description:"Calm and relaxed. Take some time off.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/themes/futura-with-mobile.jpg",isDark:!0,dock_icon:{type:"circle",background_color:"#fca429",foreground_color:"#ffffff",border_color:"#fca429"}}),(0,o.FillThemeComponentDefaults)({availableInSubscriptions:[a.SubscriptionName.PlusPlan,a.SubscriptionName.ProPlan],name:"Solarized Dark",identifier:i.FeatureIdentifier.SolarizedDarkTheme,permission_name:n.PermissionName.SolarizedDarkTheme,description:"The perfect theme for any time.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/themes/solarized-dark.jpg",isDark:!0,dock_icon:{type:"circle",background_color:"#2AA198",foreground_color:"#ffffff",border_color:"#2AA198"}}),(0,o.FillThemeComponentDefaults)({availableInSubscriptions:[a.SubscriptionName.PlusPlan,a.SubscriptionName.ProPlan],name:"Autobiography",identifier:i.FeatureIdentifier.AutobiographyTheme,permission_name:n.PermissionName.AutobiographyTheme,description:"A theme for writers and readers.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/themes/autobiography.jpg",dock_icon:{type:"circle",background_color:"#9D7441",foreground_color:"#ECE4DB",border_color:"#9D7441"}}),(0,o.FillThemeComponentDefaults)({availableInSubscriptions:[a.SubscriptionName.PlusPlan,a.SubscriptionName.ProPlan],name:"Dark",identifier:i.FeatureIdentifier.DarkTheme,permission_name:n.PermissionName.FocusedTheme,description:"For when you need to go in.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/themes/focus-with-mobile.jpg",isDark:!0,dock_icon:{type:"circle",background_color:"#a464c2",foreground_color:"#ffffff",border_color:"#a464c2"}}),(0,o.FillThemeComponentDefaults)({availableInSubscriptions:[a.SubscriptionName.PlusPlan,a.SubscriptionName.ProPlan],name:"Titanium",identifier:i.FeatureIdentifier.TitaniumTheme,permission_name:n.PermissionName.TitaniumTheme,description:"Light on the eyes, heavy on the spirit.",thumbnail_url:"https://s3.amazonaws.com/standard-notes/screenshots/models/themes/titanium-with-mobile.jpg",dock_icon:{type:"circle",background_color:"#6e2b9e",foreground_color:"#ffffff",border_color:"#6e2b9e"}}),(0,o.FillThemeComponentDefaults)({availableInSubscriptions:[a.SubscriptionName.PlusPlan,a.SubscriptionName.ProPlan],name:"Dynamic Panels",identifier:i.FeatureIdentifier.DynamicTheme,permission_name:n.PermissionName.ThemeDynamic,layerable:!0,no_mobile:!0,description:"A smart theme that minimizes the tags and notes panels when they are not in use."})]}},23822:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FillEditorComponentDefaults=void 0;const n=r(13187),i=r(10256),o=r(6793);t.FillEditorComponentDefaults=function(e){return e.index_path||(e.index_path="dist/index.html"),e.component_permissions||(e.component_permissions=[{name:n.ComponentAction.StreamContextItem,content_types:[i.ContentType.Note]}]),e.content_type=i.ContentType.Component,e.area||(e.area=o.ComponentArea.Editor),null==e.interchangeable&&(e.interchangeable=!0),e}},62364:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FillThemeComponentDefaults=void 0;const n=r(10256),i=r(6793);t.FillThemeComponentDefaults=function(e){return e.index_path||(e.index_path="dist/dist.css"),e.content_type=n.ContentType.Theme,e.area||(e.area=i.ComponentArea.Themes),e}},3218:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},92680:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionName=void 0,(r=t.PermissionName||(t.PermissionName={})).AccountSwitcher="app:account-switcher",r.AutobiographyTheme="theme:autobiography",r.BoldEditor="editor:bold",r.CloudLink="component:cloud-link",r.CodeEditor="editor:code-editor",r.ComponentFilesafe="component:filesafe",r.ComponentFolders="component:folders",r.DailyDropboxBackup="server:daily-dropbox-backup",r.DailyEmailBackup="server:daily-email-backup",r.DailyGDriveBackup="server:daily-gdrive-backup",r.DailyOneDriveBackup="server:daily-onedrive-backup",r.FilesBeta="app:files-beta",r.Files="app:files",r.FilesMaximumStorageTier="server:files-max-storage-tier",r.FilesLowStorageTier="server:files-low-storage-tier",r.FocusedTheme="theme:focused",r.FocusMode="app:focus-mode",r.FuturaTheme="theme:futura",r.ListedCustomDomain="listed:custom-domain",r.MarkdownBasicEditor="editor:markdown-basic",r.MarkdownMathEditor="editor:markdown-math",r.MarkdownMinimistEditor="editor:markdown-minimist",r.MarkdownProEditor="editor:markdown-pro",r.MarkdownVisualEditor="editor:markdown-visual",r.MidnightTheme="theme:midnight",r.NoteHistory30Days="server:note-history-30-days",r.NoteHistory365Days="server:note-history-365-days",r.NoteHistoryUnlimited="server:note-history-unlimited",r.PlusEditor="editor:plus",r.SheetsEditor="editor:sheets",r.SignInAlerts="server:sign-in-alerts",r.SmartFilters="app:smart-filters",r.SolarizedDarkTheme="theme:solarized-dark",r.TagNesting="app:tag-nesting",r.TaskEditor="editor:task-editor",r.ThemeDynamic="theme:dynamic",r.TitaniumTheme="theme:titanium",r.TokenVaultEditor="editor:token-vault",r.TwoFactorAuth="server:two-factor-auth",r.SubscriptionSharing="server:subscription-sharing"},72346:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(89877),t),i(r(32772),t),i(r(63001),t),i(r(3218),t),i(r(92680),t),i(r(13187),t),i(r(6793),t),i(r(69266),t),i(r(23444),t),i(r(31777),t),i(r(11882),t)},70295:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(72346),t)},64106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},88601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},55465:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5761:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},97195:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},21592:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1532:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},35679:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileMemoryCache=void 0;const n=r(64657);t.FileMemoryCache=class{constructor(e){this.maxSize=e,this.cache={},this.orderedQueue=[]}add(e,t){if(t.encryptedBytes.length>this.maxSize)return!1;for(;this.size+t.encryptedBytes.length>this.maxSize;)this.remove(this.orderedQueue[0]);return this.cache[e]=t,this.orderedQueue.push(e),!0}get size(){return Object.values(this.cache).map((e=>e.encryptedBytes.length)).reduce(((e,t)=>e+t),0)}get(e){return this.cache[e]}remove(e){delete this.cache[e],(0,n.removeFromArray)(this.orderedQueue,e)}clear(){this.cache={},this.orderedQueue=[]}}},94043:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ByteChunker=void 0,t.ByteChunker=class{constructor(e,t){this.minimumChunkSize=e,this.onChunk=t,this.loggingEnabled=!1,this.bytes=new Uint8Array,this.index=1}log(){if(this.loggingEnabled){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(t)}}addBytes(e,t){return r(this,void 0,void 0,(function*(){this.bytes=new Uint8Array([...this.bytes,...e]),this.log("Chunker adding ".concat(e.length,", total size ").concat(this.bytes.length)),(this.bytes.length>=this.minimumChunkSize||t)&&(yield this.popBytes(t))}))}popBytes(e){return r(this,void 0,void 0,(function*(){const t=Math.max(this.minimumChunkSize,this.bytes.length),r=this.bytes.slice(0,t);this.bytes=new Uint8Array([...this.bytes.slice(t)]),this.log("Chunker popping ".concat(r.length,", total size in queue ").concat(this.bytes.length)),yield this.onChunk(r,this.index++,e)}))}}},76545:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},72343:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OrderedByteChunker=void 0,t.OrderedByteChunker=class{constructor(e,t){this.chunkSizes=e,this.onChunk=t,this.bytes=new Uint8Array,this.index=1,this.remainingChunks=[],this.remainingChunks=e.slice()}needsPop(){return this.remainingChunks.length>0&&this.bytes.length>=this.remainingChunks[0]}addBytes(e){return r(this,void 0,void 0,(function*(){this.bytes=new Uint8Array([...this.bytes,...e]),this.needsPop()&&(yield this.popBytes())}))}popBytes(){return r(this,void 0,void 0,(function*(){const e=this.remainingChunks[0],t=this.bytes.slice(0,e);this.bytes=new Uint8Array([...this.bytes.slice(e)]),this.remainingChunks.shift(),yield this.onChunk(t,this.index++,this.index===this.chunkSizes.length-1),this.needsPop()&&(yield this.popBytes())}))}}},1346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},26579:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileBackupsConstantsV1=void 0,t.FileBackupsConstantsV1={Version:"1.0.0",MetadataFileName:"metadata.sn.json",BinaryFileName:"file.encrypted"}},67378:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},56787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},28709:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadAndDecryptFileOperation=void 0;const i=r(84945),o=r(40204),a=r(55164);t.DownloadAndDecryptFileOperation=class{constructor(e,t,r){this.file=e,this.crypto=t,this.api=r,this.downloader=new o.FileDownloader(this.file,this.api)}createDecryptor(){return new a.FileDecryptor(this.file,this.crypto)}run(e){return n(this,void 0,void 0,(function*(){const t=this.createDecryptor();let r;const o=yield this.downloader.run(((o,a,s)=>n(this,void 0,void 0,(function*(){const n=t.decryptBytes(o);if(!n||0===n.decryptedBytes.length)return r=new i.ClientDisplayableError("Failed to decrypt chunk"),void s();const c=n.decryptedBytes;yield e({decrypted:{decryptedBytes:c},encrypted:{encryptedBytes:o},progress:a})}))));return{success:!(o instanceof i.ClientDisplayableError),error:"aborted"===o?void 0:o||r,aborted:"aborted"===o}}))}abort(){this.downloader.abort()}}},57495:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptAndUploadFileOperation=void 0;const i=r(19642),o=r(19697);t.EncryptAndUploadFileOperation=class{constructor(e,t,r,n){this.file=e,this.apiToken=t,this.crypto=r,this.api=n,this.encryptedChunkSizes=[],this.totalBytesPushedInDecryptedTerms=0,this.totalBytesUploadedInDecryptedTerms=0,this.encryptor=new o.FileEncryptor(e,this.crypto),this.uploader=new i.FileUploader(this.api),this.encryptionHeader=this.encryptor.initializeHeader()}getApiToken(){return this.apiToken}getProgress(){const e=this.file.decryptedSize;return{decryptedFileSize:e,decryptedBytesUploaded:this.totalBytesUploadedInDecryptedTerms,decryptedBytesRemaining:e-this.totalBytesUploadedInDecryptedTerms,percentComplete:this.totalBytesUploadedInDecryptedTerms/e*100}}getResult(){return{encryptionHeader:this.encryptionHeader,finalDecryptedSize:this.totalBytesPushedInDecryptedTerms,key:this.file.key,remoteIdentifier:this.file.remoteIdentifier}}pushBytes(e,t,r){return n(this,void 0,void 0,(function*(){this.totalBytesPushedInDecryptedTerms+=e.byteLength;const n=this.encryptBytes(e,r);this.encryptedChunkSizes.push(n.length);const i=yield this.uploadBytes(n,t);return i&&(this.totalBytesUploadedInDecryptedTerms+=e.byteLength),i}))}encryptBytes(e,t){return this.encryptor.pushBytes(e,t)}uploadBytes(e,t){return n(this,void 0,void 0,(function*(){return yield this.uploader.uploadBytes(e,t,this.apiToken)}))}}},48266:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},20204:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.readAndDecryptBackupFile=void 0;const i=r(55164),o=r(72343);t.readAndDecryptBackupFile=function(e,t,r,a,s){return n(this,void 0,void 0,(function*(){const c=new i.FileDecryptor(t,a),l=new o.OrderedByteChunker(t.encryptedChunkSizes,(e=>n(this,void 0,void 0,(function*(){const t=c.decryptBytes(e);t&&(yield s(t.decryptedBytes))}))));return yield r.readFile(e,(e=>n(this,void 0,void 0,(function*(){yield l.addBytes(e)}))))}))}},6017:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},69972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},54810:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},89179:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},78714:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},55164:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileDecryptor=void 0;const n=r(86553);t.FileDecryptor=class{constructor(e,t){this.file=e,this.crypto=t,this.decryptor=this.crypto.xchacha20StreamInitDecryptor(this.file.encryptionHeader,this.file.key)}decryptBytes(e){const t=this.crypto.xchacha20StreamDecryptorPush(this.decryptor,e,this.file.remoteIdentifier);if(!1===t)return;const r=t.tag===n.SodiumConstant.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_FINAL;return{decryptedBytes:t.message,isFinalChunk:r}}}},40204:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileDownloader=void 0;const i=r(84945),o=r(64657);t.FileDownloader=class{constructor(e,t){this.file=e,this.api=t,this.aborted=!1,this.abortDeferred=(0,o.Deferred)(),this.totalBytesDownloaded=0}getProgress(){const e=this.file.encryptedChunkSizes.reduce(((e,t)=>e+t),0);return{encryptedFileSize:e,encryptedBytesDownloaded:this.totalBytesDownloaded,encryptedBytesRemaining:e-this.totalBytesDownloaded,percentComplete:this.totalBytesDownloaded/e*100}}run(e){return n(this,void 0,void 0,(function*(){const t=yield this.getValetToken();return t instanceof i.ClientDisplayableError?t:this.performDownload(t,e)}))}getValetToken(){return n(this,void 0,void 0,(function*(){return yield this.api.createFileValetToken(this.file.remoteIdentifier,"read")}))}performDownload(e,t){return n(this,void 0,void 0,(function*(){const r=this.api.downloadFile(this.file,0,e,0,(e=>n(this,void 0,void 0,(function*(){this.aborted||(this.totalBytesDownloaded+=e.byteLength,yield t(e,this.getProgress(),this.abort))}))));return yield Promise.race([this.abortDeferred.promise,r])}))}abort(){this.aborted=!0,this.abortDeferred.resolve("aborted")}}},19697:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileEncryptor=void 0;const n=r(86553);t.FileEncryptor=class{constructor(e,t){this.file=e,this.crypto=t}initializeHeader(){return this.stream=this.crypto.xchacha20StreamInitEncryptor(this.file.key),this.stream.header}pushBytes(e,t){if(!this.stream)throw new Error("FileEncryptor must call initializeHeader first");const r=t?n.SodiumConstant.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_FINAL:void 0;return this.crypto.xchacha20StreamEncryptorPush(this.stream,e,this.file.remoteIdentifier,r)}}},19642:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileUploader=void 0,t.FileUploader=class{constructor(e){this.apiService=e}uploadBytes(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.apiService.uploadFileBytes(n,t,e)}))}}},11280:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(64106),t),i(r(88601),t),i(r(55465),t),i(r(5761),t),i(r(97195),t),i(r(21592),t),i(r(1532),t),i(r(35679),t),i(r(94043),t),i(r(76545),t),i(r(72343),t),i(r(1346),t),i(r(26579),t),i(r(67378),t),i(r(56787),t),i(r(48266),t),i(r(20204),t),i(r(28709),t),i(r(57495),t),i(r(55164),t),i(r(19642),t),i(r(19697),t),i(r(40204),t),i(r(6017),t),i(r(69972),t),i(r(54810),t),i(r(89179),t),i(r(78714),t)},14581:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(11280),t)},36502:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},67427:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},84577:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},27897:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentViewerEvent=void 0,(t.ComponentViewerEvent||(t.ComponentViewerEvent={})).FeatureStatusUpdated="FeatureStatusUpdated"},44346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},67463:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardModifier=void 0,(r=t.KeyboardModifier||(t.KeyboardModifier={})).Shift="Shift",r.Ctrl="Control",r.Meta="Meta"},92590:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},52795:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},23767:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FillItemContentSpecialized=t.FillItemContent=void 0;const n=r(96720),i=r(47759);function o(e){return e.references||(e.references=[]),e.appData||(e.appData={[n.DefaultAppDomain]:{}}),e.appData[n.DefaultAppDomain]||(e.appData[n.DefaultAppDomain]={}),e.appData[n.DefaultAppDomain][i.AppDataField.UserModifiedDate]||(e.appData[n.DefaultAppDomain][i.AppDataField.UserModifiedDate]="".concat(new Date)),e}t.FillItemContent=o,t.FillItemContentSpecialized=function(e){return o(e)}},859:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},85206:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76422:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1341:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createComponentCreatedContextPayload=void 0,t.createComponentCreatedContextPayload=function(e){return{content_type:e.content_type,content:e.content,created_at:e.created_at,deleted:!1,uuid:e.uuid}}},22369:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateComponentRetrievedContextPayload=void 0,t.CreateComponentRetrievedContextPayload=function(e){return{content_type:e.content_type,content:e.content,created_at:e.created_at,deleted:!1,uuid:e.uuid}}},29029:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8656:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRemotePayloadAllowed=t.FilterDisallowedRemotePayloadsAndMap=t.CreateFilteredServerItem=void 0;const n=r(82818);function i(e){return Object.assign(Object.assign({},e),{__passed_filter__:!0})}function o(e){return!(0,n.isCorruptTransferPayload)(e)&&((0,n.isEncryptedTransferPayload)(e)||null==e.content)}t.CreateFilteredServerItem=i,t.FilterDisallowedRemotePayloadsAndMap=function(e){return e.filter(o).map(i)},t.isRemotePayloadAllowed=o},16462:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateDecryptedBackupFileContextPayload=t.CreateEncryptedBackupFileContextPayload=void 0,t.CreateEncryptedBackupFileContextPayload=function(e){return{auth_hash:e.auth_hash,content_type:e.content_type,content:e.content,created_at_timestamp:e.created_at_timestamp,created_at:e.created_at,deleted:!1,duplicate_of:e.duplicate_of,enc_item_key:e.enc_item_key,items_key_id:e.items_key_id,updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid}},t.CreateDecryptedBackupFileContextPayload=function(e){return{content_type:e.content_type,content:e.content,created_at_timestamp:e.created_at_timestamp,created_at:e.created_at,deleted:!1,duplicate_of:e.duplicate_of,updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid}}},49942:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateDeletedLocalStorageContextPayload=t.CreateDecryptedLocalStorageContextPayload=t.CreateEncryptedLocalStorageContextPayload=t.isEncryptedLocalStoragePayload=void 0;const n=r(64657),i=r(82818);t.isEncryptedLocalStoragePayload=function(e){return(0,i.isEncryptedTransferPayload)(e)},t.CreateEncryptedLocalStorageContextPayload=function(e){return{auth_hash:e.auth_hash,content_type:e.content_type,content:e.content,created_at_timestamp:e.created_at_timestamp,created_at:e.created_at,deleted:!1,dirty:null!=e.dirty&&e.dirty,duplicate_of:e.duplicate_of,enc_item_key:e.enc_item_key,errorDecrypting:e.errorDecrypting,items_key_id:e.items_key_id,updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid,waitingForKey:e.waitingForKey}},t.CreateDecryptedLocalStorageContextPayload=function(e){return{content_type:e.content_type,content:e.content,created_at_timestamp:e.created_at_timestamp,created_at:e.created_at,deleted:!1,duplicate_of:e.duplicate_of,updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid,dirty:(0,n.useBoolean)(e.dirty,!1)}},t.CreateDeletedLocalStorageContextPayload=function(e){return{content_type:e.content_type,content:void 0,created_at_timestamp:e.created_at_timestamp,created_at:e.created_at,deleted:!0,dirty:!0,duplicate_of:e.duplicate_of,updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid}}},15559:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateOfflineSyncPushContextPayload=void 0;const n=r(18667);t.CreateOfflineSyncPushContextPayload=function(e){const t={content:void 0,content_type:e.content_type,created_at_timestamp:e.created_at_timestamp,created_at:e.created_at,deleted:!1,duplicate_of:e.duplicate_of,updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid};return(0,n.isDecryptedPayload)(e)?Object.assign(Object.assign({},t),{content:e.content}):Object.assign(Object.assign({},t),{deleted:e.deleted})}},53186:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateOfflineSyncSavedPayload=void 0;const n=r(18667);t.CreateOfflineSyncSavedPayload=function(e){return{content_type:e.content_type,created_at_timestamp:e.created_at_timestamp,deleted:(0,n.isDeletedPayload)(e),updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid}}},53771:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateDeletedServerSyncPushPayload=t.CreateEncryptedServerSyncPushPayload=void 0,t.CreateEncryptedServerSyncPushPayload=function(e){return{content_type:e.content_type,created_at_timestamp:e.created_at_timestamp,created_at:e.created_at,deleted:!1,duplicate_of:e.duplicate_of,updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid,content:e.content,enc_item_key:e.enc_item_key,items_key_id:e.items_key_id,auth_hash:e.auth_hash}},t.CreateDeletedServerSyncPushPayload=function(e){return{content_type:e.content_type,created_at_timestamp:e.created_at_timestamp,created_at:e.created_at,deleted:!0,duplicate_of:e.duplicate_of,updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid,content:void 0}}},81479:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateServerSyncSavedPayload=void 0;const n=r(64657);t.CreateServerSyncSavedPayload=function(e){return{content_type:e.content_type,created_at_timestamp:e.created_at_timestamp,created_at:e.created_at,deleted:(0,n.useBoolean)(e.deleted,!1),updated_at_timestamp:e.updated_at_timestamp,updated_at:e.updated_at,uuid:e.uuid}}},84656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},59867:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecryptedItem=void 0;const n=r(64657),i=r(47759),o=r(96720),a=r(92445),s=r(9600);class c extends a.GenericItem{constructor(e){super(e),this.protected=!1,this.trashed=!1,this.pinned=!1,this.archived=!1,this.locked=!1,this.starred=!1;const t=this.getAppDomainValueWithDefault(i.AppDataField.UserModifiedDate,this.serverUpdatedAt||0);this.userModifiedDate=new Date(t),this.conflictOf=e.content.conflict_of,this.updatedAtString=(0,n.dateToLocalizedString)(this.userModifiedDate),this.protected=(0,n.useBoolean)(this.payload.content.protected,!1),this.trashed=(0,n.useBoolean)(this.payload.content.trashed,!1),this.starred=(0,n.useBoolean)(this.payload.content.starred,!1),this.pinned=this.getAppDomainValueWithDefault(i.AppDataField.Pinned,!1),this.archived=this.getAppDomainValueWithDefault(i.AppDataField.Archived,!1),this.locked=this.getAppDomainValueWithDefault(i.AppDataField.Locked,!1)}static DefaultAppDomain(){return o.DefaultAppDomain}get content(){return this.payload.content}get references(){return this.payload.content.references||[]}isReferencingItem(e){return null!=this.references.find((t=>t.uuid===e.uuid))}getDomainData(e){const t=this.payload.content.appData;if(t)return t[e]}getAppDomainValue(e){const t=this.getDomainData(o.DefaultAppDomain);return null==t?void 0:t[e]}getAppDomainValueWithDefault(e,t){const r=this.getDomainData(o.DefaultAppDomain);return(null==r?void 0:r[e])||t}payloadRepresentation(e){return this.payload.copy(e)}contentKeysToIgnoreWhenCheckingEquality(){return["conflict_of"]}appDataContentKeysToIgnoreWhenCheckingEquality(){return[i.AppDataField.UserModifiedDate]}getContentCopy(){return JSON.parse(JSON.stringify(this.content))}isItemContentEqualWith(e){return(0,s.ItemContentsEqual)(this.payload.content,e.payload.content,this.contentKeysToIgnoreWhenCheckingEquality(),this.appDataContentKeysToIgnoreWhenCheckingEquality())}}t.DecryptedItem=c},89691:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeletedItem=void 0;const n=r(92445);class i extends n.GenericItem{constructor(e){super(e),this.deleted=!0}payloadRepresentation(e){return this.payload.copy(e)}}t.DeletedItem=i},68728:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptedItem=void 0;const n=r(92445);class i extends n.GenericItem{constructor(e){super(e)}get version(){return this.payload.version}payloadRepresentation(e){return this.payload.copy(e)}get errorDecrypting(){return this.payload.errorDecrypting}get waitingForKey(){return this.payload.waitingForKey}get content(){return this.payload.content}get auth_hash(){return this.payload.auth_hash}}t.EncryptedItem=i},92445:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericItem=void 0;const n=r(64657),i=r(69002),o=r(50417),a=r(25569),s=r(18472),c=r(99562);t.GenericItem=class{constructor(e){this.payload=e,this.duplicateOf=e.duplicate_of,this.createdAtString=this.created_at&&(0,n.dateToLocalizedString)(this.created_at),this.userModifiedDate=this.serverUpdatedAt||new Date,this.updatedAtString=(0,n.dateToLocalizedString)(this.userModifiedDate),setTimeout((()=>{(0,n.deepFreeze)(this)}),0)}get uuid(){return this.payload.uuid}get content_type(){return this.payload.content_type}get created_at(){return this.payload.created_at}get serverUpdatedAt(){return this.payload.serverUpdatedAt}get serverUpdatedAtTimestamp(){return this.payload.updated_at_timestamp}get updated_at(){return this.serverUpdatedAt}get dirty(){return this.payload.dirty}get lastSyncBegan(){return this.payload.lastSyncBegan}get lastSyncEnd(){return this.payload.lastSyncEnd}get duplicate_of(){return this.payload.duplicate_of}payloadRepresentation(e){return this.payload.copy(e)}get neverSynced(){return!this.serverUpdatedAt||0===this.serverUpdatedAt.getTime()}get isSingleton(){return!1}singletonPredicate(){throw"Must override SNItem.singletonPredicate"}get singletonStrategy(){return s.SingletonStrategy.KeepEarliest}strategyWhenConflictingWithItem(e,t){if((0,c.isEncryptedErroredItem)(this))return a.ConflictStrategy.KeepBaseDuplicateApply;if(this.isSingleton)return a.ConflictStrategy.KeepBase;if((0,c.isDeletedItem)(this))return a.ConflictStrategy.KeepApply;if((0,c.isDeletedItem)(e))return this.payload.source===o.PayloadSource.FileImport?a.ConflictStrategy.KeepBase:a.ConflictStrategy.KeepApply;if(!(0,c.isDecryptedItem)(e)||!(0,c.isDecryptedItem)(this))return a.ConflictStrategy.KeepBaseDuplicateApply;if(!(0,i.ItemContentsDiffer)(this,e))return a.ConflictStrategy.KeepApply;if((0,i.ItemContentsDiffer)(this,e,["references"])){if(t&&!(0,i.ItemContentsDiffer)(t.itemFromPayload(),e))return a.ConflictStrategy.KeepBase;const r=2e4;return e.payload.source===o.PayloadSource.FileImport||Date.now()-this.userModifiedDate.getTime()<r?a.ConflictStrategy.KeepBaseDuplicateApply:a.ConflictStrategy.DuplicateBaseKeepApply}return a.ConflictStrategy.KeepBaseMergeRefs}satisfiesPredicate(e){return e.matchesItem(this)}}},25218:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},83811:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9529:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},89051:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},99562:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isEncryptedErroredItem=t.isDecryptedOrDeletedItem=t.isDeletedItem=t.isNotEncryptedItem=t.isEncryptedItem=t.isDecryptedItem=void 0;const n=r(98890);function i(e){return(0,n.isDecryptedPayload)(e.payload)}function o(e){return(0,n.isEncryptedPayload)(e.payload)}function a(e){return(0,n.isDeletedPayload)(e.payload)}t.isDecryptedItem=i,t.isEncryptedItem=o,t.isNotEncryptedItem=function(e){return!o(e)},t.isDeletedItem=a,t.isDecryptedOrDeletedItem=function(e){return i(e)||a(e)},t.isEncryptedErroredItem=function(e){return o(e)&&!0===e.errorDecrypting}},66276:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecryptedItemMutator=void 0;const n=r(64657),i=r(65617),o=r(47759),a=r(96720),s=r(14606),c=r(6754);class l extends s.ItemMutator{constructor(e,t){super(e,t);const r=(0,n.Copy)(this.immutablePayload.content);this.mutableContent=r}getResult(){return this.type===i.MutationType.NonDirtying?this.immutablePayload.copy({content:this.mutableContent}):(this.type===i.MutationType.UpdateUserTimestamps?this.userModifiedDate=new Date:this.immutableItem.userModifiedDate||(this.userModifiedDate=new Date(this.immutableItem.serverUpdatedAt)),this.immutablePayload.copy({content:this.mutableContent,dirty:!0,dirtyIndex:(0,c.getIncrementedDirtyIndex)()}))}setBeginSync(e,t){this.immutablePayload=this.immutablePayload.copy({content:this.mutableContent,lastSyncBegan:e,globalDirtyIndexAtLastSync:t})}setCustomContent(e){this.mutableContent=(0,n.Copy)(e)}set userModifiedDate(e){this.setAppDataItem(o.AppDataField.UserModifiedDate,e)}set conflictOf(e){this.mutableContent.conflict_of=e}set protected(e){this.mutableContent.protected=e}set trashed(e){this.mutableContent.trashed=e}set starred(e){this.mutableContent.starred=e}set pinned(e){this.setAppDataItem(o.AppDataField.Pinned,e)}set archived(e){this.setAppDataItem(o.AppDataField.Archived,e)}set locked(e){this.setAppDataItem(o.AppDataField.Locked,e)}setDomainData(e,t){this.mutableContent.appData||(this.mutableContent.appData={[a.DefaultAppDomain]:{}}),this.mutableContent.appData[t]=e}setDomainDataKey(e,t,r){this.mutableContent.appData||(this.mutableContent.appData={[a.DefaultAppDomain]:{}}),this.mutableContent.appData[r]||(this.mutableContent.appData[r]={}),this.mutableContent.appData[r][e]=t}setAppDataItem(e,t){this.setDomainDataKey(e,t,a.DefaultAppDomain)}e2ePendingRefactor_addItemAsRelationship(e){const t=this.mutableContent.references||[];t.find((t=>t.uuid===e.uuid))||t.push({uuid:e.uuid,content_type:e.content_type}),this.mutableContent.references=t}removeItemAsRelationship(e){let t=this.mutableContent.references||[];t=t.filter((t=>t.uuid!==e.uuid)),this.mutableContent.references=t}}t.DecryptedItemMutator=l},5378:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteItemMutator=void 0;const n=r(63188),i=r(14606),o=r(65617),a=r(6754);class s extends i.ItemMutator{getDeletedResult(){const e=this.type!==o.MutationType.NonDirtying;return new n.DeletedPayload(Object.assign(Object.assign({},this.immutablePayload.ejected()),{deleted:!0,content:void 0,dirty:!!e||this.immutablePayload.dirty,dirtyIndex:e?(0,a.getIncrementedDirtyIndex)():this.immutablePayload.dirtyIndex}),this.immutablePayload.source)}getResult(){throw Error("Must use getDeletedResult")}}t.DeleteItemMutator=s},14606:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemMutator=void 0;const n=r(65617),i=r(6754);t.ItemMutator=class{constructor(e,t){this.immutableItem=e,this.type=t,this.immutablePayload=e.payload}getUuid(){return this.immutablePayload.uuid}getItem(){return this.immutableItem}getResult(){return this.type===n.MutationType.NonDirtying?this.immutablePayload.copy():this.immutablePayload.copy({dirty:!0,dirtyIndex:(0,i.getIncrementedDirtyIndex)()})}setBeginSync(e,t){this.immutablePayload=this.immutablePayload.copy({lastSyncBegan:e,globalDirtyIndexAtLastSync:t})}set errorDecrypting(e){throw Error("This method is no longer implemented")}set updated_at(e){throw Error("This method is no longer implemented")}set updated_at_timestamp(e){throw Error("This method is no longer implemented")}}},51533:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},47759:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AppDataField=void 0,(r=t.AppDataField||(t.AppDataField={})).Pinned="pinned",r.Archived="archived",r.Locked="locked",r.UserModifiedDate="client_updated_at",r.DefaultEditor="defaultEditor",r.MobileRules="mobileRules",r.NotAvailableOnMobile="notAvailableOnMobile",r.MobileActive="mobileActive",r.LastSize="lastSize",r.LegacyPrefersPlainEditor="prefersPlainEditor",r.ComponentInstallError="installError"},25569:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConflictStrategy=void 0,(r=t.ConflictStrategy||(t.ConflictStrategy={}))[r.KeepBase=1]="KeepBase",r[r.KeepApply=2]="KeepApply",r[r.KeepBaseDuplicateApply=3]="KeepBaseDuplicateApply",r[r.DuplicateBaseKeepApply=4]="DuplicateBaseKeepApply",r[r.KeepBaseMergeRefs=5]="KeepBaseMergeRefs"},96720:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentDataDomain=t.DefaultAppDomain=void 0,t.DefaultAppDomain="org.standardnotes.sn",t.ComponentDataDomain="org.standardnotes.sn.components"},25032:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},89015:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},65617:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MutationType=void 0,(r=t.MutationType||(t.MutationType={}))[r.UpdateUserTimestamps=1]="UpdateUserTimestamps",r[r.NoUpdateUserTimestamps=2]="NoUpdateUserTimestamps",r[r.NonDirtying=3]="NonDirtying"},18472:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SingletonStrategy=void 0,(r=t.SingletonStrategy||(t.SingletonStrategy={}))[r.KeepEarliest=1]="KeepEarliest"},12922:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(61335),t),i(r(21984),t),i(r(22386),t),i(r(15744),t),i(r(43239),t),i(r(7893),t),i(r(19755),t),i(r(22104),t),i(r(67189),t),i(r(59867),t),i(r(59867),t),i(r(89691),t),i(r(68728),t),i(r(92445),t),i(r(25218),t),i(r(83811),t),i(r(9529),t),i(r(89051),t),i(r(99562),t),i(r(66276),t),i(r(5378),t),i(r(14606),t),i(r(51533),t),i(r(47759),t),i(r(25569),t),i(r(96720),t),i(r(25032),t),i(r(89015),t),i(r(65617),t),i(r(18472),t)},38111:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecryptedPayload=void 0;const n=r(64657),i=r(23767),o=r(50417),a=r(19332);class s extends a.PurePayload{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.PayloadSource.Constructor),this.content=(0,n.Copy)((0,i.FillItemContent)(e.content)),this.deleted=!1}get references(){return this.content.references||[]}getReference(e){const t=this.references.find((t=>t.uuid===e));if(!t)throw new Error("Reference not found");return t}ejected(){return Object.assign(Object.assign({},super.ejected()),{content:this.content,deleted:this.deleted})}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.source;return new s(Object.assign(Object.assign({},this.ejected()),e),t)}copyAsSyncResolved(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.source;return new s(Object.assign(Object.assign({},this.ejected()),e),t)}}t.DecryptedPayload=s},63188:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeletedPayload=void 0;const n=r(50417),i=r(19332);class o extends i.PurePayload{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.PayloadSource.Constructor),this.deleted=!0,this.content=void 0}get discardable(){return!this.dirty}ejected(){return Object.assign(Object.assign({},super.ejected()),{deleted:this.deleted,content:void 0})}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.source;return new o(Object.assign(Object.assign({},this.ejected()),e),t)}copyAsSyncResolved(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.source;return new o(Object.assign(Object.assign({},this.ejected()),e),t)}}t.DeletedPayload=o},50987:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptedPayload=void 0;const n=r(10256),i=r(50417),o=r(19332);class a extends o.PurePayload{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.PayloadSource.Constructor),this.auth_hash=e.auth_hash,this.content=e.content,this.deleted=!1,this.enc_item_key=e.enc_item_key,this.errorDecrypting=e.errorDecrypting,this.items_key_id=e.items_key_id,this.version=(0,n.protocolVersionFromEncryptedString)(this.content),this.waitingForKey=e.waitingForKey}ejected(){return Object.assign(Object.assign({},super.ejected()),{enc_item_key:this.enc_item_key,items_key_id:this.items_key_id,auth_hash:this.auth_hash,errorDecrypting:this.errorDecrypting,waitingForKey:this.waitingForKey,content:this.content,deleted:this.deleted})}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.source;return new a(Object.assign(Object.assign({},this.ejected()),e),t)}copyAsSyncResolved(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.source;return new a(Object.assign(Object.assign({},this.ejected()),e),t)}}t.EncryptedPayload=a},19332:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PurePayload=void 0;const n=r(64657),i=r(50417);t.PurePayload=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.PayloadSource.Constructor;if(this.source=t,this.uuid=e.uuid,!this.uuid)throw Error("Attempting to construct payload with null uuid\n        Content type: ".concat(e.content_type));this.content=e.content,this.content_type=e.content_type,this.deleted=(0,n.useBoolean)(e.deleted,!1),this.dirty=e.dirty,this.duplicate_of=e.duplicate_of,this.created_at=new Date(e.created_at||new Date),this.updated_at=new Date(e.updated_at||0),this.created_at_timestamp=e.created_at_timestamp||0,this.updated_at_timestamp=e.updated_at_timestamp||0,this.lastSyncBegan=e.lastSyncBegan?new Date(e.lastSyncBegan):void 0,this.lastSyncEnd=e.lastSyncEnd?new Date(e.lastSyncEnd):void 0,this.dirtyIndex=e.dirtyIndex,this.globalDirtyIndexAtLastSync=e.globalDirtyIndexAtLastSync,setTimeout((()=>{(0,n.deepFreeze)(this)}),0)}ejected(){return{uuid:this.uuid,content:this.content,deleted:this.deleted,content_type:this.content_type,created_at:this.created_at,updated_at:this.updated_at,created_at_timestamp:this.created_at_timestamp,updated_at_timestamp:this.updated_at_timestamp,dirty:this.dirty,duplicate_of:this.duplicate_of,dirtyIndex:this.dirtyIndex,globalDirtyIndexAtLastSync:this.globalDirtyIndexAtLastSync,lastSyncBegan:this.lastSyncBegan,lastSyncEnd:this.lastSyncEnd}}get serverUpdatedAt(){return this.updated_at}get serverUpdatedAtTimestamp(){return this.updated_at_timestamp}}},60196:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},95619:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},81560:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},61481:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},98890:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorDecryptingPayload=t.isDeletedPayload=t.isEncryptedPayload=t.isDecryptedPayload=void 0;const n=r(82818);t.isDecryptedPayload=function(e){return(0,n.isDecryptedTransferPayload)(e)},t.isEncryptedPayload=function(e){return(0,n.isEncryptedTransferPayload)(e)},t.isDeletedPayload=function(e){return(0,n.isDeletedTransferPayload)(e)},t.isErrorDecryptingPayload=function(e){return(0,n.isErrorDecryptingTransferPayload)(e)}},50339:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},26949:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.isPayloadSourceRetrieved=t.isPayloadSourceInternalChange=t.PayloadEmitSource=void 0,function(e){e[e.InitialObserverRegistrationPush=1]="InitialObserverRegistrationPush",e[e.LocalChanged=2]="LocalChanged",e[e.LocalInserted=3]="LocalInserted",e[e.LocalDatabaseLoaded=4]="LocalDatabaseLoaded",e[e.OfflineSyncSaved=5]="OfflineSyncSaved",e[e.LocalRetrieved=6]="LocalRetrieved",e[e.FileImport=7]="FileImport",e[e.ComponentRetrieved=8]="ComponentRetrieved",e[e.ComponentCreated=9]="ComponentCreated",e[e.PreSyncSave=10]="PreSyncSave",e[e.RemoteRetrieved=11]="RemoteRetrieved",e[e.RemoteSaved=12]="RemoteSaved"}(r=t.PayloadEmitSource||(t.PayloadEmitSource={})),t.isPayloadSourceInternalChange=function(e){return[r.RemoteSaved,r.PreSyncSave].includes(e)},t.isPayloadSourceRetrieved=function(e){return[r.RemoteRetrieved,r.ComponentRetrieved].includes(e)}},50417:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadSource=void 0,(r=t.PayloadSource||(t.PayloadSource={}))[r.Constructor=1]="Constructor",r[r.RemoteRetrieved=2]="RemoteRetrieved",r[r.RemoteSaved=3]="RemoteSaved",r[r.FileImport=4]="FileImport"},41935:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadTimestampDefaults=void 0,t.PayloadTimestampDefaults=function(){return{updated_at:new Date(0),created_at:new Date,updated_at_timestamp:0,created_at_timestamp:0}}},18667:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(19332),t),i(r(38111),t),i(r(50987),t),i(r(63188),t),i(r(60196),t),i(r(95619),t),i(r(81560),t),i(r(61481),t),i(r(98890),t),i(r(50339),t),i(r(50417),t),i(r(26949),t),i(r(41935),t)},61335:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},22386:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},21984:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ContentReferenceType=void 0,(r=t.ContentReferenceType||(t.ContentReferenceType={})).TagToParentTag="TagToParentTag",r.TagToFile="TagToFile",r.FileToNote="FileToNote",r.FileToFile="FileToFile",r.NoteToNote="NoteToNote"},15744:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},43239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTagToParentTagReference=t.isLegacyTagToNoteReference=t.isReference=t.isLegacyAnonymousReference=void 0;const n=r(10256),i=r(21984);t.isLegacyAnonymousReference=e=>void 0===e.reference_type,t.isReference=e=>void 0!==e.reference_type,t.isLegacyTagToNoteReference=(e,t)=>{const r=e.content_type===n.ContentType.Note,i=t.content_type===n.ContentType.Tag;return r&&i},t.isTagToParentTagReference=e=>(0,t.isReference)(e)&&e.reference_type===i.ContentReferenceType.TagToParentTag},7893:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},19755:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},22104:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},67189:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},47073:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},28284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},63726:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5474:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},57039:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCorruptTransferPayload=t.isDeletedTransferPayload=t.isErrorDecryptingTransferPayload=t.isEncryptedTransferPayload=t.isDecryptedTransferPayload=void 0;const n=r(64657);function i(e){return"content"in e&&(0,n.isString)(e.content)}t.isDecryptedTransferPayload=function(e){return(0,n.isObject)(e.content)},t.isEncryptedTransferPayload=i,t.isErrorDecryptingTransferPayload=function(e){return i(e)&&!0===e.errorDecrypting},t.isDeletedTransferPayload=function(e){return"deleted"in e&&!0===e.deleted},t.isCorruptTransferPayload=function(e){const t=!0===e.deleted&&null!=e.content;return null==e.uuid||t}},82818:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(47073),t),i(r(28284),t),i(r(63726),t),i(r(5474),t),i(r(57039),t)},63835:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},80625:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InvitationStatus=void 0,(r=t.InvitationStatus||(t.InvitationStatus={})).Sent="sent",r.Canceled="canceled",r.Accepted="accepted",r.Declined="declined"},33132:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InviteeIdentifierType=void 0,(r=t.InviteeIdentifierType||(t.InviteeIdentifierType={})).Email="email",r.Hash="hash",r.Uuid="uuid"},14668:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InviterIdentifierType=void 0,(r=t.InviterIdentifierType||(t.InviterIdentifierType={})).Email="email",r.Uuid="uuid"},51252:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},28585:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6689:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Environment=void 0,(r=t.Environment||(t.Environment={}))[r.Web=1]="Web",r[r.Desktop=2]="Desktop",r[r.Mobile=3]="Mobile"},89320:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0,(r=t.Platform||(t.Platform={}))[r.Ios=1]="Ios",r[r.Android=2]="Android",r[r.MacWeb=3]="MacWeb",r[r.MacDesktop=4]="MacDesktop",r[r.WindowsWeb=5]="WindowsWeb",r[r.WindowsDesktop=6]="WindowsDesktop",r[r.LinuxWeb=7]="LinuxWeb",r[r.LinuxDesktop=8]="LinuxDesktop"},88324:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},95099:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},30969:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},28001:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},52659:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Collection=void 0;const n=r(64657),i=r(31773);t.Collection=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;this.map={},this.typedMap={},this.dirtyIndex=new Set,this.nondeletedIndex=new Set,this.invalidsIndex=new Set,this.isDecryptedElement=e=>(0,n.isObject)(e.content),this.isEncryptedElement=e=>"content"in e&&(0,n.isString)(e.content),this.isErrorDecryptingElement=e=>this.isEncryptedElement(e)&&!0===e.errorDecrypting,this.isDeletedElement=e=>"deleted"in e&&!0===e.deleted,this.isNonDeletedElement=e=>!this.isDeletedElement(e),e?(this.map=t,this.typedMap=r,this.referenceMap=i,this.conflictMap=o):(this.referenceMap=new n.UuidMap,this.conflictMap=new n.UuidMap)}uuids(){return Object.keys(this.map)}all(e){var t;if(e){if(Array.isArray(e)){const t=[];for(const r of e)(0,n.extendArray)(t,this.typedMap[r]||[]);return t}return(null===(t=this.typedMap[e])||void 0===t?void 0:t.slice())||[]}return Object.keys(this.map).map((e=>this.map[e]))}nondeletedElements(){const e=Array.from(this.nondeletedIndex);return this.findAll(e).filter(this.isNonDeletedElement)}invalidElements(){const e=Array.from(this.invalidsIndex);return this.findAll(e)}dirtyElements(){const e=Array.from(this.dirtyIndex);return this.findAll(e)}findAll(e){const t=[];for(const r of e){const e=this.map[r];e&&t.push(e)}return t}find(e){return this.map[e]}has(e){return null!=this.find(e)}findAllIncludingBlanks(e){const t=[];for(const r of e){const e=this.map[r];t.push(e)}return t}set(e){if(0!==(e=Array.isArray(e)?e:[e]).length)for(const t of e){if(this.map[t.uuid]=t,this.setToTypedMap(t),this.isErrorDecryptingElement(t)?this.invalidsIndex.add(t.uuid):this.invalidsIndex.delete(t.uuid),this.isDecryptedElement(t)){const e=t.content.conflict_of;e&&this.conflictMap.establishRelationship(e,t.uuid),this.referenceMap.setAllRelationships(t.uuid,t.references.map((e=>e.uuid)))}t.dirty?this.dirtyIndex.add(t.uuid):this.dirtyIndex.delete(t.uuid),t.deleted?this.nondeletedIndex.delete(t.uuid):this.nondeletedIndex.add(t.uuid)}else console.warn("Attempting to set 0 elements onto collection")}discard(e){e=Array.isArray(e)?e:[e];for(const t of e)this.deleteFromTypedMap(t),delete this.map[t.uuid],this.conflictMap.removeFromMap(t.uuid),this.referenceMap.removeFromMap(t.uuid)}uuidReferencesForUuid(e){return this.referenceMap.getDirectRelationships(e)}uuidsThatReferenceUuid(e){return this.referenceMap.getInverseRelationships(e)}referencesForElement(e){const t=this.referenceMap.getDirectRelationships(e.uuid);return this.findAll(t)}conflictsOf(e){const t=this.conflictMap.getDirectRelationships(e);return this.findAll(t)}elementsReferencingElement(e,t){const r=this.uuidsThatReferenceUuid(e.uuid),n=this.findAll(r);return t?n.filter((e=>e.content_type===t)):n}setToTypedMap(e){const t=this.typedMap[e.content_type]||[];(0,i.remove)(t,{uuid:e.uuid}),t.push(e),this.typedMap[e.content_type]=t}deleteFromTypedMap(e){const t=this.typedMap[e.content_type]||[];(0,i.remove)(t,{uuid:e.uuid}),this.typedMap[e.content_type]=t}}},74520:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionSort=void 0,t.CollectionSort={CreatedAt:"created_at",UpdatedAt:"userModifiedDate",Title:"title"}},12714:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemCollection=void 0;const n=r(99562),i=r(52659);class o extends i.Collection{onChange(e){const t=e.changed.concat(e.inserted);t.length>0&&this.set(t),this.discard(e.discarded)}findDecrypted(e){const t=this.find(e);if(t)return(0,n.isDecryptedItem)(t)?t:void 0}findAllDecrypted(e){return this.findAll(e).filter(n.isDecryptedItem)}findAllDecryptedWithBlanks(e){return this.findAllIncludingBlanks(e).map((e=>{if(null==e||(0,n.isDecryptedItem)(e))return e}))}allDecrypted(e){return this.all(e).filter(n.isDecryptedItem)}}t.ItemCollection=o},6311:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TagItemsIndex=void 0;const n=r(64657),i=r(10256),o=r(72897),a=r(12922);t.TagItemsIndex=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.collection=e,this.observers=t,this.tagToItemsMap={},this.allCountableItems=new Set,this.isItemCountable=e=>!!(0,a.isDecryptedItem)(e)&&!e.archived&&!e.trashed}addCountChangeObserver(e){this.observers.push(e);const t=this.observers;return()=>{(0,n.removeFromArray)(t,e)}}notifyObservers(e){for(const t of this.observers)t(e)}allCountableItemsCount(){return this.allCountableItems.size}countableItemsForTag(e){var t;return(null===(t=this.tagToItemsMap[e.uuid])||void 0===t?void 0:t.size)||0}onChange(e){const t=[...e.changed,...e.inserted,...e.discarded].filter((e=>e.content_type===i.ContentType.Note||e.content_type===i.ContentType.File)),r=[...e.changed,...e.inserted].filter(a.isDecryptedItem).filter(o.isTag);this.receiveItemChanges(t),this.receiveTagChanges(r)}receiveTagChanges(e){for(const t of e){const e=t.references.filter((e=>e.content_type===i.ContentType.Note||e.content_type===i.ContentType.File)).map((e=>e.uuid)).filter((e=>this.allCountableItems.has(e))),r=this.tagToItemsMap[t.uuid];this.tagToItemsMap[t.uuid]=new Set(e),(null==r?void 0:r.size)!==e.length&&this.notifyObservers(t.uuid)}}receiveItemChanges(e){const t=this.allCountableItems.size;for(const t of e){const e=this.isItemCountable(t);e?this.allCountableItems.add(t.uuid):this.allCountableItems.delete(t.uuid);const r=this.collection.uuidsThatReferenceUuid(t.uuid);for(const n of r){const r=this.setForTag(n),i=r.size;e?r.add(t.uuid):r.delete(t.uuid),i!==r.size&&this.notifyObservers(n)}}t!==this.allCountableItems.size&&this.notifyObservers(void 0)}setForTag(e){let t=this.tagToItemsMap[e];return t||(t=new Set,this.tagToItemsMap[e]=t),t}}},35082:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImmutablePayloadCollection=void 0;const n=r(86785);class i extends n.PayloadCollection{get payloads(){return this.all()}static WithPayloads(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new i;return e.length>0&&t.set(e),Object.freeze(t),t}static FromCollection(e){const t=Object.freeze(Object.assign({},e.map)),r=Object.freeze(Object.assign({},e.typedMap)),n=Object.freeze(e.referenceMap.makeCopy()),o=Object.freeze(e.conflictMap.makeCopy()),a=new i(!0,t,r,n,o);return Object.freeze(a),a}mutableCopy(){const e=Object.assign({},this.map),t=Object.assign({},this.typedMap),r=this.referenceMap.makeCopy(),i=this.conflictMap.makeCopy();return new n.PayloadCollection(!0,e,t,r,i)}}t.ImmutablePayloadCollection=i},86785:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadCollection=void 0;const n=r(52659);class i extends n.Collection{integrityPayloads(){return this.nondeletedElements().map((e=>({uuid:e.uuid,updated_at_timestamp:e.serverUpdatedAtTimestamp})))}}t.PayloadCollection=i},40346:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extendSyncDelta=void 0;const n=r(64657);t.extendSyncDelta=function(e,t){(0,n.extendArray)(e.emits,t.emits),t.ignored&&(e.ignored||(e.ignored=[]),(0,n.extendArray)(e.ignored,t.ignored))}},49599:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConflictDelta=void 0;const n=r(64657),i=r(24320),o=r(32405),a=r(25569),s=r(30489),c=r(55687),l=r(98890),u=r(10256),d=r(29998),p=r(6754);t.ConflictDelta=class{constructor(e,t,r,n){this.baseCollection=e,this.basePayload=t,this.applyPayload=r,this.historyMap=n}result(){if(this.applyPayload.content_type===u.ContentType.ItemsKey)return new d.ItemsKeyDelta(this.baseCollection,[this.applyPayload]).result();const e=this.getConflictStrategy();return{emits:this.handleStrategy(e),ignored:[]}}getConflictStrategy(){const e=(0,l.isErrorDecryptingPayload)(this.basePayload),t=(0,l.isErrorDecryptingPayload)(this.applyPayload);if(e||t){if(e&&!t)return a.ConflictStrategy.KeepBaseDuplicateApply;if(!e&&t)return a.ConflictStrategy.DuplicateBaseKeepApply;if(e&&t)return a.ConflictStrategy.KeepApply}else{if((0,l.isDecryptedPayload)(this.basePayload)){const e=this.baseCollection.conflictsOf(this.applyPayload.uuid)[0];if(e&&(0,l.isDecryptedPayload)(e)&&(0,l.isDecryptedPayload)(this.applyPayload)&&(0,c.PayloadContentsEqual)(e,this.applyPayload))return a.ConflictStrategy.KeepBase;{const e=(0,i.CreateDecryptedItemFromPayload)(this.basePayload),t=(0,i.CreateItemFromPayload)(this.applyPayload),r=this.historyMap[this.basePayload.uuid]||[],n=o.historyMapFunctions.getNewestRevision(r);return e.strategyWhenConflictingWithItem(t,n)}}if((0,l.isDeletedPayload)(this.basePayload)||(0,l.isDeletedPayload)(this.applyPayload))return(0,l.isDeletedPayload)(this.basePayload),(0,l.isDeletedPayload)(this.applyPayload),a.ConflictStrategy.KeepApply}throw Error("Unhandled strategy in Conflict Delta getConflictStrategy")}handleStrategy(e){if(e===a.ConflictStrategy.KeepBase)return this.handleKeepBaseStrategy();if(e===a.ConflictStrategy.KeepApply)return this.handleKeepApplyStrategy();if(e===a.ConflictStrategy.KeepBaseDuplicateApply)return this.handleKeepBaseDuplicateApplyStrategy();if(e===a.ConflictStrategy.DuplicateBaseKeepApply)return this.handleDuplicateBaseKeepApply();if(e===a.ConflictStrategy.KeepBaseMergeRefs)return this.handleKeepBaseMergeRefsStrategy();throw Error("Unhandled strategy in conflict delta payloadsByHandlingStrategy")}handleKeepBaseStrategy(){const e=(0,n.greaterOfTwoDates)(this.basePayload.serverUpdatedAt,this.applyPayload.serverUpdatedAt),t=Math.max(this.basePayload.updated_at_timestamp,this.applyPayload.updated_at_timestamp);return[this.basePayload.copyAsSyncResolved({updated_at:e,updated_at_timestamp:t,dirtyIndex:(0,p.getIncrementedDirtyIndex)(),dirty:!0,lastSyncEnd:new Date},this.applyPayload.source)]}handleKeepApplyStrategy(){return[this.applyPayload.copyAsSyncResolved({lastSyncBegan:this.basePayload.lastSyncBegan,lastSyncEnd:new Date,dirty:!1},this.applyPayload.source)]}handleKeepBaseDuplicateApplyStrategy(){const e=(0,n.greaterOfTwoDates)(this.basePayload.serverUpdatedAt,this.applyPayload.serverUpdatedAt),t=Math.max(this.basePayload.updated_at_timestamp,this.applyPayload.updated_at_timestamp),r=this.basePayload.copyAsSyncResolved({updated_at:e,updated_at_timestamp:t,dirty:!0,dirtyIndex:(0,p.getIncrementedDirtyIndex)(),lastSyncEnd:new Date},this.applyPayload.source),i=(0,s.PayloadsByDuplicating)({payload:this.applyPayload,baseCollection:this.baseCollection,isConflict:!0,source:this.applyPayload.source});return[r].concat(i)}handleDuplicateBaseKeepApply(){const e=(0,s.PayloadsByDuplicating)({payload:this.basePayload,baseCollection:this.baseCollection,isConflict:!0,source:this.applyPayload.source}),t=this.applyPayload.copyAsSyncResolved({lastSyncBegan:this.basePayload.lastSyncBegan,dirty:!1,lastSyncEnd:new Date},this.applyPayload.source);return e.concat([t])}handleKeepBaseMergeRefsStrategy(){if(!(0,l.isDecryptedPayload)(this.basePayload)||!(0,l.isDecryptedPayload)(this.applyPayload))return[];const e=(0,n.uniqCombineObjArrays)(this.basePayload.content.references,this.applyPayload.content.references,["uuid","content_type"]),t=(0,n.greaterOfTwoDates)(this.basePayload.serverUpdatedAt,this.applyPayload.serverUpdatedAt),r=Math.max(this.basePayload.updated_at_timestamp,this.applyPayload.updated_at_timestamp);return[this.basePayload.copyAsSyncResolved({updated_at:t,updated_at_timestamp:r,dirty:!0,dirtyIndex:(0,p.getIncrementedDirtyIndex)(),lastSyncEnd:new Date,content:Object.assign(Object.assign({},this.basePayload.content),{references:e})},this.applyPayload.source)]}}},19143:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaFileImport=void 0;const n=r(49599),i=r(18667),o=r(40346),a=r(6754);t.DeltaFileImport=class{constructor(e,t,r){this.baseCollection=e,this.applyPayloads=t,this.historyMap=r}result(){const e={emits:[],ignored:[],source:i.PayloadEmitSource.FileImport};for(const t of this.applyPayloads){const r=this.resolvePayload(t,e);(0,o.extendSyncDelta)(e,r)}return e}resolvePayload(e,t){let r=t.emits.find((t=>(0,i.isDecryptedPayload)(t)&&t.content.conflict_of===e.uuid));if(r||(r=t.emits.find((t=>t.uuid===e.uuid))),!r){const t=this.baseCollection.find(e.uuid);t&&(0,i.isDecryptedPayload)(t)&&(r=t)}return r?new n.ConflictDelta(this.baseCollection,r,e,this.historyMap).result():{emits:[e.copyAsSyncResolved({dirty:!0,dirtyIndex:(0,a.getIncrementedDirtyIndex)(),lastSyncEnd:new Date(0)})],ignored:[]}}}},29998:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemsKeyDelta=void 0;const n=r(18667),i=r(14939);t.ItemsKeyDelta=class{constructor(e,t){this.baseCollection=e,this.applyPayloads=t}result(){const e=[],t=[];for(const r of this.applyPayloads){const o=this.baseCollection.find(r.uuid);if(o)if((0,n.isEncryptedPayload)(r)&&(0,n.isDecryptedPayload)(o)){const n=o.copyAsSyncResolved({updated_at_timestamp:r.updated_at_timestamp,updated_at:r.updated_at,dirty:!1,lastSyncEnd:new Date});e.push(n),t.push(r)}else e.push((0,i.payloadByFinalizingSyncState)(r,this.baseCollection));else e.push((0,i.payloadByFinalizingSyncState)(r,this.baseCollection))}return{emits:e,ignored:t}}}},65310:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaOfflineSaved=void 0;const n=r(18667),i=r(14939);t.DeltaOfflineSaved=class{constructor(e,t){this.baseCollection=e,this.applyContextualPayloads=t}result(){const e=[];for(const t of this.applyContextualPayloads){const r=this.baseCollection.find(t.uuid);r&&e.push((0,i.payloadByFinalizingSyncState)(r,this.baseCollection))}return{emits:e,source:n.PayloadEmitSource.OfflineSyncSaved}}}},79873:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaOutOfSync=void 0;const n=r(18667),i=r(98890),o=r(55687),a=r(49599),s=r(10256),c=r(29998),l=r(14939),u=r(40346);t.DeltaOutOfSync=class{constructor(e,t,r){this.baseCollection=e,this.applyCollection=t,this.historyMap=r}result(){const e={emits:[],ignored:[],source:n.PayloadEmitSource.RemoteRetrieved};for(const t of this.applyCollection.all()){if(t.content_type===s.ContentType.ItemsKey){const r=new c.ItemsKeyDelta(this.baseCollection,[t]).result();(0,u.extendSyncDelta)(e,r);continue}const r=this.baseCollection.find(t.uuid);if(!r){e.emits.push((0,l.payloadByFinalizingSyncState)(t,this.baseCollection));continue}const n=(0,i.isDecryptedPayload)(r),d=(0,i.isDecryptedPayload)(t);if(d!==n||d&&n&&!(0,o.PayloadContentsEqual)(t,r)){const n=new a.ConflictDelta(this.baseCollection,r,t,this.historyMap);(0,u.extendSyncDelta)(e,n.result())}else e.emits.push((0,l.payloadByFinalizingSyncState)(t,this.baseCollection))}return e}}},89191:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaRemoteDataConflicts=void 0;const n=r(49599),i=r(18667),o=r(40346),a=r(14939);t.DeltaRemoteDataConflicts=class{constructor(e,t,r){this.baseCollection=e,this.applyCollection=t,this.historyMap=r}result(){const e={emits:[],ignored:[],source:i.PayloadEmitSource.RemoteRetrieved};for(const t of this.applyCollection.all()){const r=this.baseCollection.find(t.uuid);if(null==r){e.emits.push((0,a.payloadByFinalizingSyncState)(t,this.baseCollection));continue}const i=new n.ConflictDelta(this.baseCollection,r,t,this.historyMap);(0,o.extendSyncDelta)(e,i.result())}return e}}},79341:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaRemoteRejected=void 0;const n=r(50417),i=r(18667);t.DeltaRemoteRejected=class{constructor(e,t){this.baseCollection=e,this.applyCollection=t}result(){const e=[];for(const t of this.applyCollection.all()){const r=this.baseCollection.find(t.uuid);if(!r)continue;const i=r.copyAsSyncResolved({dirty:!1,lastSyncEnd:new Date},n.PayloadSource.RemoteSaved);e.push(i)}return{emits:e,source:i.PayloadEmitSource.RemoteSaved}}}},66862:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaRemoteRetrieved=void 0;const n=r(49599),i=r(98890),o=r(18667),a=r(10256),s=r(14939),c=r(29998),l=r(40346);t.DeltaRemoteRetrieved=class{constructor(e,t,r,n){this.baseCollection=e,this.applyCollection=t,this.itemsSavedOrSaving=r,this.historyMap=n}isUuidOfPayloadCurrentlySavingOrSaved(e){return null!=this.itemsSavedOrSaving.find((t=>t.uuid===e))}result(){const e={emits:[],ignored:[],source:o.PayloadEmitSource.RemoteRetrieved},t=[];for(const r of this.applyCollection.all()){if(r.content_type===a.ContentType.ItemsKey){const t=new c.ItemsKeyDelta(this.baseCollection,[r]).result();(0,l.extendSyncDelta)(e,t);continue}if(this.isUuidOfPayloadCurrentlySavingOrSaved(r.uuid)){t.push(r);continue}const n=this.baseCollection.find(r.uuid);!(null==n?void 0:n.dirty)||(0,i.isErrorDecryptingPayload)(n)?e.emits.push((0,s.payloadByFinalizingSyncState)(r,this.baseCollection)):t.push(r)}for(const r of t){if(!(0,i.isDecryptedPayload)(r))continue;const t=this.baseCollection.find(r.uuid);if(!t)continue;const o=new n.ConflictDelta(this.baseCollection,t,r,this.historyMap);(0,l.extendSyncDelta)(e,o.result())}return e}}},17759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaRemoteSaved=void 0;const n=r(63188),i=r(50417),o=r(98890),a=r(18667),s=r(14939),c=r(57650),l=r(6754);t.DeltaRemoteSaved=class{constructor(e,t){this.baseCollection=e,this.applyContextualPayloads=t}result(){const e=[];for(const t of this.applyContextualPayloads){const r=this.baseCollection.find(t.uuid);if(r)if((0,o.isDeletedPayload)(r)){const o=!t.deleted,a=t.deleted;if(o){const r=new n.DeletedPayload(Object.assign(Object.assign(Object.assign({},t),{deleted:!0,content:void 0,dirtyIndex:(0,l.getIncrementedDirtyIndex)()}),(0,c.BuildSyncResolvedParams)({dirty:!0,lastSyncEnd:new Date})),i.PayloadSource.RemoteSaved);e.push(r)}else if(a){const n=r.copy(Object.assign(Object.assign(Object.assign({},t),{deleted:!0}),(0,c.BuildSyncResolvedParams)({dirty:!1,lastSyncEnd:new Date})),i.PayloadSource.RemoteSaved);e.push(n)}}else{const n=(0,s.payloadByFinalizingSyncState)(r.copy(Object.assign(Object.assign({},t),{deleted:!1}),i.PayloadSource.RemoteSaved),this.baseCollection);e.push(n)}else{const r=new n.DeletedPayload(Object.assign(Object.assign(Object.assign({},t),{deleted:!0,content:void 0}),(0,c.BuildSyncResolvedParams)({dirty:!1,lastSyncEnd:new Date})),i.PayloadSource.RemoteSaved);e.push(r)}}return{emits:e,source:a.PayloadEmitSource.RemoteSaved}}}},28637:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaRemoteUuidConflicts=void 0;const n=r(64657),i=r(35082),o=r(24439),a=r(98890),s=r(18667);t.DeltaRemoteUuidConflicts=class{constructor(e,t){this.baseCollection=e,this.applyCollection=t}result(){const e=[],t=this.baseCollection.mutableCopy();for(const r of this.applyCollection.all()){const s=e.find((e=>e.uuid===r.uuid))||r;if(!(0,a.isDecryptedPayload)(s))continue;const c=(0,o.PayloadsByAlternatingUuid)(s,i.ImmutablePayloadCollection.FromCollection(t));t.set(c),(0,n.filterFromArray)(e,(e=>(0,n.Uuids)(c).includes(e.uuid))),(0,n.extendArray)(e,c)}return{emits:e,source:s.PayloadEmitSource.RemoteRetrieved}}}},14939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.payloadsByFinalizingSyncState=t.payloadByFinalizingSyncState=void 0;const n=r(6754);function i(e,t){const r=t.find(e.uuid);if(!r)return e.copyAsSyncResolved({dirty:!1,lastSyncEnd:new Date});const i=!(!r.dirtyIndex||!r.globalDirtyIndexAtLastSync)&&r.dirtyIndex>r.globalDirtyIndexAtLastSync;return e.copyAsSyncResolved({dirty:i,dirtyIndex:i?(0,n.getIncrementedDirtyIndex)():void 0,lastSyncEnd:new Date})}t.payloadByFinalizingSyncState=i,t.payloadsByFinalizingSyncState=function(e,t){return e.map((e=>i(e,t)))}},57650:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BuildSyncResolvedParams=void 0,t.BuildSyncResolvedParams=function(e){return e}},1750:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(49599),t),i(r(19143),t),i(r(79873),t),i(r(89191),t),i(r(66862),t),i(r(17759),t),i(r(65310),t),i(r(28637),t),i(r(79341),t),i(r(40346),t)},6754:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentDirtyIndex=t.getIncrementedDirtyIndex=void 0;let r=0;t.getIncrementedDirtyIndex=function(){return r++,r},t.getCurrentDirtyIndex=function(){return r}},23072:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},23075:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computeFiltersForDisplayOptions=t.computeUnifiedFilterForDisplayOptions=void 0;const n=r(10256),i=r(4103),o=r(1265),a=r(52252);function s(e,t){const r=[];let s;if(e.views&&e.views.length>0){const a=new i.CompoundPredicate("and",e.views.map((e=>e.predicate)));s=a,r.push((e=>{if(a.keypathIncludesString("tags")){const r=o.ItemWithTags.Create(e.payload,e,t.elementsReferencingElement(e,n.ContentType.Tag));return a.matchesItem(r)}return a.matchesItem(e)}))}if(e.tags&&e.tags.length>0)for(const t of e.tags)r.push((e=>t.isReferencingItem(e)));if(!1!==e.includePinned||(null==s?void 0:s.keypathIncludesString("pinned"))||r.push((e=>!e.pinned)),!1!==e.includeProtected||(null==s?void 0:s.keypathIncludesString("protected"))||r.push((e=>!e.protected)),!1!==e.includeTrashed||(null==s?void 0:s.keypathIncludesString("trashed"))||r.push((e=>!e.trashed)),!1!==e.includeArchived||(null==s?void 0:s.keypathIncludesString("archived"))||r.push((e=>!e.archived)),e.searchQuery){const n=e.searchQuery;r.push((e=>(0,a.itemMatchesQuery)(e,n,t)))}return r}t.computeUnifiedFilterForDisplayOptions=function(e,t){const r=s(e,t);return e=>(0,a.itemPassesFilters)(e,r)},t.computeFiltersForDisplayOptions=s},69089:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemDisplayController=void 0;const n=r(64657),i=r(12922),o=r(97713);t.ItemDisplayController=class{constructor(e,t,r){this.collection=e,this.contentTypes=t,this.options=r,this.sortMap={},this.sortedItems=[],this.needsSort=!0,this.filterThenSortElements(this.collection.all(this.contentTypes))}items(){return this.sortedItems}setDisplayOptions(e){this.options=Object.assign(Object.assign({},this.options),e),this.needsSort=!0,this.filterThenSortElements(this.collection.all(this.contentTypes))}onCollectionChange(e){const t=[...e.changed,...e.inserted,...e.discarded].filter((e=>this.contentTypes.includes(e.content_type)));this.filterThenSortElements(t)}filterThenSortElements(e){var t;for(const r of e){const e=this.sortMap[r.uuid],o=null!=e?this.sortedItems[e]:void 0,a=()=>{null!=e&&(delete this.sortMap[r.uuid],this.sortedItems[e]=void 0,this.needsSort=!0)};if((0,i.isDeletedItem)(r)||(0,i.isEncryptedItem)(r))a();else if(!this.collection.has(r.uuid)||(null===(t=this.options.hiddenContentTypes)||void 0===t?void 0:t.includes(r.content_type))||this.options.customFilter&&!this.options.customFilter(r))a();else if(null!=o){const t=o[this.options.sortBy],i=r[this.options.sortBy];this.sortedItems[e]=r;const a=o.pinned!==r.pinned;(0,n.compareValues)(t,i)&&!a||(this.needsSort=!0)}else this.sortedItems.push(r),this.needsSort=!0}this.needsSort&&(this.needsSort=!1,this.resortItems())}resortItems(){const e=this.sortedItems.sort(((e,t)=>(0,o.sortTwoItems)(e,t,this.options.sortBy,this.options.sortDirection))),t=[];let r=0;for(const n of e)n&&(t.push(n),this.sortMap[n.uuid]=r,r++);this.sortedItems=t}}},1265:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemWithTags=void 0;const n=r(12922);class i extends n.DecryptedItem{constructor(e,t,r){super(e),this.item=t,this.tags=r,this.tags=r||e.content.tags}static Create(e,t,r){return new i(e,t,r)}get tagsCount(){var e;return(null===(e=this.tags)||void 0===e?void 0:e.length)||0}get title(){return this.item.title}get text(){return this.item.text}}t.ItemWithTags=i},52252:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.itemMatchesQuery=t.itemPassesFilters=t.itemsMatchingOptions=void 0;const n=r(10256),i=r(23075);var o;function a(e,t){for(const r of t)if(!r(e))return!1;return!0}function s(e,t){var r,n;if(0===t.length)return o.TitleAndText;const i=null===(r=e.title)||void 0===r?void 0:r.toLowerCase(),a=null===(n=e.text)||void 0===n?void 0:n.toLowerCase(),s=t.toLowerCase(),c=s.split(" "),l=function(e){const t=e.match(/"(.*?)"/);return t?t[1]:null}(s);if(l)return((null==i?void 0:i.includes(l))?o.Title:o.None)+((null==a?void 0:a.includes(l))?o.Text:o.None);if(function(e){return!!e.match(/\b[0-9a-f]{8}\b-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-\b[0-9a-f]{12}\b/)}(s))return e.uuid===s?o.Uuid:o.None;const u=i&&c.every((e=>i.indexOf(e)>=0)),d=a&&c.every((e=>a.indexOf(e)>=0));return(u?o.Title:0)+(d?o.Text:0)}!function(e){e[e.None=0]="None",e[e.Title=1]="Title",e[e.Text=2]="Text",e[e.TitleAndText=3]="TitleAndText",e[e.Uuid=5]="Uuid"}(o||(o={})),t.itemsMatchingOptions=function(e,t,r){const n=(0,i.computeFiltersForDisplayOptions)(e,r);return t.filter((e=>a(e,n)))},t.itemPassesFilters=a,t.itemMatchesQuery=function(e,t,r){const i=r.elementsReferencingElement(e,n.ContentType.Tag).some((e=>s(e,t.query)!==o.None));if(e.protected&&!t.includeProtectedNoteText){const r=s(e,t.query);return r===o.Title||r===o.TitleAndText||i}return s(e,t.query)!==o.None||i}},26159:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},43142:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},97713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortTwoItems=t.KeepSameOrder=t.SortRightFirst=t.SortLeftFirst=void 0;const n=r(64657),i=r(74520);t.SortLeftFirst=-1,t.SortRightFirst=1,t.KeepSameOrder=0,t.sortTwoItems=function e(r,o,a,s){let c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!r)return t.SortLeftFirst;if(!o)return t.SortRightFirst;if(!c){if(r.pinned&&o.pinned)return e(r,o,a,s,!0);if(r.pinned)return t.SortLeftFirst;if(o.pinned)return t.SortRightFirst}const l=r[a]||"",u=o[a]||"",d="asc"===s;let p=t.KeepSameOrder;p=a===i.CollectionSort.Title&&(0,n.isString)(l)&&(0,n.isString)(u)&&l.length>0&&u.length>0?l.localeCompare(u,"en",{numeric:!0}):l>u?t.SortRightFirst:l<u?t.SortLeftFirst:t.KeepSameOrder;const h=p===t.SortLeftFirst,f=p===t.SortRightFirst;return h?d?t.SortLeftFirst:t.SortRightFirst:f?d?t.SortRightFirst:t.SortLeftFirst:t.KeepSameOrder}},87425:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},98295:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(23072),t),i(r(23075),t),i(r(69089),t),i(r(1265),t),i(r(26159),t),i(r(52252),t),i(r(43142),t),i(r(87425),t)},22558:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateHistoryEntryForPayload=void 0;const n=r(10256),i=r(57792),o=r(99438);t.CreateHistoryEntryForPayload=function(e,t){return new(e.content_type===n.ContentType.Note?o.NoteHistoryEntry:i.HistoryEntry)(e,t)}},57792:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryEntry=void 0;const n=r(64657),i=r(24320);t.HistoryEntry=class{constructor(e,t){var r;this.defaultContentKeyToDiffOn="text",this.payload=e.copy(),this.previousEntry=t,this.hasPreviousEntry=!(0,n.isNullOrUndefined)(t);const i=this.payload.content[this.defaultContentKeyToDiffOn];if(i)if(t){const e=(null===(r=t.payload.content[this.defaultContentKeyToDiffOn])||void 0===r?void 0:r.length)||0;this.textCharDiffLength=i.length-e}else this.textCharDiffLength=i.length;else this.textCharDiffLength=0}itemFromPayload(){return(0,i.CreateDecryptedItemFromPayload)(this.payload)}isSameAsEntry(e){if(!e)return!1;const t=this.itemFromPayload(),r=e.itemFromPayload();return!(t.userModifiedDate.getTime()!==r.userModifiedDate.getTime())&&t.isItemContentEqualWith(r)}isDiscardable(){return!1}operationVector(){return void 0!==this.textCharDiffLength?this.hasPreviousEntry&&0!==this.textCharDiffLength?this.textCharDiffLength<0?-1:1:0:1}deltaSize(){return void 0!==this.textCharDiffLength?Math.abs(this.textCharDiffLength):1}}},6777:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},32405:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.historyMapFunctions=void 0,t.historyMapFunctions={getNewestRevision:e=>e[0]}},99438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoteHistoryEntry=void 0;const n=r(64657),i=r(57792);class o extends i.HistoryEntry{previewTitle(){return this.payload.updated_at.getTime()>0?this.payload.updated_at.toLocaleString():this.payload.created_at.toLocaleString()}previewSubTitle(){return this.hasPreviousEntry?this.textCharDiffLength<0?"".concat(-1*this.textCharDiffLength," characters removed"):this.textCharDiffLength>0?"".concat(this.textCharDiffLength," characters added"):"Title or metadata changed":"".concat(this.textCharDiffLength," characters loaded")}isDiscardable(){return(0,n.isEmpty)(this.payload.content.text)}}t.NoteHistoryEntry=o},63874:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(22558),t),i(r(57792),t),i(r(32405),t),i(r(99438),t),i(r(6777),t)},66658:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateItemDelta=void 0,t.CreateItemDelta=function(e){return{changed:e.changed||[],inserted:e.inserted||[],discarded:e.discarded||[],ignored:e.ignored||[],unerrored:e.unerrored||[]}}},83883:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4103:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompoundPredicate=void 0,t.CompoundPredicate=class{constructor(e,t){this.operator=e,this.predicates=t}matchesItem(e){if("and"===this.operator){for(const t of this.predicates)if(!t.matchesItem(e))return!1;return!0}if("or"===this.operator){for(const t of this.predicates)if(t.matchesItem(e))return!0;return!1}return!1}keypathIncludesString(e){for(const t of this.predicates)if(t.keypathIncludesString(e))return!0;return!1}toJson(){return{operator:this.operator,value:this.predicates.map((e=>e.toJson()))}}}},41291:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.predicateFromDSLString=t.predicateFromJson=t.includesPredicateFromArguments=t.notPredicateFromArguments=t.compoundPredicateFromArguments=t.predicateFromArguments=void 0;const n=r(4103),i=r(37436),o=r(72650),a=r(54981),s=r(95536);function c(e,t,r){if(o.AllPredicateCompoundOperators.includes(t))return l(t,r);if("not"===t)return new a.NotPredicate(u(r));if("includes"===t&&e)return function(e){return!!o.SureValueNonObjectTypesAsStrings.includes(typeof e)||!!Array.isArray(e)&&!d(e)}(r)?new s.Predicate(e,t,r):new i.IncludesPredicate(e,u(r));if(e)return new s.Predicate(e,t,r);throw Error("Invalid predicate arguments")}function l(e,t){const r=t.map((e=>u(e)));return new n.CompoundPredicate(e,r)}function u(e){if(Array.isArray(e))throw Error("Invalid predicateFromJson value");return c(e.keypath,e.operator,d(e.value)?p(e.value):e.value)}function d(e){return Array.isArray(e)&&o.AllPredicateOperators.includes(e[1])}function p(e){const t=e[2];let r;if(Array.isArray(t)){const e=t;r=Array.isArray(e[0])?e.map((e=>p(e))):d(t[1])?p(e):t}else r=t;return{keypath:e[0],operator:e[1],value:r}}t.predicateFromArguments=c,t.compoundPredicateFromArguments=l,t.notPredicateFromArguments=function(e){const t=u(e);return new a.NotPredicate(t)},t.includesPredicateFromArguments=function(e,t){const r=u(t);return new i.IncludesPredicate(e,r)},t.predicateFromJson=u,t.predicateFromDSLString=function(e){try{const t=JSON.parse(e.substring(1,e.length));return t.shift(),u(p(t))}catch(e){throw Error("Invalid smart view syntax ".concat(e))}}},37436:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IncludesPredicate=void 0,t.IncludesPredicate=class{constructor(e,t){this.keypath=e,this.predicate=t}matchesItem(e){const t=this.keypath.split(".").reduce(((e,t)=>e&&e[t]),e);return!!Array.isArray(t)&&t.some((e=>this.predicate.matchesItem(e)))}keypathIncludesString(e){return this.keypath.includes(e)}toJson(){return{keypath:this.keypath,operator:"includes",value:this.predicate.toJson()}}}},72650:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SureValueNonObjectTypesAsStrings=t.AllPredicateOperators=t.AllPredicateCompoundOperators=void 0,t.AllPredicateCompoundOperators=["and","or"],t.AllPredicateOperators=[...t.AllPredicateCompoundOperators,"!=","=","<",">","<=",">=","startsWith","in","matches","not","includes"],t.SureValueNonObjectTypesAsStrings=["number","string","boolean"]},54981:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotPredicate=void 0,t.NotPredicate=class{constructor(e){this.predicate=e}matchesItem(e){return!this.predicate.matchesItem(e)}keypathIncludesString(e){return this.predicate.keypathIncludesString(e)}toJson(){return{operator:"not",value:this.predicate.toJson()}}}},36640:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.valueMatchesTargetValue=void 0;const n=r(64657),i=r(25929);t.valueMatchesTargetValue=function e(t,r,o){if(null==o)return!1;if("string"==typeof o&&o.includes(".ago")&&(o=(0,i.dateFromDSLDateString)(o)),"string"==typeof o&&(o=o.toLowerCase()),"string"==typeof t&&(t=t.toLowerCase()),"not"===r)return!e(t,"=",o);if(null==t){const e=[!1,"",null,void 0,NaN].includes(o);return"!="===r?!e:e}if("="===r)return Array.isArray(t)?JSON.stringify(t)===JSON.stringify(o):t===o;if("!="===r)return Array.isArray(t)?JSON.stringify(t)!==JSON.stringify(o):t!==o;if("<"===r)return t<o;if(">"===r)return t>o;if("<="===r)return t<=o;if(">="===r)return t>=o;if("startsWith"===r)return t.startsWith(o);if("in"===r&&Array.isArray(o))return o.includes(t);if("includes"===r){if((0,n.isString)(t))return t.includes(o);if((0,n.isString)(o)&&((0,n.isString)(t)||Array.isArray(t)))return t.includes(o)}return"matches"===r&&new RegExp(o).test(t)}},95536:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Predicate=void 0;const n=r(36640);t.Predicate=class{constructor(e,t,r){this.keypath=e,this.operator=t,this.targetValue=r,"true"!==this.targetValue&&"false"!==this.targetValue||(this.targetValue=JSON.parse(this.targetValue))}keypathIncludesString(e){return this.keypath.includes(e)}matchesItem(e){const t=this.keypath.split(".").reduce(((e,t)=>e&&e[t]),e);return(0,n.valueMatchesTargetValue)(t,this.operator,this.targetValue)}toJson(){return{keypath:this.keypath,operator:this.operator,value:this.targetValue}}}},25929:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dateFromDSLDateString=void 0,t.dateFromDSLDateString=function(e){const t=e.split("."),r=t[1],n=new Date,i=parseInt(t[0]);return"days"===r?n.setDate(n.getDate()-i):"hours"===r&&n.setHours(n.getHours()-i),n}},61079:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNActionsExtension=void 0;const n=r(59867),i=r(25569);class o extends n.DecryptedItem{constructor(e){super(e),this.actions=[],this.name=e.content.name||"",this.description=e.content.description||"",this.url=e.content.hosted_url||e.content.url,this.supported_types=e.content.supported_types,this.package_info=this.payload.content.package_info||{},this.deprecation=e.content.deprecation,this.actions=e.content.actions}get displayName(){return this.name}get thirdPartyPackageInfo(){return this.package_info}get isListedExtension(){return"org.standardnotes.listed"===this.package_info.identifier}actionsWithContextForItem(e){return this.actions.filter((t=>t.context===e.content_type||"Item"===t.context))}strategyWhenConflictingWithItem(e,t){return i.ConflictStrategy.KeepBase}}t.SNActionsExtension=o},83062:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsExtensionMutator=void 0;const n=r(66276);class i extends n.DecryptedItemMutator{set description(e){this.mutableContent.description=e}set supported_types(e){this.mutableContent.supported_types=e}set actions(e){this.mutableContent.actions=e}set deprecation(e){this.mutableContent.deprecation=e}}t.ActionsExtensionMutator=i},87966:(e,t)=>{var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.ActionVerb=t.ActionAccessType=void 0,(n=t.ActionAccessType||(t.ActionAccessType={})).Encrypted="encrypted",n.Decrypted="decrypted",(r=t.ActionVerb||(t.ActionVerb={})).Get="get",r.Render="render",r.Show="show",r.Post="post",r.Nested="nested"},93261:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(61079),t),i(r(83062),t),i(r(87966),t)},58892:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNComponent=t.isComponentOrTheme=t.isComponent=void 0;const n=r(64657),i=r(10256),o=r(70295),a=r(47759),s=r(25569),c=r(59867),l=r(95536);t.isComponent=e=>e.content_type===i.ContentType.Component,t.isComponentOrTheme=e=>e.content_type===i.ContentType.Component||e.content_type===i.ContentType.Theme;class u extends c.DecryptedItem{constructor(e){super(e),this.permissions=[],this.componentData=this.payload.content.componentData||{},e.content.hosted_url&&(0,n.isValidUrl)(e.content.hosted_url)?this.hosted_url=e.content.hosted_url:e.content.url&&(0,n.isValidUrl)(e.content.url)?this.hosted_url=e.content.url:e.content.legacy_url&&(0,n.isValidUrl)(e.content.legacy_url)&&(this.hosted_url=e.content.legacy_url),this.local_url=e.content.local_url,this.valid_until=new Date(e.content.valid_until||0),this.offlineOnly=e.content.offlineOnly,this.name=e.content.name,this.area=e.content.area,this.package_info=e.content.package_info||{},this.permissions=e.content.permissions||[],this.active=e.content.active,this.autoupdateDisabled=e.content.autoupdateDisabled,this.disassociatedItemIds=e.content.disassociatedItemIds||[],this.associatedItemIds=e.content.associatedItemIds||[],this.isMobileDefault=e.content.isMobileDefault,this.legacy_url=e.content.hosted_url?void 0:e.content.url}strategyWhenConflictingWithItem(e,t){return s.ConflictStrategy.KeepBase}get isSingleton(){return!0}get displayName(){var e;return(null===(e=(0,o.FindNativeFeature)(this.identifier))||void 0===e?void 0:e.name)||this.name}singletonPredicate(){return new l.Predicate("identifier","=",this.identifier)}isEditor(){return this.area===o.ComponentArea.Editor}isTheme(){return this.content_type===i.ContentType.Theme||this.area===o.ComponentArea.Themes}isDefaultEditor(){return!0===this.getAppDomainValue(a.AppDataField.DefaultEditor)}getLastSize(){return this.getAppDomainValue(a.AppDataField.LastSize)}getClientDataKey(){return this.legacy_url?this.legacy_url:this.uuid}hasValidHostedUrl(){return null!=(this.hosted_url||this.legacy_url)}contentKeysToIgnoreWhenCheckingEquality(){return["active","disassociatedItemIds","associatedItemIds",...super.contentKeysToIgnoreWhenCheckingEquality()]}static associativeAreas(){return[o.ComponentArea.Editor]}isAssociative(){return u.associativeAreas().includes(this.area)}isExplicitlyEnabledForItem(e){return-1!==this.associatedItemIds.indexOf(e)}isExplicitlyDisabledForItem(e){return-1!==this.disassociatedItemIds.indexOf(e)}get isExpired(){return this.valid_until.getTime()>0&&this.valid_until<=new Date}get identifier(){return this.package_info.identifier}get thirdPartyPackageInfo(){return this.package_info}get noteType(){return this.package_info.note_type||o.NoteType.Plain}get isDeprecated(){var e;let t=null!==(e=this.package_info.flags)&&void 0!==e?e:[];return t=t.map((e=>e.toLowerCase())),t.includes(o.ComponentFlag.Deprecated)}get deprecationMessage(){return this.package_info.deprecation_message}}t.SNComponent=u},48072:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},54712:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentMutator=void 0;const n=r(64657),i=r(47759),o=r(66276);class a extends o.DecryptedItemMutator{set active(e){this.mutableContent.active=e}set isMobileDefault(e){this.mutableContent.isMobileDefault=e}set defaultEditor(e){this.setAppDataItem(i.AppDataField.DefaultEditor,e)}set componentData(e){this.mutableContent.componentData=e}set package_info(e){this.mutableContent.package_info=e}set local_url(e){this.mutableContent.local_url=e}set hosted_url(e){this.mutableContent.hosted_url=e}set valid_until(e){this.mutableContent.valid_until=e}set permissions(e){this.mutableContent.permissions=e}set name(e){this.mutableContent.name=e}set offlineOnly(e){this.mutableContent.offlineOnly=e}associateWithItem(e){const t=this.mutableContent.associatedItemIds||[];(0,n.addIfUnique)(t,e),this.mutableContent.associatedItemIds=t}disassociateWithItem(e){const t=this.mutableContent.disassociatedItemIds||[];(0,n.addIfUnique)(t,e),this.mutableContent.disassociatedItemIds=t}removeAssociatedItemId(e){(0,n.removeFromArray)(this.mutableContent.associatedItemIds||[],e)}removeDisassociatedItemId(e){(0,n.removeFromArray)(this.mutableContent.disassociatedItemIds||[],e)}setLastSize(e){this.setAppDataItem(i.AppDataField.LastSize,e)}}t.ComponentMutator=a},15834:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(58892),t),i(r(54712),t),i(r(48072),t)},3322:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNEditor=void 0;const n=r(59867);class i extends n.DecryptedItem{constructor(e){super(e),this.notes=[],this.data={},this.url=e.content.url,this.name=e.content.name,this.data=e.content.data||{},this.isDefault=e.content.default,this.systemEditor=e.content.systemEditor}}t.SNEditor=i},69109:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(3322),t)},54246:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNFeatureRepo=void 0;const n=r(64657),i=r(59867);class o extends i.DecryptedItem{get migratedToUserSetting(){return(0,n.useBoolean)(this.payload.content.migratedToUserSetting,!1)}get migratedToOfflineEntitlements(){return(0,n.useBoolean)(this.payload.content.migratedToOfflineEntitlements,!1)}get onlineUrl(){return this.payload.content.url}get offlineFeaturesUrl(){return this.payload.content.offlineFeaturesUrl}get offlineKey(){return this.payload.content.offlineKey}}t.SNFeatureRepo=o},39231:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureRepoMutator=void 0;const n=r(66276);class i extends n.DecryptedItemMutator{set migratedToUserSetting(e){this.mutableContent.migratedToUserSetting=e}set migratedToOfflineEntitlements(e){this.mutableContent.migratedToOfflineEntitlements=e}set offlineFeaturesUrl(e){this.mutableContent.offlineFeaturesUrl=e}set offlineKey(e){this.mutableContent.offlineKey=e}}t.FeatureRepoMutator=i},28346:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(54246),t),i(r(39231),t)},23899:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileItem=t.isFile=void 0;const n=r(59867),i=r(12922),o=r(10256);t.isFile=e=>e.content_type===o.ContentType.File;class a extends n.DecryptedItem{constructor(e){super(e),this.remoteIdentifier=this.content.remoteIdentifier,this.name=this.content.name,this.key=this.content.key,this.content.size&&this.content.chunkSizes?(this.decryptedSize=this.content.size,this.encryptedChunkSizes=this.content.chunkSizes):(this.decryptedSize=this.content.decryptedSize,this.encryptedChunkSizes=this.content.encryptedChunkSizes),this.encryptionHeader=this.content.encryptionHeader,this.mimeType=this.content.mimeType}strategyWhenConflictingWithItem(e){return e.key!==this.key||e.encryptionHeader!==this.encryptionHeader||e.remoteIdentifier!==this.remoteIdentifier||JSON.stringify(e.encryptedChunkSizes)!==JSON.stringify(this.encryptedChunkSizes)?i.ConflictStrategy.KeepBaseDuplicateApply:i.ConflictStrategy.KeepBase}get encryptedSize(){return this.encryptedChunkSizes.reduce(((e,t)=>e+t),0)}get title(){return this.name}}t.FileItem=a},50324:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},71554:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileMutator=void 0;const n=r(10256),i=r(21984),o=r(66276);class a extends o.DecryptedItemMutator{set name(e){this.mutableContent.name=e}set encryptionHeader(e){this.mutableContent.encryptionHeader=e}addNote(e){const t={reference_type:i.ContentReferenceType.FileToNote,content_type:n.ContentType.Note,uuid:e.uuid},r=this.mutableContent.references||[];r.push(t),this.mutableContent.references=r}removeNote(e){const t=this.immutableItem.references.filter((t=>t.uuid!==e.uuid));this.mutableContent.references=t}addFile(e){if(this.immutableItem.isReferencingItem(e))return;const t={uuid:e.uuid,content_type:n.ContentType.File,reference_type:i.ContentReferenceType.FileToFile};this.mutableContent.references.push(t)}removeFile(e){this.mutableContent.references=this.mutableContent.references.filter((t=>t.uuid!==e.uuid))}}t.FileMutator=a},75006:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FileProtocolV1Constants=void 0,(r=t.FileProtocolV1Constants||(t.FileProtocolV1Constants={}))[r.KeySize=256]="KeySize"},49740:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(23899),t),i(r(71554),t),i(r(50324),t),i(r(75006),t)},59536:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3338:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},55998:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNNote=t.isNote=void 0;const n=r(47759),i=r(10256),o=r(70295),a=r(59867);t.isNote=e=>e.content_type===i.ContentType.Note;class s extends a.DecryptedItem{constructor(e){super(e),this.hidePreview=!1,this.title=String(this.payload.content.title||""),this.text=String(this.payload.content.text||""),this.preview_plain=String(this.payload.content.preview_plain||""),this.preview_html=String(this.payload.content.preview_html||""),this.hidePreview=Boolean(this.payload.content.hidePreview),this.spellcheck=this.payload.content.spellcheck,this.noteType=this.payload.content.noteType,this.editorIdentifier=this.payload.content.editorIdentifier,this.authorizedForListed=this.payload.content.authorizedForListed||!1,this.noteType||this.getAppDomainValueWithDefault(n.AppDataField.LegacyPrefersPlainEditor,!1)&&(this.noteType=o.NoteType.Plain)}}t.SNNote=s},29833:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},50943:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoteMutator=void 0;const n=r(66276),i=r(10256),o=r(12922);class a extends n.DecryptedItemMutator{set title(e){this.mutableContent.title=e}set text(e){this.mutableContent.text=e}set hidePreview(e){this.mutableContent.hidePreview=e}set preview_plain(e){this.mutableContent.preview_plain=e}set preview_html(e){this.mutableContent.preview_html=e}set spellcheck(e){this.mutableContent.spellcheck=e}set noteType(e){this.mutableContent.noteType=e}set editorIdentifier(e){this.mutableContent.editorIdentifier=e}set authorizedForListed(e){this.mutableContent.authorizedForListed=e}toggleSpellcheck(){null==this.mutableContent.spellcheck?this.mutableContent.spellcheck=!1:this.mutableContent.spellcheck=!this.mutableContent.spellcheck}addNote(e){if(this.immutableItem.isReferencingItem(e))return;const t={uuid:e.uuid,content_type:i.ContentType.Note,reference_type:o.ContentReferenceType.NoteToNote};this.mutableContent.references.push(t)}removeNote(e){this.mutableContent.references=this.mutableContent.references.filter((t=>t.uuid!==e.uuid))}}t.NoteMutator=a},23251:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(55998),t),i(r(50943),t),i(r(29833),t)},33652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SmartView=t.isSmartView=t.isSystemView=t.SMART_TAG_DSL_PREFIX=void 0;const n=r(59867),i=r(41291),o=r(86865),a=r(36176),s=r(10256);function c(e){return Object.values(o.SystemViewId).includes(e.uuid)}t.SMART_TAG_DSL_PREFIX="![",t.isSystemView=c,t.isSmartView=e=>e.content_type===s.ContentType.SmartView;class l extends n.DecryptedItem{constructor(e){super(e),this.title=String(this.content.title||""),c(this)?this.iconString=(0,a.systemViewIcon)(this.uuid):this.iconString=this.payload.content.iconString||a.SmartViewDefaultIconName,this.preferences=this.payload.content.preferences;try{this.predicate=this.content.predicate&&(0,i.predicateFromJson)(this.content.predicate)}catch(e){console.error(e)}}}t.SmartView=l},55874:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BuildSmartViews=void 0;const n=r(38111),i=r(33652),o=r(86865),a=r(10256),s=r(23767),c=r(95536),l=r(4103),u=r(18667);function d(e){const t=[new c.Predicate("content_type","=",a.ContentType.Note)];return!1===e.includeTrashed&&t.push(new c.Predicate("trashed","=",!1)),!1===e.includeArchived&&t.push(new c.Predicate("archived","=",!1)),!1===e.includeProtected&&t.push(new c.Predicate("protected","=",!1)),!1===e.includePinned&&t.push(new c.Predicate("pinned","=",!1)),new l.CompoundPredicate("and",t)}function p(e){const t=[new c.Predicate("content_type","=",a.ContentType.File)];return!1===e.includeTrashed&&t.push(new c.Predicate("trashed","=",!1)),!1===e.includeArchived&&t.push(new c.Predicate("archived","=",!1)),!1===e.includeProtected&&t.push(new c.Predicate("protected","=",!1)),!1===e.includePinned&&t.push(new c.Predicate("pinned","=",!1)),new l.CompoundPredicate("and",t)}function h(e){const t=[new c.Predicate("archived","=",!0),new c.Predicate("content_type","=",a.ContentType.Note)];return!1===e.includeTrashed&&t.push(new c.Predicate("trashed","=",!1)),!1===e.includeProtected&&t.push(new c.Predicate("protected","=",!1)),!1===e.includePinned&&t.push(new c.Predicate("pinned","=",!1)),new l.CompoundPredicate("and",t)}function f(e){const t=[new c.Predicate("trashed","=",!0),new c.Predicate("content_type","=",a.ContentType.Note)];return!1===e.includeArchived&&t.push(new c.Predicate("archived","=",!1)),!1===e.includeProtected&&t.push(new c.Predicate("protected","=",!1)),!1===e.includePinned&&t.push(new c.Predicate("pinned","=",!1)),new l.CompoundPredicate("and",t)}function y(e){const t=[new c.Predicate("content_type","=",a.ContentType.Note),new c.Predicate("tagsCount","=",0)];return!1===e.includeArchived&&t.push(new c.Predicate("archived","=",!1)),!1===e.includeProtected&&t.push(new c.Predicate("protected","=",!1)),!1===e.includePinned&&t.push(new c.Predicate("pinned","=",!1)),new l.CompoundPredicate("and",t)}function v(e){const t=[new c.Predicate("starred","=",!0),new c.Predicate("content_type","=",a.ContentType.Note)];return!1===e.includeTrashed&&t.push(new c.Predicate("trashed","=",!1)),!1===e.includeProtected&&t.push(new c.Predicate("protected","=",!1)),!1===e.includePinned&&t.push(new c.Predicate("pinned","=",!1)),new l.CompoundPredicate("and",t)}t.BuildSmartViews=function(e,t){let{supportsFileNavigation:r=!1}=t;const c=new i.SmartView(new n.DecryptedPayload(Object.assign(Object.assign({uuid:o.SystemViewId.AllNotes,content_type:a.ContentType.SmartView},(0,u.PayloadTimestampDefaults)()),{content:(0,s.FillItemContent)({title:"Notes",predicate:d(e).toJson()})}))),l=new i.SmartView(new n.DecryptedPayload(Object.assign(Object.assign({uuid:o.SystemViewId.Files,content_type:a.ContentType.SmartView},(0,u.PayloadTimestampDefaults)()),{content:(0,s.FillItemContent)({title:"Files",predicate:p(e).toJson()})}))),g=new i.SmartView(new n.DecryptedPayload(Object.assign(Object.assign({uuid:o.SystemViewId.ArchivedNotes,content_type:a.ContentType.SmartView},(0,u.PayloadTimestampDefaults)()),{content:(0,s.FillItemContent)({title:"Archived",predicate:h(e).toJson()})}))),m=new i.SmartView(new n.DecryptedPayload(Object.assign(Object.assign({uuid:o.SystemViewId.TrashedNotes,content_type:a.ContentType.SmartView},(0,u.PayloadTimestampDefaults)()),{content:(0,s.FillItemContent)({title:"Trash",predicate:f(e).toJson()})}))),b=new i.SmartView(new n.DecryptedPayload(Object.assign(Object.assign({uuid:o.SystemViewId.UntaggedNotes,content_type:a.ContentType.SmartView},(0,u.PayloadTimestampDefaults)()),{content:(0,s.FillItemContent)({title:"Untagged",predicate:y(e).toJson()})}))),S=new i.SmartView(new n.DecryptedPayload(Object.assign(Object.assign({uuid:o.SystemViewId.StarredNotes,content_type:a.ContentType.SmartView},(0,u.PayloadTimestampDefaults)()),{content:(0,s.FillItemContent)({title:"Starred",predicate:v(e).toJson()})})));return r?[c,S,l,g,m,b]:[c,S,g,m,b]}},31511:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},36176:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SmartViewDefaultIconName=t.systemViewIcon=t.SmartViewIcons=void 0;const n=r(86865);t.SmartViewIcons={[n.SystemViewId.AllNotes]:"notes",[n.SystemViewId.Files]:"folder",[n.SystemViewId.ArchivedNotes]:"archive",[n.SystemViewId.TrashedNotes]:"trash",[n.SystemViewId.UntaggedNotes]:"hashtag-off",[n.SystemViewId.StarredNotes]:"star-filled"},t.systemViewIcon=function(e){return t.SmartViewIcons[e]},t.SmartViewDefaultIconName="restore"},86865:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemViewId=void 0,(r=t.SystemViewId||(t.SystemViewId={})).AllNotes="all-notes",r.Files="files",r.ArchivedNotes="archived-notes",r.TrashedNotes="trashed-notes",r.UntaggedNotes="untagged-notes",r.StarredNotes="starred-notes"},53209:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(33652),t),i(r(55874),t),i(r(86865),t),i(r(31511),t)},72897:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNTag=t.isTag=t.DefaultTagIconName=t.TagFolderDelimitter=void 0;const n=r(10256),i=r(59867),o=r(43239);t.TagFolderDelimitter=".",t.DefaultTagIconName="hashtag",t.isTag=e=>e.content_type===n.ContentType.Tag;class a extends i.DecryptedItem{constructor(e){super(e),this.title=this.payload.content.title||"",this.expanded=null==this.payload.content.expanded||this.payload.content.expanded,this.iconString=this.payload.content.iconString||t.DefaultTagIconName,this.preferences=this.payload.content.preferences}get isDailyEntry(){var e;return"daily"===(null===(e=this.preferences)||void 0===e?void 0:e.entryMode)}get noteReferences(){return this.payload.references.filter((e=>e.content_type===n.ContentType.Note))}get noteCount(){return this.noteReferences.length}get parentId(){const e=this.references.find(o.isTagToParentTagReference);return null==e?void 0:e.uuid}static arrayToDisplayString(e){return e.sort(((e,t)=>e.title>t.title?1:-1)).map((e=>"#"+e.title)).join(" ")}}t.SNTag=a},91357:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},57010:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TagMutator=void 0;const n=r(10256),i=r(43239),o=r(21984),a=r(66276);class s extends a.DecryptedItemMutator{constructor(e,t){super(e,t),this.mutablePreferences=this.mutableContent.preferences}set title(e){this.mutableContent.title=e}set expanded(e){this.mutableContent.expanded=e}set iconString(e){this.mutableContent.iconString=e}get preferences(){return this.mutablePreferences||(this.mutableContent.preferences={},this.mutablePreferences=this.mutableContent.preferences),this.mutablePreferences}set preferences(e){this.mutablePreferences=e,this.mutableContent.preferences=this.mutablePreferences}makeChildOf(e){const t=this.immutableItem.references.filter((e=>!(0,i.isTagToParentTagReference)(e))),r={reference_type:o.ContentReferenceType.TagToParentTag,content_type:n.ContentType.Tag,uuid:e.uuid};t.push(r),this.mutableContent.references=t}unsetParent(){this.mutableContent.references=this.immutableItem.references.filter((e=>!(0,i.isTagToParentTagReference)(e)))}addFile(e){if(this.immutableItem.isReferencingItem(e))return;const t={reference_type:o.ContentReferenceType.TagToFile,content_type:n.ContentType.File,uuid:e.uuid};this.mutableContent.references.push(t)}removeFile(e){this.mutableContent.references=this.mutableContent.references.filter((t=>t.uuid!==e.uuid))}addNote(e){this.immutableItem.isReferencingItem(e)||this.mutableContent.references.push({uuid:e.uuid,content_type:e.content_type})}removeNote(e){this.mutableContent.references=this.mutableContent.references.filter((t=>t.uuid!==e.uuid))}}t.TagMutator=s},66136:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9665:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(72897),t),i(r(57010),t),i(r(91357),t),i(r(66136),t)},74008:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNTheme=t.isTheme=void 0;const n=r(70295),i=r(58892),o=r(25569),a=r(47759),s=r(10256),c=r(64657);t.isTheme=e=>e.content_type===s.ContentType.Theme;class l extends i.SNComponent{constructor(){super(...arguments),this.area=n.ComponentArea.Themes}isLayerable(){return(0,c.useBoolean)(this.package_info&&this.package_info.layerable,!1)}strategyWhenConflictingWithItem(e,t){return o.ConflictStrategy.KeepBase}getMobileRules(){return this.getAppDomainValue(a.AppDataField.MobileRules)||{constants:{},rules:{}}}hasMobileRules(){return this.getAppDomainValue(a.AppDataField.MobileRules)}getNotAvailOnMobile(){return this.getAppDomainValue(a.AppDataField.NotAvailableOnMobile)}isMobileActive(){return this.getAppDomainValue(a.AppDataField.MobileActive)}}t.SNTheme=l},10043:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeMutator=void 0;const n=r(47759),i=r(66276);class o extends i.DecryptedItemMutator{setMobileRules(e){this.setAppDataItem(n.AppDataField.MobileRules,e)}setNotAvailOnMobile(e){this.setAppDataItem(n.AppDataField.NotAvailableOnMobile,e)}set local_url(e){this.mutableContent.local_url=e}setMobileActive(e){this.setAppDataItem(n.AppDataField.MobileActive,e)}}t.ThemeMutator=o},31924:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(74008),t),i(r(10043),t)},37461:(e,t)=>{var r,n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.EditorFontSize=t.EditorLineHeight=t.NewNoteTitleFormat=t.PrefKey=void 0,(o=t.PrefKey||(t.PrefKey={})).TagsPanelWidth="tagsPanelWidth",o.NotesPanelWidth="notesPanelWidth",o.EditorWidth="editorWidth",o.EditorLeft="editorLeft",o.EditorMonospaceEnabled="monospaceFont",o.EditorSpellcheck="spellcheck",o.EditorResizersEnabled="marginResizersEnabled",o.EditorLineHeight="editorLineHeight",o.EditorFontSize="editorFontSize",o.SortNotesBy="sortBy",o.SortNotesReverse="sortReverse",o.NotesShowArchived="showArchived",o.NotesShowTrashed="showTrashed",o.NotesHideProtected="hideProtected",o.NotesHidePinned="hidePinned",o.NotesHideNotePreview="hideNotePreview",o.NotesHideDate="hideDate",o.NotesHideTags="hideTags",o.NotesHideEditorIcon="hideEditorIcon",o.UseSystemColorScheme="useSystemColorScheme",o.AutoLightThemeIdentifier="autoLightThemeIdentifier",o.AutoDarkThemeIdentifier="autoDarkThemeIdentifier",o.NoteAddToParentFolders="noteAddToParentFolders",o.MobileSortNotesBy="mobileSortBy",o.MobileSortNotesReverse="mobileSortReverse",o.MobileNotesHideNotePreview="mobileHideNotePreview",o.MobileNotesHideDate="mobileHideDate",o.MobileNotesHideTags="mobileHideTags",o.MobileLastExportDate="mobileLastExportDate",o.MobileDoNotShowAgainUnsupportedEditors="mobileDoNotShowAgainUnsupportedEditors",o.MobileSelectedTagUuid="mobileSelectedTagUuid",o.MobileNotesHideEditorIcon="mobileHideEditorIcon",o.NewNoteTitleFormat="newNoteTitleFormat",o.CustomNoteTitleFormat="customNoteTitleFormat",o.UpdateSavingStatusIndicator="updateSavingStatusIndicator",o.DarkMode="darkMode",(i=t.NewNoteTitleFormat||(t.NewNoteTitleFormat={})).CurrentDateAndTime="CurrentDateAndTime",i.CurrentNoteCount="CurrentNoteCount",i.CustomFormat="CustomFormat",i.Empty="Empty",(n=t.EditorLineHeight||(t.EditorLineHeight={})).None="None",n.Tight="Tight",n.Snug="Snug",n.Normal="Normal",n.Relaxed="Relaxed",n.Loose="Loose",(r=t.EditorFontSize||(t.EditorFontSize={})).ExtraSmall="ExtraSmall",r.Small="Small",r.Normal="Normal",r.Medium="Medium",r.Large="Large"},1657:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SNUserPrefs=void 0;const n=r(59867),i=r(10256),o=r(95536);class a extends n.DecryptedItem{get isSingleton(){return!0}singletonPredicate(){return a.singletonPredicate}getPref(e){return this.getAppDomainValue(e)}}t.SNUserPrefs=a,a.singletonPredicate=new o.Predicate("content_type","=",i.ContentType.UserPrefs)},38222:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserPrefsMutator=void 0;const n=r(66276);class i extends n.DecryptedItemMutator{setPref(e,t){this.setAppDataItem(e,t)}}t.UserPrefsMutator=i},61109:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1657),t),i(r(38222),t),i(r(37461),t)},68990:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},72655:(e,t)=>{function r(e,t){return e.find((e=>e.uuid===t))}Object.defineProperty(t,"__esModule",{value:!0}),t.SureFindItem=t.FindItem=void 0,t.FindItem=r,t.SureFindItem=function(e,t){return r(e,t)}},69002:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemContentsDiffer=void 0;const n=r(9600);t.ItemContentsDiffer=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return!(0,n.ItemContentsEqual)(e.content,t.content,[...e.contentKeysToIgnoreWhenCheckingEquality(),...r],e.appDataContentKeysToIgnoreWhenCheckingEquality())}},9600:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemContentsEqual=void 0;const n=r(64657),i=r(96720);t.ItemContentsEqual=function(e,t,r,o){const a=(0,n.sortedCopy)(e);if(a.appData){const e=a.appData[i.DefaultAppDomain];(0,n.omitInPlace)(e,o),e?0===Object.keys(e).length&&delete a.appData:delete a.appData}(0,n.omitInPlace)(a,r);const s=(0,n.sortedCopy)(t);if(s.appData){const e=s.appData[i.DefaultAppDomain];(0,n.omitInPlace)(e,o),e?0===Object.keys(e).length&&delete s.appData:delete s.appData}return(0,n.omitInPlace)(s,r),JSON.stringify(a)===JSON.stringify(s)}},24320:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateItemFromPayload=t.CreateDecryptedItemFromPayload=t.RegisterItemClass=t.CreateDecryptedMutatorForItem=void 0;const n=r(10256),i=r(68728),o=r(23899),a=r(54246),s=r(61079),c=r(58892),l=r(3322),u=r(59867),d=r(55998),p=r(33652),h=r(72897),f=r(74008),y=r(1657),v=r(71554),g=r(10043),m=r(38222),b=r(83062),S=r(54712),w=r(57010),P=r(50943),_=r(66276),E=r(18667),C=r(89691),k={[n.ContentType.ActionsExtension]:{itemClass:s.SNActionsExtension,mutatorClass:b.ActionsExtensionMutator},[n.ContentType.Component]:{itemClass:c.SNComponent,mutatorClass:S.ComponentMutator},[n.ContentType.Editor]:{itemClass:l.SNEditor},[n.ContentType.ExtensionRepo]:{itemClass:a.SNFeatureRepo},[n.ContentType.File]:{itemClass:o.FileItem,mutatorClass:v.FileMutator},[n.ContentType.Note]:{itemClass:d.SNNote,mutatorClass:P.NoteMutator},[n.ContentType.SmartView]:{itemClass:p.SmartView,mutatorClass:w.TagMutator},[n.ContentType.Tag]:{itemClass:h.SNTag,mutatorClass:w.TagMutator},[n.ContentType.Theme]:{itemClass:f.SNTheme,mutatorClass:g.ThemeMutator},[n.ContentType.UserPrefs]:{itemClass:y.SNUserPrefs,mutatorClass:m.UserPrefsMutator}};function O(e){const t=k[e.content_type];return new(t?t.itemClass:u.DecryptedItem)(e)}t.CreateDecryptedMutatorForItem=function(e,t){var r;const n=null===(r=k[e.content_type])||void 0===r?void 0:r.mutatorClass;return n?new n(e,t):new _.DecryptedItemMutator(e,t)},t.RegisterItemClass=function(e,t,r){const n={itemClass:t,mutatorClass:r};k[e]=n},t.CreateDecryptedItemFromPayload=O,t.CreateItemFromPayload=function(e){if((0,E.isDecryptedPayload)(e))return O(e);if((0,E.isEncryptedPayload)(e))return new i.EncryptedItem(e);if((0,E.isDeletedPayload)(e))return new C.DeletedItem(e);throw Error("Unhandled case in CreateItemFromPayload")}},45349:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CopyPayloadWithContentOverride=void 0;const n=r(70999);t.CopyPayloadWithContentOverride=function(e,t){const r=Object.assign(Object.assign({},e.ejected()),{content:Object.assign(Object.assign({},e.content),t)});return(0,n.CreatePayload)(r,e.source)}},70999:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePayload=void 0;const n=r(50987),i=r(63188),o=r(38111),a=r(82818);t.CreatePayload=function(e,t){if((0,a.isDecryptedTransferPayload)(e))return new o.DecryptedPayload(e,t);if((0,a.isEncryptedTransferPayload)(e))return new n.EncryptedPayload(e,t);if((0,a.isDeletedTransferPayload)(e))return new i.DeletedPayload(e,t);throw Error("Unhandled case in CreatePayload")}},57330:(e,t)=>{function r(e,t){return e.find((e=>e.uuid===t))}Object.defineProperty(t,"__esModule",{value:!0}),t.SureFindPayload=t.FindPayload=void 0,t.FindPayload=r,t.SureFindPayload=function(e,t){return r(e,t)}},55687:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadContentsEqual=void 0;const n=r(24320);t.PayloadContentsEqual=function(e,t){const r=(0,n.CreateDecryptedItemFromPayload)(e),i=(0,n.CreateDecryptedItemFromPayload)(t);return r.isItemContentEqualWith(i)}},97202:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateNonDecryptedPayloadSplit=t.CreatePayloadSplitWithDiscardables=t.CreatePayloadSplit=void 0;const n=r(98890);t.CreatePayloadSplit=function(e){const t={encrypted:[],decrypted:[],deleted:[]};for(const r of e)if((0,n.isDecryptedPayload)(r))t.decrypted.push(r);else if((0,n.isEncryptedPayload)(r))t.encrypted.push(r);else{if(!(0,n.isDeletedPayload)(r))throw Error("Unhandled case in CreatePayloadSplit");t.deleted.push(r)}return t},t.CreatePayloadSplitWithDiscardables=function(e){const t={encrypted:[],decrypted:[],deleted:[],discardable:[]};for(const r of e)if((0,n.isDecryptedPayload)(r))t.decrypted.push(r);else if((0,n.isEncryptedPayload)(r))t.encrypted.push(r);else{if(!(0,n.isDeletedPayload)(r))throw Error("Unhandled case in CreatePayloadSplitWithDiscardables");r.discardable?t.discardable.push(r):t.deleted.push(r)}return t},t.CreateNonDecryptedPayloadSplit=function(e){const t={encrypted:[],deleted:[]};for(const r of e)if((0,n.isEncryptedPayload)(r))t.encrypted.push(r);else{if(!(0,n.isDeletedPayload)(r))throw Error("Unhandled case in CreateNonDecryptedPayloadSplit");t.deleted.push(r)}return t}},24439:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadsByAlternatingUuid=void 0;const n=r(63188),i=r(10256),o=r(64657),a=r(98890),s=r(43446),c=r(6754);t.PayloadsByAlternatingUuid=function(e,t){const r=[],l=e.copyAsSyncResolved({uuid:o.UuidGenerator.GenerateUuid(),dirty:!0,dirtyIndex:(0,c.getIncrementedDirtyIndex)(),lastSyncBegan:void 0,lastSyncEnd:new Date,duplicate_of:e.uuid});r.push(l);const u=(0,s.PayloadsByUpdatingReferencingPayloadReferences)(e,t,[l],[e.uuid]);if((0,o.extendArray)(r,u),e.content_type===i.ContentType.ItemsKey){const n=t.all().filter((t=>(0,a.isEncryptedPayload)(t)&&t.items_key_id===e.uuid)).map((e=>e.copyAsSyncResolved({items_key_id:l.uuid,dirty:!0,dirtyIndex:(0,c.getIncrementedDirtyIndex)(),lastSyncEnd:new Date})));n.length>0&&(0,o.extendArray)(r,n)}const d=new n.DeletedPayload({created_at:e.created_at,updated_at:e.updated_at,created_at_timestamp:e.created_at_timestamp,updated_at_timestamp:e.updated_at_timestamp,dirty:!1,content:void 0,uuid:e.uuid,content_type:e.content_type,deleted:!0},e.source);return r.push(d),r}},30489:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadsByDuplicating=void 0;const n=r(64657),i=r(43446),o=r(98890),a=r(6754);t.PayloadsByDuplicating=function(e){const{payload:t,baseCollection:r,isConflict:s,additionalContent:c,source:l}=e,u=[],d={uuid:n.UuidGenerator.GenerateUuid(),dirty:!0,dirtyIndex:(0,a.getIncrementedDirtyIndex)(),lastSyncBegan:void 0,lastSyncEnd:new Date,duplicate_of:t.uuid};let p;if((0,o.isDecryptedPayload)(t)){const e=Object.assign(Object.assign({},t.content),c);s&&(e.conflict_of=t.uuid),p=t.copyAsSyncResolved(Object.assign(Object.assign({},d),{content:e,deleted:!1}))}else p=t.copyAsSyncResolved(Object.assign({},d),l||t.source);if(u.push(p),(0,o.isDecryptedPayload)(t)&&(0,o.isDecryptedPayload)(p)){const e=(0,i.PayloadsByUpdatingReferencingPayloadReferences)(t,r,[p]);(0,n.extendArray)(u,e)}return u}},43446:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadsByUpdatingReferencingPayloadReferences=void 0;const n=r(31773),i=r(18667),o=r(6754);t.PayloadsByUpdatingReferencingPayloadReferences=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const s=t.elementsReferencingElement(e).filter(i.isDecryptedPayload),c=[];for(const t of s){const i=t.content.references.slice(),s=t.getReference(e.uuid);for(const e of r){const t=Object.assign(Object.assign({},s),{uuid:e.uuid,content_type:e.content_type});i.push(t)}for(const e of a)(0,n.remove)(i,{uuid:e});const l=t.copyAsSyncResolved({dirty:!0,dirtyIndex:(0,o.getIncrementedDirtyIndex)(),lastSyncEnd:new Date,content:Object.assign(Object.assign({},t.content),{references:i})});c.push(l)}return c}},44225:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(36502),t),i(r(67427),t),i(r(84577),t),i(r(27897),t),i(r(44346),t),i(r(67463),t),i(r(92590),t),i(r(52795),t),i(r(23767),t),i(r(859),t),i(r(85206),t),i(r(76422),t),i(r(1341),t),i(r(22369),t),i(r(29029),t),i(r(8656),t),i(r(16462),t),i(r(49942),t),i(r(15559),t),i(r(53186),t),i(r(53771),t),i(r(81479),t),i(r(84656),t),i(r(12922),t),i(r(18667),t),i(r(82818),t),i(r(63835),t),i(r(80625),t),i(r(33132),t),i(r(14668),t),i(r(51252),t),i(r(28585),t),i(r(6689),t),i(r(89320),t),i(r(88324),t),i(r(95099),t),i(r(30969),t),i(r(28001),t),i(r(74520),t),i(r(12714),t),i(r(6311),t),i(r(35082),t),i(r(86785),t),i(r(1750),t),i(r(6754),t),i(r(98295),t),i(r(69089),t),i(r(87425),t),i(r(63874),t),i(r(66658),t),i(r(83883),t),i(r(4103),t),i(r(41291),t),i(r(37436),t),i(r(72650),t),i(r(72650),t),i(r(54981),t),i(r(36640),t),i(r(95536),t),i(r(25929),t),i(r(93261),t),i(r(15834),t),i(r(69109),t),i(r(28346),t),i(r(49740),t),i(r(59536),t),i(r(3338),t),i(r(23251),t),i(r(53209),t),i(r(9665),t),i(r(31924),t),i(r(61109),t),i(r(68990),t),i(r(72655),t),i(r(69002),t),i(r(9600),t),i(r(24320),t),i(r(45349),t),i(r(70999),t),i(r(57330),t),i(r(55687),t),i(r(24439),t),i(r(30489),t),i(r(97202),t)},16418:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(44225),t)},14017:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},90200:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},14499:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},92233:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},50916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},79482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},15960:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},64952:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75958:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},35634:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},88887:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},33755:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},19050:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},50776:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},19999:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9399:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDisplayableError=void 0;class r{constructor(e,t,r){this.text=e,this.title=t,this.tag=r,console.error("Client Displayable Error:",e,t||"",r||"")}static FromError(e){return new r(e.message,void 0,e.tag)}}t.ClientDisplayableError=r},62989:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},55152:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},86848:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},250:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},98913:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},92306:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},83483:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},87282:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},68090:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorResponseExpiredToken=void 0;const n=r(83964);t.isErrorResponseExpiredToken=function(e){return e.status===n.StatusCode.HttpStatusExpiredAccessToken}},24621:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},62990:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},48540:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},83964:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCode=void 0,(r=t.StatusCode||(t.StatusCode={}))[r.LocalValidationError=10]="LocalValidationError",r[r.CanceledMfa=11]="CanceledMfa",r[r.UnknownError=12]="UnknownError",r[r.HttpStatusMinSuccess=200]="HttpStatusMinSuccess",r[r.HttpStatusNoContent=204]="HttpStatusNoContent",r[r.HttpStatusMaxSuccess=299]="HttpStatusMaxSuccess",r[r.HttpStatusExpiredAccessToken=498]="HttpStatusExpiredAccessToken",r[r.HttpStatusInvalidSession=401]="HttpStatusInvalidSession",r[r.HttpStatusForbidden=403]="HttpStatusForbidden",r[r.HttpBadRequest=400]="HttpBadRequest"},29359:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ApiEndpointParam=void 0,(r=t.ApiEndpointParam||(t.ApiEndpointParam={})).LastSyncToken="sync_token",r.PaginationToken="cursor_token",r.SyncDlLimit="limit",r.SyncPayloads="items",r.ApiVersion="api"},71491:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},83088:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},25869:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConflictType=void 0,(r=t.ConflictType||(t.ConflictType={})).ConflictingData="sync_conflict",r.UuidConflict="uuid_conflict",r.ContentTypeError="content_type_error",r.ContentError="content_error",r.ReadOnlyError="readonly_error",r.UuidError="uuid_error",r.SyncError="sync_error"},1126:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},98529:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(29359)},68994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},72469:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},43801:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},27619:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},30777:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},79858:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},83162:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},79588:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},12022:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},32444:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},23793:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},52735:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},52217:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2291:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},88791:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},94647:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},77483:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},47451:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},34648:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},56833:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},84078:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6893:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},96850:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(14017),t),i(r(90200),t),i(r(14499),t),i(r(92233),t),i(r(50916),t),i(r(79482),t),i(r(15960),t),i(r(64952),t),i(r(75958),t),i(r(35634),t),i(r(88887),t),i(r(33755),t),i(r(19050),t),i(r(50776),t),i(r(19999),t),i(r(9399),t),i(r(62989),t),i(r(55152),t),i(r(86848),t),i(r(250),t),i(r(98913),t),i(r(92306),t),i(r(83483),t),i(r(87282),t),i(r(68090),t),i(r(24621),t),i(r(62990),t),i(r(48540),t),i(r(83964),t),i(r(29359),t),i(r(71491),t),i(r(83088),t),i(r(25869),t),i(r(1126),t),i(r(98529),t),i(r(68994),t),i(r(72469),t),i(r(43801),t),i(r(7),t),i(r(27619),t),i(r(30777),t),i(r(6841),t),i(r(79858),t),i(r(83162),t),i(r(79588),t),i(r(12022),t),i(r(32444),t),i(r(23793),t),i(r(52735),t),i(r(52217),t),i(r(2291),t),i(r(88791),t),i(r(94647),t),i(r(77483),t),i(r(47451),t),i(r(34648),t),i(r(56833),t),i(r(84078),t),i(r(6893),t)},84945:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(96850),t)},17656:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AlertService=t.ButtonType=void 0,(r=t.ButtonType||(t.ButtonType={}))[r.Info=0]="Info",r[r.Danger=1]="Danger",t.AlertService=class{showErrorAlert(e){return this.alert(e.text,e.title)}}},69207:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiServiceEvent=void 0,(t.ApiServiceEvent||(t.ApiServiceEvent={})).MetaReceived="MetaReceived"},58864:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},54943:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},80091:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationStage=void 0,(r=t.ApplicationStage||(t.ApplicationStage={}))[r.PreparingForLaunch_0=0]="PreparingForLaunch_0",r[r.ReadyForLaunch_05=.5]="ReadyForLaunch_05",r[r.StorageDecrypted_09=.9]="StorageDecrypted_09",r[r.Launched_10=1]="Launched_10",r[r.LoadingDatabase_11=1.1]="LoadingDatabase_11",r[r.LoadedDatabase_12=1.2]="LoadedDatabase_12",r[r.FullSyncCompleted_13=1.3]="FullSyncCompleted_13",r[r.SignedIn_30=3]="SignedIn_30"},87941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},27555:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DeinitMode=void 0,(r=t.DeinitMode||(t.DeinitMode={})).Soft="Soft",r.Hard="Hard"},63840:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DeinitSource=void 0,(r=t.DeinitSource||(t.DeinitSource={}))[r.SignOut=1]="SignOut",r[r.Lock=2]="Lock",r[r.SwitchWorkspace=3]="SwitchWorkspace",r[r.SignOutAll=4]="SignOutAll"},85788:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},30935:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FilesBackupService=void 0;const i=r(10256),o=r(16418),a=r(84945),s=r(10687);class c extends s.AbstractService{constructor(e,t,r,n,a,s){super(s),this.items=e,this.api=t,this.encryptor=r,this.device=n,this.status=a,this.internalEventBus=s,this.pendingFiles=new Set,this.itemsObserverDisposer=e.addObserver(i.ContentType.File,(e=>{let{changed:t,inserted:r,source:n}=e;[o.PayloadEmitSource.LocalDatabaseLoaded,o.PayloadEmitSource.RemoteSaved,o.PayloadEmitSource.RemoteRetrieved].includes(n)&&this.handleChangedFiles([...t,...r])}))}deinit(){this.itemsObserverDisposer()}isFilesBackupsEnabled(){return this.device.isFilesBackupsEnabled()}enableFilesBackups(){return n(this,void 0,void 0,(function*(){yield this.device.enableFilesBackups(),(yield this.isFilesBackupsEnabled())&&this.backupAllFiles()}))}backupAllFiles(){const e=this.items.getItems(i.ContentType.File);this.handleChangedFiles(e)}disableFilesBackups(){return this.device.disableFilesBackups()}changeFilesBackupsLocation(){return this.device.changeFilesBackupsLocation()}getFilesBackupsLocation(){return this.device.getFilesBackupsLocation()}openFilesBackupsLocation(){return this.device.openFilesBackupsLocation()}getBackupsMapping(){return n(this,void 0,void 0,(function*(){return(yield this.device.getFilesBackupsMappingFile()).files}))}handleChangedFiles(e){return n(this,void 0,void 0,(function*(){if(0===e.length)return;if(!(yield this.isFilesBackupsEnabled()))return;const t=yield this.getBackupsMapping();for(const r of e)this.pendingFiles.has(r.uuid)||null==t[r.uuid]&&(this.pendingFiles.add(r.uuid),yield this.performBackupOperation(r),this.pendingFiles.delete(r.uuid))}))}performBackupOperation(e){return n(this,void 0,void 0,(function*(){const t=this.status.addMessage("Backing up file ".concat(e.name,"...")),r=yield this.encryptor.encryptSplitSingle({usesItemsKeyWithKeyLookup:{items:[e.payload]}}),n=this.items.getDisplayableItemsKeys().find((e=>e.uuid===r.items_key_id));if(!n)return"failed";const i=yield this.encryptor.encryptSplitSingle({usesRootKeyWithKeyLookup:{items:[n.payload]}}),s=yield this.api.createFileValetToken(e.remoteIdentifier,"read");if(s instanceof a.ClientDisplayableError)return"failed";const c={info:{warning:"Do not edit this file.",information:"The file and key data below is encrypted with your account password.",instructions:"Drag and drop this metadata file into the File Backups preferences pane in the Standard Notes desktop or web application interface."},file:(0,o.CreateEncryptedBackupFileContextPayload)(r.ejected()),itemsKey:(0,o.CreateEncryptedBackupFileContextPayload)(i.ejected()),version:"1.0.0"},l=JSON.stringify(c,null,2),u=yield this.device.saveFilesBackupsFile(e.uuid,l,{chunkSizes:e.encryptedChunkSizes,url:this.api.getFilesDownloadUrl(),valetToken:s});if(this.status.removeMessage(t),"failed"===u){const t=this.status.addMessage("Failed to back up ".concat(e.name,"..."));setTimeout((()=>{this.status.removeMessage(t)}),2e3)}return u}))}}t.FilesBackupService=c},74858:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Challenge=void 0;const n=r(64657),i=r(58325),o=r(34210);t.Challenge=class{constructor(e,t,r,n,i){this.prompts=e,this.reason=t,this.cancelable=r,this._heading=n,this._subheading=i,this.id=Math.random(),Object.freeze(this)}get modalTitle(){return this.reason===o.ChallengeReason.Migration?i.ChallengeModalTitle.Migration:i.ChallengeModalTitle.Generic}get heading(){if(this._heading)return this._heading;switch(this.reason){case o.ChallengeReason.ApplicationUnlock:return i.ChallengeStrings.UnlockApplication;case o.ChallengeReason.Migration:return i.ChallengeStrings.EnterLocalPasscode;case o.ChallengeReason.ResaveRootKey:return i.ChallengeStrings.EnterPasscodeForRootResave;case o.ChallengeReason.ProtocolUpgrade:return i.ChallengeStrings.EnterCredentialsForProtocolUpgrade;case o.ChallengeReason.AccessProtectedNote:return i.ChallengeStrings.NoteAccess;case o.ChallengeReason.AccessProtectedFile:return i.ChallengeStrings.FileAccess;case o.ChallengeReason.ImportFile:return i.ChallengeStrings.ImportFile;case o.ChallengeReason.AddPasscode:return i.ChallengeStrings.AddPasscode;case o.ChallengeReason.RemovePasscode:return i.ChallengeStrings.RemovePasscode;case o.ChallengeReason.ChangePasscode:return i.ChallengeStrings.ChangePasscode;case o.ChallengeReason.ChangeAutolockInterval:return i.ChallengeStrings.ChangeAutolockInterval;case o.ChallengeReason.CreateDecryptedBackupWithProtectedItems:return i.ChallengeStrings.EnterCredentialsForDecryptedBackupDownload;case o.ChallengeReason.RevokeSession:return i.ChallengeStrings.RevokeSession;case o.ChallengeReason.DecryptEncryptedFile:return i.ChallengeStrings.DecryptEncryptedFile;case o.ChallengeReason.ExportBackup:return i.ChallengeStrings.ExportBackup;case o.ChallengeReason.DisableBiometrics:return i.ChallengeStrings.DisableBiometrics;case o.ChallengeReason.UnprotectNote:return i.ChallengeStrings.UnprotectNote;case o.ChallengeReason.UnprotectFile:return i.ChallengeStrings.UnprotectFile;case o.ChallengeReason.SearchProtectedNotesText:return i.ChallengeStrings.SearchProtectedNotesText;case o.ChallengeReason.SelectProtectedNote:return i.ChallengeStrings.SelectProtectedNote;case o.ChallengeReason.DisableMfa:return i.ChallengeStrings.DisableMfa;case o.ChallengeReason.DeleteAccount:return i.ChallengeStrings.DeleteAccount;case o.ChallengeReason.AuthorizeNoteForListed:return i.ChallengeStrings.ListedAuthorization;case o.ChallengeReason.Custom:return"";default:return(0,n.assertUnreachable)(this.reason)}}get subheading(){return this._subheading?this._subheading:this.reason===o.ChallengeReason.Migration?i.ChallengeStrings.EnterPasscodeForMigration:void 0}hasPromptForValidationType(e){for(const t of this.prompts)if(t.validation===e)return!0;return!1}}},62016:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2854:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},49001:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},94224:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChallengePrompt=void 0;const n=r(64657),i=r(10162),o=r(51013);t.ChallengePrompt=class{constructor(e,t,r){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;switch(this.validation=e,this.secureTextEntry=a,this.keyboardType=s,this.initialValue=c,this.id=Math.random(),this.validation){case i.ChallengeValidation.AccountPassword:this.title=null!=t?t:o.ChallengePromptTitle.AccountPassword,this.placeholder=null!=r?r:o.ChallengePromptTitle.AccountPassword,this.validates=!0;break;case i.ChallengeValidation.LocalPasscode:this.title=null!=t?t:o.ChallengePromptTitle.LocalPasscode,this.placeholder=null!=r?r:o.ChallengePromptTitle.LocalPasscode,this.validates=!0;break;case i.ChallengeValidation.Biometric:this.title=null!=t?t:o.ChallengePromptTitle.Biometrics,this.placeholder=null!=r?r:"",this.validates=!0;break;case i.ChallengeValidation.ProtectionSessionDuration:this.title=null!=t?t:o.ChallengePromptTitle.RememberFor,this.placeholder=null!=r?r:"",this.validates=!0;break;case i.ChallengeValidation.None:this.title=null!=t?t:"",this.placeholder=null!=r?r:"",this.validates=!1;break;default:(0,n.assertUnreachable)(this.validation)}Object.freeze(this)}}},24840:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},51013:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChallengePromptTitle=void 0,t.ChallengePromptTitle={AccountPassword:"Account Password",LocalPasscode:"Application Passcode",Biometrics:"Biometrics",RememberFor:"Remember For",Mfa:"Two-factor Authentication Code"}},99777:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},12712:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ChallengeKeyboardType=void 0,(r=t.ChallengeKeyboardType||(t.ChallengeKeyboardType={})).Alphanumeric="default",r.Numeric="numeric"},11817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},34210:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ChallengeReason=void 0,(r=t.ChallengeReason||(t.ChallengeReason={}))[r.AccessProtectedFile=0]="AccessProtectedFile",r[r.AccessProtectedNote=1]="AccessProtectedNote",r[r.AddPasscode=2]="AddPasscode",r[r.ApplicationUnlock=3]="ApplicationUnlock",r[r.ChangeAutolockInterval=4]="ChangeAutolockInterval",r[r.ChangePasscode=5]="ChangePasscode",r[r.CreateDecryptedBackupWithProtectedItems=6]="CreateDecryptedBackupWithProtectedItems",r[r.Custom=7]="Custom",r[r.DecryptEncryptedFile=8]="DecryptEncryptedFile",r[r.DisableBiometrics=9]="DisableBiometrics",r[r.DisableMfa=10]="DisableMfa",r[r.ExportBackup=11]="ExportBackup",r[r.ImportFile=12]="ImportFile",r[r.Migration=13]="Migration",r[r.ProtocolUpgrade=14]="ProtocolUpgrade",r[r.RemovePasscode=15]="RemovePasscode",r[r.ResaveRootKey=16]="ResaveRootKey",r[r.RevokeSession=17]="RevokeSession",r[r.SearchProtectedNotesText=18]="SearchProtectedNotesText",r[r.SelectProtectedNote=19]="SelectProtectedNote",r[r.UnprotectFile=20]="UnprotectFile",r[r.UnprotectNote=21]="UnprotectNote",r[r.DeleteAccount=22]="DeleteAccount",r[r.AuthorizeNoteForListed=23]="AuthorizeNoteForListed"},10162:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ChallengeValidation=void 0,(r=t.ChallengeValidation||(t.ChallengeValidation={}))[r.None=0]="None",r[r.LocalPasscode=1]="LocalPasscode",r[r.AccountPassword=2]="AccountPassword",r[r.Biometric=3]="Biometric",r[r.ProtectionSessionDuration=4]="ProtectionSessionDuration"},75967:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateChallengeValue=void 0,t.CreateChallengeValue=function(e,t){return{prompt:e,value:t}}},30306:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(74858),t),i(r(62016),t),i(r(2854),t),i(r(49001),t),i(r(94224),t),i(r(24840),t),i(r(51013),t),i(r(99777),t),i(r(12712),t),i(r(11817),t),i(r(34210),t),i(r(10162),t),i(r(75967),t)},47205:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},38796:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentViewerError=void 0,(r=t.ComponentViewerError||(t.ComponentViewerError={})).OfflineRestricted="OfflineRestricted",r.MissingUrl="MissingUrl"},96040:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},18908:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDesktopDevice=void 0;const n=r(16418);t.isDesktopDevice=function(e){return e.environment===n.Environment.Desktop}},48531:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},61235:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},42101:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},92820:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},84136:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileDevice=void 0;const n=r(16418);t.isMobileDevice=function(e){return e.environment===n.Environment.Mobile}},6113:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76081:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},47084:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DecryptBackupFile=void 0;const i=r(10256),o=r(75082),a=r(16418),s=r(84945),c=r(64657);function l(e,t){return n(this,void 0,void 0,(function*(){const r=[],n=[];e.forEach((e=>{e.content_type===i.ContentType.ItemsKey&&(0,a.isDecryptedPayload)(e)?r.push(e):(0,a.isEncryptedPayload)(e)&&n.push(e)}));const o=r.map((e=>(0,a.CreateDecryptedItemFromPayload)(e)));return d(n,o,t)}))}function u(e,t,r,n,o){let a;if(e.items_key_id&&(a=r.itemsKeyForPayload(e),a))return a;if(a=t.find((t=>e.items_key_id===t.uuid)),a)return a;if(!n)return;const s=e.version;return(0,i.leftVersionGreaterThanOrEqualToRight)(n.version,i.ProtocolVersion.V004)?a=r.defaultItemsKeyForItemVersion(s,t):(0,i.compareVersions)(s,i.ProtocolVersion.V003)<=0&&(a=o),a}function d(e,t,r,i,a){return n(this,void 0,void 0,(function*(){const n=[];for(const s of e)if(!(0,o.ContentTypeUsesRootKeyEncryption)(s.content_type))try{const e=u(s,t,r,i,a);if(!e){n.push(s.copy({errorDecrypting:!0}));continue}if((0,o.isItemsKey)(e)){const t=yield r.decryptSplitSingle({usesItemsKey:{items:[s],key:e}});n.push(t)}else{const t=yield r.decryptSplitSingle({usesRootKey:{items:[s],key:e}});n.push(t)}}catch(e){n.push(s.copy({errorDecrypting:!0})),console.error("Error decrypting payload",s,e)}return n}))}function p(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=[],s=yield o.computeRootKey(e,t),l=r.filter((e=>e.content_type===i.ContentType.ItemsKey)),u=yield o.decryptSplit({usesRootKey:{items:l,key:s}});(0,c.extendArray)(n,u);const p=yield d(r,u.filter(a.isDecryptedPayload).map((e=>(0,a.CreateDecryptedItemFromPayload)(e))),o,t,s);return(0,c.extendArray)(n,p),n}))}t.DecryptBackupFile=function(e,t,r){return n(this,void 0,void 0,(function*(){const n=e.items.map((e=>{if((0,a.isEncryptedTransferPayload)(e))return new a.EncryptedPayload(e);if((0,a.isDecryptedTransferPayload)(e))return new a.DecryptedPayload(e);throw Error("Unhandled case in decryptBackupFile")})),{encrypted:c,decrypted:u}=(0,a.CreatePayloadSplit)(n),d=function(e,t){if(e.keyParams||e.auth_params)return o.BackupFileType.Encrypted;{const e=t.find(a.isEncryptedPayload),r=t.find((e=>e.content_type===i.ContentType.ItemsKey&&(0,a.isDecryptedPayload)(e)));return e&&r?o.BackupFileType.EncryptedWithNonEncryptedItemsKey:e?o.BackupFileType.Corrupt:o.BackupFileType.FullyDecrypted}}(e,n);switch(d){case o.BackupFileType.Corrupt:return new s.ClientDisplayableError("Invalid backup file.");case o.BackupFileType.Encrypted:{if(!r)throw Error("Attempting to decrypt encrypted file with no password");const n=e.keyParams||e.auth_params;return[...u,...yield p(r,(0,o.CreateAnyKeyParams)(n),c,t)]}case o.BackupFileType.EncryptedWithNonEncryptedItemsKey:return[...u,...yield l(n,t)];case o.BackupFileType.FullyDecrypted:return[...u,...c]}}))}},52567:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionService=void 0;const i=r(75082),o=r(16418),a=r(64657),s=r(10256),c=r(10687),l=r(41479),u=r(63706),d=r(49184),p=r(47084),h=r(13744);class f extends c.AbstractService{constructor(e,t,r,n,o,s,c){super(c),this.itemManager=e,this.payloadManager=t,this.deviceInterface=r,this.storageService=n,this.identifier=o,this.crypto=s,this.internalEventBus=c,this.crypto=s,this.operatorManager=new i.OperatorManager(s),this.itemsEncryption=new l.ItemsEncryptionService(e,t,n,this.operatorManager,c),this.rootKeyEncryption=new d.RootKeyEncryptionService(this.itemManager,this.operatorManager,this.deviceInterface,this.storageService,this.identifier,this.internalEventBus),this.rootKeyObserverDisposer=this.rootKeyEncryption.addEventObserver((e=>{this.itemsEncryption.userVersion=this.getUserVersion(),e===i.RootKeyServiceEvent.RootKeyStatusChanged&&this.notifyEvent(h.EncryptionServiceEvent.RootKeyStatusChanged)})),a.UuidGenerator.SetGenerator(this.crypto.generateUUID)}deinit(){this.itemManager=void 0,this.payloadManager=void 0,this.deviceInterface=void 0,this.storageService=void 0,this.crypto=void 0,this.operatorManager=void 0,this.rootKeyObserverDisposer(),this.rootKeyObserverDisposer=void 0,this.itemsEncryption.deinit(),this.itemsEncryption=void 0,this.rootKeyEncryption.deinit(),this.rootKeyEncryption=void 0,super.deinit()}initialize(){return n(this,void 0,void 0,(function*(){yield this.rootKeyEncryption.initialize()}))}getEncryptionDisplayName(){return n(this,void 0,void 0,(function*(){const e=yield this.rootKeyEncryption.getEncryptionSourceVersion();if(e)return this.operatorManager.operatorForVersion(e).getEncryptionDisplayName();throw Error("Attempting to access encryption display name wtihout source")}))}getLatestVersion(){return s.ProtocolVersionLatest}hasAccount(){return this.rootKeyEncryption.hasAccount()}hasRootKeyEncryptionSource(){return this.rootKeyEncryption.hasRootKeyEncryptionSource()}getUserVersion(){return this.rootKeyEncryption.getUserVersion()}upgradeAvailable(){return n(this,void 0,void 0,(function*(){const e=this.accountUpgradeAvailable(),t=yield this.passcodeUpgradeAvailable();return e||t}))}getSureDefaultItemsKey(){return this.itemsEncryption.getDefaultItemsKey()}repersistAllItems(){return n(this,void 0,void 0,(function*(){return this.itemsEncryption.repersistAllItems()}))}reencryptItemsKeys(){return n(this,void 0,void 0,(function*(){yield this.rootKeyEncryption.reencryptItemsKeys()}))}createNewItemsKeyWithRollback(){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.createNewItemsKeyWithRollback()}))}decryptErroredPayloads(){return n(this,void 0,void 0,(function*(){yield this.itemsEncryption.decryptErroredPayloads()}))}itemsKeyForPayload(e){return this.itemsEncryption.itemsKeyForPayload(e)}defaultItemsKeyForItemVersion(e,t){return this.itemsEncryption.defaultItemsKeyForItemVersion(e,t)}encryptSplitSingle(e){return n(this,void 0,void 0,(function*(){return(yield this.encryptSplit(e))[0]}))}encryptSplit(e){return n(this,void 0,void 0,(function*(){const t=[];if(e.usesRootKey){const r=yield this.rootKeyEncryption.encryptPayloads(e.usesRootKey.items,e.usesRootKey.key);(0,a.extendArray)(t,r)}if(e.usesItemsKey){const r=yield this.itemsEncryption.encryptPayloads(e.usesItemsKey.items,e.usesItemsKey.key);(0,a.extendArray)(t,r)}if(e.usesRootKeyWithKeyLookup){const r=yield this.rootKeyEncryption.encryptPayloadsWithKeyLookup(e.usesRootKeyWithKeyLookup.items);(0,a.extendArray)(t,r)}if(e.usesItemsKeyWithKeyLookup){const r=yield this.itemsEncryption.encryptPayloadsWithKeyLookup(e.usesItemsKeyWithKeyLookup.items);(0,a.extendArray)(t,r)}return t.map((t=>{const r=(0,i.FindPayloadInEncryptionSplit)(t.uuid,e);return new o.EncryptedPayload(Object.assign(Object.assign(Object.assign({},r),t),{waitingForKey:!1,errorDecrypting:!1}))}))}))}decryptSplitSingle(e){return n(this,void 0,void 0,(function*(){return(yield this.decryptSplit(e))[0]}))}decryptSplit(e){return n(this,void 0,void 0,(function*(){const t=[];if(e.usesRootKey){const r=yield this.rootKeyEncryption.decryptPayloads(e.usesRootKey.items,e.usesRootKey.key);(0,a.extendArray)(t,r)}if(e.usesRootKeyWithKeyLookup){const r=yield this.rootKeyEncryption.decryptPayloadsWithKeyLookup(e.usesRootKeyWithKeyLookup.items);(0,a.extendArray)(t,r)}if(e.usesItemsKey){const r=yield this.itemsEncryption.decryptPayloads(e.usesItemsKey.items,e.usesItemsKey.key);(0,a.extendArray)(t,r)}if(e.usesItemsKeyWithKeyLookup){const r=yield this.itemsEncryption.decryptPayloadsWithKeyLookup(e.usesItemsKeyWithKeyLookup.items);(0,a.extendArray)(t,r)}return t.map((t=>{const r=(0,i.FindPayloadInDecryptionSplit)(t.uuid,e);return(0,i.isErrorDecryptingParameters)(t)?new o.EncryptedPayload(Object.assign(Object.assign({},r.ejected()),t)):new o.DecryptedPayload(Object.assign(Object.assign({},r.ejected()),t))}))}))}accountUpgradeAvailable(){const e=this.getUserVersion();return!!e&&e!==s.ProtocolVersionLatest}passcodeUpgradeAvailable(){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.passcodeUpgradeAvailable()}))}platformSupportsKeyDerivation(e){return(0,s.compareVersions)(e.version,s.ProtocolVersion.V004)>=0||!!(0,a.isWebCryptoAvailable)()||(0,a.isReactNativeEnvironment)()}supportedVersions(){return[s.ProtocolVersion.V001,s.ProtocolVersion.V002,s.ProtocolVersion.V003,s.ProtocolVersion.V004]}isVersionNewerThanLibraryVersion(e){const t=s.ProtocolVersionLatest;return 1===(0,s.compareVersions)(e,t)}costMinimumForVersion(e){if((0,s.compareVersions)(e,s.ProtocolVersion.V003)>=0)throw"Cost minimums only apply to versions <= 002";if(e===s.ProtocolVersion.V001)return i.V001Algorithm.PbkdfMinCost;if(e===s.ProtocolVersion.V002)return i.V002Algorithm.PbkdfMinCost;throw"Invalid version for cost minimum: ".concat(e)}computeRootKey(e,t){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.computeRootKey(e,t)}))}createRootKey(e,t,r,i){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.createRootKey(e,t,r,i)}))}decryptBackupFile(e,t){return n(this,void 0,void 0,(function*(){return yield(0,p.DecryptBackupFile)(e,this,t)}))}createKeyParams(e){return(0,i.CreateAnyKeyParams)(e)}createEncryptedBackupFile(){return n(this,void 0,void 0,(function*(){const e=this.itemManager.items.map((e=>e.payload)),t=(0,i.SplitPayloadsByEncryptionType)(e),r=(0,i.CreateEncryptionSplitWithKeyLookup)(t),n=(yield this.encryptSplit(r)).map((e=>(0,o.CreateEncryptedBackupFileContextPayload)(e))),a={version:s.ProtocolVersionLatest,items:n},c=yield this.getRootKeyParams();return a.keyParams=null==c?void 0:c.getPortableValue(),a}))}createDecryptedBackupFile(){const e=this.payloadManager.nonDeletedItems.filter((e=>e.content_type!==s.ContentType.ItemsKey));return{version:s.ProtocolVersionLatest,items:e.map((e=>(0,o.isDecryptedPayload)(e)?(0,o.CreateDecryptedBackupFileContextPayload)(e):(0,o.isEncryptedPayload)(e)?(0,o.CreateEncryptedBackupFileContextPayload)(e):void 0)).filter(a.isNotUndefined)}}hasPasscode(){return this.rootKeyEncryption.hasPasscode()}isPasscodeLocked(){return n(this,void 0,void 0,(function*(){return(yield this.rootKeyEncryption.hasRootKeyWrapper())&&null==this.rootKeyEncryption.getRootKey()}))}getRootKeyParams(){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.getRootKeyParams()}))}getAccountKeyParams(){return this.rootKeyEncryption.memoizedRootKeyParams}computeWrappingKey(e){return n(this,void 0,void 0,(function*(){const t=yield this.rootKeyEncryption.getSureRootKeyWrapperKeyParams();return yield this.computeRootKey(e,t)}))}unwrapRootKey(e){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.unwrapRootKey(e)}))}setNewRootKeyWrapper(e){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.setNewRootKeyWrapper(e)}))}removePasscode(){return n(this,void 0,void 0,(function*(){yield this.rootKeyEncryption.removeRootKeyWrapper()}))}setRootKey(e,t){return n(this,void 0,void 0,(function*(){yield this.rootKeyEncryption.setRootKey(e,t)}))}getRootKey(){return this.rootKeyEncryption.getRootKey()}deleteWorkspaceSpecificKeyStateFromDevice(){return n(this,void 0,void 0,(function*(){yield this.rootKeyEncryption.deleteWorkspaceSpecificKeyStateFromDevice()}))}validateAccountPassword(e){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.validateAccountPassword(e)}))}validatePasscode(e){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.validatePasscode(e)}))}getEmbeddedPayloadAuthenticatedData(e){const t=e.version;if(t)return this.operatorManager.operatorForVersion(t).getPayloadAuthenticatedData((0,i.encryptedParametersFromPayload)(e))}getKeyEmbeddedKeyParams(e){const t=this.getEmbeddedPayloadAuthenticatedData(e);if(t){if((0,s.isVersionLessThanOrEqualTo)(e.version,s.ProtocolVersion.V003)){const e=t;return this.createKeyParams(e)}{const e=t.kp;return this.createKeyParams(e)}}}needsNewRootKeyBasedItemsKey(){if(!this.hasAccount())return!1;const e=this.rootKeyEncryption.getRootKey();if(!e)return!1;if((0,s.compareVersions)(e.keyVersion,s.ProtocolVersionLastNonrootItemsKey)>0)return!1;const t=(0,i.findDefaultItemsKey)(this.itemsEncryption.getItemsKeys());return!t||t.itemsKey!==e.itemsKey}createNewDefaultItemsKey(){return n(this,void 0,void 0,(function*(){return this.rootKeyEncryption.createNewDefaultItemsKey()}))}getPasswordCreatedDate(){const e=this.getRootKey();return e?e.keyParams.createdDate:void 0}onSyncEvent(e){return n(this,void 0,void 0,(function*(){e===u.SyncEvent.SyncCompletedWithAllItemsUploaded&&(yield this.handleFullSyncCompletion()),e===u.SyncEvent.DownloadFirstSyncCompleted&&(yield this.handleDownloadFirstSyncCompletion())}))}handleDownloadFirstSyncCompletion(){return n(this,void 0,void 0,(function*(){if(!this.hasAccount())return;const e=this.itemsEncryption.getItemsKeys(),t=e.filter((e=>e.neverSynced)),r=e.filter((e=>!e.neverSynced)).find((e=>e.isDefault));if((0,a.isNullOrUndefined)(r)){const e=yield this.getRootKeyParams();if(e){const r=t.filter((t=>t.keyVersion!==e.version));r.length>0&&(yield this.itemManager.setItemsToBeDeleted(r)),0===this.itemsEncryption.getItemsKeys().length&&(yield this.rootKeyEncryption.createNewDefaultItemsKey())}}else yield this.itemManager.setItemsToBeDeleted(t);const n=this.getUserVersion(),i=this.itemsEncryption.getItemsKeys().find((e=>e.keyVersion===n));(0,a.isNullOrUndefined)(i)&&(yield this.rootKeyEncryption.createNewDefaultItemsKey()),this.syncUnsyncedItemsKeys()}))}handleFullSyncCompletion(){return n(this,void 0,void 0,(function*(){if(!(0,i.findDefaultItemsKey)(this.itemsEncryption.getItemsKeys())&&(yield this.rootKeyEncryption.createNewDefaultItemsKey(),this.rootKeyEncryption.keyMode===i.KeyMode.WrapperOnly))return this.itemsEncryption.repersistAllItems()}))}syncUnsyncedItemsKeys(){if(!this.hasAccount())return;const e=this.itemsEncryption.getItemsKeys().filter((e=>e.neverSynced&&!e.dirty));e.length>0&&this.itemManager.setItemsDirty(e)}getDiagnostics(){return n(this,void 0,void 0,(function*(){return{encryption:Object.assign(Object.assign({getLatestVersion:this.getLatestVersion(),hasAccount:this.hasAccount(),hasRootKeyEncryptionSource:this.hasRootKeyEncryptionSource(),getUserVersion:this.getUserVersion(),upgradeAvailable:yield this.upgradeAvailable(),accountUpgradeAvailable:this.accountUpgradeAvailable(),passcodeUpgradeAvailable:yield this.passcodeUpgradeAvailable(),hasPasscode:this.hasPasscode(),isPasscodeLocked:yield this.isPasscodeLocked(),needsNewRootKeyBasedItemsKey:this.needsNewRootKeyBasedItemsKey()},yield this.itemsEncryption.getDiagnostics()),yield this.rootKeyEncryption.getDiagnostics())}}))}}t.EncryptionService=f},13744:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionServiceEvent=void 0,(t.EncryptionServiceEvent||(t.EncryptionServiceEvent={})).RootKeyStatusChanged="RootKeyStatusChanged"},12121:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DecryptItemsKeyByPromptingUser=t.DecryptItemsKeyWithUserFallback=void 0;const i=r(16418),o=r(75082),a=r(94224),s=r(34210),c=r(10162);function l(e,t,r,l){return n(this,void 0,void 0,(function*(){if(l||(l=t.getKeyEmbeddedKeyParams(e)),!l)return"failed";const n=r.createChallenge([new a.ChallengePrompt(c.ChallengeValidation.None,void 0,void 0,!0)],s.ChallengeReason.Custom,!0,o.KeyRecoveryStrings.KeyRecoveryLoginFlowPrompt(l),o.KeyRecoveryStrings.KeyRecoveryPasswordRequired),u=yield r.promptForChallengeResponse(n);if(!u)return"aborted";const d=u.values[0].value,p=yield t.computeRootKey(d,l),h=yield t.decryptSplitSingle({usesRootKey:{items:[e],key:p}});return r.completeChallenge(n),(0,i.isDecryptedPayload)(h)?{decryptedKey:h,rootKey:p}:"failed"}))}t.DecryptItemsKeyWithUserFallback=function(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield t.decryptSplitSingle({usesRootKeyWithKeyLookup:{items:[e]}});if((0,i.isDecryptedPayload)(n))return n;const o=yield l(e,t,r);return"aborted"===o||"failed"===o?o:o.decryptedKey}))},t.DecryptItemsKeyByPromptingUser=l},41479:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ItemsEncryptionService=void 0;const i=r(10256),o=r(75082),a=r(16418),s=r(64657),c=r(10687);class l extends c.AbstractService{constructor(e,t,r,n,o){super(o),this.itemManager=e,this.payloadManager=t,this.storageService=r,this.operatorManager=n,this.internalEventBus=o,this.removeItemsObserver=this.itemManager.addObserver([i.ContentType.ItemsKey],(e=>{let{changed:t,inserted:r}=e;t.concat(r).length>0&&this.decryptErroredPayloads()}))}deinit(){this.itemManager=void 0,this.payloadManager=void 0,this.storageService=void 0,this.removeItemsObserver(),this.removeItemsObserver=void 0,super.deinit()}repersistAllItems(){return n(this,void 0,void 0,(function*(){const e=this.itemManager.items.map((e=>e.payload));return this.storageService.savePayloads(e)}))}getItemsKeys(){return this.itemManager.getDisplayableItemsKeys()}itemsKeyForPayload(e){return this.getItemsKeys().find((t=>t.uuid===e.items_key_id||t.duplicateOf===e.items_key_id))}getDefaultItemsKey(){return(0,o.findDefaultItemsKey)(this.getItemsKeys())}keyToUseForItemEncryption(){const e=this.getDefaultItemsKey();let t;return t=this.userVersion&&this.userVersion!==(null==e?void 0:e.keyVersion)?this.getItemsKeys().find((e=>e.keyVersion===this.userVersion)):e,t||new o.StandardException("Cannot find items key to use for encryption")}keyToUseForDecryptionOfPayload(e){return e.items_key_id?this.itemsKeyForPayload(e):this.defaultItemsKeyForItemVersion(e.version)}encryptPayloadWithKeyLookup(e){return n(this,void 0,void 0,(function*(){const t=this.keyToUseForItemEncryption();if(t instanceof o.StandardException)throw Error(t.message);return this.encryptPayload(e,t)}))}encryptPayload(e,t){return n(this,void 0,void 0,(function*(){if((0,a.isEncryptedPayload)(e))throw Error("Attempting to encrypt already encrypted payload.");if(!e.content)throw Error("Attempting to encrypt payload with no content.");if(!e.uuid)throw Error("Attempting to encrypt payload with no UuidGenerator.");return(0,o.encryptPayload)(e,t,this.operatorManager)}))}encryptPayloads(e,t){return n(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>this.encryptPayload(e,t))))}))}encryptPayloadsWithKeyLookup(e){return n(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>this.encryptPayloadWithKeyLookup(e))))}))}decryptPayloadWithKeyLookup(e){return n(this,void 0,void 0,(function*(){const t=this.keyToUseForDecryptionOfPayload(e);return null==t?{uuid:e.uuid,errorDecrypting:!0,waitingForKey:!0}:this.decryptPayload(e,t)}))}decryptPayload(e,t){return n(this,void 0,void 0,(function*(){return e.content?(0,o.decryptPayload)(e,t,this.operatorManager):{uuid:e.uuid,errorDecrypting:!0}}))}decryptPayloadsWithKeyLookup(e){return n(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>this.decryptPayloadWithKeyLookup(e))))}))}decryptPayloads(e,t){return n(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>this.decryptPayload(e,t))))}))}decryptErroredPayloads(){return n(this,void 0,void 0,(function*(){const e=this.payloadManager.invalidPayloads.filter((e=>e.content_type!==i.ContentType.ItemsKey));if(0===e.length)return;const t=(yield this.decryptPayloadsWithKeyLookup(e)).map((t=>{const r=(0,a.SureFindPayload)(e,t.uuid);return(0,o.isErrorDecryptingParameters)(t)?new a.EncryptedPayload(Object.assign(Object.assign({},r.ejected()),t)):new a.DecryptedPayload(Object.assign(Object.assign({},r.ejected()),t))}));yield this.payloadManager.emitPayloads(t,a.PayloadEmitSource.LocalChanged)}))}defaultItemsKeyForItemVersion(e,t){const r=t||this.getItemsKeys();return r.find((t=>t.isDefault&&t.keyVersion===e))||r.find((t=>t.keyVersion===e))}getDiagnostics(){var e;return n(this,void 0,void 0,(function*(){const t=this.keyToUseForItemEncryption();return{itemsEncryption:{itemsKeysIds:(0,s.Uuids)(this.getItemsKeys()),defaultItemsKeyId:null===(e=this.getDefaultItemsKey())||void 0===e?void 0:e.uuid,keyToUseForItemEncryptionId:t instanceof o.StandardException?void 0:t.uuid}}}))}}t.ItemsEncryptionService=l},49184:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RootKeyEncryptionService=void 0;const i=r(10256),o=r(75082),a=r(16418),s=r(64657),c=r(10687),l=r(96640),u=r(19288);class d extends c.AbstractService{constructor(e,t,r,n,i,a){super(a),this.itemManager=e,this.operatorManager=t,this.deviceInterface=r,this.storageService=n,this.identifier=i,this.internalEventBus=a,this.keyMode=o.KeyMode.RootKeyNone}deinit(){this.itemManager=void 0,this.rootKey=void 0,this.memoizedRootKeyParams=void 0,super.deinit()}initialize(){return n(this,void 0,void 0,(function*(){const e=this.getWrappedRootKey(),t=yield this.recomputeAccountKeyParams(),r=yield this.hasRootKeyWrapper(),n=null!=e||null!=t;if(r&&n)this.keyMode=o.KeyMode.RootKeyPlusWrapper;else if(r&&!n)this.keyMode=o.KeyMode.WrapperOnly;else if(!r&&n)this.keyMode=o.KeyMode.RootKeyOnly;else{if(r||n)throw"Invalid key mode condition";this.keyMode=o.KeyMode.RootKeyNone}this.keyMode===o.KeyMode.RootKeyOnly&&(this.setRootKeyInstance(yield this.getRootKeyFromKeychain()),yield this.handleKeyStatusChange())}))}handleKeyStatusChange(){return n(this,void 0,void 0,(function*(){yield this.recomputeAccountKeyParams(),this.notifyEvent(o.RootKeyServiceEvent.RootKeyStatusChanged)}))}passcodeUpgradeAvailable(){return n(this,void 0,void 0,(function*(){const e=yield this.getRootKeyWrapperKeyParams();return!!e&&e.version!==i.ProtocolVersionLatest}))}hasRootKeyWrapper(){return n(this,void 0,void 0,(function*(){return null!=(yield this.getRootKeyWrapperKeyParams())}))}hasAccount(){switch(this.keyMode){case o.KeyMode.RootKeyNone:case o.KeyMode.WrapperOnly:return!1;case o.KeyMode.RootKeyOnly:case o.KeyMode.RootKeyPlusWrapper:return!0;default:throw Error("Unhandled keyMode value '".concat(this.keyMode,"'."))}}hasRootKeyEncryptionSource(){return this.hasAccount()||this.hasPasscode()}hasPasscode(){return this.keyMode===o.KeyMode.WrapperOnly||this.keyMode===o.KeyMode.RootKeyPlusWrapper}getEncryptionSourceVersion(){return n(this,void 0,void 0,(function*(){if(this.hasAccount())return this.getSureUserVersion();if(this.hasPasscode())return(yield this.getSureRootKeyWrapperKeyParams()).version;throw Error("Attempting to access encryption source version without source")}))}getUserVersion(){const e=this.memoizedRootKeyParams;return null==e?void 0:e.version}getSureUserVersion(){return this.memoizedRootKeyParams.version}getRootKeyFromKeychain(){return n(this,void 0,void 0,(function*(){const e=yield this.deviceInterface.getNamespacedKeychainValue(this.identifier);if(null==e)return;const t=yield this.getSureRootKeyParams();return(0,o.CreateNewRootKey)(Object.assign(Object.assign({},e),{keyParams:t.getPortableValue()}))}))}saveRootKeyToKeychain(){return n(this,void 0,void 0,(function*(){if(null==this.getRootKey())throw"Attempting to non-existent root key to the keychain.";if(this.keyMode!==o.KeyMode.RootKeyOnly)throw"Should not be persisting wrapped key to keychain.";const e=this.getSureRootKey().getKeychainValue();return this.executeCriticalFunction((()=>this.deviceInterface.setNamespacedKeychainValue(e,this.identifier)))}))}getRootKeyWrapperKeyParams(){return n(this,void 0,void 0,(function*(){const e=yield this.storageService.getValue(l.StorageKey.RootKeyWrapperKeyParams,u.StorageValueModes.Nonwrapped);if(e)return(0,o.CreateAnyKeyParams)(e)}))}getSureRootKeyWrapperKeyParams(){return n(this,void 0,void 0,(function*(){return this.getRootKeyWrapperKeyParams()}))}getRootKeyParams(){return n(this,void 0,void 0,(function*(){if(this.keyMode===o.KeyMode.WrapperOnly)return this.getRootKeyWrapperKeyParams();if(this.keyMode===o.KeyMode.RootKeyOnly||this.keyMode===o.KeyMode.RootKeyPlusWrapper)return this.recomputeAccountKeyParams();if(this.keyMode!==o.KeyMode.RootKeyNone)throw"Unhandled key mode for getRootKeyParams ".concat(this.keyMode)}))}getSureRootKeyParams(){return n(this,void 0,void 0,(function*(){return this.getRootKeyParams()}))}computeRootKey(e,t){return n(this,void 0,void 0,(function*(){const r=t.version;return this.operatorManager.operatorForVersion(r).computeRootKey(e,t)}))}createRootKey(e,t,r,i){return n(this,void 0,void 0,(function*(){return(i?this.operatorManager.operatorForVersion(i):this.operatorManager.defaultOperator()).createRootKey(e,t,r)}))}getSureMemoizedRootKeyParams(){return this.memoizedRootKeyParams}validateAccountPassword(e){return n(this,void 0,void 0,(function*(){const t=yield this.computeRootKey(e,this.getSureMemoizedRootKeyParams()),r=this.getSureRootKey().compare(t);return r?{valid:r,artifacts:{rootKey:t}}:{valid:!1}}))}validatePasscode(e){return n(this,void 0,void 0,(function*(){const t=yield this.getSureRootKeyWrapperKeyParams(),r=yield this.computeRootKey(e,t),n=yield this.validateWrappingKey(r);return n?{valid:n,artifacts:{wrappingKey:r}}:{valid:!1}}))}validateWrappingKey(e){return n(this,void 0,void 0,(function*(){const t=this.getWrappedRootKey();if(this.keyMode===o.KeyMode.WrapperOnly)return this.storageService.canDecryptWithKey(e);if(this.keyMode===o.KeyMode.RootKeyOnly||this.keyMode===o.KeyMode.RootKeyPlusWrapper){const r=new a.EncryptedPayload(t),n=yield this.decryptPayload(r,e);return!(0,o.isErrorDecryptingParameters)(n)}throw"Unhandled case in validateWrappingKey"}))}recomputeAccountKeyParams(){return n(this,void 0,void 0,(function*(){const e=yield this.storageService.getValue(l.StorageKey.RootKeyParams,u.StorageValueModes.Nonwrapped);if(e)return this.memoizedRootKeyParams=(0,o.CreateAnyKeyParams)(e),this.memoizedRootKeyParams}))}wrapAndPersistRootKey(e){return n(this,void 0,void 0,(function*(){const t=this.getSureRootKey(),r=Object.assign(Object.assign({},t.payload.ejected()),{content:(0,a.FillItemContentSpecialized)(t.persistableValueWhenWrapping())}),n=new a.DecryptedPayload(r),i=yield this.encryptPayload(n,e),o=new a.EncryptedPayload(Object.assign(Object.assign(Object.assign({},n.ejected()),i),{errorDecrypting:!1,waitingForKey:!1}));this.storageService.setValue(l.StorageKey.WrappedRootKey,o.ejected(),u.StorageValueModes.Nonwrapped)}))}unwrapRootKey(e){return n(this,void 0,void 0,(function*(){if(this.keyMode===o.KeyMode.WrapperOnly)return void this.setRootKeyInstance(e);if(this.keyMode!==o.KeyMode.RootKeyPlusWrapper)throw"Invalid key mode condition for unwrapping.";const t=this.getWrappedRootKey(),r=new a.EncryptedPayload(t),n=yield this.decryptPayload(r,e);if((0,o.isErrorDecryptingParameters)(n))throw Error("Unable to decrypt root key with provided wrapping key.");{const e=new a.DecryptedPayload(Object.assign(Object.assign({},r.ejected()),n));this.setRootKeyInstance(new o.SNRootKey(e)),yield this.handleKeyStatusChange()}}))}setNewRootKeyWrapper(e){return n(this,void 0,void 0,(function*(){if(this.keyMode===o.KeyMode.RootKeyNone)this.keyMode=o.KeyMode.WrapperOnly;else{if(this.keyMode!==o.KeyMode.RootKeyOnly)throw Error("Attempting to set wrapper on already wrapped key.");this.keyMode=o.KeyMode.RootKeyPlusWrapper}if(yield this.deviceInterface.clearNamespacedKeychainValue(this.identifier),this.keyMode!==o.KeyMode.WrapperOnly&&this.keyMode!==o.KeyMode.RootKeyPlusWrapper)throw Error("Invalid keyMode on setNewRootKeyWrapper");this.keyMode===o.KeyMode.WrapperOnly?(this.setRootKeyInstance(e),yield this.reencryptItemsKeys()):yield this.wrapAndPersistRootKey(e),this.storageService.setValue(l.StorageKey.RootKeyWrapperKeyParams,e.keyParams.getPortableValue(),u.StorageValueModes.Nonwrapped),yield this.handleKeyStatusChange()}))}removeRootKeyWrapper(){return n(this,void 0,void 0,(function*(){if(this.keyMode!==o.KeyMode.WrapperOnly&&this.keyMode!==o.KeyMode.RootKeyPlusWrapper)throw Error("Attempting to remove root key wrapper on unwrapped key.");this.keyMode===o.KeyMode.WrapperOnly?(this.keyMode=o.KeyMode.RootKeyNone,this.setRootKeyInstance(void 0)):this.keyMode===o.KeyMode.RootKeyPlusWrapper&&(this.keyMode=o.KeyMode.RootKeyOnly),yield this.storageService.removeValue(l.StorageKey.WrappedRootKey,u.StorageValueModes.Nonwrapped),yield this.storageService.removeValue(l.StorageKey.RootKeyWrapperKeyParams,u.StorageValueModes.Nonwrapped),this.keyMode===o.KeyMode.RootKeyOnly&&(yield this.saveRootKeyToKeychain()),yield this.handleKeyStatusChange()}))}setRootKey(e,t){return n(this,void 0,void 0,(function*(){if(!e.keyParams)throw Error("keyParams must be supplied if setting root key.");if(this.getRootKey()===e)throw Error("Attempting to set root key as same current value.");if(this.keyMode===o.KeyMode.WrapperOnly)this.keyMode=o.KeyMode.RootKeyPlusWrapper;else if(this.keyMode===o.KeyMode.RootKeyNone)this.keyMode=o.KeyMode.RootKeyOnly;else if(this.keyMode!==o.KeyMode.RootKeyOnly&&this.keyMode!==o.KeyMode.RootKeyPlusWrapper)throw Error("Unhandled key mode for setNewRootKey ".concat(this.keyMode));if(this.setRootKeyInstance(e),this.storageService.setValue(l.StorageKey.RootKeyParams,e.keyParams.getPortableValue(),u.StorageValueModes.Nonwrapped),this.keyMode===o.KeyMode.RootKeyOnly)yield this.saveRootKeyToKeychain();else if(this.keyMode===o.KeyMode.RootKeyPlusWrapper){if(!t)throw Error("wrappingKey must be supplied");yield this.wrapAndPersistRootKey(t)}yield this.handleKeyStatusChange()}))}deleteWorkspaceSpecificKeyStateFromDevice(){return n(this,void 0,void 0,(function*(){yield this.deviceInterface.clearNamespacedKeychainValue(this.identifier),yield this.storageService.removeValue(l.StorageKey.WrappedRootKey,u.StorageValueModes.Nonwrapped),yield this.storageService.removeValue(l.StorageKey.RootKeyWrapperKeyParams,u.StorageValueModes.Nonwrapped),yield this.storageService.removeValue(l.StorageKey.RootKeyParams,u.StorageValueModes.Nonwrapped),this.keyMode=o.KeyMode.RootKeyNone,this.setRootKeyInstance(void 0),yield this.handleKeyStatusChange()}))}getWrappedRootKey(){return this.storageService.getValue(l.StorageKey.WrappedRootKey,u.StorageValueModes.Nonwrapped)}setRootKeyInstance(e){this.rootKey=e}getRootKey(){return this.rootKey}getSureRootKey(){return this.rootKey}getItemsKeys(){return this.itemManager.getDisplayableItemsKeys()}encrypPayloadWithKeyLookup(e){return n(this,void 0,void 0,(function*(){const t=this.getRootKey();if(null==t)throw Error("Attempting root key encryption with no root key");return this.encryptPayload(e,t)}))}encryptPayloadsWithKeyLookup(e){return n(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>this.encrypPayloadWithKeyLookup(e))))}))}encryptPayload(e,t){return n(this,void 0,void 0,(function*(){return(0,o.encryptPayload)(e,t,this.operatorManager)}))}encryptPayloads(e,t){return n(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>this.encryptPayload(e,t))))}))}decryptPayloadWithKeyLookup(e){return n(this,void 0,void 0,(function*(){const t=this.getRootKey();return null==t?{uuid:e.uuid,errorDecrypting:!0,waitingForKey:!0}:this.decryptPayload(e,t)}))}decryptPayload(e,t){return n(this,void 0,void 0,(function*(){return(0,o.decryptPayload)(e,t,this.operatorManager)}))}decryptPayloadsWithKeyLookup(e){return n(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>this.decryptPayloadWithKeyLookup(e))))}))}decryptPayloads(e,t){return n(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>this.decryptPayload(e,t))))}))}reencryptItemsKeys(){return n(this,void 0,void 0,(function*(){const e=this.getItemsKeys();e.length>0&&(yield this.itemManager.setItemsDirty(e))}))}createNewDefaultItemsKey(){return n(this,void 0,void 0,(function*(){const e=this.getSureRootKey(),t=e?e.keyVersion:i.ProtocolVersionLatest;let r;if((0,i.compareVersions)(t,i.ProtocolVersionLastNonrootItemsKey)<=0){const n=new a.DecryptedPayload(Object.assign({uuid:s.UuidGenerator.GenerateUuid(),content_type:i.ContentType.ItemsKey,content:(0,a.FillItemContentSpecialized)({itemsKey:e.masterKey,dataAuthenticationKey:e.dataAuthenticationKey,version:t})},(0,a.PayloadTimestampDefaults)()));r=(0,a.CreateDecryptedItemFromPayload)(n)}else r=this.operatorManager.operatorForVersion(t).createItemsKey();const n=this.getItemsKeys().filter((e=>e.isDefault));for(const e of n)yield this.itemManager.changeItemsKey(e,(e=>{e.isDefault=!1}));const o=yield this.itemManager.insertItem(r);return yield this.itemManager.changeItemsKey(o,(e=>{e.isDefault=!0})),o}))}createNewItemsKeyWithRollback(){return n(this,void 0,void 0,(function*(){const e=(0,o.findDefaultItemsKey)(this.getItemsKeys()),t=yield this.createNewDefaultItemsKey();return()=>n(this,void 0,void 0,(function*(){yield this.itemManager.setItemToBeDeleted(t),e&&(yield this.itemManager.changeItem(e,(e=>{e.isDefault=!0})))}))}))}getDiagnostics(){return n(this,void 0,void 0,(function*(){return{rootKeyEncryption:{hasRootKey:null!=this.rootKey,keyMode:o.KeyMode[this.keyMode],hasRootKeyWrapper:yield this.hasRootKeyWrapper(),hasAccount:this.hasAccount(),hasRootKeyEncryptionSource:this.hasRootKeyEncryptionSource(),hasPasscode:this.hasPasscode(),getEncryptionSourceVersion:this.hasRootKeyEncryptionSource()&&(yield this.getEncryptionSourceVersion()),getUserVersion:this.getUserVersion()}}}))}}t.RootKeyEncryptionService=d},52335:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationEvent=void 0,(r=t.ApplicationEvent||(t.ApplicationEvent={}))[r.SignedIn=2]="SignedIn",r[r.SignedOut=3]="SignedOut",r[r.CompletedFullSync=5]="CompletedFullSync",r[r.FailedSync=6]="FailedSync",r[r.HighLatencySync=7]="HighLatencySync",r[r.EnteredOutOfSync=8]="EnteredOutOfSync",r[r.ExitedOutOfSync=9]="ExitedOutOfSync",r[r.Started=10]="Started",r[r.Launched=11]="Launched",r[r.LocalDataLoaded=12]="LocalDataLoaded",r[r.KeyStatusChanged=13]="KeyStatusChanged",r[r.MajorDataChange=14]="MajorDataChange",r[r.CompletedRestart=15]="CompletedRestart",r[r.LocalDataIncrementalLoad=16]="LocalDataIncrementalLoad",r[r.SyncStatusChanged=17]="SyncStatusChanged",r[r.WillSync=18]="WillSync",r[r.InvalidSyncSession=19]="InvalidSyncSession",r[r.LocalDatabaseReadError=20]="LocalDatabaseReadError",r[r.LocalDatabaseWriteError=21]="LocalDatabaseWriteError",r[r.CompletedIncrementalSync=22]="CompletedIncrementalSync",r[r.MigrationsLoaded=23]="MigrationsLoaded",r[r.StorageReady=24]="StorageReady",r[r.PreferencesChanged=25]="PreferencesChanged",r[r.UnprotectedSessionBegan=26]="UnprotectedSessionBegan",r[r.UserRolesChanged=27]="UserRolesChanged",r[r.FeaturesUpdated=28]="FeaturesUpdated",r[r.UnprotectedSessionExpired=29]="UnprotectedSessionExpired",r[r.CompletedInitialSync=30]="CompletedInitialSync",r[r.BiometricsSoftLockEngaged=31]="BiometricsSoftLockEngaged",r[r.BiometricsSoftLockDisengaged=32]="BiometricsSoftLockDisengaged"},31714:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},88050:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},63706:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SyncEvent=void 0,(r=t.SyncEvent||(t.SyncEvent={})).SyncCompletedWithAllItemsUploaded="SyncCompletedWithAllItemsUploaded",r.SyncCompletedWithAllItemsUploadedAndDownloaded="SyncCompletedWithAllItemsUploadedAndDownloaded",r.SingleRoundTripSyncCompleted="SingleRoundTripSyncCompleted",r.SyncWillBegin="sync:will-begin",r.DownloadFirstSyncCompleted="sync:download-first-completed",r.SyncTakingTooLong="sync:taking-too-long",r.SyncError="sync:error",r.InvalidSession="sync:invalid-session",r.MajorDataChange="major-data-change",r.LocalDataIncrementalLoad="local-data-incremental-load",r.LocalDataLoaded="local-data-loaded",r.EnterOutOfSync="enter-out-of-sync",r.ExitOutOfSync="exit-out-of-sync",r.StatusChanged="status-changed",r.DatabaseWriteError="database-write-error",r.DatabaseReadError="database-read-error",r.SyncRequestsIntegrityCheck="sync:requests-integrity-check"},354:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},43934:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WebAppEvent=void 0,(r=t.WebAppEvent||(t.WebAppEvent={})).NewUpdateAvailable="NewUpdateAvailable",r.EditorFocused="EditorFocused",r.BeganBackupDownload="BeganBackupDownload",r.EndedBackupDownload="EndedBackupDownload",r.PanelResized="PanelResized",r.WindowDidFocus="WindowDidFocus",r.WindowDidBlur="WindowDidBlur",r.MobileKeyboardDidChangeFrame="MobileKeyboardDidChangeFrame",r.MobileKeyboardWillChangeFrame="MobileKeyboardWillChangeFrame"},24382:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureStatus=void 0,(r=t.FeatureStatus||(t.FeatureStatus={})).NoUserSubscription="NoUserSubscription",r.NotInCurrentPlan="NotInCurrentPlan",r.InCurrentPlanButExpired="InCurrentPlanButExpired",r.Entitled="Entitled"},21400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},35067:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FeaturesEvent=void 0,(r=t.FeaturesEvent||(t.FeaturesEvent={})).UserRolesChanged="UserRolesChanged",r.FeaturesUpdated="FeaturesUpdated"},54613:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},42176:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},39143:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileService=void 0;const i=r(84945),o=r(10256),a=r(16418),s=r(64657),c=r(75082),l=r(14581),u=r(10687),d=r(12121);class p extends u.AbstractService{constructor(e,t,r,n,i,o,a,s){super(s),this.api=e,this.itemManager=t,this.syncService=r,this.encryptor=n,this.challengor=i,this.alertService=o,this.crypto=a,this.internalEventBus=s,this.encryptedCache=new l.FileMemoryCache(1e8)}deinit(){super.deinit(),this.encryptedCache.clear(),this.encryptedCache=void 0,this.api=void 0,this.itemManager=void 0,this.encryptor=void 0,this.syncService=void 0,this.alertService=void 0,this.challengor=void 0,this.crypto=void 0}minimumChunkSize(){return 5e6}beginNewFileUpload(e){return n(this,void 0,void 0,(function*(){const t=s.UuidGenerator.GenerateUuid(),r=yield this.api.createFileValetToken(t,"write",e);if(r instanceof i.ClientDisplayableError)return r;const n={key:this.crypto.generateRandomKey(a.FileProtocolV1Constants.KeySize),remoteIdentifier:t,decryptedSize:e},o=new l.EncryptAndUploadFileOperation(n,r,this.crypto,this.api);return(yield this.api.startUploadSession(r)).uploadId?o:new i.ClientDisplayableError("Could not start upload session")}))}pushBytesForUpload(e,t,r,o){return n(this,void 0,void 0,(function*(){if(!(yield e.pushBytes(t,r,o)))return new i.ClientDisplayableError("Failed to push file bytes to server")}))}finishUpload(e,t){return n(this,void 0,void 0,(function*(){if(!(yield this.api.closeUploadSession(e.getApiToken())))return new i.ClientDisplayableError("Could not close upload session");const r=e.getResult(),n={decryptedSize:r.finalDecryptedSize,encryptedChunkSizes:e.encryptedChunkSizes,encryptionHeader:r.encryptionHeader,key:r.key,mimeType:t.mimeType,name:t.name,remoteIdentifier:r.remoteIdentifier},s=yield this.itemManager.createItem(o.ContentType.File,(0,a.FillItemContentSpecialized)(n),!0);return yield this.syncService.sync(),s}))}decryptCachedEntry(e,t){return n(this,void 0,void 0,(function*(){const r=new l.FileDecryptor(e,this.crypto);let i=new Uint8Array;const o=new l.OrderedByteChunker(e.encryptedChunkSizes,(e=>n(this,void 0,void 0,(function*(){const t=r.decryptBytes(e);t&&(i=new Uint8Array([...i,...t.decryptedBytes]))}))));return yield o.addBytes(t.encryptedBytes),{decryptedBytes:i}}))}downloadFile(e,t){return n(this,void 0,void 0,(function*(){const r=this.encryptedCache.get(e.uuid);if(r){const n=yield this.decryptCachedEntry(e,r);return void(yield t(n.decryptedBytes,void 0))}const i=e.encryptedSize<this.encryptedCache.maxSize;let o=new Uint8Array;const a=new l.DownloadAndDecryptFileOperation(e,this.crypto,this.api),s=yield a.run((e=>{let{decrypted:r,encrypted:a,progress:s}=e;return n(this,void 0,void 0,(function*(){return i&&(o=new Uint8Array([...o,...a.encryptedBytes])),t(r.decryptedBytes,s)}))}));return i&&this.encryptedCache.add(e.uuid,{encryptedBytes:o}),s.error}))}deleteFile(e){return n(this,void 0,void 0,(function*(){this.encryptedCache.remove(e.uuid);const t=yield this.api.createFileValetToken(e.remoteIdentifier,"delete");if(t instanceof i.ClientDisplayableError)return t;const r=yield this.api.deleteFile(t);if(r.error)return i.ClientDisplayableError.FromError(r.error);yield this.itemManager.setItemToBeDeleted(e),yield this.syncService.sync()}))}isFileNameFileBackupRelated(e){return e===l.FileBackupsConstantsV1.MetadataFileName?"metadata":e===l.FileBackupsConstantsV1.BinaryFileName&&"binary"}decryptBackupMetadataFile(e){return n(this,void 0,void 0,(function*(){const t=new a.EncryptedPayload(Object.assign(Object.assign({},e.itemsKey),{waitingForKey:!1,errorDecrypting:!1})),r=yield(0,d.DecryptItemsKeyWithUserFallback)(t,this.encryptor,this.challengor);if("failed"===r||"aborted"===r)return;const n=new a.EncryptedPayload(Object.assign(Object.assign({},e.file),{waitingForKey:!1,errorDecrypting:!1})),i=new c.SNItemsKey(r),o=yield this.encryptor.decryptSplitSingle({usesItemsKey:{items:[n],key:i}});return(0,a.isEncryptedPayload)(o)?void 0:new a.FileItem(o)}))}selectFile(e){return n(this,void 0,void 0,(function*(){return yield e.selectFile()}))}readBackupFileAndSaveDecrypted(e,t,r){return n(this,void 0,void 0,(function*(){const i=yield r.selectDirectory();if("aborted"===i||"failed"===i)return i;const o=yield r.createFile(i,t.name);if("aborted"===o||"failed"===o)return o;const a=yield(0,l.readAndDecryptBackupFile)(e,t,r,this.crypto,(e=>n(this,void 0,void 0,(function*(){yield r.saveBytes(o,e)}))));return yield r.closeFileWriteStream(o),a}))}readBackupFileBytesDecrypted(e,t,r){return n(this,void 0,void 0,(function*(){let i=new Uint8Array;return yield(0,l.readAndDecryptBackupFile)(e,t,r,this.crypto,(e=>n(this,void 0,void 0,(function*(){i=new Uint8Array([...i,...e])})))),i}))}}t.FileService=p},81052:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},40829:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IntegrityEvent=void 0,(t.IntegrityEvent||(t.IntegrityEvent={})).IntegrityCheckCompleted="IntegrityCheckCompleted"},2901:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},40330:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IntegrityService=void 0;const i=r(40829),o=r(10687),a=r(63706);class s extends o.AbstractService{constructor(e,t,r,n){super(n),this.integrityApi=e,this.itemApi=t,this.payloadManager=r,this.internalEventBus=n}handleEvent(e){return n(this,void 0,void 0,(function*(){if(e.type!==a.SyncEvent.SyncRequestsIntegrityCheck)return;const t=yield this.integrityApi.checkIntegrity(this.payloadManager.integrityPayloads);if(void 0!==t.error)return void this.log("Could not obtain integrity check: ".concat(t.error));const r=[];for(const e of t.data.mismatches)r.push(this.itemApi.getSingleItem(e.uuid));const n=yield Promise.all(r),o=[];for(const e of n)void 0!==e.data&&!e.error&&"item"in e.data?o.push(e.data.item):this.log("Could not obtain item for integrity adjustments: ".concat(e.error));yield this.notifyEventSync(i.IntegrityEvent.IntegrityCheckCompleted,{rawPayloads:o,source:e.payload.source})}))}}t.IntegrityService=s},15689:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalEventBus=void 0;const i=r(61325);t.InternalEventBus=class{constructor(){this.eventHandlers=new Map}deinit(){this.eventHandlers=void 0}addEventHandler(e,t){let r=this.eventHandlers.get(t);void 0===r&&(r=[]),r.push(e),this.eventHandlers.set(t,r)}publish(e){const t=this.eventHandlers.get(e.type);if(void 0!==t)for(const r of t)r.handleEvent(e)}publishSync(e,t){return n(this,void 0,void 0,(function*(){const r=this.eventHandlers.get(e.type);if(void 0!==r){if(t===i.InternalEventPublishStrategy.SEQUENCE)for(const t of r)yield t.handleEvent(e);if(t===i.InternalEventPublishStrategy.ASYNC){const t=[];for(const n of r)t.push(n.handleEvent(e));yield Promise.all(t)}}}))}}},87143:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},14027:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},39239:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},61325:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InternalEventPublishStrategy=void 0,(r=t.InternalEventPublishStrategy||(t.InternalEventPublishStrategy={})).ASYNC="ASYNC",r.SEQUENCE="SEQUENCE"},13211:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},37830:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemCounter=void 0;const n=r(10256);t.ItemCounter=class{countNotesAndTags(e){const t={notes:0,archived:0,deleted:0,tags:0};for(const r of e)r.trashed?t.deleted++:r.archived?t.archived++:r.content_type!==n.ContentType.Note?r.content_type!==n.ContentType.Tag||t.tags++:t.notes++;return t}}},94250:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},99463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},23479:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ItemRelationshipDirection=void 0,(r=t.ItemRelationshipDirection||(t.ItemRelationshipDirection={}))[r.AReferencesB=0]="AReferencesB",r[r.BReferencesA=1]="BReferencesA",r[r.NoRelationship=2]="NoRelationship"},83990:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},81098:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},69991:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},83387:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76473:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PreferencesServiceEvent=void 0,(t.PreferencesServiceEvent||(t.PreferencesServiceEvent={})).PreferencesChanged="PreferencesChanged"},10147:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MobileUnlockTiming=void 0,(r=t.MobileUnlockTiming||(t.MobileUnlockTiming={})).Immediately="immediately",r.OnQuit="on-quit"},26353:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},71835:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},10687:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractService=void 0;const i=r(64657),o=r(61325);t.AbstractService=class{constructor(e){this.internalEventBus=e,this.eventObservers=[],this.loggingEnabled=!1,this.criticalPromises=[]}addEventObserver(e){this.eventObservers.push(e);const t=this.eventObservers;return()=>{(0,i.removeFromArray)(t,e)}}notifyEvent(e,t){var r;return n(this,void 0,void 0,(function*(){for(const r of this.eventObservers)yield r(e,t);null===(r=this.internalEventBus)||void 0===r||r.publish({type:e,payload:t})}))}notifyEventSync(e,t){var r;return n(this,void 0,void 0,(function*(){for(const r of this.eventObservers)yield r(e,t);yield null===(r=this.internalEventBus)||void 0===r?void 0:r.publishSync({type:e,payload:t},o.InternalEventPublishStrategy.SEQUENCE)}))}getDiagnostics(){return Promise.resolve(void 0)}blockDeinit(){return n(this,void 0,void 0,(function*(){yield Promise.all(this.criticalPromises)}))}deinit(){this.eventObservers.length=0,this.internalEventBus=void 0,this.criticalPromises=void 0}executeCriticalFunction(e){return n(this,void 0,void 0,(function*(){const t=e();return this.criticalPromises.push(t),t}))}handleApplicationStage(e){return n(this,void 0,void 0,(function*(){}))}getServiceName(){return this.constructor.name}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.loggingEnabled&&(0,i.log)(this.getServiceName(),...arguments)}}},19032:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},15328:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},60106:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatusService=void 0;const n=r(64657),i=r(10687),o=r(24825);class a extends i.AbstractService{constructor(){super(...arguments),this._message="",this.dynamicMessages=[]}get message(){return this._message}setMessage(e){this.directSetMessage=e,this.recomputeMessage()}addMessage(e){return this.dynamicMessages.push(e),this.recomputeMessage(),e}removeMessage(e){(0,n.removeFromArray)(this.dynamicMessages,e),this.recomputeMessage()}recomputeMessage(){const e=[...this.dynamicMessages];this.directSetMessage&&e.unshift(this.directSetMessage),this._message=this.messageFromArray(e),this.notifyEvent(o.StatusServiceEvent.MessageChanged,this._message)}messageFromArray(e){let t="";return e.forEach(((r,n)=>{const i=n===e.length-1;t+=r,i||(t+=", ")})),t}}t.StatusService=a},24825:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatusServiceEvent=void 0,(t.StatusServiceEvent||(t.StatusServiceEvent={})).MessageChanged="MessageChanged"},14753:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryStore=void 0,t.InMemoryStore=class{constructor(){this.values=new Map}setValue(e,t){this.values.set(e,t)}getValue(e){return this.values.get(e)}removeValue(e){this.values.delete(e)}}},13066:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},96640:(e,t)=>{var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyKeys1_0_0=t.namespacedKey=t.NonwrappedStorageKey=t.StorageKey=t.RawStorageKey=void 0,(n=t.RawStorageKey||(t.RawStorageKey={})).StorageObject="storage",n.DescriptorRecord="descriptors",n.SnjsVersion="snjs_version",(r=t.StorageKey||(t.StorageKey={})).RootKeyParams="ROOT_KEY_PARAMS",r.WrappedRootKey="WRAPPED_ROOT_KEY",r.RootKeyWrapperKeyParams="ROOT_KEY_WRAPPER_KEY_PARAMS",r.Session="session",r.User="user",r.ServerHost="server",r.LegacyUuid="uuid",r.LastSyncToken="syncToken",r.PaginationToken="cursorToken",r.BiometricsState="biometrics_state",r.MobilePasscodeTiming="passcode_timing",r.MobileBiometricsTiming="biometrics_timing",r.MobilePasscodeKeyboardType="passcodeKeyboardType",r.MobilePreferences="preferences",r.MobileScreenshotPrivacyEnabled="screenshotPrivacy_enabled",r.ProtectionExpirey="SessionExpiresAtKey",r.ProtectionSessionLength="SessionLengthKey",r.KeyRecoveryUndecryptableItems="key_recovery_undecryptable",r.StorageEncryptionPolicy="storage_policy",r.WebSocketUrl="webSocket_url",r.UserRoles="user_roles",r.UserFeatures="user_features",r.ExperimentalFeatures="experimental_features",r.DeinitMode="deinit_mode",r.CodeVerifier="code_verifier",r.LaunchPriorityUuids="launch_priority_uuids",(t.NonwrappedStorageKey||(t.NonwrappedStorageKey={})).MobileFirstRun="first_run",t.namespacedKey=function(e,t){return"".concat(e,"-").concat(t)},t.LegacyKeys1_0_0={WebPasscodeParamsKey:"offlineParams",MobilePasscodeParamsKey:"pc_params",AllAccountKeyParamsKey:"auth_params",WebEncryptedStorageKey:"encryptedStorage",MobileWrappedRootKeyKey:"encrypted_account_keys",MobileBiometricsPrefs:"biometrics_prefs",AllMigrations:"migrations",MobileThemesCache:"ThemePreferencesKey",MobileLightTheme:"lightTheme",MobileDarkTheme:"darkTheme",MobileLastExportDate:"LastExportDateKey",MobileDoNotWarnUnsupportedEditors:"DoNotShowAgainUnsupportedEditorsKey",MobileOptionsState:"options",MobilePasscodeKeyboardType:"passcodeKeyboardType"}},89057:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},19288:(e,t)=>{var r,n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueModesKeys=t.StorageValueModes=t.StorageEncryptionPolicy=t.StoragePersistencePolicies=void 0,(o=t.StoragePersistencePolicies||(t.StoragePersistencePolicies={}))[o.Default=1]="Default",o[o.Ephemeral=2]="Ephemeral",(i=t.StorageEncryptionPolicy||(t.StorageEncryptionPolicy={}))[i.Default=1]="Default",i[i.Disabled=2]="Disabled",(n=t.StorageValueModes||(t.StorageValueModes={}))[n.Default=1]="Default",n[n.Nonwrapped=2]="Nonwrapped",(r=t.ValueModesKeys||(t.ValueModesKeys={})).Wrapped="wrapped",r.Unwrapped="unwrapped",r.Nonwrapped="nonwrapped"},45272:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InfoStrings=void 0,t.InfoStrings={AccountDeleted:"Your account has been successfully deleted.",UnsupportedBackupFileVersion:"This backup file was created using a newer version of the application and cannot be imported here. Please update your application and try again.",BackupFileMoreRecentThanAccount:"This backup file was created using a newer encryption version than your account's. Please run the available encryption upgrade and try again.",SavingWhileDocumentHidden:"Attempting to save an item while the application is hidden. To protect data integrity, please refresh the application window and try again.",InvalidNote:"The note you are attempting to save can not be found or has been deleted. Changes you make will not be synced. Please copy this note's text and start a new note."}},58325:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeychainRecoveryStrings=t.ErrorAlertStrings=t.ChallengeStrings=t.SessionStrings=t.ChallengeModalTitle=t.ProtocolUpgradeStrings=t.SignInStrings=t.RegisterStrings=t.CredentialsChangeStrings=t.StrictSignInFailed=t.InsufficientPasswordMessage=t.UNKNOWN_ERROR=t.DO_NOT_CLOSE_APPLICATION=t.REMOVING_PASSCODE=t.CHANGING_PASSCODE=t.SETTING_PASSCODE=t.UPGRADING_ENCRYPTION=t.OUTDATED_PROTOCOL_ALERT_IGNORE=t.INVALID_PASSWORD=t.INVALID_PASSWORD_COST=t.UNSUPPORTED_KEY_DERIVATION=t.EXPIRED_PROTOCOL_VERSION=t.UNSUPPORTED_PROTOCOL_VERSION=t.INVALID_EXTENSION_URL=t.API_MESSAGE_FAILED_OFFLINE_ACTIVATION=t.API_MESSAGE_FAILED_DOWNLOADING_EXTENSION=t.API_MESSAGE_UNTRUSTED_EXTENSIONS_WARNING=t.API_MESSAGE_FAILED_OFFLINE_FEATURES=t.API_MESSAGE_FAILED_DELETE_REVISION=t.API_MESSAGE_FAILED_ACCESS_PURCHASE=t.API_MESSAGE_FAILED_SUBSCRIPTION_INFO=t.API_MESSAGE_FAILED_CREATE_FILE_TOKEN=t.API_MESSAGE_FAILED_LISTED_REGISTRATION=t.API_MESSAGE_FAILED_UPDATE_SETTINGS=t.API_MESSAGE_FAILED_GET_SETTINGS=t.API_MESSAGE_INVALID_SESSION=t.API_MESSAGE_RATE_LIMITED=t.API_MESSAGE_TOKEN_REFRESH_IN_PROGRESS=t.API_MESSAGE_GENERIC_TOKEN_REFRESH_FAIL=t.API_MESSAGE_FALLBACK_LOGIN_FAIL=t.API_MESSAGE_CHANGE_CREDENTIALS_IN_PROGRESS=t.API_MESSAGE_LOGIN_IN_PROGRESS=t.API_MESSAGE_REGISTRATION_IN_PROGRESS=t.API_MESSAGE_GENERIC_SINGLE_ITEM_SYNC_FAIL=t.API_MESSAGE_GENERIC_INTEGRITY_CHECK_FAIL=t.ServerErrorStrings=t.API_MESSAGE_GENERIC_SYNC_FAIL=t.API_MESSAGE_GENERIC_CHANGE_CREDENTIALS_FAIL=t.API_MESSAGE_GENERIC_REGISTRATION_FAIL=t.API_MESSAGE_GENERIC_INVALID_LOGIN=void 0,t.API_MESSAGE_GENERIC_INVALID_LOGIN="A server error occurred while trying to sign in. Please try again.",t.API_MESSAGE_GENERIC_REGISTRATION_FAIL="A server error occurred while trying to register. Please try again.",t.API_MESSAGE_GENERIC_CHANGE_CREDENTIALS_FAIL="Something went wrong while changing your credentials. Your credentials were not changed. Please try again.",t.API_MESSAGE_GENERIC_SYNC_FAIL="Could not connect to server.",t.ServerErrorStrings={DeleteAccountError:"Your account was unable to be deleted due to an error. Please try your request again."},t.API_MESSAGE_GENERIC_INTEGRITY_CHECK_FAIL="Could not check your data integrity with the server.",t.API_MESSAGE_GENERIC_SINGLE_ITEM_SYNC_FAIL="Could not retrieve item.",t.API_MESSAGE_REGISTRATION_IN_PROGRESS="An existing registration request is already in progress.",t.API_MESSAGE_LOGIN_IN_PROGRESS="An existing sign in request is already in progress.",t.API_MESSAGE_CHANGE_CREDENTIALS_IN_PROGRESS="An existing change credentials request is already in progress.",t.API_MESSAGE_FALLBACK_LOGIN_FAIL="Invalid email or password.",t.API_MESSAGE_GENERIC_TOKEN_REFRESH_FAIL="A server error occurred while trying to refresh your session. Please try again.",t.API_MESSAGE_TOKEN_REFRESH_IN_PROGRESS="Your account session is being renewed with the server. Please try your request again.",t.API_MESSAGE_RATE_LIMITED="Too many successive server requests. Please wait a few minutes and try again.",t.API_MESSAGE_INVALID_SESSION="Please sign in to an account in order to continue with your request.",t.API_MESSAGE_FAILED_GET_SETTINGS="Failed to get settings.",t.API_MESSAGE_FAILED_UPDATE_SETTINGS="Failed to update settings.",t.API_MESSAGE_FAILED_LISTED_REGISTRATION="Unable to register for Listed. Please try again later.",t.API_MESSAGE_FAILED_CREATE_FILE_TOKEN="Failed to create file token.",t.API_MESSAGE_FAILED_SUBSCRIPTION_INFO="Failed to get subscription's information.",t.API_MESSAGE_FAILED_ACCESS_PURCHASE="Failed to access purchase flow.",t.API_MESSAGE_FAILED_DELETE_REVISION="Failed to delete revision.",t.API_MESSAGE_FAILED_OFFLINE_FEATURES="Failed to get offline features.",t.API_MESSAGE_UNTRUSTED_EXTENSIONS_WARNING="The extension you are attempting to install comes from an\n  untrusted source. Untrusted extensions may lower the security of your data. Do you want to continue?",t.API_MESSAGE_FAILED_DOWNLOADING_EXTENSION="Error downloading package details. Please check the\n  extension link and try again.",t.API_MESSAGE_FAILED_OFFLINE_ACTIVATION="An unknown issue occurred during offline activation. Please try again.",t.INVALID_EXTENSION_URL="Invalid extension URL.",t.UNSUPPORTED_PROTOCOL_VERSION="This version of the application does not support your newer account type. Please upgrade to the latest version of Standard Notes to sign in.",t.EXPIRED_PROTOCOL_VERSION="The protocol version associated with your account is outdated and no longer supported by this application. Please visit standardnotes.com/help/security for more information.",t.UNSUPPORTED_KEY_DERIVATION="Your account was created on a platform with higher security capabilities than this browser supports. If we attempted to generate your login keys here, it would take hours. Please use a browser with more up to date security capabilities, like Google Chrome or Firefox, to log in.",t.INVALID_PASSWORD_COST="Unable to sign in due to insecure password parameters. Please visit standardnotes.com/help/security for more information.",t.INVALID_PASSWORD="Invalid password.",t.OUTDATED_PROTOCOL_ALERT_IGNORE="Sign In",t.UPGRADING_ENCRYPTION="Upgrading your account's encryption version",t.SETTING_PASSCODE="Setting passcode",t.CHANGING_PASSCODE="Changing passcode",t.REMOVING_PASSCODE="Removing passcode",t.DO_NOT_CLOSE_APPLICATION="Do not close the application until this process completes.",t.UNKNOWN_ERROR="Unknown error.",t.InsufficientPasswordMessage=function(e){return"Your password must be at least ".concat(e," characters in length. For your security, please choose a longer password or, ideally, a passphrase, and try again.")},t.StrictSignInFailed=function(e,t){return"Strict Sign In has refused the server's sign-in parameters. The latest account version is ".concat(t,", but the server is reporting a version of ").concat(e," for your account. If you'd like to proceed with sign in anyway, please disable Strict Sign In and try again.")},t.CredentialsChangeStrings={PasscodeRequired:"Your passcode is required to process your credentials change.",Failed:"Unable to change your credentials due to a sync error. Please try again."},t.RegisterStrings={PasscodeRequired:"Your passcode is required in order to register for an account."},t.SignInStrings={PasscodeRequired:"Your passcode is required in order to sign in to your account.",IncorrectMfa:"Incorrect two-factor authentication code. Please try again.",SignInCanceledMissingMfa:"Your sign in request has been canceled."},t.ProtocolUpgradeStrings={SuccessAccount:"Your encryption version has been successfully upgraded. You may be asked to enter your credentials again on other devices you're signed into.",SuccessPasscodeOnly:"Your encryption version has been successfully upgraded.",Fail:"Unable to upgrade encryption version. Please try again.",UpgradingPasscode:"Upgrading local encryption..."},t.ChallengeModalTitle={Generic:"Authentication Required",Migration:"Storage Update"},t.SessionStrings={EnterEmailAndPassword:"Please enter your account email and password.",RecoverSession:e=>e?"Your credentials are needed for ".concat(e," to refresh your session with the server."):"Your credentials are needed to refresh your session with the server.",SessionRestored:"Your session has been successfully restored.",EnterMfa:"Please enter your two-factor authentication code.",MfaInputPlaceholder:"Two-factor authentication code",EmailInputPlaceholder:"Email",PasswordInputPlaceholder:"Password",KeychainRecoveryErrorTitle:"Invalid Credentials",KeychainRecoveryError:"The email or password you entered is incorrect.\n\nPlease note that this sign-in request is made against the default server. If you are using a custom server, you must uninstall the app then reinstall, and sign back into your account.",RevokeTitle:"Revoke this session?",RevokeConfirmButton:"Revoke",RevokeCancelButton:"Cancel",RevokeText:"The associated app will be signed out and all data removed from the device when it is next launched. You can sign back in on that device at any time.",CurrentSessionRevoked:"Your session has been revoked and all local data has been removed from this device."},t.ChallengeStrings={UnlockApplication:"Authentication is required to unlock the application",NoteAccess:"Authentication is required to view this note",FileAccess:"Authentication is required to access this file",ImportFile:"Authentication is required to import a backup file",AddPasscode:"Authentication is required to add a passcode",RemovePasscode:"Authentication is required to remove your passcode",ChangePasscode:"Authentication is required to change your passcode",ChangeAutolockInterval:"Authentication is required to change autolock timer duration",RevokeSession:"Authentication is required to revoke a session",EnterAccountPassword:"Enter your account password",EnterLocalPasscode:"Enter your application passcode",EnterPasscodeForMigration:"Your application passcode is required to perform an upgrade of your local data storage structure.",EnterPasscodeForRootResave:"Enter your application passcode to continue",EnterCredentialsForProtocolUpgrade:"Enter your credentials to perform encryption upgrade",EnterCredentialsForDecryptedBackupDownload:"Enter your credentials to download a decrypted backup",AccountPasswordPlaceholder:"Account Password",LocalPasscodePlaceholder:"Application Passcode",DecryptEncryptedFile:"Enter the account password associated with the import file",ExportBackup:"Authentication is required to export a backup",DisableBiometrics:"Authentication is required to disable biometrics",UnprotectNote:"Authentication is required to unprotect a note",UnprotectFile:"Authentication is required to unprotect a file",SearchProtectedNotesText:"Authentication is required to search protected contents",SelectProtectedNote:"Authentication is required to select a protected note",DisableMfa:"Authentication is required to disable two-factor authentication",DeleteAccount:"Authentication is required to delete your account",ListedAuthorization:"Authentication is required to approve this note for Listed"},t.ErrorAlertStrings={MissingSessionTitle:"Missing Session",MissingSessionBody:"We were unable to load your server session. This represents an inconsistency with your application state. Please take an opportunity to backup your data, then sign out and sign back in to resolve this issue.",StorageDecryptErrorTitle:"Storage Error",StorageDecryptErrorBody:"We were unable to decrypt your local storage. Please restart the app and try again. If you're unable to resolve this issue, and you have an account, you may try uninstalling the app then reinstalling, then signing back into your account. Otherwise, please contact help@standardnotes.org for support."},t.KeychainRecoveryStrings={Title:"Restore Keychain",Text:"We've detected that your keychain has been wiped. This can happen when restoring your device from a backup. Please enter your account password to restore your account keys."}},85835:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76727:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionManager=void 0;const i=r(10687);class o extends i.AbstractService{constructor(e,t){super(t),this.subscriptionApiService=e,this.internalEventBus=t}acceptInvitation(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.subscriptionApiService.acceptInvite(e);return t.data.error?{success:!1,message:t.data.error.message}:t.data}catch(e){return{success:!1,message:"Could not accept invitation."}}}))}listSubscriptionInvitations(){var e;return n(this,void 0,void 0,(function*(){try{const t=yield this.subscriptionApiService.listInvites();return null!==(e=t.data.invitations)&&void 0!==e?e:[]}catch(e){return[]}}))}inviteToSubscription(e){return n(this,void 0,void 0,(function*(){try{return!0===(yield this.subscriptionApiService.invite(e)).data.success}catch(e){return!1}}))}cancelInvitation(e){return n(this,void 0,void 0,(function*(){try{return!0===(yield this.subscriptionApiService.cancelInvite(e)).data.success}catch(e){return!1}}))}}t.SubscriptionManager=o},34089:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SyncMode=void 0,(r=t.SyncMode||(t.SyncMode={}))[r.Default=1]="Default",r[r.DownloadFirst=2]="DownloadFirst"},35255:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},31883:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SyncQueueStrategy=void 0,(r=t.SyncQueueStrategy||(t.SyncQueueStrategy={}))[r.ResolveOnNext=1]="ResolveOnNext",r[r.ForceSpawnNew=2]="ForceSpawnNew"},21027:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8762:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SyncSource=void 0,(r=t.SyncSource||(t.SyncSource={}))[r.External=1]="External",r[r.SpawnQueue=2]="SpawnQueue",r[r.ResolveQueue=3]="ResolveQueue",r[r.MoreDirtyItems=4]="MoreDirtyItems",r[r.AfterDownloadFirst=5]="AfterDownloadFirst",r[r.IntegrityCheck=6]="IntegrityCheck",r[r.ResolveOutOfSync=7]="ResolveOutOfSync"},4394:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},15922:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserService=t.AccountEvent=void 0;const i=r(10256),o=r(64657),a=r(58325),s=r(45272),c=r(30306),l=r(10687),u=r(63840),d=r(19288);var p;!function(e){e.SignedInOrRegistered="SignedInOrRegistered",e.SignedOut="SignedOut"}(p=t.AccountEvent||(t.AccountEvent={}));class h extends l.AbstractService{constructor(e,t,r,n,i,o,a,s,c,l){super(l),this.sessionManager=e,this.syncService=t,this.storageService=r,this.itemManager=n,this.protocolService=i,this.alertService=o,this.challengeService=a,this.protectionService=s,this.userApiService=c,this.internalEventBus=l,this.signingIn=!1,this.registering=!1,this.MINIMUM_PASSCODE_LENGTH=1,this.MINIMUM_PASSWORD_LENGTH=8}deinit(){super.deinit(),this.sessionManager=void 0,this.syncService=void 0,this.storageService=void 0,this.itemManager=void 0,this.protocolService=void 0,this.alertService=void 0,this.challengeService=void 0,this.protectionService=void 0,this.userApiService=void 0}register(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return n(this,void 0,void 0,(function*(){if(this.protocolService.hasAccount())throw Error("Tried to register when an account already exists.");if(this.registering)throw Error("Already registering.");this.registering=!0;try{this.lockSyncing();const n=yield this.sessionManager.register(e,t,r);return this.syncService.resetSyncState(),yield this.storageService.setPersistencePolicy(r?d.StoragePersistencePolicies.Ephemeral:d.StoragePersistencePolicies.Default),i?yield this.syncService.markAllItemsAsNeedingSyncAndPersist():(yield this.itemManager.removeAllItemsFromMemory(),yield this.clearDatabase()),yield this.notifyEvent(p.SignedInOrRegistered),this.unlockSyncing(),this.registering=!1,yield this.syncService.downloadFirstSync(300),this.protocolService.decryptErroredPayloads(),n}catch(e){throw this.unlockSyncing(),this.registering=!1,e}}))}signIn(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return n(this,void 0,void 0,(function*(){if(this.protocolService.hasAccount())throw Error("Tried to sign in when an account already exists.");if(this.signingIn)throw Error("Already signing in.");this.signingIn=!0;try{this.lockSyncing();const n=yield this.sessionManager.signIn(e,t,r,i);if(n.response.error)this.unlockSyncing();else{this.syncService.resetSyncState(),yield this.storageService.setPersistencePolicy(i?d.StoragePersistencePolicies.Ephemeral:d.StoragePersistencePolicies.Default),o?yield this.syncService.markAllItemsAsNeedingSyncAndPersist():(this.itemManager.removeAllItemsFromMemory(),yield this.clearDatabase()),yield this.notifyEvent(p.SignedInOrRegistered),this.unlockSyncing();const e=this.syncService.downloadFirstSync(1e3,{checkIntegrity:!0,awaitAll:a}).then((()=>{a||this.protocolService.decryptErroredPayloads()}));a&&(yield e,yield this.protocolService.decryptErroredPayloads())}return n.response}finally{this.signingIn=!1}}))}deleteAccount(){return n(this,void 0,void 0,(function*(){if(!(yield this.protectionService.authorizeAction(c.ChallengeReason.DeleteAccount,{fallBackToAccountPassword:!0,requireAccountPassword:!0,forcePrompt:!1})))return{error:!0,message:a.INVALID_PASSWORD};const e=this.sessionManager.getSureUser().uuid,t=yield this.userApiService.deleteAccount(e);return t.data.error?{error:!0,message:t.data.error.message}:(yield this.signOut(!0),this.alertService.alert(s.InfoStrings.AccountDeleted),{error:!1})}))}submitUserRequest(e){return n(this,void 0,void 0,(function*(){const t=this.sessionManager.getSureUser().uuid;try{const r=yield this.userApiService.submitUserRequest({userUuid:t,requestType:e});return!r.data.error&&r.data.success}catch(e){return!1}}))}correctiveSignIn(e){return n(this,void 0,void 0,(function*(){this.lockSyncing();const t=yield this.sessionManager.bypassChecksAndSignInWithRootKey(e.keyParams.identifier,e,!1);return t.error||(yield this.notifyEvent(p.SignedInOrRegistered),this.unlockSyncing(),this.syncService.downloadFirstSync(1e3,{checkIntegrity:!0}),this.protocolService.decryptErroredPayloads()),this.unlockSyncing(),t}))}changeCredentials(e){return n(this,void 0,void 0,(function*(){const t=yield this.performCredentialsChange(e);return t.error&&this.alertService.alert(t.error.message),t}))}signOut(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.DeinitSource.SignOut;return n(this,void 0,void 0,(function*(){const r=()=>n(this,void 0,void 0,(function*(){yield this.sessionManager.signOut(),yield this.protocolService.deleteWorkspaceSpecificKeyStateFromDevice(),yield this.storageService.clearAllData(),yield this.notifyEvent(p.SignedOut,{source:t})}));if(e)return void(yield r());const i=this.itemManager.getDirtyItems();if(i.length>0){const e=1===i.length;(yield this.alertService.confirm("There ".concat(e?"is":"are"," ").concat(i.length," ").concat(e?"item":"items"," with unsynced changes. If you sign out, these changes will be lost forever. Are you sure you want to sign out?")))&&(yield r())}else yield r()}))}performProtocolUpgrade(){return n(this,void 0,void 0,(function*(){const e=this.protocolService.hasPasscode(),t=this.protocolService.hasAccount(),r=[];e&&r.push(new c.ChallengePrompt(c.ChallengeValidation.LocalPasscode,void 0,a.ChallengeStrings.LocalPasscodePlaceholder)),t&&r.push(new c.ChallengePrompt(c.ChallengeValidation.AccountPassword,void 0,a.ChallengeStrings.AccountPasswordPlaceholder));const n=new c.Challenge(r,c.ChallengeReason.ProtocolUpgrade,!0),o=yield this.challengeService.promptForChallengeResponse(n);if(!o)return{canceled:!0};const s=yield this.alertService.blockingDialog(a.DO_NOT_CLOSE_APPLICATION,a.UPGRADING_ENCRYPTION);try{let r;if(e&&(r=o.getValueForType(c.ChallengeValidation.LocalPasscode).value),t){const e=o.getValueForType(c.ChallengeValidation.AccountPassword).value,t=yield this.changeCredentials({currentPassword:e,newPassword:e,passcode:r,origination:i.KeyParamsOrigination.ProtocolUpgrade,validateNewPasswordStrength:!1});if(null==t?void 0:t.error)return{error:t.error}}return e&&(yield this.removePasscodeWithoutWarning(),yield this.setPasscodeWithoutWarning(r,i.KeyParamsOrigination.ProtocolUpgrade)),{success:!0}}catch(e){return{error:e}}finally{s()}}))}addPasscode(e){return n(this,void 0,void 0,(function*(){if(e.length<this.MINIMUM_PASSCODE_LENGTH)return!1;if(!(yield this.protectionService.authorizeAddingPasscode()))return!1;const t=yield this.alertService.blockingDialog(a.DO_NOT_CLOSE_APPLICATION,a.SETTING_PASSCODE);try{return yield this.setPasscodeWithoutWarning(e,i.KeyParamsOrigination.PasscodeCreate),!0}finally{t()}}))}removePasscode(){return n(this,void 0,void 0,(function*(){if(!(yield this.protectionService.authorizeRemovingPasscode()))return!1;const e=yield this.alertService.blockingDialog(a.DO_NOT_CLOSE_APPLICATION,a.REMOVING_PASSCODE);try{return yield this.removePasscodeWithoutWarning(),!0}finally{e()}}))}changePasscode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.KeyParamsOrigination.PasscodeChange;return n(this,void 0,void 0,(function*(){if(e.length<this.MINIMUM_PASSCODE_LENGTH)return!1;if(!(yield this.protectionService.authorizeChangingPasscode()))return!1;const r=yield this.alertService.blockingDialog(a.DO_NOT_CLOSE_APPLICATION,t===i.KeyParamsOrigination.ProtocolUpgrade?a.ProtocolUpgradeStrings.UpgradingPasscode:a.CHANGING_PASSCODE);try{return yield this.removePasscodeWithoutWarning(),yield this.setPasscodeWithoutWarning(e,t),!0}finally{r()}}))}setPasscodeWithoutWarning(e,t){return n(this,void 0,void 0,(function*(){const r=o.UuidGenerator.GenerateUuid(),n=yield this.protocolService.createRootKey(r,e,t);yield this.protocolService.setNewRootKeyWrapper(n),yield this.rewriteItemsKeys(),yield this.syncService.sync()}))}removePasscodeWithoutWarning(){return n(this,void 0,void 0,(function*(){yield this.protocolService.removePasscode(),yield this.rewriteItemsKeys()}))}rewriteItemsKeys(){return n(this,void 0,void 0,(function*(){const e=this.itemManager.getDisplayableItemsKeys().map((e=>e.payloadRepresentation()));yield this.storageService.forceDeletePayloads(e),yield this.syncService.persistPayloads(e)}))}lockSyncing(){this.syncService.lockSyncing()}unlockSyncing(){this.syncService.unlockSyncing()}clearDatabase(){return this.storageService.clearAllPayloads()}performCredentialsChange(e){return n(this,void 0,void 0,(function*(){const{wrappingKey:t,canceled:r}=yield this.challengeService.getWrappingKeyIfApplicable(e.passcode);if(r)return{error:Error(a.CredentialsChangeStrings.PasscodeRequired)};if(void 0!==e.newPassword&&e.validateNewPasswordStrength&&e.newPassword.length<this.MINIMUM_PASSWORD_LENGTH)return{error:Error(a.InsufficientPasswordMessage(this.MINIMUM_PASSWORD_LENGTH))};if(!(yield this.protocolService.validateAccountPassword(e.currentPassword)).valid)return{error:Error(a.INVALID_PASSWORD)};const n=this.sessionManager.getUser().email,i=yield this.recomputeRootKeysForCredentialChange({currentPassword:e.currentPassword,currentEmail:n,origination:e.origination,newEmail:e.newEmail,newPassword:e.newPassword});this.lockSyncing();const o=yield this.sessionManager.changeCredentials({currentServerPassword:i.currentRootKey.serverPassword,newRootKey:i.newRootKey,wrappingKey:t,newEmail:e.newEmail});if(this.unlockSyncing(),!o.response.error){const e=yield this.protocolService.createNewItemsKeyWithRollback();if(yield this.protocolService.reencryptItemsKeys(),yield this.syncService.sync({awaitAll:!0}),this.protocolService.getSureDefaultItemsKey().neverSynced)return yield this.sessionManager.changeCredentials({currentServerPassword:i.newRootKey.serverPassword,newRootKey:i.currentRootKey,wrappingKey:t}),yield this.protocolService.reencryptItemsKeys(),yield e(),yield this.syncService.sync({awaitAll:!0}),{error:Error(a.CredentialsChangeStrings.Failed)}}return o.response}))}recomputeRootKeysForCredentialChange(e){var t,r;return n(this,void 0,void 0,(function*(){return{currentRootKey:yield this.protocolService.computeRootKey(e.currentPassword,yield this.protocolService.getRootKeyParams()),newRootKey:yield this.protocolService.createRootKey(null!==(t=e.newEmail)&&void 0!==t?t:e.currentEmail,null!==(r=e.newPassword)&&void 0!==r?r:e.currentPassword,e.origination)}}))}}t.UserService=h},84333:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},18165:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceManager=void 0;const i=r(10687);class o extends i.AbstractService{constructor(e,t){super(t),this.workspaceApiService=e,this.internalEventBus=t}initiateKeyshare(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.workspaceApiService.initiateKeyshare(e);return void 0!==t.data.error?{success:!1}:t.data}catch(e){return{success:!1}}}))}listWorkspaceUsers(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.workspaceApiService.listWorkspaceUsers(e);return void 0!==t.data.error?{users:[]}:t.data}catch(e){return{users:[]}}}))}listWorkspaces(){return n(this,void 0,void 0,(function*(){try{const e=yield this.workspaceApiService.listWorkspaces();return void 0!==e.data.error?{ownedWorkspaces:[],joinedWorkspaces:[]}:e.data}catch(e){return{ownedWorkspaces:[],joinedWorkspaces:[]}}}))}acceptInvite(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.workspaceApiService.acceptInvite(e);return void 0!==t.data.error?{success:!1}:t.data}catch(e){return{success:!1}}}))}inviteToWorkspace(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.workspaceApiService.inviteToWorkspace(e);return void 0!==t.data.error?null:t.data}catch(e){return null}}))}createWorkspace(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.workspaceApiService.createWorkspace(e);return void 0!==t.data.error?null:t.data}catch(e){return null}}))}}t.WorkspaceManager=o},29966:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(17656),t),i(r(69207),t),i(r(58864),t),i(r(54943),t),i(r(80091),t),i(r(87941),t),i(r(63840),t),i(r(27555),t),i(r(4394),t),i(r(85788),t),i(r(30935),t),i(r(30306),t),i(r(47205),t),i(r(38796),t),i(r(96040),t),i(r(18908),t),i(r(48531),t),i(r(61235),t),i(r(42101),t),i(r(92820),t),i(r(84136),t),i(r(6113),t),i(r(76081),t),i(r(47084),t),i(r(52567),t),i(r(13744),t),i(r(12121),t),i(r(41479),t),i(r(49184),t),i(r(52335),t),i(r(31714),t),i(r(88050),t),i(r(63706),t),i(r(354),t),i(r(43934),t),i(r(24382),t),i(r(21400),t),i(r(35067),t),i(r(54613),t),i(r(42176),t),i(r(39143),t),i(r(81052),t),i(r(40829),t),i(r(2901),t),i(r(40330),t),i(r(15689),t),i(r(87143),t),i(r(14027),t),i(r(39239),t),i(r(61325),t),i(r(13211),t),i(r(37830),t),i(r(94250),t),i(r(99463),t),i(r(83990),t),i(r(81098),t),i(r(23479),t),i(r(69991),t),i(r(83387),t),i(r(76473),t),i(r(10147),t),i(r(26353),t),i(r(71835),t),i(r(10687),t),i(r(19032),t),i(r(15328),t),i(r(4194),t),i(r(60106),t),i(r(24825),t),i(r(96640),t),i(r(14753),t),i(r(13066),t),i(r(89057),t),i(r(19288),t),i(r(45272),t),i(r(58325),t),i(r(85835),t),i(r(76727),t),i(r(34089),t),i(r(35255),t),i(r(31883),t),i(r(21027),t),i(r(8762),t),i(r(4394),t),i(r(15922),t),i(r(84333),t),i(r(18165),t)},20819:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(29966),t)},29686:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},91606:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},38331:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7624:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(29686),t),i(r(91606),t),i(r(38331),t)},23111:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},38644:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(23111),t)},20876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},67790:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.timingSafeEqual=void 0,t.timingSafeEqual=function(e,t){const r=String(e);let n=String(t);const i=r.length;let o=0;i!==n.length&&(n=r,o=1);for(let e=0;e<i;e++)o|=r.charCodeAt(e)^n.charCodeAt(e);return 0===o}},70097:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(20876),t),i(r(67790),t)},20830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},43438:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(20830),t)},64025:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},57756:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},84948:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7747:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},13795:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SodiumConstant=void 0,(r=t.SodiumConstant||(t.SodiumConstant={}))[r.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_STATEBYTES=52]="CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_STATEBYTES",r[r.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_ABYTES=17]="CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_ABYTES",r[r.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_HEADERBYTES=24]="CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_HEADERBYTES",r[r.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_KEYBYTES=32]="CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_KEYBYTES",r[r.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_PUSH=0]="CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_PUSH",r[r.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_PULL=1]="CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_PULL",r[r.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_REKEY=2]="CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_REKEY",r[r.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_FINAL=3]="CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_TAG_FINAL",r[r.CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_MESSAGEBYTES_MAX=274877906816]="CRYPTO_SECRETSTREAM_XCHACHA20POLY1305_MESSAGEBYTES_MAX"},74078:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4044:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},25786:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},54373:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},47349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},91921:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},86976:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(64025),t),i(r(57756),t),i(r(84948),t),i(r(13795),t),i(r(74078),t),i(r(4044),t),i(r(25786),t),i(r(54373),t),i(r(47349),t),i(r(91921),t),i(r(7747),t)},86553:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(7624),t),i(r(38644),t),i(r(70097),t),i(r(43438),t),i(r(86976),t)},49148:(e,t,r)=>{r.d(t,{Ak:()=>s,FB:()=>i,Im:()=>c,_e:()=>o,g:()=>a});var n=r(16418);function i(e){return{"mac-web":n.Platform.MacWeb,"mac-desktop":n.Platform.MacDesktop,"linux-web":n.Platform.LinuxWeb,"linux-desktop":n.Platform.LinuxDesktop,"windows-web":n.Platform.WindowsWeb,"windows-desktop":n.Platform.WindowsDesktop,ios:n.Platform.Ios,android:n.Platform.Android}[e]}function o(e){return{[n.Platform.MacWeb]:"mac-web",[n.Platform.MacDesktop]:"mac-desktop",[n.Platform.LinuxWeb]:"linux-web",[n.Platform.LinuxDesktop]:"linux-desktop",[n.Platform.WindowsWeb]:"windows-web",[n.Platform.WindowsDesktop]:"windows-desktop",[n.Platform.Ios]:"ios",[n.Platform.Android]:"android"}[e]}function a(e){return{[n.Environment.Web]:"web",[n.Environment.Desktop]:"desktop",[n.Environment.Mobile]:"native-mobile-web"}[e]}function s(e){return e===n.Environment.Web||e===n.Environment.Desktop}function c(e){return e===n.Environment.Mobile}},58364:(e,t,r)=>{r.d(t,{J5:()=>b,UC:()=>g,wM:()=>o.SyncEvent,ie:()=>l,g:()=>S.g,Im:()=>S.Im,Ak:()=>S.Ak,FB:()=>S.FB,_e:()=>S._e});var n=r(70297),i=r(10256),o=r(20819),a=r(16418),s=r(65432),c=r(64657);function l(e){return{[o.SyncEvent.SyncCompletedWithAllItemsUploaded]:o.ApplicationEvent.CompletedFullSync,[o.SyncEvent.SingleRoundTripSyncCompleted]:o.ApplicationEvent.CompletedIncrementalSync,[o.SyncEvent.SyncError]:o.ApplicationEvent.FailedSync,[o.SyncEvent.SyncTakingTooLong]:o.ApplicationEvent.HighLatencySync,[o.SyncEvent.EnterOutOfSync]:o.ApplicationEvent.EnteredOutOfSync,[o.SyncEvent.ExitOutOfSync]:o.ApplicationEvent.ExitedOutOfSync,[o.SyncEvent.LocalDataLoaded]:o.ApplicationEvent.LocalDataLoaded,[o.SyncEvent.MajorDataChange]:o.ApplicationEvent.MajorDataChange,[o.SyncEvent.LocalDataIncrementalLoad]:o.ApplicationEvent.LocalDataIncrementalLoad,[o.SyncEvent.StatusChanged]:o.ApplicationEvent.SyncStatusChanged,[o.SyncEvent.SyncWillBegin]:o.ApplicationEvent.WillSync,[o.SyncEvent.InvalidSession]:o.ApplicationEvent.InvalidSyncSession,[o.SyncEvent.DatabaseReadError]:o.ApplicationEvent.LocalDatabaseReadError,[o.SyncEvent.DatabaseWriteError]:o.ApplicationEvent.LocalDatabaseWriteError,[o.SyncEvent.DownloadFirstSyncCompleted]:o.ApplicationEvent.CompletedInitialSync}[e]}var u=r(75082),d=r(10715),p=r(44412);const h={loadBatchSize:700,supportsFileNavigation:!1};function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g{constructor(e){v(this,"onDeinit",void 0),v(this,"ephemeralIdentifier",c.nonSecureRandomIdentifier()),v(this,"migrationService",void 0),v(this,"deprecatedHttpService",void 0),v(this,"payloadManager",void 0),v(this,"protocolService",void 0),v(this,"diskStorageService",void 0),v(this,"inMemoryStore",void 0),v(this,"apiService",void 0),v(this,"sessionManager",void 0),v(this,"syncService",void 0),v(this,"challengeService",void 0),v(this,"singletonManager",void 0),v(this,"componentManagerService",void 0),v(this,"protectionService",void 0),v(this,"actionsManager",void 0),v(this,"historyManager",void 0),v(this,"itemManager",void 0),v(this,"keyRecoveryService",void 0),v(this,"preferencesService",void 0),v(this,"featuresService",void 0),v(this,"userService",void 0),v(this,"webSocketsService",void 0),v(this,"settingsService",void 0),v(this,"mfaService",void 0),v(this,"listedService",void 0),v(this,"fileService",void 0),v(this,"mutatorService",void 0),v(this,"integrityService",void 0),v(this,"statusService",void 0),v(this,"filesBackupService",void 0),v(this,"internalEventBus",void 0),v(this,"eventHandlers",[]),v(this,"services",[]),v(this,"streamRemovers",[]),v(this,"serviceObservers",[]),v(this,"managedSubscribers",[]),v(this,"autoSyncInterval",void 0),v(this,"createdNewDatabase",!1),v(this,"started",!1),v(this,"launched",!1),v(this,"dealloced",!1),v(this,"revokingSession",!1),v(this,"handledFullSyncStage",!1),v(this,"environment",void 0),v(this,"platform",void 0),v(this,"deviceInterface",void 0),v(this,"alertService",void 0),v(this,"identifier",void 0),v(this,"options",void 0);const t=y(y({},h),e);if(!p.W.onLog)throw Error("SNLog.onLog must be set.");if(!p.W.onError)throw Error("SNLog.onError must be set.");const r=["deviceInterface","environment","platform","crypto","alertService","identifier","defaultHost","appVersion"];for(const e of r)if(!t[e])throw Error("".concat(e," must be supplied when creating an application."));this.environment=e.environment,this.platform=e.platform,this.deviceInterface=e.deviceInterface,this.alertService=e.alertService,this.identifier=e.identifier,this.options=Object.freeze(t),this.constructInternalEventBus(),this.constructServices(),this.defineInternalEventHandlers()}get subscriptions(){return this.subscriptionManager}get workspaces(){return this.workspaceManager}get files(){return this.fileService}get features(){return this.featuresService}get items(){return this.itemManager}get protections(){return this.protectionService}get sync(){return this.syncService}get user(){return this.userService}get settings(){return this.settingsService}get mutator(){return this.mutatorService}get sessions(){return this.sessionManager}get status(){return this.statusService}get fileBackups(){return this.filesBackupService}get componentManager(){return this.componentManagerService}get listed(){return this.listedService}computePrivateUsername(e){return(0,u.ComputePrivateUsername)(this.options.crypto,e)}async prepareForLaunch(e){if(this.launched)throw new Error("Attempting to prelaunch already launched application");await this.options.crypto.initialize(),this.setLaunchCallback(e);const t=await this.deviceInterface.openDatabase(this.identifier).catch((e=>{this.notifyEvent(o.ApplicationEvent.LocalDatabaseReadError,e)}));this.createdNewDatabase=(0,c.useBoolean)(null==t?void 0:t.isNewDatabase,!1),await this.migrationService.initialize(),await this.notifyEvent(o.ApplicationEvent.MigrationsLoaded),await this.handleStage(o.ApplicationStage.PreparingForLaunch_0),await this.diskStorageService.initializeFromDisk(),await this.notifyEvent(o.ApplicationEvent.StorageReady),await this.protocolService.initialize(),await this.handleStage(o.ApplicationStage.ReadyForLaunch_05),this.started=!0,await this.notifyEvent(o.ApplicationEvent.Started)}setLaunchCallback(e){this.challengeService.sendChallenge=e.receiveChallenge}async launch(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.launched)throw new Error("Attempting to launch already launched application");this.launched=!1;const t=this.getLaunchChallenge();if(t){const e=await this.challengeService.promptForChallengeResponse(t);if(!e)throw Error("Launch challenge was cancelled.");await this.handleLaunchChallengeResponse(e)}if(this.diskStorageService.isStorageWrapped())try{await this.diskStorageService.decryptStorage()}catch(e){this.alertService.alert(o.ErrorAlertStrings.StorageDecryptErrorBody,o.ErrorAlertStrings.StorageDecryptErrorTitle)}await this.handleStage(o.ApplicationStage.StorageDecrypted_09),this.apiService.loadHost(),this.webSocketsService.loadWebSocketUrl(),await this.sessionManager.initializeFromDisk(),this.settingsService.initializeFromDisk(),this.featuresService.initializeFromDisk(),this.launched=!0,await this.notifyEvent(o.ApplicationEvent.Launched),await this.handleStage(o.ApplicationStage.Launched_10);const r=await this.syncService.getDatabasePayloads();await this.handleStage(o.ApplicationStage.LoadingDatabase_11),this.createdNewDatabase&&await this.syncService.onNewDatabaseCreated();const n=this.syncService.loadDatabasePayloads(r).then((async()=>{if(this.dealloced)throw"Application has been destroyed.";await this.handleStage(o.ApplicationStage.LoadedDatabase_12),this.beginAutoSyncTimer(),await this.syncService.sync({mode:o.SyncMode.DownloadFirst,source:o.SyncSource.External})}));e&&await n}onStart(){}onLaunch(){}getLaunchChallenge(){return this.protectionService.createLaunchChallenge()}async handleLaunchChallengeResponse(e){if(e.challenge.hasPromptForValidationType(o.ChallengeValidation.LocalPasscode)){var t;let r=null===(t=e.artifacts)||void 0===t?void 0:t.wrappingKey;if(!r){const t=e.getValueForType(o.ChallengeValidation.LocalPasscode);r=await this.protocolService.computeWrappingKey(t.value)}await this.protocolService.unwrapRootKey(r)}}beginAutoSyncTimer(){this.autoSyncInterval=setInterval((()=>{this.syncService.log("Syncing from autosync"),this.sync.sync()}),3e4)}async handleStage(e){for(const t of this.services)await t.handleApplicationStage(e)}addEventObserver(e,t){const r={callback:e,singleEvent:t};return this.eventHandlers.push(r),()=>{c.removeFromArray(this.eventHandlers,r)}}addSingleEventObserver(e,t){return this.addEventObserver((async r=>{r===e&&t(e)}),e)}async getDiagnostics(){let e={application:{snjsVersion:d.in,appVersion:this.options.appVersion,environment:this.options.environment,platform:this.options.platform}};for(const t of this.services){const r=await t.getDiagnostics();r&&(e=y(y({},e),r))}return e}async notifyEvent(e,t){e===o.ApplicationEvent.Started?this.onStart():e===o.ApplicationEvent.Launched&&this.onLaunch();for(const r of this.eventHandlers.slice())(r.singleEvent&&r.singleEvent===e||!r.singleEvent)&&await r.callback(e,t||{});this.migrationService.handleApplicationEvent(e)}isDatabaseLoaded(){return this.syncService.isDatabaseLoaded()}getSessions(){return this.sessionManager.getSessionsList()}async revokeSession(e){if(await this.protectionService.authorizeSessionRevoking())return this.sessionManager.revokeSession(e)}async revokeAllOtherSessions(){return this.sessionManager.revokeAllOtherSessions()}userCanManageSessions(){const e=this.getUserVersion();return!c.isNullOrUndefined(e)&&i.compareVersions(e,i.ProtocolVersion.V004)>=0}async getUserSubscription(){return this.sessionManager.getSubscription()}async getAvailableSubscriptions(){return this.sessionManager.getAvailableSubscriptions()}streamItems(e,t){const r=this.itemManager.addObserver(e,(e=>{let{changed:r,inserted:n,removed:i,source:o}=e;t({changed:r,inserted:n,removed:i,source:o})})),n=this.itemManager.getItems(e);return t({inserted:n,changed:[],removed:[],source:a.PayloadEmitSource.InitialObserverRegistrationPush}),this.streamRemovers.push(r),()=>{r(),c.removeFromArray(this.streamRemovers,r)}}async setHost(e){this.httpService.setHost(e),await this.apiService.setHost(e)}getHost(){return this.apiService.getHost()}async setCustomHost(e){await this.setHost(e),this.webSocketsService.setWebSocketUrl(void 0)}getUser(){if(!this.launched)throw Error("Attempting to access user before application unlocked");return this.sessionManager.getUser()}getUserPasswordCreationDate(){return this.protocolService.getPasswordCreatedDate()}getProtocolEncryptionDisplayName(){return this.protocolService.getEncryptionDisplayName()}getUserVersion(){return this.protocolService.getUserVersion()}protocolUpgradeAvailable(){return this.protocolService.upgradeAvailable()}isEncryptionAvailable(){return this.hasAccount()||this.hasPasscode()}async upgradeProtocolVersion(){const e=await this.userService.performProtocolUpgrade();return e.success?this.hasAccount()?this.alertService.alert(o.ProtocolUpgradeStrings.SuccessAccount):this.alertService.alert(o.ProtocolUpgradeStrings.SuccessPasscodeOnly):e.error&&this.alertService.alert(o.ProtocolUpgradeStrings.Fail),e}noAccount(){return!this.hasAccount()}hasAccount(){return this.protocolService.hasAccount()}hasProtectionSources(){return this.protectionService.hasProtectionSources()}hasUnprotectedAccessSession(){return this.protectionService.hasUnprotectedAccessSession()}getProtectionSessionExpiryDate(){return this.protectionService.getSessionExpiryDate()}clearProtectionSession(){return this.protectionService.clearSession()}async authorizeProtectedActionForNotes(e,t){return await this.protectionService.authorizeProtectedActionForItems(e,t)}authorizeNoteAccess(e){return this.protectionService.authorizeItemAccess(e)}authorizeAutolockIntervalChange(){return this.protectionService.authorizeAutolockIntervalChange()}authorizeSearchingProtectedNotesText(){return this.protectionService.authorizeSearchingProtectedNotesText()}async createEncryptedBackupFileForAutomatedDesktopBackups(){return this.protocolService.createEncryptedBackupFile()}async createEncryptedBackupFile(){if(await this.protectionService.authorizeBackupCreation())return this.protocolService.createEncryptedBackupFile()}async createDecryptedBackupFile(){if(await this.protectionService.authorizeBackupCreation())return this.protocolService.createDecryptedBackupFile()}isEphemeralSession(){return this.diskStorageService.isEphemeralSession()}setValue(e,t,r){return this.diskStorageService.setValue(e,t,r)}getValue(e,t){return this.diskStorageService.getValue(e,t)}async removeValue(e,t){return this.diskStorageService.removeValue(e,t)}getPreference(e,t){return this.preferencesService.getValue(e,t)}async setPreference(e,t){return this.preferencesService.setValue(e,t)}async prepareForDeinit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=Promise.all(this.services.map((e=>e.blockDeinit())));0===e?await t:await Promise.race([t,c.sleep(e)])}promptForCustomChallenge(e){var t;return null===(t=this.challengeService)||void 0===t?void 0:t.promptForChallengeResponse(e)}addChallengeObserver(e,t){return this.challengeService.addChallengeObserver(e,t)}submitValuesForChallenge(e,t){return this.challengeService.submitValuesForChallenge(e,t)}cancelChallenge(e){this.challengeService.cancelChallenge(e)}setOnDeinit(e){this.onDeinit=e}deinit(e,t){var r;this.dealloced=!0,clearInterval(this.autoSyncInterval),this.autoSyncInterval=void 0;for(const e of this.serviceObservers)e();for(const e of this.managedSubscribers)e();for(const e of this.services)e.deinit();this.options.crypto.deinit(),this.options=void 0,this.createdNewDatabase=!1,this.services.length=0,this.serviceObservers.length=0,this.managedSubscribers.length=0,this.streamRemovers.length=0,this.clearInternalEventBus(),this.clearServices(),this.started=!1,null===(r=this.onDeinit)||void 0===r||r.call(this,this,e,t),this.onDeinit=void 0}async register(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.userService.register(e,t,r,n)}async signIn(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return this.userService.signIn(e,t,r,n,i,o)}async changeEmail(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.KeyParamsOrigination.EmailChange;return this.userService.changeCredentials({currentPassword:t,newEmail:e,passcode:r,origination:n,validateNewPasswordStrength:!1})}async changePassword(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.KeyParamsOrigination.PasswordChange,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return this.userService.changeCredentials({currentPassword:e,newPassword:t,passcode:r,origination:n,validateNewPasswordStrength:o})}async handleRevokedSession(){if(this.revokingSession)return;this.revokingSession=!0;const e=this.alertService;await this.user.signOut(!0),e.alert(o.SessionStrings.CurrentSessionRevoked)}async validateAccountPassword(e){const{valid:t}=await this.protocolService.validateAccountPassword(e);return t}isStarted(){return this.started}isLaunched(){return this.launched}hasPasscode(){return this.protocolService.hasPasscode()}isLocked(){return this.started?this.challengeService.isPasscodeLocked():Promise.resolve(!0)}async lock(){return await this.prepareForDeinit(500),this.deinit(this.getDeinitMode(),o.DeinitSource.Lock)}softLockBiometrics(){const e=new o.Challenge([new o.ChallengePrompt(o.ChallengeValidation.Biometric)],o.ChallengeReason.ApplicationUnlock,!1);this.promptForCustomChallenge(e),this.notifyEvent(o.ApplicationEvent.BiometricsSoftLockEngaged),this.addChallengeObserver(e,{onComplete:()=>{this.notifyEvent(o.ApplicationEvent.BiometricsSoftLockDisengaged)}})}isNativeMobileWeb(){return this.environment===a.Environment.Mobile}getDeinitMode(){return"hard"===this.getValue(o.StorageKey.DeinitMode)?o.DeinitMode.Hard:o.DeinitMode.Soft}addPasscode(e){return this.userService.addPasscode(e)}async removePasscode(){return this.userService.removePasscode()}async changePasscode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.KeyParamsOrigination.PasscodeChange;return this.userService.changePasscode(e,t)}getStorageEncryptionPolicy(){return this.diskStorageService.getStorageEncryptionPolicy()}setStorageEncryptionPolicy(e){return this.diskStorageService.setEncryptionPolicy(e),this.protocolService.repersistAllItems()}enableEphemeralPersistencePolicy(){return this.diskStorageService.setPersistencePolicy(o.StoragePersistencePolicies.Ephemeral)}hasPendingMigrations(){return this.migrationService.hasPendingMigrations()}generateUuid(){return c.UuidGenerator.GenerateUuid()}presentKeyRecoveryWizard(){return this.keyRecoveryService.presentKeyRecoveryWizard()}canAttemptDecryptionOfItem(e){return this.keyRecoveryService.canAttemptDecryptionOfItem(e)}changeDeviceInterface(e){this.deviceInterface=e;for(const t of this.services)"deviceInterface"in t&&(t.deviceInterface=e)}isMfaFeatureAvailable(){return this.mfaService.isMfaFeatureAvailable()}async isMfaActivated(){return this.mfaService.isMfaActivated()}async generateMfaSecret(){return this.mfaService.generateMfaSecret()}async getOtpToken(e){return this.mfaService.getOtpToken(e)}async enableMfa(e,t){return this.mfaService.enableMfa(e,t)}async disableMfa(){if(await this.protectionService.authorizeMfaDisable())return this.mfaService.disableMfa()}getNewSubscriptionToken(){return this.apiService.getNewSubscriptionToken()}isThirdPartyHostUsed(){return this.apiService.isThirdPartyHostUsed()}getCloudProviderIntegrationUrl(e,t){return this.settingsService.getCloudProviderIntegrationUrl(e,t)}constructServices(){this.createPayloadManager(),this.createItemManager(),this.createDiskStorageManager(),this.createInMemoryStorageManager(),this.createProtocolService(),this.diskStorageService.provideEncryptionProvider(this.protocolService),this.createChallengeService(),this.createHttpManager(),this.createApiService(),this.createHttpService(),this.createUserServer(),this.createUserRequestServer(),this.createUserApiService(),this.createSubscriptionServer(),this.createSubscriptionApiService(),this.createWebSocketServer(),this.createWebSocketApiService(),this.createSubscriptionManager(),this.createWorkspaceServer(),this.createWorkspaceApiService(),this.createWorkspaceManager(),this.createWebSocketsService(),this.createSessionManager(),this.createHistoryManager(),this.createSyncManager(),this.createProtectionService(),this.createUserService(),this.createKeyRecoveryService(),this.createSingletonManager(),this.createPreferencesService(),this.createSettingsService(),this.createFeaturesService(),this.createComponentManager(),this.createMigrationService(),this.createMfaService(),this.createFileService(),this.createIntegrityService(),this.createMutatorService(),this.createListedService(),this.createActionsManager(),this.createStatusService(),(0,o.isDesktopDevice)(this.deviceInterface)&&this.createFilesBackupService(this.deviceInterface)}clearServices(){this.migrationService=void 0,this.alertService=void 0,this.deprecatedHttpService=void 0,this.httpService=void 0,this.payloadManager=void 0,this.protocolService=void 0,this.diskStorageService=void 0,this.inMemoryStore=void 0,this.apiService=void 0,this.userApiService=void 0,this.userServer=void 0,this.userRequestServer=void 0,this.subscriptionApiService=void 0,this.subscriptionServer=void 0,this.subscriptionManager=void 0,this.workspaceApiService=void 0,this.workspaceServer=void 0,this.workspaceManager=void 0,this.webSocketApiService=void 0,this.webSocketServer=void 0,this.sessionManager=void 0,this.syncService=void 0,this.challengeService=void 0,this.singletonManager=void 0,this.componentManagerService=void 0,this.protectionService=void 0,this.actionsManager=void 0,this.historyManager=void 0,this.itemManager=void 0,this.keyRecoveryService=void 0,this.preferencesService=void 0,this.featuresService=void 0,this.userService=void 0,this.webSocketsService=void 0,this.settingsService=void 0,this.mfaService=void 0,this.listedService=void 0,this.fileService=void 0,this.integrityService=void 0,this.mutatorService=void 0,this.filesBackupService=void 0,this.statusService=void 0,this.services=[]}constructInternalEventBus(){this.internalEventBus=new o.InternalEventBus}defineInternalEventHandlers(){this.internalEventBus.addEventHandler(this.featuresService,o.ApiServiceEvent.MetaReceived),this.internalEventBus.addEventHandler(this.integrityService,o.SyncEvent.SyncRequestsIntegrityCheck),this.internalEventBus.addEventHandler(this.syncService,o.IntegrityEvent.IntegrityCheckCompleted)}clearInternalEventBus(){this.internalEventBus.deinit(),this.internalEventBus=void 0}createListedService(){this.listedService=new s.o8(this.apiService,this.itemManager,this.settingsService,this.deprecatedHttpService,this.protectionService,this.mutator,this.internalEventBus),this.services.push(this.listedService)}createFileService(){this.fileService=new o.FileService(this.apiService,this.itemManager,this.syncService,this.protocolService,this.challengeService,this.alertService,this.options.crypto,this.internalEventBus),this.services.push(this.fileService)}createIntegrityService(){this.integrityService=new o.IntegrityService(this.apiService,this.apiService,this.payloadManager,this.internalEventBus),this.services.push(this.integrityService)}createFeaturesService(){this.featuresService=new s.sX(this.diskStorageService,this.apiService,this.itemManager,this.webSocketsService,this.settingsService,this.userService,this.syncService,this.alertService,this.sessionManager,this.options.crypto,this.internalEventBus),this.serviceObservers.push(this.featuresService.addEventObserver((e=>{switch(e){case o.FeaturesEvent.UserRolesChanged:this.notifyEvent(o.ApplicationEvent.UserRolesChanged);break;case o.FeaturesEvent.FeaturesUpdated:this.notifyEvent(o.ApplicationEvent.FeaturesUpdated);break;default:c.assertUnreachable(e)}}))),this.services.push(this.featuresService)}createWebSocketsService(){this.webSocketsService=new s.g7(this.diskStorageService,this.options.webSocketUrl,this.webSocketApiService,this.internalEventBus),this.services.push(this.webSocketsService)}createMigrationService(){this.migrationService=new s.FR({protocolService:this.protocolService,deviceInterface:this.deviceInterface,storageService:this.diskStorageService,sessionManager:this.sessionManager,challengeService:this.challengeService,itemManager:this.itemManager,singletonManager:this.singletonManager,featuresService:this.featuresService,environment:this.environment,identifier:this.identifier,internalEventBus:this.internalEventBus}),this.services.push(this.migrationService)}createUserService(){this.userService=new o.UserService(this.sessionManager,this.syncService,this.diskStorageService,this.itemManager,this.protocolService,this.alertService,this.challengeService,this.protectionService,this.userApiService,this.internalEventBus),this.serviceObservers.push(this.userService.addEventObserver((async(e,t)=>{switch(e){case o.AccountEvent.SignedInOrRegistered:this.notifyEvent(o.ApplicationEvent.SignedIn);break;case o.AccountEvent.SignedOut:await this.notifyEvent(o.ApplicationEvent.SignedOut),await this.prepareForDeinit(),this.deinit(this.getDeinitMode(),(null==t?void 0:t.source)||o.DeinitSource.SignOut);break;default:c.assertUnreachable(e)}}))),this.services.push(this.userService)}createApiService(){this.apiService=new s.QL(this.deprecatedHttpService,this.diskStorageService,this.options.defaultHost,this.inMemoryStore,this.options.crypto,this.internalEventBus),this.services.push(this.apiService)}createUserApiService(){this.userApiService=new n.UserApiService(this.userServer,this.userRequestServer)}createUserServer(){this.userServer=new n.UserServer(this.httpService)}createUserRequestServer(){this.userRequestServer=new n.UserRequestServer(this.httpService)}createSubscriptionApiService(){this.subscriptionApiService=new n.SubscriptionApiService(this.subscriptionServer)}createSubscriptionServer(){this.subscriptionServer=new n.SubscriptionServer(this.httpService)}createWebSocketApiService(){this.webSocketApiService=new n.WebSocketApiService(this.webSocketServer)}createWebSocketServer(){this.webSocketServer=new n.WebSocketServer(this.httpService)}createSubscriptionManager(){this.subscriptionManager=new o.SubscriptionManager(this.subscriptionApiService,this.internalEventBus)}createWorkspaceServer(){this.workspaceServer=new n.WorkspaceServer(this.httpService)}createWorkspaceApiService(){this.workspaceApiService=new n.WorkspaceApiService(this.workspaceServer)}createWorkspaceManager(){this.workspaceManager=new o.WorkspaceManager(this.workspaceApiService,this.internalEventBus)}createItemManager(){this.itemManager=new s.A(this.payloadManager,this.options,this.internalEventBus),this.services.push(this.itemManager)}createComponentManager(){this.componentManagerService=new s.bJ(this.itemManager,this.syncService,this.featuresService,this.preferencesService,this.alertService,this.environment,this.platform,this.internalEventBus,this.deviceInterface),this.services.push(this.componentManagerService)}createHttpManager(){this.deprecatedHttpService=new s.aJ(this.environment,this.options.appVersion,this.internalEventBus),this.services.push(this.deprecatedHttpService)}createHttpService(){this.httpService=new n.HttpService(this.environment,this.options.appVersion,d.in,this.options.defaultHost,this.apiService.processMetaObject.bind(this.apiService))}createPayloadManager(){this.payloadManager=new s.Ot(this.internalEventBus),this.services.push(this.payloadManager)}createSingletonManager(){this.singletonManager=new s.c5(this.itemManager,this.payloadManager,this.syncService,this.internalEventBus),this.services.push(this.singletonManager)}createDiskStorageManager(){this.diskStorageService=new s.e5(this.deviceInterface,this.identifier,this.environment,this.internalEventBus),this.services.push(this.diskStorageService)}createInMemoryStorageManager(){this.inMemoryStore=new o.InMemoryStore}createProtocolService(){this.protocolService=new o.EncryptionService(this.itemManager,this.payloadManager,this.deviceInterface,this.diskStorageService,this.identifier,this.options.crypto,this.internalEventBus),this.serviceObservers.push(this.protocolService.addEventObserver((async e=>{e===o.EncryptionServiceEvent.RootKeyStatusChanged&&await this.notifyEvent(o.ApplicationEvent.KeyStatusChanged)}))),this.services.push(this.protocolService)}createKeyRecoveryService(){this.keyRecoveryService=new s.Mj(this.itemManager,this.payloadManager,this.apiService,this.protocolService,this.challengeService,this.alertService,this.diskStorageService,this.syncService,this.userService,this.internalEventBus),this.services.push(this.keyRecoveryService)}createSessionManager(){this.sessionManager=new s.Lb(this.diskStorageService,this.apiService,this.userApiService,this.alertService,this.protocolService,this.challengeService,this.webSocketsService,this.httpService,this.internalEventBus),this.serviceObservers.push(this.sessionManager.addEventObserver((async e=>{switch(e){case s.Px.Restored:(async()=>{await this.sync.sync(),this.protocolService.needsNewRootKeyBasedItemsKey()&&this.protocolService.createNewDefaultItemsKey().then((()=>{this.sync.sync()}))})();break;case s.Px.Revoked:await this.handleRevokedSession();break;default:c.assertUnreachable(e)}}))),this.services.push(this.sessionManager)}createSyncManager(){this.syncService=new s.xu(this.itemManager,this.sessionManager,this.protocolService,this.diskStorageService,this.payloadManager,this.apiService,this.historyManager,{loadBatchSize:this.options.loadBatchSize},this.internalEventBus);const e=this.syncService.addEventObserver((async e=>{const t=l(e);t&&(await this.protocolService.onSyncEvent(e),await this.notifyEvent(t),t===o.ApplicationEvent.CompletedFullSync&&(this.handledFullSyncStage||(this.handledFullSyncStage=!0,await this.handleStage(o.ApplicationStage.FullSyncCompleted_13))))}));this.serviceObservers.push(e),this.services.push(this.syncService)}createChallengeService(){this.challengeService=new s.PJ(this.diskStorageService,this.protocolService,this.internalEventBus),this.services.push(this.challengeService)}createProtectionService(){this.protectionService=new s.Xr(this.protocolService,this.challengeService,this.diskStorageService,this.internalEventBus),this.serviceObservers.push(this.protectionService.addEventObserver((e=>{e===s.Hh.UnprotectedSessionBegan?this.notifyEvent(o.ApplicationEvent.UnprotectedSessionBegan):e===s.Hh.UnprotectedSessionExpired&&this.notifyEvent(o.ApplicationEvent.UnprotectedSessionExpired)}))),this.services.push(this.protectionService)}createHistoryManager(){this.historyManager=new s.Cv(this.itemManager,this.diskStorageService,this.apiService,this.protocolService,this.deviceInterface,this.internalEventBus),this.services.push(this.historyManager)}createActionsManager(){this.actionsManager=new s.UP(this.itemManager,this.alertService,this.deviceInterface,this.deprecatedHttpService,this.payloadManager,this.protocolService,this.syncService,this.challengeService,this.listedService,this.internalEventBus),this.services.push(this.actionsManager)}createPreferencesService(){this.preferencesService=new s.J_(this.singletonManager,this.itemManager,this.syncService,this.internalEventBus),this.serviceObservers.push(this.preferencesService.addEventObserver((()=>{this.notifyEvent(o.ApplicationEvent.PreferencesChanged)}))),this.services.push(this.preferencesService)}createSettingsService(){this.settingsService=new s.kf(this.sessionManager,this.apiService,this.internalEventBus),this.services.push(this.settingsService)}createMfaService(){this.mfaService=new s.P$(this.settingsService,this.options.crypto,this.featuresService,this.internalEventBus),this.services.push(this.mfaService)}createMutatorService(){this.mutatorService=new s.Vu(this.itemManager,this.syncService,this.protectionService,this.protocolService,this.payloadManager,this.challengeService,this.componentManagerService,this.historyManager,this.internalEventBus),this.services.push(this.mutatorService)}createFilesBackupService(e){this.filesBackupService=new o.FilesBackupService(this.itemManager,this.apiService,this.protocolService,e,this.statusService,this.internalEventBus),this.services.push(this.filesBackupService)}createStatusService(){this.statusService=new o.StatusService(this.internalEventBus),this.services.push(this.statusService)}}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class b{constructor(e,t,r){m(this,"item",void 0),m(this,"removeObserver",void 0),this.item=t.items.findSureItem(e),r&&r(this.item),this.removeObserver=t.streamItems(this.item.content_type,(t=>{let{changed:n,inserted:i}=t;const o=[...n,...i].find((t=>t.uuid===e));o&&(this.item=o,r&&r(this.item))}))}deinit(){this.removeObserver?(this.removeObserver(),this.removeObserver=void 0):console.error("A LiveItem is attempting to be deinited more than once.")}}var S=r(49148)},82698:(e,t,r)=>{r.d(t,{$:()=>n,R:()=>s});var n,i=r(20819),o=r(64657);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.PrimaryApplicationSet="PrimaryApplicationSet",e.DescriptorsDataChanged="DescriptorsDataChanged",e.DeviceWillRestart="DeviceWillRestart"}(n||(n={}));class s extends i.AbstractService{constructor(e,t){void 0===t&&(t=new i.InternalEventBus),super(t),a(this,"device",void 0),a(this,"primaryApplication",void 0),a(this,"descriptorRecord",void 0),a(this,"callback",void 0),a(this,"onApplicationDeinit",((e,t,r)=>{this.primaryApplication===e&&(this.primaryApplication=void 0),(async()=>{r===i.DeinitSource.SignOut&&this.removeDescriptor(this.descriptorForApplication(e));const o=this.getDescriptors();if(0===o.length||r===i.DeinitSource.SignOutAll){const e=o.map((e=>e.identifier));this.descriptorRecord={};const{killsApplication:t}=await this.device.clearAllDataFromDevice(e);if(t)return}const a=this.device;this.notifyEvent(n.DeviceWillRestart,{source:r,mode:t}),this.deinit(),t===i.DeinitMode.Hard?a.performHardReset():a.performSoftReset()})()})),this.device=e}deinit(){super.deinit(),this.device.deinit(),this.device=void 0,this.callback=void 0,this.primaryApplication=void 0,this.onApplicationDeinit=void 0}async initialize(e){if(this.device.isDeviceDestroyed())throw"Attempting to initialize new application while device is destroyed.";this.callback=e,this.descriptorRecord=await this.device.getJsonParsedRawStorageValue(i.RawStorageKey.DescriptorRecord),this.descriptorRecord||await this.createNewDescriptorRecord();let t=this.findPrimaryDescriptor();t||(console.error("No primary application descriptor found. Ensure migrations have been run."),t=this.getDescriptors()[0],this.setDescriptorAsPrimary(t),await this.persistDescriptors());const r=await this.buildApplication(t);this.primaryApplication=r,await this.notifyEvent(n.PrimaryApplicationSet,{application:r})}async createNewDescriptorRecord(){const e="standardnotes",t={[e]:{identifier:e,label:"Main Workspace",primary:!0}};this.device.setRawStorageValue(i.RawStorageKey.DescriptorRecord,JSON.stringify(t)),this.descriptorRecord=t,await this.persistDescriptors()}getDescriptors(){return Object.values(this.descriptorRecord)}findPrimaryDescriptor(){for(const e of this.getDescriptors())if(e.primary)return e}async signOutAllWorkspaces(){await this.primaryApplication.user.signOut(!1,i.DeinitSource.SignOutAll)}setDescriptorAsPrimary(e){for(const t of this.getDescriptors())t.primary=t===e}async persistDescriptors(){await this.device.setRawStorageValue(i.RawStorageKey.DescriptorRecord,JSON.stringify(this.descriptorRecord)),this.notifyEvent(n.DescriptorsDataChanged,{descriptors:this.descriptorRecord})}renameDescriptor(e,t){e.label=t,this.persistDescriptors()}removeDescriptor(e){delete this.descriptorRecord[e.identifier];const t=this.getDescriptors();return e.primary&&t.length>0&&this.setDescriptorAsPrimary(t[0]),this.persistDescriptors()}removeAllDescriptors(){return this.descriptorRecord={},this.persistDescriptors()}descriptorForApplication(e){return this.descriptorRecord[e.identifier]}createNewApplicationDescriptor(e){const t=o.UuidGenerator.GenerateUuid(),r=this.getDescriptors().length+1;return{identifier:t,label:e||"Workspace ".concat(r),primary:!1}}async createNewPrimaryDescriptor(e){const t=this.createNewApplicationDescriptor(e);this.descriptorRecord[t.identifier]=t,this.setDescriptorAsPrimary(t),await this.persistDescriptors()}async unloadCurrentAndCreateNewDescriptor(e){await this.createNewPrimaryDescriptor(e),this.primaryApplication&&this.primaryApplication.deinit(this.primaryApplication.getDeinitMode(),i.DeinitSource.SwitchWorkspace)}async unloadCurrentAndActivateDescriptor(e){this.setDescriptorAsPrimary(e),await this.persistDescriptors(),this.primaryApplication&&this.primaryApplication.deinit(this.primaryApplication.getDeinitMode(),i.DeinitSource.SwitchWorkspace)}async buildApplication(e){const t=await this.callback.applicationCreator(e,this.device);return t.setOnDeinit(this.onApplicationDeinit),t}}},78338:(e,t,r)=>{r.d(t,{rp:()=>h,iB:()=>i,Jj:()=>y,_p:()=>d,Zw:()=>o});var n=r(70295);class i{getIconForFileType(e){let t="file-other";return"application/pdf"===e&&(t="file-pdf"),/word/.test(e)&&(t="file-doc"),/powerpoint|presentation/.test(e)&&(t="file-ppt"),/excel|spreadsheet/.test(e)&&(t="file-xls"),/^image\//.test(e)&&(t="file-image"),/^video\//.test(e)&&(t="file-mov"),/^audio\//.test(e)&&(t="file-music"),/(zip)|([tr]ar)|(7z)/.test(e)&&(t="file-zip"),t}getIconAndTintForNoteType(e){switch(e){case n.NoteType.RichText:return["rich-text",1];case n.NoteType.Markdown:return["markdown",2];case n.NoteType.Authentication:return["authenticator",6];case n.NoteType.Spreadsheet:return["spreadsheets",5];case n.NoteType.Task:return["tasks",3];case n.NoteType.Code:return["code",4];default:return["plain-text",1]}}}var o,a=r(20819),s=r(16418),c=r(64657),l=r(10256);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d{constructor(e,t,r){u(this,"application",void 0),u(this,"templateNoteOptions",void 0),u(this,"item",void 0),u(this,"dealloced",!1),u(this,"innerValueChangeObservers",[]),u(this,"removeStreamObserver",void 0),u(this,"isTemplateNote",!1),u(this,"saveTimeout",void 0),u(this,"defaultTagUuid",void 0),u(this,"defaultTag",void 0),u(this,"runtimeId","".concat(Math.random())),this.application=e,this.templateNoteOptions=r,t&&(this.item=t),r&&(this.defaultTagUuid=r.tag),this.defaultTagUuid&&(this.defaultTag=this.application.items.findItem(this.defaultTagUuid))}deinit(){var e;this.dealloced=!0,null===(e=this.removeStreamObserver)||void 0===e||e.call(this),this.removeStreamObserver=void 0,this.application=void 0,this.item=void 0,this.innerValueChangeObservers.length=0,this.saveTimeout=void 0}async initialize(e){if(!this.item){var t,r,i,o,a;const c=(null===(t=this.defaultTag)||void 0===t||null===(r=t.preferences)||void 0===r?void 0:r.editorIdentifier)||(null===(i=this.application.componentManager.getDefaultEditor())||void 0===i?void 0:i.identifier),u=c?this.application.componentManager.componentWithIdentifier(c):void 0,d=this.application.mutator.createTemplateItem(l.ContentType.Note,{text:"",title:(null===(o=this.templateNoteOptions)||void 0===o?void 0:o.title)||"",noteType:(null==u?void 0:u.noteType)||n.NoteType.Plain,editorIdentifier:c,references:[]},{created_at:(null===(a=this.templateNoteOptions)||void 0===a?void 0:a.createdAt)||new Date});if(this.isTemplateNote=!0,this.item=d,this.defaultTagUuid){const t=this.application.items.findItem(this.defaultTagUuid);await this.application.items.addTagToNote(d,t,e)}this.notifyObservers(this.item,s.PayloadEmitSource.InitialObserverRegistrationPush)}this.streamItems()}notifyObservers(e,t){for(const r of this.innerValueChangeObservers)r(e,t)}streamItems(){this.dealloced||(this.removeStreamObserver=this.application.streamItems(l.ContentType.Note,(e=>{let{changed:t,inserted:r,source:n}=e;if(this.dealloced)return;const i=t.concat(r).find((e=>e.uuid===this.item.uuid));i&&(this.isTemplateNote=!1,this.item=i,this.notifyObservers(i,n))})))}insertTemplatedNote(){return this.isTemplateNote=!1,this.application.mutator.insertItem(this.item)}addNoteInnerValueChangeObserver(e){this.innerValueChangeObservers.push(e),this.item&&e(this.item,s.PayloadEmitSource.InitialObserverRegistrationPush);const t=this.innerValueChangeObservers;return()=>{(0,c.removeFromArray)(t,e)}}async save(e){const t=e.editorValues.title,r=e.editorValues.text,n=this.isTemplateNote;if("undefined"!=typeof document&&document.hidden)return void this.application.alertService.alert(a.InfoStrings.SavingWhileDocumentHidden);if(n&&await this.insertTemplatedNote(),!this.application.items.findItem(this.item.uuid))return void this.application.alertService.alert(a.InfoStrings.InvalidNote);await this.application.mutator.changeItem(this.item,(n=>{const i=n;if(e.customMutate&&e.customMutate(i),i.title=t,i.text=r,!e.dontUpdatePreviews){const e=r||"",t=e.length>160,n=e.substring(0,160)+(t?"...":"");i.preview_plain=n,i.preview_html=void 0}}),e.isUserModified),this.saveTimeout&&clearTimeout(this.saveTimeout);const i=e.bypassDebouncer||this.application.noAccount()?100:this.application.isNativeMobileWeb()?700:350;this.saveTimeout=setTimeout((()=>{this.application.sync.sync()}),i)}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h{constructor(e,t){p(this,"application",void 0),p(this,"item",void 0),p(this,"dealloced",!1),p(this,"removeStreamObserver",void 0),p(this,"runtimeId","".concat(Math.random())),this.application=e,this.item=t}deinit(){var e;this.dealloced=!0,null===(e=this.removeStreamObserver)||void 0===e||e.call(this),this.removeStreamObserver=void 0,this.application=void 0,this.item=void 0}async initialize(){this.streamItems()}streamItems(){this.removeStreamObserver=this.application.streamItems(l.ContentType.File,(e=>{let{changed:t,inserted:r}=e;if(this.dealloced)return;const n=t.concat(r).find((e=>e.uuid===this.item.uuid));n&&(this.item=n)}))}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y{constructor(e){f(this,"application",void 0),f(this,"itemControllers",[]),f(this,"addTagHierarchy",void 0),f(this,"changeObservers",[]),f(this,"eventObservers",[]),this.application=e,this.addTagHierarchy=e.getPreference(s.PrefKey.NoteAddToParentFolders,!0),this.eventObservers.push(e.addSingleEventObserver(a.ApplicationEvent.PreferencesChanged,(async()=>{this.addTagHierarchy=e.getPreference(s.PrefKey.NoteAddToParentFolders,!0)})))}deinit(){this.application=void 0,this.eventObservers.forEach((e=>{e()})),this.changeObservers.length=0;for(const e of this.itemControllers)this.closeItemController(e,{notify:!1});this.itemControllers.length=0}async createItemController(e){let t;if(this.activeItemViewController&&this.closeItemController(this.activeItemViewController,{notify:!1}),e instanceof s.FileItem){const r=e;t=new h(this.application,r)}else if(e instanceof s.SNNote){const r=e;t=new d(this.application,r)}else t=new d(this.application,void 0,e);return this.itemControllers.push(t),await t.initialize(this.addTagHierarchy),this.notifyObservers(),t}closeItemController(e){let{notify:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{notify:!0};e.deinit(),(0,c.removeFromArray)(this.itemControllers,e),t&&this.notifyObservers()}closeActiveItemController(){const e=this.activeItemViewController;e&&this.closeItemController(e,{notify:!0})}closeAllItemControllers(){for(const e of this.itemControllers)this.closeItemController(e,{notify:!1});this.notifyObservers()}get activeItemViewController(){return this.itemControllers[0]}addActiveControllerChangeObserver(e){this.changeObservers.push(e),this.activeItemViewController&&e(this.activeItemViewController);const t=this.changeObservers;return()=>{(0,c.removeFromArray)(t,e)}}notifyObservers(){for(const e of this.changeObservers)e(this.activeItemViewController)}}!function(e){e.EnteringBackground="EnteringBackground",e.ResumingFromBackground="ResumingFromBackground",e.GainingFocus="GainingFocus",e.LosingFocus="LosingFocus",e.AndroidBackButtonPressed="AndroidBackButtonPressed",e.ColorSchemeChanged="ColorSchemeChanged",e.KeyboardFrameWillChange="KeyboardFrameWillChange",e.KeyboardFrameDidChange="KeyboardFrameDidChange"}(o||(o={}))},44412:(e,t,r)=>{function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{W:()=>i});class i{static log(){this.onLog(...arguments)}static error(e){return this.onError(e),e}}n(i,"onLog",void 0),n(i,"onError",void 0)},72186:(e,t,r)=>{r.d(t,{_:()=>v});var n={};r.r(n),r.d(n,{StorageReader1_0_0:()=>p.a,StorageReader2_0_0:()=>d});var i=r(44412),o=r(16418),a=r(10715),s=r(9907),c=r(20819),l=r(64657),u=r(34988);class d extends u.V{static version(){return a.Oq}async getStorage(){const e=(0,c.namespacedKey)(this.identifier,c.RawStorageKey.StorageObject),t=await this.deviceInterface.getRawStorageValue(e);return t?JSON.parse(t):void 0}async getNonWrappedValue(e){var t;const r=await this.getStorage();if(r)return null===(t=r[c.ValueModesKeys.Nonwrapped])||void 0===t?void 0:t[e]}async getAccountKeyParams(){return this.getNonWrappedValue(c.StorageKey.RootKeyParams)}async hasNonWrappedAccountKeys(){const e=await this.deviceInterface.getNamespacedKeychainValue(this.identifier);return!(0,l.isNullOrUndefined)(e)}async hasPasscode(){const e=await this.getNonWrappedValue(c.StorageKey.WrappedRootKey);return!(0,l.isNullOrUndefined)(e)}usesKeychain(){return!0}}var p=r(61733),h=r(75082);function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y="last_migration_timestamp";class v extends s.U{constructor(){super(...arguments),f(this,"reader",void 0),f(this,"didPreRun",!1),f(this,"memoizedNeedsKeychainRepair",void 0)}async preRun(){await this.storeVersionNumber(),this.didPreRun=!0}registerStageHandlers(){this.registerStageHandler(c.ApplicationStage.PreparingForLaunch_0,(async()=>{await this.needsKeychainRepair()&&await this.repairMissingKeychain(),this.markDone()}))}getStoredVersion(){const e=(0,c.namespacedKey)(this.services.identifier,c.RawStorageKey.SnjsVersion);return this.services.deviceInterface.getRawStorageValue(e)}async storeVersionNumber(){const e=(0,c.namespacedKey)(this.services.identifier,c.RawStorageKey.SnjsVersion);if(!await this.getStoredVersion()){const t=["migrations","ephemeral","user","cachedThemes","syncToken","encryptedStorage"];let r=!1;for(const e of t)if(await this.services.deviceInterface.getRawStorageValue(e)){r=!0;break}if(r)await this.services.deviceInterface.setRawStorageValue(e,a.DU);else{const t=(0,c.namespacedKey)(this.services.identifier,y),r=await this.services.deviceInterface.getRawStorageValue(t);(0,l.isNullOrUndefined)(r)?await this.services.deviceInterface.setRawStorageValue(e,a.in):(await this.services.deviceInterface.setRawStorageValue(e,a.Oq),await this.services.deviceInterface.removeRawStorageValue(y))}}}async loadReader(){if(this.reader)return;const e=await this.getStoredVersion();this.reader=function(e,t,r,i){const o=function(e){const t=Object.values(n).sort(((e,t)=>-1*(0,a.D8)(e.version(),t.version())));for(const r of t){if(r.version()===e)return r;if((0,a.jV)(r.version(),e))return r}throw Error("Cannot find reader for version ".concat(e))}(e);return new o(t,r,i)}(e,this.services.deviceInterface,this.services.identifier,this.services.environment)}async needsKeychainRepair(){if(null!=this.memoizedNeedsKeychainRepair)return this.memoizedNeedsKeychainRepair;if(!this.didPreRun)throw Error("Attempting to access specialized function before prerun");if(this.reader||await this.loadReader(),!this.reader.usesKeychain)return this.memoizedNeedsKeychainRepair=!1,this.memoizedNeedsKeychainRepair;const e=await this.reader.getAccountKeyParams();return(0,l.isNullOrUndefined)(e)||await this.reader.hasPasscode()||await this.reader.hasNonWrappedAccountKeys()?(this.memoizedNeedsKeychainRepair=!1,this.memoizedNeedsKeychainRepair):(this.memoizedNeedsKeychainRepair=!0,this.memoizedNeedsKeychainRepair)}async repairMissingKeychain(){const e=await this.getStoredVersion(),t=await this.reader.getAccountKeyParams(),r=new c.Challenge([new c.ChallengePrompt(c.ChallengeValidation.None,void 0,c.SessionStrings.PasswordInputPlaceholder,!0)],c.ChallengeReason.Custom,!1,c.KeychainRecoveryStrings.Title,c.KeychainRecoveryStrings.Text);return new Promise((n=>{this.services.challengeService.addChallengeObserver(r,{onNonvalidatedSubmit:async s=>{const c=s.values[0].value,l=this.services.protocolService.createKeyParams(t),u=await this.services.protocolService.computeRootKey(c,l),d=(await this.services.deviceInterface.getAllRawDatabasePayloads(this.services.identifier)).map((e=>new o.EncryptedPayload(e)));let p=d.find((e=>(0,h.ContentTypeUsesRootKeyEncryption)(e.content_type)));if(p||(p=d[0]),!p)throw i.W.error(Error("Attempting keychain recovery validation but no items present."));const f=await this.services.protocolService.decryptSplitSingle({usesRootKey:{items:[p],key:u}});if((0,o.isErrorDecryptingPayload)(f))this.services.challengeService.setValidationStatusForChallenge(r,s.values[0],!1);else{if(e===a.DU)await this.services.deviceInterface.setLegacyRawKeychainValue({mk:u.masterKey,ak:u.dataAuthenticationKey,version:l.version});else{const e=u.getKeychainValue();await this.services.deviceInterface.setNamespacedKeychainValue(e,this.services.identifier)}n(!0),this.services.challengeService.completeChallenge(r)}}}),this.services.challengeService.promptForChallengeResponse(r)}))}}},9907:(e,t,r)=>{r.d(t,{U:()=>o});var n=r(20819);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o{constructor(e){i(this,"services",void 0),i(this,"stageHandlers",{}),i(this,"onDoneHandler",void 0),this.services=e,this.registerStageHandlers()}static version(){throw"Must override migration version"}registerStageHandler(e,t){this.stageHandlers[e]=t}markDone(){var e;null===(e=this.onDoneHandler)||void 0===e||e.call(this),this.onDoneHandler=void 0}async promptForPasscodeUntilCorrect(e){const t=new n.Challenge([new n.ChallengePrompt(n.ChallengeValidation.None)],n.ChallengeReason.Migration,!1);return new Promise((r=>{this.services.challengeService.addChallengeObserver(t,{onNonvalidatedSubmit:async n=>{const i=n.values[0],o=i.value;await e(o)?(this.services.challengeService.completeChallenge(t),r(o)):this.services.challengeService.setValidationStatusForChallenge(t,i,!1)}}),this.services.challengeService.promptForChallengeResponse(t)}))}onDone(e){this.onDoneHandler=e}async handleStage(e){const t=this.stageHandlers[e];t&&await t()}}},34988:(e,t,r)=>{function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{V:()=>i});class i{constructor(e,t,r){n(this,"deviceInterface",void 0),n(this,"identifier",void 0),n(this,"environment",void 0),this.deviceInterface=e,this.identifier=t,this.environment=r}static version(){throw Error("Must override")}}},61733:(e,t,r)=>{r.d(t,{a:()=>c});var n=r(64657),i=r(49148),o=r(10715),a=r(20819),s=r(34988);class c extends s.V{static version(){return o.DU}async getAccountKeyParams(){return this.deviceInterface.getJsonParsedRawStorageValue(a.LegacyKeys1_0_0.AllAccountKeyParamsKey)}async hasNonWrappedAccountKeys(){if((0,a.isMobileDevice)(this.deviceInterface)){const e=await this.deviceInterface.getRawKeychainValue();return!(0,n.isNullOrUndefined)(e)}{const e=await this.deviceInterface.getRawStorageValue("mk");return!(0,n.isNullOrUndefined)(e)}}async hasPasscode(){if((0,i.Im)(this.environment)){const e=await this.deviceInterface.getJsonParsedRawStorageValue(a.LegacyKeys1_0_0.MobilePasscodeParamsKey);return!(0,n.isNullOrUndefined)(e)}{const e=await this.deviceInterface.getJsonParsedRawStorageValue(a.LegacyKeys1_0_0.WebEncryptedStorageKey);return!(0,n.isNullOrUndefined)(e)}}usesKeychain(){return!!(0,i.Im)(this.environment)}}},79437:(e,t,r)=>{r.d(t,{ce:()=>m,ly:()=>b,kK:()=>w,qW:()=>P,Ni:()=>_,pI:()=>S,R_:()=>E});var n=r(10256),i=r(91260),o=r(9907),a=r(10715),s=r(75082),c=r(70008),l=r(61733),u=r(16418),d=r(20819),p=r(64657),h=r(49148);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const g="jwt";class m extends o.U{constructor(e){super(e),v(this,"legacyReader",void 0),this.legacyReader=new l.a(this.services.deviceInterface,this.services.identifier,this.services.environment)}static version(){return a.Oq}registerStageHandlers(){this.registerStageHandler(d.ApplicationStage.PreparingForLaunch_0,(async()=>{(0,h.Ak)(this.services.environment)?await this.migrateStorageStructureForWebDesktop():(0,h.Im)(this.services.environment)&&await this.migrateStorageStructureForMobile()})),this.registerStageHandler(d.ApplicationStage.StorageDecrypted_09,(async()=>{await this.migrateArbitraryRawStorageToManagedStorageAllPlatforms(),(0,h.Im)(this.services.environment)&&await this.migrateMobilePreferences(),await this.migrateSessionStorage(),await this.deleteLegacyStorageValues()})),this.registerStageHandler(d.ApplicationStage.LoadingDatabase_11,(async()=>{await this.createDefaultItemsKeyForAllPlatforms(),this.markDone()}))}async migrateStorageStructureForWebDesktop(){const e=this.services.deviceInterface,t={[d.ValueModesKeys.Wrapped]:{},[d.ValueModesKeys.Unwrapped]:{},[d.ValueModesKeys.Nonwrapped]:{}},r=await this.legacyReader.getAccountKeyParams();r&&(t.nonwrapped[d.StorageKey.RootKeyParams]=r);const n=await e.getJsonParsedRawStorageValue(d.LegacyKeys1_0_0.WebEncryptedStorageKey);if(n){const e=new u.EncryptedPayload(n),r=await this.webDesktopHelperGetPasscodeKeyAndDecryptEncryptedStorage(e),i=r.key,o=r.decryptedStoragePayload,a=r.keyParams;t.nonwrapped[d.StorageKey.RootKeyWrapperKeyParams]=a.getPortableValue();const s=p.Copy(o.content.storage),c=p.jsonParseEmbeddedKeys(s),l=c[d.LegacyKeys1_0_0.AllAccountKeyParamsKey];t.nonwrapped[d.StorageKey.RootKeyParams]=l;let h=i;if(!p.isNullOrUndefined(c.mk)){const{accountKey:e,wrappedKey:r}=await this.webDesktopHelperExtractAndWrapAccountKeysFromValueStore(i,l,c);h=e,t.nonwrapped[d.StorageKey.WrappedRootKey]=r}t.wrapped=await this.webDesktopHelperEncryptStorage(h,o,c)}else{const e=await this.services.deviceInterface.getRawStorageValue("ak"),t=await this.services.deviceInterface.getRawStorageValue("mk");if(e||t){const n=r.version||await this.getFallbackRootKeyVersion(),i=(0,s.CreateNewRootKey)({masterKey:t,dataAuthenticationKey:e,version:n,keyParams:r});await this.services.deviceInterface.setNamespacedKeychainValue(i.getKeychainValue(),this.services.identifier)}}await this.allPlatformHelperSetStorageStructure(t)}async allPlatformHelperSetStorageStructure(e){const t=c.e.DefaultValuesObject(e.wrapped,e.unwrapped,e.nonwrapped);t[d.ValueModesKeys.Unwrapped]=void 0,await this.services.deviceInterface.setRawStorageValue(d.namespacedKey(this.services.identifier,d.RawStorageKey.StorageObject),JSON.stringify(t))}async webDesktopHelperGetPasscodeKeyAndDecryptEncryptedStorage(e){const t=await this.services.deviceInterface.getJsonParsedRawStorageValue(d.LegacyKeys1_0_0.WebPasscodeParamsKey),r=this.services.protocolService.createKeyParams(t);let n,i=e;return await this.promptForPasscodeUntilCorrect((async t=>(n=await this.services.protocolService.computeRootKey(t,r),i=await this.services.protocolService.decryptSplitSingle({usesRootKey:{items:[e],key:n}}),!u.isErrorDecryptingPayload(i)))),{decryptedStoragePayload:i,key:n,keyParams:r}}async webDesktopHelperExtractAndWrapAccountKeysFromValueStore(e,t,r){const n=(null==t?void 0:t.version)||await this.getFallbackRootKeyVersion(),i=(0,s.CreateNewRootKey)({masterKey:r.mk,dataAuthenticationKey:r.ak,version:n,keyParams:t});delete r.mk,delete r.pw,delete r.ak;const o=i.payload,a=await this.services.protocolService.encryptSplitSingle({usesRootKey:{items:[o],key:e}});return{accountKey:i,wrappedKey:u.CreateEncryptedLocalStorageContextPayload(a)}}async webDesktopHelperEncryptStorage(e,t,r){const i=await this.services.protocolService.encryptSplitSingle({usesRootKey:{items:[t.copy({content_type:n.ContentType.EncryptedStorage,content:r})],key:e}});return u.CreateEncryptedLocalStorageContextPayload(i)}async migrateStorageStructureForMobile(){p.assert((0,d.isMobileDevice)(this.services.deviceInterface));const e=await this.services.deviceInterface.getRawKeychainValue(),t=await this.services.deviceInterface.getJsonParsedRawStorageValue(d.LegacyKeys1_0_0.MobileWrappedRootKeyKey)||(null==e?void 0:e.encryptedAccountKeys),r=await this.legacyReader.getAccountKeyParams(),i=await this.services.deviceInterface.getJsonParsedRawStorageValue(d.LegacyKeys1_0_0.MobilePasscodeParamsKey),o=await this.services.deviceInterface.getJsonParsedRawStorageValue(d.NonwrappedStorageKey.MobileFirstRun),a={[d.ValueModesKeys.Nonwrapped]:{[d.StorageKey.WrappedRootKey]:t,[d.StorageKey.RootKeyWrapperKeyParams]:p.omitByCopy(i,["hash"]),[d.StorageKey.RootKeyParams]:r,[d.NonwrappedStorageKey.MobileFirstRun]:o},[d.ValueModesKeys.Unwrapped]:{},[d.ValueModesKeys.Wrapped]:{}},c=await this.services.deviceInterface.getJsonParsedRawStorageValue(d.LegacyKeys1_0_0.MobileBiometricsPrefs);c&&(a.nonwrapped[d.StorageKey.BiometricsState]=c.enabled,a.nonwrapped[d.StorageKey.MobileBiometricsTiming]=c.timing);const l=await this.services.deviceInterface.getRawStorageValue(d.LegacyKeys1_0_0.MobilePasscodeKeyboardType);if(l&&(a.nonwrapped[d.StorageKey.MobilePasscodeKeyboardType]=l),i){var h;const o=this.services.protocolService.createKeyParams(i),s=async()=>{let r;return await this.promptForPasscodeUntilCorrect((async n=>{var i;r=await this.services.protocolService.computeRootKey(n,o);const a=null==e||null===(i=e.offline)||void 0===i?void 0:i.pw;if(a)return r.serverPassword===a;if(t){const e=await this.services.protocolService.decryptSplitSingle({usesRootKey:{items:[new u.EncryptedPayload(t)],key:r}});return!u.isErrorDecryptingPayload(e)}{const e=(await this.services.deviceInterface.getAllRawDatabasePayloads(this.services.identifier))[0];if(!e)throw Error("Passcode only migration aborting due to missing keychain.offline.pw");const t=await this.services.protocolService.decryptSplitSingle({usesRootKey:{items:[new u.EncryptedPayload(e)],key:r}});return!u.isErrorDecryptingPayload(t)}})),r};if(a.nonwrapped[d.StorageKey.MobilePasscodeTiming]=null==e||null===(h=e.offline)||void 0===h?void 0:h.timing,t){const e=await s(),n=new u.EncryptedPayload(t),i=await this.services.protocolService.decryptSplitSingle({usesRootKey:{items:[n],key:e}});if(u.isErrorDecryptingPayload(i))return;const o=i.content.accountKeys,c=o.version||(null==r?void 0:r.version)||await this.getFallbackRootKeyVersion(),l=i.copy({content:u.FillItemContent({masterKey:o.mk,dataAuthenticationKey:o.ak,version:c,keyParams:r,accountKeys:void 0})}),p=await this.services.protocolService.encryptSplitSingle({usesRootKey:{items:[l],key:e}});a.nonwrapped[d.StorageKey.WrappedRootKey]=u.CreateEncryptedLocalStorageContextPayload(p),o.jwt&&this.services.deviceInterface.setRawStorageValue(g,o.jwt),await this.services.deviceInterface.clearRawKeychainValue()}else if(!t){const e=await s(),t=new u.DecryptedPayload(y({uuid:p.UuidGenerator.GenerateUuid(),content:u.FillItemContent(a.unwrapped),content_type:n.ContentType.EncryptedStorage},(0,u.PayloadTimestampDefaults)())),r=await this.services.protocolService.encryptSplitSingle({usesRootKey:{items:[t],key:e}});a.wrapped=u.CreateEncryptedLocalStorageContextPayload(r),await this.services.deviceInterface.clearRawKeychainValue()}}else if(!p.isNullOrUndefined(null==e?void 0:e.mk)){const t=e.version||(null==r?void 0:r.version)||await this.getFallbackRootKeyVersion(),n=(0,s.CreateNewRootKey)({masterKey:e.mk,dataAuthenticationKey:e.ak,version:t,keyParams:r});await this.services.deviceInterface.setNamespacedKeychainValue(n.getKeychainValue(),this.services.identifier),e.jwt&&this.services.deviceInterface.setRawStorageValue(g,e.jwt)}await this.allPlatformHelperSetStorageStructure(a)}async getFallbackRootKeyVersion(){const e=(await this.services.deviceInterface.getAllRawDatabasePayloads(this.services.identifier))[0];return e&&new u.EncryptedPayload(e).version||n.ProtocolVersion.V002}async migrateArbitraryRawStorageToManagedStorageAllPlatforms(){const e=await this.services.deviceInterface.getAllRawStorageKeyValues(),t=p.objectToValueArray(d.LegacyKeys1_0_0),r=e=>{try{return JSON.parse(e)}catch(t){return e}},n=this.services.identifier;for(const i of e){const e=i.key,o=i.value,a=n&&n.length>0&&e.startsWith(n);if(!t.includes(e)&&!a&&!p.isNullOrUndefined(o)){const t=r(o);this.services.storageService.setValue(e,t)}}}async deleteLegacyStorageValues(){const e=[...p.objectToValueArray(d.StorageKey),...p.objectToValueArray(d.LegacyKeys1_0_0),"mk","ak","pw","encryptionKey","authKey","jwt","ephemeral","cachedThemes"];for(const t of e)await this.services.deviceInterface.removeRawStorageValue(t)}async migrateMobilePreferences(){const e=await this.services.deviceInterface.getJsonParsedRawStorageValue(d.LegacyKeys1_0_0.MobileLastExportDate),t=await this.services.deviceInterface.getJsonParsedRawStorageValue(d.LegacyKeys1_0_0.MobileDoNotWarnUnsupportedEditors),r=await this.services.deviceInterface.getJsonParsedRawStorageValue(d.LegacyKeys1_0_0.MobileOptionsState);let n={};if(r){var i,o,a,s;const e=r.sortBy;n={sortBy:"updated_at"===e||"client_updated_at"===e?u.CollectionSort.UpdatedAt:e,sortReverse:null!==(i=r.sortReverse)&&void 0!==i&&i,hideNotePreview:null!==(o=r.hidePreviews)&&void 0!==o&&o,hideDate:null!==(a=r.hideDates)&&void 0!==a&&a,hideTags:null!==(s=r.hideTags)&&void 0!==s&&s}}const c=y(y({},n),{},{lastExportDate:null!=e?e:void 0,doNotShowAgainUnsupportedEditors:null!=t&&t});await this.services.storageService.setValue(d.StorageKey.MobilePreferences,c)}migrateSessionStorage(){let e=this.services.storageService.getValue(g);const t=this.services.storageService.getValue("user");if(e||t&&(e=t.jwt),!e){if(p.isNullOrUndefined(t))return;e="junk-value"}const r=new i.j(e);this.services.storageService.setValue(d.StorageKey.Session,r),(0,h.Im)(this.services.environment)&&t&&t.server&&this.services.storageService.setValue(d.StorageKey.ServerHost,t.server)}async createDefaultItemsKeyForAllPlatforms(){const e=this.services.protocolService.getRootKey();if(e){const t=await this.services.protocolService.getRootKeyParams(),r=n.ProtocolVersion.V001,i=new u.DecryptedPayload(y({uuid:p.UuidGenerator.GenerateUuid(),content_type:n.ContentType.ItemsKey,content:u.FillItemContentSpecialized({itemsKey:e.masterKey,dataAuthenticationKey:e.dataAuthenticationKey,version:(null==t?void 0:t.version)||r}),dirty:!0,dirtyIndex:(0,u.getIncrementedDirtyIndex)()},(0,u.PayloadTimestampDefaults)())),o=u.CreateDecryptedItemFromPayload(i);await this.services.itemManager.emitItemFromPayload(o.payloadRepresentation(),u.PayloadEmitSource.LocalChanged)}}}class b extends o.U{static version(){return"2.0.15"}registerStageHandlers(){this.registerStageHandler(d.ApplicationStage.LoadedDatabase_12,(async()=>{await this.createNewDefaultItemsKeyIfNecessary(),this.markDone()}))}async createNewDefaultItemsKeyIfNecessary(){this.services.protocolService.needsNewRootKeyBasedItemsKey()&&await this.services.protocolService.createNewDefaultItemsKey()}}class S extends o.U{static version(){return"2.7.0"}registerStageHandlers(){this.registerStageHandler(d.ApplicationStage.FullSyncCompleted_13,(async()=>{await this.deleteBatchManagerSingleton(),this.markDone()}))}async deleteBatchManagerSingleton(){const e=new u.CompoundPredicate("and",[new u.Predicate("content_type","=",n.ContentType.Component),new u.Predicate("identifier","=","org.standardnotes.batch-manager")]),t=this.services.singletonManager.findSingleton(n.ContentType.Component,e);t&&await this.services.itemManager.setItemToBeDeleted(t)}}class w extends o.U{static version(){return"2.20.0"}registerStageHandlers(){this.registerStageHandler(d.ApplicationStage.LoadedDatabase_12,(async()=>{await this.deleteMfaItems(),this.markDone()}))}async deleteMfaItems(){const e=this.services.itemManager.getItems("SF|MFA");for(const t of e)this.services.itemManager.removeItemLocally(t),await this.services.storageService.deletePayloadWithId(t.uuid)}}class P extends o.U{static version(){return"2.36.0"}registerStageHandlers(){this.registerStageHandler(d.ApplicationStage.LoadedDatabase_12,(async()=>{await this.removeServerExtensionsLocally(),this.markDone()}))}async removeServerExtensionsLocally(){const e=this.services.itemManager.getItems("SF|Extension");for(const t of e)this.services.itemManager.removeItemLocally(t),await this.services.storageService.deletePayloadWithId(t.uuid)}}class _ extends o.U{static version(){return"2.42.0"}registerStageHandlers(){this.registerStageHandler(d.ApplicationStage.FullSyncCompleted_13,(async()=>{await this.deleteNoDistraction(),this.markDone()}))}async deleteNoDistraction(){const e=this.services.itemManager.getItems(n.ContentType.Theme).filter((e=>"org.standardnotes.theme-no-distraction"===e.identifier));for(const t of e)await this.services.itemManager.setItemToBeDeleted(t)}}const E=[m,b,S,w,P,_]},24431:(e,t,r)=>{r.d(t,{Ni:()=>i.Ni,R_:()=>i.R_,_r:()=>n._,ce:()=>i.ce,kK:()=>i.kK,ly:()=>i.ly,pI:()=>i.pI,qW:()=>i.qW});var n=r(72186),i=r(79437)},91260:(e,t,r)=>{r.d(t,{j:()=>i});var n=r(24630);class i extends n.z{constructor(e){var t;super(),t=void 0,"jwt"in this?Object.defineProperty(this,"jwt",{value:t,enumerable:!0,configurable:!0,writable:!0}):this.jwt=t,this.jwt=e}get authorizationValue(){return this.jwt}canExpire(){return!1}}},24630:(e,t,r)=>{r.d(t,{z:()=>n});class n{}},70008:(e,t,r)=>{r.d(t,{e:()=>p});var n=r(10256),i=r(64657),o=r(44412),a=r(75082),s=r(20819),c=r(16418);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends s.AbstractService{constructor(e,t,r,n){super(n),d(this,"deviceInterface",void 0),d(this,"identifier",void 0),d(this,"environment",void 0),d(this,"internalEventBus",void 0),d(this,"encryptionProvider",void 0),d(this,"storagePersistable",!1),d(this,"persistencePolicy",void 0),d(this,"encryptionPolicy",void 0),d(this,"needsPersist",!1),d(this,"currentPersistPromise",void 0),d(this,"values",void 0),this.deviceInterface=e,this.identifier=t,this.environment=r,this.internalEventBus=n,this.setPersistencePolicy(s.StoragePersistencePolicies.Default),this.setEncryptionPolicy(s.StorageEncryptionPolicy.Default,!1)}provideEncryptionProvider(e){this.encryptionProvider=e}deinit(){this.deviceInterface=void 0,this.encryptionProvider=void 0,this.storagePersistable=!1,super.deinit()}async handleApplicationStage(e){if(await super.handleApplicationStage(e),e===s.ApplicationStage.Launched_10)this.storagePersistable=!0,this.needsPersist&&this.persistValuesToDisk();else if(e===s.ApplicationStage.StorageDecrypted_09){const e=await this.getValue(s.StorageKey.StorageEncryptionPolicy);e&&this.setEncryptionPolicy(e,!1)}}async setPersistencePolicy(e){this.persistencePolicy=e,this.persistencePolicy===s.StoragePersistencePolicies.Ephemeral&&(await this.deviceInterface.removeAllRawStorageValues(),await this.clearAllPayloads())}setEncryptionPolicy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e===s.StorageEncryptionPolicy.Disabled&&![c.Environment.Mobile].includes(this.environment))throw Error("Disabling storage encryption is only available on mobile.");this.encryptionPolicy=e,t&&this.setValue(s.StorageKey.StorageEncryptionPolicy,e)}isEphemeralSession(){return this.persistencePolicy===s.StoragePersistencePolicies.Ephemeral}async initializeFromDisk(){const e=await this.deviceInterface.getRawStorageValue(this.getPersistenceKey()),t=e?JSON.parse(e):void 0;await this.setInitialValues(t)}async setInitialValues(e){const t=e||this.defaultValuesObject();t[s.ValueModesKeys.Unwrapped]||(t[s.ValueModesKeys.Unwrapped]={}),this.values=t,this.isStorageWrapped()||(this.values[s.ValueModesKeys.Unwrapped]=u(u({},this.values[s.ValueModesKeys.Wrapped].content),this.values[s.ValueModesKeys.Unwrapped]))}isStorageWrapped(){const e=this.values[s.ValueModesKeys.Wrapped];return null!=e&&(0,c.isEncryptedLocalStoragePayload)(e)}async canDecryptWithKey(e){const t=this.values[s.ValueModesKeys.Wrapped];if(!(0,c.isEncryptedLocalStoragePayload)(t))throw Error("Attempting to decrypt non decrypted storage value");const r=await this.decryptWrappedValue(t,e);return!(0,a.isErrorDecryptingParameters)(r)}async decryptWrappedValue(e,t){if(null==e||!e.content_type)throw Error("Attempting to decrypt nonexistent wrapped value");const r=new c.EncryptedPayload(u(u(u({},e),(0,c.PayloadTimestampDefaults)()),{},{content_type:n.ContentType.EncryptedStorage})),i=t?{usesRootKey:{items:[r],key:t}}:{usesRootKeyWithKeyLookup:{items:[r]}};return await this.encryptionProvider.decryptSplitSingle(i)}async decryptStorage(){const e=this.values[s.ValueModesKeys.Wrapped];if(!(0,c.isEncryptedLocalStoragePayload)(e))throw Error("Attempting to decrypt already decrypted storage");const t=await this.decryptWrappedValue(e);if((0,a.isErrorDecryptingParameters)(t))throw o.W.error(Error("Unable to decrypt storage."));this.values[s.ValueModesKeys.Unwrapped]=(0,i.Copy)(t.content)}async persistValuesToDisk(){if(!this.storagePersistable)return void(this.needsPersist=!0);if(this.persistencePolicy===s.StoragePersistencePolicies.Ephemeral)return;await this.currentPersistPromise,this.needsPersist=!1;const e=await this.immediatelyPersistValuesToDisk();this.values[s.ValueModesKeys.Wrapped]=e[s.ValueModesKeys.Wrapped]}async awaitPersist(){await this.currentPersistPromise}async immediatelyPersistValuesToDisk(){return this.currentPersistPromise=this.executeCriticalFunction((async()=>{var e;const t=await this.generatePersistableValues();return this.persistencePolicy===s.StoragePersistencePolicies.Ephemeral||await(null===(e=this.deviceInterface)||void 0===e?void 0:e.setRawStorageValue(this.getPersistenceKey(),JSON.stringify(t))),t})),this.currentPersistPromise}async generatePersistableValues(){const e=(0,i.Copy)(this.values),t=e[s.ValueModesKeys.Unwrapped];e[s.ValueModesKeys.Unwrapped]=void 0;const r=new c.DecryptedPayload(u({uuid:i.UuidGenerator.GenerateUuid(),content:t,content_type:n.ContentType.EncryptedStorage},(0,c.PayloadTimestampDefaults)()));if(this.encryptionProvider.hasRootKeyEncryptionSource()){const t={usesRootKeyWithKeyLookup:{items:[r]}},n=await this.encryptionProvider.encryptSplitSingle(t);e[s.ValueModesKeys.Wrapped]=(0,c.CreateEncryptedLocalStorageContextPayload)(n)}else e[s.ValueModesKeys.Wrapped]=(0,c.CreateDecryptedLocalStorageContextPayload)(r);return e}setValue(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.StorageValueModes.Default;this.setValueWithNoPersist(e,t,r),this.persistValuesToDisk()}async setValueAndAwaitPersist(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.StorageValueModes.Default;this.setValueWithNoPersist(e,t,r),await this.persistValuesToDisk()}setValueWithNoPersist(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.StorageValueModes.Default;if(!this.values)throw Error("Attempting to set storage key ".concat(e," before loading local storage."));const n=this.domainKeyForMode(r);this.values[n][e]=t}getValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.StorageValueModes.Default,r=arguments.length>2?arguments[2]:void 0;if(!this.values)throw Error("Attempting to get storage key ".concat(e," before loading local storage."));if(!this.values[this.domainKeyForMode(t)])throw Error("Storage domain mode not available ".concat(t," for key ").concat(e));const n=this.values[this.domainKeyForMode(t)][e];return null!=n?n:r}async removeValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.StorageValueModes.Default;if(!this.values)throw Error("Attempting to remove storage key ".concat(e," before loading local storage."));const r=this.values[this.domainKeyForMode(t)];if(null!=r&&r[e])return delete r[e],this.persistValuesToDisk()}getStorageEncryptionPolicy(){return this.encryptionPolicy}getPersistenceKey(){return s.namespacedKey(this.identifier,s.RawStorageKey.StorageObject)}defaultValuesObject(e,t,r){return p.DefaultValuesObject(e,t,r)}static DefaultValuesObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{[s.ValueModesKeys.Wrapped]:e,[s.ValueModesKeys.Unwrapped]:t,[s.ValueModesKeys.Nonwrapped]:r}}domainKeyForMode(e){if(e===s.StorageValueModes.Default)return s.ValueModesKeys.Unwrapped;if(e===s.StorageValueModes.Nonwrapped)return s.ValueModesKeys.Nonwrapped;throw Error("Invalid mode")}async clearValues(){await this.setInitialValues(),await this.immediatelyPersistValuesToDisk()}async getAllRawPayloads(){return this.deviceInterface.getAllRawDatabasePayloads(this.identifier)}async savePayload(e){return this.savePayloads([e])}async savePayloads(e){if(this.persistencePolicy===s.StoragePersistencePolicies.Ephemeral)return;const{encrypted:t,decrypted:r,deleted:n,discardable:o}=(0,c.CreatePayloadSplitWithDiscardables)(e),l=this.encryptionPolicy===s.StorageEncryptionPolicy.Default,u=this.encryptionProvider.hasRootKeyEncryptionSource(),d=[],p=[];if(l){const e=a.SplitPayloadsByEncryptionType(r);e.itemsKeyEncryption&&(0,i.extendArray)(d,e.itemsKeyEncryption),e.rootKeyEncryption&&(u?(0,i.extendArray)(d,e.rootKeyEncryption):(0,i.extendArray)(p,e.rootKeyEncryption))}else(0,i.extendArray)(p,d),(0,i.extendArray)(p,r);await this.deletePayloads(o);const h=a.SplitPayloadsByEncryptionType(d),f=a.CreateEncryptionSplitWithKeyLookup(h),y=[...t,...await this.encryptionProvider.encryptSplit(f)].map(c.CreateEncryptedLocalStorageContextPayload),v=p.map(c.CreateDecryptedLocalStorageContextPayload),g=n.map(c.CreateDeletedLocalStorageContextPayload);return this.executeCriticalFunction((async()=>{var e;return null===(e=this.deviceInterface)||void 0===e?void 0:e.saveRawDatabasePayloads([...y,...v,...g],this.identifier)}))}async deletePayloads(e){await Promise.all(e.map((e=>this.deletePayloadWithId(e.uuid))))}async forceDeletePayloads(e){await Promise.all(e.map((e=>this.deletePayloadWithId(e.uuid))))}async deletePayloadWithId(e){return this.executeCriticalFunction((async()=>this.deviceInterface.removeRawDatabasePayloadWithId(e,this.identifier)))}async clearAllPayloads(){return this.executeCriticalFunction((async()=>this.deviceInterface.removeAllRawDatabasePayloads(this.identifier)))}clearAllData(){return this.executeCriticalFunction((async()=>{await this.clearValues(),await this.clearAllPayloads(),await this.deviceInterface.removeRawStorageValue(s.namespacedKey(this.identifier,s.RawStorageKey.SnjsVersion)),await this.deviceInterface.removeRawStorageValue(this.getPersistenceKey())}))}async getDiagnostics(){return{storage:{storagePersistable:this.storagePersistable,persistencePolicy:s.StoragePersistencePolicies[this.persistencePolicy],encryptionPolicy:s.StorageEncryptionPolicy[this.encryptionPolicy],needsPersist:this.needsPersist,currentPersistPromise:null!=this.currentPersistPromise,isStorageWrapped:this.isStorageWrapped(),allRawPayloadsCount:(await this.getAllRawPayloads()).length,databaseKeys:await this.deviceInterface.getDatabaseKeys()}}}}},65432:(e,t,r)=>{r.d(t,{U8:()=>Ot,Jg:()=>ye,h6:()=>fe,IX:()=>Q,ne:()=>te,ap:()=>Z,PJ:()=>pe,VG:()=>Ae,SV:()=>Oe,e5:()=>Pt.e,xO:()=>Rt,FH:()=>u,A:()=>ze,jW:()=>N.j,o8:()=>Je,aM:()=>V,Sn:()=>W,Vu:()=>at,Bi:()=>At,nB:()=>E,Ot:()=>ut,Ps:()=>oe,Hh:()=>re,jg:()=>ce,UP:()=>l,QL:()=>T,bJ:()=>Me,sX:()=>Ne,Cv:()=>Le,aJ:()=>y,Mj:()=>Ye,P$:()=>et,FR:()=>it,J_:()=>pt,Xr:()=>le,Lb:()=>q,kf:()=>gt,c5:()=>St,xu:()=>Ht,g7:()=>X,Fi:()=>Et,y0:()=>Bt,z_:()=>C.z,Px:()=>H,d6:()=>B,BU:()=>Nt,jH:()=>kt,NA:()=>O,Fr:()=>ae,fA:()=>G,z4:()=>se});var n=r(10256),i=r(16418),o=r(20819);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends o.AbstractService{constructor(e,t,r,n,i,o,a,s,l,u){super(u),c(this,"itemManager",void 0),c(this,"alertService",void 0),c(this,"deviceInterface",void 0),c(this,"httpService",void 0),c(this,"payloadManager",void 0),c(this,"protocolService",void 0),c(this,"syncService",void 0),c(this,"challengeService",void 0),c(this,"listedService",void 0),c(this,"internalEventBus",void 0),c(this,"previousPasswords",[]),this.itemManager=e,this.alertService=t,this.deviceInterface=r,this.httpService=n,this.payloadManager=i,this.protocolService=o,this.syncService=a,this.challengeService=s,this.listedService=l,this.internalEventBus=u,this.previousPasswords=[]}deinit(){this.itemManager=void 0,this.alertService=void 0,this.deviceInterface=void 0,this.httpService=void 0,this.payloadManager=void 0,this.listedService=void 0,this.challengeService=void 0,this.protocolService=void 0,this.syncService=void 0,this.previousPasswords.length=0,super.deinit()}getExtensions(){return this.itemManager.getItems(n.ContentType.ActionsExtension).filter((e=>!e.isListedExtension))}extensionsInContextOfItem(e){return this.getExtensions().filter((t=>t.supported_types.includes(e.content_type)||t.actionsWithContextForItem(e).length>0))}async loadExtensionInContextOfItem(e,t){const r={content_type:t.content_type,item_uuid:t.uuid},n=await this.httpService.getAbsolute(e.url,r).catch((e=>{console.error("Error loading extension",e)}));if(!n)return;const o=n.description||e.description,a=n.supported_types||e.supported_types,s=n.actions||[],c=new i.ActionsExtensionMutator(e,i.MutationType.UpdateUserTimestamps);c.deprecation=n.deprecation,c.description=o,c.supported_types=a,c.actions=s;const l=c.getResult();return(0,i.CreateDecryptedItemFromPayload)(l)}async runAction(e,t){let r;switch(e.verb){case"render":r=await this.handleRenderAction(e);break;case"show":r=this.handleShowAction(e);break;case"post":r=await this.handlePostAction(e,t)}return r}async handleRenderAction(e){return await this.httpService.getAbsolute(e.url).then((async e=>{const t=await this.payloadByDecryptingResponse(e);if(t){const r=(0,i.CreateDecryptedItemFromPayload)(t);return s(s({},e),{},{item:r})}})).catch((e=>{const t=e&&e.error||{message:"An issue occurred while processing this action. Please try again."};return this.alertService.alert(t.message),{error:t}}))}async payloadByDecryptingResponse(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e.item||e.item.deleted||null==e.item.content)return;const n=new i.EncryptedPayload(e.item);if(!n.enc_item_key)return void this.alertService.alert("This revision is missing its key and cannot be recovered.");let o=await this.protocolService.decryptSplitSingle({usesItemsKeyWithKeyLookup:{items:[n]}});if(!(0,i.isErrorDecryptingPayload)(o))return o;if(t&&(o=await this.protocolService.decryptSplitSingle({usesRootKey:{items:[n],key:t}}),!(0,i.isErrorDecryptingPayload)(o)))return o;for(const e of this.itemManager.getDisplayableItemsKeys()){const t=await this.protocolService.decryptSplitSingle({usesItemsKey:{items:[n],key:e}});if(!(0,i.isErrorDecryptingPayload)(t))return t}const a=e.keyParams||e.auth_params;if(!a)return void this.alertService.alert("We were unable to decrypt this revision using your current keys, and this revision is missing metadata that would allow us to try different keys to decrypt it. This can likely be fixed with some manual intervention. Please email help@standardnotes.com for assistance.");const s=this.protocolService.createKeyParams(a);for(const t of this.previousPasswords){if(r.includes(t))continue;r.push(t);const n=await this.protocolService.computeRootKey(t,s);if(!n)continue;const i=await this.payloadByDecryptingResponse(e,n,r);if(i)return i}const c=await this.promptForLegacyPassword();return c&&!this.previousPasswords.includes(c)?(this.previousPasswords.push(c),this.payloadByDecryptingResponse(e,t)):void 0}async promptForLegacyPassword(){const e=new o.Challenge([new o.ChallengePrompt(o.ChallengeValidation.None,"Previous Password",void 0,!0)],o.ChallengeReason.Custom,!0,"Unable to find key for revision. Please enter the account password you may have used at the time of the revision."),t=await this.challengeService.promptForChallengeResponse(e);return null==t?void 0:t.getDefaultValue().value}async handlePostAction(e,t){const r=e.access_type===i.ActionAccessType.Decrypted,n={items:[await this.outgoingPayloadForItem(t,r)]};return this.httpService.postAbsolute(e.url,n).then((e=>e)).catch((e=>(console.error("Action error response:",e),this.alertService.alert("An issue occurred while processing this action. Please try again."),e)))}handleShowAction(e){return this.deviceInterface.openUrl(e.url),{}}async outgoingPayloadForItem(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return e.payload.ejected();const t=await this.protocolService.encryptSplitSingle({usesItemsKeyWithKeyLookup:{items:[e.payload]}});return(0,i.CreateEncryptedBackupFileContextPayload)(t)}}var u,d=r(64657),p=r(84945),h=r(10715);function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Patch="PATCH",e.Delete="DELETE"}(u||(u={}));class y extends o.AbstractService{constructor(e,t,r){super(r),f(this,"environment",void 0),f(this,"appVersion",void 0),f(this,"internalEventBus",void 0),this.environment=e,this.appVersion=t,this.internalEventBus=r}async getAbsolute(e,t,r){return this.runHttp({url:e,params:t,verb:u.Get,authentication:r})}async postAbsolute(e,t,r){return this.runHttp({url:e,params:t,verb:u.Post,authentication:r})}async putAbsolute(e,t,r){return this.runHttp({url:e,params:t,verb:u.Put,authentication:r})}async patchAbsolute(e,t,r){return this.runHttp({url:e,params:t,verb:u.Patch,authentication:r})}async deleteAbsolute(e,t,r){return this.runHttp({url:e,params:t,verb:u.Delete,authentication:r})}async runHttp(e){const t=this.createXmlRequest(e);return this.runRequest(t,this.createRequestBody(e))}createRequestBody(e){return void 0!==e.params&&[u.Post,u.Put,u.Patch,u.Delete].includes(e.verb)?JSON.stringify(e.params):e.rawBytes}createXmlRequest(e){var t;const r=new XMLHttpRequest;if(e.params&&e.verb===u.Get&&Object.keys(e.params).length>0&&(e.url=this.urlForUrlAndParams(e.url,e.params)),r.open(e.verb,e.url,!0),r.responseType=null!==(t=e.responseType)&&void 0!==t?t:"",!e.external){r.setRequestHeader("X-SNJS-Version",h.in);const t="".concat(i.Environment[this.environment],"-").concat(this.appVersion);r.setRequestHeader("X-Application-Version",t),e.authentication&&r.setRequestHeader("Authorization","Bearer "+e.authentication)}let n=!1;return e.customHeaders&&e.customHeaders.length>0&&e.customHeaders.forEach((e=>{let{key:t,value:i}=e;r.setRequestHeader(t,i),"Content-Type"===t&&(n=!0)})),n||e.external||r.setRequestHeader("Content-Type","application/json"),r}async runRequest(e,t){return new Promise(((r,n)=>{e.onreadystatechange=()=>{this.stateChangeHandlerForRequest(e,r,n)},e.send(t)}))}stateChangeHandlerForRequest(e,t,r){var n;if(4!==e.readyState)return;const i=e.status,a={status:i,headers:new Map},s=null===(n=e.getAllResponseHeaders())||void 0===n?void 0:n.trim().split(/[\r\n]+/);null==s||s.forEach((e=>{const t=e.split(": "),r=t.shift(),n=t.join(": ");a.headers.set(r,n)}));try{if(i!==p.StatusCode.HttpStatusNoContent){var c,l;let t;const r=(null===(c=a.headers)||void 0===c?void 0:c.get("content-type"))||(null===(l=a.headers)||void 0===l?void 0:l.get("Content-Type"));t=null!=r&&r.includes("application/json")?JSON.parse(e.responseText):e.response,t.data||(a.data=t),(0,d.isString)(t)||Object.assign(a,t)}}catch(e){console.error(e)}if(i>=p.StatusCode.HttpStatusMinSuccess&&i<=p.StatusCode.HttpStatusMaxSuccess)t(a);else{if(i===p.StatusCode.HttpStatusForbidden)a.error={message:o.API_MESSAGE_RATE_LIMITED,status:i};else if(null==a.error)if(null==a.data||null==a.data.error)try{a.error={message:e.responseText||o.UNKNOWN_ERROR,status:i}}catch(e){a.error={message:o.UNKNOWN_ERROR,status:i}}else a.error=a.data.error;r(a)}}urlForUrlAndParams(e,t){const r=Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e]))).join("&");return e.includes("?")?e+"&"+r:e+"?"+r}}const v=["api.standardnotes.com","api-dev.standardnotes.com","sync.standardnotes.org","syncing-server-demo.standardnotes.com"],g=["files.standardnotes.com","files-dev.standardnotes.com"],m=["api-dev.standardnotes.com","api.standardnotes.com","extensions.standardnotes.com","extensions.standardnotes.org","extensions-server-dev.standardnotes.org","extensions-server-dev.standardnotes.com","features.standardnotes.com"];var b;!function(e){e.Dev="https://extensions-server-dev.standardnotes.org",e.Prod="https://extensions.standardnotes.org"}(b||(b={}));const S=["listed.to"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E={v1:P(P(P(P(P(P({},{closeUploadSession:"/v1/files/upload/close-session",createFileValetToken:"/v1/files/valet-tokens",deleteFile:"/v1/files",downloadFileChunk:"/v1/files",startUploadSession:"/v1/files/upload/create-session",uploadFileChunk:"/v1/files/upload/chunk"}),{checkIntegrity:"/v1/items/check-integrity",getSingleItem:e=>"/v1/items/".concat(e),itemRevisions:e=>"/v1/items/".concat(e,"/revisions"),itemRevision:(e,t)=>"/v1/items/".concat(e,"/revisions/").concat(t),sync:"/v1/items"}),{listedRegistration:e=>"/v1/users/".concat(e,"/integrations/listed")}),{settings:e=>"/v1/users/".concat(e,"/settings"),setting:(e,t)=>"/v1/users/".concat(e,"/settings/").concat(t),subscriptionSetting:(e,t)=>"/v1/users/".concat(e,"/subscription-settings/").concat(t)}),{offlineFeatures:"/v1/offline/features",purchase:"/v1/purchase",subscription:e=>"/v1/users/".concat(e,"/subscription"),subscriptionTokens:"/v1/subscription-tokens",userFeatures:e=>"/v1/users/".concat(e,"/features")}),{changeCredentials:e=>"/v1/users/".concat(e,"/attributes/credentials"),deleteAccount:e=>"/v1/users/".concat(e),keyParams:"/v1/login-params",refreshSession:"/v1/sessions/refresh",register:"/v1/users",session:e=>"/v1/sessions/".concat(e),sessions:"/v1/sessions",signIn:"/v1/login",signOut:"/v1/logout"}),v2:P(P({},{subscriptions:"/v2/subscriptions"}),{keyParams:"/v2/login-params",signIn:"/v2/login"})};var C=r(24630);function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class O extends C.z{static FromApiResponse(e){const t=e.data.session,r=t.access_token,n=t.refresh_token,i=t.access_expiration,o=t.refresh_expiration,a=t.readonly_access;return new O(r,i,n,o,a)}constructor(e,t,r,n,i){super(),k(this,"accessToken",void 0),k(this,"accessExpiration",void 0),k(this,"refreshToken",void 0),k(this,"refreshExpiration",void 0),k(this,"readonlyAccess",void 0),this.accessToken=e,this.accessExpiration=t,this.refreshToken=r,this.refreshExpiration=n,this.readonlyAccess=i}isReadOnly(){return this.readonlyAccess}getExpireAt(){return this.accessExpiration||0}get authorizationValue(){return this.accessToken}canExpire(){return!0}isExpired(){return this.getExpireAt()<Date.now()}}var x=r(3363),I=r.n(x);const A={Network:{Files:{FailedStartUploadSession:"Failed to start an upload session.",FailedCloseUploadSession:"Failed to close an upload session.",FailedUploadFileChunk:"Failed to upload file chunk.",FailedDownloadFileChunk:"Failed to download file chunk.",FailedDeleteFile:"Failed to delete file."}},Confirm:{ProtocolVersionExpired(e){var t;return{Message:"The encryption version for your account is outdated and requires upgrade. You may proceed with login, but are advised to perform a security update using the web or desktop application.\n\n"+"If your account was created after ".concat(null===(t=n.ProtocolExpirationDates[e])||void 0===t?void 0:t.toLocaleString(),", it may not be safe to continue signing in. ")+"In that case, please discontinue your sign in request and contact support.\n\nFor more information, visit standardnotes.com/help/security.",Title:"Update Recommended",ConfirmButton:"Sign In"}}},Input:{FileAccountPassword:"File account password"}};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class T extends o.AbstractService{constructor(e,t,r,n,i,o){super(o),R(this,"httpService",void 0),R(this,"storageService",void 0),R(this,"host",void 0),R(this,"inMemoryStore",void 0),R(this,"crypto",void 0),R(this,"internalEventBus",void 0),R(this,"session",void 0),R(this,"user",void 0),R(this,"registering",!1),R(this,"authenticating",!1),R(this,"changing",!1),R(this,"refreshingSession",!1),R(this,"invalidSessionObserver",void 0),R(this,"filesHost",void 0),this.httpService=e,this.storageService=t,this.host=r,this.inMemoryStore=n,this.crypto=i,this.internalEventBus=o}deinit(){this.httpService=void 0,this.storageService=void 0,this.invalidSessionObserver=void 0,this.session=void 0,super.deinit()}setUser(e){this.user=e}setInvalidSessionObserver(e){this.invalidSessionObserver=e}loadHost(){const e=this.storageService.getValue(o.StorageKey.ServerHost);this.host=e||this.host||window._default_sync_server}async setHost(e){this.host=e,this.storageService.setValue(o.StorageKey.ServerHost,e)}getHost(){return this.host}isThirdPartyHostUsed(){return!function(e){try{const{host:t}=new URL(e);return t.startsWith("localhost")||v.includes(t)||g.includes(t)}catch(e){return!1}}(this.getHost()||"")}getFilesHost(){if(!this.filesHost)throw Error("Attempting to access undefined filesHost");return this.filesHost}setSession(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.session=e,t&&this.storageService.setValue(o.StorageKey.Session,e)}getSession(){return this.session}get apiVersion(){return"20200115"}params(e){return I()(e,{[p.ApiEndpointParam.ApiVersion]:this.apiVersion})}createErrorResponse(e,t){return{error:{message:e,status:t}}}errorResponseWithFallbackMessage(e,t){var r,n,i;return null!==(r=e.error)&&void 0!==r&&r.message||(e.error=D(D({},e.error),{},{status:null!==(n=null===(i=e.error)||void 0===i?void 0:i.status)&&void 0!==n?n:p.StatusCode.UnknownError,message:t})),e}processMetaObject(e){var t,r;e.auth&&e.auth.userUuid&&e.auth.roles&&this.notifyEvent(o.ApiServiceEvent.MetaReceived,{userUuid:e.auth.userUuid,userRoles:e.auth.roles}),null!==(t=e.server)&&void 0!==t&&t.filesServerUrl&&(this.filesHost=null===(r=e.server)||void 0===r?void 0:r.filesServerUrl)}processResponse(e){e.meta&&this.processMetaObject(e.meta)}async request(e){try{const t=await this.httpService.runHttp(e);return this.processResponse(t),t}catch(t){return this.errorResponseWithFallbackMessage(t,e.fallbackErrorMessage)}}async getAccountKeyParams(e){var t;const r=this.crypto.generateRandomKey(256);this.inMemoryStore.setValue(o.StorageKey.CodeVerifier,r);const n=this.crypto.base64URLEncode(await this.crypto.sha256(r)),i=this.params({email:e.email,code_challenge:n});return void 0!==e.mfaKeyPath&&void 0!==e.mfaCode&&(i[e.mfaKeyPath]=e.mfaCode),this.request({verb:u.Post,url:(0,d.joinPaths)(this.host,E.v2.keyParams),fallbackErrorMessage:o.API_MESSAGE_GENERIC_INVALID_LOGIN,params:i,authentication:null===(t=this.session)||void 0===t?void 0:t.authorizationValue})}async signIn(e){if(this.authenticating)return this.createErrorResponse(o.API_MESSAGE_LOGIN_IN_PROGRESS);this.authenticating=!0;const t=(0,d.joinPaths)(this.host,E.v2.signIn),r=this.params({email:e.email,password:e.serverPassword,ephemeral:e.ephemeral,code_verifier:this.inMemoryStore.getValue(o.StorageKey.CodeVerifier)}),n=await this.request({verb:u.Post,url:t,params:r,fallbackErrorMessage:o.API_MESSAGE_GENERIC_INVALID_LOGIN});return this.authenticating=!1,this.inMemoryStore.removeValue(o.StorageKey.CodeVerifier),n}signOut(){var e;const t=(0,d.joinPaths)(this.host,E.v1.signOut);return this.httpService.postAbsolute(t,void 0,null===(e=this.session)||void 0===e?void 0:e.authorizationValue).catch((e=>e))}async changeCredentials(e){var t;if(this.changing)return this.createErrorResponse(o.API_MESSAGE_CHANGE_CREDENTIALS_IN_PROGRESS);const r=this.preprocessingError();if(r)return r;this.changing=!0;const n=(0,d.joinPaths)(this.host,E.v1.changeCredentials(e.userUuid)),i=this.params(D({current_password:e.currentServerPassword,new_password:e.newServerPassword,new_email:e.newEmail},e.newKeyParams.getPortableValue())),a=await this.httpService.putAbsolute(n,i,null===(t=this.session)||void 0===t?void 0:t.authorizationValue).catch((async e=>p.isErrorResponseExpiredToken(e)?this.refreshSessionThenRetryRequest({verb:u.Put,url:n,params:i}):this.errorResponseWithFallbackMessage(e,o.API_MESSAGE_GENERIC_CHANGE_CREDENTIALS_FAIL)));return this.processResponse(a),this.changing=!1,a}async sync(e,t,r,n){var i;const a=this.preprocessingError();if(a)return a;const s=(0,d.joinPaths)(this.host,E.v1.sync),c=this.params({[p.ApiEndpointParam.SyncPayloads]:e,[p.ApiEndpointParam.LastSyncToken]:t,[p.ApiEndpointParam.PaginationToken]:r,[p.ApiEndpointParam.SyncDlLimit]:n}),l=await this.httpService.postAbsolute(s,c,null===(i=this.session)||void 0===i?void 0:i.authorizationValue).catch((async e=>(this.preprocessAuthenticatedErrorResponse(e),p.isErrorResponseExpiredToken(e)?this.refreshSessionThenRetryRequest({verb:u.Post,url:s,params:c}):this.errorResponseWithFallbackMessage(e,o.API_MESSAGE_GENERIC_SYNC_FAIL))));return this.processResponse(l),l}async refreshSessionThenRetryRequest(e){const t=await this.refreshSession();return t.error||(0,d.isNullOrUndefined)(t.data)?t:this.httpService.runHttp(D(D({},e),{},{authentication:null===(r=this.session)||void 0===r?void 0:r.authorizationValue})).catch((e=>e));var r}async refreshSession(){const e=this.preprocessingError();if(e)return e;this.refreshingSession=!0;const t=(0,d.joinPaths)(this.host,E.v1.refreshSession),r=this.session,n=this.params({access_token:r.accessToken,refresh_token:r.refreshToken}),i=await this.httpService.postAbsolute(t,n).then((async e=>{const t=O.FromApiResponse(e);return await this.setSession(t),this.processResponse(e),e})).catch((e=>(this.preprocessAuthenticatedErrorResponse(e),this.errorResponseWithFallbackMessage(e,o.API_MESSAGE_GENERIC_TOKEN_REFRESH_FAIL))));return this.refreshingSession=!1,i}async getSessionsList(){var e;const t=this.preprocessingError();if(t)return t;const r=(0,d.joinPaths)(this.host,E.v1.sessions),n=await this.httpService.getAbsolute(r,{},null===(e=this.session)||void 0===e?void 0:e.authorizationValue).catch((async e=>(this.preprocessAuthenticatedErrorResponse(e),p.isErrorResponseExpiredToken(e)?this.refreshSessionThenRetryRequest({verb:u.Get,url:r}):this.errorResponseWithFallbackMessage(e,o.API_MESSAGE_GENERIC_SYNC_FAIL))));return this.processResponse(n),n}async deleteSession(e){var t;const r=this.preprocessingError();if(r)return r;const n=(0,d.joinPaths)(this.host,E.v1.session(e)),i=await this.httpService.deleteAbsolute(n,{uuid:e},null===(t=this.session)||void 0===t?void 0:t.authorizationValue).catch((e=>{const t=e;return this.preprocessAuthenticatedErrorResponse(t),p.isErrorResponseExpiredToken(t)?this.refreshSessionThenRetryRequest({verb:u.Delete,url:n}):this.errorResponseWithFallbackMessage(t,o.API_MESSAGE_GENERIC_SYNC_FAIL)}));return this.processResponse(i),i}async getItemRevisions(e){var t;const r=this.preprocessingError();if(r)return r;const n=(0,d.joinPaths)(this.host,E.v1.itemRevisions(e)),i=await this.httpService.getAbsolute(n,void 0,null===(t=this.session)||void 0===t?void 0:t.authorizationValue).catch((e=>(this.preprocessAuthenticatedErrorResponse(e),p.isErrorResponseExpiredToken(e)?this.refreshSessionThenRetryRequest({verb:u.Get,url:n}):this.errorResponseWithFallbackMessage(e,o.API_MESSAGE_GENERIC_SYNC_FAIL))));return this.processResponse(i),i}async getRevision(e,t){var r;const n=this.preprocessingError();if(n)return n;const i=(0,d.joinPaths)(this.host,E.v1.itemRevision(t,e.uuid)),a=await this.httpService.getAbsolute(i,void 0,null===(r=this.session)||void 0===r?void 0:r.authorizationValue).catch((e=>(this.preprocessAuthenticatedErrorResponse(e),p.isErrorResponseExpiredToken(e)?this.refreshSessionThenRetryRequest({verb:u.Get,url:i}):this.errorResponseWithFallbackMessage(e,o.API_MESSAGE_GENERIC_SYNC_FAIL))));return this.processResponse(a),a}async getUserFeatures(e){var t;const r=(0,d.joinPaths)(this.host,E.v1.userFeatures(e)),n=await this.httpService.getAbsolute(r,void 0,null===(t=this.session)||void 0===t?void 0:t.authorizationValue).catch((e=>(this.preprocessAuthenticatedErrorResponse(e),p.isErrorResponseExpiredToken(e)?this.refreshSessionThenRetryRequest({verb:u.Get,url:r}):this.errorResponseWithFallbackMessage(e,o.API_MESSAGE_GENERIC_SYNC_FAIL))));return this.processResponse(n),n}async tokenRefreshableRequest(e){const t=this.preprocessingError();if(t)return t;const r=await this.httpService.runHttp(e).catch((t=>(this.preprocessAuthenticatedErrorResponse(t),p.isErrorResponseExpiredToken(t)?this.refreshSessionThenRetryRequest(e):this.errorResponseWithFallbackMessage(t,e.fallbackErrorMessage))));return this.processResponse(r),r}async listSettings(e){var t;return await this.tokenRefreshableRequest({verb:u.Get,url:(0,d.joinPaths)(this.host,E.v1.settings(e)),fallbackErrorMessage:o.API_MESSAGE_FAILED_GET_SETTINGS,authentication:null===(t=this.session)||void 0===t?void 0:t.authorizationValue})}async updateSetting(e,t,r,n){var i;const a={name:t,value:r,sensitive:n};return this.tokenRefreshableRequest({verb:u.Put,url:(0,d.joinPaths)(this.host,E.v1.settings(e)),authentication:null===(i=this.session)||void 0===i?void 0:i.authorizationValue,fallbackErrorMessage:o.API_MESSAGE_FAILED_UPDATE_SETTINGS,params:a})}async getSetting(e,t){var r;return await this.tokenRefreshableRequest({verb:u.Get,url:(0,d.joinPaths)(this.host,E.v1.setting(e,t.toLowerCase())),authentication:null===(r=this.session)||void 0===r?void 0:r.authorizationValue,fallbackErrorMessage:o.API_MESSAGE_FAILED_GET_SETTINGS})}async getSubscriptionSetting(e,t){var r;return await this.tokenRefreshableRequest({verb:u.Get,url:(0,d.joinPaths)(this.host,E.v1.subscriptionSetting(e,t.toLowerCase())),authentication:null===(r=this.session)||void 0===r?void 0:r.authorizationValue,fallbackErrorMessage:o.API_MESSAGE_FAILED_GET_SETTINGS})}async deleteSetting(e,t){var r;return this.tokenRefreshableRequest({verb:u.Delete,url:(0,d.joinPaths)(this.host,E.v1.setting(e,t)),authentication:null===(r=this.session)||void 0===r?void 0:r.authorizationValue,fallbackErrorMessage:o.API_MESSAGE_FAILED_UPDATE_SETTINGS})}async deleteRevision(e,t){var r;const n=(0,d.joinPaths)(this.host,E.v1.itemRevision(e,t.uuid));return await this.tokenRefreshableRequest({verb:u.Delete,url:n,fallbackErrorMessage:o.API_MESSAGE_FAILED_DELETE_REVISION,authentication:null===(r=this.session)||void 0===r?void 0:r.authorizationValue})}downloadFeatureUrl(e){return this.request({verb:u.Get,url:e,external:!0,fallbackErrorMessage:o.API_MESSAGE_GENERIC_INVALID_LOGIN})}async getSubscription(e){var t;const r=(0,d.joinPaths)(this.host,E.v1.subscription(e));return await this.tokenRefreshableRequest({verb:u.Get,url:r,authentication:null===(t=this.session)||void 0===t?void 0:t.authorizationValue,fallbackErrorMessage:o.API_MESSAGE_FAILED_SUBSCRIPTION_INFO})}async getAvailableSubscriptions(){const e=(0,d.joinPaths)(this.host,E.v2.subscriptions);return await this.request({verb:u.Get,url:e,fallbackErrorMessage:o.API_MESSAGE_FAILED_SUBSCRIPTION_INFO})}async getNewSubscriptionToken(){var e,t;const r=(0,d.joinPaths)(this.host,E.v1.subscriptionTokens);return null===(t=(await this.request({verb:u.Post,url:r,authentication:null===(e=this.session)||void 0===e?void 0:e.authorizationValue,fallbackErrorMessage:o.API_MESSAGE_FAILED_ACCESS_PURCHASE})).data)||void 0===t?void 0:t.token}async downloadOfflineFeaturesFromRepo(e){try{var t;const r=e.offlineFeaturesUrl,n=e.offlineKey;if(!r||!n)throw Error("Cannot download offline repo without url and offlineKEy");const{host:i}=new URL(r);if(!m.includes(i))return new p.ClientDisplayableError("This offline features host is not in the trusted allowlist.");const a=await this.request({verb:u.Get,url:r,fallbackErrorMessage:o.API_MESSAGE_FAILED_OFFLINE_FEATURES,customHeaders:[{key:"x-offline-token",value:n}]});return a.error?p.ClientDisplayableError.FromError(a.error):{features:(null===(t=a.data)||void 0===t?void 0:t.features)||[]}}catch(e){return new p.ClientDisplayableError(o.API_MESSAGE_FAILED_OFFLINE_ACTIVATION)}}async registerForListedAccount(){var e;if(!this.user)throw Error("Cannot register for Listed without user account.");return await this.tokenRefreshableRequest({verb:u.Post,url:(0,d.joinPaths)(this.host,E.v1.listedRegistration(this.user.uuid)),fallbackErrorMessage:o.API_MESSAGE_FAILED_LISTED_REGISTRATION,authentication:null===(e=this.session)||void 0===e?void 0:e.authorizationValue})}async createFileValetToken(e,t,r){var n,i,a;const s=(0,d.joinPaths)(this.host,E.v1.createFileValetToken),c={operation:t,resources:[{remoteIdentifier:e,unencryptedFileSize:r||0}]},l=await this.tokenRefreshableRequest({verb:u.Post,url:s,authentication:null===(n=this.session)||void 0===n?void 0:n.authorizationValue,fallbackErrorMessage:o.API_MESSAGE_FAILED_CREATE_FILE_TOKEN,params:c});var h,f;return null!==(i=l.data)&&void 0!==i&&i.success?null===(a=l.data)||void 0===a?void 0:a.valetToken:new p.ClientDisplayableError(null===(h=l.data)||void 0===h?void 0:h.reason,void 0,null===(f=l.data)||void 0===f?void 0:f.reason)}async startUploadSession(e){const t=(0,d.joinPaths)(this.getFilesHost(),E.v1.startUploadSession);return await this.tokenRefreshableRequest({verb:u.Post,url:t,customHeaders:[{key:"x-valet-token",value:e}],fallbackErrorMessage:A.Network.Files.FailedStartUploadSession})}async deleteFile(e){const t=(0,d.joinPaths)(this.getFilesHost(),E.v1.deleteFile);return await this.tokenRefreshableRequest({verb:u.Delete,url:t,customHeaders:[{key:"x-valet-token",value:e}],fallbackErrorMessage:A.Network.Files.FailedDeleteFile})}async uploadFileBytes(e,t,r){if(0===t)throw Error("chunkId must start with 1");const n=(0,d.joinPaths)(this.getFilesHost(),E.v1.uploadFileChunk);return(await this.tokenRefreshableRequest({verb:u.Post,url:n,rawBytes:r,customHeaders:[{key:"x-valet-token",value:e},{key:"x-chunk-id",value:t.toString()},{key:"Content-Type",value:"application/octet-stream"}],fallbackErrorMessage:A.Network.Files.FailedUploadFileChunk})).success}async closeUploadSession(e){const t=(0,d.joinPaths)(this.getFilesHost(),E.v1.closeUploadSession);return(await this.tokenRefreshableRequest({verb:u.Post,url:t,customHeaders:[{key:"x-valet-token",value:e}],fallbackErrorMessage:A.Network.Files.FailedCloseUploadSession})).success}getFilesDownloadUrl(){return(0,d.joinPaths)(this.getFilesHost(),E.v1.downloadFileChunk)}async downloadFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const o=this.getFilesDownloadUrl(),a=e.encryptedChunkSizes[t],s=await this.tokenRefreshableRequest({verb:u.Get,url:o,customHeaders:[{key:"x-valet-token",value:r},{key:"x-chunk-size",value:a.toString()},{key:"range",value:"bytes=".concat(n,"-")}],fallbackErrorMessage:A.Network.Files.FailedDownloadFileChunk,responseType:"arraybuffer"}),c=s.headers.get("content-range");if(!c)return new p.ClientDisplayableError("Could not obtain content-range header while downloading file chunk");const l=c.match(/(^[a-zA-Z][\w]*)\s+(\d+)\s?-\s?(\d+)?\s?\/?\s?(\d+|\*)?/);if(!l||5!==l.length)return new p.ClientDisplayableError("Malformed content-range header in response when downloading file chunk");const d=+l[2],h=+l[3],f=+l[4],y=new Uint8Array(s.data);return await i(y),h<f-1?this.downloadFile(e,++t,r,d+a,i):void 0}async checkIntegrity(e){var t;return await this.tokenRefreshableRequest({verb:u.Post,url:(0,d.joinPaths)(this.host,E.v1.checkIntegrity),params:{integrityPayloads:e},fallbackErrorMessage:o.API_MESSAGE_GENERIC_INTEGRITY_CHECK_FAIL,authentication:null===(t=this.session)||void 0===t?void 0:t.authorizationValue})}async getSingleItem(e){var t;return await this.tokenRefreshableRequest({verb:u.Get,url:(0,d.joinPaths)(this.host,E.v1.getSingleItem(e)),fallbackErrorMessage:o.API_MESSAGE_GENERIC_SINGLE_ITEM_SYNC_FAIL,authentication:null===(t=this.session)||void 0===t?void 0:t.authorizationValue})}preprocessingError(){return this.refreshingSession?this.createErrorResponse(o.API_MESSAGE_TOKEN_REFRESH_IN_PROGRESS):this.session?void 0:this.createErrorResponse(o.API_MESSAGE_INVALID_SESSION)}preprocessAuthenticatedErrorResponse(e){var t,r;e.status===p.StatusCode.HttpStatusInvalidSession&&this.session&&(null===(t=this.invalidSessionObserver)||void 0===t||t.call(this,(null===(r=e.error)||void 0===r?void 0:r.tag)===n.ErrorTag.RevokedSession))}getDiagnostics(){return Promise.resolve({api:{hasSession:null!=this.session,user:this.user,registering:this.registering,authenticating:this.authenticating,changing:this.changing,refreshingSession:this.refreshingSession,filesHost:this.filesHost,host:this.host}})}}var N=r(91260),j=r(75082);function B(e){if("jwt"in e)return new N.j(e.jwt);{const t=e;return new O(t.accessToken,t.accessExpiration,t.refreshToken,t.refreshExpiration,t.readonlyAccess)}}var F=r(70297);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const V=8,W="missing-params",z=e=>e.trim().toLowerCase();var H,G;!function(e){e.Restored="SessionRestored",e.Revoked="SessionRevoked"}(H||(H={}));class q extends o.AbstractService{constructor(e,t,r,n,i,o,a,s,c){super(c),U(this,"diskStorageService",void 0),U(this,"apiService",void 0),U(this,"userApiService",void 0),U(this,"alertService",void 0),U(this,"protocolService",void 0),U(this,"challengeService",void 0),U(this,"webSocketsService",void 0),U(this,"httpService",void 0),U(this,"internalEventBus",void 0),U(this,"user",void 0),U(this,"isSessionRenewChallengePresented",!1),this.diskStorageService=e,this.apiService=t,this.userApiService=r,this.alertService=n,this.protocolService=i,this.challengeService=o,this.webSocketsService=a,this.httpService=s,this.internalEventBus=c,t.setInvalidSessionObserver((e=>{e?this.notifyEvent(H.Revoked):this.reauthenticateInvalidSession()}))}deinit(){this.protocolService=void 0,this.diskStorageService=void 0,this.apiService=void 0,this.alertService=void 0,this.challengeService=void 0,this.webSocketsService=void 0,this.user=void 0,super.deinit()}setUser(e){this.user=e,this.apiService.setUser(e)}async initializeFromDisk(){if(this.setUser(this.diskStorageService.getValue(o.StorageKey.User)),!this.user){const e=this.diskStorageService.getValue(o.StorageKey.LegacyUuid);e&&this.setUser({uuid:e,email:e})}const e=this.diskStorageService.getValue(o.StorageKey.Session);if(e){const t=B(e);this.setSession(t,!1),await this.webSocketsService.startWebSocketConnection()}}setSession(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.httpService.setAuthorizationToken(e.authorizationValue),this.apiService.setSession(e,t)}online(){return!this.offline()}offline(){return(0,d.isNullOrUndefined)(this.apiService.getSession())}getUser(){return this.user}getSureUser(){return this.user}getSession(){return this.apiService.getSession()}async signOut(){this.setUser(void 0);const e=this.apiService.getSession();e&&e.canExpire()&&(await this.apiService.signOut(),this.webSocketsService.closeWebSocketConnection())}isSignedIn(){return null!=this.getUser()}isSignedIntoFirstPartyServer(){return this.isSignedIn()&&!this.apiService.isThirdPartyHostUsed()}async reauthenticateInvalidSession(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1?arguments[1]:void 0;if(this.isSessionRenewChallengePresented)return;this.isSessionRenewChallengePresented=!0;const n=new o.Challenge([new o.ChallengePrompt(o.ChallengeValidation.None,void 0,o.SessionStrings.EmailInputPlaceholder,!1),new o.ChallengePrompt(o.ChallengeValidation.None,void 0,o.SessionStrings.PasswordInputPlaceholder)],o.ChallengeReason.Custom,t,o.SessionStrings.EnterEmailAndPassword,o.SessionStrings.RecoverSession(null===(e=this.getUser())||void 0===e?void 0:e.email));return new Promise((e=>{this.challengeService.addChallengeObserver(n,{onCancel:()=>{this.isSessionRenewChallengePresented=!1},onComplete:()=>{this.isSessionRenewChallengePresented=!1},onNonvalidatedSubmit:async t=>{const i=t.values[0].value,a=t.values[1].value,s=this.protocolService.getAccountKeyParams(),c=await this.signIn(i,a,!1,this.diskStorageService.isEphemeralSession(),null==s?void 0:s.version);c.response.error?(this.challengeService.setValidationStatusForChallenge(n,t.values[1],!1),null==r||r(c.response)):(e(),this.challengeService.completeChallenge(n),this.notifyEvent(H.Restored),this.alertService.alert(o.SessionStrings.SessionRestored))}}),this.challengeService.promptForChallengeResponse(n)}))}async getSubscription(){const e=await this.apiService.getSubscription(this.getSureUser().uuid);return e.error?p.ClientDisplayableError.FromError(e.error):e.data.subscription}async getAvailableSubscriptions(){const e=await this.apiService.getAvailableSubscriptions();return e.error?p.ClientDisplayableError.FromError(e.error):e.data}async promptForMfaValue(){const e=new o.Challenge([new o.ChallengePrompt(o.ChallengeValidation.None,o.ChallengePromptTitle.Mfa,o.SessionStrings.MfaInputPlaceholder,!1,o.ChallengeKeyboardType.Numeric)],o.ChallengeReason.Custom,!0,o.SessionStrings.EnterMfa),t=await this.challengeService.promptForChallengeResponse(e);if(t)return this.challengeService.completeChallenge(e),t.values[0].value}async register(e,t,r){if(t.length<V)throw new F.ApiCallError(F.ErrorMessage.InsufficientPasswordMessage.replace("%LENGTH%",V.toString()));const{wrappingKey:i,canceled:o}=await this.challengeService.getWrappingKeyIfApplicable();if(o)throw new F.ApiCallError(F.ErrorMessage.PasscodeRequired);e=z(e);const a=await this.protocolService.createRootKey(e,t,n.KeyParamsOrigination.Registration),s=a.serverPassword,c=a.keyParams,l=await this.userApiService.register({email:e,serverPassword:s,keyParams:c,ephemeral:r});if("error"in l.data)throw new F.ApiCallError(l.data.error.message);return await this.handleAuthResponse(l.data,a,i),l.data}async retrieveKeyParams(e,t,r){const n=await this.apiService.getAccountKeyParams({email:e,mfaKeyPath:t,mfaCode:r});if(n.error||(0,d.isNullOrUndefined)(n.data)){var i,a;if(r&&await this.alertService.alert(o.SignInStrings.IncorrectMfa),null!==(i=n.error)&&void 0!==i&&null!==(a=i.payload)&&void 0!==a&&a.mfa_key){const t=await this.promptForMfaValue();return t?this.retrieveKeyParams(e,n.error.payload.mfa_key,t):{response:this.apiService.createErrorResponse(o.SignInStrings.SignInCanceledMissingMfa,p.StatusCode.CanceledMfa)}}return{response:n}}const s=(0,j.KeyParamsFromApiResponse)(n,e);return s&&s.version?{keyParams:s,response:n,mfaKeyPath:t,mfaCode:r}:{response:this.apiService.createErrorResponse(o.API_MESSAGE_FALLBACK_LOGIN_FAIL)}}async signIn(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;const o=await this.performSignIn(e,t,r,n,i);if(o.response.error&&o.response.error.status!==p.StatusCode.LocalValidationError&&o.response.error.status!==p.StatusCode.CanceledMfa){const a=z(e);return a!==e?this.performSignIn(a,t,r,n,i):o}return o}async performSignIn(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;const s=await this.retrieveKeyParams(e);if(s.response.error)return{response:s.response};const c=s.keyParams;if(!this.protocolService.supportedVersions().includes(c.version))return this.protocolService.isVersionNewerThanLibraryVersion(c.version)?{response:this.apiService.createErrorResponse(o.UNSUPPORTED_PROTOCOL_VERSION)}:{response:this.apiService.createErrorResponse(o.EXPIRED_PROTOCOL_VERSION)};if(n.isProtocolVersionExpired(c.version)){const e=this.protocolService.costMinimumForVersion(c.version);if(c.content002.pw_cost<e)return{response:this.apiService.createErrorResponse(o.INVALID_PASSWORD_COST)};const t=A.Confirm.ProtocolVersionExpired(c.version);if(!await this.alertService.confirm(t.Message,t.Title,t.ConfirmButton))return{response:this.apiService.createErrorResponse(o.API_MESSAGE_FALLBACK_LOGIN_FAIL)}}if(!this.protocolService.platformSupportsKeyDerivation(c))return{response:this.apiService.createErrorResponse(o.UNSUPPORTED_KEY_DERIVATION)};if(r&&(a=this.protocolService.getLatestVersion()),!(0,d.isNullOrUndefined)(a)&&!n.leftVersionGreaterThanOrEqualToRight(c.version,a))return{response:this.apiService.createErrorResponse((0,o.StrictSignInFailed)(c.version,a))};const l=await this.protocolService.computeRootKey(t,c);return{response:await this.bypassChecksAndSignInWithRootKey(e,l,i)}}async bypassChecksAndSignInWithRootKey(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{wrappingKey:n,canceled:a}=await this.challengeService.getWrappingKeyIfApplicable();if(a)return this.apiService.createErrorResponse(o.SignInStrings.PasscodeRequired,p.StatusCode.LocalValidationError);const s=await this.apiService.signIn({email:e,serverPassword:t.serverPassword,ephemeral:r});if(s.error||!s.data)return s;const c=s.data.key_params,l=new j.SNRootKey((0,i.CopyPayloadWithContentOverride)(t.payload,{keyParams:c||t.keyParams.getPortableValue()}));return await this.handleSuccessAuthResponse(s,l,n),s}async changeCredentials(e){const t=this.user.uuid,r=await this.apiService.changeCredentials({userUuid:t,currentServerPassword:e.currentServerPassword,newServerPassword:e.newRootKey.serverPassword,newKeyParams:e.newRootKey.keyParams,newEmail:e.newEmail});return this.processChangeCredentialsResponse(r,e.newRootKey,e.wrappingKey)}async getSessionsList(){const e=await this.apiService.getSessionsList();return e.error||(0,d.isNullOrUndefined)(e.data)||(e.data=e.data.map((e=>K(K({},e),{},{updated_at:new Date(e.updated_at)}))).sort(((e,t)=>e.updated_at<t.updated_at?1:-1))),e}async revokeSession(e){return await this.apiService.deleteSession(e)}async revokeAllOtherSessions(){const e=await this.getSessionsList();var t,r;if(null!=e.error||null==e.data)throw new Error(null!==(t=null===(r=e.error)||void 0===r?void 0:r.message)&&void 0!==t?t:o.API_MESSAGE_GENERIC_SYNC_FAIL);const n=e.data.filter((e=>!e.current));await Promise.all(n.map((e=>this.revokeSession(e.uuid))))}async processChangeCredentialsResponse(e,t,r){var n;return!e.error&&e.data&&await this.handleSuccessAuthResponse(e,t,r),{response:e,keyParams:null===(n=e.data)||void 0===n?void 0:n.key_params}}async createDemoShareToken(){var e;const t=this.getSession();if(!t)return new p.ClientDisplayableError("Cannot generate share token without active session");if(!(t instanceof O))return new p.ClientDisplayableError("Cannot generate share token with non-token session");const r=await this.protocolService.getRootKeyParams(),n={accessToken:t.accessToken,refreshToken:t.refreshToken,accessExpiration:t.accessExpiration,refreshExpiration:t.refreshExpiration,readonlyAccess:!0,masterKey:null===(e=this.protocolService.getRootKey())||void 0===e?void 0:e.masterKey,keyParams:r.content,user:this.getSureUser(),host:this.apiService.getHost()};return this.protocolService.crypto.base64Encode(JSON.stringify(n))}decodeDemoShareToken(e){const t=this.protocolService.crypto.base64Decode(e);return JSON.parse(t)}async populateSessionFromDemoShareToken(e){const t=this.decodeDemoShareToken(e),r=(0,j.CreateNewRootKey)({masterKey:t.masterKey,keyParams:t.keyParams,version:t.keyParams.version}),n=t.user,i=new O(t.accessToken,t.accessExpiration,t.refreshToken,t.refreshExpiration,t.readonlyAccess);await this.populateSession(r,n,i,t.host)}async populateSession(e,t,r,n,i){await this.protocolService.setRootKey(e,i),this.setUser(t),this.diskStorageService.setValue(o.StorageKey.User,t),this.apiService.setHost(n),this.httpService.setHost(n),this.setSession(r),await this.webSocketsService.startWebSocketConnection()}async handleAuthResponse(e,t,r){const n=new O(e.session.access_token,e.session.access_expiration,e.session.refresh_token,e.session.refresh_expiration,e.session.readonly_access);await this.populateSession(t,e.user,n,this.apiService.getHost(),r)}async handleSuccessAuthResponse(e,t,r){const{data:n}=e,i=n.user;if(null!=n.token){const e=new N.j(n.token);await this.populateSession(t,i,e,this.apiService.getHost(),r)}else if(n.session){const n=O.FromApiResponse(e);await this.populateSession(t,i,n,this.apiService.getHost(),r)}}getDiagnostics(){return Promise.resolve({session:{isSessionRenewChallengePresented:this.isSessionRenewChallengePresented,online:this.online(),offline:this.offline(),isSignedIn:this.isSignedIn(),isSignedIntoFirstPartyServer:this.isSignedIntoFirstPartyServer()}})}}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.UserRoleMessageReceived="WebSocketMessageReceived"}(G||(G={}));class X extends o.AbstractService{constructor(e,t,r,n){super(n),$(this,"storageService",void 0),$(this,"webSocketUrl",void 0),$(this,"webSocketApiService",void 0),$(this,"internalEventBus",void 0),$(this,"webSocket",void 0),this.storageService=e,this.webSocketUrl=t,this.webSocketApiService=r,this.internalEventBus=n}setWebSocketUrl(e){this.webSocketUrl=e,this.storageService.setValue(o.StorageKey.WebSocketUrl,e)}loadWebSocketUrl(){const e=this.storageService.getValue(o.StorageKey.WebSocketUrl);this.webSocketUrl=e||this.webSocketUrl||window._websocket_url}async startWebSocketConnection(){const e=await this.createWebSocketConnectionToken();if(void 0!==e&&this.webSocketUrl)try{this.webSocket=new WebSocket("".concat(this.webSocketUrl,"?authToken=").concat(e)),this.webSocket.onmessage=this.onWebSocketMessage.bind(this),this.webSocket.onclose=this.onWebSocketClose.bind(this)}catch(e){console.error("Error starting WebSocket connection",e)}}closeWebSocketConnection(){var e;null===(e=this.webSocket)||void 0===e||e.close()}onWebSocketMessage(e){const t=JSON.parse(e.data);this.notifyEvent(G.UserRoleMessageReceived,t)}onWebSocketClose(){this.webSocket=void 0}async createWebSocketConnectionToken(){try{return(await this.webSocketApiService.createConnectionToken()).data.token}catch(e){return void console.error(e.message)}}deinit(){super.deinit(),this.storageService=void 0,this.webSocketApiService=void 0,this.closeWebSocketConnection()}}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Q extends o.AbstractService{constructor(e,t){super(t),Y(this,"application",void 0),Y(this,"internalEventBus",void 0),Y(this,"unsubApp",void 0),this.application=e,this.internalEventBus=t,this.addAppEventObserverAfterSubclassesFinishConstructing()}deinit(){this.application=void 0,this.unsubApp(),this.unsubApp=void 0,super.deinit()}addAppEventObserverAfterSubclassesFinishConstructing(){setTimeout((()=>{this.addAppEventObserver()}),0)}addAppEventObserver(){this.application.isStarted()&&this.onAppStart(),this.application.isLaunched()&&this.onAppLaunch(),this.unsubApp=this.application.addEventObserver((async e=>{await this.onAppEvent(e),e===o.ApplicationEvent.Started?this.onAppStart():e===o.ApplicationEvent.Launched?this.onAppLaunch():e===o.ApplicationEvent.CompletedFullSync?this.onAppFullSync():e===o.ApplicationEvent.CompletedIncrementalSync?this.onAppIncrementalSync():e===o.ApplicationEvent.KeyStatusChanged&&this.onAppKeyChange()}))}async onAppEvent(e){}async onAppStart(){}async onAppLaunch(){}async onAppKeyChange(){}onAppIncrementalSync(){}onAppFullSync(){}}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Z{constructor(e,t,r){J(this,"challenge",void 0),J(this,"values",void 0),J(this,"artifacts",void 0),this.challenge=e,this.values=t,this.artifacts=r,Object.freeze(this)}getValueForType(e){const t=this.values.find((t=>t.prompt.validation===e));if((0,d.isNullOrUndefined)(t))throw Error("Could not find value for validation type "+e);return t}getDefaultValue(){if(this.values.length>1)throw Error("Attempting to retrieve default response value when more than one value exists");return this.values[0]}}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class te{constructor(e,t,r,n,i,o){ee(this,"challenge",void 0),ee(this,"onValidValue",void 0),ee(this,"onInvalidValue",void 0),ee(this,"onNonvalidatedSubmit",void 0),ee(this,"onComplete",void 0),ee(this,"onCancel",void 0),ee(this,"nonvalidatedValues",[]),ee(this,"validValues",[]),ee(this,"invalidValues",[]),ee(this,"artifacts",{}),this.challenge=e,this.onValidValue=t,this.onInvalidValue=r,this.onNonvalidatedSubmit=n,this.onComplete=i,this.onCancel=o}deinit(){this.challenge=void 0,this.onValidValue=void 0,this.onInvalidValue=void 0,this.onNonvalidatedSubmit=void 0,this.onComplete=void 0,this.onCancel=void 0,this.nonvalidatedValues=void 0,this.validValues=void 0,this.invalidValues=void 0,this.artifacts=void 0}complete(e){var t;e||(e=new Z(this.challenge,this.validValues,this.artifacts)),null===(t=this.onComplete)||void 0===t||t.call(this,e)}nonvalidatedSubmit(){var e;const t=new Z(this.challenge,this.nonvalidatedValues.slice(),this.artifacts);null===(e=this.onNonvalidatedSubmit)||void 0===e||e.call(this,t),this.nonvalidatedValues=[]}cancel(){var e;null===(e=this.onCancel)||void 0===e||e.call(this)}isFinished(){return this.validValues.length===this.challenge.prompts.length}nonvalidatedPrompts(){return this.challenge.prompts.filter((e=>!e.validates))}addNonvalidatedValue(e){const t=this.nonvalidatedValues,r=t.find((t=>t.prompt.id===e.prompt.id));r&&(0,d.removeFromArray)(t,r),t.push(e),this.nonvalidatedValues.length===this.nonvalidatedPrompts().length&&this.nonvalidatedSubmit()}setValueStatus(e,t,r){const n=t?this.validValues:this.invalidValues,i=n.find((t=>t.prompt.validation===e.prompt.validation));var o,a;i&&(0,d.removeFromArray)(n,i),n.push(e),Object.assign(this.artifacts,r),this.isFinished()?this.complete():t?null===(o=this.onValidValue)||void 0===o||o.call(this,e):null===(a=this.onInvalidValue)||void 0===a||a.call(this,e)}}var re,ne=r(44412);function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.UnprotectedSessionBegan="UnprotectedSessionBegan",e.UnprotectedSessionExpired="UnprotectedSessionExpired"}(re||(re={}));const oe=30;var ae;function se(e){return"number"==typeof e&&Object.values(ae).includes(e)}!function(e){e[e.OneMinute=60]="OneMinute",e[e.FiveMinutes=300]="FiveMinutes",e[e.OneHour=3600]="OneHour",e[e.OneWeek=604800]="OneWeek"}(ae||(ae={}));const ce=[{valueInSeconds:ae.OneMinute,label:"1 Minute"},{valueInSeconds:ae.FiveMinutes,label:"5 Minutes"},{valueInSeconds:ae.OneHour,label:"1 Hour"},{valueInSeconds:ae.OneWeek,label:"1 Week"}];class le extends o.AbstractService{constructor(e,t,r,n){super(n),ie(this,"protocolService",void 0),ie(this,"challengeService",void 0),ie(this,"storageService",void 0),ie(this,"internalEventBus",void 0),ie(this,"sessionExpiryTimeout",-1),ie(this,"mobilePasscodeTiming",o.MobileUnlockTiming.OnQuit),ie(this,"mobileBiometricsTiming",o.MobileUnlockTiming.OnQuit),this.protocolService=e,this.challengeService=t,this.storageService=r,this.internalEventBus=n}deinit(){clearTimeout(this.sessionExpiryTimeout),this.protocolService=void 0,this.challengeService=void 0,this.storageService=void 0,super.deinit()}handleApplicationStage(e){return e===o.ApplicationStage.LoadedDatabase_12&&(this.updateSessionExpiryTimer(this.getSessionExpiryDate()),this.mobilePasscodeTiming=this.getMobilePasscodeTiming(),this.mobileBiometricsTiming=this.getMobileBiometricsTiming()),Promise.resolve()}hasProtectionSources(){return this.protocolService.hasAccount()||this.protocolService.hasPasscode()||this.hasBiometricsEnabled()}hasUnprotectedAccessSession(){return!this.hasProtectionSources()||this.getSessionExpiryDate()>new Date}hasBiometricsEnabled(){const e=this.storageService.getValue(o.StorageKey.BiometricsState,o.StorageValueModes.Nonwrapped);return Boolean(e)}enableBiometrics(){return this.hasBiometricsEnabled()?(ne.W.onError(Error("Tried to enable biometrics when they already are enabled.")),!1):(this.storageService.setValue(o.StorageKey.BiometricsState,!0,o.StorageValueModes.Nonwrapped),!0)}async disableBiometrics(){return this.hasBiometricsEnabled()?!!await this.validateOrRenewSession(o.ChallengeReason.DisableBiometrics)&&(this.storageService.setValue(o.StorageKey.BiometricsState,!1,o.StorageValueModes.Nonwrapped),!0):(ne.W.onError(Error("Tried to disable biometrics when they already are disabled.")),!1)}createLaunchChallenge(){const e=[];return this.hasBiometricsEnabled()&&e.push(new o.ChallengePrompt(o.ChallengeValidation.Biometric)),this.protocolService.hasPasscode()&&e.push(new o.ChallengePrompt(o.ChallengeValidation.LocalPasscode)),e.length>0?new o.Challenge(e,o.ChallengeReason.ApplicationUnlock,!1):void 0}async authorizeProtectedActionForItems(e,t){let r;const n=[];for(const i of e){const e=i.protected&&!this.hasUnprotectedAccessSession();e&&!r&&(r=this.validateOrRenewSession(t)),e&&!await r||n.push(i)}return n}async authorizeItemAccess(e){return!e.protected||this.authorizeAction(e.content_type===n.ContentType.Note?o.ChallengeReason.AccessProtectedNote:o.ChallengeReason.AccessProtectedFile,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1})}authorizeAddingPasscode(){return this.authorizeAction(o.ChallengeReason.AddPasscode,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1})}authorizeChangingPasscode(){return this.authorizeAction(o.ChallengeReason.ChangePasscode,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1})}authorizeRemovingPasscode(){return this.authorizeAction(o.ChallengeReason.RemovePasscode,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1})}authorizeSearchingProtectedNotesText(){return this.authorizeAction(o.ChallengeReason.SearchProtectedNotesText,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1})}authorizeFileImport(){return this.authorizeAction(o.ChallengeReason.ImportFile,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1})}async authorizeBackupCreation(){return this.authorizeAction(o.ChallengeReason.ExportBackup,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1})}async authorizeMfaDisable(){return this.authorizeAction(o.ChallengeReason.DisableMfa,{fallBackToAccountPassword:!0,requireAccountPassword:!0,forcePrompt:!1})}async authorizeAutolockIntervalChange(){return this.authorizeAction(o.ChallengeReason.ChangeAutolockInterval,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1})}async authorizeSessionRevoking(){return this.authorizeAction(o.ChallengeReason.RevokeSession,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1})}async authorizeListedPublishing(){return this.authorizeAction(o.ChallengeReason.AuthorizeNoteForListed,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!0})}async authorizeAction(e,t){return this.validateOrRenewSession(e,t)}getMobilePasscodeTimingOptions(){return[{title:"Immediately",key:o.MobileUnlockTiming.Immediately,selected:this.mobilePasscodeTiming===o.MobileUnlockTiming.Immediately},{title:"On Quit",key:o.MobileUnlockTiming.OnQuit,selected:this.mobilePasscodeTiming===o.MobileUnlockTiming.OnQuit}]}getMobileBiometricsTimingOptions(){return[{title:"Immediately",key:o.MobileUnlockTiming.Immediately,selected:this.mobileBiometricsTiming===o.MobileUnlockTiming.Immediately},{title:"On Quit",key:o.MobileUnlockTiming.OnQuit,selected:this.mobileBiometricsTiming===o.MobileUnlockTiming.OnQuit}]}getMobileBiometricsTiming(){return this.storageService.getValue(o.StorageKey.MobileBiometricsTiming,o.StorageValueModes.Nonwrapped,o.MobileUnlockTiming.OnQuit)}getMobilePasscodeTiming(){return this.storageService.getValue(o.StorageKey.MobilePasscodeTiming,o.StorageValueModes.Nonwrapped,o.MobileUnlockTiming.OnQuit)}setMobileBiometricsTiming(e){this.storageService.setValue(o.StorageKey.MobileBiometricsTiming,e,o.StorageValueModes.Nonwrapped),this.mobileBiometricsTiming=e}setMobilePasscodeTiming(e){this.storageService.setValue(o.StorageKey.MobilePasscodeTiming,e,o.StorageValueModes.Nonwrapped),this.mobilePasscodeTiming=e}setMobileScreenshotPrivacyEnabled(e){return this.storageService.setValue(o.StorageKey.MobileScreenshotPrivacyEnabled,e,o.StorageValueModes.Default)}getMobileScreenshotPrivacyEnabled(){return this.storageService.getValue(o.StorageKey.MobileScreenshotPrivacyEnabled,o.StorageValueModes.Default,!1)}async validateOrRenewSession(e){let{fallBackToAccountPassword:t=!0,requireAccountPassword:r=!1,forcePrompt:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.getSessionExpiryDate()>new Date&&!n)return!0;const i=[];if(this.hasBiometricsEnabled()&&i.push(new o.ChallengePrompt(o.ChallengeValidation.Biometric)),this.protocolService.hasPasscode()&&i.push(new o.ChallengePrompt(o.ChallengeValidation.LocalPasscode)),r){if(!this.protocolService.hasAccount())throw Error("Requiring account password for challenge with no account");i.push(new o.ChallengePrompt(o.ChallengeValidation.AccountPassword))}if(0===i.length){if(!t||!this.protocolService.hasAccount())return!0;i.push(new o.ChallengePrompt(o.ChallengeValidation.AccountPassword))}const a=this.getLastSessionLength(),s=se(a)?a:ae.OneMinute;i.push(new o.ChallengePrompt(o.ChallengeValidation.ProtectionSessionDuration,void 0,void 0,void 0,void 0,s));const c=await this.challengeService.promptForChallengeResponse(new o.Challenge(i,e,!0));if(c){var l;const e=null===(l=c.values.find((e=>e.prompt.validation===o.ChallengeValidation.ProtectionSessionDuration)))||void 0===l?void 0:l.value;return(0,d.isNullOrUndefined)(e)?ne.W.error(Error("No valid protection session length found. Got "+e)):await this.setSessionLength(e),!0}return!1}getSessionExpiryDate(){const e=this.storageService.getValue(o.StorageKey.ProtectionExpirey);return e?new Date(e):new Date}clearSession(){return this.setSessionExpiryDate(new Date),this.notifyEvent(re.UnprotectedSessionExpired)}setSessionExpiryDate(e){this.storageService.setValue(o.StorageKey.ProtectionExpirey,e)}getLastSessionLength(){return this.storageService.getValue(o.StorageKey.ProtectionSessionLength)}setSessionLength(e){this.storageService.setValue(o.StorageKey.ProtectionSessionLength,e);const t=new Date;t.setSeconds(t.getSeconds()+e),this.setSessionExpiryDate(t),this.updateSessionExpiryTimer(t),this.notifyEvent(re.UnprotectedSessionBegan)}updateSessionExpiryTimer(e){clearTimeout(this.sessionExpiryTimeout),this.sessionExpiryTimeout=setTimeout((()=>{this.clearSession()}),e.getTime()-Date.now())}getDiagnostics(){return Promise.resolve({protections:{getSessionExpiryDate:this.getSessionExpiryDate(),getLastSessionLength:this.getLastSessionLength(),hasProtectionSources:this.hasProtectionSources(),hasUnprotectedAccessSession:this.hasUnprotectedAccessSession(),hasBiometricsEnabled:this.hasBiometricsEnabled()}})}}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const de=e=>{e.onCancel=void 0,e.onComplete=void 0,e.onValidValue=void 0,e.onInvalidValue=void 0,e.onNonvalidatedSubmit=void 0};class pe extends o.AbstractService{constructor(e,t,r){super(r),ue(this,"storageService",void 0),ue(this,"protocolService",void 0),ue(this,"internalEventBus",void 0),ue(this,"challengeOperations",{}),ue(this,"sendChallenge",void 0),ue(this,"challengeObservers",{}),this.storageService=e,this.protocolService=t,this.internalEventBus=r}deinit(){this.storageService=void 0,this.protocolService=void 0,this.sendChallenge=void 0,this.challengeOperations=void 0,this.challengeObservers=void 0,super.deinit()}promptForChallengeResponse(e){return new Promise((t=>{this.createOrGetChallengeOperation(e,t),this.sendChallenge(e)}))}createChallenge(e,t,r,n,i){return new o.Challenge(e,t,r,n,i)}async validateChallengeValue(e){switch(e.prompt.validation){case o.ChallengeValidation.LocalPasscode:return this.protocolService.validatePasscode(e.value);case o.ChallengeValidation.AccountPassword:return this.protocolService.validateAccountPassword(e.value);case o.ChallengeValidation.Biometric:return{valid:!0===e.value};case o.ChallengeValidation.ProtectionSessionDuration:return{valid:se(e.value)};default:throw Error("Unhandled validation mode ".concat(e.prompt.validation))}}async promptForCorrectPasscode(e){const t=new o.Challenge([new o.ChallengePrompt(o.ChallengeValidation.LocalPasscode)],e,!0),r=await this.promptForChallengeResponse(t);if(r)return r.getValueForType(o.ChallengeValidation.LocalPasscode).value}async getWrappingKeyIfApplicable(e){return this.protocolService.hasPasscode()?e||(e=await this.promptForCorrectPasscode(o.ChallengeReason.ResaveRootKey))?{wrappingKey:await this.protocolService.computeWrappingKey(e)}:{canceled:!0}:{}}isPasscodeLocked(){return this.protocolService.isPasscodeLocked()}addChallengeObserver(e,t){const r=this.challengeObservers[e.id]||[];return r.push(t),this.challengeObservers[e.id]=r,()=>{de(t),(0,d.removeFromArray)(r,t)}}createOrGetChallengeOperation(e,t){let r=this.getChallengeOperation(e);return r||(r=new te(e,(t=>{this.onChallengeValidValue(e,t)}),(t=>{this.onChallengeInvalidValue(e,t)}),(r=>{this.onChallengeNonvalidatedSubmit(e,r),t(r)}),(r=>{this.onChallengeComplete(e,r),t(r)}),(()=>{this.onChallengeCancel(e),t(void 0)})),this.challengeOperations[e.id]=r),r}performOnObservers(e,t){const r=this.challengeObservers[e.id]||[];for(const e of r)t(e)}onChallengeValidValue(e,t){this.performOnObservers(e,(e=>{var r;null===(r=e.onValidValue)||void 0===r||r.call(e,t)}))}onChallengeInvalidValue(e,t){this.performOnObservers(e,(e=>{var r;null===(r=e.onInvalidValue)||void 0===r||r.call(e,t)}))}onChallengeNonvalidatedSubmit(e,t){this.performOnObservers(e,(e=>{var r;null===(r=e.onNonvalidatedSubmit)||void 0===r||r.call(e,t)}))}onChallengeComplete(e,t){this.performOnObservers(e,(e=>{var r;null===(r=e.onComplete)||void 0===r||r.call(e,t)}))}onChallengeCancel(e){this.performOnObservers(e,(e=>{var t;null===(t=e.onCancel)||void 0===t||t.call(e)}))}getChallengeOperation(e){return this.challengeOperations[e.id]}deleteChallengeOperation(e){const t=e.challenge;e.deinit(),delete this.challengeOperations[t.id]}cancelChallenge(e){const t=this.challengeOperations[e.id];t.cancel(),this.deleteChallengeOperation(t)}completeChallenge(e){const t=this.challengeOperations[e.id];t.complete(),this.deleteChallengeOperation(t)}async submitValuesForChallenge(e,t){if(0===t.length)throw Error("Attempting to submit 0 values for challenge");for(const r of t)if(r.prompt.validates){const{valid:t,artifacts:n}=await this.validateChallengeValue(r);this.setValidationStatusForChallenge(e,r,t,n)}else this.getChallengeOperation(e).addNonvalidatedValue(r)}setValidationStatusForChallenge(e,t,r,n){const i=this.getChallengeOperation(e);if(i.setValueStatus(t,r,n),i.isFinished()){this.deleteChallengeOperation(i);const t=this.challengeObservers[e.id];t.forEach(de),t.length=0,delete this.challengeObservers[e.id]}}}var he=r(70295);const fe=Object.freeze([he.LegacyFileSafeIdentifier,he.FeatureIdentifier.DeprecatedFileSafe,he.FeatureIdentifier.DeprecatedBoldEditor]),ye=Object.freeze([n.ContentType.FilesafeCredentials,n.ContentType.FilesafeFileMetadata,n.ContentType.FilesafeIntegration]);var ve=r(3270),ge=r.n(ve),me=r(14293),be=r.n(me),Se=r(1494),we=r.n(Se),Pe=r(49148);function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){Ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ke=[he.ComponentAction.SaveItems,he.ComponentAction.AssociateItem,he.ComponentAction.DeassociateItem,he.ComponentAction.CreateItem,he.ComponentAction.CreateItems,he.ComponentAction.DeleteItems,he.ComponentAction.SetComponentData];class Oe{constructor(e,t,r,a,s,c,l,u,p,h,f,y){Ce(this,"component",void 0),Ce(this,"itemManager",void 0),Ce(this,"syncService",void 0),Ce(this,"alertService",void 0),Ce(this,"preferencesSerivce",void 0),Ce(this,"environment",void 0),Ce(this,"platform",void 0),Ce(this,"componentManagerFunctions",void 0),Ce(this,"url",void 0),Ce(this,"contextItemUuid",void 0),Ce(this,"streamItems",void 0),Ce(this,"streamContextItemOriginalMessage",void 0),Ce(this,"streamItemsOriginalMessage",void 0),Ce(this,"removeItemObserver",void 0),Ce(this,"loggingEnabled",!1),Ce(this,"identifier",(0,d.nonSecureRandomIdentifier)()),Ce(this,"actionObservers",[]),Ce(this,"overrideContextItem",void 0),Ce(this,"featureStatus",void 0),Ce(this,"removeFeaturesObserver",void 0),Ce(this,"eventObservers",[]),Ce(this,"dealloced",!1),Ce(this,"window",void 0),Ce(this,"hidden",!1),Ce(this,"readonly",!1),Ce(this,"lockReadonly",!1),Ce(this,"sessionKey",void 0),this.component=e,this.itemManager=t,this.syncService=r,this.alertService=a,this.preferencesSerivce=s,this.environment=l,this.platform=u,this.componentManagerFunctions=p,this.url=h,this.contextItemUuid=f,this.removeItemObserver=this.itemManager.addObserver(n.ContentType.Any,(e=>{let{changed:t,inserted:r,removed:n,source:i,sourceKey:o}=e;if(this.dealloced)return;const a=[...t,...r,...n];this.handleChangesInItems(a,i,o)})),y&&this.actionObservers.push(y),this.featureStatus=c.getFeatureStatus(e.identifier),this.removeFeaturesObserver=c.addEventObserver((t=>{if(!this.dealloced&&t===o.FeaturesEvent.FeaturesUpdated){const t=c.getFeatureStatus(e.identifier);t!==this.featureStatus&&(this.featureStatus=t,this.notifyEventObservers(i.ComponentViewerEvent.FeatureStatusUpdated))}})),this.log("Constructor",this)}get isDesktop(){return this.environment===i.Environment.Desktop}get isMobile(){return this.environment===i.Environment.Mobile}destroy(){this.log("Destroying",this),this.deinit()}deinit(){this.dealloced=!0,this.component=void 0,this.itemManager=void 0,this.syncService=void 0,this.alertService=void 0,this.preferencesSerivce=void 0,this.componentManagerFunctions=void 0,this.eventObservers.length=0,this.actionObservers.length=0,this.removeFeaturesObserver(),this.removeFeaturesObserver=void 0,this.removeItemObserver(),this.removeItemObserver=void 0}addEventObserver(e){this.eventObservers.push(e);const t=this.eventObservers;return()=>{(0,d.removeFromArray)(t,e)}}notifyEventObservers(e){for(const t of this.eventObservers)t(e)}addActionObserver(e){this.actionObservers.push(e);const t=this.actionObservers;return()=>{(0,d.removeFromArray)(t,e)}}setReadonly(e){if(this.lockReadonly)throw Error("Attempting to set readonly on lockedReadonly component viewer");this.readonly=e}get componentUuid(){return this.component.uuid}getFeatureStatus(){return this.featureStatus}isOfflineRestricted(){return this.component.offlineOnly&&!this.isDesktop}isNativeFeature(){return!!(0,he.FindNativeFeature)(this.component.identifier)}hasUrlError(){return!(this.isNativeFeature()||this.isDesktop&&this.component.local_url||this.component.hasValidHostedUrl())}shouldRender(){return null==this.getError()}getError(){return this.isOfflineRestricted()?o.ComponentViewerError.OfflineRestricted:this.hasUrlError()?o.ComponentViewerError.MissingUrl:void 0}updateOurComponentRefFromChangedItems(e){const t=e.find((e=>e.uuid===this.component.uuid));t&&(0,i.isDecryptedItem)(t)&&(this.component=t)}handleChangesInItems(e,t,r){const n=e.filter(i.isNotEncryptedItem),o=n.filter(i.isDecryptedItem);if(this.updateOurComponentRefFromChangedItems(o),!r||r!==this.component.uuid){if(this.streamItems){const e=n.filter((e=>{var t;return null===(t=this.streamItems)||void 0===t?void 0:t.includes(e.content_type)}));e.length>0&&this.sendManyItemsThroughBridge(e)}if(this.streamContextItemOriginalMessage){const e=ge()(o,{uuid:this.contextItemUuid});e&&this.sendContextItemThroughBridge(e,t)}}}sendManyItemsThroughBridge(e){const t=[{name:he.ComponentAction.StreamItems,content_types:this.streamItems.sort()}];this.componentManagerFunctions.runWithPermissions(this.component.uuid,t,(()=>{this.sendItemsInReply(e,this.streamItemsOriginalMessage)}))}sendContextItemThroughBridge(e,t){const r=[{name:he.ComponentAction.StreamContextItem}];this.componentManagerFunctions.runWithPermissions(this.component.uuid,r,(()=>{this.log("Send context item in reply","component:",this.component,"item: ",e,"originalMessage: ",this.streamContextItemOriginalMessage);const r={item:this.jsonForItem(e,t)};this.replyToMessage(this.streamContextItemOriginalMessage,r)}))}log(e){if(this.loggingEnabled){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(0,d.log)("ComponentViewer",e,r)}}sendItemsInReply(e,t,r){this.log("Send items in reply",this.component,e,t);const n={},i=e.map((e=>this.jsonForItem(e,r)));n.items=i,this.replyToMessage(t,n)}jsonForItem(e,t){const r=t===i.PayloadEmitSource.RemoteSaved||t===i.PayloadEmitSource.OfflineSyncSaved||t===i.PayloadEmitSource.PreSyncSave,n={uuid:e.uuid,content_type:e.content_type,created_at:e.created_at,updated_at:e.serverUpdatedAt,isMetadataUpdate:r};if((0,i.isDecryptedItem)(e)){n.content=this.contentForItem(e);const t=(e.getDomainData(i.ComponentDataDomain)||{})[this.component.getClientDataKey()]||{};n.clientData=t}else n.deleted=!0;return this.responseItemsByRemovingPrivateProperties([n])[0]}contentForItem(e){if((0,i.isNote)(e)){const t=e.content,r=null!=e.spellcheck?e.spellcheck:this.preferencesSerivce.getValue(i.PrefKey.EditorSpellcheck,!0);return Ee(Ee({},t),{},{spellcheck:r})}return e.content}replyToMessage(e,t){const r={action:he.ComponentAction.Reply,original:e,data:t};this.sendMessage(r)}sendMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=[he.ComponentAction.ComponentRegistered,he.ComponentAction.ActivateThemes];if(this.hidden&&!r.includes(e.action))return void this.log("Component disabled for current item, ignoring messages.",this.component.name);if(!this.window&&e.action===he.ComponentAction.Reply)return void this.log("Component has been deallocated in between message send and reply",this.component,e);this.log("Send message to component",this.component,"message: ",e);let n=this.url;n&&this.window?(n.startsWith("http")||n.startsWith("file")||(n=window.location.href+n),this.window.postMessage(this.isMobile?JSON.stringify(e):e,n)):t&&this.alertService.alert("Standard Notes is trying to communicate with ".concat(this.component.name,", ")+"but an error is occurring. Please restart this extension and try again.")}responseItemsByRemovingPrivateProperties(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=["autoupdateDisabled","permissions","active"];return t&&(r=r.concat(["hosted_url","local_url"])),e.map((e=>{const n=r.slice();if(t&&n.push("url"),!e.content||(0,d.isString)(e.content))return e;let i={};for(const[t,r]of Object.entries(e.content))n.includes(t)||(i=Ee(Ee({},i),{},{[t]:r}));return Ee(Ee({},e),{},{content:i})}))}getWindow(){return this.window}setWindow(e){if(this.window)throw Error("Attempting to override component viewer window. Create a new component viewer instead.");this.log("setWindow","component: ",this.component,"window: ",e),this.window=e,this.sessionKey=d.UuidGenerator.GenerateUuid(),this.sendMessage({action:he.ComponentAction.ComponentRegistered,sessionKey:this.sessionKey,componentData:this.component.componentData,data:{uuid:this.component.uuid,environment:(0,Pe.g)(this.environment),platform:(0,Pe._e)(this.platform),activeThemeUrls:this.componentManagerFunctions.urlsForActiveThemes()}}),this.log("setWindow got new sessionKey",this.sessionKey),this.postActiveThemes()}postActiveThemes(){const e={themes:this.componentManagerFunctions.urlsForActiveThemes()},t={action:he.ComponentAction.ActivateThemes,data:e};this.sendMessage(t,!1)}setHidden(e){e?this.hidden=!0:this.hidden&&(this.hidden=!1,this.streamContextItemOriginalMessage&&this.handleStreamContextItemMessage(this.streamContextItemOriginalMessage),this.streamItems&&this.handleStreamItemsMessage(this.streamItemsOriginalMessage))}handleMessage(e){if(this.log("Handle message",e,this),!this.component)return this.log("Component not defined for message, returning",e),void this.alertService.alert("A component is trying to communicate with Standard Notes, but there is an error establishing a bridge. Please restart the app and try again.");if(this.readonly&&ke.includes(e.action))return void this.alertService.alert("".concat(this.component.name," is trying to save, but it is in a locked state and cannot accept changes."));const t={[he.ComponentAction.StreamItems]:this.handleStreamItemsMessage.bind(this),[he.ComponentAction.StreamContextItem]:this.handleStreamContextItemMessage.bind(this),[he.ComponentAction.SetComponentData]:this.handleSetComponentDataMessage.bind(this),[he.ComponentAction.DeleteItems]:this.handleDeleteItemsMessage.bind(this),[he.ComponentAction.CreateItems]:this.handleCreateItemsMessage.bind(this),[he.ComponentAction.CreateItem]:this.handleCreateItemsMessage.bind(this),[he.ComponentAction.SaveItems]:this.handleSaveItemsMessage.bind(this),[he.ComponentAction.SetSize]:this.handleSetSizeEvent.bind(this)}[e.action];null==t||t(e);for(const t of this.actionObservers)t(e.action,e.data)}handleStreamItemsMessage(e){const t=e.data.content_types.filter((e=>ye.includes(e))).sort(),r=[{name:he.ComponentAction.StreamItems,content_types:t}];this.componentManagerFunctions.runWithPermissions(this.component.uuid,r,(()=>{this.streamItems||(this.streamItems=t,this.streamItemsOriginalMessage=e);const r=[];for(const e of t)(0,d.extendArray)(r,this.itemManager.getItems(e));this.sendItemsInReply(r,e)}))}handleStreamContextItemMessage(e){const t=[{name:he.ComponentAction.StreamContextItem}];this.componentManagerFunctions.runWithPermissions(this.component.uuid,t,(()=>{this.streamContextItemOriginalMessage||(this.streamContextItemOriginalMessage=e);const t=this.overrideContextItem||this.itemManager.findItem(this.contextItemUuid);t&&this.sendContextItemThroughBridge(t)}))}handleSaveItemsMessage(e){let t=e.data.items;const r=[],o=t.slice();for(const e of t.slice())if(e.uuid===this.contextItemUuid){r.push({name:he.ComponentAction.StreamContextItem}),(0,d.removeFromArray)(o,e);break}if(o.length>0){const e=be()(o.map((e=>e.content_type))).sort();r.push({name:he.ComponentAction.StreamItems,content_types:e})}this.componentManagerFunctions.runWithPermissions(this.component.uuid,r,(async()=>{t=this.responseItemsByRemovingPrivateProperties(t,!0);const r=(0,d.Uuids)(t),o=this.itemManager.findItemsIncludingBlanks(r);let a=0,s=0;for(const e of o)e&&e.locked&&(we()(t,{uuid:e.uuid}),a++,e.content_type===n.ContentType.Note&&s++);if(1===s)return void this.alertService.alert("The note you are attempting to save has editing disabled","Note has Editing Disabled");if(a>0){const e=1===a?"item":s===a?"notes":"items",t=1===a?"has":"have";return void this.alertService.alert("".concat(a," ").concat(e," you are attempting to save ").concat(t," editing disabled."),"Items have Editing Disabled")}const c=t.map((e=>(0,i.CreateComponentRetrievedContextPayload)(e)));for(const e of c){const t=this.itemManager.findItem(e.uuid);if(t){if(e.content_type!==t.content_type)throw Error("Extension is trying to modify content type of item.")}else{const t=new i.DecryptedPayload(Ee(Ee({},(0,i.PayloadTimestampDefaults)()),e)),r=(0,i.CreateDecryptedItemFromPayload)(t);await this.itemManager.insertItem(r)}}await this.itemManager.changeItems(o.filter(d.isNotUndefined),(e=>{const r=(0,d.sureSearchArray)(c,{uuid:e.getUuid()});e.setCustomContent(r.content);const n=(0,d.sureSearchArray)(t,{uuid:e.getUuid()});if(n.clientData){const t=(0,d.Copy)(e.getItem().getDomainData(i.ComponentDataDomain)||{});t[this.component.getClientDataKey()]=n.clientData,e.setDomainData(t,i.ComponentDataDomain)}}),i.MutationType.UpdateUserTimestamps,i.PayloadEmitSource.ComponentRetrieved,this.component.uuid),this.syncService.sync({onPresyncSave:()=>{this.replyToMessage(e,{})}}).catch((()=>{this.replyToMessage(e,{error:"save-error"})}))}))}handleCreateItemsMessage(e){let t=e.data.item?[e.data.item]:e.data.items;const r=be()(t.map((e=>e.content_type))),n=[{name:he.ComponentAction.StreamItems,content_types:r}];this.componentManagerFunctions.runWithPermissions(this.component.uuid,n,(async()=>{t=this.responseItemsByRemovingPrivateProperties(t);const r=[];for(const e of t){e.uuid||(e.uuid=d.UuidGenerator.GenerateUuid());const t=(0,i.createComponentCreatedContextPayload)(e),n=new i.DecryptedPayload(Ee(Ee({},(0,i.PayloadTimestampDefaults)()),t)),o=(0,i.CreateDecryptedItemFromPayload)(n),a=await this.itemManager.insertItem(o);await this.itemManager.changeItem(a,(t=>{if(e.clientData){const r=(0,d.Copy)(a.getDomainData(i.ComponentDataDomain)||{});r[this.component.getClientDataKey()]=e.clientData,t.setDomainData(r,i.ComponentDataDomain)}}),i.MutationType.UpdateUserTimestamps,i.PayloadEmitSource.ComponentCreated,this.component.uuid),r.push(a)}this.syncService.sync();const n=e.action===he.ComponentAction.CreateItem?{item:this.jsonForItem(r[0])}:{items:r.map((e=>this.jsonForItem(e)))};this.replyToMessage(e,n)}))}handleDeleteItemsMessage(e){const t=e.data.items.filter((e=>ye.includes(e.content_type))),r=be()(t.map((e=>e.content_type))).sort(),n=[{name:he.ComponentAction.StreamItems,content_types:r}];this.componentManagerFunctions.runWithPermissions(this.component.uuid,n,(async()=>{const r=t,n=1===r.length?"item":"items";let o=null;if(await this.alertService.confirm("Are you sure you want to delete ".concat(r.length," ").concat(n,"?"))){for(const e of r){const t=this.itemManager.findItem(e.uuid);t?await this.itemManager.setItemToBeDeleted(t,i.PayloadEmitSource.ComponentRetrieved):this.alertService.alert("The item you are trying to delete cannot be found.")}this.syncService.sync(),o={deleted:!0}}else o={deleted:!1};this.replyToMessage(e,o)}))}handleSetComponentDataMessage(e){this.componentManagerFunctions.runWithPermissions(this.component.uuid,[],(async()=>{await this.itemManager.changeComponent(this.component,(t=>{t.componentData=e.data.componentData||{}})),this.syncService.sync()}))}handleSetSizeEvent(e){var t;if(this.component.area!==he.ComponentArea.EditorStack)return;const r=null===(t=this.getIframe())||void 0===t?void 0:t.parentElement;if(!r)return;const n=e.data,i=(0,d.isString)(n.width)?n.width:"".concat(n.width,"px"),o=(0,d.isString)(n.height)?n.height:"".concat(n.height,"px");r&&r.setAttribute("style","width:".concat(i,"; height:").concat(o,";"))}getIframe(){return Array.from(document.getElementsByTagName("iframe")).find((e=>e.dataset.componentViewerId===this.identifier))}}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ie="localhost";var Ae;!function(e){e.ViewerDidFocus="ViewerDidFocus"}(Ae||(Ae={}));class Me extends o.AbstractService{constructor(e,t,r,n,i,o,a,s,c){super(s),xe(this,"itemManager",void 0),xe(this,"syncService",void 0),xe(this,"featuresService",void 0),xe(this,"preferencesSerivce",void 0),xe(this,"alertService",void 0),xe(this,"environment",void 0),xe(this,"platform",void 0),xe(this,"internalEventBus",void 0),xe(this,"device",void 0),xe(this,"desktopManager",void 0),xe(this,"viewers",[]),xe(this,"removeItemObserver",void 0),xe(this,"permissionDialogs",[]),xe(this,"detectFocusChange",(()=>{const e=this.allComponentIframes();for(const t of e)if(document.activeElement===t)return void setTimeout((()=>{const e=this.findComponentViewer(t.dataset.componentViewerId);this.notifyEvent(Ae.ViewerDidFocus,{componentViewer:e})}))})),xe(this,"onWindowMessage",(e=>{var t;e.data.sessionKey&&(this.log("Component manager received message",e.data),null===(t=this.componentViewerForSessionKey(e.data.sessionKey))||void 0===t||t.handleMessage(e.data))})),this.itemManager=e,this.syncService=t,this.featuresService=r,this.preferencesSerivce=n,this.alertService=i,this.environment=o,this.platform=a,this.internalEventBus=s,this.device=c,this.loggingEnabled=!1,this.addItemObserver(),window.addEventListener?window.addEventListener("focus",this.detectFocusChange,!0):window.attachEvent("onfocusout",this.detectFocusChange),window.addEventListener?window.addEventListener("blur",this.detectFocusChange,!0):window.attachEvent("onblur",this.detectFocusChange),window.addEventListener("message",this.onWindowMessage,!0)}get isDesktop(){return this.environment===i.Environment.Desktop}get isMobile(){return this.environment===i.Environment.Mobile}get components(){return this.itemManager.getDisplayableComponents()}componentsForArea(e){return this.components.filter((t=>t.area===e))}componentWithIdentifier(e){return this.components.find((t=>t.identifier===e))}deinit(){var e;super.deinit();for(const e of this.viewers)e.destroy();this.viewers.length=0,this.permissionDialogs.length=0,this.desktopManager=void 0,this.itemManager=void 0,this.featuresService=void 0,this.syncService=void 0,this.alertService=void 0,this.preferencesSerivce=void 0,null===(e=this.removeItemObserver)||void 0===e||e.call(this),this.removeItemObserver=void 0,window&&(window.removeEventListener("focus",this.detectFocusChange,!0),window.removeEventListener("blur",this.detectFocusChange,!0),window.removeEventListener("message",this.onWindowMessage,!0)),this.detectFocusChange=void 0,this.onWindowMessage=void 0}createComponentViewer(e,t,r,n){const i=new Oe(e,this.itemManager,this.syncService,this.alertService,this.preferencesSerivce,this.featuresService,this.environment,this.platform,{runWithPermissions:this.runWithPermissions.bind(this),urlsForActiveThemes:this.urlsForActiveThemes.bind(this)},n||this.urlForComponent(e),t,r);return this.viewers.push(i),i}destroyComponentViewer(e){e.destroy(),(0,d.removeFromArray)(this.viewers,e)}setDesktopManager(e){this.desktopManager=e,this.configureForDesktop()}handleChangedComponents(e,t){const r=[i.PayloadEmitSource.LocalChanged,i.PayloadEmitSource.RemoteRetrieved,i.PayloadEmitSource.LocalDatabaseLoaded,i.PayloadEmitSource.LocalInserted];if(0!==e.length&&r.includes(t)){if(this.isDesktop){const t=e.filter((e=>!(0,he.FindNativeFeature)(e.identifier)));var n;t.length>0&&(null===(n=this.desktopManager)||void 0===n||n.syncComponentsInstallation(t))}e.filter((e=>e.isTheme())).length>0&&this.postActiveThemesToAllViewers()}}addItemObserver(){this.removeItemObserver=this.itemManager.addObserver([n.ContentType.Component,n.ContentType.Theme],(e=>{let{changed:t,inserted:r,removed:n,source:i}=e;const a=[...t,...r];this.handleChangedComponents(a,i);const s=this.device;(0,o.isMobileDevice)(s)&&"addComponentUrl"in s&&(r.forEach((e=>{const t=this.urlForComponent(e);t&&s.addComponentUrl(e.uuid,t)})),n.forEach((e=>{s.removeComponentUrl(e.uuid)})))}))}configureForDesktop(){var e;null===(e=this.desktopManager)||void 0===e||e.registerUpdateObserver((e=>{e.active&&e.isTheme()&&this.postActiveThemesToAllViewers()}))}postActiveThemesToAllViewers(){for(const e of this.viewers)e.postActiveThemes()}getActiveThemes(){return this.componentsForArea(he.ComponentArea.Themes).filter((e=>e.active))}urlForComponent(e){const t=this.isDesktop;if(e.offlineOnly&&!t)return;const r=(0,he.FindNativeFeature)(e.identifier);if(this.isDesktop)return(0,d.assert)(this.desktopManager),r?"".concat(this.desktopManager.getExtServerHost(),"/components/").concat(e.identifier,"/").concat(r.index_path):e.local_url?e.local_url.replace("sn://",this.desktopManager.getExtServerHost()+"/"):e.hosted_url||e.legacy_url;const n=this.environment===i.Environment.Mobile;if(r){let t=window.location.origin;return n&&(t=window.location.href.split("/index.html")[0]),"".concat(t,"/components/assets/").concat(e.identifier,"/").concat(r.index_path)}let o=e.hosted_url||e.legacy_url;if(o){if(this.isMobile){const e=this.platform===i.Platform.Ios?Ie:"10.0.2.2";o=o.replace(Ie,e).replace("sn.local",e)}return o}}urlsForActiveThemes(){const e=this.getActiveThemes(),t=[];for(const r of e){const e=this.urlForComponent(r);e&&t.push(e)}return t}findComponent(e){return this.itemManager.findItem(e)}findComponentViewer(e){return this.viewers.find((t=>t.identifier===e))}componentViewerForSessionKey(e){return this.viewers.find((t=>t.sessionKey===e))}areRequestedPermissionsValid(e,t){for(const n of t)if(n.name===he.ComponentAction.StreamItems){var r;if(!fe.includes(e.identifier))return!1;if(null===(r=n.content_types)||void 0===r?void 0:r.some((e=>!ye.includes(e))))return!1}return!0}runWithPermissions(e,t,r){const n=this.findComponent(e);if(!n)return void this.alertService.alert("Unable to find component with ID ".concat(e,". Please restart the app and try again."),"An unexpected error occurred");if(!this.areRequestedPermissionsValid(n,t))return void console.error("Component is requesting invalid permissions",e,t);const i=(0,he.FindNativeFeature)(n.identifier),o=(null==i?void 0:i.component_permissions)||n.permissions;t=(0,d.Copy)(t);for(const e of t.slice()){const r=o.find((t=>t.name===e.name));if(!r)continue;const n=e.content_types;if(n){for(const e of r.content_types)(0,d.removeFromArray)(n,e);0===n.length&&(0,d.filterFromArray)(t,e)}else(0,d.filterFromArray)(t,e)}t.length>0?this.promptForPermissionsWithAngularAsyncRendering(n,t,(async e=>{e&&r()})):r()}promptForPermissionsWithAngularAsyncRendering(e,t,r){setTimeout((()=>{this.promptForPermissions(e,t,r)}))}promptForPermissions(e,t,r){const n={component:e,permissions:t,permissionsString:this.permissionsStringForPermissions(t,e),actionBlock:r,callback:async r=>{const i=this.findComponent(e.uuid);if(i){if(r){this.log("Changing component to expand permissions",e);const r=(0,d.Copy)(i.permissions);for(const e of t){const t=r.find((t=>t.name===e.name));if(t){const r=t.content_types||[];t.content_types=be()(r.concat(e.content_types))}else r.push(e)}await this.itemManager.changeItem(e,(e=>{e.permissions=r})),this.syncService.sync()}this.permissionDialogs=this.permissionDialogs.filter((i=>{return i===n?(i.actionBlock&&i.actionBlock(r),!1):!!(i.component!==e||i.permissions!==t&&(o=t,i.permissions.some((e=>!o.find((t=>JSON.stringify(t)===JSON.stringify(e)))))))||(r&&i.actionBlock&&i.actionBlock(r),!1);var o})),this.permissionDialogs.length>0&&this.presentPermissionsDialog(this.permissionDialogs[0])}}},i=ge()(this.permissionDialogs,{component:e});this.permissionDialogs.push(n),i?this.log("Existing dialog, not presenting."):this.presentPermissionsDialog(n)}presentPermissionsDialog(e){throw"Must override SNComponentManager.presentPermissionsDialog"}async toggleTheme(e){this.log("Toggling theme",e);const t=this.findComponent(e);if(t.active)await this.itemManager.changeComponent(t,(e=>{e.active=!1}));else{const e=this.getActiveThemes();if(await this.itemManager.changeComponent(t,(e=>{e.active=!0})),!t.isLayerable()){await(0,d.sleep)(10);for(const t of e)t&&!t.isLayerable()&&await this.itemManager.changeComponent(t,(e=>{e.active=!1}))}}}async toggleComponent(e){this.log("Toggling component",e);const t=this.findComponent(e);t&&await this.itemManager.changeComponent(t,(e=>{e.active=!e.getItem().active}))}isComponentActive(e){return e.active}allComponentIframes(){return Array.from(document.getElementsByTagName("iframe"))}iframeForComponentViewer(e){return e.getIframe()}editorForNote(e){return e.editorIdentifier?this.componentWithIdentifier(e.editorIdentifier):e.noteType!==he.NoteType.Plain?this.legacyGetEditorForNote(e):void 0}legacyGetEditorForNote(e){const t=this.componentsForArea(he.ComponentArea.Editor);for(const r of t)if(r.isExplicitlyEnabledForItem(e.uuid))return r;const r=this.getDefaultEditor();return r&&!r.isExplicitlyDisabledForItem(e.uuid)?r:void 0}getDefaultEditor(){return this.componentsForArea(he.ComponentArea.Editor).filter((e=>e.isDefaultEditor()))[0]}permissionsStringForPermissions(e,t){if(0===e.length)return".";let r=[],i=[];return e.forEach((e=>{switch(e.name){case he.ComponentAction.StreamItems:if(!e.content_types)return;e.content_types.forEach((e=>{const t=(0,n.DisplayStringForContentType)(e);t?r.push("".concat(t,"s")):r.push("items of type ".concat(e))}));break;case he.ComponentAction.StreamContextItem:{const e={[he.ComponentArea.EditorStack]:"working note",[he.ComponentArea.Editor]:"working note",[he.ComponentArea.Themes]:"Unknown"};i.push(e[t.area])}}})),r=be()(r),i=be()(i),0===r.length&&0===i.length?".":r.concat(i).join(", ")+"."}doesEditorChangeRequireAlert(e,t){const r=!e||!t,n="md"===(null==e?void 0:e.package_info.file_type)||"md"===(null==t?void 0:t.package_info.file_type),i="html"===(null==e?void 0:e.package_info.file_type)&&"html"===(null==t?void 0:t.package_info.file_type);return!(r||n||i)}async showEditorChangeAlert(){return await this.alertService.confirm("Doing so might result in minor formatting changes.","Are you sure you want to change this note's type?","Yes, change it")}}var De,Re=r(9382);function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ne extends o.AbstractService{constructor(e,t,r,a,s,c,l,u,d,p,h){super(h),Te(this,"storageService",void 0),Te(this,"apiService",void 0),Te(this,"itemManager",void 0),Te(this,"webSocketsService",void 0),Te(this,"settingsService",void 0),Te(this,"userService",void 0),Te(this,"syncService",void 0),Te(this,"alertService",void 0),Te(this,"sessionManager",void 0),Te(this,"crypto",void 0),Te(this,"internalEventBus",void 0),Te(this,"deinited",!1),Te(this,"roles",[]),Te(this,"features",[]),Te(this,"enabledExperimentalFeatures",[]),Te(this,"removeWebSocketsServiceObserver",void 0),Te(this,"removefeatureReposObserver",void 0),Te(this,"removeSignInObserver",void 0),Te(this,"needsInitialFeaturesUpdate",!0),Te(this,"completedSuccessfulFeaturesRetrieval",!1),this.storageService=e,this.apiService=t,this.itemManager=r,this.webSocketsService=a,this.settingsService=s,this.userService=c,this.syncService=l,this.alertService=u,this.sessionManager=d,this.crypto=p,this.internalEventBus=h,this.removeWebSocketsServiceObserver=a.addEventObserver((async(e,t)=>{if(e===G.UserRoleMessageReceived){const{payload:{userUuid:e,currentRoles:r}}=t;await this.updateRolesAndFetchFeatures(e,r)}})),this.removefeatureReposObserver=this.itemManager.addObserver(n.ContentType.ExtensionRepo,(async e=>{let{changed:t,inserted:r,source:n}=e;if([i.PayloadEmitSource.InitialObserverRegistrationPush,i.PayloadEmitSource.LocalInserted,i.PayloadEmitSource.LocalDatabaseLoaded,i.PayloadEmitSource.RemoteRetrieved,i.PayloadEmitSource.FileImport].includes(n)){const e=[...t,...r];this.sessionManager.isSignedIntoFirstPartyServer()?await this.migrateFeatureRepoToUserSetting(e):await this.migrateFeatureRepoToOfflineEntitlements(e)}})),this.removeSignInObserver=this.userService.addEventObserver((e=>{if(e===o.AccountEvent.SignedInOrRegistered){const e=this.itemManager.getItems(n.ContentType.ExtensionRepo);this.apiService.isThirdPartyHostUsed()||this.migrateFeatureRepoToUserSetting(e)}}))}async handleEvent(e){if(e.type===o.ApiServiceEvent.MetaReceived){if(!this.syncService)return void this.log("[Features Service] Handling events interrupted. Sync service is not yet initialized.",e);if(!this.syncService.completedOnlineDownloadFirstSync)return;const{userUuid:t,userRoles:r}=e.payload;await this.updateRolesAndFetchFeatures(t,r.map((e=>e.name)))}}async handleApplicationStage(e){if(await super.handleApplicationStage(e),e===o.ApplicationStage.FullSyncCompleted_13&&(this.addDarkTheme(),!this.hasOnlineSubscription())){const e=this.getOfflineRepo();e&&this.downloadOfflineFeatures(e)}}async addDarkTheme(){const e=he.FindNativeFeature(he.FeatureIdentifier.DarkTheme);e&&await this.mapRemoteNativeFeaturesToItems([e])}enableExperimentalFeature(e){const t=this.getUserFeature(e);if(!t)throw Error("Attempting to enable a feature user does not have access to.");this.enabledExperimentalFeatures.push(e),this.storageService.setValue(o.StorageKey.ExperimentalFeatures,this.enabledExperimentalFeatures),this.mapRemoteNativeFeaturesToItems([t]),this.notifyEvent(o.FeaturesEvent.FeaturesUpdated)}disableExperimentalFeature(e){if(!this.getUserFeature(e))throw Error("Attempting to disable a feature user does not have access to.");(0,d.removeFromArray)(this.enabledExperimentalFeatures,e),this.storageService.setValue(o.StorageKey.ExperimentalFeatures,this.enabledExperimentalFeatures);const t=this.itemManager.getItems([n.ContentType.Component,n.ContentType.Theme]).find((t=>t.identifier===e));t&&(this.itemManager.setItemToBeDeleted(t).then((()=>{this.syncService.sync()})),this.notifyEvent(o.FeaturesEvent.FeaturesUpdated))}toggleExperimentalFeature(e){this.isExperimentalFeatureEnabled(e)?this.disableExperimentalFeature(e):this.enableExperimentalFeature(e)}getExperimentalFeatures(){return he.ExperimentalFeatures}isExperimentalFeature(e){return this.getExperimentalFeatures().includes(e)}getEnabledExperimentalFeatures(){return this.enabledExperimentalFeatures}isExperimentalFeatureEnabled(e){return this.enabledExperimentalFeatures.includes(e)}async setOfflineFeaturesCode(e){try{const t=e.replace(/\s/g,""),r=this.crypto.base64Decode(t),o=this.parseOfflineEntitlementsCode(r);if(o instanceof p.ClientDisplayableError)return o;const a=await this.itemManager.createItem(n.ContentType.ExtensionRepo,(0,i.FillItemContent)({offlineFeaturesUrl:o.featuresUrl,offlineKey:o.extensionKey,migratedToOfflineEntitlements:!0}),!0);return this.syncService.sync(),this.downloadOfflineFeatures(a)}catch(e){return new p.ClientDisplayableError(o.API_MESSAGE_FAILED_OFFLINE_ACTIVATION)}}getOfflineRepo(){return this.itemManager.getItems(n.ContentType.ExtensionRepo).filter((e=>e.migratedToOfflineEntitlements))[0]}hasOfflineRepo(){return null!=this.getOfflineRepo()}async deleteOfflineFeatureRepo(){const e=this.getOfflineRepo();e&&(await this.itemManager.setItemToBeDeleted(e),this.syncService.sync()),await this.storageService.removeValue(o.StorageKey.UserFeatures)}parseOfflineEntitlementsCode(e){try{const{featuresUrl:t,extensionKey:r}=JSON.parse(e);return{featuresUrl:t,extensionKey:r}}catch(e){return new p.ClientDisplayableError(o.API_MESSAGE_FAILED_OFFLINE_ACTIVATION)}}async downloadOfflineFeatures(e){const t=await this.apiService.downloadOfflineFeaturesFromRepo(e);if(t instanceof p.ClientDisplayableError)return t;await this.didDownloadFeatures(t.features)}async migrateFeatureRepoToUserSetting(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(const t of e)if(!t.migratedToUserSetting&&t.onlineUrl){const e=t.onlineUrl.match(/\w{32,64}/);if(e&&e.length>0){const r=e[0];await this.settingsService.updateSetting(Re.SettingName.ExtensionKey,r,!0),await this.itemManager.changeFeatureRepo(t,(e=>{e.migratedToUserSetting=!0}))}}}async migrateFeatureRepoToOfflineEntitlements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(const t of e)if(!t.migratedToOfflineEntitlements&&t.onlineUrl){const e=t.onlineUrl,{origin:r}=new URL(e);if(!r.includes("https://extensions.standardnotes.org"))continue;const n=e.match(/\w{32,64}/);if(n&&n.length>0){const e=n[0],r=await this.itemManager.changeFeatureRepo(t,(t=>{t.offlineFeaturesUrl="https://api.standardnotes.com/v1/offline/features",t.offlineKey=e,t.migratedToOfflineEntitlements=!0}));await this.downloadOfflineFeatures(r)}}}initializeFromDisk(){this.roles=this.storageService.getValue(o.StorageKey.UserRoles,void 0,[]),this.features=this.storageService.getValue(o.StorageKey.UserFeatures,void 0,[]),this.enabledExperimentalFeatures=this.storageService.getValue(o.StorageKey.ExperimentalFeatures,void 0,[])}async updateRolesAndFetchFeatures(e,t){if((this.haveRolesChanged(t)||this.needsInitialFeaturesUpdate)&&(this.needsInitialFeaturesUpdate=!1,await this.setRoles(t),!this.hasOfflineRepo())){const t=await this.apiService.getUserFeatures(e);if(!t.error&&t.data&&!this.deinited){const e=t.data.features;await this.didDownloadFeatures(e)}}}async setRoles(e){this.roles=e,(0,d.arraysEqual)(this.roles,e)||this.notifyEvent(o.FeaturesEvent.UserRolesChanged),this.storageService.setValue(o.StorageKey.UserRoles,this.roles)}async didDownloadFeatures(e){e=e.filter((e=>!!he.FindNativeFeature(e.identifier))).map((e=>this.mapRemoteNativeFeatureToStaticFeature(e))),this.features=e,this.completedSuccessfulFeaturesRetrieval=!0,this.notifyEvent(o.FeaturesEvent.FeaturesUpdated),this.storageService.setValue(o.StorageKey.UserFeatures,this.features),await this.mapRemoteNativeFeaturesToItems(e)}isThirdPartyFeature(e){return!he.FindNativeFeature(e)}mapRemoteNativeFeatureToStaticFeature(e){const t=["expires_at","role_name","no_expire","permission_name"],r=he.FindNativeFeature(e.identifier);if(!r)throw Error("Attempting to map remote native to unfound static feature ".concat(e.identifier));const n=(0,d.Copy)(r);for(const r of t)n[r]=e[r];return n.expires_at&&(n.expires_at=(0,d.convertTimestampToMilliseconds)(n.expires_at)),n}getUserFeature(e){return this.features.find((t=>t.identifier===e))}hasOnlineSubscription(){const e=this.roles,t=[n.RoleName.CoreUser];return e.some((e=>!t.includes(e)))}hasPaidOnlineOrOfflineSubscription(){return this.hasOnlineSubscription()||this.hasOfflineRepo()}rolesBySorting(e){return Object.values(n.RoleName).filter((t=>e.includes(t)))}hasMinimumRole(e){const t=Object.values(n.RoleName),r=this.rolesBySorting(this.roles),i=t.indexOf((0,d.lastElement)(r));return t.indexOf(e)<=i}isFeatureDeprecated(e){var t;return!0===(null===(t=he.FindNativeFeature(e))||void 0===t?void 0:t.deprecated)}isFreeFeature(e){return[he.FeatureIdentifier.DarkTheme].includes(e)}getFeatureStatus(e){if(this.isFreeFeature(e))return o.FeatureStatus.Entitled;if(this.isFeatureDeprecated(e))return this.hasPaidOnlineOrOfflineSubscription()?o.FeatureStatus.Entitled:o.FeatureStatus.NoUserSubscription;if(null==he.FindNativeFeature(e)){const t=this.itemManager.getDisplayableComponents().find((t=>t.identifier===e));return t?t.isExpired?o.FeatureStatus.InCurrentPlanButExpired:o.FeatureStatus.Entitled:o.FeatureStatus.NoUserSubscription}if(!this.hasPaidOnlineOrOfflineSubscription())return o.FeatureStatus.NoUserSubscription;if(!(this.completedSuccessfulFeaturesRetrieval||this.features.length>0))return o.FeatureStatus.Entitled;const t=this.getUserFeature(e);return t?t.expires_at&&new Date(t.expires_at).getTime()<(new Date).getTime()?this.roles.includes(t.role_name)?o.FeatureStatus.InCurrentPlanButExpired:o.FeatureStatus.NotInCurrentPlan:o.FeatureStatus.Entitled:o.FeatureStatus.NotInCurrentPlan}haveRolesChanged(e){return e.some((e=>!this.roles.includes(e)))||this.roles.some((t=>!e.includes(t)))}componentContentForNativeFeatureDescription(e){const t={area:e.area,name:e.name,package_info:e,valid_until:new Date(e.expires_at||0)};return(0,i.FillItemContent)(t)}async mapRemoteNativeFeaturesToItems(e){const t=this.itemManager.getItems([n.ContentType.Component,n.ContentType.Theme]),r=[];let i=!1;for(const n of e)await this.mapNativeFeatureToItem(n,t,r)&&(i=!0);await this.itemManager.setItemsToBeDeleted(r),i&&this.syncService.sync()}async mapNativeFeatureToItem(e,t,r){if(!e.content_type)return!1;if(this.isExperimentalFeature(e.identifier)&&!this.isExperimentalFeatureEnabled(e.identifier))return!1;let i=!1;const o=new Date,a=!this.isFreeFeature(e.identifier)&&new Date(e.expires_at||0).getTime()<o.getTime(),s=t.find((t=>!!t.content.package_info&&t.content.package_info.identifier===e.identifier));if(e.deprecated&&!s)return!1;let c=s;if(s){const t=new Date(e.expires_at||0);JSON.stringify(e)!==JSON.stringify(s.package_info)||t.getTime()!==s.valid_until.getTime()?(c=await this.itemManager.changeComponent(s,(r=>{r.package_info=e,r.valid_until=t})),i=!0):c=s}else a&&e.content_type!==n.ContentType.Component||(c=await this.itemManager.createItem(e.content_type,this.componentContentForNativeFeatureDescription(e),!0),i=!0);return a&&c&&e.content_type!==n.ContentType.Component&&(r.push(c),i=!0),i}async downloadExternalFeature(e){let t=e;try{t=this.crypto.base64Decode(e)}catch(e){}try{const e=[...m,...S],{host:r}=new URL(t);if(e.includes(r))return this.performDownloadExternalFeature(t);if(await this.alertService.confirm(o.API_MESSAGE_UNTRUSTED_EXTENSIONS_WARNING,"Install extension from an untrusted source?","Proceed to install",o.ButtonType.Danger,"Cancel"))return this.performDownloadExternalFeature(t)}catch(e){this.alertService.alert(o.INVALID_EXTENSION_URL)}}async performDownloadExternalFeature(e){const t=await this.apiService.downloadFeatureUrl(e);if(t.error)return void await this.alertService.alert(o.API_MESSAGE_FAILED_DOWNLOADING_EXTENSION);let r=t.data;if((0,d.isString)(r))try{r=JSON.parse(r)}catch(e){}if(!r.content_type)return;if(![n.ContentType.Component,n.ContentType.Theme,n.ContentType.ActionsExtension,n.ContentType.ExtensionRepo].includes(r.content_type))return;if(he.FindNativeFeature(r.identifier))return void await this.alertService.alert(o.API_MESSAGE_FAILED_DOWNLOADING_EXTENSION);if(r.url)for(const e of he.GetFeatures())if(r.url.includes(e.identifier))return void await this.alertService.alert(o.API_MESSAGE_FAILED_DOWNLOADING_EXTENSION);const a=(0,i.FillItemContent)({area:r.area,name:r.name,package_info:r,valid_until:new Date(r.expires_at||0),hosted_url:r.url});return this.itemManager.createTemplateItem(r.content_type,a)}deinit(){super.deinit(),this.removeSignInObserver(),this.removeSignInObserver=void 0,this.removeWebSocketsServiceObserver(),this.removeWebSocketsServiceObserver=void 0,this.removefeatureReposObserver(),this.removefeatureReposObserver=void 0,this.roles=void 0,this.storageService=void 0,this.apiService=void 0,this.itemManager=void 0,this.webSocketsService=void 0,this.settingsService=void 0,this.userService=void 0,this.syncService=void 0,this.alertService=void 0,this.sessionManager=void 0,this.crypto=void 0,this.deinited=!0}getDiagnostics(){return Promise.resolve({features:{roles:this.roles,features:this.features,enabledExperimentalFeatures:this.enabledExperimentalFeatures,needsInitialFeaturesUpdate:this.needsInitialFeaturesUpdate,completedSuccessfulFeaturesRetrieval:this.completedSuccessfulFeaturesRetrieval}})}}function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Le extends o.AbstractService{constructor(e,t,r,i,o,a){super(a),Fe(this,"itemManager",void 0),Fe(this,"storageService",void 0),Fe(this,"apiService",void 0),Fe(this,"protocolService",void 0),Fe(this,"deviceInterface",void 0),Fe(this,"internalEventBus",void 0),Fe(this,"removeChangeObserver",void 0),Fe(this,"historyStaging",{}),Fe(this,"history",{}),Fe(this,"itemRevisionThreshold",20),this.itemManager=e,this.storageService=t,this.apiService=r,this.protocolService=i,this.deviceInterface=o,this.internalEventBus=a,this.removeChangeObserver=this.itemManager.addObserver(n.ContentType.Note,(e=>{let{changed:t,inserted:r}=e;this.recordNewHistoryForItems(t.concat(r))}))}deinit(){this.itemManager=void 0,this.storageService=void 0,this.history=void 0,this.removeChangeObserver&&(this.removeChangeObserver(),this.removeChangeObserver=void 0),super.deinit()}recordNewHistoryForItems(e){for(const t of e){const e=this.history[t.uuid]||[],r=i.historyMapFunctions.getNewestRevision(e),n=new i.DecryptedPayload(t.payload),o=i.CreateHistoryEntryForPayload(n,r);if(o.isDiscardable())continue;const a=this.historyStaging[t.uuid];this.historyStaging[t.uuid]=o,a&&(a.isSameAsEntry(o)||r&&a.isSameAsEntry(r)||(e.unshift(a),this.history[t.uuid]=e,this.optimizeHistoryForItem(t.uuid)))}}sessionHistoryForItem(e){return this.history[e.uuid]||[]}getHistoryMapCopy(){const e=Object.assign({},this.history);for(const[t,r]of Object.entries(e))e[t]=r.slice();return Object.freeze(e)}async remoteHistoryForItem(e){const t=await this.apiService.getItemRevisions(e.uuid);if(!t.error&&!(0,d.isNullOrUndefined)(t.data))return t.data}async fetchRemoteRevision(e,t){const r=await this.apiService.getRevision(t,e.uuid);if(r.error||(0,d.isNullOrUndefined)(r.data))return;const n=r.data,o=new i.EncryptedPayload(Be(Be(Be({},(0,i.PayloadTimestampDefaults)()),n),{},{updated_at:new Date(n.updated_at),created_at:new Date(n.created_at),waitingForKey:!1,errorDecrypting:!1})),a=this.protocolService.getEmbeddedPayloadAuthenticatedData(o),s=null==a?void 0:a.u,c=o.copy({uuid:s||n.item_uuid});if(!i.isRemotePayloadAllowed(c))return void console.error("Remote payload is disallowed",c);const l=new i.EncryptedPayload(c),u=await this.protocolService.decryptSplitSingle({usesItemsKeyWithKeyLookup:{items:[l]}});return(0,i.isErrorDecryptingPayload)(u)?void 0:new i.HistoryEntry(u)}async deleteRemoteRevision(e,t){return await this.apiService.deleteRevision(e.uuid,t)}optimizeHistoryForItem(e){const t=this.history[e]||[];if(t.length<=this.itemRevisionThreshold)return;const r=e=>e.deltaSize()>25,n=[],i=(e,i,o)=>{if(o){if(n.unshift(e),r(e)&&-1===e.operationVector()){const e=t[i+1];e&&n.unshift(e)}}else(0,d.removeFromArray)(n,e)};for(let e=t.length-1;e>=0;e--){const n=t[e];i(n,e,0===e||e===t.length-1||r(n))}const o=t.filter((e=>n.includes(e)));this.history[e]=o}}class Ke{static isApplicableToCurrentData(e){const t=e.getItems(n.ContentType.Tag);for(const e of t)if(e.title.includes(i.TagFolderDelimitter)&&!e.parentId)return!0;return!1}static async run(e){const t=e.getItems(n.ContentType.Tag),r=(0,d.sortByKey)(t,"title");for(const t of r){const r=t.title.split(i.TagFolderDelimitter),n=1===r.length,o=!!t.parentId,a=r.some((e=>0===e.length));if(o||n||a)continue;const s=(0,d.withoutLastElement)(r),c=(0,d.lastElement)(r);if(!c)return;const l=await e.findOrCreateTagParentChain(s);await e.changeItem(t,(e=>{e.title=c,l&&e.makeChildOf(l)}))}}}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){We(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ze extends o.AbstractService{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{supportsFileNavigation:!1},r=arguments.length>2?arguments[2]:void 0;super(r),We(this,"payloadManager",void 0),We(this,"options",void 0),We(this,"internalEventBus",void 0),We(this,"unsubChangeObserver",void 0),We(this,"observers",[]),We(this,"collection",void 0),We(this,"systemSmartViews",void 0),We(this,"tagItemsIndex",void 0),We(this,"navigationDisplayController",void 0),We(this,"tagDisplayController",void 0),We(this,"itemsKeyDisplayController",void 0),We(this,"componentDisplayController",void 0),We(this,"themeDisplayController",void 0),We(this,"fileDisplayController",void 0),We(this,"smartViewDisplayController",void 0),this.payloadManager=e,this.options=t,this.internalEventBus=r,this.payloadManager=e,this.systemSmartViews=this.rebuildSystemSmartViews({}),this.createCollection(),this.unsubChangeObserver=this.payloadManager.addObserver(n.ContentType.Any,this.setPayloads.bind(this))}rebuildSystemSmartViews(e){return this.systemSmartViews=i.BuildSmartViews(e,this.options),this.systemSmartViews}createCollection(){var e;this.collection=new i.ItemCollection,this.navigationDisplayController=new i.ItemDisplayController(this.collection,[n.ContentType.Note,n.ContentType.File],{sortBy:"created_at",sortDirection:"dsc",hiddenContentTypes:this.options.supportsFileNavigation?[]:[n.ContentType.File]}),this.tagDisplayController=new i.ItemDisplayController(this.collection,[n.ContentType.Tag],{sortBy:"title",sortDirection:"asc"}),this.itemsKeyDisplayController=new i.ItemDisplayController(this.collection,[n.ContentType.ItemsKey],{sortBy:"created_at",sortDirection:"asc"}),this.componentDisplayController=new i.ItemDisplayController(this.collection,[n.ContentType.Component],{sortBy:"created_at",sortDirection:"asc"}),this.themeDisplayController=new i.ItemDisplayController(this.collection,[n.ContentType.Theme],{sortBy:"title",sortDirection:"asc"}),this.smartViewDisplayController=new i.ItemDisplayController(this.collection,[n.ContentType.SmartView],{sortBy:"title",sortDirection:"asc"}),this.fileDisplayController=new i.ItemDisplayController(this.collection,[n.ContentType.File],{sortBy:"title",sortDirection:"asc"}),this.tagItemsIndex=new i.TagItemsIndex(this.collection,null===(e=this.tagItemsIndex)||void 0===e?void 0:e.observers)}get allDisplayControllers(){return[this.navigationDisplayController,this.tagDisplayController,this.itemsKeyDisplayController,this.componentDisplayController,this.themeDisplayController,this.smartViewDisplayController,this.fileDisplayController]}get invalidItems(){return this.collection.invalidElements()}createItemFromPayload(e){return i.CreateDecryptedItemFromPayload(e)}createPayloadFromObject(e){return new i.DecryptedPayload(e)}setPrimaryItemDisplayOptions(e){var t,r;const n={};e.views&&e.views.find((e=>e.uuid===i.SystemViewId.AllNotes))&&(void 0===e.includeArchived&&(n.includeArchived=!1),void 0===e.includeTrashed&&(n.includeTrashed=!1)),e.views&&e.views.find((e=>e.uuid===i.SystemViewId.ArchivedNotes))&&void 0===e.includeTrashed&&(n.includeTrashed=!1),e.views&&e.views.find((e=>e.uuid===i.SystemViewId.TrashedNotes))&&(e.includeArchived||(n.includeArchived=!0)),this.rebuildSystemSmartViews(Ve(Ve({},e),n));const o=null===(t=e.tags)||void 0===t?void 0:t.map((e=>this.collection.find(e.uuid))).filter((e=>null!=e)),a=null===(r=e.views)||void 0===r?void 0:r.map((e=>i.isSystemView(e)?this.systemSmartViews.find((t=>t.uuid===e.uuid)):this.collection.find(e.uuid))).filter((e=>null!=e)),s=Ve(Ve(Ve({},e),n),{tags:o,views:a});s.sortBy===i.CollectionSort.Title&&(s.sortDirection="asc"===s.sortDirection?"dsc":"asc"),this.navigationDisplayController.setDisplayOptions(Ve({customFilter:i.computeUnifiedFilterForDisplayOptions(s,this.collection)},s))}getDisplayableNotes(){return(0,d.assert)(2===this.navigationDisplayController.contentTypes.length),this.options.supportsFileNavigation?this.navigationDisplayController.items().filter(i.isNote):this.navigationDisplayController.items()}getDisplayableFiles(){return this.fileDisplayController.items()}getDisplayableNotesAndFiles(){return(0,d.assert)(this.options.supportsFileNavigation),this.navigationDisplayController.items()}getDisplayableTags(){return this.tagDisplayController.items()}getDisplayableItemsKeys(){return this.itemsKeyDisplayController.items()}getDisplayableComponents(){return[...this.componentDisplayController.items(),...this.themeDisplayController.items()]}deinit(){this.unsubChangeObserver(),this.options=void 0,this.unsubChangeObserver=void 0,this.payloadManager=void 0,this.collection=void 0,this.tagItemsIndex=void 0,this.tagDisplayController=void 0,this.navigationDisplayController=void 0,this.itemsKeyDisplayController=void 0,this.componentDisplayController=void 0,this.themeDisplayController=void 0,this.fileDisplayController=void 0,this.smartViewDisplayController=void 0}resetState(){this.createCollection()}findItem(e){return this.collection.findDecrypted(e)||this.findSystemSmartView(e)}findAnyItem(e){return this.collection.find(e)||this.findSystemSmartView(e)}findAnyItems(e){return this.collection.findAll(e)}findSystemSmartView(e){return this.systemSmartViews.find((t=>t.uuid===e))}findSureItem(e){return this.findItem(e)}findItems(e){return this.collection.findAllDecrypted(e)}findItemsIncludingBlanks(e){return this.collection.findAllDecryptedWithBlanks(e)}get items(){return this.collection.nondeletedElements().filter(i.isDecryptedItem)}allTrackedItems(){return this.collection.all()}hasTagsNeedingFoldersMigration(){return Ke.isApplicableToCurrentData(this)}addNoteCountChangeObserver(e){return this.tagItemsIndex.addCountChangeObserver(e)}allCountableNotesCount(){return this.tagItemsIndex.allCountableItemsCount()}countableNotesForTag(e){if(e instanceof i.SmartView){if(e.uuid===i.SystemViewId.AllNotes)return this.tagItemsIndex.allCountableItemsCount();throw Error("countableItemsForTag is not meant to be used for smart views.")}return this.tagItemsIndex.countableItemsForTag(e)}getNoteCount(){return this.noteCount}addObserver(e,t){Array.isArray(e)||(e=[e]);const r={contentType:e,callback:t};this.observers.push(r);const n=this.observers;return()=>{(0,d.removeFromArray)(n,r)}}itemsReferencingItem(e,t){const r=this.collection.uuidsThatReferenceUuid(e.uuid);let n=this.findItems(r);return t&&(n=n.filter((e=>(null==e?void 0:e.content_type)===t))),n}referencesForItem(e,t){const r=this.findSureItem(e.uuid).references.map((e=>e.uuid));let n=this.findItems(r);return t&&(n=n.filter((e=>(null==e?void 0:e.content_type)===t))),n}setPayloads(e){const{changed:t,inserted:r,discarded:n,ignored:o,unerrored:a,source:s,sourceKey:c}=e,l=e=>i.CreateItemFromPayload(e),u=new Set,d={changed:t.map((e=>(u.add(e.content_type),l(e)))),inserted:r.map((e=>(u.add(e.content_type),l(e)))),discarded:n.map((e=>(u.add(e.content_type),new i.DeletedItem(e)))),ignored:o.map((e=>(u.add(e.content_type),new i.EncryptedItem(e)))),unerrored:a.map((e=>(u.add(e.content_type),i.CreateDecryptedItemFromPayload(e))))};this.collection.onChange(d),this.tagItemsIndex.onChange(d);const p=Array.from(u.values());for(const e of this.allDisplayControllers)e.contentTypes.some((e=>p.includes(e)))&&e.onCollectionChange(d);this.notifyObserversByUiAdjustingDelta(d,s,c)}notifyObserversByUiAdjustingDelta(e,t,r){const n=[],o=[],a=[],s=[],c=[];for(const t of e.changed)i.isDeletedItem(t)?a.push(t):i.isDecryptedItem(t)?n.push(t):c.push(t);for(const t of e.inserted)i.isDeletedItem(t)?s.push(t):i.isDecryptedItem(t)&&o.push(t);const l=[...e.discarded,...a,...s,...c];this.notifyObservers(n,o,l,e.ignored,e.unerrored,t,r)}notifyObservers(e,t,r,i,o,a,s){const c=(e,t)=>e.filter((e=>t.includes(n.ContentType.Any)||t.includes(e.content_type))),l=this.observers.slice();for(const n of l){const l=c(e,n.contentType),u=c(t,n.contentType),d=c(r,n.contentType),p=c(i,n.contentType),h=c(o,n.contentType);0===l.length&&0===u.length&&0===d.length&&0===p.length&&0===h.length||n.callback({changed:l,inserted:u,removed:d,ignored:p,unerrored:h,source:a,sourceKey:s})}}async changeItem(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MutationType.UpdateUserTimestamps,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.PayloadEmitSource.LocalChanged,o=arguments.length>4?arguments[4]:void 0;return(await this.changeItems([e],t,r,n,o))[0]}async changeItems(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MutationType.UpdateUserTimestamps,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.PayloadEmitSource.LocalChanged,o=arguments.length>4?arguments[4]:void 0;const a=this.findItemsIncludingBlanks((0,d.Uuids)(e)),s=[];for(const e of a){if(!e)throw Error("Attempting to change non-existant item");const n=i.CreateDecryptedMutatorForItem(e,r);t&&t(n);const o=n.getResult();s.push(o)}return await this.payloadManager.emitPayloads(s,n,o),this.findItems(s.map((e=>e.uuid)))}async runTransactionalMutations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.PayloadEmitSource.LocalChanged,r=arguments.length>2?arguments[2]:void 0;const n=[];for(const t of e){const e=this.findItem(t.itemUuid);if(!e)continue;const r=i.CreateDecryptedMutatorForItem(e,t.mutationType||i.MutationType.UpdateUserTimestamps);t.mutate(r);const o=r.getResult();n.push(o)}return await this.payloadManager.emitPayloads(n,t,r),this.findItems(n.map((e=>e.uuid)))}async runTransactionalMutation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.PayloadEmitSource.LocalChanged,r=arguments.length>2?arguments[2]:void 0;const n=this.findSureItem(e.itemUuid),o=i.CreateDecryptedMutatorForItem(n,e.mutationType||i.MutationType.UpdateUserTimestamps);e.mutate(o);const a=o.getResult();return await this.payloadManager.emitPayloads([a],t,r),this.findItem(a.uuid)}async changeNote(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MutationType.UpdateUserTimestamps,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.PayloadEmitSource.LocalChanged,o=arguments.length>4?arguments[4]:void 0;const a=this.findItem(e.uuid);if(!a)throw Error("Attempting to change non-existant note");const s=new i.NoteMutator(a,r);return this.applyTransform(s,t,n,o)}async changeTag(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MutationType.UpdateUserTimestamps,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.PayloadEmitSource.LocalChanged,o=arguments.length>4?arguments[4]:void 0;const a=this.findItem(e.uuid);if(!a)throw Error("Attempting to change non-existant tag");const s=new i.TagMutator(a,r);return await this.applyTransform(s,t,n,o),this.findSureItem(e.uuid)}async changeComponent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MutationType.UpdateUserTimestamps,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.PayloadEmitSource.LocalChanged,o=arguments.length>4?arguments[4]:void 0;const a=this.findItem(e.uuid);if(!a)throw Error("Attempting to change non-existant component");const s=new i.ComponentMutator(a,r);return await this.applyTransform(s,t,n,o),this.findSureItem(e.uuid)}async changeFeatureRepo(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MutationType.UpdateUserTimestamps,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.PayloadEmitSource.LocalChanged,o=arguments.length>4?arguments[4]:void 0;const a=this.findItem(e.uuid);if(!a)throw Error("Attempting to change non-existant repo");const s=new i.FeatureRepoMutator(a,r);return await this.applyTransform(s,t,n,o),this.findSureItem(e.uuid)}async changeActionsExtension(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MutationType.UpdateUserTimestamps,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.PayloadEmitSource.LocalChanged,o=arguments.length>4?arguments[4]:void 0;const a=this.findItem(e.uuid);if(!a)throw Error("Attempting to change non-existant extension");const s=new i.ActionsExtensionMutator(a,r);return await this.applyTransform(s,t,n,o),this.findSureItem(e.uuid)}async changeItemsKey(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MutationType.UpdateUserTimestamps,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.PayloadEmitSource.LocalChanged,o=arguments.length>4?arguments[4]:void 0;const a=this.findItem(e.uuid);if(!a)throw Error("Attempting to change non-existant itemsKey");const s=new j.ItemsKeyMutator(a,r);return await this.applyTransform(s,t,n,o),this.findSureItem(e.uuid)}async applyTransform(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.PayloadEmitSource.LocalChanged,n=arguments.length>3?arguments[3]:void 0;t(e);const o=e.getResult();return this.payloadManager.emitPayload(o,r,n)}async setItemDirty(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(await this.setItemsDirty([e],t))[0]}async setItemsDirty(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.changeItems(e,void 0,t?i.MutationType.UpdateUserTimestamps:i.MutationType.NoUpdateUserTimestamps)}getDirtyItems(){return this.collection.dirtyElements().filter(i.isDecryptedOrDeletedItem)}async duplicateItem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;const n=this.findSureItem(e.uuid).payload.copy(),o=i.PayloadsByDuplicating({payload:n,baseCollection:this.payloadManager.getMasterCollection(),isConflict:t,additionalContent:r});return await this.payloadManager.emitPayloads(o,i.PayloadEmitSource.LocalChanged),this.findSureItem(o[0].uuid)}async createItem(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=new i.DecryptedPayload(Ve({uuid:d.UuidGenerator.GenerateUuid(),content_type:e,content:i.FillItemContent(t),dirty:r},i.PayloadTimestampDefaults()));return await this.payloadManager.emitPayload(n,i.PayloadEmitSource.LocalInserted),this.findSureItem(n.uuid)}createTemplateItem(e,t,r){const n=new i.DecryptedPayload(Ve(Ve({uuid:d.UuidGenerator.GenerateUuid(),content_type:e,content:i.FillItemContent(t||{})},i.PayloadTimestampDefaults()),r));return i.CreateDecryptedItemFromPayload(n)}isTemplateItem(e){return!this.findItem(e.uuid)}async insertItem(e){return this.emitItemFromPayload(e.payload,i.PayloadEmitSource.LocalChanged)}async insertItems(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.PayloadEmitSource.LocalInserted;return this.emitItemsFromPayloads(e.map((e=>e.payload)),t)}async emitItemFromPayload(e,t){return await this.payloadManager.emitPayload(e,t),this.findSureItem(e.uuid)}async emitItemsFromPayloads(e,t){await this.payloadManager.emitPayloads(e,t);const r=(0,d.Uuids)(e);return this.findItems(r)}async setItemToBeDeleted(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.PayloadEmitSource.LocalChanged;const r=this.collection.uuidsThatReferenceUuid(e.uuid),n=this.findAnyItem(e.uuid);if(!n)return;const o=new i.DeleteItemMutator(n,i.MutationType.UpdateUserTimestamps).getDeletedResult();await this.payloadManager.emitPayload(o,t);for(const e of r){const t=this.findItem(e);t&&await this.changeItem(t,(e=>{e.removeItemAsRelationship(n)}))}}async setItemsToBeDeleted(e){await Promise.all(e.map((e=>this.setItemToBeDeleted(e))))}getItems(e){return this.collection.allDecrypted(e)}getAnyItems(e){return this.collection.all(e)}itemsMatchingPredicate(e,t){return this.itemsMatchingPredicates(e,[t])}itemsMatchingPredicates(e,t){const r=this.getItems(e);return this.subItemsMatchingPredicates(r,t)}subItemsMatchingPredicates(e,t){return e.filter((e=>{for(const r of t)if(!e.satisfiesPredicate(r))return!1;return!0}))}getRootTags(){return this.getDisplayableTags().filter((e=>void 0===e.parentId))}findTagByTitle(e){const t=e.toLowerCase();return this.getDisplayableTags().find((e=>{var r;return(null===(r=e.title)||void 0===r?void 0:r.toLowerCase())===t}))}findTagByTitleAndParent(e,t){const r=e.toLowerCase();return(t?this.getTagChildren(t):this.getRootTags()).find((e=>{var t;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase())===r}))}searchTags(e,t){return(0,d.naturalSort)(this.getDisplayableTags().filter((r=>{const n=this.getTagLongTitle(r).toLowerCase().includes(e.toLowerCase()),i=!!t&&this.itemsReferencingItem(t).some((e=>(null==e?void 0:e.uuid)===r.uuid));return n&&!i})),"title")}getTagParent(e){const t=this.findItem(e.uuid);if(!t)return;const r=t.parentId;return r?this.findItem(r):void 0}getTagPrefixTitle(e){const t=this.getTagParentChain(e);if(0===t.length)return;const r=t.map((e=>e.title)).join("/");return"".concat(r,"/")}getTagLongTitle(e){return[...this.getTagParentChain(e),e].map((e=>e.title)).join("/")}getTagParentChain(e){const t=this.findItem(e.uuid);if(!t)return[];let r=t.parentId;const n=[];for(;r;){const e=this.findItem(r);if(!e)return n;n.unshift(e),r=e.parentId}return n}async findOrCreateTagParentChain(e){let t;for(const r of e)t=await this.findOrCreateTagByTitle(r,t);if(!t)throw new Error("Invalid tag hierarchy");return t}getTagChildren(e){const t=this.findItem(e.uuid);return t?this.collection.elementsReferencingElement(t,n.ContentType.Tag).filter((t=>t.parentId===e.uuid)):[]}isTagAncestor(e,t){const r=this.findItem(t.uuid);if(!r)return!1;let n=r.parentId;for(;n;){if(n===e.uuid)return!0;const t=this.findItem(n);if(!t)return!1;n=t.parentId}return!1}isValidTagParent(e,t){return e.uuid!==t.uuid&&!this.isTagAncestor(t,e)}setTagParent(e,t){if(e.uuid===t.uuid)throw new Error("Can not set a tag parent of itself");if(this.isTagAncestor(t,e))throw new Error("Can not set a tag ancestor of itself");return this.changeTag(t,(t=>{t.makeChildOf(e)}))}unsetTagParent(e){return this.getTagParent(e)?this.changeTag(e,(e=>{e.unsetParent()})):Promise.resolve(e)}async associateFileWithNote(e,t){return this.changeItem(e,(e=>{e.addNote(t)}))}async disassociateFileWithNote(e,t){return this.changeItem(e,(e=>{e.removeNote(t)}))}async addTagToNote(e,t,r){let n=[t];return r&&(n=[...this.getTagParentChain(t),t]),Promise.all(n.map((t=>this.changeTag(t,(t=>{t.addNote(e)})))))}async addTagToFile(e,t,r){let n=[t];return r&&(n=[...this.getTagParentChain(t),t]),Promise.all(n.map((t=>this.changeTag(t,(t=>{t.addFile(e)})))))}async linkNoteToNote(e,t){return this.changeItem(e,(e=>{e.addNote(t)}))}async linkFileToFile(e,t){return this.changeItem(e,(e=>{e.addFile(t)}))}async unlinkItems(e,t){const r=this.relationshipDirectionBetweenItems(e,t);if(r===o.ItemRelationshipDirection.NoRelationship)throw new Error("Trying to unlink already unlinked items");const n=r===o.ItemRelationshipDirection.AReferencesB?e:t,i=n===e?t:e;return this.changeItem(n,(e=>{e.removeItemAsRelationship(i)}))}getSortedTagsForItem(e){return(0,d.naturalSort)(this.itemsReferencingItem(e).filter((e=>(null==e?void 0:e.content_type)===n.ContentType.Tag)),"title")}async createTag(e,t){const r=await this.createItem(n.ContentType.Tag,i.FillItemContent({title:e}),!0);if(t){const e=this.findItem(t.uuid);if(!e)throw new Error("Invalid parent tag");return this.changeTag(r,(t=>{t.makeChildOf(e)}))}return r}async createSmartView(e,t){return this.createItem(n.ContentType.SmartView,i.FillItemContent({title:e,predicate:t.toJson()}),!0)}async createSmartViewFromDSL(e){let t=null;try{t=JSON.parse(e.substring(1,e.length))}catch(e){throw Error("Invalid smart view syntax")}const r=t[0],n=i.predicateFromDSLString(e);return this.createSmartView(r,n)}async createTagOrSmartView(e){return this.isSmartViewTitle(e)?this.createSmartViewFromDSL(e):this.createTag(e)}isSmartViewTitle(e){return e.startsWith(i.SMART_TAG_DSL_PREFIX)}async findOrCreateTagByTitle(e,t){return this.findTagByTitleAndParent(e,t)||this.createTag(e,t)}notesMatchingSmartView(e){const t={views:[e]};return i.itemsMatchingOptions(t,this.collection.allDecrypted(n.ContentType.Note),this.collection)}get allNotesSmartView(){return this.systemSmartViews.find((e=>e.uuid===i.SystemViewId.AllNotes))}get archivedSmartView(){return this.systemSmartViews.find((e=>e.uuid===i.SystemViewId.ArchivedNotes))}get trashSmartView(){return this.systemSmartViews.find((e=>e.uuid===i.SystemViewId.TrashedNotes))}get untaggedNotesSmartView(){return this.systemSmartViews.find((e=>e.uuid===i.SystemViewId.UntaggedNotes))}get trashedItems(){return this.notesMatchingSmartView(this.trashSmartView)}async emptyTrash(){const e=this.trashedItems;await this.setItemsToBeDeleted(e)}getSmartViews(){const e=this.smartViewDisplayController.items();return this.systemSmartViews.concat(e)}get noteCount(){return this.collection.all(n.ContentType.Note).length}async removeAllItemsFromMemory(){const e=(0,d.Uuids)(this.items),t=[];for(const r of e){const e=new i.DeleteItemMutator(this.findSureItem(r),i.MutationType.NonDirtying);t.push(e.getDeletedResult())}await this.payloadManager.emitPayloads(t,i.PayloadEmitSource.LocalChanged),this.resetState(),this.payloadManager.resetState()}removeItemLocally(e){this.collection.discard([e]),this.payloadManager.removePayloadLocally(e.payload);const t=i.CreateItemDelta({discarded:[e]});for(const r of this.allDisplayControllers)r.contentTypes.some((t=>t===e.content_type))&&r.onCollectionChange(t)}renameFile(e,t){return this.changeItem(e,(e=>{e.name=t}))}async setLastSyncBeganForItems(e,t,r){const n=(0,d.Uuids)(e),o=this.collection.findAll(n).filter(i.isDecryptedOrDeletedItem),a=[];for(const e of o){const n=new i.ItemMutator(e,i.MutationType.NonDirtying);n.setBeginSync(t,r);const o=n.getResult();a.push(o)}return await this.payloadManager.emitPayloads(a,i.PayloadEmitSource.PreSyncSave),this.findAnyItems(n)}relationshipDirectionBetweenItems(e,t){const r=!!e.references.find((e=>e.uuid===t.uuid)),n=!!t.references.find((t=>t.uuid===e.uuid));return r?o.ItemRelationshipDirection.AReferencesB:n?o.ItemRelationshipDirection.BReferencesA:o.ItemRelationshipDirection.NoRelationship}getDiagnostics(){return Promise.resolve({items:{allIds:(0,d.Uuids)(this.collection.all())}})}}function He(e,t){return(0,n.leftVersionGreaterThanOrEqualToRight)(e.version,t.version)}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class qe{constructor(e,t,r,n,i,o){Ge(this,"queueItem",void 0),Ge(this,"itemManager",void 0),Ge(this,"protocolService",void 0),Ge(this,"challengeService",void 0),Ge(this,"clientParams",void 0),Ge(this,"serverParams",void 0),this.queueItem=e,this.itemManager=t,this.protocolService=r,this.challengeService=n,this.clientParams=i,this.serverParams=o}async run(){let e=!1;if(this.serverParams&&this.clientParams&&!this.clientParams.compare(this.serverParams)&&this.queueItem.keyParams.compare(this.serverParams)&&He(this.serverParams,this.clientParams)){const t=(0,d.dateSorted)(this.itemManager.getItems(n.ContentType.ItemsKey),"created_at",!1)[0];e=!t||this.queueItem.encryptedKey.created_at>t.created_at}const t=await(0,o.DecryptItemsKeyByPromptingUser)(this.queueItem.encryptedKey,this.protocolService,this.challengeService,this.queueItem.keyParams);return"aborted"===t?{aborted:!0}:"failed"===t?{aborted:!1}:{rootKey:t.rootKey,replaceLocalRootKeyWithResult:e,decryptedItemsKey:t.decryptedKey}}}function $e(e){return"rootKey"in e}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.KeysRecovered="KeysRecovered"}(De||(De={}));class Ye extends o.AbstractService{constructor(e,t,r,o,a,s,c,l,u,d){super(d),Xe(this,"itemManager",void 0),Xe(this,"payloadManager",void 0),Xe(this,"apiService",void 0),Xe(this,"protocolService",void 0),Xe(this,"challengeService",void 0),Xe(this,"alertService",void 0),Xe(this,"storageService",void 0),Xe(this,"syncService",void 0),Xe(this,"userService",void 0),Xe(this,"internalEventBus",void 0),Xe(this,"removeItemObserver",void 0),Xe(this,"decryptionQueue",[]),Xe(this,"isProcessingQueue",!1),this.itemManager=e,this.payloadManager=t,this.apiService=r,this.protocolService=o,this.challengeService=a,this.alertService=s,this.storageService=c,this.syncService=l,this.userService=u,this.internalEventBus=d,this.removeItemObserver=this.payloadManager.addObserver([n.ContentType.ItemsKey],(e=>{let{changed:t,inserted:r,ignored:n,source:o}=e;if(o===i.PayloadEmitSource.LocalChanged)return;const a=t.concat(r).filter(i.isErrorDecryptingPayload);a.length>0&&this.handleUndecryptableItemsKeys(a),n.length>0&&this.handleIgnoredItemsKeys(n)}))}deinit(){this.itemManager=void 0,this.payloadManager=void 0,this.apiService=void 0,this.protocolService=void 0,this.challengeService=void 0,this.alertService=void 0,this.storageService=void 0,this.syncService=void 0,this.userService=void 0,this.removeItemObserver(),this.removeItemObserver=void 0,super.deinit()}async handleApplicationStage(e){super.handleApplicationStage(e),e===o.ApplicationStage.LoadedDatabase_12&&this.processPersistedUndecryptables()}async handleIgnoredItemsKeys(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.saveToUndecryptables(e),this.addKeysToQueue(e),await this.beginKeyRecovery()}async handleUndecryptableItemsKeys(e){this.addKeysToQueue(e),await this.beginKeyRecovery()}presentKeyRecoveryWizard(){const e=this.itemManager.invalidItems.filter((e=>e.content_type===n.ContentType.ItemsKey)).map((e=>e.payload));this.handleIgnoredItemsKeys(e,!1)}canAttemptDecryptionOfItem(e){const t=e.payload.items_key_id;return t?!!this.payloadManager.findOne(t)||new p.ClientDisplayableError("Unable to find key ".concat(t," for this item. You may try signing out and back in; if that doesn't help, check your backup files for a key with this ID and import it.")):new p.ClientDisplayableError("This item cannot be recovered.")}async processPersistedUndecryptables(){const e=this.getUndecryptables(),t=Object.values(e);if(0===t.length)return;const r=t.map((e=>new i.EncryptedPayload(e)));return this.handleIgnoredItemsKeys(r,!1)}getUndecryptables(){return this.storageService.getValue(o.StorageKey.KeyRecoveryUndecryptableItems,o.StorageValueModes.Default,{})}persistUndecryptables(e){this.storageService.setValue(o.StorageKey.KeyRecoveryUndecryptableItems,e)}saveToUndecryptables(e){const t=this.getUndecryptables();for(const r of e)t[r.uuid]=r.ejected();this.persistUndecryptables(t)}removeFromUndecryptables(e){const t=this.getUndecryptables();for(const r of e)delete t[r];this.persistUndecryptables(t)}getClientKeyParams(){return this.protocolService.getAccountKeyParams()}async performServerSignIn(){const e=new o.Challenge([new o.ChallengePrompt(o.ChallengeValidation.None,void 0,void 0,!0)],o.ChallengeReason.Custom,!0,j.KeyRecoveryStrings.KeyRecoveryLoginFlowReason),t=await this.challengeService.promptForChallengeResponse(e);if(!t)return;this.challengeService.completeChallenge(e);const r=t.values[0].value,n=this.getClientKeyParams(),i=await this.getLatestKeyParamsFromServer(n.identifier);if(!i||!He(i,n))return;const a=await this.protocolService.computeRootKey(r,i);return(await this.userService.correctiveSignIn(a)).error?(await this.alertService.alert(j.KeyRecoveryStrings.KeyRecoveryLoginFlowInvalidPassword),this.performServerSignIn()):(this.alertService.alert(j.KeyRecoveryStrings.KeyRecoveryRootKeyReplaced),a)}async getWrappingKeyIfApplicable(){if(!this.protocolService.hasPasscode())return;const{wrappingKey:e,canceled:t}=await this.challengeService.getWrappingKeyIfApplicable();return t?(await this.alertService.alert(j.KeyRecoveryStrings.KeyRecoveryPasscodeRequiredText,j.KeyRecoveryStrings.KeyRecoveryPasscodeRequiredTitle),this.getWrappingKeyIfApplicable()):e}addKeysToQueue(e){for(const t of e){const e=this.protocolService.getKeyEmbeddedKeyParams(t);if(!e)continue;const r={encryptedKey:t,keyParams:e};this.decryptionQueue.push(r)}}readdQueueItem(e){this.decryptionQueue.unshift(e)}async getLatestKeyParamsFromServer(e){const t=await this.apiService.getAccountKeyParams({email:e});return!t.error&&t.data?(0,j.KeyParamsFromApiResponse)(t):void 0}async beginKeyRecovery(){if(this.isProcessingQueue)return;this.isProcessingQueue=!0;const e=this.getClientKeyParams();let t;if(e&&(t=await this.getLatestKeyParamsFromServer(e.identifier)),null!=this.protocolService){if(!this.protocolService.hasAccount()&&!this.protocolService.hasPasscode()){const e=await this.performServerSignIn();if(e){const r=!0;await this.handleDecryptionOfAllKeysMatchingCorrectRootKey(e,r,t)}}await this.processQueue(t),t&&await this.potentiallyPerformFallbackSignInToUpdateOutdatedLocalRootKey(t),this.syncService.isOutOfSync()&&this.syncService.sync({checkIntegrity:!0})}}async potentiallyPerformFallbackSignInToUpdateOutdatedLocalRootKey(e){const t=this.getClientKeyParams();t&&!e.compare(t)&&He(e,t)&&await this.performServerSignIn()}async processQueue(e){let t=this.decryptionQueue[0];for(;t;){const r=await this.processQueueItem(t,e);if((0,d.removeFromArray)(this.decryptionQueue,t),!$e(r)&&r.aborted)return void(this.isProcessingQueue=!1);t=this.decryptionQueue[0]}this.isProcessingQueue=!1}async processQueueItem(e,t){const r=this.getClientKeyParams(),n=new qe(e,this.itemManager,this.protocolService,this.challengeService,r,t),i=await n.run();return $e(i)?(await this.handleDecryptionOfAllKeysMatchingCorrectRootKey(i.rootKey,i.replaceLocalRootKeyWithResult,t),i):(i.aborted||(await this.alertService.alert(j.KeyRecoveryStrings.KeyRecoveryUnableToRecover),this.readdQueueItem(e)),i)}async handleDecryptionOfAllKeysMatchingCorrectRootKey(e,t,r){if(t){const t=await this.getWrappingKeyIfApplicable();await this.protocolService.setRootKey(e,t)}const n=this.getClientKeyParams(),o=n&&r&&n.compare(r),a=this.removeElementsFromQueueForMatchingKeyParams(e.keyParams).map((e=>o&&!r.compare(e.keyParams)?e.encryptedKey.copy({dirty:!0,dirtyIndex:(0,i.getIncrementedDirtyIndex)()}):e.encryptedKey)),s=(await this.protocolService.decryptSplit({usesRootKey:{items:a,key:e}})).filter(i.isDecryptedPayload);this.payloadManager.emitPayloads(s,i.PayloadEmitSource.LocalChanged),await this.storageService.savePayloads(s),t?this.alertService.alert(j.KeyRecoveryStrings.KeyRecoveryRootKeyReplaced):this.alertService.alert(j.KeyRecoveryStrings.KeyRecoveryKeyRecovered),s.some((e=>e.dirty))&&await this.syncService.sync(),await this.notifyEvent(De.KeysRecovered,s),this.removeFromUndecryptables((0,d.Uuids)(s))}removeElementsFromQueueForMatchingKeyParams(e){const t=[],r=[];for(const n of this.decryptionQueue)n.keyParams.compare(e)?t.push(n):r.push(n);return this.decryptionQueue=r,t}getDiagnostics(){return Promise.resolve({keyRecovery:{queueLength:this.decryptionQueue.length,isProcessingQueue:this.isProcessingQueue}})}}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Je extends o.AbstractService{constructor(e,t,r,n,i,o,a){super(a),Qe(this,"apiService",void 0),Qe(this,"itemManager",void 0),Qe(this,"settingsService",void 0),Qe(this,"httpSerivce",void 0),Qe(this,"protectionService",void 0),Qe(this,"mutatorService",void 0),Qe(this,"internalEventBus",void 0),this.apiService=e,this.itemManager=t,this.settingsService=r,this.httpSerivce=n,this.protectionService=i,this.mutatorService=o,this.internalEventBus=a}deinit(){this.itemManager=void 0,this.settingsService=void 0,this.apiService=void 0,this.httpSerivce=void 0,this.protectionService=void 0,this.mutatorService=void 0,super.deinit()}canRegisterNewListedAccount(){return null!=this.apiService.user}isNoteAuthorizedForListed(e){return e.authorizedForListed}async authorizeNoteForListed(e){return!1!==await this.protectionService.authorizeListedPublishing()&&(await this.mutatorService.changeAndSaveItem(e,(e=>{e.authorizedForListed=!0})),!0)}async requestNewListedAccount(){const e=await this.getSettingsBasedListedAccounts();if(!(await this.apiService.registerForListedAccount()).error)for(let t=0;t<4;t++){const t=await this.getSettingsBasedListedAccounts();if(t.length>e.length)return(0,d.lastElement)(t);await(0,d.sleep)(3e3,!1)}}async getListedAccounts(){return[...await this.getSettingsBasedListedAccounts(),...this.getLegacyListedAccounts()]}async getListedAccountInfo(e,t){const r=e.hostUrl;let n="".concat(r,"/authors/").concat(e.authorId,"/extension?secret=").concat(e.secret);t&&(n+="&item_uuid=".concat(t));const i=await this.httpSerivce.getAbsolute(n).catch((e=>{console.error(e)}));if(i&&!i.error&&i.data&&!(0,d.isString)(i.data))return i.data}async getSettingsBasedListedAccounts(){const e=await this.settingsService.getSetting(Re.SettingName.ListedAuthorSecrets);return e?JSON.parse(e):[]}getLegacyListedAccounts(){const e=this.itemManager.getItems(n.ContentType.ActionsExtension).filter((e=>e.isListedExtension)),t=[];for(const r of e){const e=r.url,n=new URL(e),i=n.pathname.split("/")[2],o=n.search.split("secret=")[1].split("&")[0];t.push({secret:o,authorId:i,hostUrl:n.origin})}return t}}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class et extends o.AbstractService{constructor(e,t,r,n){super(n),Ze(this,"settingsService",void 0),Ze(this,"crypto",void 0),Ze(this,"featuresService",void 0),Ze(this,"internalEventBus",void 0),this.settingsService=e,this.crypto=t,this.featuresService=r,this.internalEventBus=n}async saveMfaSetting(e){return await this.settingsService.updateSetting(Re.SettingName.MfaSecret,e,!0)}async isMfaActivated(){return 0!=await this.settingsService.getDoesSensitiveSettingExist(Re.SettingName.MfaSecret)}async generateMfaSecret(){return this.crypto.generateOtpSecret()}async getOtpToken(e){return this.crypto.totpToken(e,Date.now(),6,30)}async enableMfa(e,t){if(null==t||t!==await this.getOtpToken(e))throw new Error(o.SignInStrings.IncorrectMfa);return this.saveMfaSetting(e)}async disableMfa(){return await this.settingsService.deleteSetting(Re.SettingName.MfaSecret)}isMfaFeatureAvailable(){var e;const t=this.featuresService.getUserFeature(he.FeatureIdentifier.TwoFactorAuth);return null!=t&&(!0===t.no_expire||(null!==(e=t.expires_at)&&void 0!==e?e:0)>Date.now())}deinit(){this.settingsService=void 0,this.crypto=void 0,this.featuresService=void 0,super.deinit()}}var tt=r(72186),rt=r(79437);function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class it extends o.AbstractService{constructor(e){super(e.internalEventBus),nt(this,"services",void 0),nt(this,"activeMigrations",void 0),nt(this,"baseMigration",void 0),this.services=e}deinit(){this.services=void 0,this.activeMigrations&&(this.activeMigrations.length=0),super.deinit()}async initialize(){await this.runBaseMigrationPreRun();const e=it.getRequiredMigrations(await this.getStoredSnjsVersion());this.activeMigrations=this.instantiateMigrationClasses(e),this.activeMigrations.length>0?(0,d.lastElement)(this.activeMigrations).onDone((async()=>{await this.markMigrationsAsDone()})):await this.services.deviceInterface.setRawStorageValue((0,o.namespacedKey)(this.services.identifier,o.RawStorageKey.SnjsVersion),h.in)}async markMigrationsAsDone(){await this.services.deviceInterface.setRawStorageValue((0,o.namespacedKey)(this.services.identifier,o.RawStorageKey.SnjsVersion),h.in)}async runBaseMigrationPreRun(){this.baseMigration=new tt._(this.services),await this.baseMigration.preRun()}async handleApplicationStage(e){await super.handleApplicationStage(e),await this.handleStage(e)}async handleApplicationEvent(e){e===o.ApplicationEvent.SignedIn&&await this.handleStage(o.ApplicationStage.SignedIn_30)}async hasPendingMigrations(){return it.getRequiredMigrations(await this.getStoredSnjsVersion()).length>0||await this.baseMigration.needsKeychainRepair()}async getStoredSnjsVersion(){const e=await this.services.deviceInterface.getRawStorageValue((0,o.namespacedKey)(this.services.identifier,o.RawStorageKey.SnjsVersion));if(!e)throw ne.W.error(Error("Snjs version missing from storage, run base migration."));return e}static getRequiredMigrations(e){const t=[],r=rt.R_.sort(((e,t)=>(0,h.D8)(e.version(),t.version())));for(const n of r){const r=n.version();r!==e&&(0,h.jV)(e,r)&&t.push(n)}return t}instantiateMigrationClasses(e){return e.map((e=>new e(this.services)))}async handleStage(e){if(await this.baseMigration.handleStage(e),!this.activeMigrations)throw new Error("Invalid active migrations");for(const t of this.activeMigrations)await t.handleStage(e)}getDiagnostics(){return Promise.resolve({migrations:{activeMigrations:this.activeMigrations&&this.activeMigrations.map((e=>typeof e))}})}}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class at extends o.AbstractService{constructor(e,t,r,n,i,o,a,s,c){super(c),ot(this,"itemManager",void 0),ot(this,"syncService",void 0),ot(this,"protectionService",void 0),ot(this,"encryption",void 0),ot(this,"payloadManager",void 0),ot(this,"challengeService",void 0),ot(this,"componentManager",void 0),ot(this,"historyService",void 0),ot(this,"internalEventBus",void 0),this.itemManager=e,this.syncService=t,this.protectionService=r,this.encryption=n,this.payloadManager=i,this.challengeService=o,this.componentManager=a,this.historyService=s,this.internalEventBus=c}deinit(){super.deinit(),this.itemManager=void 0,this.syncService=void 0,this.protectionService=void 0,this.encryption=void 0,this.payloadManager=void 0,this.challengeService=void 0,this.componentManager=void 0,this.historyService=void 0}async insertItem(e){const t=(0,i.CreateDecryptedMutatorForItem)(e,i.MutationType.UpdateUserTimestamps).getResult();return await this.itemManager.emitItemFromPayload(t,i.PayloadEmitSource.LocalInserted)}async changeAndSaveItem(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return await this.itemManager.changeItems([e],t,r?i.MutationType.UpdateUserTimestamps:i.MutationType.NoUpdateUserTimestamps,n),await this.syncService.sync(o),this.itemManager.findItem(e.uuid)}async changeAndSaveItems(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;await this.itemManager.changeItems(e,t,r?i.MutationType.UpdateUserTimestamps:i.MutationType.NoUpdateUserTimestamps,n),await this.syncService.sync(o)}async changeItem(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return await this.itemManager.changeItems([e],t,r?i.MutationType.UpdateUserTimestamps:i.MutationType.NoUpdateUserTimestamps),this.itemManager.findItem(e.uuid)}async changeItems(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.itemManager.changeItems(e,t,r?i.MutationType.UpdateUserTimestamps:i.MutationType.NoUpdateUserTimestamps)}async runTransactionalMutations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.PayloadEmitSource.LocalChanged,r=arguments.length>2?arguments[2]:void 0;return this.itemManager.runTransactionalMutations(e,t,r)}async runTransactionalMutation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.PayloadEmitSource.LocalChanged,r=arguments.length>2?arguments[2]:void 0;return this.itemManager.runTransactionalMutation(e,t,r)}async protectItems(e){const t=await this.itemManager.changeItems(e,(e=>{e.protected=!0}),i.MutationType.NoUpdateUserTimestamps);return this.syncService.sync(),t}async unprotectItems(e,t){if(!await this.protectionService.authorizeAction(t,{fallBackToAccountPassword:!0,requireAccountPassword:!1,forcePrompt:!1}))return;const r=await this.itemManager.changeItems(e,(e=>{e.protected=!1}),i.MutationType.NoUpdateUserTimestamps);return this.syncService.sync(),r}async protectNote(e){return(await this.protectItems([e]))[0]}async unprotectNote(e){const t=await this.unprotectItems([e],o.ChallengeReason.UnprotectNote);return t?t[0]:void 0}async protectNotes(e){return this.protectItems(e)}async unprotectNotes(e){return await this.unprotectItems(e,o.ChallengeReason.UnprotectNote)||[]}async protectFile(e){return(await this.protectItems([e]))[0]}async unprotectFile(e){const t=await this.unprotectItems([e],o.ChallengeReason.UnprotectFile);return t?t[0]:void 0}async mergeItem(e,t){return this.itemManager.emitItemFromPayload(e.payloadRepresentation(),t)}createTemplateItem(e,t,r){return this.itemManager.createTemplateItem(e,t,r)}async setItemNeedsSync(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.itemManager.setItemDirty(e,t)}async setItemsNeedsSync(e){return this.itemManager.setItemsDirty(e)}async deleteItem(e){return this.deleteItems([e])}async deleteItems(e){await this.itemManager.setItemsToBeDeleted(e),await this.syncService.sync()}async emptyTrash(){await this.itemManager.emptyTrash(),await this.syncService.sync()}duplicateItem(e,t){const r=this.itemManager.duplicateItem(e,!1,t);return this.syncService.sync(),r}async migrateTagsToFolders(){return await Ke.run(this.itemManager),this.syncService.sync()}async setTagParent(e,t){await this.itemManager.setTagParent(e,t)}async unsetTagParent(e){await this.itemManager.unsetTagParent(e)}async findOrCreateTag(e){return this.itemManager.findOrCreateTagByTitle(e)}async createTagOrSmartView(e){return this.itemManager.createTagOrSmartView(e)}async toggleComponent(e){await this.componentManager.toggleComponent(e.uuid),await this.syncService.sync()}async toggleTheme(e){await this.componentManager.toggleTheme(e.uuid),await this.syncService.sync()}async importData(e){let t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.version){const t=e.version;if(!this.encryption.supportedVersions().includes(t))return{error:new p.ClientDisplayableError(o.InfoStrings.UnsupportedBackupFileVersion)};const r=this.encryption.getUserVersion();if(r&&1===(0,n.compareVersions)(t,r))return{error:new p.ClientDisplayableError(o.InfoStrings.BackupFileMoreRecentThanAccount)}}if(e.auth_params||e.keyParams){const e=new o.Challenge([new o.ChallengePrompt(o.ChallengeValidation.None,A.Input.FileAccountPassword,void 0,!0)],o.ChallengeReason.DecryptEncryptedFile,!0),r=await this.challengeService.promptForChallengeResponse(e);if(null==r)return{error:new p.ClientDisplayableError("Import aborted")};this.challengeService.completeChallenge(e),t=null==r?void 0:r.values[0].value}if(!await this.protectionService.authorizeFileImport())return{error:new p.ClientDisplayableError("Import aborted")};e.items=e.items.map((e=>(0,i.isEncryptedTransferPayload)(e)?(0,i.CreateEncryptedBackupFileContextPayload)(e):(0,i.CreateDecryptedBackupFileContextPayload)(e)));const a=await this.encryption.decryptBackupFile(e,t);if(a instanceof p.ClientDisplayableError)return{error:a};const s=a.filter(i.isDecryptedPayload).map((e=>{if(e.content_type===n.ContentType.Component&&e.content.active){const t=e;return(0,i.CopyPayloadWithContentOverride)(t,{active:!1})}return e})),c=await this.payloadManager.importPayloads(s,this.historyService.getHistoryMapCopy()),l=this.syncService.sync();return r&&await l,{affectedItems:this.itemManager.findItems(c),errorCount:a.length-s.length}}}function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(Object(r),!0).forEach((function(t){lt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ut extends o.AbstractService{constructor(e){super(e),lt(this,"internalEventBus",void 0),lt(this,"changeObservers",[]),lt(this,"collection",void 0),lt(this,"emitQueue",[]),this.internalEventBus=e,this.collection=new i.PayloadCollection}getMasterCollection(){return i.ImmutablePayloadCollection.FromCollection(this.collection)}deinit(){super.deinit(),this.changeObservers.length=0,this.resetState()}resetState(){this.collection=new i.PayloadCollection}find(e){return this.collection.findAll(e)}findOne(e){return this.collection.findAll([e])[0]}all(e){return this.collection.all(e)}get integrityPayloads(){return this.collection.integrityPayloads()}get nonDeletedItems(){return this.collection.nondeletedElements()}get invalidPayloads(){return this.collection.invalidElements()}async emitDeltaEmit(e,t){var r;return 0===e.emits.length&&0===(null===(r=e.ignored)||void 0===r?void 0:r.length)?[]:new Promise((r=>{const n={emit:e,sourceKey:t,resolve:r};this.emitQueue.push(n),1===this.emitQueue.length&&this.popQueue()}))}async emitPayload(e,t,r){return this.emitPayloads([e],t,r)}async emitPayloads(e,t,r){const n={emits:e,source:t};return this.emitDeltaEmit(n,r)}popQueue(){const e=this.emitQueue[0],{changed:t,inserted:r,discarded:n,unerrored:i}=this.applyPayloads(e.emit.emits);this.notifyChangeObservers(t,r,n,e.emit.ignored||[],i,e.emit.source,e.sourceKey),(0,d.removeFromArray)(this.emitQueue,e),e.resolve([...t,...r,...n]),this.emitQueue.length>0&&this.popQueue()}applyPayloads(e){const t=[],r=[],n=[],o=[];for(const a of e){if(!a.uuid||!a.content_type){console.error("Payload is corrupt",a);continue}this.log("applying payload",a.uuid,"globalDirtyIndexAtLastSync",a.globalDirtyIndexAtLastSync,"dirtyIndex",a.dirtyIndex,"dirty",a.dirty);const e=this.collection.find(a.uuid);(0,i.isDeletedPayload)(a)&&a.discardable?(this.collection.discard(a),n.push(a)):(this.collection.set(a),e?(t.push(a),(0,i.isEncryptedPayload)(e)&&(0,i.isDecryptedPayload)(a)&&o.push(a)):r.push(a))}return{changed:t,inserted:r,discarded:n,unerrored:o}}addObserver(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Array.isArray(e)||(e=[e]);const n={types:e,priority:r,callback:t};this.changeObservers.push(n);const i=this.changeObservers;return()=>{(0,d.removeFromArray)(i,n)}}notifyChangeObservers(e,t,r,i,o,a,s){const c=this.changeObservers.slice().sort(((e,t)=>e.priority<t.priority?-1:1)),l=(e,t)=>t.includes(n.ContentType.Any)?e.slice():e.slice().filter((e=>t.includes(e.content_type)));for(const n of c)n.callback({changed:l(e,n.types),inserted:l(t,n.types),discarded:l(r,n.types),ignored:l(i,n.types),unerrored:l(o,n.types),source:a,sourceKey:s})}async importPayloads(e,t){const r=e.map((e=>e.copy(void 0,i.PayloadSource.FileImport))),n=new i.DeltaFileImport(this.getMasterCollection(),r,t).result();return await this.emitDeltaEmit(n),(0,d.Uuids)(e)}removePayloadLocally(e){this.collection.discard(e)}erroredPayloadsForContentType(e){return this.collection.invalidElements().filter((t=>t.content_type===e))}async deleteErroredPayloads(e){const t=e.map((e=>new i.DeletedPayload(ct(ct({},e.ejected()),{},{deleted:!0,content:void 0,dirty:!0,dirtyIndex:(0,i.getIncrementedDirtyIndex)()}),e.source)));await this.emitPayloads(t,i.PayloadEmitSource.LocalChanged)}getDiagnostics(){return Promise.resolve({payloads:{integrityPayloads:this.integrityPayloads,nonDeletedItemCount:this.nonDeletedItems.length,invalidPayloadsCount:this.invalidPayloads.length}})}}function dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class pt extends o.AbstractService{constructor(e,t,r,i){super(i),dt(this,"singletonManager",void 0),dt(this,"itemManager",void 0),dt(this,"syncService",void 0),dt(this,"internalEventBus",void 0),dt(this,"shouldReload",!0),dt(this,"reloading",!1),dt(this,"preferences",void 0),dt(this,"removeItemObserver",void 0),dt(this,"removeSyncObserver",void 0),this.singletonManager=e,this.itemManager=t,this.syncService=r,this.internalEventBus=i,this.removeItemObserver=t.addObserver(n.ContentType.UserPrefs,(()=>{this.shouldReload=!0})),this.removeSyncObserver=r.addEventObserver((e=>{e!==o.SyncEvent.SyncCompletedWithAllItemsUploaded&&e!==o.SyncEvent.LocalDataIncrementalLoad||this.reload()}))}deinit(){var e,t;null===(e=this.removeItemObserver)||void 0===e||e.call(this),null===(t=this.removeSyncObserver)||void 0===t||t.call(this),this.singletonManager=void 0,this.itemManager=void 0,super.deinit()}async handleApplicationStage(e){await super.handleApplicationStage(e),e===o.ApplicationStage.LoadedDatabase_12&&(this.preferences=this.singletonManager.findSingleton(n.ContentType.UserPrefs,i.SNUserPrefs.singletonPredicate),this.preferences&&this.notifyEvent(o.PreferencesServiceEvent.PreferencesChanged))}getValue(e,t){var r,n;return null!==(r=null===(n=this.preferences)||void 0===n?void 0:n.getPref(e))&&void 0!==r?r:t}async setValue(e,t){this.preferences&&(this.preferences=await this.itemManager.changeItem(this.preferences,(r=>{r.setPref(e,t)})),this.notifyEvent(o.PreferencesServiceEvent.PreferencesChanged),this.syncService.sync())}async reload(){if(this.shouldReload&&!this.reloading){this.reloading=!0;try{const e=this.preferences;this.preferences=await this.singletonManager.findOrCreateContentTypeSingleton(n.ContentType.UserPrefs,(0,i.FillItemContent)({})),((null==e?void 0:e.uuid)!==this.preferences.uuid||this.preferences.userModifiedDate>e.userModifiedDate)&&this.notifyEvent(o.PreferencesServiceEvent.PreferencesChanged),this.shouldReload=!1}finally{this.reloading=!1}}}}class ht{constructor(e){var t;t={},"map"in this?Object.defineProperty(this,"map",{value:t,enumerable:!0,configurable:!0,writable:!0}):this.map=t;for(const t of e)this.map[t.name]=t}getSettingValue(e,t){const r=this.map[e];return(null==r?void 0:r.value)||t}}function ft(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class yt{constructor(e,t){ft(this,"settingsApi",void 0),ft(this,"userProvider",void 0),this.settingsApi=e,this.userProvider=t}isReadyForModification(){return null!=this.getUser()}getUser(){return this.userProvider.getUser()}get userUuid(){const e=this.getUser();if(null==e||null==e.uuid)throw new Error(o.API_MESSAGE_INVALID_SESSION);return e.uuid}async listSettings(){const{error:e,data:t}=await this.settingsApi.listSettings(this.userUuid);if(null!=e)throw new Error(e.message);return null==t||null==t.settings?new ht([]):new ht(t.settings)}async getSetting(e){var t,r,n;const i=await this.settingsApi.getSetting(this.userUuid,e);if(i.status!==p.StatusCode.HttpBadRequest){if(null!=i.error)throw new Error(i.error.message);return null!==(t=null==i||null===(r=i.data)||void 0===r||null===(n=r.setting)||void 0===n?void 0:n.value)&&void 0!==t?t:void 0}}async getSubscriptionSetting(e){var t,r,n;const i=await this.settingsApi.getSubscriptionSetting(this.userUuid,e);if(i.status!==p.StatusCode.HttpBadRequest){if(null!=i.error)throw new Error(i.error.message);return null!==(t=null==i||null===(r=i.data)||void 0===r||null===(n=r.setting)||void 0===n?void 0:n.value)&&void 0!==t?t:void 0}}async getDoesSensitiveSettingExist(e){var t,r;const n=await this.settingsApi.getSetting(this.userUuid,e);if(n.status===p.StatusCode.HttpBadRequest)return!1;if(null!=n.error)throw new Error(n.error.message);return null!==(t=null===(r=n.data)||void 0===r?void 0:r.success)&&void 0!==t&&t}async updateSetting(e,t,r){const{error:n}=await this.settingsApi.updateSetting(this.userUuid,e,t,r);if(null!=n)throw new Error(n.message)}async deleteSetting(e){const{error:t}=await this.settingsApi.deleteSetting(this.userUuid,e);if(null!=t)throw new Error(t.message)}deinit(){this.settingsApi=void 0,this.userProvider=void 0}}function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class gt extends o.AbstractService{constructor(e,t,r){super(r),vt(this,"sessionManager",void 0),vt(this,"apiService",void 0),vt(this,"internalEventBus",void 0),vt(this,"provider",void 0),vt(this,"frequencyOptionsLabels",{[Re.EmailBackupFrequency.Disabled]:"No email backups",[Re.EmailBackupFrequency.Daily]:"Daily",[Re.EmailBackupFrequency.Weekly]:"Weekly"}),vt(this,"cloudProviderIntegrationUrlEndpoints",{[Re.CloudProvider.Dropbox]:"dropbox",[Re.CloudProvider.Google]:"gdrive",[Re.CloudProvider.OneDrive]:"onedrive"}),this.sessionManager=e,this.apiService=t,this.internalEventBus=r}initializeFromDisk(){this.provider=new yt(this.apiService,this.sessionManager)}async listSettings(){return this.provider.listSettings()}async getSetting(e){return this.provider.getSetting(e)}async getSubscriptionSetting(e){return this.provider.getSubscriptionSetting(e)}async updateSetting(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.provider.updateSetting(e,t,r)}async getDoesSensitiveSettingExist(e){return this.provider.getDoesSensitiveSettingExist(e)}async deleteSetting(e){return this.provider.deleteSetting(e)}getEmailBackupFrequencyOptionLabel(e){return this.frequencyOptionsLabels[e]}getCloudProviderIntegrationUrl(e,t){const{Dev:r,Prod:n}=b,i=t?r:n;return"".concat(i,"/").concat(this.cloudProviderIntegrationUrlEndpoints[e],"?redirect_url=").concat(i,"/components/cloudlink?")}deinit(){var e;null===(e=this.provider)||void 0===e||e.deinit(),this.provider=void 0,this.sessionManager=void 0,this.apiService=void 0}}function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class St extends o.AbstractService{constructor(e,t,r,n){super(n),bt(this,"itemManager",void 0),bt(this,"payloadManager",void 0),bt(this,"syncService",void 0),bt(this,"internalEventBus",void 0),bt(this,"resolveQueue",[]),bt(this,"removeItemObserver",void 0),bt(this,"removeSyncObserver",void 0),this.itemManager=e,this.payloadManager=t,this.syncService=r,this.internalEventBus=n,this.addObservers()}deinit(){this.syncService=void 0,this.itemManager=void 0,this.payloadManager=void 0,this.resolveQueue.length=0,this.removeItemObserver(),this.removeItemObserver=void 0,this.removeSyncObserver(),this.removeSyncObserver=void 0,super.deinit()}popResolveQueue(){const e=this.resolveQueue.slice();return this.resolveQueue=[],e}addObservers(){this.removeItemObserver=this.itemManager.addObserver(n.ContentType.Any,(e=>{let{inserted:t,unerrored:r}=e;r.length>0&&(this.resolveQueue=this.resolveQueue.concat(r)),t.length>0&&(this.resolveQueue=this.resolveQueue.concat(t))})),this.removeSyncObserver=this.syncService.addEventObserver((async e=>{e!==o.SyncEvent.DownloadFirstSyncCompleted&&e!==o.SyncEvent.SyncCompletedWithAllItemsUploaded||await this.resolveSingletonsForItems(this.popResolveQueue(),e)}))}validItemsMatchingPredicate(e,t){return this.itemManager.itemsMatchingPredicate(e,t)}async resolveSingletonsForItems(e,t){if(0===e.length)return;const r=[];for(const t of e){if(r.includes(t)||!t.isSingleton)continue;const e=this.validItemsMatchingPredicate(t.content_type,t.singletonPredicate());(0,d.extendArray)(r,e||[]),!e||e.length<=1||await this.handleStrategy(e,t.singletonStrategy)}var n;r.length>0&&t===o.SyncEvent.SyncCompletedWithAllItemsUploaded&&await(null===(n=this.syncService)||void 0===n?void 0:n.sync())}async handleStrategy(e,t){if(t!==i.SingletonStrategy.KeepEarliest)throw"Unhandled singleton strategy";const r=e.sort(((e,t)=>e.created_at<t.created_at?-1:1)),n=(0,d.arrayByRemovingFromIndex)(r,0);await this.itemManager.setItemsToBeDeleted(n)}findSingleton(e,t){const r=this.validItemsMatchingPredicate(e,t);if(r.length>0)return r[0]}async findOrCreateContentTypeSingleton(e,t){const r=this.itemManager.getItems(e);if(r.length>0)return r[0];if(!this.syncService.getLastSyncDate()){let t;const r=this.itemManager.addObserver(e,(r=>{let{inserted:n}=r;if(n.length>0){const r=n.filter((t=>t.content_type===e));r.length>0&&(t=r[0])}}));if(await this.syncService.sync(),r(),t)return t;const n=this.itemManager.getItems(e);if(n.length>0)return n[0]}const n=this.payloadManager.erroredPayloadsForContentType(e);n.length&&await this.payloadManager.deleteErroredPayloads(n);const o=new i.DecryptedPayload(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({uuid:d.UuidGenerator.GenerateUuid(),content_type:e,content:t,dirty:!0,dirtyIndex:(0,i.getIncrementedDirtyIndex)()},(0,i.PayloadTimestampDefaults)())),a=await this.itemManager.emitItemFromPayload(o,i.PayloadEmitSource.LocalInserted);return this.syncService.sync(),a}}var wt,Pt=r(70008);function _t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Et{constructor(e){var t,r;_t(this,"rawResponse",void 0),_t(this,"savedPayloads",void 0),_t(this,"retrievedPayloads",void 0),_t(this,"uuidConflictPayloads",void 0),_t(this,"dataConflictPayloads",void 0),_t(this,"rejectedPayloads",void 0),this.rawResponse=e,this.savedPayloads=(0,i.FilterDisallowedRemotePayloadsAndMap)((null===(t=e.data)||void 0===t?void 0:t.saved_items)||[]).map((e=>(0,i.CreateServerSyncSavedPayload)(e))),this.retrievedPayloads=(0,i.FilterDisallowedRemotePayloadsAndMap)((null===(r=e.data)||void 0===r?void 0:r.retrieved_items)||[]),this.dataConflictPayloads=(0,i.FilterDisallowedRemotePayloadsAndMap)(this.rawDataConflictItems),this.uuidConflictPayloads=(0,i.FilterDisallowedRemotePayloadsAndMap)(this.rawUuidConflictItems),this.rejectedPayloads=(0,i.FilterDisallowedRemotePayloadsAndMap)(this.rawRejectedPayloads),(0,d.deepFreeze)(this)}get error(){var e;return this.rawResponse.error||(null===(e=this.rawResponse.data)||void 0===e?void 0:e.error)}get status(){return this.rawResponse.status}get lastSyncToken(){var e;return null===(e=this.rawResponse.data)||void 0===e?void 0:e[p.ApiEndpointParam.LastSyncToken]}get paginationToken(){var e;return null===(e=this.rawResponse.data)||void 0===e?void 0:e[p.ApiEndpointParam.PaginationToken]}get numberOfItemsInvolved(){return this.allFullyFormedPayloads.length}get allFullyFormedPayloads(){return[...this.retrievedPayloads,...this.dataConflictPayloads,...this.uuidConflictPayloads,...this.rejectedPayloads]}get rawUuidConflictItems(){return this.rawConflictObjects.filter((e=>e.type===p.ConflictType.UuidConflict)).map((e=>e.unsaved_item||e.item))}get rawDataConflictItems(){return this.rawConflictObjects.filter((e=>e.type===p.ConflictType.ConflictingData)).map((e=>e.server_item||e.item))}get rawRejectedPayloads(){return this.rawConflictObjects.filter((e=>e.type===p.ConflictType.ContentTypeError||e.type===p.ConflictType.ContentError||e.type===p.ConflictType.ReadOnlyError)).map((e=>e.unsaved_item))}get rawConflictObjects(){var e,t;const r=(null===(e=this.rawResponse.data)||void 0===e?void 0:e.conflicts)||[],n=(null===(t=this.rawResponse.data)||void 0===t?void 0:t.unsaved)||[];return r.concat(n)}get hasError(){return!(0,d.isNullOrUndefined)(this.rawResponse.error)}}function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e[e.Response=1]="Response",e[e.StatusChanged=2]="StatusChanged"}(wt||(wt={}));const kt=150;class Ot{constructor(e,t,r,n,i){Ct(this,"payloads",void 0),Ct(this,"receiver",void 0),Ct(this,"lastSyncToken",void 0),Ct(this,"paginationToken",void 0),Ct(this,"apiService",void 0),Ct(this,"id",(0,d.nonSecureRandomIdentifier)()),Ct(this,"pendingPayloads",void 0),Ct(this,"responses",[]),this.payloads=e,this.receiver=t,this.lastSyncToken=r,this.paginationToken=n,this.apiService=i,this.payloads=e,this.lastSyncToken=r,this.paginationToken=n,this.apiService=i,this.receiver=t,this.pendingPayloads=e.slice()}get payloadsSavedOrSaving(){return(0,d.arrayByDifference)(this.payloads,this.pendingPayloads)}popPayloads(e){const t=this.pendingPayloads.slice(0,e);return(0,d.subtractFromArray)(this.pendingPayloads,t),t}async run(){await this.receiver(wt.StatusChanged,void 0,{completedUploadCount:this.totalUploadCount-this.pendingUploadCount,totalUploadCount:this.totalUploadCount});const e=this.popPayloads(this.upLimit),t=await this.apiService.sync(e,this.lastSyncToken,this.paginationToken,this.downLimit),r=new Et(t);this.responses.push(r),this.lastSyncToken=r.lastSyncToken,this.paginationToken=r.paginationToken;try{await this.receiver(wt.Response,r)}catch(e){console.error("Sync handle response error",e)}if(!this.done)return this.run()}get done(){return 0===this.pendingPayloads.length&&!this.paginationToken}get pendingUploadCount(){return this.pendingPayloads.length}get totalUploadCount(){return this.payloads.length}get upLimit(){return kt}get downLimit(){return kt}get numberOfItemsInvolved(){let e=0;for(const t of this.responses)e+=t.numberOfItemsInvolved;return e}}class xt{constructor(e){var t,r;r=void 0,(t="savedPayloads")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.savedPayloads=e}}function It(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class At{constructor(e,t){It(this,"payloads",void 0),It(this,"receiver",void 0),this.payloads=e,this.receiver=t}async run(){const e=this.payloads.map((e=>(0,i.CreateOfflineSyncSavedPayload)(e))),t=new xt(e);await this.receiver(wt.Response,t)}}function Mt(e,t){return e.sort(((e,r)=>{const n=new Date(r.serverUpdatedAt).getTime()-new Date(e.serverUpdatedAt).getTime();let i=0,o=0;return i=t.indexOf(e.content_type),o=t.indexOf(r.content_type),-1===i&&(i=t.length),-1===o&&(o=t.length),i===o?n:i<o?-1:1}))}function Dt(e,t){return e.sort(((e,r)=>{const n=new Date(r.serverUpdatedAt).getTime()-new Date(e.serverUpdatedAt).getTime();let i=0,o=0;return i=t.indexOf(e.uuid),o=t.indexOf(r.uuid),-1===i&&(i=t.length),-1===o&&(o=t.length),i===o?n:i<o?-1:1}))}function Rt(e,t,r){const i=[],o=[],a=[];for(let r=0;r<e.length;r++){const s=e[r];s.content_type===n.ContentType.ItemsKey?i.push(s):t.includes(s.content_type)?o.push(s):a.push(s)}return{itemsKeyPayloads:i,contentTypePriorityPayloads:Mt(o,t),remainingPayloads:Dt(a,r)}}function Tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Nt{constructor(e,t){Tt(this,"error",void 0),Tt(this,"interval",void 0),Tt(this,"receiver",void 0),Tt(this,"completedUpload",0),Tt(this,"totalUpload",0),Tt(this,"downloaded",0),Tt(this,"databaseLoadCurrent",0),Tt(this,"databaseLoadTotal",0),Tt(this,"databaseLoadDone",!1),Tt(this,"syncing",!1),Tt(this,"syncStart",void 0),Tt(this,"timingMonitor",void 0),this.interval=e,this.receiver=t}deinit(){this.stopTimingMonitor()}setUploadStatus(e,t){this.completedUpload=e,this.totalUpload=t,this.receiver(o.SyncEvent.StatusChanged)}setDownloadStatus(e){this.downloaded+=e,this.receiver(o.SyncEvent.StatusChanged)}setDatabaseLoadStatus(e,t,r){this.databaseLoadCurrent=e,this.databaseLoadTotal=t,this.databaseLoadDone=r,r?this.receiver(o.SyncEvent.LocalDataLoaded):this.receiver(o.SyncEvent.LocalDataIncrementalLoad)}getStats(){return{uploadCompletionCount:this.completedUpload,uploadTotalCount:this.totalUpload,downloadCount:this.downloaded,localDataDone:this.databaseLoadDone,localDataCurrent:this.databaseLoadCurrent,localDataTotal:this.databaseLoadTotal}}setDidBegin(){this.syncing=!0,this.syncStart=new Date}setDidEnd(){this.syncing=!1}get syncInProgress(){return!0===this.syncing}get secondsSinceSyncStart(){return((new Date).getTime()-this.syncStart.getTime())/1e3}startTimingMonitor(){this.timingMonitor&&this.stopTimingMonitor(),this.timingMonitor=this.interval((()=>{this.secondsSinceSyncStart>5&&(this.receiver(o.SyncEvent.SyncTakingTooLong),this.stopTimingMonitor())}),500)}stopTimingMonitor(){Object.prototype.hasOwnProperty.call(this.interval,"cancel")?this.interval.cancel(this.timingMonitor):clearInterval(this.timingMonitor),this.timingMonitor=null}hasError(){return!!this.error}setError(e){this.error=e}clearError(){this.error=null}reset(){this.downloaded=0,this.completedUpload=0,this.totalUpload=0,this.syncing=!1,this.error=null,this.stopTimingMonitor(),this.receiver(o.SyncEvent.StatusChanged)}}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Bt{constructor(e,t,r,n){jt(this,"payloadSet",void 0),jt(this,"baseCollection",void 0),jt(this,"payloadsSavedOrSaving",void 0),jt(this,"historyMap",void 0),this.payloadSet=e,this.baseCollection=t,this.payloadsSavedOrSaving=r,this.historyMap=n}result(){const e=[];return e.push(this.processRetrievedPayloads()),e.push(this.processSavedPayloads()),e.push(this.processUuidConflictPayloads()),e.push(this.processDataConflictPayloads()),e.push(this.processRejectedPayloads()),e}processSavedPayloads(){return new i.DeltaRemoteSaved(this.baseCollection,this.payloadSet.savedPayloads).result()}processRetrievedPayloads(){const e=i.ImmutablePayloadCollection.WithPayloads(this.payloadSet.retrievedPayloads);return new i.DeltaRemoteRetrieved(this.baseCollection,e,this.payloadsSavedOrSaving,this.historyMap).result()}processDataConflictPayloads(){const e=i.ImmutablePayloadCollection.WithPayloads(this.payloadSet.dataConflictPayloads);return new i.DeltaRemoteDataConflicts(this.baseCollection,e,this.historyMap).result()}processUuidConflictPayloads(){const e=i.ImmutablePayloadCollection.WithPayloads(this.payloadSet.uuidConflictPayloads);return new i.DeltaRemoteUuidConflicts(this.baseCollection,e).result()}processRejectedPayloads(){const e=i.ImmutablePayloadCollection.WithPayloads(this.payloadSet.rejectedPayloads);return new i.DeltaRemoteRejected(this.baseCollection,e).result()}}function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){Kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e,t){if(e.deleted)return new i.DeletedPayload(Lt(Lt({},e),{},{content:void 0,deleted:!0}),t);if(null!=e.content)return new i.EncryptedPayload(Lt(Lt({},e),{},{items_key_id:e.items_key_id,content:e.content,deleted:!1,errorDecrypting:!1,waitingForKey:!1}),t);throw Error("Unhandled case in createPayloadFromRawItem")}function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ht extends o.AbstractService{constructor(e,t,r,i,o,a,s,c,l){super(l),zt(this,"itemManager",void 0),zt(this,"sessionManager",void 0),zt(this,"protocolService",void 0),zt(this,"storageService",void 0),zt(this,"payloadManager",void 0),zt(this,"apiService",void 0),zt(this,"historyService",void 0),zt(this,"options",void 0),zt(this,"internalEventBus",void 0),zt(this,"dirtyIndexAtLastPresyncSave",void 0),zt(this,"lastSyncDate",void 0),zt(this,"outOfSync",!1),zt(this,"opStatus",void 0),zt(this,"resolveQueue",[]),zt(this,"spawnQueue",[]),zt(this,"completedOnlineDownloadFirstSync",!1),zt(this,"majorChangeThreshold",15),zt(this,"clientLocked",!1),zt(this,"databaseLoaded",!1),zt(this,"syncToken",void 0),zt(this,"cursorToken",void 0),zt(this,"syncLock",!1),zt(this,"_simulate_latency",void 0),zt(this,"dealloced",!1),zt(this,"lastSyncInvokationPromise",void 0),zt(this,"currentSyncRequestPromise",void 0),zt(this,"localLoadPriorty",[n.ContentType.ItemsKey,n.ContentType.UserPrefs,n.ContentType.Component,n.ContentType.Theme]),this.itemManager=e,this.sessionManager=t,this.protocolService=r,this.storageService=i,this.payloadManager=o,this.apiService=a,this.historyService=s,this.options=c,this.internalEventBus=l,this.opStatus=this.initializeStatus()}async onNewDatabaseCreated(){await this.getLastSyncToken()&&await this.clearSyncPositionTokens()}get launchPriorityUuids(){var e;return null!==(e=this.storageService.getValue(o.StorageKey.LaunchPriorityUuids))&&void 0!==e?e:[]}setLaunchPriorityUuids(e){this.storageService.setValue(o.StorageKey.LaunchPriorityUuids,e)}deinit(){this.dealloced=!0,this.sessionManager=void 0,this.itemManager=void 0,this.protocolService=void 0,this.payloadManager=void 0,this.storageService=void 0,this.apiService=void 0,this.opStatus.reset(),this.opStatus=void 0,this.resolveQueue.length=0,this.spawnQueue.length=0,super.deinit()}initializeStatus(){return new Nt(setInterval,(e=>{this.notifyEvent(e)}))}lockSyncing(){this.clientLocked=!0}unlockSyncing(){this.clientLocked=!1}isOutOfSync(){return this.outOfSync}getLastSyncDate(){return this.lastSyncDate}getSyncStatus(){return this.opStatus}resetSyncState(){this.dirtyIndexAtLastPresyncSave=void 0,this.lastSyncDate=void 0,this.outOfSync=!1}isDatabaseLoaded(){return this.databaseLoaded}async getDatabasePayloads(){return this.storageService.getAllRawPayloads().catch((e=>{throw this.notifyEvent(o.SyncEvent.DatabaseReadError,e),e}))}async processItemsKeysFirstDuringDatabaseLoad(e){const t=e.filter(i.isEncryptedPayload),r=e.filter(i.isDecryptedPayload),n={usesRootKeyWithKeyLookup:{items:t}},o=await this.protocolService.decryptSplit(n);await this.payloadManager.emitPayloads([...r,...o],i.PayloadEmitSource.LocalDatabaseLoaded)}async loadDatabasePayloads(e){if(this.databaseLoaded)throw"Attempting to initialize already initialized local database.";if(0===e.length)return this.databaseLoaded=!0,void this.opStatus.setDatabaseLoadStatus(0,0,!0);const t=e.map((e=>{try{return(0,i.CreatePayload)(e,i.PayloadSource.Constructor)}catch(e){return void console.error("Creating payload fail+ed",e)}})).filter(d.isNotUndefined),{itemsKeyPayloads:r,contentTypePriorityPayloads:n,remainingPayloads:o}=Rt(t,this.localLoadPriorty,this.launchPriorityUuids);await this.processItemsKeysFirstDuringDatabaseLoad(r),await this.processPayloadBatch(n);const a=o.length,s=this.options.loadBatchSize,c=Math.ceil(a/s);for(let e=0;e<c;e++){const t=e*s,r=o.slice(t,t+s);await this.processPayloadBatch(r,t,a)}this.databaseLoaded=!0,this.opStatus.setDatabaseLoadStatus(0,0,!0)}async processPayloadBatch(e,t,r){const n=[],a=[];for(const t of e)(0,i.isEncryptedPayload)(t)?n.push(t):a.push(t);const s={usesItemsKeyWithKeyLookup:{items:n}},c=await this.protocolService.decryptSplit(s);await this.payloadManager.emitPayloads([...a,...c],i.PayloadEmitSource.LocalDatabaseLoaded),this.notifyEvent(o.SyncEvent.LocalDataIncrementalLoad),null!=t&&null!=r&&this.opStatus.setDatabaseLoadStatus(t,r,!1),await(0,d.sleep)(1,!1)}setLastSyncToken(e){return this.syncToken=e,this.storageService.setValue(o.StorageKey.LastSyncToken,e)}async setPaginationToken(e){return this.cursorToken=e,e?this.storageService.setValue(o.StorageKey.PaginationToken,e):this.storageService.removeValue(o.StorageKey.PaginationToken)}async getLastSyncToken(){return this.syncToken||(this.syncToken=await this.storageService.getValue(o.StorageKey.LastSyncToken)),this.syncToken}async getPaginationToken(){return this.cursorToken||(this.cursorToken=await this.storageService.getValue(o.StorageKey.PaginationToken)),this.cursorToken}async clearSyncPositionTokens(){this.syncToken=void 0,this.cursorToken=void 0,await this.storageService.removeValue(o.StorageKey.LastSyncToken),await this.storageService.removeValue(o.StorageKey.PaginationToken)}itemsNeedingSync(){return this.itemManager.getDirtyItems()}async markAllItemsAsNeedingSyncAndPersist(){this.log("Marking all items as needing sync");const e=this.itemManager.items.map((e=>new i.DecryptedPayload(Wt(Wt({},e.payload.ejected()),{},{dirty:!0,dirtyIndex:(0,i.getIncrementedDirtyIndex)()}))));await this.payloadManager.emitPayloads(e,i.PayloadEmitSource.LocalChanged),await this.persistPayloads(e)}popPayloadsNeedingPreSyncSave(e){const t=this.dirtyIndexAtLastPresyncSave;if(null==t)return e;const r=e.filter((e=>!e.dirtyIndex||e.dirtyIndex>t));return this.dirtyIndexAtLastPresyncSave=(0,i.getCurrentDirtyIndex)(),r}queueStrategyResolveOnNext(){return new Promise(((e,t)=>{this.resolveQueue.push({resolve:e,reject:t})}))}queueStrategyForceSpawnNew(e){return new Promise(((t,r)=>{this.spawnQueue.push({resolve:t,reject:r,options:e})}))}popSpawnQueue(){if(0===this.spawnQueue.length)return null;const e=this.spawnQueue[0];return(0,d.removeFromIndex)(this.spawnQueue,0),this.log("Syncing again from spawn queue"),this.sync(Wt({queueStrategy:o.SyncQueueStrategy.ForceSpawnNew,source:o.SyncSource.SpawnQueue},e.options)).then((()=>{e.resolve()})).catch((()=>{e.reject()}))}async payloadsByPreparingForServer(e){const t=(0,i.CreatePayloadSplit)(e),r=(0,j.SplitPayloadsByEncryptionType)(t.decrypted),n=(0,j.CreateEncryptionSplitWithKeyLookup)(r);return[...(await this.protocolService.encryptSplit(n)).map(i.CreateEncryptedServerSyncPushPayload),...t.deleted.map(i.CreateDeletedServerSyncPushPayload)]}async downloadFirstSync(e,t){for(let r=0;r<5;r++){if(await this.sync(Wt({mode:o.SyncMode.DownloadFirst,queueStrategy:o.SyncQueueStrategy.ForceSpawnNew,source:o.SyncSource.External},t)).catch(console.error),this.completedOnlineDownloadFirstSync)return;await(0,d.sleep)(e)}console.error("Failed downloadFirstSync after ".concat(5," tries"))}async awaitCurrentSyncs(){await this.lastSyncInvokationPromise,await this.currentSyncRequestPromise}async sync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.clientLocked)return void this.log("Sync locked by client");const t=Wt({source:o.SyncSource.External},e);return this.lastSyncInvokationPromise=this.performSync(t),this.lastSyncInvokationPromise}async prepareForSync(e){const t=this.itemsNeedingSync(),r=new Date,n=(0,i.getCurrentDirtyIndex)(),o=t.filter((e=>e.neverSynced&&(0,i.isDeletedItem)(e)));(0,d.subtractFromArray)(t,o);const a=t.map((e=>e.payloadRepresentation())),s=this.popPayloadsNeedingPreSyncSave(a);return await this.persistPayloads(s),e.onPresyncSave&&e.onPresyncSave(),{items:t,beginDate:r,frozenDirtyIndex:n,neverSyncedDeleted:o}}configureSyncLock(){const e=this.opStatus.syncInProgress,t=this.databaseLoaded,r=!this.syncLock,n=r&&t&&!e;return n?this.syncLock=!0:this.log(r?e?"Attempting to sync while existing sync in progress.":"Attempting to sync before local database has loaded.":"Another function call has begun preparing for sync."),{shouldExecuteSync:n,releaseLock:()=>{this.syncLock=!1}}}deferSyncRequest(e){const t=(0,d.isNullOrUndefined)(e.queueStrategy)?o.SyncQueueStrategy.ResolveOnNext:e.queueStrategy;if(t===o.SyncQueueStrategy.ResolveOnNext)return this.queueStrategyResolveOnNext();if(t===o.SyncQueueStrategy.ForceSpawnNew)return this.queueStrategyForceSpawnNew({mode:e.mode,checkIntegrity:e.checkIntegrity,source:e.source});throw Error("Unhandled timing strategy ".concat(t))}async prepareForSyncExecution(e,t,r,n){return this.opStatus.setDidBegin(),await this.notifyEvent(o.SyncEvent.SyncWillBegin),(0,d.subtractFromArray)(this.resolveQueue,t),e.length>0?this.itemManager.setLastSyncBeganForItems(e,r,n):e}getPendingRequestsMadeInTimeToPiggyBackOnCurrentRequest(){return this.resolveQueue.slice()}getOfflineSyncParameters(e){return{uploadPayloads:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.SyncMode.Default)===o.SyncMode.Default?e:[]}}createOfflineSyncOperation(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.SyncMode.Default;return this.log("Syncing offline user","source:",t,"mode:",r,"payloads:",e),new At(e,(async(e,t)=>{this.dealloced||e===wt.Response&&t&&await this.handleOfflineResponse(t)}))}async getOnlineSyncParameters(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.SyncMode.Default;const r=this.completedOnlineDownloadFirstSync?t:o.SyncMode.DownloadFirst;if(r===o.SyncMode.Default&&!this.completedOnlineDownloadFirstSync)throw Error("Attempting to default mode sync without having completed initial.");return{uploadPayloads:r===o.SyncMode.Default?await this.payloadsByPreparingForServer(e):[],syncMode:r}}async createServerSyncOperation(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.SyncMode.Default;const i=await this.getLastSyncToken(),a=await this.getPaginationToken(),s=new Ot(e,(async(e,t,r)=>{switch(e){case wt.Response:if(this.dealloced)return;null!=t&&t.hasError?this.handleErrorServerResponse(t):t&&await this.handleSuccessServerResponse(s,t);break;case wt.StatusChanged:r&&this.opStatus.setUploadStatus(r.completedUploadCount,r.totalUploadCount)}}),i,a,this.apiService);return this.log("Syncing online user","source",o.SyncSource[r],"operation id",s.id,"integrity check",t,"mode",o.SyncMode[n],"syncToken",i,"cursorToken",a,"payloads",e),s}async createSyncOperation(e,t,r){if(t){const{uploadPayloads:t,syncMode:n}=await this.getOnlineSyncParameters(e,r.mode);return{operation:await this.createServerSyncOperation(t,(0,d.useBoolean)(r.checkIntegrity,!1),r.source,n),mode:n}}{const{uploadPayloads:t}=this.getOfflineSyncParameters(e,r.mode);return{operation:this.createOfflineSyncOperation(t,r.source,r.mode),mode:r.mode||o.SyncMode.Default}}}async performSync(e){const{shouldExecuteSync:t,releaseLock:r}=this.configureSyncLock(),{items:n,beginDate:i,frozenDirtyIndex:a,neverSyncedDeleted:s}=await this.prepareForSync(e),c=this.getPendingRequestsMadeInTimeToPiggyBackOnCurrentRequest();if(!t)return this.deferSyncRequest(e);if(this.dealloced)return;const l=await this.prepareForSyncExecution(n,c,i,a),u=this.sessionManager.online(),{operation:d,mode:p}=await this.createSyncOperation(l.map((e=>e.payloadRepresentation())),u,e),h=d.run();if(this.currentSyncRequestPromise=h,await h,this.dealloced)return;r();const{hasError:f}=await this.handleSyncOperationFinish(d,e,s,p);f||await this.potentiallySyncAgainAfterSyncCompletion(p,e,c,u)||(e.checkIntegrity&&await this.notifyEventSync(o.SyncEvent.SyncRequestsIntegrityCheck,{source:e.source}),await this.notifyEventSync(o.SyncEvent.SyncCompletedWithAllItemsUploadedAndDownloaded,{source:e.source}),this.resolvePendingSyncRequestsThatMadeItInTimeOfCurrentRequest(c))}async handleOfflineResponse(e){this.log("Offline Sync Response",e);const t=this.payloadManager.getMasterCollection(),r=new i.DeltaOfflineSaved(t,e.savedPayloads).result(),n=await this.payloadManager.emitDeltaEmit(r);await this.persistPayloads(n),this.opStatus.clearError(),await this.notifyEvent(o.SyncEvent.SingleRoundTripSyncCompleted,e)}handleErrorServerResponse(e){var t;this.log("Sync Error",e),401===e.status&&this.notifyEvent(o.SyncEvent.InvalidSession),null===(t=this.opStatus)||void 0===t||t.setError(e.error),this.notifyEvent(o.SyncEvent.SyncError,e)}async handleSuccessServerResponse(e,t){this._simulate_latency&&await(0,d.sleep)(this._simulate_latency.latency),this.opStatus.clearError(),this.opStatus.setDownloadStatus(t.retrievedPayloads.length);const r=this.payloadManager.getMasterCollection(),n=this.historyService.getHistoryMapCopy(),a=new Bt({retrievedPayloads:await this.processServerPayloads(t.retrievedPayloads,i.PayloadSource.RemoteRetrieved),savedPayloads:t.savedPayloads,uuidConflictPayloads:await this.processServerPayloads(t.uuidConflictPayloads,i.PayloadSource.RemoteRetrieved),dataConflictPayloads:await this.processServerPayloads(t.dataConflictPayloads,i.PayloadSource.RemoteRetrieved),rejectedPayloads:await this.processServerPayloads(t.rejectedPayloads,i.PayloadSource.RemoteRetrieved)},r,e.payloadsSavedOrSaving,n);this.log("Online Sync Response","Operator ID",e.id,t.rawResponse.data,"Decrypted payloads",a.payloadSet);const s=a.result();for(const e of s){const t=await this.payloadManager.emitDeltaEmit(e);await this.persistPayloads(t)}await Promise.all([this.setLastSyncToken(t.lastSyncToken),this.setPaginationToken(t.paginationToken),this.notifyEvent(o.SyncEvent.SingleRoundTripSyncCompleted,t)])}async processServerPayloads(e,t){const r=e.map((e=>Ut(e,t))),{encrypted:n,deleted:o}=(0,i.CreateNonDecryptedPayloadSplit)(r),a=[...o],{rootKeyEncryption:s,itemsKeyEncryption:c}=(0,j.SplitPayloadsByEncryptionType)(n),{results:l,map:u}=await this.decryptServerItemsKeys(s||[]);if((0,d.extendArray)(a,l),c){const e=await this.decryptProcessedServerPayloads(c,u);(0,d.extendArray)(a,e)}return a}async decryptServerItemsKeys(e){const t={};if(0===e.length)return{results:[],map:t};const r={usesRootKeyWithKeyLookup:{items:e}},o=await this.protocolService.decryptSplit(r);return o.forEach((e=>{(0,i.isDecryptedPayload)(e)&&e.content_type===n.ContentType.ItemsKey&&(t[e.uuid]=e)})),{results:o,map:t}}async decryptProcessedServerPayloads(e,t){return Promise.all(e.map((async e=>{const r=t[e.items_key_id],n=r?(0,i.CreateDecryptedItemFromPayload)(r):void 0,o={};return n?o.usesItemsKey={items:[e],key:n}:o.usesItemsKeyWithKeyLookup={items:[e]},this.protocolService.decryptSplitSingle(o)})))}async handleSyncOperationFinish(e,t,r,n){return this.opStatus.setDidEnd(),this.opStatus.hasError()?{hasError:!0}:(this.opStatus.reset(),this.lastSyncDate=new Date,e instanceof Ot&&e.numberOfItemsInvolved>=this.majorChangeThreshold&&this.notifyEvent(o.SyncEvent.MajorDataChange),r.length>0&&await this.handleNeverSyncedDeleted(r),n!==o.SyncMode.DownloadFirst&&await this.notifyEvent(o.SyncEvent.SyncCompletedWithAllItemsUploaded,{source:t.source}),{hasError:!1})}async handleDownloadFirstCompletionAndSyncAgain(e,t){e&&(this.completedOnlineDownloadFirstSync=!0),await this.notifyEvent(o.SyncEvent.DownloadFirstSyncCompleted),await this.sync({source:o.SyncSource.AfterDownloadFirst,checkIntegrity:!0,awaitAll:t.awaitAll})}async syncAgainByHandlingRequestsWaitingInResolveQueue(e){this.log("Syncing again from resolve queue");const t=this.sync({source:o.SyncSource.ResolveQueue,checkIntegrity:e.checkIntegrity});e.awaitAll&&await t}async syncAgainByHandlingNewDirtyItems(e){await this.sync({source:o.SyncSource.MoreDirtyItems,checkIntegrity:e.checkIntegrity,awaitAll:e.awaitAll})}resolvePendingSyncRequestsThatMadeItInTimeOfCurrentRequest(e){for(const t of e)t.resolve()}async potentiallySyncAgainAfterSyncCompletion(e,t,r,n){if(e===o.SyncMode.DownloadFirst)return await this.handleDownloadFirstCompletionAndSyncAgain(n,t),this.resolvePendingSyncRequestsThatMadeItInTimeOfCurrentRequest(r),!0;const i=this.popSpawnQueue(),a=this.resolveQueue.length>0;return!i&&a?(await this.syncAgainByHandlingRequestsWaitingInResolveQueue(t),this.resolvePendingSyncRequestsThatMadeItInTimeOfCurrentRequest(r),!0):this.itemsNeedingSync().length>0&&(await this.syncAgainByHandlingNewDirtyItems(t),this.resolvePendingSyncRequestsThatMadeItInTimeOfCurrentRequest(r),!0)}async handleNeverSyncedDeleted(e){const t=e.map((e=>e.payloadRepresentation({dirty:!1})));await this.payloadManager.emitPayloads(t,i.PayloadEmitSource.LocalChanged),await this.persistPayloads(t)}async persistPayloads(e){if(0!==e.length&&!this.dealloced)return this.storageService.savePayloads(e).catch((e=>{this.notifyEvent(o.SyncEvent.DatabaseWriteError,e),ne.W.error(e)}))}setInSync(e){e!==!this.outOfSync&&(e?(this.outOfSync=!1,this.notifyEvent(o.SyncEvent.ExitOutOfSync)):(this.outOfSync=!0,this.notifyEvent(o.SyncEvent.EnterOutOfSync)))}async handleEvent(e){e.type===o.IntegrityEvent.IntegrityCheckCompleted&&await this.handleIntegrityCheckEventResponse(e.payload)}async handleIntegrityCheckEventResponse(e){const t=e.rawPayloads;if(0===t.length)return void this.setInSync(!0);const r=(0,i.FilterDisallowedRemotePayloadsAndMap)(t).map((e=>Ut(e,i.PayloadSource.RemoteRetrieved))),n=(0,i.CreateNonDecryptedPayloadSplit)(r),a=(0,j.SplitPayloadsByEncryptionType)(n.encrypted),s=(0,j.CreateDecryptionSplitWithKeyLookup)(a),c=await this.protocolService.decryptSplit(s);this.setInSync(!1),await this.emitOutOfSyncRemotePayloads([...c,...n.deleted]);const l=e.source!==o.SyncSource.ResolveOutOfSync;await this.sync({checkIntegrity:l,source:o.SyncSource.ResolveOutOfSync})}async emitOutOfSyncRemotePayloads(e){const t=new i.DeltaOutOfSync(this.payloadManager.getMasterCollection(),i.ImmutablePayloadCollection.WithPayloads(e),this.historyService.getHistoryMapCopy()).result();await this.payloadManager.emitDeltaEmit(t),await this.persistPayloads(t.emits)}async getDiagnostics(){const e=(0,d.Uuids)(this.itemsNeedingSync());return{sync:{syncToken:await this.getLastSyncToken(),cursorToken:await this.getPaginationToken(),dirtyIndexAtLastPresyncSave:this.dirtyIndexAtLastPresyncSave,lastSyncDate:this.lastSyncDate,outOfSync:this.outOfSync,completedOnlineDownloadFirstSync:this.completedOnlineDownloadFirstSync,clientLocked:this.clientLocked,databaseLoaded:this.databaseLoaded,syncLock:this.syncLock,dealloced:this.dealloced,itemsNeedingSync:e,itemsNeedingSyncCount:e.length,pendingRequestCount:this.resolveQueue.length+this.spawnQueue.length}}}ut_setDatabaseLoaded(e){this.databaseLoaded=e}ut_clearLastSyncDate(){this.lastSyncDate=void 0}ut_beginLatencySimulator(e){this._simulate_latency={latency:e||1e3,enabled:!0}}ut_endLatencySimulator(){this._simulate_latency=void 0}}},10715:(e,t,r)=>{r.d(t,{D8:()=>c,DU:()=>o,Oq:()=>a,in:()=>i,jV:()=>s});var n=r(21503);const i="2.147.1",o="1.0.0",a="2.0.0";function s(e,t){return-1===c(e,t)}function c(e,t){return(0,n.eq)(e,t)?0:(0,n.gt)(e,t)?1:-1}},5056:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0,t.Deferred=()=>{let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));return{resolve:e,reject:t,promise:r}}},85485:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isSameDay=t.assertUnreachable=t.sleep=t.truncateHexString=t.hasGetter=t.isValidUrl=t.deepFreeze=t.pickByCopy=t.deepMerge=t.Copy=t.joinPaths=t.omitByCopy=t.omitInPlace=t.withoutLastElement=t.jsonParseEmbeddedKeys=t.topLevelCompare=t.dateSorted=t.omitUndefinedCopy=t.sortByKey=t.sortedCopy=t.objectToValueArray=t.arrayByRemovingFromIndex=t.addAtIndex=t.removeFromIndex=t.compareValues=t.arrayByDifference=t.filterFromArray=t.addIfUnique=t.removeFromArray=t.subtractFromArray=t.extendArray=t.lastElement=t.uniqueArrayByKey=t.uniqueArray=t.uniqCombineObjArrays=t.greaterOfTwoDates=t.isString=t.isEmpty=t.isNotUndefined=t.isNullOrUndefined=t.isFunction=t.isObject=t.sureSearchArray=t.searchArray=t.findInArray=t.isReactNativeEnvironment=t.isWebCryptoAvailable=t.isWebEnvironment=t.dictToArray=t.getGlobalScope=void 0,t.useBoolean=t.assert=t.log=t.secondHalfOfString=t.firstHalfOfString=t.splitString=t.nonSecureRandomIdentifier=t.dateToLocalizedString=t.sanitizeHtmlString=t.convertTimestampToMilliseconds=t.arraysEqual=t.naturalSort=void 0;const i=r(66181),o=r(31773),a="undefined"!=typeof Intl?new Intl.Collator("en",{numeric:!0}):void 0;function s(){return"undefined"!=typeof window?window:void 0!==r.g?r.g:null}function c(){return null!==s()}function l(){return"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function u(e,t){return(0,o.find)(e,t)}function d(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function p(e){return null==e}function h(e,t){const r=e.indexOf(t);-1!==r&&e.splice(r,1)}function f(e,t){e.splice(t,1)}function y(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const n of r)if(e[n]!==t[n])return!1;return!0}function v(e){return e instanceof Date?new Date(e):d(e)?JSON.parse(JSON.stringify(e)):e}var g;let m;function b(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Function.prototype.apply.call(console.log,console,arguments)}t.getGlobalScope=s,t.dictToArray=function(e){return Object.values(e)},t.isWebEnvironment=c,t.isWebCryptoAvailable=function(){return c()&&!l()&&!(document&&document.documentMode)||/Edge/.test(navigator.userAgent)&&window.crypto&&!!window.crypto.subtle},t.isReactNativeEnvironment=l,t.findInArray=function(e,t,r){return e.find((e=>e[t]===r))},t.searchArray=u,t.sureSearchArray=function(e,t){return u(e,t)},t.isObject=d,t.isFunction=function(e){return null!==e&&"function"==typeof e},t.isNullOrUndefined=p,t.isNotUndefined=function(e){return null!=e},t.isEmpty=function(e){return!e||0===e.length},t.isString=function(e){return"string"==typeof e||e instanceof String},t.greaterOfTwoDates=function(e,t){return e>t?e:t},t.uniqCombineObjArrays=function(e,t,r){return(0,o.uniqWith)(e.concat(t),((e,t)=>{for(const n of r)if(e[n]!==t[n])return!1;return!0}))},t.uniqueArray=function(e){return(0,o.uniq)(e)},t.uniqueArrayByKey=function(e,t){return(0,o.uniqWith)(e,((e,r)=>e[t]===r[t]))},t.lastElement=function(e){return e[e.length-1]},t.extendArray=function(e,t){for(const r of t)e.push(r)},t.subtractFromArray=function(e,t){for(const r of t)h(e,r)},t.removeFromArray=h,t.addIfUnique=function(e,t){return!e.includes(t)&&(e.push(t),!0)},t.filterFromArray=function(e,t){(0,o.remove)(e,t)},t.arrayByDifference=function(e,t){return e.filter((e=>!t.includes(e))).concat(t.filter((t=>!e.includes(t))))},t.compareValues=function(e,t){return!(e&&!t||!e&&t)&&(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof String&&t instanceof String?e===t:y(e,t))},t.removeFromIndex=f,t.addAtIndex=function(e,t,r){e.splice(r,0,t)},t.arrayByRemovingFromIndex=function(e,t){const r=e.slice();return f(r,t),r},t.objectToValueArray=function(e){const t=[];for(const r of Object.keys(e))t.push(e[r]);return t},t.sortedCopy=function(e){const t=Object.keys(e).sort(),r={};for(const n of t)r[n]=e[n];return v(r)},t.sortByKey=(e,t)=>{const r=[...e];return r.sort(((e,r)=>{const n=e[t],i=r[t];return n<i?-1:n>i?1:0})),r},t.omitUndefinedCopy=function(e){const t={};for(const r of Object.keys(e))p(e[r])||(t[r]=e[r]);return t},t.dateSorted=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.sort(((e,n)=>{const i=e[t].getTime(),o=n[t].getTime(),a=r?1:-1;return i<o?-1*a:i>o?1*a:0}))},t.topLevelCompare=y,t.jsonParseEmbeddedKeys=function(e){const t={};for(const r of Object.keys(e)){let n;try{n=JSON.parse(e[r])}catch(t){n=e[r]}t[r]=n}return t},t.withoutLastElement=e=>e.slice(0,-1),t.omitInPlace=function(e,t){if(e)for(const r of t)delete e[r]},t.omitByCopy=function(e,t){if(p(e))return;const r=Object.assign({},e);for(const e of t)delete r[e];return r},t.joinPaths=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map(((e,t)=>0===t?e.trim().replace(/[/]*$/g,""):e.trim().replace(/(^[/]*|[/]*$)/g,""))).filter((e=>e.length)).join("/")},t.Copy=v,t.deepMerge=function(e,t){if(!e||!t)throw"Attempting to deepMerge with null values";return(0,o.mergeWith)(e,t,((e,t)=>{if((0,o.isArray)(e))return t})),e},t.pickByCopy=function(e,t){const r={};for(const n of t)r[n]=e[n];return v(r)},t.deepFreeze=function e(t){const r=Object.getOwnPropertyNames(t);for(const n of r){const r=t[n];r&&"object"==typeof r&&!Object.isFrozen(r)?t[n]=e(r):t[n]=r}return Object.freeze(t)},t.isValidUrl=function(e){try{return new URL(e),!0}catch(e){return!1}},t.hasGetter=function(e,t){const r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),t);return r&&!p(r.get)},t.truncateHexString=function(e,t){const r=t/4;return e.substring(0,r)},t.sleep=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n(this,void 0,void 0,(function*(){return t&&console.warn("Sleeping for ".concat(e,"ms")),new Promise((t=>{setTimeout((function(){t()}),e)}))}))},t.assertUnreachable=function(e){throw Error("Unchecked case "+e)},t.isSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},t.naturalSort=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";switch(r){case"asc":return[...e].sort(a?(e,r)=>a.compare(e[t],r[t]):(e,r)=>e[t].localeCompare(r[t],"en",{numeric:!0}));case"desc":return[...e].sort(a?(e,r)=>a.compare(r[t],e[t]):(e,r)=>r[t].localeCompare(e[t],"en",{numeric:!0}))}},t.arraysEqual=function(e,t){return e.length===t.length&&e.every((e=>t.includes(e)))&&t.every((t=>e.includes(t)))},function(e){e[e.Seconds=10]="Seconds",e[e.Milliseconds=13]="Milliseconds",e[e.Microseconds=16]="Microseconds"}(g||(g={})),t.convertTimestampToMilliseconds=function(e){switch(String(e).length){case g.Seconds:return 1e3*e;case g.Milliseconds:return e;case g.Microseconds:return Math.floor(e/1e3);default:throw"Unhandled timestamp precision: ".concat(e)}},t.sanitizeHtmlString=function(e){return(0,i.sanitize)(e)},t.dateToLocalizedString=function(e){if("undefined"!=typeof Intl&&Intl.DateTimeFormat&&"undefined"!=typeof navigator){if(!m){const e=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;m=new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"})}return m.format(e)}return e.toDateString()+" "+e.toLocaleTimeString()},t.nonSecureRandomIdentifier=function(){return"".concat(100*Math.random()).replace(".","")},t.splitString=function(e,t){const r=e.length/t,n=[];for(let i=0;i<t;i++){const t=e.slice(r*i,r*(i+1));n.push(t)}return n},t.firstHalfOfString=function(e){return e.substring(0,e.length/2)},t.secondHalfOfString=function(e){return e.substring(e.length/2,e.length)},t.log=function(e){const t=new Date,r="".concat(t.toLocaleTimeString().replace(" PM","").replace(" AM",""),".").concat(t.getMilliseconds());for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];b("%c".concat(e,"%c").concat(r),"color: black; font-weight: bold; margin-right: 4px","color: gray",...i)},t.assert=function(e){if(void 0===e)throw new Error("Assertion failed; value must be defined")},t.useBoolean=function(e,t){return null!=e?e:t}},42414:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Uuids=void 0,t.Uuids=function(e){return e.map((e=>e.uuid))}},56221:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UuidGenerator=void 0,t.UuidGenerator=class{static SetGenerator(e){this.syncUuidFunc=e}static GenerateUuid(){return this.syncUuidFunc()}}},29308:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UuidMap=void 0;const n=r(85485);class i{constructor(){this.directMap={},this.inverseMap={}}makeCopy(){const e=new i;return e.directMap=Object.assign({},this.directMap),e.inverseMap=Object.assign({},this.inverseMap),e}getDirectRelationships(e){return this.directMap[e]||[]}getInverseRelationships(e){return this.inverseMap[e]||[]}establishRelationship(e,t){this.establishDirectRelationship(e,t),this.establishInverseRelationship(e,t)}deestablishRelationship(e,t){this.deestablishDirectRelationship(e,t),this.deestablishInverseRelationship(e,t)}setAllRelationships(e,t){const r=this.directMap[e]||[];this.directMap[e]=t;for(const t of r)this.deestablishInverseRelationship(e,t);for(const r of t)this.establishInverseRelationship(e,r)}removeFromMap(e){const t=this.directMap[e]||[];for(const r of t)(0,n.removeFromArray)(this.inverseMap[r]||[],e);delete this.directMap[e];const r=this.inverseMap[e]||[];for(const t of r)(0,n.removeFromArray)(this.directMap[t]||[],e);delete this.inverseMap[e]}establishDirectRelationship(e,t){const r=this.directMap[e]||[];(0,n.addIfUnique)(r,t),this.directMap[e]=r}establishInverseRelationship(e,t){const r=this.inverseMap[t]||[];(0,n.addIfUnique)(r,e),this.inverseMap[t]=r}deestablishDirectRelationship(e,t){const r=this.directMap[e]||[];(0,n.removeFromArray)(r,t),this.directMap[e]=r}deestablishInverseRelationship(e,t){const r=this.inverseMap[t]||[];(0,n.removeFromArray)(r,e),this.inverseMap[t]=r}}t.UuidMap=i},9314:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(85485),t),i(r(56221),t),i(r(29308),t),i(r(42414),t),i(r(5056),t)},64657:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9314),t)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var n={};return(()=>{r.r(n),r.d(n,{AccountSyncOperation:()=>s.U8,AllowedBatchContentTypes:()=>s.Jg,AllowedBatchStreaming:()=>s.h6,ApplicationGroupEvent:()=>t.$,ApplicationService:()=>s.IX,BaseMigration:()=>a._r,ChallengeOperation:()=>s.ne,ChallengeResponse:()=>s.ap,ChallengeService:()=>s.PJ,ComponentManagerEvent:()=>s.VG,ComponentViewer:()=>s.SV,DiskStorageService:()=>s.e5,FileViewController:()=>i.rp,GetSortedPayloadsByPriority:()=>s.xO,HttpVerb:()=>s.FH,IconsController:()=>i.iB,ItemGroupController:()=>i.Jj,ItemManager:()=>s.A,JwtSession:()=>s.jW,ListedService:()=>s.o8,LiveItem:()=>e.J5,MINIMUM_PASSWORD_LENGTH:()=>s.aM,Migration2_0_0:()=>a.ce,Migration2_0_15:()=>a.ly,Migration2_20_0:()=>a.kK,Migration2_36_0:()=>a.qW,Migration2_42_0:()=>a.Ni,Migration2_7_0:()=>a.pI,MigrationClasses:()=>a.R_,MissingAccountParams:()=>s.Sn,MutatorService:()=>s.Vu,NoteViewController:()=>i._p,OfflineSyncOperation:()=>s.Bi,Paths:()=>s.nB,PayloadManager:()=>s.Ot,PreviousSnjsVersion1_0_0:()=>c.DU,PreviousSnjsVersion2_0_0:()=>c.Oq,ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction:()=>s.Ps,ProtectionEvent:()=>s.Hh,ProtectionSessionDurations:()=>s.jg,ReactNativeToWebEvent:()=>i.Zw,SNActionsService:()=>s.UP,SNApiService:()=>s.QL,SNApplication:()=>e.UC,SNApplicationGroup:()=>t.R,SNComponentManager:()=>s.bJ,SNFeaturesService:()=>s.sX,SNHistoryManager:()=>s.Cv,SNHttpService:()=>s.aJ,SNKeyRecoveryService:()=>s.Mj,SNLog:()=>o.W,SNMfaService:()=>s.P$,SNMigrationService:()=>s.FR,SNPreferencesService:()=>s.J_,SNProtectionService:()=>s.Xr,SNSessionManager:()=>s.Lb,SNSettingsService:()=>s.kf,SNSingletonManager:()=>s.c5,SNSyncService:()=>s.xu,SNWebSocketsService:()=>s.g7,ServerSyncResponse:()=>s.Fi,ServerSyncResponseResolver:()=>s.y0,Session:()=>s.z_,SessionEvent:()=>s.Px,SessionFromRawStorageValue:()=>s.d6,SnjsVersion:()=>c.in,SyncEvent:()=>e.wM,SyncOpStatus:()=>s.BU,SyncUpDownLimit:()=>s.jH,TokenSession:()=>s.NA,UnprotectedAccessSecondsDuration:()=>s.Fr,WebSocketsServiceEvent:()=>s.fA,applicationEventForSyncEvent:()=>e.ie,compareSemVersions:()=>c.D8,environmentToString:()=>e.g,isEnvironmentMobile:()=>e.Im,isEnvironmentWebOrDesktop:()=>e.Ak,isRightVersionGreaterThanLeft:()=>c.jV,isValidProtectionSessionLength:()=>s.z4,platformFromString:()=>e.FB,platformToString:()=>e._e});var e=r(58364),t=r(82698),i=r(78338),o=r(44412),a=r(24431),s=r(65432),c=r(10715),l=r(10256),u={};for(const e in l)["default","LiveItem","SNApplication","SyncEvent","applicationEventForSyncEvent","environmentToString","isEnvironmentMobile","isEnvironmentWebOrDesktop","platformFromString","platformToString","ApplicationGroupEvent","SNApplicationGroup","FileViewController","IconsController","ItemGroupController","NoteViewController","ReactNativeToWebEvent","SNLog","BaseMigration","Migration2_0_0","Migration2_0_15","Migration2_20_0","Migration2_36_0","Migration2_42_0","Migration2_7_0","MigrationClasses","AccountSyncOperation","AllowedBatchContentTypes","AllowedBatchStreaming","ApplicationService","ChallengeOperation","ChallengeResponse","ChallengeService","ComponentManagerEvent","ComponentViewer","DiskStorageService","GetSortedPayloadsByPriority","HttpVerb","ItemManager","JwtSession","ListedService","MINIMUM_PASSWORD_LENGTH","MissingAccountParams","MutatorService","OfflineSyncOperation","Paths","PayloadManager","ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction","ProtectionEvent","ProtectionSessionDurations","SNActionsService","SNApiService","SNComponentManager","SNFeaturesService","SNHistoryManager","SNHttpService","SNKeyRecoveryService","SNMfaService","SNMigrationService","SNPreferencesService","SNProtectionService","SNSessionManager","SNSettingsService","SNSingletonManager","SNSyncService","SNWebSocketsService","ServerSyncResponse","ServerSyncResponseResolver","Session","SessionEvent","SessionFromRawStorageValue","SyncOpStatus","SyncUpDownLimit","TokenSession","UnprotectedAccessSecondsDuration","WebSocketsServiceEvent","isValidProtectionSessionLength","PreviousSnjsVersion1_0_0","PreviousSnjsVersion2_0_0","SnjsVersion","compareSemVersions","isRightVersionGreaterThanLeft"].indexOf(e)<0&&(u[e]=()=>l[e]);r.d(n,u);var d=r(75082);u={};for(const e in d)["default","LiveItem","SNApplication","SyncEvent","applicationEventForSyncEvent","environmentToString","isEnvironmentMobile","isEnvironmentWebOrDesktop","platformFromString","platformToString","ApplicationGroupEvent","SNApplicationGroup","FileViewController","IconsController","ItemGroupController","NoteViewController","ReactNativeToWebEvent","SNLog","BaseMigration","Migration2_0_0","Migration2_0_15","Migration2_20_0","Migration2_36_0","Migration2_42_0","Migration2_7_0","MigrationClasses","AccountSyncOperation","AllowedBatchContentTypes","AllowedBatchStreaming","ApplicationService","ChallengeOperation","ChallengeResponse","ChallengeService","ComponentManagerEvent","ComponentViewer","DiskStorageService","GetSortedPayloadsByPriority","HttpVerb","ItemManager","JwtSession","ListedService","MINIMUM_PASSWORD_LENGTH","MissingAccountParams","MutatorService","OfflineSyncOperation","Paths","PayloadManager","ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction","ProtectionEvent","ProtectionSessionDurations","SNActionsService","SNApiService","SNComponentManager","SNFeaturesService","SNHistoryManager","SNHttpService","SNKeyRecoveryService","SNMfaService","SNMigrationService","SNPreferencesService","SNProtectionService","SNSessionManager","SNSettingsService","SNSingletonManager","SNSyncService","SNWebSocketsService","ServerSyncResponse","ServerSyncResponseResolver","Session","SessionEvent","SessionFromRawStorageValue","SyncOpStatus","SyncUpDownLimit","TokenSession","UnprotectedAccessSecondsDuration","WebSocketsServiceEvent","isValidProtectionSessionLength","PreviousSnjsVersion1_0_0","PreviousSnjsVersion2_0_0","SnjsVersion","compareSemVersions","isRightVersionGreaterThanLeft"].indexOf(e)<0&&(u[e]=()=>d[e]);r.d(n,u);var p=r(70295);u={};for(const e in p)["default","LiveItem","SNApplication","SyncEvent","applicationEventForSyncEvent","environmentToString","isEnvironmentMobile","isEnvironmentWebOrDesktop","platformFromString","platformToString","ApplicationGroupEvent","SNApplicationGroup","FileViewController","IconsController","ItemGroupController","NoteViewController","ReactNativeToWebEvent","SNLog","BaseMigration","Migration2_0_0","Migration2_0_15","Migration2_20_0","Migration2_36_0","Migration2_42_0","Migration2_7_0","MigrationClasses","AccountSyncOperation","AllowedBatchContentTypes","AllowedBatchStreaming","ApplicationService","ChallengeOperation","ChallengeResponse","ChallengeService","ComponentManagerEvent","ComponentViewer","DiskStorageService","GetSortedPayloadsByPriority","HttpVerb","ItemManager","JwtSession","ListedService","MINIMUM_PASSWORD_LENGTH","MissingAccountParams","MutatorService","OfflineSyncOperation","Paths","PayloadManager","ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction","ProtectionEvent","ProtectionSessionDurations","SNActionsService","SNApiService","SNComponentManager","SNFeaturesService","SNHistoryManager","SNHttpService","SNKeyRecoveryService","SNMfaService","SNMigrationService","SNPreferencesService","SNProtectionService","SNSessionManager","SNSettingsService","SNSingletonManager","SNSyncService","SNWebSocketsService","ServerSyncResponse","ServerSyncResponseResolver","Session","SessionEvent","SessionFromRawStorageValue","SyncOpStatus","SyncUpDownLimit","TokenSession","UnprotectedAccessSecondsDuration","WebSocketsServiceEvent","isValidProtectionSessionLength","PreviousSnjsVersion1_0_0","PreviousSnjsVersion2_0_0","SnjsVersion","compareSemVersions","isRightVersionGreaterThanLeft"].indexOf(e)<0&&(u[e]=()=>p[e]);r.d(n,u);var h=r(14581);u={};for(const e in h)["default","LiveItem","SNApplication","SyncEvent","applicationEventForSyncEvent","environmentToString","isEnvironmentMobile","isEnvironmentWebOrDesktop","platformFromString","platformToString","ApplicationGroupEvent","SNApplicationGroup","FileViewController","IconsController","ItemGroupController","NoteViewController","ReactNativeToWebEvent","SNLog","BaseMigration","Migration2_0_0","Migration2_0_15","Migration2_20_0","Migration2_36_0","Migration2_42_0","Migration2_7_0","MigrationClasses","AccountSyncOperation","AllowedBatchContentTypes","AllowedBatchStreaming","ApplicationService","ChallengeOperation","ChallengeResponse","ChallengeService","ComponentManagerEvent","ComponentViewer","DiskStorageService","GetSortedPayloadsByPriority","HttpVerb","ItemManager","JwtSession","ListedService","MINIMUM_PASSWORD_LENGTH","MissingAccountParams","MutatorService","OfflineSyncOperation","Paths","PayloadManager","ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction","ProtectionEvent","ProtectionSessionDurations","SNActionsService","SNApiService","SNComponentManager","SNFeaturesService","SNHistoryManager","SNHttpService","SNKeyRecoveryService","SNMfaService","SNMigrationService","SNPreferencesService","SNProtectionService","SNSessionManager","SNSettingsService","SNSingletonManager","SNSyncService","SNWebSocketsService","ServerSyncResponse","ServerSyncResponseResolver","Session","SessionEvent","SessionFromRawStorageValue","SyncOpStatus","SyncUpDownLimit","TokenSession","UnprotectedAccessSecondsDuration","WebSocketsServiceEvent","isValidProtectionSessionLength","PreviousSnjsVersion1_0_0","PreviousSnjsVersion2_0_0","SnjsVersion","compareSemVersions","isRightVersionGreaterThanLeft"].indexOf(e)<0&&(u[e]=()=>h[e]);r.d(n,u);var f=r(16418);u={};for(const e in f)["default","LiveItem","SNApplication","SyncEvent","applicationEventForSyncEvent","environmentToString","isEnvironmentMobile","isEnvironmentWebOrDesktop","platformFromString","platformToString","ApplicationGroupEvent","SNApplicationGroup","FileViewController","IconsController","ItemGroupController","NoteViewController","ReactNativeToWebEvent","SNLog","BaseMigration","Migration2_0_0","Migration2_0_15","Migration2_20_0","Migration2_36_0","Migration2_42_0","Migration2_7_0","MigrationClasses","AccountSyncOperation","AllowedBatchContentTypes","AllowedBatchStreaming","ApplicationService","ChallengeOperation","ChallengeResponse","ChallengeService","ComponentManagerEvent","ComponentViewer","DiskStorageService","GetSortedPayloadsByPriority","HttpVerb","ItemManager","JwtSession","ListedService","MINIMUM_PASSWORD_LENGTH","MissingAccountParams","MutatorService","OfflineSyncOperation","Paths","PayloadManager","ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction","ProtectionEvent","ProtectionSessionDurations","SNActionsService","SNApiService","SNComponentManager","SNFeaturesService","SNHistoryManager","SNHttpService","SNKeyRecoveryService","SNMfaService","SNMigrationService","SNPreferencesService","SNProtectionService","SNSessionManager","SNSettingsService","SNSingletonManager","SNSyncService","SNWebSocketsService","ServerSyncResponse","ServerSyncResponseResolver","Session","SessionEvent","SessionFromRawStorageValue","SyncOpStatus","SyncUpDownLimit","TokenSession","UnprotectedAccessSecondsDuration","WebSocketsServiceEvent","isValidProtectionSessionLength","PreviousSnjsVersion1_0_0","PreviousSnjsVersion2_0_0","SnjsVersion","compareSemVersions","isRightVersionGreaterThanLeft"].indexOf(e)<0&&(u[e]=()=>f[e]);r.d(n,u);var y=r(84945);u={};for(const e in y)["default","LiveItem","SNApplication","SyncEvent","applicationEventForSyncEvent","environmentToString","isEnvironmentMobile","isEnvironmentWebOrDesktop","platformFromString","platformToString","ApplicationGroupEvent","SNApplicationGroup","FileViewController","IconsController","ItemGroupController","NoteViewController","ReactNativeToWebEvent","SNLog","BaseMigration","Migration2_0_0","Migration2_0_15","Migration2_20_0","Migration2_36_0","Migration2_42_0","Migration2_7_0","MigrationClasses","AccountSyncOperation","AllowedBatchContentTypes","AllowedBatchStreaming","ApplicationService","ChallengeOperation","ChallengeResponse","ChallengeService","ComponentManagerEvent","ComponentViewer","DiskStorageService","GetSortedPayloadsByPriority","HttpVerb","ItemManager","JwtSession","ListedService","MINIMUM_PASSWORD_LENGTH","MissingAccountParams","MutatorService","OfflineSyncOperation","Paths","PayloadManager","ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction","ProtectionEvent","ProtectionSessionDurations","SNActionsService","SNApiService","SNComponentManager","SNFeaturesService","SNHistoryManager","SNHttpService","SNKeyRecoveryService","SNMfaService","SNMigrationService","SNPreferencesService","SNProtectionService","SNSessionManager","SNSettingsService","SNSingletonManager","SNSyncService","SNWebSocketsService","ServerSyncResponse","ServerSyncResponseResolver","Session","SessionEvent","SessionFromRawStorageValue","SyncOpStatus","SyncUpDownLimit","TokenSession","UnprotectedAccessSecondsDuration","WebSocketsServiceEvent","isValidProtectionSessionLength","PreviousSnjsVersion1_0_0","PreviousSnjsVersion2_0_0","SnjsVersion","compareSemVersions","isRightVersionGreaterThanLeft"].indexOf(e)<0&&(u[e]=()=>y[e]);r.d(n,u);var v=r(20819);u={};for(const e in v)["default","LiveItem","SNApplication","SyncEvent","applicationEventForSyncEvent","environmentToString","isEnvironmentMobile","isEnvironmentWebOrDesktop","platformFromString","platformToString","ApplicationGroupEvent","SNApplicationGroup","FileViewController","IconsController","ItemGroupController","NoteViewController","ReactNativeToWebEvent","SNLog","BaseMigration","Migration2_0_0","Migration2_0_15","Migration2_20_0","Migration2_36_0","Migration2_42_0","Migration2_7_0","MigrationClasses","AccountSyncOperation","AllowedBatchContentTypes","AllowedBatchStreaming","ApplicationService","ChallengeOperation","ChallengeResponse","ChallengeService","ComponentManagerEvent","ComponentViewer","DiskStorageService","GetSortedPayloadsByPriority","HttpVerb","ItemManager","JwtSession","ListedService","MINIMUM_PASSWORD_LENGTH","MissingAccountParams","MutatorService","OfflineSyncOperation","Paths","PayloadManager","ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction","ProtectionEvent","ProtectionSessionDurations","SNActionsService","SNApiService","SNComponentManager","SNFeaturesService","SNHistoryManager","SNHttpService","SNKeyRecoveryService","SNMfaService","SNMigrationService","SNPreferencesService","SNProtectionService","SNSessionManager","SNSettingsService","SNSingletonManager","SNSyncService","SNWebSocketsService","ServerSyncResponse","ServerSyncResponseResolver","Session","SessionEvent","SessionFromRawStorageValue","SyncOpStatus","SyncUpDownLimit","TokenSession","UnprotectedAccessSecondsDuration","WebSocketsServiceEvent","isValidProtectionSessionLength","PreviousSnjsVersion1_0_0","PreviousSnjsVersion2_0_0","SnjsVersion","compareSemVersions","isRightVersionGreaterThanLeft"].indexOf(e)<0&&(u[e]=()=>v[e]);r.d(n,u);var g=r(9382);u={};for(const e in g)["default","LiveItem","SNApplication","SyncEvent","applicationEventForSyncEvent","environmentToString","isEnvironmentMobile","isEnvironmentWebOrDesktop","platformFromString","platformToString","ApplicationGroupEvent","SNApplicationGroup","FileViewController","IconsController","ItemGroupController","NoteViewController","ReactNativeToWebEvent","SNLog","BaseMigration","Migration2_0_0","Migration2_0_15","Migration2_20_0","Migration2_36_0","Migration2_42_0","Migration2_7_0","MigrationClasses","AccountSyncOperation","AllowedBatchContentTypes","AllowedBatchStreaming","ApplicationService","ChallengeOperation","ChallengeResponse","ChallengeService","ComponentManagerEvent","ComponentViewer","DiskStorageService","GetSortedPayloadsByPriority","HttpVerb","ItemManager","JwtSession","ListedService","MINIMUM_PASSWORD_LENGTH","MissingAccountParams","MutatorService","OfflineSyncOperation","Paths","PayloadManager","ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction","ProtectionEvent","ProtectionSessionDurations","SNActionsService","SNApiService","SNComponentManager","SNFeaturesService","SNHistoryManager","SNHttpService","SNKeyRecoveryService","SNMfaService","SNMigrationService","SNPreferencesService","SNProtectionService","SNSessionManager","SNSettingsService","SNSingletonManager","SNSyncService","SNWebSocketsService","ServerSyncResponse","ServerSyncResponseResolver","Session","SessionEvent","SessionFromRawStorageValue","SyncOpStatus","SyncUpDownLimit","TokenSession","UnprotectedAccessSecondsDuration","WebSocketsServiceEvent","isValidProtectionSessionLength","PreviousSnjsVersion1_0_0","PreviousSnjsVersion2_0_0","SnjsVersion","compareSemVersions","isRightVersionGreaterThanLeft"].indexOf(e)<0&&(u[e]=()=>g[e]);r.d(n,u);var m=r(64657);u={};for(const e in m)["default","LiveItem","SNApplication","SyncEvent","applicationEventForSyncEvent","environmentToString","isEnvironmentMobile","isEnvironmentWebOrDesktop","platformFromString","platformToString","ApplicationGroupEvent","SNApplicationGroup","FileViewController","IconsController","ItemGroupController","NoteViewController","ReactNativeToWebEvent","SNLog","BaseMigration","Migration2_0_0","Migration2_0_15","Migration2_20_0","Migration2_36_0","Migration2_42_0","Migration2_7_0","MigrationClasses","AccountSyncOperation","AllowedBatchContentTypes","AllowedBatchStreaming","ApplicationService","ChallengeOperation","ChallengeResponse","ChallengeService","ComponentManagerEvent","ComponentViewer","DiskStorageService","GetSortedPayloadsByPriority","HttpVerb","ItemManager","JwtSession","ListedService","MINIMUM_PASSWORD_LENGTH","MissingAccountParams","MutatorService","OfflineSyncOperation","Paths","PayloadManager","ProposedSecondsToDeferUILevelSessionExpirationDuringActiveInteraction","ProtectionEvent","ProtectionSessionDurations","SNActionsService","SNApiService","SNComponentManager","SNFeaturesService","SNHistoryManager","SNHttpService","SNKeyRecoveryService","SNMfaService","SNMigrationService","SNPreferencesService","SNProtectionService","SNSessionManager","SNSettingsService","SNSingletonManager","SNSyncService","SNWebSocketsService","ServerSyncResponse","ServerSyncResponseResolver","Session","SessionEvent","SessionFromRawStorageValue","SyncOpStatus","SyncUpDownLimit","TokenSession","UnprotectedAccessSecondsDuration","WebSocketsServiceEvent","isValidProtectionSessionLength","PreviousSnjsVersion1_0_0","PreviousSnjsVersion2_0_0","SnjsVersion","compareSemVersions","isRightVersionGreaterThanLeft"].indexOf(e)<0&&(u[e]=()=>m[e]);r.d(n,u)})(),n})(),e.exports=t()}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";r.d(n,{default:()=>S});var e,t=r(109),i=new Uint8Array(16);function o(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(i)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&a.test(e)};for(var c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));const u=e=>{var r;const n={[t.Environment.Web]:"web",[t.Environment.Desktop]:"desktop",[t.Environment.Mobile]:"mobile"};return null!==(r=n[e])&&void 0!==r?r:n[t.Environment.Web]},d=()=>{};class p{static get isSupported(){return!(!window.console&&!console)}static get info(){return p.isSupported&&this.enabled?console.log.bind(console):d}static get error(){return p.isSupported?console.error.bind(console):d}}var h,f;let y,v;function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(f="enabled")in(h=p)?Object.defineProperty(h,f,{value:!1,enumerable:!0,configurable:!0,writable:!0}):h[f]=!1,function(e){e.Shift="Shift",e.Ctrl="Control",e.Meta="Meta"}(y||(y={})),function(e){e.Component="component"}(v||(v={}));class S{constructor(e){var t,r;if(b(this,"contentWindow",void 0),b(this,"component",{activeThemes:[],acceptsThemes:!0}),b(this,"sentMessages",[]),b(this,"messageQueue",[]),b(this,"lastStreamedItem",void 0),b(this,"pendingSaveItems",void 0),b(this,"pendingSaveTimeout",void 0),b(this,"pendingSaveParams",void 0),b(this,"messageHandler",void 0),b(this,"keyDownEventListener",void 0),b(this,"keyUpEventListener",void 0),b(this,"clickEventListener",void 0),b(this,"concernTimeouts",[]),b(this,"options",void 0),b(this,"params",void 0),!e||!e.targetWindow)throw new Error("contentWindow must be a valid Window object.");this.params=e,this.options=e.options||{},null==this.options.coallesedSaving&&(this.options.coallesedSaving=!0),null==this.options.coallesedSavingDelay&&(this.options.coallesedSavingDelay=250),null!=this.options.acceptsThemes&&(this.component.acceptsThemes=null===(r=this.options.acceptsThemes)||void 0===r||r),p.enabled=null!==(t=this.options.debug)&&void 0!==t&&t,this.contentWindow=e.targetWindow,this.registerMessageHandler(),this.registerKeyboardEventListeners(),this.registerMouseEventListeners()}deinit(){this.params.onReady=void 0,this.component={acceptsThemes:!0,activeThemes:[]},this.messageQueue=[],this.sentMessages=[],this.lastStreamedItem=void 0,this.pendingSaveItems=void 0,this.pendingSaveTimeout=void 0,this.pendingSaveParams=void 0,this.messageHandler&&(this.contentWindow.document.removeEventListener("message",this.messageHandler),this.contentWindow.removeEventListener("message",this.messageHandler)),this.keyDownEventListener&&this.contentWindow.removeEventListener("keydown",this.keyDownEventListener),this.keyUpEventListener&&this.contentWindow.removeEventListener("keyup",this.keyUpEventListener),this.clickEventListener&&this.contentWindow.removeEventListener("click",this.clickEventListener)}registerMessageHandler(){this.messageHandler=e=>{if(p.info("Components API Message received:",e.data),document.referrer&&new URL(document.referrer).origin!==new URL(e.origin).origin)return;const{data:r}=e,n=(e=>{if("string"!=typeof e)return!1;try{const t=JSON.parse(e),r=Object.prototype.toString.call(t);return"[object Object]"===r||"[object Array]"===r}catch(e){return!1}})(r)?JSON.parse(r):r;if(n){if(void 0===this.component.origin&&n.action===t.ComponentAction.ComponentRegistered)this.component.origin=e.origin;else if(e.origin!==this.component.origin)return;this.handleMessage(n)}else p.error("Invalid data received. Skipping...")},this.contentWindow.document.addEventListener("message",this.messageHandler,!1),this.contentWindow.addEventListener("message",this.messageHandler,!1),p.info("Waiting for messages...")}registerKeyboardEventListeners(){this.keyDownEventListener=e=>{p.info("A key has been pressed: ".concat(e.key)),e.ctrlKey?this.keyDownEvent(y.Ctrl):e.shiftKey?this.keyDownEvent(y.Shift):(e.metaKey||"Meta"===e.key)&&this.keyDownEvent(y.Meta)},this.keyUpEventListener=e=>{p.info("A key has been released: ".concat(e.key)),"Control"===e.key?this.keyUpEvent(y.Ctrl):"Shift"===e.key?this.keyUpEvent(y.Shift):"Meta"===e.key&&this.keyUpEvent(y.Meta)},this.contentWindow.addEventListener("keydown",this.keyDownEventListener,!1),this.contentWindow.addEventListener("keyup",this.keyUpEventListener,!1)}registerMouseEventListeners(){this.clickEventListener=e=>{p.info("A click has been performed."),this.mouseClickEvent()},this.contentWindow.addEventListener("click",this.clickEventListener,!1)}handleMessage(e){switch(e.action){case t.ComponentAction.ComponentRegistered:this.component.sessionKey=e.sessionKey,e.componentData&&(this.component.data=e.componentData),this.onReady(e.data),p.info("Component successfully registered with payload:",e);break;case t.ComponentAction.ActivateThemes:this.activateThemes(e.data.themes);break;default:{var r,n;if(!e.original)return;const t=null===(r=this.sentMessages)||void 0===r?void 0:r.filter((t=>{var r;return t.messageId===(null===(r=e.original)||void 0===r?void 0:r.messageId)}))[0];if(!t){const e=this.contentWindow.document.title,t=("The extension '".concat(e,"' is attempting to communicate with Standard Notes, ")+"but an error is preventing it from doing so. Please restart this extension and try again.").replace("  "," ");return void p.info(t)}null==t||null===(n=t.callback)||void 0===n||n.call(t,e.data);break}}}onReady(e){this.component.environment=e.environment,this.component.platform=e.platform,this.component.uuid=e.uuid;for(const e of this.messageQueue)this.postMessage(e.action,e.data,e.callback);this.messageQueue=[],p.info("Data passed to onReady:",e),this.activateThemes(e.activeThemeUrls||[]),this.postMessage(t.ComponentAction.ThemesActivated,{}),this.params.onReady&&this.params.onReady()}getSelfComponentUUID(){return this.component.uuid}isRunningInDesktopApplication(){return this.component.environment===u(t.Environment.Desktop)}isRunningInMobileApplication(){return this.component.environment===u(t.Environment.Mobile)}getComponentDataValueForKey(e){if(this.component.data)return this.component.data[e]}setComponentDataValueForKey(e,r){if(!this.component.data)throw new Error("The component has not been initialized.");if(!e||e&&0===e.length)throw new Error("The key for the data value should be a valid string.");this.component.data=m(m({},this.component.data),{},{[e]:r}),this.postMessage(t.ComponentAction.SetComponentData,{componentData:this.component.data})}clearComponentData(){this.component.data={},this.postMessage(t.ComponentAction.SetComponentData,{componentData:this.component.data})}postMessage(e,r,n){if(!this.component.sessionKey)return void this.messageQueue.push({action:e,data:r,api:v.Component,callback:n});e===t.ComponentAction.SaveItems&&(r.height=this.params.handleRequestForContentHeight());const i={action:e,data:r,messageId:this.generateUUID(),sessionKey:this.component.sessionKey,api:v.Component},o=JSON.parse(JSON.stringify(i));let a;o.callback=n,this.sentMessages.push(o),a=this.isRunningInMobileApplication()?JSON.stringify(i):i,p.info("Posting message:",a),this.contentWindow.parent.postMessage(a,this.component.origin)}activateThemes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.component.acceptsThemes)return;p.info("Incoming themes:",e);const{activeThemes:t}=this.component;if(t&&t.sort().toString()==e.sort().toString())return;let r=e;const n=[];for(const i of t)e.includes(i)?r=r.filter((e=>e!==i)):n.push(i);p.info("Deactivating themes:",n),p.info("Activating themes:",r);for(const e of n)this.deactivateTheme(e);this.component.activeThemes=e;for(const e of r){if(!e)continue;const t=this.contentWindow.document.createElement("link");t.id=btoa(e),t.href=e,t.type="text/css",t.rel="stylesheet",t.media="screen,print",t.className="custom-theme",this.contentWindow.document.getElementsByTagName("head")[0].appendChild(t)}this.params.onThemesChange&&this.params.onThemesChange()}themeElementForUrl(e){return Array.from(this.contentWindow.document.getElementsByClassName("custom-theme")).slice().find((t=>t.id==btoa(e)))}deactivateTheme(e){const t=this.themeElementForUrl(e);t&&t.parentNode&&(t.setAttribute("disabled","true"),t.parentNode.removeChild(t))}generateUUID(){return function(e,t,r){var n=(e=e||{}).random||(e.rng||o)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r}(n)}()}get platform(){return this.component.platform}get environment(){return this.component.environment}streamItems(e,r){this.postMessage(t.ComponentAction.StreamItems,{content_types:e},(e=>{r(e.items)}))}streamContextItem(e){this.postMessage(t.ComponentAction.StreamContextItem,{},(t=>{const{item:r}=t;(!this.lastStreamedItem||this.lastStreamedItem.uuid!==r.uuid)&&this.pendingSaveTimeout&&(clearTimeout(this.pendingSaveTimeout),this.performSavingOfItems(this.pendingSaveParams),this.pendingSaveTimeout=void 0,this.pendingSaveParams=void 0),this.lastStreamedItem=r,e(this.lastStreamedItem)}))}selectItem(e){this.postMessage(t.ComponentAction.SelectItem,{item:this.jsonObjectForItem(e)})}clearSelection(){this.postMessage(t.ComponentAction.ClearSelection,{content_type:t.ContentType.Tag})}createItem(e,r){this.postMessage(t.ComponentAction.CreateItem,{item:this.jsonObjectForItem(e)},(e=>{let{item:t}=e;!t&&e.items&&e.items.length>0&&(t=e.items[0]),this.associateItem(t),r&&r(t)}))}createItems(e,r){const n=e.map((e=>this.jsonObjectForItem(e)));this.postMessage(t.ComponentAction.CreateItems,{items:n},(e=>{r&&r(e.items)}))}associateItem(e){this.postMessage(t.ComponentAction.AssociateItem,{item:this.jsonObjectForItem(e)})}deassociateItem(e){this.postMessage(t.ComponentAction.DeassociateItem,{item:this.jsonObjectForItem(e)})}deleteItem(e,t){this.deleteItems([e],t)}deleteItems(e,r){const n={items:e.map((e=>this.jsonObjectForItem(e)))};this.postMessage(t.ComponentAction.DeleteItems,n,(e=>{r&&r(e)}))}sendCustomEvent(e,t,r){this.postMessage(e,t,(e=>{r&&r(e)}))}saveItem(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.saveItems([e],t,r)}saveItemWithPresave(e,t,r){this.saveItemsWithPresave([e],t,r)}saveItemsWithPresave(e,t,r){this.saveItems(e,r,!1,t)}performSavingOfItems(e){let{items:r,presave:n,callback:i}=e;const o=setTimeout((()=>{this.concernTimeouts.forEach((e=>clearTimeout(e))),alert("This editor is unable to communicate with Standard Notes. Your changes may not be saved. Please backup your changes, then restart the application and try again.")}),5e3);this.concernTimeouts.push(o),n&&n();const a=[];for(const e of r)a.push(this.jsonObjectForItem(e));this.postMessage(t.ComponentAction.SaveItems,{items:a},(()=>{this.concernTimeouts.forEach((e=>clearTimeout(e))),null==i||i()}))}saveItems(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;if(this.pendingSaveItems||(this.pendingSaveItems=[]),this.options.coallesedSaving&&!r){this.pendingSaveTimeout&&clearTimeout(this.pendingSaveTimeout);const r=e.map((e=>e.uuid)),i=this.pendingSaveItems.filter((e=>!r.includes(e.uuid)));this.pendingSaveItems=i.concat(e),this.pendingSaveParams={items:this.pendingSaveItems,presave:n,callback:t},this.pendingSaveTimeout=setTimeout((()=>{this.performSavingOfItems(this.pendingSaveParams),this.pendingSaveItems=[],this.pendingSaveTimeout=void 0,this.pendingSaveParams=null}),this.options.coallesedSavingDelay)}else this.performSavingOfItems({items:e,presave:n,callback:t})}setSize(e,r){this.postMessage(t.ComponentAction.SetSize,{type:"container",width:e,height:r})}keyDownEvent(e){this.postMessage(t.ComponentAction.KeyDown,{keyboardModifier:e})}keyUpEvent(e){this.postMessage(t.ComponentAction.KeyUp,{keyboardModifier:e})}mouseClickEvent(){this.postMessage(t.ComponentAction.Click,{})}jsonObjectForItem(e){const t=Object.assign({},e);return t.children=null,t.parent=null,t}getItemAppDataValue(e,t){var r,n;const i=null==e||null===(r=e.content)||void 0===r||null===(n=r.appData)||void 0===n?void 0:n["org.standardnotes.sn"];return null==i?void 0:i[t]}}})(),n.default})(),e.exports=t()}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";r.d(n,{default:()=>o});var e=r(968),t=r.n(e);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o{constructor(e,t){this.delegate=e,this.options=t,i(this,"componentRelay",void 0),i(this,"note",void 0),i(this,"ignoreNextTextChange",void 0),this.connectToBridge()}connectToBridge(){const{coallesedSaving:e,coallesedSavingDelay:r,mode:n}=this.options;this.componentRelay=new(t())({targetWindow:window,options:{coallesedSaving:e,coallesedSavingDelay:r},onReady:()=>{const{platform:e}=this.componentRelay;e&&document.documentElement.classList.add(e)},onThemesChange:this.delegate.onThemesChange,handleRequestForContentHeight:()=>this.delegate.handleRequestForContentHeight()}),this.componentRelay.streamContextItem((async e=>{var t;let r=!0;this.note&&this.note.uuid==e.uuid&&(r=!1);const i=this.note;if(this.note=e,e.isMetadataUpdate)return;let o=(null===(t=e.content)||void 0===t?void 0:t.text)||"";if("html"===n&&r&&(/<[a-z][\s\S]*>/i.test(o)||(this.ignoreNextTextChange=!0)),this.delegate.onNoteValueChange&&await this.delegate.onNoteValueChange(e),this.delegate.setEditorRawText(o),this.delegate.onNoteLockToggle){var a,s;const e=null!==(a=this.componentRelay.getItemAppDataValue(i,"locked"))&&void 0!==a&&a,t=null!==(s=this.componentRelay.getItemAppDataValue(this.note,"locked"))&&void 0!==s&&s;e!==t&&this.delegate.onNoteLockToggle(t)}var c,l;r&&(null===(c=(l=this.delegate).clearUndoHistory)||void 0===c||c.call(l))}))}configureFileSafe(){const e=["getCurrentLineText","getPreviousLineText","replaceText","getElementsBySelector","insertElement","preprocessElement","insertRawText"];for(const t of e)if(!this.delegate[t])throw Error("Missing ".concat(t," delegate function."))}onEditorValueChanged(e){const{mode:t}=this.options;if(this.ignoreNextTextChange)return void(this.ignoreNextTextChange=!1);if(!this.note)return;const r=this.note;this.componentRelay.saveItemWithPresave(r,(()=>{if(r.content.text=e,this.delegate.generateCustomPreview){var n;const t=this.delegate.generateCustomPreview(e);r.content.preview_plain=null!==(n=t.plain)&&void 0!==n?n:" ",r.content.preview_html=t.html}else{if("html"===t){let t=e;t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return e.length<=t?e:e.substring(0,t)+"..."}((e=>{const t=document.implementation.createHTMLDocument().body;return t.innerHTML=e,t.textContent||t.innerText||""})(t)),r.content.preview_plain=t.length>0?t:" "}else r.content.preview_plain=e;r.content.preview_html=void 0}}))}saveItemWithPresave(e,t){this.componentRelay.saveItemWithPresave(e,t)}get platform(){return this.componentRelay.platform}get environment(){return this.componentRelay.environment}getComponentDataValueForKey(e){return this.componentRelay.getComponentDataValueForKey(e)}setComponentDataValueForKey(e,t){this.componentRelay.setComponentDataValueForKey(e,t)}isRunningInMobileApplication(){return this.componentRelay.isRunningInMobileApplication()}}})(),n.default})(),e.exports=t()},4448:(e,t,r)=>{"use strict";var n=r(7294),i=r(3840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function y(e,t,r,n,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function m(e){return e[1].toUpperCase()}function b(e,t,r,n){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!d.call(f,e)||!d.call(h,e)&&(p.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,m);v[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,m);v[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,m);v[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var S=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),P=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),O=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var T=Symbol.iterator;function N(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var j,B=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var L=!1;function K(e,t){if(!e||L)return"";L=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),o=n.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var c="\n"+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=a&&0<=s);break}}}finally{L=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 1:return e=K(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _:return"Fragment";case P:return"Portal";case C:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=H(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function $(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var r=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=z(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var r=z(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&$(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+z(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(te(r)){if(1<r.length)throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:z(r)}}function oe(e,t){var r=z(t.value),n=z(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function pe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ye(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ve(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=ye(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pe=null,_e=null,Ee=null;function Ce(e){if(e=bi(e)){if("function"!=typeof Pe)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),Pe(e.stateNode,e.type,t))}}function ke(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Oe(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function xe(e,t){return e(t)}function Ie(){}var Ae=!1;function Me(e,t,r){if(Ae)return e(t,r);Ae=!0;try{return xe(e,t,r)}finally{Ae=!1,(null!==_e||null!==Ee)&&(Ie(),Oe())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var n=wi(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(o(231,t,typeof r));return r}var Re=!1;if(u)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch(ue){Re=!1}function Ne(e,t,r,n,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(e){this.onError(e)}}var je=!1,Be=null,Fe=!1,Le=null,Ke={onError:function(e){je=!0,Be=e}};function Ue(e,t,r,n,i,o,a,s,c){je=!1,Be=null,Ne.apply(Ke,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Ve(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return ze(i),e;if(a===n)return ze(i),t;a=a.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,c=i.child;c;){if(c===r){s=!0,r=i,n=a;break}if(c===n){s=!0,n=i,r=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===r){s=!0,r=a,n=i;break}if(c===n){s=!0,n=a,r=i;break}c=c.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,$e=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&r;if(0!==a){var s=a&~i;0!==s?n=dt(s):0!==(o&=a)&&(n=dt(o))}else 0!==(a=r&~i)?n=dt(a):0!==o&&(n=dt(o));if(0===n)return 0;if(0!==t&&t!==n&&0==(t&i)&&((i=n&-n)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-at(t)),n|=e[r],t&=~i;return n}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function yt(){var e=lt;return 0==(4194240&(lt<<=1))&&(lt=64),e}function vt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=r}function mt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-at(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var bt=0;function St(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var wt,Pt,_t,Et,Ct,kt=!1,Ot=[],xt=null,It=null,At=null,Mt=new Map,Dt=new Map,Rt=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function jt(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Pt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=mi(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void Ct(e.priority,(function(){_t(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bi(r))&&Pt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Se=n,r.target.dispatchEvent(n),Se=null,t.shift()}return!0}function Lt(e,t,r){Ft(e)&&r.delete(t)}function Kt(){kt=!1,null!==xt&&Ft(xt)&&(xt=null),null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),Mt.forEach(Lt),Dt.forEach(Lt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Kt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Ot.length){Ut(Ot[0],e);for(var r=1;r<Ot.length;r++){var n=Ot[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==xt&&Ut(xt,e),null!==It&&Ut(It,e),null!==At&&Ut(At,e),Mt.forEach(t),Dt.forEach(t),r=0;r<Rt.length;r++)(n=Rt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)Bt(r),null===r.blockedOn&&Rt.shift()}var Wt=S.ReactCurrentBatchConfig,zt=!0;function Ht(e,t,r,n){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,qt(e,t,r,n)}finally{bt=i,Wt.transition=o}}function Gt(e,t,r,n){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,qt(e,t,r,n)}finally{bt=i,Wt.transition=o}}function qt(e,t,r,n){if(zt){var i=Xt(e,t,r,n);if(null===i)zn(e,t,n,$t,r),Nt(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return xt=jt(xt,e,t,r,n,i),!0;case"dragenter":return It=jt(It,e,t,r,n,i),!0;case"mouseover":return At=jt(At,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Mt.set(o,jt(Mt.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Dt.set(o,jt(Dt.get(o)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Nt(e,n),4&t&&-1<Tt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Xt(e,t,r,n))&&zn(e,t,n,$t,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else zn(e,t,n,null,r)}}var $t=null;function Xt(e,t,r,n){if($t=null,null!==(e=mi(e=we(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Jt,n=r.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,o){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var or,ar,sr,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=ir(cr),ur=B({},cr,{view:0,detail:0}),dr=ir(ur),pr=B({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(or=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=or=0,sr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),hr=ir(pr),fr=ir(B({},pr,{dataTransfer:0})),yr=ir(B({},ur,{relatedTarget:0})),vr=ir(B({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=B({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mr=ir(gr),br=ir(B({},cr,{data:0})),Sr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pr[e])&&!!t[e]}function Er(){return _r}var Cr=B({},ur,{key:function(e){if(e.key){var t=Sr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kr=ir(Cr),Or=ir(B({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xr=ir(B({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),Ir=ir(B({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=B({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mr=ir(Ar),Dr=[9,13,27,32],Rr=u&&"CompositionEvent"in window,Tr=null;u&&"documentMode"in document&&(Tr=document.documentMode);var Nr=u&&"TextEvent"in window&&!Tr,jr=u&&(!Rr||Tr&&8<Tr&&11>=Tr),Br=String.fromCharCode(32),Fr=!1;function Lr(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function zr(e,t,r,n){ke(n),0<(t=Gn(t,"onChange")).length&&(r=new lr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Gr=null;function qr(e){Fn(e,0)}function $r(e){if(q(Si(e)))return e}function Xr(e,t){if("change"===e)return t}var Yr=!1;if(u){var Qr;if(u){var Jr="oninput"in document;if(!Jr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Jr="function"==typeof Zr.oninput}Qr=Jr}else Qr=!1;Yr=Qr&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Gr=Hr=null)}function tn(e){if("value"===e.propertyName&&$r(Gr)){var t=[];zr(t,Gr,e,we(e)),Me(qr,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $r(Gr)}function on(e,t){if("click"===e)return $r(t)}function an(e,t){if("input"===e||"change"===e)return $r(t)}var sn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function cn(e,t){if(sn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!d.call(t,i)||!sn(e[i],t[i]))return!1}return!0}function ln(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=ln(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ln(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pn(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=$((e=t.contentWindow).document)}return t}function hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=pn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&hn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=un(r,o);var a=un(r,n);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yn=u&&"documentMode"in document&&11>=document.documentMode,vn=null,gn=null,mn=null,bn=!1;function Sn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==vn||vn!==$(n)||("selectionStart"in(n=vn)&&hn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},mn&&cn(mn,n)||(mn=n,0<(n=Gn(gn,"onSelect")).length&&(t=new lr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Pn={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},_n={},En={};function Cn(e){if(_n[e])return _n[e];if(!Pn[e])return e;var t,r=Pn[e];for(t in r)if(r.hasOwnProperty(t)&&t in En)return _n[e]=r[t];return e}u&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete Pn.animationend.animation,delete Pn.animationiteration.animation,delete Pn.animationstart.animation),"TransitionEvent"in window||delete Pn.transitionend.transition);var kn=Cn("animationend"),On=Cn("animationiteration"),xn=Cn("animationstart"),In=Cn("transitionend"),An=new Map,Mn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){An.set(e,t),c(t,[e])}for(var Rn=0;Rn<Mn.length;Rn++){var Tn=Mn[Rn];Dn(Tn.toLowerCase(),"on"+(Tn[0].toUpperCase()+Tn.slice(1)))}Dn(kn,"onAnimationEnd"),Dn(On,"onAnimationIteration"),Dn(xn,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(In,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nn));function Bn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,a,s,c,l){if(Ue.apply(this,arguments),je){if(!je)throw Error(o(198));var u=Be;je=!1,Be=null,Fe||(Fe=!0,Le=u)}}(n,t,void 0,e),e.currentTarget=null}function Fn(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;Bn(i,s,l),o=c}else for(a=0;a<n.length;a++){if(c=(s=n[a]).instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;Bn(i,s,l),o=c}}}if(Fe)throw e=Le,Fe=!1,Le=null,e}function Ln(e,t){var r=t[yi];void 0===r&&(r=t[yi]=new Set);var n=e+"__bubble";r.has(n)||(Wn(t,e,2,!1),r.add(n))}function Kn(e,t,r){var n=0;t&&(n|=4),Wn(r,e,n,t)}var Un="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[Un]){e[Un]=!0,a.forEach((function(t){"selectionchange"!==t&&(jn.has(t)||Kn(t,!1,e),Kn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Un]||(t[Un]=!0,Kn("selectionchange",!1,t))}}function Wn(e,t,r,n){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Gt;break;default:i=qt}r=i.bind(null,t,r,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function zn(e,t,r,n,i){var o=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=mi(s)))return;if(5===(c=a.tag)||6===c){n=o=a;continue e}s=s.parentNode}}n=n.return}Me((function(){var n=o,i=we(r),a=[];e:{var s=An.get(e);if(void 0!==s){var c=lr,l=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":c=kr;break;case"focusin":l="focus",c=yr;break;case"focusout":l="blur",c=yr;break;case"beforeblur":case"afterblur":c=yr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xr;break;case kn:case On:case xn:c=vr;break;case In:c=Ir;break;case"scroll":c=dr;break;case"wheel":c=Mr;break;case"copy":case"cut":case"paste":c=mr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Or}var u=0!=(4&t),d=!u&&"scroll"===e,p=u?null!==s?s+"Capture":null:s;u=[];for(var h,f=n;null!==f;){var y=(h=f).stateNode;if(5===h.tag&&null!==y&&(h=y,null!==p&&(null!=(y=De(f,p))&&u.push(Hn(f,y,h)))),d)break;f=f.return}0<u.length&&(s=new c(s,l,null,r,i),a.push({event:s,listeners:u}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===Se||!(l=r.relatedTarget||r.fromElement)||!mi(l)&&!l[fi])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=n,null!==(l=(l=r.relatedTarget||r.toElement)?mi(l):null)&&(l!==(d=Ve(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=n),c!==l)){if(u=hr,y="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Or,y="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==c?s:Si(c),h=null==l?s:Si(l),(s=new u(y,f+"leave",c,r,i)).target=d,s.relatedTarget=h,y=null,mi(i)===n&&((u=new u(p,f+"enter",l,r,i)).target=h,u.relatedTarget=d,y=u),d=y,c&&l)e:{for(p=l,f=0,h=u=c;h;h=qn(h))f++;for(h=0,y=p;y;y=qn(y))h++;for(;0<f-h;)u=qn(u),f--;for(;0<h-f;)p=qn(p),h--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=qn(u),p=qn(p)}u=null}else u=null;null!==c&&$n(a,s,c,u,!1),null!==l&&null!==d&&$n(a,d,l,u,!0)}if("select"===(c=(s=n?Si(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var v=Xr;else if(Wr(s))if(Yr)v=an;else{v=nn;var g=rn}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=on);switch(v&&(v=v(e,n))?zr(a,v,r,i):(g&&g(e,s,n),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=n?Si(n):window,e){case"focusin":(Wr(g)||"true"===g.contentEditable)&&(vn=g,gn=n,mn=null);break;case"focusout":mn=gn=vn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,Sn(a,r,i);break;case"selectionchange":if(yn)break;case"keydown":case"keyup":Sn(a,r,i)}var m;if(Rr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ur?Lr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(jr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ur&&(m=er()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Ur=!0)),0<(g=Gn(n,b)).length&&(b=new br(b,e,null,r,i),a.push({event:b,listeners:g}),m?b.data=m:null!==(m=Kr(r))&&(b.data=m))),(m=Nr?function(e,t){switch(e){case"compositionend":return Kr(t);case"keypress":return 32!==t.which?null:(Fr=!0,Br);case"textInput":return(e=t.data)===Br&&Fr?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Rr&&Lr(e,t)?(e=er(),Zt=Jt=Qt=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(i=new br("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=m))}Fn(a,t)}))}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=De(e,r))&&n.unshift(Hn(e,o,i)),null!=(o=De(e,t))&&n.push(Hn(e,o,i))),e=e.return}return n}function qn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $n(e,t,r,n,i){for(var o=t._reactName,a=[];null!==r&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(null!==c&&c===n)break;5===s.tag&&null!==l&&(s=l,i?null!=(c=De(r,o))&&a.unshift(Hn(r,c,s)):i||null!=(c=De(r,o))&&a.push(Hn(r,c,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Xn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Qn(e){return("string"==typeof e?e:""+e).replace(Xn,"\n").replace(Yn,"")}function Jn(e,t,r){if(t=Qn(t),Qn(e)!==t&&r)throw Error(o(425))}function Zn(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,oi="function"==typeof Promise?Promise:void 0,ai="function"==typeof queueMicrotask?queueMicrotask:void 0!==oi?function(e){return oi.resolve(null).then(e).catch(si)}:ni;function si(e){setTimeout((function(){throw e}))}function ci(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Vt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),pi="__reactFiber$"+di,hi="__reactProps$"+di,fi="__reactContainer$"+di,yi="__reactEvents$"+di,vi="__reactListeners$"+di,gi="__reactHandles$"+di;function mi(e){var t=e[pi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fi]||r[pi]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ui(e);null!==e;){if(r=e[pi])return r;e=ui(e)}return t}r=(e=r).parentNode}return null}function bi(e){return!(e=e[pi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Si(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[hi]||null}var Pi=[],_i=-1;function Ei(e){return{current:e}}function Ci(e){0>_i||(e.current=Pi[_i],Pi[_i]=null,_i--)}function ki(e,t){_i++,Pi[_i]=e.current,e.current=t}var Oi={},xi=Ei(Oi),Ii=Ei(!1),Ai=Oi;function Mi(e,t){var r=e.type.contextTypes;if(!r)return Oi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Di(e){return null!=(e=e.childContextTypes)}function Ri(){Ci(Ii),Ci(xi)}function Ti(e,t,r){if(xi.current!==Oi)throw Error(o(168));ki(xi,t),ki(Ii,r)}function Ni(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return B({},r,n)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oi,Ai=xi.current,ki(xi,e),ki(Ii,Ii.current),!0}function Bi(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=Ni(e,t,Ai),n.__reactInternalMemoizedMergedChildContext=e,Ci(Ii),Ci(xi),ki(xi,e)):Ci(Ii),ki(Ii,r)}var Fi=null,Li=!1,Ki=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Ki&&null!==Fi){Ki=!0;var e=0,t=bt;try{var r=Fi;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fi=null,Li=!1}catch(t){throw null!==Fi&&(Fi=Fi.slice(e+1)),qe(Ze,Vi),t}finally{bt=t,Ki=!1}}return null}var Wi=[],zi=0,Hi=null,Gi=0,qi=[],$i=0,Xi=null,Yi=1,Qi="";function Ji(e,t){Wi[zi++]=Gi,Wi[zi++]=Hi,Hi=e,Gi=t}function Zi(e,t,r){qi[$i++]=Yi,qi[$i++]=Qi,qi[$i++]=Xi,Xi=e;var n=Yi;e=Qi;var i=32-at(n)-1;n&=~(1<<i),r+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Yi=1<<32-at(t)+i|r<<i|n,Qi=o+e}else Yi=1<<o|r<<i|n,Qi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=Wi[--zi],Wi[zi]=null,Gi=Wi[--zi],Wi[zi]=null;for(;e===Xi;)Xi=qi[--$i],qi[$i]=null,Qi=qi[--$i],qi[$i]=null,Yi=qi[--$i],qi[$i]=null}var ro=null,no=null,io=!1,oo=null;function ao(e,t){var r=Ml(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function so(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,no=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,no=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Xi?{id:Yi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ml(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ro=e,no=null,!0);default:return!1}}function co(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function lo(e){if(io){var t=no;if(t){var r=t;if(!so(e,t)){if(co(e))throw Error(o(418));t=li(r.nextSibling);var n=ro;t&&so(e,t)?ao(n,r):(e.flags=-4097&e.flags|2,io=!1,ro=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,ro=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function po(e){if(e!==ro)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=no)){if(co(e))throw ho(),Error(o(418));for(;t;)ao(e,t),t=li(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){no=li(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}no=null}}else no=ro?li(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=no;e;)e=li(e.nextSibling)}function fo(){no=ro=null,io=!1}function yo(e){null===oo?oo=[e]:oo.push(e)}var vo=S.ReactCurrentBatchConfig;function go(e,t){if(e&&e.defaultProps){for(var r in t=B({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var mo=Ei(null),bo=null,So=null,wo=null;function Po(){wo=So=bo=null}function _o(e){var t=mo.current;Ci(mo),e._currentValue=t}function Eo(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Co(e,t){bo=e,wo=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ss=!0),e.firstContext=null)}function ko(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===bo)throw Error(o(308));So=e,bo.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var Oo=null;function xo(e){null===Oo?Oo=[e]:Oo.push(e)}function Io(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,xo(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ao(e,n)}function Ao(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Mo=!1;function Do(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function To(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function No(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&xc)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ao(e,r)}return null===(i=n.interleaved)?(t.next=t,xo(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ao(e,r)}function jo(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,mt(e,r)}}function Bo(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=a:o=o.next=a,r=r.next}while(null!==r);null===o?i=o=t:o=o.next=t}else i=o=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fo(e,t,r,n){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?o=l:a.next=l,a=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==o){var d=i.baseState;for(a=0,u=l=c=null,s=o;;){var p=s.lane,h=s.eventTime;if((n&p)===p){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,y=s;switch(p=t,h=r,y.tag){case 1:if("function"==typeof(f=y.payload)){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(p="function"==typeof(f=y.payload)?f.call(h,d,p):f))break e;d=B({},d,p);break e;case 2:Mo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=h,c=d):u=u.next=h,a|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===u&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);jc|=a,e.lanes=a,e.memoizedState=d}}function Lo(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(o(191,i));i.call(n)}}}var Ko=(new n.Component).refs;function Uo(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:B({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=el(),i=tl(e),o=To(n,i);o.payload=t,null!=r&&(o.callback=r),null!==(t=No(e,o,i))&&(rl(t,e,i,n),jo(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=el(),i=tl(e),o=To(n,i);o.tag=1,o.payload=t,null!=r&&(o.callback=r),null!==(t=No(e,o,i))&&(rl(t,e,i,n),jo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=el(),n=tl(e),i=To(r,n);i.tag=2,null!=t&&(i.callback=t),null!==(t=No(e,i,n))&&(rl(t,e,n,r),jo(t,e,n))}};function Wo(e,t,r,n,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!cn(r,n)||!cn(i,o))}function zo(e,t,r){var n=!1,i=Oi,o=t.contextType;return"object"==typeof o&&null!==o?o=ko(o):(i=Di(t)?Ai:xi.current,o=(n=null!=(n=t.contextTypes))?Mi(e,i):Oi),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ho(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Go(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Ko,Do(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=ko(o):(o=Di(t)?Ai:xi.current,i.context=Mi(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vo.enqueueReplaceState(i,i.state,null),Fo(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function qo(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var i=n,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Ko&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function $o(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rl(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,r,n){return null===t||6!==t.tag?((t=Bl(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){var o=r.type;return o===_?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===D&&Xo(o)===t.type)?((n=i(t,r.props)).ref=qo(e,t,r),n.return=e,n):((n=Tl(r.type,r.key,r.props,null,e.mode,n)).ref=qo(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fl(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function d(e,t,r,n,o){return null===t||7!==t.tag?((t=Nl(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function p(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Bl(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Tl(t.type,t.key,t.props,null,e.mode,r)).ref=qo(e,null,t),r.return=e,r;case P:return(t=Fl(t,e.mode,r)).return=e,t;case D:return p(e,(0,t._init)(t._payload),r)}if(te(t)||N(t))return(t=Nl(t,e.mode,r,null)).return=e,t;$o(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==i?null:c(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===i?l(e,t,r,n):null;case P:return r.key===i?u(e,t,r,n):null;case D:return h(e,t,(i=r._init)(r._payload),n)}if(te(r)||N(r))return null!==i?null:d(e,t,r,n,null);$o(e,r)}return null}function f(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return c(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case P:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case D:return f(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||N(n))return d(t,e=e.get(r)||null,n,i,null);$o(t,n)}return null}function y(i,o,s,c){for(var l=null,u=null,d=o,y=o=0,v=null;null!==d&&y<s.length;y++){d.index>y?(v=d,d=null):v=d.sibling;var g=h(i,d,s[y],c);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(i,d),o=a(g,o,y),null===u?l=g:u.sibling=g,u=g,d=v}if(y===s.length)return r(i,d),io&&Ji(i,y),l;if(null===d){for(;y<s.length;y++)null!==(d=p(i,s[y],c))&&(o=a(d,o,y),null===u?l=d:u.sibling=d,u=d);return io&&Ji(i,y),l}for(d=n(i,d);y<s.length;y++)null!==(v=f(d,i,y,s[y],c))&&(e&&null!==v.alternate&&d.delete(null===v.key?y:v.key),o=a(v,o,y),null===u?l=v:u.sibling=v,u=v);return e&&d.forEach((function(e){return t(i,e)})),io&&Ji(i,y),l}function v(i,s,c,l){var u=N(c);if("function"!=typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var d=u=null,y=s,v=s=0,g=null,m=c.next();null!==y&&!m.done;v++,m=c.next()){y.index>v?(g=y,y=null):g=y.sibling;var b=h(i,y,m.value,l);if(null===b){null===y&&(y=g);break}e&&y&&null===b.alternate&&t(i,y),s=a(b,s,v),null===d?u=b:d.sibling=b,d=b,y=g}if(m.done)return r(i,y),io&&Ji(i,v),u;if(null===y){for(;!m.done;v++,m=c.next())null!==(m=p(i,m.value,l))&&(s=a(m,s,v),null===d?u=m:d.sibling=m,d=m);return io&&Ji(i,v),u}for(y=n(i,y);!m.done;v++,m=c.next())null!==(m=f(y,i,v,m.value,l))&&(e&&null!==m.alternate&&y.delete(null===m.key?v:m.key),s=a(m,s,v),null===d?u=m:d.sibling=m,d=m);return e&&y.forEach((function(e){return t(i,e)})),io&&Ji(i,v),u}return function e(n,o,a,c){if("object"==typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var l=a.key,u=o;null!==u;){if(u.key===l){if((l=a.type)===_){if(7===u.tag){r(n,u.sibling),(o=i(u,a.props.children)).return=n,n=o;break e}}else if(u.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===D&&Xo(l)===u.type){r(n,u.sibling),(o=i(u,a.props)).ref=qo(n,u,a),o.return=n,n=o;break e}r(n,u);break}t(n,u),u=u.sibling}a.type===_?((o=Nl(a.props.children,n.mode,c,a.key)).return=n,n=o):((c=Tl(a.type,a.key,a.props,null,n.mode,c)).ref=qo(n,o,a),c.return=n,n=c)}return s(n);case P:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){r(n,o.sibling),(o=i(o,a.children||[])).return=n,n=o;break e}r(n,o);break}t(n,o),o=o.sibling}(o=Fl(a,n.mode,c)).return=n,n=o}return s(n);case D:return e(n,o,(u=a._init)(a._payload),c)}if(te(a))return y(n,o,a,c);if(N(a))return v(n,o,a,c);$o(n,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==o&&6===o.tag?(r(n,o.sibling),(o=i(o,a)).return=n,n=o):(r(n,o),(o=Bl(a,n.mode,c)).return=n,n=o),s(n)):r(n,o)}}var Qo=Yo(!0),Jo=Yo(!1),Zo={},ea=Ei(Zo),ta=Ei(Zo),ra=Ei(Zo);function na(e){if(e===Zo)throw Error(o(174));return e}function ia(e,t){switch(ki(ra,t),ki(ta,e),ki(ea,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(ea),ki(ea,t)}function oa(){Ci(ea),Ci(ta),Ci(ra)}function aa(e){na(ra.current);var t=na(ea.current),r=ce(t,e.type);t!==r&&(ki(ta,e),ki(ea,r))}function sa(e){ta.current===e&&(Ci(ea),Ci(ta))}var ca=Ei(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var pa=S.ReactCurrentDispatcher,ha=S.ReactCurrentBatchConfig,fa=0,ya=null,va=null,ga=null,ma=!1,ba=!1,Sa=0,wa=0;function Pa(){throw Error(o(321))}function _a(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function Ea(e,t,r,n,i,a){if(fa=a,ya=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pa.current=null===e||null===e.memoizedState?ss:cs,e=r(n,i),ba){a=0;do{if(ba=!1,Sa=0,25<=a)throw Error(o(301));a+=1,ga=va=null,t.updateQueue=null,pa.current=ls,e=r(n,i)}while(ba)}if(pa.current=as,t=null!==va&&null!==va.next,fa=0,ga=va=ya=null,ma=!1,t)throw Error(o(300));return e}function Ca(){var e=0!==Sa;return Sa=0,e}function ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?ya.memoizedState=ga=e:ga=ga.next=e,ga}function Oa(){if(null===va){var e=ya.alternate;e=null!==e?e.memoizedState:null}else e=va.next;var t=null===ga?ya.memoizedState:ga.next;if(null!==t)ga=t,va=e;else{if(null===e)throw Error(o(310));e={memoizedState:(va=e).memoizedState,baseState:va.baseState,baseQueue:va.baseQueue,queue:va.queue,next:null},null===ga?ya.memoizedState=ga=e:ga=ga.next=e}return ga}function xa(e,t){return"function"==typeof t?t(e):t}function Ia(e){var t=Oa(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=va,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,n=n.baseState;var c=s=null,l=null,u=a;do{var d=u.lane;if((fa&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=p,s=n):l=l.next=p,ya.lanes|=d,jc|=d}u=u.next}while(null!==u&&u!==a);null===l?s=n:l.next=c,sn(n,t.memoizedState)||(Ss=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{a=i.lane,ya.lanes|=a,jc|=a,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Aa(e){var t=Oa(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sn(a,t.memoizedState)||(Ss=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Ma(){}function Da(e,t){var r=ya,n=Oa(),i=t(),a=!sn(n.memoizedState,i);if(a&&(n.memoizedState=i,Ss=!0),n=n.queue,za(Na.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(r.flags|=2048,La(9,Ta.bind(null,r,n,i,t),void 0,null),null===Ic)throw Error(o(349));0!=(30&fa)||Ra(r,t,i)}return i}function Ra(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ya.updateQueue)?(t={lastEffect:null,stores:null},ya.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ta(e,t,r,n){t.value=r,t.getSnapshot=n,ja(t)&&Ba(e)}function Na(e,t,r){return r((function(){ja(t)&&Ba(e)}))}function ja(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(e){return!0}}function Ba(e){var t=Ao(e,1);null!==t&&rl(t,e,1,-1)}function Fa(e){var t=ka();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,ya,e),[t.memoizedState,e]}function La(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ya.updateQueue)?(t={lastEffect:null,stores:null},ya.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ka(){return Oa().memoizedState}function Ua(e,t,r,n){var i=ka();ya.flags|=e,i.memoizedState=La(1|t,r,void 0,void 0===n?null:n)}function Va(e,t,r,n){var i=Oa();n=void 0===n?null:n;var o=void 0;if(null!==va){var a=va.memoizedState;if(o=a.destroy,null!==n&&_a(n,a.deps))return void(i.memoizedState=La(t,r,o,n))}ya.flags|=e,i.memoizedState=La(1|t,r,o,n)}function Wa(e,t){return Ua(8390656,8,e,t)}function za(e,t){return Va(2048,8,e,t)}function Ha(e,t){return Va(4,2,e,t)}function Ga(e,t){return Va(4,4,e,t)}function qa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $a(e,t,r){return r=null!=r?r.concat([e]):null,Va(4,4,qa.bind(null,t,e),r)}function Xa(){}function Ya(e,t){var r=Oa();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&_a(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Qa(e,t){var r=Oa();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&_a(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ja(e,t,r){return 0==(21&fa)?(e.baseState&&(e.baseState=!1,Ss=!0),e.memoizedState=r):(sn(r,t)||(r=yt(),ya.lanes|=r,jc|=r,e.baseState=!0),t)}function Za(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=ha.transition;ha.transition={};try{e(!1),t()}finally{bt=r,ha.transition=n}}function es(){return Oa().memoizedState}function ts(e,t,r){var n=tl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ns(e))is(t,r);else if(null!==(r=Io(e,t,r,n))){rl(r,e,n,el()),os(r,t,n)}}function rs(e,t,r){var n=tl(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ns(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,sn(s,a)){var c=t.interleaved;return null===c?(i.next=i,xo(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(e){}null!==(r=Io(e,t,i,n))&&(rl(r,e,n,i=el()),os(r,t,n))}}function ns(e){var t=e.alternate;return e===ya||null!==t&&t===ya}function is(e,t){ba=ma=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function os(e,t,r){if(0!=(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,mt(e,r)}}var as={readContext:ko,useCallback:Pa,useContext:Pa,useEffect:Pa,useImperativeHandle:Pa,useInsertionEffect:Pa,useLayoutEffect:Pa,useMemo:Pa,useReducer:Pa,useRef:Pa,useState:Pa,useDebugValue:Pa,useDeferredValue:Pa,useTransition:Pa,useMutableSource:Pa,useSyncExternalStore:Pa,useId:Pa,unstable_isNewReconciler:!1},ss={readContext:ko,useCallback:function(e,t){return ka().memoizedState=[e,void 0===t?null:t],e},useContext:ko,useEffect:Wa,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Ua(4194308,4,qa.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var r=ka();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ka();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ts.bind(null,ya,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},ka().memoizedState=e},useState:Fa,useDebugValue:Xa,useDeferredValue:function(e){return ka().memoizedState=e},useTransition:function(){var e=Fa(!1),t=e[0];return e=Za.bind(null,e[1]),ka().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ya,i=ka();if(io){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===Ic)throw Error(o(349));0!=(30&fa)||Ra(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Wa(Na.bind(null,n,a,e),[e]),n.flags|=2048,La(9,Ta.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=ka(),t=Ic.identifierPrefix;if(io){var r=Qi;t=":"+t+"R"+(r=(Yi&~(1<<32-at(Yi)-1)).toString(32)+r),0<(r=Sa++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cs={readContext:ko,useCallback:Ya,useContext:ko,useEffect:za,useImperativeHandle:$a,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:Qa,useReducer:Ia,useRef:Ka,useState:function(){return Ia(xa)},useDebugValue:Xa,useDeferredValue:function(e){return Ja(Oa(),va.memoizedState,e)},useTransition:function(){return[Ia(xa)[0],Oa().memoizedState]},useMutableSource:Ma,useSyncExternalStore:Da,useId:es,unstable_isNewReconciler:!1},ls={readContext:ko,useCallback:Ya,useContext:ko,useEffect:za,useImperativeHandle:$a,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:Qa,useReducer:Aa,useRef:Ka,useState:function(){return Aa(xa)},useDebugValue:Xa,useDeferredValue:function(e){var t=Oa();return null===va?t.memoizedState=e:Ja(t,va.memoizedState,e)},useTransition:function(){return[Aa(xa)[0],Oa().memoizedState]},useMutableSource:Ma,useSyncExternalStore:Da,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var r="",n=t;do{r+=U(n),n=n.return}while(n);var i=r}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ps(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var hs="function"==typeof WeakMap?WeakMap:Map;function fs(e,t,r){(r=To(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){zc||(zc=!0,Hc=n),ps(0,t)},r}function ys(e,t,r){(r=To(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){ps(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(r.callback=function(){ps(0,t),"function"!=typeof n&&(null===Gc?Gc=new Set([this]):Gc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function vs(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new hs;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Cl.bind(null,e,t,r),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ms(e,t,r,n,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=To(-1,1)).tag=2,No(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=S.ReactCurrentOwner,Ss=!1;function ws(e,t,r,n){t.child=null===e?Jo(t,null,r,n):Qo(t,e.child,r,n)}function Ps(e,t,r,n,i){r=r.render;var o=t.ref;return Co(t,i),n=Ea(e,t,r,n,o,i),r=Ca(),null===e||Ss?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function _s(e,t,r,n,i){if(null===e){var o=r.type;return"function"!=typeof o||Dl(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Tl(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Es(e,t,o,n,i))}if(o=e.child,0==(e.lanes&i)){var a=o.memoizedProps;if((r=null!==(r=r.compare)?r:cn)(a,n)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Rl(o,n)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,r,n,i){if(null!==e){var o=e.memoizedProps;if(cn(o,n)&&e.ref===t.ref){if(Ss=!1,t.pendingProps=n=o,0==(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!=(131072&e.flags)&&(Ss=!0)}}return Os(e,t,r,n,i)}function Cs(e,t,r){var n=t.pendingProps,i=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Rc,Dc),Dc|=r;else{if(0==(1073741824&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Rc,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,ki(Rc,Dc),Dc|=n}else null!==o?(n=o.baseLanes|r,t.memoizedState=null):n=r,ki(Rc,Dc),Dc|=n;return ws(e,t,i,r),t.child}function ks(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Os(e,t,r,n,i){var o=Di(r)?Ai:xi.current;return o=Mi(t,o),Co(t,i),r=Ea(e,t,r,n,o,i),n=Ca(),null===e||Ss?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function xs(e,t,r,n,i){if(Di(r)){var o=!0;ji(t)}else o=!1;if(Co(t,i),null===t.stateNode)Ws(e,t),zo(t,r,n),Go(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=r.contextType;"object"==typeof l&&null!==l?l=ko(l):l=Mi(t,l=Di(r)?Ai:xi.current);var u=r.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||c!==l)&&Ho(t,a,n,l),Mo=!1;var p=t.memoizedState;a.state=p,Fo(t,n,a,i),c=t.memoizedState,s!==n||p!==c||Ii.current||Mo?("function"==typeof u&&(Uo(t,r,u,n),c=t.memoizedState),(s=Mo||Wo(t,r,s,n,p,c,l))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=l,n=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Ro(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:go(t.type,s),a.props=l,d=t.pendingProps,p=a.context,"object"==typeof(c=r.contextType)&&null!==c?c=ko(c):c=Mi(t,c=Di(r)?Ai:xi.current);var h=r.getDerivedStateFromProps;(u="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||p!==c)&&Ho(t,a,n,c),Mo=!1,p=t.memoizedState,a.state=p,Fo(t,n,a,i);var f=t.memoizedState;s!==d||p!==f||Ii.current||Mo?("function"==typeof h&&(Uo(t,r,h,n),f=t.memoizedState),(l=Mo||Wo(t,r,l,n,p,f,c)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,c)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=c,n=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Is(e,t,r,n,o,i)}function Is(e,t,r,n,i,o){ks(e,t);var a=0!=(128&t.flags);if(!n&&!a)return i&&Bi(t,r,!1),zs(e,t,o);n=t.stateNode,bs.current=t;var s=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=n.state,i&&Bi(t,r,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Ti(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ti(0,t.context,!1),ia(e,t.containerInfo)}function Ms(e,t,r,n,i){return fo(),yo(i),t.flags|=256,ws(e,t,r,n),t.child}var Ds,Rs,Ts,Ns={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,r){var n,i=t.pendingProps,a=ca.current,s=!1,c=0!=(128&t.flags);if((n=c)||(n=(null===e||null!==e.memoizedState)&&0!=(2&a)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ki(ca,1&a),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,s?(i=t.mode,s=t.child,c={mode:"hidden",children:c},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=jl(c,i,0,null),e=Nl(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(r),t.memoizedState=Ns,e):Fs(t,c));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,i,a,s){if(r)return 256&t.flags?(t.flags&=-257,Ls(e,t,s,n=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=jl({mode:"visible",children:n.children},i,0,null),(a=Nl(a,i,s,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!=(1&t.mode)&&Qo(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ns,a);if(0==(1&t.mode))return Ls(e,t,s,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var c=n.dgst;return n=c,Ls(e,t,s,n=ds(a=Error(o(419)),n,void 0))}if(c=0!=(s&e.childLanes),Ss||c){if(null!==(n=Ic)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(n.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ao(e,i),rl(n,e,i,-1))}return yl(),Ls(e,t,s,n=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ol.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,no=li(i.nextSibling),ro=t,io=!0,oo=null,null!==e&&(qi[$i++]=Yi,qi[$i++]=Qi,qi[$i++]=Xi,Yi=e.id,Qi=e.overflow,Xi=t),(t=Fs(t,n.children)).flags|=4096,t)}(e,t,c,i,n,a,r);if(s){s=i.fallback,c=t.mode,n=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 0==(1&c)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Rl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==n?s=Rl(n,s):(s=Nl(s,c,r,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,c=null===(c=e.child.memoizedState)?js(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~r,t.memoizedState=Ns,i}return e=(s=e.child).sibling,i=Rl(s,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=jl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,r,n){return null!==n&&yo(n),Qo(t,e.child,null,r),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ks(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Eo(e.return,t,r)}function Us(e,t,r,n,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Vs(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(ws(e,t,n.children,r),0!=(2&(n=ca.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ks(e,r,t);else if(19===e.tag)Ks(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ki(ca,n),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===la(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Us(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Us(t,!0,r,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),jc|=t.lanes,0==(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Rl(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Rl(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Hs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function qs(e,t,r){var n=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Di(t.type)&&Ri(),Gs(t),null;case 3:return n=t.stateNode,oa(),Ci(Ii),Ci(xi),da(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(po(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==oo&&(al(oo),oo=null))),Gs(t),null;case 5:sa(t);var i=na(ra.current);if(r=t.type,null!==e&&null!=t.stateNode)Rs(e,t,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=na(ea.current),po(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[pi]=t,n[hi]=a,e=0!=(1&t.mode),r){case"dialog":Ln("cancel",n),Ln("close",n);break;case"iframe":case"object":case"embed":Ln("load",n);break;case"video":case"audio":for(i=0;i<Nn.length;i++)Ln(Nn[i],n);break;case"source":Ln("error",n);break;case"img":case"image":case"link":Ln("error",n),Ln("load",n);break;case"details":Ln("toggle",n);break;case"input":Y(n,a),Ln("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ln("invalid",n);break;case"textarea":ie(n,a),Ln("invalid",n)}for(var c in me(r,a),i=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"==typeof l?n.textContent!==l&&(!0!==a.suppressHydrationWarning&&Jn(n.textContent,l,e),i=["children",l]):"number"==typeof l&&n.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Jn(n.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Ln("scroll",n)}switch(r){case"input":G(n),Z(n,a,!0);break;case"textarea":G(n),ae(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=Zn)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),"select"===r&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[pi]=t,e[hi]=n,Ds(e,t),t.stateNode=e;e:{switch(c=be(r,n),r){case"dialog":Ln("cancel",e),Ln("close",e),i=n;break;case"iframe":case"object":case"embed":Ln("load",e),i=n;break;case"video":case"audio":for(i=0;i<Nn.length;i++)Ln(Nn[i],e);i=n;break;case"source":Ln("error",e),i=n;break;case"img":case"image":case"link":Ln("error",e),Ln("load",e),i=n;break;case"details":Ln("toggle",e),i=n;break;case"input":Y(e,n),i=X(e,n),Ln("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=B({},n,{value:void 0}),Ln("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),Ln("invalid",e)}for(a in me(r,i),l=i)if(l.hasOwnProperty(a)){var u=l[a];"style"===a?ve(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"==typeof u?("textarea"!==r||""!==u)&&pe(e,u):"number"==typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ln("scroll",e):null!=u&&b(e,a,u,c))}switch(r){case"input":G(e),Z(e,n,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+z(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?re(e,!!n.multiple,a,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ts(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(o(166));if(r=na(ra.current),na(ea.current),po(t)){if(n=t.stateNode,r=t.memoizedProps,n[pi]=t,(a=n.nodeValue!==r)&&null!==(e=ro))switch(e.tag){case 3:Jn(n.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,r,0!=(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[pi]=t,t.stateNode=n}return Gs(t),null;case 13:if(Ci(ca),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==no&&0!=(1&t.mode)&&0==(128&t.flags))ho(),fo(),t.flags|=98560,a=!1;else if(a=po(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[pi]=t}else fo(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==oo&&(al(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ca.current)?0===Tc&&(Tc=3):yl())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return oa(),null===e&&Vn(t.stateNode.containerInfo),Gs(t),null;case 10:return _o(t.type._context),Gs(t),null;case 19:if(Ci(ca),null===(a=t.memoizedState))return Gs(t),null;if(n=0!=(128&t.flags),null===(c=a.rendering))if(n)Hs(a,!1);else{if(0!==Tc||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=la(e))){for(t.flags|=128,Hs(a,!1),null!==(n=c.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ki(ca,1&ca.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Vc&&(t.flags|=128,n=!0,Hs(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=la(c))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Hs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate&&!io)return Gs(t),null}else 2*Qe()-a.renderingStartTime>Vc&&1073741824!==r&&(t.flags|=128,n=!0,Hs(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=a.last)?r.sibling=c:t.child=c,a.last=c)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,r=ca.current,ki(ca,n?1&r|2:1&r),t):(Gs(t),null);case 22:case 23:return dl(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!=(1&t.mode)?0!=(1073741824&Dc)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $s(e,t){switch(to(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ci(Ii),Ci(xi),da(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ci(ca),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ca),null;case 4:return oa(),null;case 10:return _o(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Ds=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Rs=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,na(ea.current);var o,a=null;switch(r){case"input":i=X(e,i),n=X(e,n),a=[];break;case"select":i=B({},i,{value:void 0}),n=B({},n,{value:void 0}),a=[];break;case"textarea":i=ne(e,i),n=ne(e,n),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=Zn)}for(u in me(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(c=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(u,r)),r=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ln("scroll",e),a||c===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ts=function(e,t,r,n){r!==n&&(t.flags|=4)};var Xs=!1,Ys=!1,Qs="function"==typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(r){El(e,t,r)}else r.current=null}function ec(e,t,r){try{r()}catch(r){El(e,t,r)}}var tc=!1;function rc(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ec(t,r,o)}i=i.next}while(i!==n)}}function nc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ic(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[hi],delete t[yi],delete t[vi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(cc(e,t,r),e=e.sibling;null!==e;)cc(e,t,r),e=e.sibling}function lc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(lc(e,t,r),e=e.sibling;null!==e;)lc(e,t,r),e=e.sibling}var uc=null,dc=!1;function pc(e,t,r){for(r=r.child;null!==r;)hc(e,t,r),r=r.sibling}function hc(e,t,r){if(ot&&"function"==typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,r)}catch(e){}switch(r.tag){case 5:Ys||Zs(r,t);case 6:var n=uc,i=dc;uc=null,pc(e,t,r),dc=i,null!==(uc=n)&&(dc?(e=uc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):uc.removeChild(r.stateNode));break;case 18:null!==uc&&(dc?(e=uc,r=r.stateNode,8===e.nodeType?ci(e.parentNode,r):1===e.nodeType&&ci(e,r),Vt(e)):ci(uc,r.stateNode));break;case 4:n=uc,i=dc,uc=r.stateNode.containerInfo,dc=!0,pc(e,t,r),uc=n,dc=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!=(2&o)||0!=(4&o))&&ec(r,t,a),i=i.next}while(i!==n)}pc(e,t,r);break;case 1:if(!Ys&&(Zs(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(e){El(r,t,e)}pc(e,t,r);break;case 21:pc(e,t,r);break;case 22:1&r.mode?(Ys=(n=Ys)||null!==r.memoizedState,pc(e,t,r),Ys=n):pc(e,t,r);break;default:pc(e,t,r)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Qs),t.forEach((function(t){var n=xl.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function yc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,dc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===uc)throw Error(o(160));hc(a,s,i),uc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(e){El(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yc(t,e),gc(e),4&n){try{rc(3,e,e.return),nc(3,e)}catch(t){El(e,e.return,t)}try{rc(5,e,e.return)}catch(t){El(e,e.return,t)}}break;case 1:yc(t,e),gc(e),512&n&&null!==r&&Zs(r,r.return);break;case 5:if(yc(t,e),gc(e),512&n&&null!==r&&Zs(r,r.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(t){El(e,e.return,t)}}if(4&n&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===a.type&&null!=a.name&&Q(i,a),be(c,s);var u=be(c,a);for(s=0;s<l.length;s+=2){var d=l[s],p=l[s+1];"style"===d?ve(i,p):"dangerouslySetInnerHTML"===d?de(i,p):"children"===d?pe(i,p):b(i,d,p,u)}switch(c){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?re(i,!!a.multiple,f,!1):h!==!!a.multiple&&(null!=a.defaultValue?re(i,!!a.multiple,a.defaultValue,!0):re(i,!!a.multiple,a.multiple?[]:"",!1))}i[hi]=a}catch(t){El(e,e.return,t)}}break;case 6:if(yc(t,e),gc(e),4&n){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(t){El(e,e.return,t)}}break;case 3:if(yc(t,e),gc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(t){El(e,e.return,t)}break;case 4:default:yc(t,e),gc(e);break;case 13:yc(t,e),gc(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Uc=Qe())),4&n&&fc(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Ys=(u=Ys)||d,yc(t,e),Ys=u):yc(t,e),gc(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!=(1&e.mode))for(Js=e,d=e.child;null!==d;){for(p=Js=d;null!==Js;){switch(f=(h=Js).child,h.tag){case 0:case 11:case 14:case 15:rc(4,h,h.return);break;case 1:Zs(h,h.return);var y=h.stateNode;if("function"==typeof y.componentWillUnmount){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(e){El(n,r,e)}}break;case 5:Zs(h,h.return);break;case 22:if(null!==h.memoizedState){wc(p);continue}}null!==f?(f.return=h,Js=f):wc(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{i=p.stateNode,u?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(c=p.stateNode,s=null!=(l=p.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,c.style.display=ye("display",s))}catch(t){El(e,e.return,t)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(t){El(e,e.return,t)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:yc(t,e),gc(e),4&n&&fc(e);case 21:}}function gc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ac(r)){var n=r;break e}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(pe(i,""),n.flags&=-33),lc(e,sc(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;cc(e,sc(e),a);break;default:throw Error(o(161))}}catch(t){El(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function mc(e,t,r){Js=e,bc(e,t,r)}function bc(e,t,r){for(var n=0!=(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,c=null!==s&&null!==s.memoizedState||Ys;s=Xs;var l=Ys;if(Xs=a,(Ys=c)&&!l)for(Js=i;null!==Js;)c=(a=Js).child,22===a.tag&&null!==a.memoizedState?Pc(i):null!==c?(c.return=a,Js=c):Pc(i);for(;null!==o;)Js=o,bc(o,t,r),o=o.sibling;Js=i,Xs=s,Ys=l}Sc(e)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):Sc(e)}}function Sc(e){for(;null!==Js;){var t=Js;if(0!=(8772&t.flags)){var r=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||nc(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ys)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:go(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Lo(t,a,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Lo(t,s,r)}break;case 5:var c=t.stateNode;if(null===r&&4&t.flags){r=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Vt(p)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&ic(t)}catch(e){El(t,t.return,e)}}if(t===e){Js=null;break}if(null!==(r=t.sibling)){r.return=t.return,Js=r;break}Js=t.return}}function wc(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Js=r;break}Js=t.return}}function Pc(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nc(4,t)}catch(e){El(t,r,e)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(e){El(t,i,e)}}var o=t.return;try{ic(t)}catch(e){El(t,o,e)}break;case 5:var a=t.return;try{ic(t)}catch(e){El(t,a,e)}}}catch(e){El(t,t.return,e)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var _c,Ec=Math.ceil,Cc=S.ReactCurrentDispatcher,kc=S.ReactCurrentOwner,Oc=S.ReactCurrentBatchConfig,xc=0,Ic=null,Ac=null,Mc=0,Dc=0,Rc=Ei(0),Tc=0,Nc=null,jc=0,Bc=0,Fc=0,Lc=null,Kc=null,Uc=0,Vc=1/0,Wc=null,zc=!1,Hc=null,Gc=null,qc=!1,$c=null,Xc=0,Yc=0,Qc=null,Jc=-1,Zc=0;function el(){return 0!=(6&xc)?Qe():-1!==Jc?Jc:Jc=Qe()}function tl(e){return 0==(1&e.mode)?1:0!=(2&xc)&&0!==Mc?Mc&-Mc:null!==vo.transition?(0===Zc&&(Zc=yt()),Zc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rl(e,t,r,n){if(50<Yc)throw Yc=0,Qc=null,Error(o(185));gt(e,r,n),0!=(2&xc)&&e===Ic||(e===Ic&&(0==(2&xc)&&(Bc|=r),4===Tc&&sl(e,Mc)),nl(e,n),1===r&&0===xc&&0==(1&t.mode)&&(Vc=Qe()+500,Li&&Vi()))}function nl(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,c=i[a];-1===c?0!=(s&r)&&0==(s&n)||(i[a]=ht(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var n=pt(e,e===Ic?Mc:0);if(0===n)null!==r&&$e(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&$e(r),1===t)0===e.tag?function(e){Li=!0,Ui(e)}(cl.bind(null,e)):Ui(cl.bind(null,e)),ai((function(){0==(6&xc)&&Vi()})),r=null;else{switch(St(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Il(r,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function il(e,t){if(Jc=-1,Zc=0,0!=(6&xc))throw Error(o(327));var r=e.callbackNode;if(Pl()&&e.callbackNode!==r)return null;var n=pt(e,e===Ic?Mc:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||t)t=vl(e,n);else{t=n;var i=xc;xc|=2;var a=fl();for(Ic===e&&Mc===t||(Wc=null,Vc=Qe()+500,pl(e,t));;)try{ml();break}catch(t){hl(e,t)}Po(),Cc.current=a,xc=i,null!==Ac?t=0:(Ic=null,Mc=0,t=Tc)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(n=i,t=ol(e,i))),1===t)throw r=Nc,pl(e,0),sl(e,n),nl(e,Qe()),r;if(6===t)sl(e,n);else{if(i=e.current.alternate,0==(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!sn(o(),i))return!1}catch(e){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,n))&&(0!==(a=ft(e))&&(n=a,t=ol(e,a))),1===t))throw r=Nc,pl(e,0),sl(e,n),nl(e,Qe()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(o(345));case 2:case 5:wl(e,Kc,Wc);break;case 3:if(sl(e,n),(130023424&n)===n&&10<(t=Uc+500-Qe())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(wl.bind(null,e,Kc,Wc),t);break}wl(e,Kc,Wc);break;case 4:if(sl(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-at(n);a=1<<s,(s=t[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Qe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ec(n/1960))-n)){e.timeoutHandle=ni(wl.bind(null,e,Kc,Wc),n);break}wl(e,Kc,Wc);break;default:throw Error(o(329))}}}return nl(e,Qe()),e.callbackNode===r?il.bind(null,e):null}function ol(e,t){var r=Lc;return e.current.memoizedState.isDehydrated&&(pl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=Kc,Kc=r,null!==t&&al(t)),e}function al(e){null===Kc?Kc=e:Kc.push.apply(Kc,e)}function sl(e,t){for(t&=~Fc,t&=~Bc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),n=1<<r;e[r]=-1,t&=~n}}function cl(e){if(0!=(6&xc))throw Error(o(327));Pl();var t=pt(e,0);if(0==(1&t))return nl(e,Qe()),null;var r=vl(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=ol(e,n))}if(1===r)throw r=Nc,pl(e,0),sl(e,t),nl(e,Qe()),r;if(6===r)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,Kc,Wc),nl(e,Qe()),null}function ll(e,t){var r=xc;xc|=1;try{return e(t)}finally{0===(xc=r)&&(Vc=Qe()+500,Li&&Vi())}}function ul(e){null!==$c&&0===$c.tag&&0==(6&xc)&&Pl();var t=xc;xc|=1;var r=Oc.transition,n=bt;try{if(Oc.transition=null,bt=1,e)return e()}finally{bt=n,Oc.transition=r,0==(6&(xc=t))&&Vi()}}function dl(){Dc=Rc.current,Ci(Rc)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==Ac)for(r=Ac.return;null!==r;){var n=r;switch(to(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Ri();break;case 3:oa(),Ci(Ii),Ci(xi),da();break;case 5:sa(n);break;case 4:oa();break;case 13:case 19:Ci(ca);break;case 10:_o(n.type._context);break;case 22:case 23:dl()}r=r.return}if(Ic=e,Ac=e=Rl(e.current,null),Mc=Dc=t,Tc=0,Nc=null,Fc=Bc=jc=0,Kc=Lc=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(n=(r=Oo[t]).interleaved)){r.interleaved=null;var i=n.next,o=r.pending;if(null!==o){var a=o.next;o.next=i,n.next=a}r.pending=n}Oo=null}return e}function hl(e,t){for(;;){var r=Ac;try{if(Po(),pa.current=as,ma){for(var n=ya.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}ma=!1}if(fa=0,ga=va=ya=null,ba=!1,Sa=0,kc.current=null,null===r||null===r.return){Tc=1,Nc=t,Ac=null;break}e:{var a=e,s=r.return,c=r,l=t;if(t=Mc,c.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,d=c,p=d.tag;if(0==(1&d.mode)&&(0===p||11===p||15===p)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ms(f,s,c,0,t),1&f.mode&&vs(a,u,t),l=u;var y=(t=f).updateQueue;if(null===y){var v=new Set;v.add(l),t.updateQueue=v}else y.add(l);break e}if(0==(1&t)){vs(a,u,t),yl();break e}l=Error(o(426))}else if(io&&1&c.mode){var g=gs(s);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),ms(g,s,c,0,t),yo(us(l,c));break e}}a=l=us(l,c),4!==Tc&&(Tc=2),null===Lc?Lc=[a]:Lc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,fs(0,l,t));break e;case 1:c=l;var m=a.type,b=a.stateNode;if(0==(128&a.flags)&&("function"==typeof m.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Gc||!Gc.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,ys(a,c,t));break e}}a=a.return}while(null!==a)}Sl(r)}catch(e){t=e,Ac===r&&null!==r&&(Ac=r=r.return);continue}break}}function fl(){var e=Cc.current;return Cc.current=as,null===e?as:e}function yl(){0!==Tc&&3!==Tc&&2!==Tc||(Tc=4),null===Ic||0==(268435455&jc)&&0==(268435455&Bc)||sl(Ic,Mc)}function vl(e,t){var r=xc;xc|=2;var n=fl();for(Ic===e&&Mc===t||(Wc=null,pl(e,t));;)try{gl();break}catch(t){hl(e,t)}if(Po(),xc=r,Cc.current=n,null!==Ac)throw Error(o(261));return Ic=null,Mc=0,Tc}function gl(){for(;null!==Ac;)bl(Ac)}function ml(){for(;null!==Ac&&!Xe();)bl(Ac)}function bl(e){var t=_c(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?Sl(e):Ac=t,kc.current=null}function Sl(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(r=qs(r,t,Dc)))return void(Ac=r)}else{if(null!==(r=$s(r,t)))return r.flags&=32767,void(Ac=r);if(null===e)return Tc=6,void(Ac=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ac=t);Ac=t=e}while(null!==t);0===Tc&&(Tc=5)}function wl(e,t,r){var n=bt,i=Oc.transition;try{Oc.transition=null,bt=1,function(e,t,r,n){do{Pl()}while(null!==$c);if(0!=(6&xc))throw Error(o(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-at(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}(e,a),e===Ic&&(Ac=Ic=null,Mc=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||qc||(qc=!0,Il(tt,(function(){return Pl(),null}))),a=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||a){a=Oc.transition,Oc.transition=null;var s=bt;bt=1;var c=xc;xc|=4,kc.current=null,function(e,t){if(ei=zt,hn(e=pn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(e){r=null;break e}var s=0,c=-1,l=-1,u=0,d=0,p=e,h=null;t:for(;;){for(var f;p!==r||0!==i&&3!==p.nodeType||(c=s+i),p!==a||0!==n&&3!==p.nodeType||(l=s+n),3===p.nodeType&&(s+=p.nodeValue.length),null!==(f=p.firstChild);)h=p,p=f;for(;;){if(p===e)break t;if(h===r&&++u===i&&(c=s),h===a&&++d===n&&(l=s),null!==(f=p.nextSibling))break;h=(p=h).parentNode}p=f}r=-1===c||-1===l?null:{start:c,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ti={focusedElem:e,selectionRange:r},zt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var y=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==y){var v=y.memoizedProps,g=y.memoizedState,m=t.stateNode,b=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:go(t.type,v),g);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=t.stateNode.containerInfo;1===S.nodeType?S.textContent="":9===S.nodeType&&S.documentElement&&S.removeChild(S.documentElement);break;default:throw Error(o(163))}}catch(e){El(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}y=tc,tc=!1}(e,r),vc(r,e),fn(ti),zt=!!ei,ti=ei=null,e.current=r,mc(r,e,i),Ye(),xc=c,bt=s,Oc.transition=a}else e.current=r;if(qc&&(qc=!1,$c=e,Xc=i),0===(a=e.pendingLanes)&&(Gc=null),function(e){if(ot&&"function"==typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(r.stateNode),nl(e,Qe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(zc)throw zc=!1,e=Hc,Hc=null,e;0!=(1&Xc)&&0!==e.tag&&Pl(),0!=(1&(a=e.pendingLanes))?e===Qc?Yc++:(Yc=0,Qc=e):Yc=0,Vi()}(e,t,r,n)}finally{Oc.transition=i,bt=n}return null}function Pl(){if(null!==$c){var e=St(Xc),t=Oc.transition,r=bt;try{if(Oc.transition=null,bt=16>e?16:e,null===$c)var n=!1;else{if(e=$c,$c=null,Xc=0,0!=(6&xc))throw Error(o(331));var i=xc;for(xc|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!=(16&Js.flags)){var c=a.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:rc(8,d,a)}var p=d.child;if(null!==p)p.return=d,Js=p;else for(;null!==Js;){var h=(d=Js).sibling,f=d.return;if(oc(d),d===u){Js=null;break}if(null!==h){h.return=f,Js=h;break}Js=f}}}var y=a.alternate;if(null!==y){var v=y.child;if(null!==v){y.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Js=a}}if(0!=(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!=(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:rc(9,a,a.return)}var m=a.sibling;if(null!==m){m.return=a.return,Js=m;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var S=(s=Js).child;if(0!=(2064&s.subtreeFlags)&&null!==S)S.return=s,Js=S;else e:for(s=b;null!==Js;){if(0!=(2048&(c=Js).flags))try{switch(c.tag){case 0:case 11:case 15:nc(9,c)}}catch(e){El(c,c.return,e)}if(c===s){Js=null;break e}var w=c.sibling;if(null!==w){w.return=c.return,Js=w;break e}Js=c.return}}if(xc=i,Vi(),ot&&"function"==typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(e){}n=!0}return n}finally{bt=r,Oc.transition=t}}return!1}function _l(e,t,r){e=No(e,t=fs(0,t=us(r,t),1),1),t=el(),null!==e&&(gt(e,1,t),nl(e,t))}function El(e,t,r){if(3===e.tag)_l(e,e,r);else for(;null!==t;){if(3===t.tag){_l(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Gc||!Gc.has(n))){t=No(t,e=ys(t,e=us(r,e),1),1),e=el(),null!==t&&(gt(t,1,e),nl(t,e));break}}t=t.return}}function Cl(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&r,Ic===e&&(Mc&r)===r&&(4===Tc||3===Tc&&(130023424&Mc)===Mc&&500>Qe()-Uc?pl(e,0):Fc|=r),nl(e,t)}function kl(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var r=el();null!==(e=Ao(e,t))&&(gt(e,t,r),nl(e,r))}function Ol(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),kl(e,r)}function xl(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(t),kl(e,r)}function Il(e,t){return qe(e,t)}function Al(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ml(e,t,r,n){return new Al(e,t,r,n)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rl(e,t){var r=e.alternate;return null===r?((r=Ml(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Tl(e,t,r,n,i,a){var s=2;if(n=e,"function"==typeof e)Dl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case _:return Nl(r.children,i,a,t);case E:s=8,i|=8;break;case C:return(e=Ml(12,r,t,2|i)).elementType=C,e.lanes=a,e;case I:return(e=Ml(13,r,t,i)).elementType=I,e.lanes=a,e;case A:return(e=Ml(19,r,t,i)).elementType=A,e.lanes=a,e;case R:return jl(r,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case O:s=9;break e;case x:s=11;break e;case M:s=14;break e;case D:s=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ml(s,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function Nl(e,t,r,n){return(e=Ml(7,e,n,t)).lanes=r,e}function jl(e,t,r,n){return(e=Ml(22,e,n,t)).elementType=R,e.lanes=r,e.stateNode={isHidden:!1},e}function Bl(e,t,r){return(e=Ml(6,e,null,t)).lanes=r,e}function Fl(e,t,r){return(t=Ml(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ll(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kl(e,t,r,n,i,o,a,s,c){return e=new Ll(e,t,r,s,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ml(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),e}function Ul(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:P,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Vl(e){if(!e)return Oi;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var r=e.type;if(Di(r))return Ni(e,r,t)}return t}function Wl(e,t,r,n,i,o,a,s,c){return(e=Kl(r,n,!0,e,0,o,0,s,c)).context=Vl(null),r=e.current,(o=To(n=el(),i=tl(r))).callback=null!=t?t:null,No(r,o,i),e.current.lanes=i,gt(e,i,n),nl(e,n),e}function zl(e,t,r,n){var i=t.current,o=el(),a=tl(i);return r=Vl(r),null===t.context?t.context=r:t.pendingContext=r,(t=To(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=No(i,t,a))&&(rl(e,i,a,o),jo(e,i,a)),a}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function ql(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}_c=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)Ss=!0;else{if(0==(e.lanes&r)&&0==(128&t.flags))return Ss=!1,function(e,t,r){switch(t.tag){case 3:As(t),fo();break;case 5:aa(t);break;case 1:Di(t.type)&&ji(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;ki(mo,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(ki(ca,1&ca.current),t.flags|=128,null):0!=(r&t.child.childLanes)?Bs(e,t,r):(ki(ca,1&ca.current),null!==(e=zs(e,t,r))?e.sibling:null);ki(ca,1&ca.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(128&e.flags)){if(n)return Vs(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ca,ca.current),n)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,r)}return zs(e,t,r)}(e,t,r);Ss=0!=(131072&e.flags)}else Ss=!1,io&&0!=(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ws(e,t),e=t.pendingProps;var i=Mi(t,xi.current);Co(t,r),i=Ea(null,t,n,e,i,r);var a=Ca();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(n)?(a=!0,ji(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Do(t),i.updater=Vo,t.stateNode=i,i._reactInternals=t,Go(t,n,e,r),t=Is(null,t,n,!0,a,r)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"==typeof e)return Dl(e)?1:0;if(null!=e){if((e=e.$$typeof)===x)return 11;if(e===M)return 14}return 2}(n),e=go(n,e),i){case 0:t=Os(null,t,n,e,r);break e;case 1:t=xs(null,t,n,e,r);break e;case 11:t=Ps(null,t,n,e,r);break e;case 14:t=_s(null,t,n,go(n.type,e),r);break e}throw Error(o(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Os(e,t,n,i=t.elementType===n?i:go(n,i),r);case 1:return n=t.type,i=t.pendingProps,xs(e,t,n,i=t.elementType===n?i:go(n,i),r);case 3:e:{if(As(t),null===e)throw Error(o(387));n=t.pendingProps,i=(a=t.memoizedState).element,Ro(e,t),Fo(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ms(e,t,n,r,i=us(Error(o(423)),t));break e}if(n!==i){t=Ms(e,t,n,r,i=us(Error(o(424)),t));break e}for(no=li(t.stateNode.containerInfo.firstChild),ro=t,io=!0,oo=null,r=Jo(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fo(),n===i){t=zs(e,t,r);break e}ws(e,t,n,r)}t=t.child}return t;case 5:return aa(t),null===e&&lo(t),n=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ri(n,i)?s=null:null!==a&&ri(n,a)&&(t.flags|=32),ks(e,t),ws(e,t,s,r),t.child;case 6:return null===e&&lo(t),null;case 13:return Bs(e,t,r);case 4:return ia(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Qo(t,null,n,r):ws(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,Ps(e,t,n,i=t.elementType===n?i:go(n,i),r);case 7:return ws(e,t,t.pendingProps,r),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,ki(mo,n._currentValue),n._currentValue=s,null!==a)if(sn(a.value,s)){if(a.children===i.children&&!Ii.current){t=zs(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var c=a.dependencies;if(null!==c){s=a.child;for(var l=c.firstContext;null!==l;){if(l.context===n){if(1===a.tag){(l=To(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),Eo(a.return,r,t),c.lanes|=r;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),Eo(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Co(t,r),n=n(i=ko(i)),t.flags|=1,ws(e,t,n,r),t.child;case 14:return i=go(n=t.type,t.pendingProps),_s(e,t,n,i=go(n.type,i),r);case 15:return Es(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:go(n,i),Ws(e,t),t.tag=1,Di(n)?(e=!0,ji(t)):e=!1,Co(t,r),zo(t,n,i),Go(t,n,i,r),Is(null,t,n,!0,e,r);case 19:return Vs(e,t,r);case 22:return Cs(e,t,r)}throw Error(o(156,t.tag))};var $l="function"==typeof reportError?reportError:function(e){console.error(e)};function Xl(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if("function"==typeof i){var s=i;i=function(){var e=Hl(a);s.call(e)}}zl(t,a,e,i)}else a=function(e,t,r,n,i){if(i){if("function"==typeof n){var o=n;n=function(){var e=Hl(a);o.call(e)}}var a=Wl(t,n,e,0,null,!1,0,"",Zl);return e._reactRootContainer=a,e[fi]=a.current,Vn(8===e.nodeType?e.parentNode:e),ul(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof n){var s=n;n=function(){var e=Hl(c);s.call(e)}}var c=Kl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[fi]=c.current,Vn(8===e.nodeType?e.parentNode:e),ul((function(){zl(t,c,r,n)})),c}(r,t,e,i,n);return Hl(a)}Yl.prototype.render=Xl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));zl(e,t,null,null)},Yl.prototype.unmount=Xl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){zl(null,e,null,null)})),t[fi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&Bt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(mt(t,1|r),nl(t,Qe()),0==(6&xc)&&(Vc=Qe()+500,Vi()))}break;case 13:ul((function(){var t=Ao(e,1);if(null!==t){var r=el();rl(t,e,1,r)}})),ql(e,1)}},Pt=function(e){if(13===e.tag){var t=Ao(e,134217728);if(null!==t)rl(t,e,134217728,el());ql(e,134217728)}},_t=function(e){if(13===e.tag){var t=tl(e),r=Ao(e,t);if(null!==r)rl(r,e,t,el());ql(e,t)}},Et=function(){return bt},Ct=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},Pe=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=wi(n);if(!i)throw Error(o(90));q(n),J(n,i)}}}break;case"textarea":oe(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},xe=ll,Ie=ul;var tu={usingClientEntryPoint:!1,Events:[bi,Si,wi,ke,Oe,ll]},ru={findFiberByHostInstance:mi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(nu),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(o(200));return Ul(e,t,null,r)},t.createRoot=function(e,t){if(!Ql(e))throw Error(o(299));var r=!1,n="",i=$l;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Kl(e,1,!1,null,0,r,0,n,i),e[fi]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Xl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,r){if(!Jl(t))throw Error(o(200));return eu(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Ql(e))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,i=!1,a="",s=$l;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Wl(t,null,e,1,null!=r?r:null,i,0,a,s),e[fi]=t.current,Vn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Yl(t)},t.render=function(e,t,r){if(!Jl(t))throw Error(o(200));return eu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(o(40));return!!e._reactRootContainer&&(ul((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jl(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},3935:(e,t,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(4448)},5251:(e,t,r)=>{"use strict";var n=r(7294),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,o={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!c.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:l,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},2408:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function g(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||f}function m(){}function b(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var S=b.prototype=new m;S.constructor=b,y(S,g.prototype),S.isPureReactComponent=!0;var w=Array.isArray,P=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)P.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:r,type:e,key:a,ref:s,props:o,_owner:_.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var O=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return a=a(c=e),e=""===o?"."+x(c,0):o,w(a)?(i="",null!=e&&(i=e.replace(O,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+e)),t.push(a)),1;if(c=0,o=""===o?".":o+":",w(e))for(var l=0;l<e.length;l++){var u=o+x(s=e[l],l);c+=I(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=I(s=s.value,t,i,u=o+x(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,r){if(null==e)return e;var n=[],i=0;return I(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},T={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,r){A(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=y({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)P.call(t,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:r,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},7294:(e,t,r)=>{"use strict";e.exports=r(2408)},5893:(e,t,r)=>{"use strict";e.exports=r(5251)},4754:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var n,i=r(5423),o=(n=i)&&n.__esModule?n:{default:n},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var r=t[e];return r||{extend:e}}},c=t.autoprefix=function(e){var t={};return(0,o.default)(e,(function(e,r){var n={};(0,o.default)(e,(function(e,t){var r=s[t];r?n=a({},n,r(e)):n[t]=e})),t[r]=n})),t};t.default=c},6002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var n,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(7294),a=(n=o)&&n.__esModule?n:{default:n};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){var r,o,l;s(this,n);for(var u=arguments.length,d=Array(u),p=0;p<u;p++)d[p]=arguments[p];return o=l=c(this,(r=n.__proto__||Object.getPrototypeOf(n)).call.apply(r,[this].concat(d))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return a.default.createElement(t,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},a.default.createElement(e,i({},l.props,l.state)))},c(l,o)}return l(n,r),n}(a.default.Component)};t.default=u},1765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var n,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(7294),a=(n=o)&&n.__esModule?n:{default:n};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){var r,o,l;s(this,n);for(var u=arguments.length,d=Array(u),p=0;p<u;p++)d[p]=arguments[p];return o=l=c(this,(r=n.__proto__||Object.getPrototypeOf(n)).call.apply(r,[this].concat(d))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return a.default.createElement(t,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},a.default.createElement(e,i({},l.props,l.state)))},c(l,o)}return l(n,r),n}(a.default.Component)};t.default=u},4147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var n=s(r(1953)),i=s(r(5423)),o=s(r(7890)),a=s(r(3183));function s(e){return e&&e.__esModule?e:{default:e}}var c=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[];return(0,a.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return r.push(e)})):(0,o.default)(t)?(0,i.default)(t,(function(e,t){!0===e&&r.push(t),r.push(t+"-"+e)})):(0,n.default)(t)&&r.push(t)})),r};t.default=c},9941:(e,t,r)=>{"use strict";t.tz=void 0;var n=l(r(4147)),i=l(r(8556)),o=l(r(4754)),a=l(r(1765)),s=l(r(6002)),c=l(r(7742));function l(e){return e&&e.__esModule?e:{default:e}}a.default,t.tz=a.default,s.default,c.default;var u=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var s=(0,n.default)(r),c=(0,i.default)(e,s);return(0,o.default)(c)};t.ZP=u},7742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var r={},n=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r[e]=t};return 0===e&&n("first-child"),e===t-1&&n("last-child"),(0===e||e%2==0)&&n("even"),1===Math.abs(e%2)&&n("odd"),n("nth-child",e),r}},8556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var n=a(r(5423)),i=a(r(7086)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.default&&(0,i.default)(e.default)||{};return t.map((function(t){var i=e[t];return i&&(0,n.default)(i,(function(e,t){r[t]||(r[t]={}),r[t]=o({},r[t],i[t])})),t})),r};t.default=s},53:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<o(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,a=i>>>1;n<a;){var s=2*(n+1)-1,c=e[s],l=s+1,u=e[l];if(0>o(c,r))l<i&&0>o(u,c)?(e[n]=u,e[l]=r,n=l):(e[n]=c,e[s]=r,n=s);else{if(!(l<i&&0>o(u,r)))break e;e[n]=u,e[l]=r,n=l}}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,p=null,h=3,f=!1,y=!1,v=!1,g="function"==typeof setTimeout?setTimeout:null,m="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function S(e){for(var t=n(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,r(l,t)}t=n(u)}}function w(e){if(v=!1,S(e),!y)if(null!==n(l))y=!0,R(P);else{var t=n(u);null!==t&&T(w,t.startTime-e)}}function P(e,r){y=!1,v&&(v=!1,m(k),k=-1),f=!0;var o=h;try{for(S(r),p=n(l);null!==p&&(!(p.expirationTime>r)||e&&!I());){var a=p.callback;if("function"==typeof a){p.callback=null,h=p.priorityLevel;var s=a(p.expirationTime<=r);r=t.unstable_now(),"function"==typeof s?p.callback=s:p===n(l)&&i(l),S(r)}else i(l);p=n(l)}if(null!==p)var c=!0;else{var d=n(u);null!==d&&T(w,d.startTime-r),c=!1}return c}finally{p=null,h=o,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,C=null,k=-1,O=5,x=-1;function I(){return!(t.unstable_now()-x<O)}function A(){if(null!==C){var e=t.unstable_now();x=e;var r=!0;try{r=C(!0,e)}finally{r?_():(E=!1,C=null)}}else E=!1}if("function"==typeof b)_=function(){b(A)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,D=M.port2;M.port1.onmessage=A,_=function(){D.postMessage(null)}}else _=function(){g(A,0)};function R(e){C=e,E||(E=!0,_())}function T(e,r){k=g((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){y||f||(y=!0,R(P))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,r(u,e),null===n(l)&&e===n(u)&&(v?(m(k),k=-1):v=!0,T(w,o-a))):(e.sortIndex=s,r(l,e),y||f||(y=!0,R(P))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}},3840:(e,t,r)=>{"use strict";e.exports=r(53)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var t=r(3326),n=r.n(t),i=r(5893);const o=e=>{let{title:t,message:r,onConfirm:n,onCancel:o}=e;return(0,i.jsx)("div",{className:"auth-overlay",children:(0,i.jsxs)("div",{className:"auth-dialog sk-panel",children:[(0,i.jsx)("div",{className:"sk-panel-header",children:(0,i.jsx)("div",{className:"sk-panel-header-title",children:t})}),(0,i.jsx)("div",{className:"sk-panel-content",children:(0,i.jsx)("div",{className:"sk-panel-section sk-panel-hero",children:(0,i.jsx)("div",{className:"sk-panel-row",children:(0,i.jsx)("div",{className:"sk-h1",children:r})})})}),(0,i.jsx)("div",{className:"sk-panel-footer",children:(0,i.jsxs)("div",{className:"sk-button-group stretch",children:[(0,i.jsx)("div",{className:"sk-button neutral",onClick:o,children:(0,i.jsx)("div",{className:"sk-label",children:"Cancel"})}),(0,i.jsx)("div",{className:"sk-button info",onClick:n,children:(0,i.jsx)("div",{className:"sk-label",children:"Confirm"})})]})})]})})};o.propTypes={title:n().string.isRequired,message:n().string.isRequired,onConfirm:n().func.isRequired,onCancel:n().func.isRequired};const a=o,s=()=>(0,i.jsx)("div",{className:"auth-overlay",children:(0,i.jsxs)("div",{className:"auth-dialog sk-panel",children:[(0,i.jsx)("div",{className:"sk-panel-header",children:(0,i.jsx)("div",{className:"sk-panel-header-title",children:"Invalid Note"})}),(0,i.jsx)("div",{className:"sk-panel-content",children:(0,i.jsx)("div",{className:"sk-panel-section sk-panel-hero",children:(0,i.jsx)("div",{className:"sk-panel-row",children:(0,i.jsx)("div",{className:"sk-h1",children:"The note you selected already has existing data that is not valid with this editor. Please clear the note, or select a new one, and try again."})})})})]})}),c="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",l=`^[${c}]{16,}$`;function u(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substring(r,r+2),16);return t.buffer}function d(e,t,r){return t+1>=e.length&&(e=Array(t+1-e.length).join(r)+e),e}function p(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return t+t+r+r+n+n}));const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16)}:null}function h(e){const t="--sn-stylekit-contrast-foreground-color",r="--sn-stylekit-contrast-background-color";if(!e)return t;return Math.round((299*parseInt(e.red)+587*parseInt(e.green)+114*parseInt(e.blue))/1e3)>70?r:t}const f=["info","success","neutral","warning"];function y(e,t){if(f.includes(t))return function(e,t){return getComputedStyle(e.documentElement).getPropertyValue(t).trim().toUpperCase()}(e,`--sn-stylekit-${t}-color`)}function v(e,t){const{color:r}=t;return f.includes(r)?y(e,r):r}const g=new class{async gen(e,t){var r,n=function(e){var t,r,n,i;for(t="",n="",i=0;i<e.length;)t+=d(c.indexOf(e.charAt(i).toUpperCase()).toString(2),5,"0"),i++;for(i=0;i+4<=t.length;)r=t.substr(i,4),n+=parseInt(r,2).toString(16),i+=4;return n}(e)||"",i=(t=t||{}).counter||0,o=d(((r=i)<15.5?"0":"")+Math.round(r).toString(16),16,"0"),a=function(e){for(var t=[],r=0,n=e.length;r<n;r+=2)t.push(parseInt(e.substr(r,2),16));return t}(await this.createHmac("SHA-1",n,o)),s=15&a[a.length-1],l=(127&a[s])<<24|(255&a[s+1])<<16|(255&a[s+2])<<8|255&a[s+3];return l=l%1e6+"",Array(7-l.length).join("0")+l}async verify(e,t,r){for(var n=(r=r||{}).window||50,i=r.counter||0,o=i-n;o<=i+n;++o)if(r.counter=o,await this.gen(t,r)===e)return{delta:o-i};return null}async createHmac(e,t,r){const n=await window.crypto.subtle.importKey("raw",u(t),{name:"HMAC",hash:{name:e}},!1,["sign"]),i=await window.crypto.subtle.sign("HMAC",n,u(r));return o=i,Array.prototype.map.call(new Uint8Array(o),(e=>("00"+e.toString(16)).slice(-2))).join("");var o}};const m=new class{async gen(e,t){var r=(t=t||{}).time||30,n=Date.now();return t.counter=Math.floor(n/1e3/r),g.gen(e,t)}async verify(e,t,r){var n=(r=r||{}).time||30,i=Date.now();return r.counter=Math.floor(i/1e3/n),g.verify(e,t,r)}};var b=r(3710),S=r.n(b),w=r(7294);class P extends w.Component{constructor(){super(),e(this,"onImageSelected",(e=>{const t=e.target.files[0],r=URL.createObjectURL(t),n=new Image,i=this;return n.onload=function(){URL.revokeObjectURL(this.src);const e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.width,e.height=this.height,t.drawImage(this,0,0);let r=t.getImageData(0,0,this.width,this.height);r=(e=>{if(e){for(let t=0;t<e.data.length;t+=4){const r=e.data[t]+e.data[t+1]+e.data[t+2];let n=0;r>510?n=255:r>255&&(n=127.5),e.data[t]=n,e.data[t+1]=n,e.data[t+2]=n,e.data[t+3]=255}return e}})(r);const n=S()(r.data,r.width,r.height),{onError:o,onSuccess:a}=i.props;if(n){const e=function(e){if("string"!=typeof e||e.length<7)return null;const t=/otpauth:\/\/([A-Za-z]+)\/([^?]+)\??(.*)?/i.exec(e);if(!t||t.length<3)return null;const[r,n,i]=t;if(!n||!i)return null;const o=decodeURIComponent(i),a=o.split(/: ?/),s=a&&2===a.length?{issuer:a[0],account:a[1]}:{issuer:"",account:o},c=[...t[3]?new URLSearchParams(t[3]):[]].reduce(((e,t)=>{let[r,n]=t;return e[r]=n,e}),{});return{type:n.toLowerCase(),label:s,query:c}}(n.data);"totp"!==e.type?o(`The '${e.type}' type is not supported.`):a(e)}else o("Error reading QR code from image. Please try again.")},n.src=r,!1})),this.fileInputRef=w.createRef(null)}render(){return(0,i.jsx)("div",{className:"qr-code-reader-container",children:(0,i.jsxs)("div",{className:"sk-button info",onClick:()=>this.fileInputRef.current.click(),children:[(0,i.jsx)("div",{className:"sk-label",children:"Upload QR Code"}),(0,i.jsx)("input",{type:"file",style:{display:"none"},ref:this.fileInputRef,onChange:this.onImageSelected})]})})}}P.propTypes={onError:n().func.isRequired,onSuccess:n().func.isRequired};var _=function(){function e(e){var t=e.title,r=e.text,n=e.buttons;this.title=t,this.text=r,this.buttons=n||[]}return e.prototype.buttonsString=function(){var e=this.buttons.map((function(e,t){return function(e,t){return"\n        <button id='button-".concat(t,"' class='font-bold px-2.5 py-2 text-xs text-info-contrast bg-").concat(e.style,"'>\n          <div class='sk-label'>").concat(e.text,"</div>\n        </button>\n      ")}(e,t)})).join("");return"\n      <div class='sk-button-group'>\n        ".concat(e,"\n      </div>\n    ")},e.prototype.templateString=function(){var e,t;this.buttons?(e="\n        <div class=\"sk-panel-row\" style='margin-top: 8px;'>\n          ".concat(this.buttonsString(),"\n        </div>\n      "),t=""):(e="",t='style="padding-bottom: 8px"');var r=this.title?"<div class='sk-h3 sk-panel-section-title'>".concat(this.title,"</div>"):"",n=this.text?"<p class='sk-p'>".concat(this.text,"</p>"):"";return'\n      <div class="sk-modal">\n        <div class="sk-modal-background"></div>\n        <div class="sk-modal-content">\n          <div class="sn-component">\n            <div class="sk-panel" style=\'max-width: 500px;\'>\n              <div class="sk-panel-content" '.concat(t,'>\n                <div class="sk-panel-section">\n                  ').concat(r,'\n\n                  <div class="sk-panel-row">\n                    ').concat(n,"\n                  </div>\n\n                  ").concat(e,"\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ")},e.prototype.dismiss=function(){this.onElement.removeChild(this.element)},e.prototype.primaryButton=function(){var e=this.buttons.find((function(e){return!0===e.primary}));return e||(e=this.buttons[this.buttons.length-1]),e},e.prototype.present=function(e){var t=this;e||(e=document.body),this.onElement=e,this.element=document.createElement("div"),this.element.className="sn-component",this.element.innerHTML=this.templateString().trim(),e.appendChild(this.element),this.buttons&&this.buttons.length&&this.buttons.forEach((function(e,r){var n=t.element.querySelector("#button-".concat(r));n.onclick=function(){e.action&&e.action(),t.dismiss()},0===r&&n.focus()}))},e}(),E=r(9941),C=function(e,t,r,n,i){var o=i.clientWidth,a=i.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,c="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=s-(i.getBoundingClientRect().left+window.pageXOffset),u=c-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===r){var d=void 0;if(d=u<0?0:u>a?1:Math.round(100*u/a)/100,t.a!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}else{var p=void 0;if(n!==(p=l<0?0:l>o?1:Math.round(100*l/o)/100))return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null},k={},O=function(e,t,r,n){var i=e+"-"+t+"-"+r+(n?"-server":"");if(k[i])return k[i];var o=function(e,t,r,n){if("undefined"==typeof document&&!n)return null;var i=n?new n:document.createElement("canvas");i.width=2*r,i.height=2*r;var o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,r,r),o.translate(r,r),o.fillRect(0,0,r,r),i.toDataURL()):null}(e,t,r,n);return k[i]=o,o},x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I=function(e){var t=e.white,r=e.grey,n=e.size,i=e.renderers,o=e.borderRadius,a=e.boxShadow,s=e.children,c=(0,E.ZP)({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+O(t,r,n,i.canvas)+") center left"}}});return(0,w.isValidElement)(s)?w.cloneElement(s,x({},s.props,{style:x({},s.props.style,c.grid)})):w.createElement("div",{style:c.grid})};I.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};const A=I;var M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}const N=function(e){function t(){var e,r,n;R(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=n=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.handleChange=function(e){var t=C(e,n.props.hsl,n.props.direction,n.props.a,n.container);t&&"function"==typeof n.props.onChange&&n.props.onChange(t,e)},n.handleMouseDown=function(e){n.handleChange(e),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleChange),window.removeEventListener("mouseup",n.handleMouseUp)},T(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),D(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,r=(0,E.ZP)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:M({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return w.createElement("div",{style:r.alpha},w.createElement("div",{style:r.checkboard},w.createElement(A,{renderers:this.props.renderers})),w.createElement("div",{style:r.gradient}),w.createElement("div",{style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},w.createElement("div",{style:r.pointer},this.props.pointer?w.createElement(this.props.pointer,this.props):w.createElement("div",{style:r.slider}))))}}]),t}(w.PureComponent||w.Component);var j=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var B=[38,40],F=1,L=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(e){r.setUpdatedValue(e.target.value,e)},r.handleKeyDown=function(e){var t,n=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(n)&&(t=e.keyCode,B.indexOf(t)>-1)){var i=r.getArrowOffset(),o=38===e.keyCode?n+i:n-i;r.setUpdatedValue(o,e)}},r.handleDrag=function(e){if(r.props.dragLabel){var t=Math.round(r.props.value+e.movementX);t>=0&&t<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(t),e)}},r.handleMouseDown=function(e){r.props.dragLabel&&(e.preventDefault(),r.handleDrag(e),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},r.inputId="rc-editable-input-"+F++,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),j(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var r=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(r,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,E.ZP)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return w.createElement("div",{style:t.wrap},w.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?w.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(w.PureComponent||w.Component);const K=L;var U=function(e,t,r,n){var i=n.clientWidth,o=n.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=a-(n.getBoundingClientRect().left+window.pageXOffset),l=s-(n.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(l<0)u=359;else if(l>o)u=0;else{u=360*(-100*l/o+100)/100}if(r.h!==u)return{h:u,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var d=void 0;if(c<0)d=0;else if(c>i)d=359;else{d=360*(100*c/i)/100}if(r.h!==d)return{h:d,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},V=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}const H=function(e){function t(){var e,r,n;W(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=n=z(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.handleChange=function(e){var t=U(e,n.props.direction,n.props.hsl,n.container);t&&"function"==typeof n.props.onChange&&n.props.onChange(t,e)},n.handleMouseDown=function(e){n.handleChange(e),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},z(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),V(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,r=void 0===t?"horizontal":t,n=(0,E.ZP)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===r});return w.createElement("div",{style:n.hue},w.createElement("div",{className:"hue-"+r,style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},w.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),w.createElement("div",{style:n.pointer},this.props.pointer?w.createElement(this.props.pointer,this.props):w.createElement("div",{style:n.slider}))))}}]),t}(w.PureComponent||w.Component);const G=function(){this.__data__=[],this.size=0};const q=function(e,t){return e===t||e!=e&&t!=t};const $=function(e,t){for(var r=e.length;r--;)if(q(e[r][0],t))return r;return-1};var X=Array.prototype.splice;const Y=function(e){var t=this.__data__,r=$(t,e);return!(r<0)&&(r==t.length-1?t.pop():X.call(t,r,1),--this.size,!0)};const Q=function(e){var t=this.__data__,r=$(t,e);return r<0?void 0:t[r][1]};const J=function(e){return $(this.__data__,e)>-1};const Z=function(e,t){var r=this.__data__,n=$(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function ee(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ee.prototype.clear=G,ee.prototype.delete=Y,ee.prototype.get=Q,ee.prototype.has=J,ee.prototype.set=Z;const te=ee;const re=function(){this.__data__=new te,this.size=0};const ne=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};const ie=function(e){return this.__data__.get(e)};const oe=function(e){return this.__data__.has(e)};const ae="object"==typeof global&&global&&global.Object===Object&&global;var se="object"==typeof self&&self&&self.Object===Object&&self;const ce=ae||se||Function("return this")();const le=ce.Symbol;var ue=Object.prototype,de=ue.hasOwnProperty,pe=ue.toString,he=le?le.toStringTag:void 0;const fe=function(e){var t=de.call(e,he),r=e[he];try{e[he]=void 0;var n=!0}catch(e){}var i=pe.call(e);return n&&(t?e[he]=r:delete e[he]),i};var ye=Object.prototype.toString;const ve=function(e){return ye.call(e)};var ge=le?le.toStringTag:void 0;const me=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ge&&ge in Object(e)?fe(e):ve(e)};const be=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const Se=function(e){if(!be(e))return!1;var t=me(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const we=ce["__core-js_shared__"];var Pe,_e=(Pe=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+Pe:"";const Ee=function(e){return!!_e&&_e in e};var Ce=Function.prototype.toString;const ke=function(e){if(null!=e){try{return Ce.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var Oe=/^\[object .+?Constructor\]$/,xe=Function.prototype,Ie=Object.prototype,Ae=xe.toString,Me=Ie.hasOwnProperty,De=RegExp("^"+Ae.call(Me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Re=function(e){return!(!be(e)||Ee(e))&&(Se(e)?De:Oe).test(ke(e))};const Te=function(e,t){return null==e?void 0:e[t]};const Ne=function(e,t){var r=Te(e,t);return Re(r)?r:void 0};const je=Ne(ce,"Map");const Be=Ne(Object,"create");const Fe=function(){this.__data__=Be?Be(null):{},this.size=0};const Le=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var Ke=Object.prototype.hasOwnProperty;const Ue=function(e){var t=this.__data__;if(Be){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Ke.call(t,e)?t[e]:void 0};var Ve=Object.prototype.hasOwnProperty;const We=function(e){var t=this.__data__;return Be?void 0!==t[e]:Ve.call(t,e)};const ze=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Be&&void 0===t?"__lodash_hash_undefined__":t,this};function He(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}He.prototype.clear=Fe,He.prototype.delete=Le,He.prototype.get=Ue,He.prototype.has=We,He.prototype.set=ze;const Ge=He;const qe=function(){this.size=0,this.__data__={hash:new Ge,map:new(je||te),string:new Ge}};const $e=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const Xe=function(e,t){var r=e.__data__;return $e(t)?r["string"==typeof t?"string":"hash"]:r.map};const Ye=function(e){var t=Xe(this,e).delete(e);return this.size-=t?1:0,t};const Qe=function(e){return Xe(this,e).get(e)};const Je=function(e){return Xe(this,e).has(e)};const Ze=function(e,t){var r=Xe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function et(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}et.prototype.clear=qe,et.prototype.delete=Ye,et.prototype.get=Qe,et.prototype.has=Je,et.prototype.set=Ze;const tt=et;const rt=function(e,t){var r=this.__data__;if(r instanceof te){var n=r.__data__;if(!je||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new tt(n)}return r.set(e,t),this.size=r.size,this};function nt(e){var t=this.__data__=new te(e);this.size=t.size}nt.prototype.clear=re,nt.prototype.delete=ne,nt.prototype.get=ie,nt.prototype.has=oe,nt.prototype.set=rt;const it=nt;const ot=function(){try{var e=Ne(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();const at=function(e,t,r){"__proto__"==t&&ot?ot(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};const st=function(e,t,r){(void 0!==r&&!q(e[t],r)||void 0===r&&!(t in e))&&at(e,t,r)};const ct=function(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===r(o[c],c,o))break}return t}}();var lt="object"==typeof exports&&exports&&!exports.nodeType&&exports,ut=lt&&"object"==typeof module&&module&&!module.nodeType&&module,dt=ut&&ut.exports===lt?ce.Buffer:void 0,pt=dt?dt.allocUnsafe:void 0;const ht=function(e,t){if(t)return e.slice();var r=e.length,n=pt?pt(r):new e.constructor(r);return e.copy(n),n};const ft=ce.Uint8Array;const yt=function(e){var t=new e.constructor(e.byteLength);return new ft(t).set(new ft(e)),t};const vt=function(e,t){var r=t?yt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};const gt=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var mt=Object.create;const bt=function(){function e(){}return function(t){if(!be(t))return{};if(mt)return mt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const St=function(e,t){return function(r){return e(t(r))}};const wt=St(Object.getPrototypeOf,Object);var Pt=Object.prototype;const _t=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pt)};const Et=function(e){return"function"!=typeof e.constructor||_t(e)?{}:bt(wt(e))};const Ct=function(e){return null!=e&&"object"==typeof e};const kt=function(e){return Ct(e)&&"[object Arguments]"==me(e)};var Ot=Object.prototype,xt=Ot.hasOwnProperty,It=Ot.propertyIsEnumerable;const At=kt(function(){return arguments}())?kt:function(e){return Ct(e)&&xt.call(e,"callee")&&!It.call(e,"callee")};const Mt=Array.isArray;const Dt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};const Rt=function(e){return null!=e&&Dt(e.length)&&!Se(e)};const Tt=function(e){return Ct(e)&&Rt(e)};const Nt=function(){return!1};var jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bt=jt&&"object"==typeof module&&module&&!module.nodeType&&module,Ft=Bt&&Bt.exports===jt?ce.Buffer:void 0;const Lt=(Ft?Ft.isBuffer:void 0)||Nt;var Kt=Function.prototype,Ut=Object.prototype,Vt=Kt.toString,Wt=Ut.hasOwnProperty,zt=Vt.call(Object);const Ht=function(e){if(!Ct(e)||"[object Object]"!=me(e))return!1;var t=wt(e);if(null===t)return!0;var r=Wt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Vt.call(r)==zt};var Gt={};Gt["[object Float32Array]"]=Gt["[object Float64Array]"]=Gt["[object Int8Array]"]=Gt["[object Int16Array]"]=Gt["[object Int32Array]"]=Gt["[object Uint8Array]"]=Gt["[object Uint8ClampedArray]"]=Gt["[object Uint16Array]"]=Gt["[object Uint32Array]"]=!0,Gt["[object Arguments]"]=Gt["[object Array]"]=Gt["[object ArrayBuffer]"]=Gt["[object Boolean]"]=Gt["[object DataView]"]=Gt["[object Date]"]=Gt["[object Error]"]=Gt["[object Function]"]=Gt["[object Map]"]=Gt["[object Number]"]=Gt["[object Object]"]=Gt["[object RegExp]"]=Gt["[object Set]"]=Gt["[object String]"]=Gt["[object WeakMap]"]=!1;const qt=function(e){return Ct(e)&&Dt(e.length)&&!!Gt[me(e)]};const $t=function(e){return function(t){return e(t)}};var Xt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Yt=Xt&&"object"==typeof module&&module&&!module.nodeType&&module,Qt=Yt&&Yt.exports===Xt&&ae.process,Jt=function(){try{var e=Yt&&Yt.require&&Yt.require("util").types;return e||Qt&&Qt.binding&&Qt.binding("util")}catch(e){}}();var Zt=Jt&&Jt.isTypedArray;const er=Zt?$t(Zt):qt;const tr=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var rr=Object.prototype.hasOwnProperty;const nr=function(e,t,r){var n=e[t];rr.call(e,t)&&q(n,r)&&(void 0!==r||t in e)||at(e,t,r)};const ir=function(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=n?n(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),i?at(r,s,c):nr(r,s,c)}return r};const or=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var ar=/^(?:0|[1-9]\d*)$/;const sr=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&ar.test(e))&&e>-1&&e%1==0&&e<t};var cr=Object.prototype.hasOwnProperty;const lr=function(e,t){var r=Mt(e),n=!r&&At(e),i=!r&&!n&&Lt(e),o=!r&&!n&&!i&&er(e),a=r||n||i||o,s=a?or(e.length,String):[],c=s.length;for(var l in e)!t&&!cr.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||sr(l,c))||s.push(l);return s};const ur=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t};var dr=Object.prototype.hasOwnProperty;const pr=function(e){if(!be(e))return ur(e);var t=_t(e),r=[];for(var n in e)("constructor"!=n||!t&&dr.call(e,n))&&r.push(n);return r};const hr=function(e){return Rt(e)?lr(e,!0):pr(e)};const fr=function(e){return ir(e,hr(e))};const yr=function(e,t,r,n,i,o,a){var s=tr(e,r),c=tr(t,r),l=a.get(c);if(l)st(e,r,l);else{var u=o?o(s,c,r+"",e,t,a):void 0,d=void 0===u;if(d){var p=Mt(c),h=!p&&Lt(c),f=!p&&!h&&er(c);u=c,p||h||f?Mt(s)?u=s:Tt(s)?u=gt(s):h?(d=!1,u=ht(c,!0)):f?(d=!1,u=vt(c,!0)):u=[]:Ht(c)||At(c)?(u=s,At(s)?u=fr(s):be(s)&&!Se(s)||(u=Et(c))):d=!1}d&&(a.set(c,u),i(u,c,n,o,a),a.delete(c)),st(e,r,u)}};const vr=function e(t,r,n,i,o){t!==r&&ct(r,(function(a,s){if(o||(o=new it),be(a))yr(t,r,s,n,e,i,o);else{var c=i?i(tr(t,s),a,s+"",t,r,o):void 0;void 0===c&&(c=a),st(t,s,c)}}),hr)};const gr=function(e){return e};const mr=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)};var br=Math.max;const Sr=function(e,t,r){return t=br(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=br(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),mr(e,this,s)}};const wr=function(e){return function(){return e}};const Pr=ot?function(e,t){return ot(e,"toString",{configurable:!0,enumerable:!1,value:wr(t),writable:!0})}:gr;var _r=Date.now;const Er=function(e){var t=0,r=0;return function(){var n=_r(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};const Cr=Er(Pr);const kr=function(e,t){return Cr(Sr(e,t,gr),e+"")};const Or=function(e,t,r){if(!be(r))return!1;var n=typeof t;return!!("number"==n?Rt(r)&&sr(t,r.length):"string"==n&&t in r)&&q(r[t],e)};const xr=function(e){return kr((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Or(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t}))}((function(e,t,r){vr(e,t,r)}));var Ir=function(e){var t=e.zDepth,r=e.radius,n=e.background,i=e.children,o=e.styles,a=void 0===o?{}:o,s=(0,E.ZP)(xr({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:r,background:n}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":1===t});return w.createElement("div",{style:s.wrap},w.createElement("div",{style:s.bg}),w.createElement("div",{style:s.content},i))};Ir.propTypes={background:n().string,zDepth:n().oneOf([0,1,2,3,4,5]),radius:n().number,styles:n().object},Ir.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};const Ar=Ir;const Mr=function(){return ce.Date.now()};var Dr=/\s/;const Rr=function(e){for(var t=e.length;t--&&Dr.test(e.charAt(t)););return t};var Tr=/^\s+/;const Nr=function(e){return e?e.slice(0,Rr(e)+1).replace(Tr,""):e};const jr=function(e){return"symbol"==typeof e||Ct(e)&&"[object Symbol]"==me(e)};var Br=/^[-+]0x[0-9a-f]+$/i,Fr=/^0b[01]+$/i,Lr=/^0o[0-7]+$/i,Kr=parseInt;const Ur=function(e){if("number"==typeof e)return e;if(jr(e))return NaN;if(be(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=be(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Nr(e);var r=Fr.test(e);return r||Lr.test(e)?Kr(e.slice(2),r?2:8):Br.test(e)?NaN:+e};var Vr=Math.max,Wr=Math.min;const zr=function(e,t,r){var n,i,o,a,s,c,l=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var r=n,o=i;return n=i=void 0,l=t,a=e.apply(o,r)}function f(e){return l=e,s=setTimeout(v,t),u?h(e):a}function y(e){var r=e-c;return void 0===c||r>=t||r<0||d&&e-l>=o}function v(){var e=Mr();if(y(e))return g(e);s=setTimeout(v,function(e){var r=t-(e-c);return d?Wr(r,o-(e-l)):r}(e))}function g(e){return s=void 0,p&&n?h(e):(n=i=void 0,a)}function m(){var e=Mr(),r=y(e);if(n=arguments,i=this,c=e,r){if(void 0===s)return f(c);if(d)return clearTimeout(s),s=setTimeout(v,t),h(c)}return void 0===s&&(s=setTimeout(v,t)),a}return t=Ur(t)||0,be(r)&&(u=!!r.leading,o=(d="maxWait"in r)?Vr(Ur(r.maxWait)||0,t):o,p="trailing"in r?!!r.trailing:p),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,n=c=i=s=void 0},m.flush=function(){return void 0===s?a:g(Mr())},m};const Hr=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return be(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),zr(e,t,{leading:n,maxWait:t,trailing:i})};var Gr=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var qr=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleChange=function(e){"function"==typeof r.props.onChange&&r.throttle(r.props.onChange,function(e,t,r){var n=r.getBoundingClientRect(),i=n.width,o=n.height,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=a-(r.getBoundingClientRect().left+window.pageXOffset),l=s-(r.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>i&&(c=i),l<0?l=0:l>o&&(l=o);var u=c/i,d=1-l/o;return{h:t.h,s:u,v:d,a:t.a,source:"hsv"}}(e,r.props.hsl,r.container),e)},r.handleMouseDown=function(e){r.handleChange(e);var t=r.getContainerRenderWindow();t.addEventListener("mousemove",r.handleChange),t.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=Hr((function(e,t,r){e(t,r)}),50),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Gr(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},r=t.color,n=t.white,i=t.black,o=t.pointer,a=t.circle,s=(0,E.ZP)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:r,white:n,black:i,pointer:o,circle:a}},{custom:!!this.props.style});return w.createElement("div",{style:s.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},w.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),w.createElement("div",{style:s.white,className:"saturation-white"},w.createElement("div",{style:s.black,className:"saturation-black"}),w.createElement("div",{style:s.pointer},this.props.pointer?w.createElement(this.props.pointer,this.props):w.createElement("div",{style:s.circle}))))}}]),t}(w.PureComponent||w.Component);const $r=qr;const Xr=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e};const Yr=St(Object.keys,Object);var Qr=Object.prototype.hasOwnProperty;const Jr=function(e){if(!_t(e))return Yr(e);var t=[];for(var r in Object(e))Qr.call(e,r)&&"constructor"!=r&&t.push(r);return t};const Zr=function(e){return Rt(e)?lr(e):Jr(e)};const en=function(e,t){return function(r,n){if(null==r)return r;if(!Rt(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}((function(e,t){return e&&ct(e,t,Zr)}));const tn=function(e){return"function"==typeof e?e:gr};const rn=function(e,t){return(Mt(e)?Xr:en)(e,tn(t))};var nn=r(3733),on=r.n(nn),an=function(e){var t=0,r=0;return rn(["r","g","b","a","h","s","l","v"],(function(n){if(e[n]&&(t+=1,isNaN(e[n])||(r+=1),"s"===n||"l"===n)){/^\d+%$/.test(e[n])&&(r+=1)}})),t===r&&e},sn=function(e,t){var r=e.hex?on()(e.hex):on()(e),n=r.toHsl(),i=r.toHsv(),o=r.toRgb(),a=r.toHex();return 0===n.s&&(n.h=t||0,i.h=t||0),{hsl:n,hex:"000000"===a&&0===o.a?"transparent":"#"+a,rgb:o,hsv:i,oldHue:e.h||t||n.h,source:e.source}},cn=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&on()(e).isValid()},ln=function(e){if(!e)return"#fff";var t=sn(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},un=function(e,t){var r=e.replace("","");return on()(t+" ("+r+")")._ok},dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();const hn=function(e){var t=function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.handleChange=function(e,r){if(an(e)){var n=sn(e,e.h||t.state.oldHue);t.setState(n),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,n,r),t.props.onChange&&t.props.onChange(n,r)}},t.handleSwatchHover=function(e,r){if(an(e)){var n=sn(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(n,r)}},t.state=dn({},sn(e.color,0)),t.debounce=zr((function(e,t,r){e(t,r)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),pn(r,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),w.createElement(e,dn({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return dn({},sn(e.color,t.oldHue))}}]),r}(w.PureComponent||w.Component);return t.propTypes=dn({},e.propTypes),t.defaultProps=dn({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};var fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yn=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function mn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};const Sn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){var e,t,r;vn(this,n);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r=gn(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.state={focus:!1},r.handleFocus=function(){return r.setState({focus:!0})},r.handleBlur=function(){return r.setState({focus:!1})},gn(r,t)}return mn(n,r),yn(n,[{key:"render",value:function(){return w.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},w.createElement(e,fn({},this.props,this.state)))}}]),n}(w.Component)}((function(e){var t=e.color,r=e.style,n=e.onClick,i=void 0===n?function(){}:n,o=e.onHover,a=e.title,s=void 0===a?t:a,c=e.children,l=e.focus,u=e.focusStyle,d=void 0===u?{}:u,p="transparent"===t,h=(0,E.ZP)({default:{swatch:bn({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,l?d:{})}}),f={};return o&&(f.onMouseOver=function(e){return o(t,e)}),w.createElement("div",bn({style:h.swatch,onClick:function(e){return i(t,e)},title:s,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&i(t,e)}},f),c,p&&w.createElement(A,{borderRadius:h.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))}));const wn=function(e){var t=e.direction,r=(0,E.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return w.createElement("div",{style:r.picker})};var Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_n=function(e){var t=e.rgb,r=e.hsl,n=e.width,i=e.height,o=e.onChange,a=e.direction,s=e.style,c=e.renderers,l=e.pointer,u=e.className,d=void 0===u?"":u,p=(0,E.ZP)({default:{picker:{position:"relative",width:n,height:i},alpha:{radius:"2px",style:s}}});return w.createElement("div",{style:p.picker,className:"alpha-picker "+d},w.createElement(N,Pn({},p.alpha,{rgb:t,hsl:r,pointer:l,renderers:c,onChange:o,direction:a})))};_n.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:wn};hn(_n);const En=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i};const Cn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const kn=function(e){return this.__data__.has(e)};function On(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new tt;++t<r;)this.add(e[t])}On.prototype.add=On.prototype.push=Cn,On.prototype.has=kn;const xn=On;const In=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};const An=function(e,t){return e.has(t)};const Mn=function(e,t,r,n,i,o){var a=1&r,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var d=-1,p=!0,h=2&r?new xn:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],y=t[d];if(n)var v=a?n(y,f,d,t,e,o):n(f,y,d,e,t,o);if(void 0!==v){if(v)continue;p=!1;break}if(h){if(!In(t,(function(e,t){if(!An(h,t)&&(f===e||i(f,e,r,n,o)))return h.push(t)}))){p=!1;break}}else if(f!==y&&!i(f,y,r,n,o)){p=!1;break}}return o.delete(e),o.delete(t),p};const Dn=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};const Rn=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r};var Tn=le?le.prototype:void 0,Nn=Tn?Tn.valueOf:void 0;const jn=function(e,t,r,n,i,o,a){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new ft(e),new ft(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return q(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Dn;case"[object Set]":var c=1&n;if(s||(s=Rn),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;n|=2,a.set(e,t);var u=Mn(s(e),s(t),n,i,o,a);return a.delete(e),u;case"[object Symbol]":if(Nn)return Nn.call(e)==Nn.call(t)}return!1};const Bn=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e};const Fn=function(e,t,r){var n=t(e);return Mt(e)?n:Bn(n,r(e))};const Ln=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o};const Kn=function(){return[]};var Un=Object.prototype.propertyIsEnumerable,Vn=Object.getOwnPropertySymbols;const Wn=Vn?function(e){return null==e?[]:(e=Object(e),Ln(Vn(e),(function(t){return Un.call(e,t)})))}:Kn;const zn=function(e){return Fn(e,Zr,Wn)};var Hn=Object.prototype.hasOwnProperty;const Gn=function(e,t,r,n,i,o){var a=1&r,s=zn(e),c=s.length;if(c!=zn(t).length&&!a)return!1;for(var l=c;l--;){var u=s[l];if(!(a?u in t:Hn.call(t,u)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var h=!0;o.set(e,t),o.set(t,e);for(var f=a;++l<c;){var y=e[u=s[l]],v=t[u];if(n)var g=a?n(v,y,u,t,e,o):n(y,v,u,e,t,o);if(!(void 0===g?y===v||i(y,v,r,n,o):g)){h=!1;break}f||(f="constructor"==u)}if(h&&!f){var m=e.constructor,b=t.constructor;m==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(h=!1)}return o.delete(e),o.delete(t),h};const qn=Ne(ce,"DataView");const $n=Ne(ce,"Promise");const Xn=Ne(ce,"Set");const Yn=Ne(ce,"WeakMap");var Qn="[object Map]",Jn="[object Promise]",Zn="[object Set]",ei="[object WeakMap]",ti="[object DataView]",ri=ke(qn),ni=ke(je),ii=ke($n),oi=ke(Xn),ai=ke(Yn),si=me;(qn&&si(new qn(new ArrayBuffer(1)))!=ti||je&&si(new je)!=Qn||$n&&si($n.resolve())!=Jn||Xn&&si(new Xn)!=Zn||Yn&&si(new Yn)!=ei)&&(si=function(e){var t=me(e),r="[object Object]"==t?e.constructor:void 0,n=r?ke(r):"";if(n)switch(n){case ri:return ti;case ni:return Qn;case ii:return Jn;case oi:return Zn;case ai:return ei}return t});const ci=si;var li="[object Arguments]",ui="[object Array]",di="[object Object]",pi=Object.prototype.hasOwnProperty;const hi=function(e,t,r,n,i,o){var a=Mt(e),s=Mt(t),c=a?ui:ci(e),l=s?ui:ci(t),u=(c=c==li?di:c)==di,d=(l=l==li?di:l)==di,p=c==l;if(p&&Lt(e)){if(!Lt(t))return!1;a=!0,u=!1}if(p&&!u)return o||(o=new it),a||er(e)?Mn(e,t,r,n,i,o):jn(e,t,c,r,n,i,o);if(!(1&r)){var h=u&&pi.call(e,"__wrapped__"),f=d&&pi.call(t,"__wrapped__");if(h||f){var y=h?e.value():e,v=f?t.value():t;return o||(o=new it),i(y,v,r,n,o)}}return!!p&&(o||(o=new it),Gn(e,t,r,n,i,o))};const fi=function e(t,r,n,i,o){return t===r||(null==t||null==r||!Ct(t)&&!Ct(r)?t!=t&&r!=r:hi(t,r,n,i,e,o))};const yi=function(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=r[i])[0],l=e[c],u=s[1];if(a&&s[2]){if(void 0===l&&!(c in e))return!1}else{var d=new it;if(n)var p=n(l,u,c,e,t,d);if(!(void 0===p?fi(u,l,3,n,d):p))return!1}}return!0};const vi=function(e){return e==e&&!be(e)};const gi=function(e){for(var t=Zr(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,vi(i)]}return t};const mi=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}};const bi=function(e){var t=gi(e);return 1==t.length&&t[0][2]?mi(t[0][0],t[0][1]):function(r){return r===e||yi(r,e,t)}};var Si=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wi=/^\w*$/;const Pi=function(e,t){if(Mt(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!jr(e))||(wi.test(e)||!Si.test(e)||null!=t&&e in Object(t))};function _i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(_i.Cache||tt),r}_i.Cache=tt;const Ei=_i;var Ci=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ki=/\\(\\)?/g,Oi=function(e){var t=Ei(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ci,(function(e,r,n,i){t.push(n?i.replace(ki,"$1"):r||e)})),t}));const xi=Oi;var Ii=le?le.prototype:void 0,Ai=Ii?Ii.toString:void 0;const Mi=function e(t){if("string"==typeof t)return t;if(Mt(t))return En(t,e)+"";if(jr(t))return Ai?Ai.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r};const Di=function(e){return null==e?"":Mi(e)};const Ri=function(e,t){return Mt(e)?e:Pi(e,t)?[e]:xi(Di(e))};const Ti=function(e){if("string"==typeof e||jr(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};const Ni=function(e,t){for(var r=0,n=(t=Ri(t,e)).length;null!=e&&r<n;)e=e[Ti(t[r++])];return r&&r==n?e:void 0};const ji=function(e,t,r){var n=null==e?void 0:Ni(e,t);return void 0===n?r:n};const Bi=function(e,t){return null!=e&&t in Object(e)};const Fi=function(e,t,r){for(var n=-1,i=(t=Ri(t,e)).length,o=!1;++n<i;){var a=Ti(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Dt(i)&&sr(a,i)&&(Mt(e)||At(e))};const Li=function(e,t){return null!=e&&Fi(e,t,Bi)};const Ki=function(e,t){return Pi(e)&&vi(t)?mi(Ti(e),t):function(r){var n=ji(r,e);return void 0===n&&n===t?Li(r,e):fi(t,n,3)}};const Ui=function(e){return function(t){return null==t?void 0:t[e]}};const Vi=function(e){return function(t){return Ni(t,e)}};const Wi=function(e){return Pi(e)?Ui(Ti(e)):Vi(e)};const zi=function(e){return"function"==typeof e?e:null==e?gr:"object"==typeof e?Mt(e)?Ki(e[0],e[1]):bi(e):Wi(e)};const Hi=function(e,t){var r=-1,n=Rt(e)?Array(e.length):[];return en(e,(function(e,i,o){n[++r]=t(e,i,o)})),n};const Gi=function(e,t){return(Mt(e)?En:Hi)(e,zi(t,3))};const qi=function(e){var t=e.colors,r=e.onClick,n=e.onSwatchHover,i=(0,E.ZP)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return w.createElement("div",{style:i.swatches},Gi(t,(function(e){return w.createElement(Sn,{key:e,color:e,style:i.swatch,onClick:r,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),w.createElement("div",{style:i.clear}))};var $i=function(e){var t=e.onChange,r=e.onSwatchHover,n=e.hex,i=e.colors,o=e.width,a=e.triangle,s=e.styles,c=void 0===s?{}:s,l=e.className,u=void 0===l?"":l,d="transparent"===n,p=function(e,r){cn(e)&&t({hex:e,source:"hex"},r)},h=(0,E.ZP)(xr({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:n,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:ln(n),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+n+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":"hide"===a});return w.createElement("div",{style:h.card,className:"block-picker "+u},w.createElement("div",{style:h.triangle}),w.createElement("div",{style:h.head},d&&w.createElement(A,{borderRadius:"6px 6px 0 0"}),w.createElement("div",{style:h.label},n)),w.createElement("div",{style:h.body},w.createElement(qi,{colors:i,onClick:p,onSwatchHover:r}),w.createElement(K,{style:{input:h.input},value:n,onChange:p})))};$i.propTypes={width:n().oneOfType([n().string,n().number]),colors:n().arrayOf(n().string),triangle:n().oneOf(["top","hide"]),styles:n().object},$i.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};hn($i);var Xi={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Yi={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Qi={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Ji={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Zi={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},eo={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},to={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},ro={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},no={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},io={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},oo={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},ao={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},so={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},co={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},lo={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},uo={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},po={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},ho={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"};var fo=function(e){var t=e.color,r=e.onClick,n=e.onSwatchHover,i=e.hover,o=e.active,a=e.circleSize,s=e.circleSpacing,c=(0,E.ZP)({default:{swatch:{width:a,height:a,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:o});return w.createElement("div",{style:c.swatch},w.createElement(Sn,{style:c.Swatch,color:t,onClick:r,onHover:n,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+t}}))};fo.defaultProps={circleSize:28,circleSpacing:14};const yo=(0,E.tz)(fo);var vo=function(e){var t=e.width,r=e.onChange,n=e.onSwatchHover,i=e.colors,o=e.hex,a=e.circleSize,s=e.styles,c=void 0===s?{}:s,l=e.circleSpacing,u=e.className,d=void 0===u?"":u,p=(0,E.ZP)(xr({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-l,marginBottom:-l}}},c)),h=function(e,t){return r({hex:e,source:"hex"},t)};return w.createElement("div",{style:p.card,className:"circle-picker "+d},Gi(i,(function(e){return w.createElement(yo,{key:e,color:e,onClick:h,onSwatchHover:n,active:o===e.toLowerCase(),circleSize:a,circleSpacing:l})})))};vo.propTypes={width:n().oneOfType([n().string,n().number]),circleSize:n().number,circleSpacing:n().number,styles:n().object},vo.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Xi[500],Yi[500],Qi[500],Ji[500],Zi[500],eo[500],to[500],ro[500],no[500],io[500],oo[500],ao[500],so[500],co[500],lo[500],uo[500],po[500],ho[500]],styles:{}};hn(vo);const go=function(e){return void 0===e};var mo=r(3891),bo=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var So=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.toggleViews=function(){"hex"===r.state.view?r.setState({view:"rgb"}):"rgb"===r.state.view?r.setState({view:"hsl"}):"hsl"===r.state.view&&(1===r.props.hsl.a?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(e,t){e.hex?cn(e.hex)&&r.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?r.props.onChange({r:e.r||r.props.rgb.r,g:e.g||r.props.rgb.g,b:e.b||r.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),r.props.onChange({h:e.h||r.props.hsl.h,s:Number(go(e.s)?r.props.hsl.s:e.s),l:Number(go(e.l)?r.props.hsl.l:e.l),source:"hsl"},t))},r.showHighlight=function(e){e.currentTarget.style.background="#eee"},r.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?r.state={view:"rgb"}:r.state={view:e.view},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),bo(t,[{key:"render",value:function(){var e=this,t=(0,E.ZP)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),r=void 0;return"hex"===this.state.view?r=w.createElement("div",{style:t.fields,className:"flexbox-fix"},w.createElement("div",{style:t.field},w.createElement(K,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?r=w.createElement("div",{style:t.fields,className:"flexbox-fix"},w.createElement("div",{style:t.field},w.createElement(K,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),w.createElement("div",{style:t.field},w.createElement(K,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),w.createElement("div",{style:t.field},w.createElement(K,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),w.createElement("div",{style:t.alpha},w.createElement(K,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(r=w.createElement("div",{style:t.fields,className:"flexbox-fix"},w.createElement("div",{style:t.field},w.createElement(K,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),w.createElement("div",{style:t.field},w.createElement(K,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),w.createElement("div",{style:t.field},w.createElement(K,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),w.createElement("div",{style:t.alpha},w.createElement(K,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),w.createElement("div",{style:t.wrap,className:"flexbox-fix"},r,w.createElement("div",{style:t.toggle},w.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},w.createElement(mo.Z,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(w.Component);So.defaultProps={view:"hex"};const wo=So;const Po=function(){var e=(0,E.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return w.createElement("div",{style:e.picker})};const _o=function(){var e=(0,E.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return w.createElement("div",{style:e.picker})};var Eo=function(e){var t=e.width,r=e.onChange,n=e.disableAlpha,i=e.rgb,o=e.hsl,a=e.hsv,s=e.hex,c=e.renderers,l=e.styles,u=void 0===l?{}:l,d=e.className,p=void 0===d?"":d,h=e.defaultView,f=(0,E.ZP)(xr({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:n});return w.createElement("div",{style:f.picker,className:"chrome-picker "+p},w.createElement("div",{style:f.saturation},w.createElement($r,{style:f.Saturation,hsl:o,hsv:a,pointer:_o,onChange:r})),w.createElement("div",{style:f.body},w.createElement("div",{style:f.controls,className:"flexbox-fix"},w.createElement("div",{style:f.color},w.createElement("div",{style:f.swatch},w.createElement("div",{style:f.active}),w.createElement(A,{renderers:c}))),w.createElement("div",{style:f.toggles},w.createElement("div",{style:f.hue},w.createElement(H,{style:f.Hue,hsl:o,pointer:Po,onChange:r})),w.createElement("div",{style:f.alpha},w.createElement(N,{style:f.Alpha,rgb:i,hsl:o,pointer:Po,renderers:c,onChange:r})))),w.createElement(wo,{rgb:i,hsl:o,hex:s,view:h,onChange:r,disableAlpha:n})))};Eo.propTypes={width:n().oneOfType([n().string,n().number]),disableAlpha:n().bool,styles:n().object,defaultView:n().oneOf(["hex","rgb","hsl"])},Eo.defaultProps={width:225,disableAlpha:!1,styles:{}};hn(Eo);const Co=function(e){var t=e.color,r=e.onClick,n=void 0===r?function(){}:r,i=e.onSwatchHover,o=e.active,a=(0,E.ZP)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:ln(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return w.createElement(Sn,{style:a.color,color:t,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},w.createElement("div",{style:a.dot}))};const ko=function(e){var t=e.hex,r=e.rgb,n=e.onChange,i=(0,E.ZP)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(e,t){e.r||e.g||e.b?n({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},t):n({hex:e.hex,source:"hex"},t)};return w.createElement("div",{style:i.fields,className:"flexbox-fix"},w.createElement("div",{style:i.active}),w.createElement(K,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:o}),w.createElement(K,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:r.r,onChange:o}),w.createElement(K,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:r.g,onChange:o}),w.createElement(K,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:r.b,onChange:o}))};var Oo=function(e){var t=e.onChange,r=e.onSwatchHover,n=e.colors,i=e.hex,o=e.rgb,a=e.styles,s=void 0===a?{}:a,c=e.className,l=void 0===c?"":c,u=(0,E.ZP)(xr({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),d=function(e,r){e.hex?cn(e.hex)&&t({hex:e.hex,source:"hex"},r):t(e,r)};return w.createElement(Ar,{style:u.Compact,styles:s},w.createElement("div",{style:u.compact,className:"compact-picker "+l},w.createElement("div",null,Gi(n,(function(e){return w.createElement(Co,{key:e,color:e,active:e.toLowerCase()===i,onClick:d,onSwatchHover:r})})),w.createElement("div",{style:u.clear})),w.createElement(ko,{hex:i,rgb:o,onChange:d})))};Oo.propTypes={colors:n().arrayOf(n().string),styles:n().object},Oo.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};hn(Oo);const xo=(0,E.tz)((function(e){var t=e.hover,r=e.color,n=e.onClick,i=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=(0,E.ZP)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return w.createElement("div",{style:a.swatch},w.createElement(Sn,{color:r,onClick:n,onHover:i,focusStyle:o}))}));var Io=function(e){var t=e.width,r=e.colors,n=e.onChange,i=e.onSwatchHover,o=e.triangle,a=e.styles,s=void 0===a?{}:a,c=e.className,l=void 0===c?"":c,u=(0,E.ZP)(xr({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o,"bottom-left-triangle":"bottom-left"===o,"bottom-right-triangle":"bottom-right"===o}),d=function(e,t){return n({hex:e,source:"hex"},t)};return w.createElement("div",{style:u.card,className:"github-picker "+l},w.createElement("div",{style:u.triangleShadow}),w.createElement("div",{style:u.triangle}),Gi(r,(function(e){return w.createElement(xo,{color:e,key:e,onClick:d,onSwatchHover:i})})))};Io.propTypes={width:n().oneOfType([n().string,n().number]),colors:n().arrayOf(n().string),triangle:n().oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:n().object},Io.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};hn(Io);const Ao=function(e){var t=e.direction,r=(0,E.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return w.createElement("div",{style:r.picker})};var Mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Do=function(e){var t=e.width,r=e.height,n=e.onChange,i=e.hsl,o=e.direction,a=e.pointer,s=e.styles,c=void 0===s?{}:s,l=e.className,u=void 0===l?"":l,d=(0,E.ZP)(xr({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}},c));return w.createElement("div",{style:d.picker,className:"hue-picker "+u},w.createElement(H,Mo({},d.hue,{hsl:i,pointer:a,onChange:function(e){return n({a:1,h:e.h,l:.5,s:1})},direction:o})))};Do.propTypes={styles:n().object},Do.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Ao,styles:{}};hn(Do);hn((function(e){var t=e.onChange,r=e.hex,n=e.rgb,i=e.styles,o=void 0===i?{}:i,a=e.className,s=void 0===a?"":a,c=(0,E.ZP)(xr({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),l=function(e,r){e.hex?cn(e.hex)&&t({hex:e.hex,source:"hex"},r):(e.r||e.g||e.b)&&t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},r)};return w.createElement(Ar,{styles:o},w.createElement("div",{style:c.material,className:"material-picker "+s},w.createElement(K,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:r,onChange:l}),w.createElement("div",{style:c.split,className:"flexbox-fix"},w.createElement("div",{style:c.third},w.createElement(K,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:n.r,onChange:l})),w.createElement("div",{style:c.third},w.createElement(K,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:n.g,onChange:l})),w.createElement("div",{style:c.third},w.createElement(K,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:n.b,onChange:l})))))}));const Ro=function(e){var t=e.onChange,r=e.rgb,n=e.hsv,i=e.hex,o=(0,E.ZP)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(e,i){e["#"]?cn(e["#"])&&t({hex:e["#"],source:"hex"},i):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},i):(e.h||e.s||e.v)&&t({h:e.h||n.h,s:e.s||n.s,v:e.v||n.v,source:"hsv"},i)};return w.createElement("div",{style:o.fields},w.createElement(K,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(n.h),onChange:a}),w.createElement(K,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(100*n.s),onChange:a}),w.createElement(K,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(100*n.v),onChange:a}),w.createElement("div",{style:o.divider}),w.createElement(K,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:a}),w.createElement(K,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:a}),w.createElement(K,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:a}),w.createElement("div",{style:o.divider}),w.createElement(K,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:i.replace("#",""),onChange:a}),w.createElement("div",{style:o.fieldSymbols},w.createElement("div",{style:o.symbol},""),w.createElement("div",{style:o.symbol},"%"),w.createElement("div",{style:o.symbol},"%")))};const To=function(e){var t=e.hsl,r=(0,E.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return w.createElement("div",{style:r.picker})};const No=function(){var e=(0,E.ZP)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return w.createElement("div",{style:e.pointer},w.createElement("div",{style:e.left},w.createElement("div",{style:e.leftInside})),w.createElement("div",{style:e.right},w.createElement("div",{style:e.rightInside})))};const jo=function(e){var t=e.onClick,r=e.label,n=e.children,i=e.active,o=(0,E.ZP)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return w.createElement("div",{style:o.button,onClick:t},r||n)};const Bo=function(e){var t=e.rgb,r=e.currentColor,n=(0,E.ZP)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return w.createElement("div",null,w.createElement("div",{style:n.label},"new"),w.createElement("div",{style:n.swatches},w.createElement("div",{style:n.new}),w.createElement("div",{style:n.current})),w.createElement("div",{style:n.label},"current"))};var Fo=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var Lo=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={currentColor:e.hex},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Fo(t,[{key:"render",value:function(){var e=this.props,t=e.styles,r=void 0===t?{}:t,n=e.className,i=void 0===n?"":n,o=(0,E.ZP)(xr({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},r));return w.createElement("div",{style:o.picker,className:"photoshop-picker "+i},w.createElement("div",{style:o.head},this.props.header),w.createElement("div",{style:o.body,className:"flexbox-fix"},w.createElement("div",{style:o.saturation},w.createElement($r,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:To,onChange:this.props.onChange})),w.createElement("div",{style:o.hue},w.createElement(H,{direction:"vertical",hsl:this.props.hsl,pointer:No,onChange:this.props.onChange})),w.createElement("div",{style:o.controls},w.createElement("div",{style:o.top,className:"flexbox-fix"},w.createElement("div",{style:o.previews},w.createElement(Bo,{rgb:this.props.rgb,currentColor:this.state.currentColor})),w.createElement("div",{style:o.actions},w.createElement(jo,{label:"OK",onClick:this.props.onAccept,active:!0}),w.createElement(jo,{label:"Cancel",onClick:this.props.onCancel}),w.createElement(Ro,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(w.Component);Lo.propTypes={header:n().string,styles:n().object},Lo.defaultProps={header:"Color Picker",styles:{}};hn(Lo);const Ko=function(e){var t=e.onChange,r=e.rgb,n=e.hsl,i=e.hex,o=e.disableAlpha,a=(0,E.ZP)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),s=function(e,i){e.hex?cn(e.hex)&&t({hex:e.hex,source:"hex"},i):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,a:r.a,source:"rgb"},i):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:n.h,s:n.s,l:n.l,a:e.a,source:"rgb"},i))};return w.createElement("div",{style:a.fields,className:"flexbox-fix"},w.createElement("div",{style:a.double},w.createElement(K,{style:{input:a.input,label:a.label},label:"hex",value:i.replace("#",""),onChange:s})),w.createElement("div",{style:a.single},w.createElement(K,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:s,dragLabel:"true",dragMax:"255"})),w.createElement("div",{style:a.single},w.createElement(K,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:s,dragLabel:"true",dragMax:"255"})),w.createElement("div",{style:a.single},w.createElement(K,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:s,dragLabel:"true",dragMax:"255"})),w.createElement("div",{style:a.alpha},w.createElement(K,{style:{input:a.input,label:a.label},label:"a",value:Math.round(100*r.a),onChange:s,dragLabel:"true",dragMax:"100"})))};var Uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vo=function(e){var t=e.colors,r=e.onClick,n=void 0===r?function(){}:r,i=e.onSwatchHover,o=(0,E.ZP)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(e,t){n({hex:e,source:"hex"},t)};return w.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,r=""+t.color+(t.title||"");return w.createElement("div",{key:r,style:o.swatchWrap},w.createElement(Sn,Uo({},t,{style:o.swatch,onClick:a,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};Vo.propTypes={colors:n().arrayOf(n().oneOfType([n().string,n().shape({color:n().string,title:n().string})])).isRequired};const Wo=Vo;var zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ho=function(e){var t=e.width,r=e.rgb,n=e.hex,i=e.hsv,o=e.hsl,a=e.onChange,s=e.onSwatchHover,c=e.disableAlpha,l=e.presetColors,u=e.renderers,d=e.styles,p=void 0===d?{}:d,h=e.className,f=void 0===h?"":h,y=(0,E.ZP)(xr({default:zo({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:c});return w.createElement("div",{style:y.picker,className:"sketch-picker "+f},w.createElement("div",{style:y.saturation},w.createElement($r,{style:y.Saturation,hsl:o,hsv:i,onChange:a})),w.createElement("div",{style:y.controls,className:"flexbox-fix"},w.createElement("div",{style:y.sliders},w.createElement("div",{style:y.hue},w.createElement(H,{style:y.Hue,hsl:o,onChange:a})),w.createElement("div",{style:y.alpha},w.createElement(N,{style:y.Alpha,rgb:r,hsl:o,renderers:u,onChange:a}))),w.createElement("div",{style:y.color},w.createElement(A,null),w.createElement("div",{style:y.activeColor}))),w.createElement(Ko,{rgb:r,hsl:o,hex:n,onChange:a,disableAlpha:c}),w.createElement(Wo,{colors:l,onClick:a,onSwatchHover:s}))};Ho.propTypes={disableAlpha:n().bool,width:n().oneOfType([n().string,n().number]),styles:n().object},Ho.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};hn(Ho);const Go=function(e){var t=e.hsl,r=e.offset,n=e.onClick,i=void 0===n?function(){}:n,o=e.active,a=e.first,s=e.last,c=(0,E.ZP)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*r+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:s});return w.createElement("div",{style:c.swatch,onClick:function(e){return i({h:t.h,s:.5,l:r,source:"hsl"},e)}})};const qo=function(e){var t=e.onClick,r=e.hsl,n=(0,E.ZP)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return w.createElement("div",{style:n.swatches},w.createElement("div",{style:n.swatch},w.createElement(Go,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<i&&Math.abs(r.s-.5)<i,onClick:t,first:!0})),w.createElement("div",{style:n.swatch},w.createElement(Go,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<i&&Math.abs(r.s-.5)<i,onClick:t})),w.createElement("div",{style:n.swatch},w.createElement(Go,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<i&&Math.abs(r.s-.5)<i,onClick:t})),w.createElement("div",{style:n.swatch},w.createElement(Go,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<i&&Math.abs(r.s-.5)<i,onClick:t})),w.createElement("div",{style:n.swatch},w.createElement(Go,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<i&&Math.abs(r.s-.5)<i,onClick:t,last:!0})),w.createElement("div",{style:n.clear}))};const $o=function(){var e=(0,E.ZP)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return w.createElement("div",{style:e.picker})};var Xo=function(e){var t=e.hsl,r=e.onChange,n=e.pointer,i=e.styles,o=void 0===i?{}:i,a=e.className,s=void 0===a?"":a,c=(0,E.ZP)(xr({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return w.createElement("div",{style:c.wrap||{},className:"slider-picker "+s},w.createElement("div",{style:c.hue},w.createElement(H,{style:c.Hue,hsl:t,pointer:n,onChange:r})),w.createElement("div",{style:c.swatches},w.createElement(qo,{hsl:t,onClick:r})))};Xo.propTypes={styles:n().object},Xo.defaultProps={pointer:$o,styles:{}};hn(Xo);var Yo=r(597);const Qo=function(e){var t=e.color,r=e.onClick,n=void 0===r?function(){}:r,i=e.onSwatchHover,o=e.first,a=e.last,s=e.active,c=(0,E.ZP)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:ln(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:a,active:s,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return w.createElement(Sn,{color:t,style:c.color,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},w.createElement("div",{style:c.check},w.createElement(Yo.Z,null)))};const Jo=function(e){var t=e.onClick,r=e.onSwatchHover,n=e.group,i=e.active,o=(0,E.ZP)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return w.createElement("div",{style:o.group},Gi(n,(function(e,o){return w.createElement(Qo,{key:e,color:e,active:e.toLowerCase()===i,first:0===o,last:o===n.length-1,onClick:t,onSwatchHover:r})})))};var Zo=function(e){var t=e.width,r=e.height,n=e.onChange,i=e.onSwatchHover,o=e.colors,a=e.hex,s=e.styles,c=void 0===s?{}:s,l=e.className,u=void 0===l?"":l,d=(0,E.ZP)(xr({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),p=function(e,t){return n({hex:e,source:"hex"},t)};return w.createElement("div",{style:d.picker,className:"swatches-picker "+u},w.createElement(Ar,null,w.createElement("div",{style:d.overflow},w.createElement("div",{style:d.body},Gi(o,(function(e){return w.createElement(Jo,{key:e.toString(),group:e,active:a,onClick:p,onSwatchHover:i})})),w.createElement("div",{style:d.clear})))))};Zo.propTypes={width:n().oneOfType([n().string,n().number]),height:n().oneOfType([n().string,n().number]),colors:n().arrayOf(n().arrayOf(n().string)),styles:n().object},Zo.defaultProps={width:320,height:240,colors:[[Xi[900],Xi[700],Xi[500],Xi[300],Xi[100]],[Yi[900],Yi[700],Yi[500],Yi[300],Yi[100]],[Qi[900],Qi[700],Qi[500],Qi[300],Qi[100]],[Ji[900],Ji[700],Ji[500],Ji[300],Ji[100]],[Zi[900],Zi[700],Zi[500],Zi[300],Zi[100]],[eo[900],eo[700],eo[500],eo[300],eo[100]],[to[900],to[700],to[500],to[300],to[100]],[ro[900],ro[700],ro[500],ro[300],ro[100]],[no[900],no[700],no[500],no[300],no[100]],["#194D33",io[700],io[500],io[300],io[100]],[oo[900],oo[700],oo[500],oo[300],oo[100]],[ao[900],ao[700],ao[500],ao[300],ao[100]],[so[900],so[700],so[500],so[300],so[100]],[co[900],co[700],co[500],co[300],co[100]],[lo[900],lo[700],lo[500],lo[300],lo[100]],[uo[900],uo[700],uo[500],uo[300],uo[100]],[po[900],po[700],po[500],po[300],po[100]],[ho[900],ho[700],ho[500],ho[300],ho[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};hn(Zo);var ea=function(e){var t=e.onChange,r=e.onSwatchHover,n=e.hex,i=e.colors,o=e.width,a=e.triangle,s=e.styles,c=void 0===s?{}:s,l=e.className,u=void 0===l?"":l,d=(0,E.ZP)(xr({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a}),p=function(e,r){cn(e)&&t({hex:e,source:"hex"},r)};return w.createElement("div",{style:d.card,className:"twitter-picker "+u},w.createElement("div",{style:d.triangleShadow}),w.createElement("div",{style:d.triangle}),w.createElement("div",{style:d.body},Gi(i,(function(e,t){return w.createElement(Sn,{key:t,color:e,hex:e,style:d.swatch,onClick:p,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),w.createElement("div",{style:d.hash},"#"),w.createElement(K,{label:null,style:{input:d.input},value:n.replace("#",""),onChange:p}),w.createElement("div",{style:d.clear})))};ea.propTypes={width:n().oneOfType([n().string,n().number]),triangle:n().oneOf(["hide","top-left","top-right"]),colors:n().arrayOf(n().string),styles:n().object},ea.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};const ta=hn(ea);var ra=function(e){var t=(0,E.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return w.createElement("div",{style:t.picker})};ra.propTypes={hsl:n().shape({h:n().number,s:n().number,l:n().number,a:n().number})},ra.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const na=ra;var ia=function(e){var t=(0,E.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return w.createElement("div",{style:t.picker})};ia.propTypes={hsl:n().shape({h:n().number,s:n().number,l:n().number,a:n().number})},ia.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const oa=ia;const aa=function(e){var t=e.onChange,r=e.rgb,n=e.hsl,i=e.hex,o=e.hsv,a=function(e,r){if(e.hex)cn(e.hex)&&t({hex:e.hex,source:"hex"},r);else if(e.rgb){var n=e.rgb.split(",");un(e.rgb,"rgb")&&t({r:n[0],g:n[1],b:n[2],a:1,source:"rgb"},r)}else if(e.hsv){var i=e.hsv.split(",");un(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},r))}else if(e.hsl){var o=e.hsl.split(",");un(e.hsl,"hsl")&&(o[2]=o[2].replace("%",""),o[1]=o[1].replace("%",""),o[0]=o[0].replace("",""),1==u[1]?u[1]=.01:1==u[2]&&(u[2]=.01),t({h:Number(o[0]),s:Number(o[1]),v:Number(o[2]),source:"hsl"},r))}},s=(0,E.ZP)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=r.r+", "+r.g+", "+r.b,l=Math.round(n.h)+", "+Math.round(100*n.s)+"%, "+Math.round(100*n.l)+"%",u=Math.round(o.h)+", "+Math.round(100*o.s)+"%, "+Math.round(100*o.v)+"%";return w.createElement("div",{style:s.wrap,className:"flexbox-fix"},w.createElement("div",{style:s.fields},w.createElement("div",{style:s.double},w.createElement(K,{style:{input:s.input,label:s.label},label:"hex",value:i,onChange:a})),w.createElement("div",{style:s.column},w.createElement("div",{style:s.single},w.createElement(K,{style:{input:s.input2,label:s.label2},label:"rgb",value:c,onChange:a})),w.createElement("div",{style:s.single},w.createElement(K,{style:{input:s.input2,label:s.label2},label:"hsv",value:u,onChange:a})),w.createElement("div",{style:s.single},w.createElement(K,{style:{input:s.input2,label:s.label2},label:"hsl",value:l,onChange:a})))))};var sa=function(e){var t=e.width,r=e.onChange,n=e.rgb,i=e.hsl,o=e.hsv,a=e.hex,s=e.header,c=e.styles,l=void 0===c?{}:c,u=e.className,d=void 0===u?"":u,p=(0,E.ZP)(xr({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+n.r+", "+n.g+", "+n.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},l));return w.createElement("div",{style:p.picker,className:"google-picker "+d},w.createElement("div",{style:p.head},s),w.createElement("div",{style:p.swatch}),w.createElement("div",{style:p.saturation},w.createElement($r,{hsl:i,hsv:o,pointer:na,onChange:r})),w.createElement("div",{style:p.body},w.createElement("div",{style:p.controls,className:"flexbox-fix"},w.createElement("div",{style:p.hue},w.createElement(H,{style:p.Hue,hsl:i,radius:"4px",pointer:oa,onChange:r}))),w.createElement(aa,{rgb:n,hsl:i,hex:a,hsv:o,onChange:r})))};sa.propTypes={width:n().oneOfType([n().string,n().number]),styles:n().object,header:n().string},sa.defaultProps={width:652,styles:{},header:"Color picker"};hn(sa);class ca extends w.Component{constructor(t){super(t),e(this,"handleInputChange",(e=>{const t=e.target,r=t.name,n="secret"===r?this.formatSecret(t.value):t.value;this.setState((e=>({entry:{...e.entry,[r]:n}})))})),e(this,"handleSwatchClick",(()=>{this.setState({showColorPicker:!this.state.showColorPicker})})),e(this,"handleColorPickerClose",(()=>{this.setState({showColorPicker:!1})})),e(this,"removeColor",(()=>{this.setState((e=>(delete e.entry.color,{entry:e.entry})))})),e(this,"onSave",(()=>{const{id:e,entry:t,is2fa:r}=this.state;this.props.onSave({id:e,entry:{...t,secret:r?t.secret:""}})})),e(this,"onQRCodeSuccess",(e=>{const{issuer:t,account:r}=e.label,{issuer:n,secret:i}=e.query;this.setState({entry:{service:t||n||"",account:r,secret:this.formatSecret(i)},is2fa:!0})})),e(this,"onQRCodeError",(e=>{this.setState({qrCodeError:e})})),e(this,"dismissQRCodeError",(()=>{this.setState({qrCodeError:!1})}));const{id:r,entry:n}=t;this.state={id:r,entry:n,showColorPicker:!1,qrCodeError:!1,is2fa:void 0===r||!!n.secret}}formatSecret(e){return e.replace(/\s/g,"").toUpperCase()}render(){const{id:e,entry:t,showColorPicker:r,qrCodeError:n,is2fa:o}=this.state,a=new _({title:"Error",text:n,buttons:[{text:"OK",style:"info",action:this.dismissQRCodeError}]});n&&a.present();const s=v(document,t),c={width:"36px",height:"14px",borderRadius:"2px",background:`${s??"#FFF"}`},u=function(e){return f.map((t=>y(e,t)))}(document),d=[...u,"#658bdb","#4CBBFC","#FF794D","#EF5276","#91B73D","#9B7ECF"];return(0,i.jsx)("div",{className:"auth-edit sk-panel",children:(0,i.jsx)("div",{className:"sk-panel-content",children:(0,i.jsxs)("div",{className:"sk-panel-section",children:[(0,i.jsxs)("div",{className:"sk-panel-section-title sk-panel-row",children:[(0,i.jsx)("div",{className:"sk-panel-row",children:(0,i.jsxs)("div",{className:"left-header",children:[(0,i.jsx)("div",{className:"sk-panel-section-title pr-4",children:null!=e?"Edit entry":"Add new entry"}),(0,i.jsxs)("div",{className:"sk-input-group",onChange:e=>{let{target:t}=e;this.setState({is2fa:"2fa"===t.value})},children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{className:"sk-input",type:"radio",value:"2fa",name:"type",defaultChecked:o})," 2FA"]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{className:"sk-input",type:"radio",value:"password",name:"type",defaultChecked:!o})," ","Password only"]})]})]})}),(0,i.jsxs)("div",{className:"sk-panel-section-title sk-panel-row",children:[null==e&&(0,i.jsx)(P,{onSuccess:this.onQRCodeSuccess,onError:this.onQRCodeError}),(0,i.jsxs)(i.Fragment,{children:[s&&(0,i.jsx)("div",{className:"sk-button danger",onClick:this.removeColor,children:(0,i.jsx)("div",{className:"sk-label",children:"Clear color"})}),(0,i.jsx)("div",{className:"color-picker-swatch",onClick:this.handleSwatchClick,children:(0,i.jsx)("div",{style:c})})]})]})]}),(0,i.jsxs)("form",{onSubmit:this.onSave,autoComplete:"off",children:[(0,i.jsxs)("div",{className:"sk-panel-section",children:[(0,i.jsx)("input",{name:"service",className:"sk-input contrast",placeholder:"Service",value:t.service,onChange:this.handleInputChange,type:"text",required:!0}),(0,i.jsx)("input",{name:"account",className:"sk-input contrast",placeholder:"Account",value:t.account,onChange:this.handleInputChange,type:"text"}),o&&(0,i.jsx)("input",{name:"secret",className:"sk-input contrast",placeholder:"Secret",value:t.secret,onChange:this.handleInputChange,type:"text",pattern:l,required:!0}),(0,i.jsx)("input",{name:"password",className:"sk-input contrast",placeholder:"Password "+(o?"(optional)":""),value:t.password,onChange:this.handleInputChange,type:"text",required:!o}),(0,i.jsx)("input",{name:"notes",className:"sk-input contrast",placeholder:"Notes",value:t.notes,onChange:this.handleInputChange,type:"text"})]}),r&&(0,i.jsxs)("div",{className:"color-picker-popover",children:[(0,i.jsx)("div",{className:"color-picker-cover",onClick:this.handleColorPickerClose}),(0,i.jsx)(ta,{color:s,colors:d,onChangeComplete:e=>{let t=e.hex.toUpperCase();const r=d.indexOf(t);r>-1&&r<=u.length-1&&(t=f[r]),this.setState((e=>({entry:{...e.entry,color:t}})))},triangle:"top-right",onSwatchHover:(e,t)=>{const r=e.hex.toUpperCase();u.includes(r)&&t.target.setAttribute("title","This color will change depending on your active theme.")}})]}),(0,i.jsx)("div",{className:"sk-panel-section",children:(0,i.jsxs)("div",{className:"sk-button-group stretch",children:[(0,i.jsx)("button",{type:"button",className:"sk-button neutral",onClick:this.props.onCancel,children:(0,i.jsx)("div",{className:"sk-label",children:"Cancel"})}),(0,i.jsx)("button",{type:"submit",className:"sk-button info",children:(0,i.jsx)("div",{className:"sk-label",children:null!=e?"Save":"Create"})})]})})]})]})})})}}e(ca,"defaultProps",{entry:{service:"",account:"",secret:"",notes:""}}),ca.propTypes={id:n().number,entry:n().object.isRequired,onSave:n().func.isRequired,onCancel:n().func.isRequired};class la extends w.Component{constructor(t){super(t),e(this,"onToggle",(()=>{this.setState({show:!this.state.show})})),e(this,"onEdit",(()=>{this.onToggle(),this.props.onEdit()})),e(this,"onRemove",(()=>{this.onToggle(),this.props.onRemove()})),this.state={show:!1}}render(){const{buttonColor:e}=this.props,t={};return e&&(t.color=e),(0,i.jsxs)("div",{className:"auth-menu",children:[(0,i.jsx)("div",{className:"sk-button",onClick:this.onToggle,style:t,children:(0,i.jsx)("div",{className:"sk-label",children:""})}),this.state.show&&(this.onToggle,(0,i.jsxs)("div",{className:"sk-menu-panel",children:[(0,i.jsx)("div",{className:"sk-menu-panel-row",onClick:this.onEdit,children:(0,i.jsx)("div",{className:"sk-label",children:"Edit"})}),(0,i.jsx)("div",{className:"sk-menu-panel-row",onClick:this.onRemove,children:(0,i.jsx)("div",{className:"sk-label",children:"Remove"})})]}))]})}}la.propTypes={onEdit:n().func.isRequired,onRemove:n().func.isRequired,buttonColor:n().string};const ua=e=>`countdown${e}`;function da(e,t){const r=50-100*pa(e,t);return r<0?0:Math.ceil(Math.min(r+8,50))}function pa(e,t){return(t-e)/t}function ha(e,t,r){(0,w.useEffect)((function(){const n=document.createElement("style");document.head.appendChild(n);const i=n.sheet,o=((e,t)=>`@keyframes rota_${ua(e)} {\n  0% {\n    transform: rotate(${t}deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n}`)(e,function(e,t){return 360*pa(e,t)}(t,r)),a=((e,t)=>`@keyframes opa_${ua(e)} {\n  0% {\n    opacity: 1;\n  }\n\n  ${t}%,\n  100% {\n    opacity: 0;\n  }\n}`)(e,da(t,r)),s=((e,t)=>`@keyframes opa_r_${ua(e)} {\n  0% {\n    opacity: 0;\n  }\n\n  ${t}%,\n  100% {\n    opacity: 1;\n  }\n}`)(e,da(t,r));function c(){n.remove()}i.insertRule(o,i.cssRules.length),i.insertRule(a,i.cssRules.length),i.insertRule(s,i.cssRules.length);const l=setTimeout(c,1e3*t);return()=>{clearTimeout(l),c()}}),[e,t,r])}const fa=e=>{let{token:t,timeLeft:r,total:n,bgColor:o,fgColor:a}=e;return ha(t,r,n),(0,i.jsxs)("div",{className:"countdown-pie",style:{backgroundColor:o},children:[(0,i.jsx)("div",{className:"pie spinner",style:{animation:`rota_${ua(t)} ${r}s linear`,backgroundColor:a}}),(0,i.jsx)("div",{className:"pie background",style:{backgroundColor:a}}),(0,i.jsx)("div",{className:"pie filler",style:{animation:`opa_r_${ua(t)} ${r}s steps(1, end)`,backgroundColor:a}}),(0,i.jsx)("div",{className:"mask",style:{animation:`opa_${ua(t)} ${r}s steps(1, end)`}})]})};fa.propTypes={token:n().string.isRequired,timeLeft:n().number.isRequired,total:n().number.isRequired,bgColor:n().string,fgColor:n().string};const ya=fa;var va;function ga(){return ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ga.apply(this,arguments)}const ma=function(e){return w.createElement("svg",ga({width:10,height:16,xmlns:"http://www.w3.org/2000/svg",role:"img"},e),va||(va=w.createElement("g",{fill:"none"},w.createElement("path",{d:"M-7-4h24v24H-7z"}),w.createElement("path",{d:"M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2ZM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2Zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2Zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2Zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2Zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2Z",fill:"currentColor"}))))};class ba extends w.Component{constructor(t){var r;super(t),r=this,e(this,"updateToken",(async()=>{const{secret:e}=this.props.entry;if(!e)return;const t=await m.gen(e),r=this.getTimeLeft();this.setState({token:t,timeLeft:r}),this.timer=setTimeout(this.updateToken,1e3*r)})),e(this,"handleInputChange",(e=>{const t=e.target,r=t.name;this.props.onEntryChange({id:this.props.id,name:r,value:t.value})})),e(this,"copyToClipboard",(e=>{const t=document.createElement("textarea");t.innerText=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove(),this.props.onCopyValue()})),e(this,"updateEntryStyle",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=e?0:50;setTimeout((()=>{const{entryStyle:e}=r.state,t=v(document,r.props.entry);if(t){e.backgroundColor=t;const r=h(p(t));e.color=`var(${r})`}r.setState({entryStyle:e})}),t)})),this.state={token:"",timeLeft:0,entryStyle:{color:"",backgroundColor:""}},this.updateToken()}getTimeLeft(){const e=(new Date).getSeconds();return e>29?60-e:30-e}componentDidMount(){this.updateEntryStyle()}componentDidUpdate(e){e.entry.secret!==this.props.entry.secret&&(clearTimeout(this.timer),this.timer=setTimeout(this.updateToken,0)),e.lastUpdated!==this.props.lastUpdated&&this.updateEntryStyle(!0)}componentWillUnmount(){clearTimeout(this.timer)}render(){const{service:e,account:t,notes:r,password:n,secret:o}=this.props.entry,{id:a,onEdit:s,onRemove:c,canEdit:l,style:u,innerRef:d,...p}=this.props,{token:h,timeLeft:f,entryStyle:y}=this.state;return delete p.onCopyValue,delete p.lastUpdated,(0,i.jsx)("div",{...p,className:"sk-notification sk-base-custom",style:{...y,...u},ref:d,children:(0,i.jsxs)("div",{className:"auth-entry",children:[l&&(0,i.jsx)("div",{className:"auth-drag-indicator-container",children:(0,i.jsx)(ma,{className:"grab-cursor"})}),(0,i.jsxs)("div",{className:"auth-details",children:[(0,i.jsxs)("div",{className:"auth-info",children:[(0,i.jsx)("div",{className:"auth-service",children:e}),(0,i.jsx)("div",{className:"auth-account",children:t}),(0,i.jsxs)("div",{className:"auth-optional",children:[r&&(0,i.jsx)("div",{className:"auth-notes-row",children:(0,i.jsx)("div",{className:"auth-notes",children:r})}),n&&(0,i.jsx)("div",{className:"auth-password-row",children:(0,i.jsx)("div",{className:"auth-password",onClick:()=>this.copyToClipboard(n),children:"".repeat(n.length)})})]})]}),o&&(0,i.jsxs)("div",{className:"auth-token-info",children:[(0,i.jsxs)("div",{className:"auth-token",onClick:()=>this.copyToClipboard(h),children:[(0,i.jsx)("div",{children:h.slice(0,3)}),(0,i.jsx)("div",{children:h.slice(3,6)})]}),(0,i.jsx)("div",{className:"auth-countdown",children:(0,i.jsx)(ya,{token:h,timeLeft:f,total:30,bgColor:y.backgroundColor,fgColor:y.color})})]})]}),l&&(0,i.jsx)("div",{className:"auth-options",children:(0,i.jsx)(la,{onEdit:s.bind(this,a),onRemove:c.bind(this,a),buttonColor:y.color})})]})})}}function Sa(e,t){return Sa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sa(e,t)}function wa(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Sa(e,t)}function Pa(){return Pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pa.apply(this,arguments)}function _a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ea(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_a(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ca(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}ba.propTypes={id:n().any.isRequired,entry:n().object.isRequired,onEdit:n().func.isRequired,onRemove:n().func.isRequired,onEntryChange:n().func,onCopyValue:n().func.isRequired,canEdit:n().bool.isRequired,innerRef:n().func.isRequired,lastUpdated:n().number.isRequired,style:n().object.isRequired};var ka="function"==typeof Symbol&&Symbol.observable||"@@observable",Oa=function(){return Math.random().toString(36).substring(7).split("").join(".")},xa={INIT:"@@redux/INIT"+Oa(),REPLACE:"@@redux/REPLACE"+Oa(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Oa()}};function Ia(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Aa(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(Ca(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(Ca(1));return r(Aa)(e,t)}if("function"!=typeof e)throw new Error(Ca(2));var i=e,o=t,a=[],s=a,c=!1;function l(){s===a&&(s=a.slice())}function u(){if(c)throw new Error(Ca(3));return o}function d(e){if("function"!=typeof e)throw new Error(Ca(4));if(c)throw new Error(Ca(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw new Error(Ca(6));t=!1,l();var r=s.indexOf(e);s.splice(r,1),a=null}}}function p(e){if(!Ia(e))throw new Error(Ca(7));if(void 0===e.type)throw new Error(Ca(8));if(c)throw new Error(Ca(9));try{c=!0,o=i(o,e)}finally{c=!1}for(var t=a=s,r=0;r<t.length;r++){(0,t[r])()}return e}function h(e){if("function"!=typeof e)throw new Error(Ca(10));i=e,p({type:xa.REPLACE})}function f(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Ca(11));function r(){e.next&&e.next(u())}return r(),{unsubscribe:t(r)}}})[ka]=function(){return this},e}return p({type:xa.INIT}),(n={dispatch:p,subscribe:d,getState:u,replaceReducer:h})[ka]=f,n}function Ma(e,t){return function(){return t(e.apply(this,arguments))}}function Da(e,t){if("function"==typeof e)return Ma(e,t);if("object"!=typeof e||null===e)throw new Error(Ca(16));var r={};for(var n in e){var i=e[n];"function"==typeof i&&(r[n]=Ma(i,t))}return r}function Ra(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var Ta=w.createContext(null);var Na=function(e){e()},ja=function(){return Na};var Ba={notify:function(){},get:function(){return[]}};function Fa(e,t){var r,n=Ba;function i(){a.onStateChange&&a.onStateChange()}function o(){r||(r=t?t.addNestedSub(i):e.subscribe(i),n=function(){var e=ja(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],r=t;r;)e.push(r),r=r.next;return e},subscribe:function(e){var n=!0,i=r={callback:e,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){n&&null!==t&&(n=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var a={addNestedSub:function(e){return o(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(r)},trySubscribe:o,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=Ba)},getListeners:function(){return n}};return a}var La="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?w.useLayoutEffect:w.useEffect;const Ka=function(e){var t=e.store,r=e.context,n=e.children,i=(0,w.useMemo)((function(){var e=Fa(t);return{store:t,subscription:e}}),[t]),o=(0,w.useMemo)((function(){return t.getState()}),[t]);La((function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,o]);var a=r||Ta;return w.createElement(a.Provider,{value:i},n)};function Ua(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Va=r(7049),Wa=r.n(Va),za=r(9665),Ha=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Ga=["reactReduxForwardedRef"],qa=[],$a=[null,null];function Xa(e,t){var r=e[1];return[t.payload,r+1]}function Ya(e,t,r){La((function(){return e.apply(void 0,t)}),r)}function Qa(e,t,r,n,i,o,a){e.current=n,t.current=i,r.current=!1,o.current&&(o.current=null,a())}function Ja(e,t,r,n,i,o,a,s,c,l){if(e){var u=!1,d=null,p=function(){if(!u){var e,r,p=t.getState();try{e=n(p,i.current)}catch(e){r=e,d=e}r||(d=null),e===o.current?a.current||c():(o.current=e,s.current=e,a.current=!0,l({type:"STORE_UPDATED",payload:{error:r}}))}};r.onStateChange=p,r.trySubscribe(),p();return function(){if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,d)throw d}}}var Za=function(){return[null,0]};function es(e,t){void 0===t&&(t={});var r=t,n=r.getDisplayName,i=void 0===n?function(e){return"ConnectAdvanced("+e+")"}:n,o=r.methodName,a=void 0===o?"connectAdvanced":o,s=r.renderCountProp,c=void 0===s?void 0:s,l=r.shouldHandleStateChanges,u=void 0===l||l,d=r.storeKey,p=void 0===d?"store":d,h=(r.withRef,r.forwardRef),f=void 0!==h&&h,y=r.context,v=void 0===y?Ta:y,g=Ua(r,Ha),m=v;return function(t){var r=t.displayName||t.name||"Component",n=i(r),o=Pa({},g,{getDisplayName:i,methodName:a,renderCountProp:c,shouldHandleStateChanges:u,storeKey:p,displayName:n,wrappedComponentName:r,WrappedComponent:t}),s=g.pure;var l=s?w.useMemo:function(e){return e()};function d(r){var n=(0,w.useMemo)((function(){var e=r.reactReduxForwardedRef,t=Ua(r,Ga);return[r.context,e,t]}),[r]),i=n[0],a=n[1],s=n[2],c=(0,w.useMemo)((function(){return i&&i.Consumer&&(0,za.isContextConsumer)(w.createElement(i.Consumer,null))?i:m}),[i,m]),d=(0,w.useContext)(c),p=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch);Boolean(d)&&Boolean(d.store);var h=p?r.store:d.store,f=(0,w.useMemo)((function(){return function(t){return e(t.dispatch,o)}(h)}),[h]),y=(0,w.useMemo)((function(){if(!u)return $a;var e=Fa(h,p?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[h,p,d]),v=y[0],g=y[1],b=(0,w.useMemo)((function(){return p?d:Pa({},d,{subscription:v})}),[p,d,v]),S=(0,w.useReducer)(Xa,qa,Za),P=S[0][0],_=S[1];if(P&&P.error)throw P.error;var E=(0,w.useRef)(),C=(0,w.useRef)(s),k=(0,w.useRef)(),O=(0,w.useRef)(!1),x=l((function(){return k.current&&s===C.current?k.current:f(h.getState(),s)}),[h,P,s]);Ya(Qa,[C,E,O,s,x,k,g]),Ya(Ja,[u,h,v,f,C,E,O,k,g,_],[h,v,f]);var I=(0,w.useMemo)((function(){return w.createElement(t,Pa({},x,{ref:a}))}),[a,t,x]);return(0,w.useMemo)((function(){return u?w.createElement(c.Provider,{value:b},I):I}),[c,I,b])}var h=s?w.memo(d):d;if(h.WrappedComponent=t,h.displayName=d.displayName=n,f){var y=w.forwardRef((function(e,t){return w.createElement(h,Pa({},e,{reactReduxForwardedRef:t}))}));return y.displayName=n,y.WrappedComponent=t,Wa()(y,t)}return Wa()(h,t)}}function ts(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function rs(e,t){if(ts(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!ts(e[r[i]],t[r[i]]))return!1;return!0}function ns(e){return function(t,r){var n=e(t,r);function i(){return n}return i.dependsOnOwnProps=!1,i}}function is(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function os(e,t){return function(t,r){r.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=is(e);var i=n(t,r);return"function"==typeof i&&(n.mapToProps=i,n.dependsOnOwnProps=is(i),i=n(t,r)),i},n}}const as=[function(e){return"function"==typeof e?os(e):void 0},function(e){return e?void 0:ns((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?ns((function(t){return function(e,t){var r={},n=function(n){var i=e[n];"function"==typeof i&&(r[n]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)n(i);return r}(e,t)})):void 0}];const ss=[function(e){return"function"==typeof e?os(e):void 0},function(e){return e?void 0:ns((function(){return{}}))}];function cs(e,t,r){return Pa({},r,e,t)}const ls=[function(e){return"function"==typeof e?function(e){return function(t,r){r.displayName;var n,i=r.pure,o=r.areMergedPropsEqual,a=!1;return function(t,r,s){var c=e(t,r,s);return a?i&&o(c,n)||(n=c):(a=!0,n=c),n}}}(e):void 0},function(e){return e?void 0:function(){return cs}}];var us=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ds(e,t,r,n){return function(i,o){return r(e(i,o),t(n,o),o)}}function ps(e,t,r,n,i){var o,a,s,c,l,u=i.areStatesEqual,d=i.areOwnPropsEqual,p=i.areStatePropsEqual,h=!1;function f(i,h){var f,y,v=!d(h,a),g=!u(i,o,h,a);return o=i,a=h,v&&g?(s=e(o,a),t.dependsOnOwnProps&&(c=t(n,a)),l=r(s,c,a)):v?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(c=t(n,a)),l=r(s,c,a)):g?(f=e(o,a),y=!p(f,s),s=f,y&&(l=r(s,c,a)),l):l}return function(i,u){return h?f(i,u):(s=e(o=i,a=u),c=t(n,a),l=r(s,c,a),h=!0,l)}}function hs(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,i=t.initMergeProps,o=Ua(t,us),a=r(e,o),s=n(e,o),c=i(e,o);return(o.pure?ps:ds)(a,s,c,e,o)}var fs=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function ys(e,t,r){for(var n=t.length-1;n>=0;n--){var i=t[n](e);if(i)return i}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function vs(e,t){return e===t}function gs(e){var t=void 0===e?{}:e,r=t.connectHOC,n=void 0===r?es:r,i=t.mapStateToPropsFactories,o=void 0===i?ss:i,a=t.mapDispatchToPropsFactories,s=void 0===a?as:a,c=t.mergePropsFactories,l=void 0===c?ls:c,u=t.selectorFactory,d=void 0===u?hs:u;return function(e,t,r,i){void 0===i&&(i={});var a=i,c=a.pure,u=void 0===c||c,p=a.areStatesEqual,h=void 0===p?vs:p,f=a.areOwnPropsEqual,y=void 0===f?rs:f,v=a.areStatePropsEqual,g=void 0===v?rs:v,m=a.areMergedPropsEqual,b=void 0===m?rs:m,S=Ua(a,fs),w=ys(e,o,"mapStateToProps"),P=ys(t,s,"mapDispatchToProps"),_=ys(r,l,"mergeProps");return n(d,Pa({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:P,initMergeProps:_,pure:u,areStatesEqual:h,areOwnPropsEqual:y,areStatePropsEqual:g,areMergedPropsEqual:b},S))}}const ms=gs();var bs,Ss=r(3935);function ws(e,t){var r=(0,w.useState)((function(){return{inputs:t,result:e()}}))[0],n=(0,w.useRef)(!0),i=(0,w.useRef)(r),o=n.current||Boolean(t&&i.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,i.current.inputs))?i.current:{inputs:t,result:e()};return(0,w.useEffect)((function(){n.current=!1,i.current=o}),[o]),o.result}bs=Ss.unstable_batchedUpdates,Na=bs;var Ps=ws,_s=function(e,t){return ws((function(){return e}),t)},Es="Invariant failed";var Cs=function(e){var t=e.top,r=e.right,n=e.bottom,i=e.left;return{top:t,right:r,bottom:n,left:i,width:r-i,height:n-t,x:i,y:t,center:{x:(r+i)/2,y:(n+t)/2}}},ks=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},Os=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},xs={top:0,right:0,bottom:0,left:0},Is=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?xs:r,i=e.border,o=void 0===i?xs:i,a=e.padding,s=void 0===a?xs:a,c=Cs(ks(t,n)),l=Cs(Os(t,o)),u=Cs(Os(l,s));return{marginBox:c,borderBox:Cs(t),paddingBox:l,contentBox:u,margin:n,border:o,padding:s}},As=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&function(e,t){if(!e)throw new Error(Es)}(!1),r},Ms=function(e,t){var r,n,i=e.borderBox,o=e.border,a=e.margin,s=e.padding,c=(n=t,{top:(r=i).top+n.y,left:r.left+n.x,bottom:r.bottom+n.y,right:r.right+n.x});return Is({borderBox:c,border:o,margin:a,padding:s})},Ds=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),Ms(e,t)},Rs=function(e,t){var r={top:As(t.marginTop),right:As(t.marginRight),bottom:As(t.marginBottom),left:As(t.marginLeft)},n={top:As(t.paddingTop),right:As(t.paddingRight),bottom:As(t.paddingBottom),left:As(t.paddingLeft)},i={top:As(t.borderTopWidth),right:As(t.borderRightWidth),bottom:As(t.borderBottomWidth),left:As(t.borderLeftWidth)};return Is({borderBox:e,margin:r,padding:n,border:i})},Ts=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return Rs(t,r)},Ns=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function js(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],i=t[r],!(n===i||Ns(n)&&Ns(i)))return!1;var n,i;return!0}const Bs=function(e,t){var r;void 0===t&&(t=js);var n,i=[],o=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o&&r===this&&t(a,i)||(n=e.apply(this,a),o=!0,r=this,i=a),n}};const Fs=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];t=i,r||(r=requestAnimationFrame((function(){r=null,e.apply(void 0,t)})))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n};function Ls(e,t){}Ls.bind(null,"warn"),Ls.bind(null,"error");function Ks(){}function Us(e,t,r){var n=t.map((function(t){var n=function(e,t){return Pa({},e,{},t)}(r,t.options);return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}}));return function(){n.forEach((function(e){e()}))}}var Vs="Invariant failed";function Ws(e){this.message=e}function zs(e,t){if(!e)throw new Ws(Vs)}Ws.prototype.toString=function(){return this.message};var Hs=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).callbacks=null,t.unbind=Ks,t.onWindowError=function(e){var r=t.getCallbacks();r.isDragging()&&r.tryAbort(),e.error instanceof Ws&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}wa(t,e);var r=t.prototype;return r.componentDidMount=function(){this.unbind=Us(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(e){if(!(e instanceof Ws))throw e;this.setState({})},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(w.Component),Gs=function(e){return e+1},qs=function(e,t){var r=e.droppableId===t.droppableId,n=Gs(e.index),i=Gs(t.index);return r?"\n      You have moved the item from position "+n+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+n+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},$s=function(e,t,r){return t.droppableId===r.droppableId?"\n      The item "+e+"\n      has been combined with "+r.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+r.draggableId+"\n      in list "+r.droppableId+"\n    "},Xs=function(e){return"\n  The item has returned to its starting position\n  of "+Gs(e.index)+"\n"},Ys="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",Qs=function(e){return"\n  You have lifted an item in position "+Gs(e.source.index)+"\n"},Js=function(e){var t=e.destination;if(t)return qs(e.source,t);var r=e.combine;return r?$s(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Zs=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Xs(e.source)+"\n    ";var t=e.destination,r=e.combine;return t?"\n      You have dropped the item.\n      "+qs(e.source,t)+"\n    ":r?"\n      You have dropped the item.\n      "+$s(e.draggableId,e.source,r)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Xs(e.source)+"\n  "},ec={x:0,y:0},tc=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},rc=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},nc=function(e,t){return e.x===t.x&&e.y===t.y},ic=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},oc=function(e,t,r){var n;return void 0===r&&(r=0),(n={})[e]=t,n["x"===e?"y":"x"]=r,n},ac=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},sc=function(e,t){return Math.min.apply(Math,t.map((function(t){return ac(e,t)})))},cc=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},lc=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},uc=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},dc=function(e,t){return t&&t.shouldClipSubject?function(e,t){var r=Cs({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r}(t.pageMarginBox,e):Cs(e)},pc=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,i=e.frame,o=function(e,t){return t?lc(e,t.scroll.diff.displacement):e}(t.marginBox,i),a=function(e,t,r){var n;return r&&r.increasedBy?Pa({},e,((n={})[t.end]=e[t.end]+r.increasedBy[t.line],n)):e}(o,n,r);return{page:t,withPlaceholder:r,active:dc(a,i)}},hc=function(e,t){e.frame||zs(!1);var r=e.frame,n=rc(t,r.scroll.initial),i=ic(n),o=Pa({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:i},max:r.scroll.max}});return Pa({},e,{frame:o,subject:pc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o})})};function fc(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function yc(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function vc(e,t){if(e.find)return e.find(t);var r=yc(e,t);return-1!==r?e[r]:void 0}function gc(e){return Array.prototype.slice.call(e)}var mc=Bs((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),bc=Bs((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Sc=Bs((function(e){return fc(e)})),wc=Bs((function(e){return fc(e)})),Pc=Bs((function(e,t){var r=wc(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}));return r}));function _c(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function Ec(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var Cc=Bs((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),kc=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Oc={point:ec,value:0},xc={invisible:{},visible:{},all:[]},Ic={displaced:xc,displacedBy:Oc,at:null},Ac=function(e,t){return function(r){return e<=r&&r<=t}},Mc=function(e){var t=Ac(e.top,e.bottom),r=Ac(e.left,e.right);return function(n){if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;var i=t(n.top)||t(n.bottom),o=r(n.left)||r(n.right);if(i&&o)return!0;var a=n.top<e.top&&n.bottom>e.bottom,s=n.left<e.left&&n.right>e.right;return!(!a||!s)||(a&&o||s&&i)}},Dc=function(e){var t=Ac(e.top,e.bottom),r=Ac(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)}},Rc={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Tc={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Nc=function(e){var t=e.target,r=e.destination,n=e.viewport,i=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,a=i?function(e,t){var r=t.frame?t.frame.scroll.diff.displacement:ec;return lc(e,r)}(t,r):t;return function(e,t,r){return!!t.subject.active&&r(t.subject.active)(e)}(a,r,o)&&function(e,t,r){return r(t)(e)}(a,n,o)},jc=function(e){return Nc(Pa({},e,{isVisibleThroughFrameFn:Mc}))},Bc=function(e){return Nc(Pa({},e,{isVisibleThroughFrameFn:Dc}))};function Fc(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,i=e.viewport,o=e.forceShouldAnimate,a=e.last;return t.reduce((function(e,t){var s=function(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Cs(ks(r,n))}(t,n),c=t.descriptor.id;if(e.all.push(c),!jc({target:s,destination:r,viewport:i,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var l=function(e,t,r){if("boolean"==typeof r)return r;if(!t)return!0;var n=t.invisible,i=t.visible;if(n[e])return!1;var o=i[e];return!o||o.shouldAnimate}(c,a,o),u={draggableId:c,shouldAnimate:l};return e.visible[c]=u,e}),{all:[],visible:{},invisible:{}})}function Lc(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,i=e.destination,o=function(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}(t,{inHomeList:r});return{displaced:xc,displacedBy:n,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function Kc(e){var t=e.draggable,r=e.insideDestination,n=e.destination,i=e.viewport,o=e.displacedBy,a=e.last,s=e.index,c=e.forceShouldAnimate,l=kc(t,n);if(null==s)return Lc({insideDestination:r,inHomeList:l,displacedBy:o,destination:n});var u=vc(r,(function(e){return e.descriptor.index===s}));if(!u)return Lc({insideDestination:r,inHomeList:l,displacedBy:o,destination:n});var d=Cc(t,r),p=r.indexOf(u);return{displaced:Fc({afterDragging:d.slice(p),destination:n,displacedBy:o,last:a,viewport:i.frame,forceShouldAnimate:c}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function Uc(e,t){return Boolean(t.effected[e])}var Vc=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,i=e.draggables,o=e.destination,a=e.insideDestination,s=e.previousImpact,c=e.viewport,l=e.afterCritical,u=s.at;if(u||zs(!1),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,i=e.location;if(!n.length)return null;var o=i.index,a=t?o+1:o-1,s=n[0].descriptor.index,c=n[n.length-1].descriptor.index;return a<s||a>(r?c:c+1)?null:a}({isMovingForward:t,isInHomeList:r,location:u.destination,insideDestination:a});return null==d?null:Kc({draggable:n,insideDestination:a,destination:o,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})}var p=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,i=e.combine,o=e.afterCritical;if(!r.isCombineEnabled)return null;var a=i.draggableId,s=n[a].descriptor.index;return Uc(a,o)?t?s:s-1:t?s+1:s}({isMovingForward:t,destination:o,displaced:s.displaced,draggables:i,combine:u.combine,afterCritical:l});return null==p?null:Kc({draggable:n,insideDestination:a,destination:o,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:p})},Wc=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,i=Ec(r);i||zs(!1);var o=i.draggableId,a=n[o].page.borderBox.center,s=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,i=e.displacedBy,o=Boolean(t.visible[n]||t.invisible[n]);return Uc(n,r)?o?ec:ic(i.point):o?i.point:ec}({displaced:r.displaced,afterCritical:t,combineWith:o,displacedBy:r.displacedBy});return tc(a,s)},zc=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Hc=function(e,t,r){return t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2},Gc=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return oc(t.line,r.marginBox[t.end]+zc(t,n),Hc(t,r.marginBox,n))},qc=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return oc(t.line,r.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,n),Hc(t,r.marginBox,n))},$c=function(e){var t=e.impact,r=e.draggable,n=e.draggables,i=e.droppable,o=e.afterCritical,a=Pc(i.descriptor.id,n),s=r.page,c=i.axis;if(!a.length)return function(e){var t=e.axis,r=e.moveInto,n=e.isMoving;return oc(t.line,r.contentBox[t.start]+zc(t,n),Hc(t,r.contentBox,n))}({axis:c,moveInto:i.page,isMoving:s});var l=t.displaced,u=t.displacedBy,d=l.all[0];if(d){var p=n[d];if(Uc(d,o))return qc({axis:c,moveRelativeTo:p.page,isMoving:s});var h=Ms(p.page,u.point);return qc({axis:c,moveRelativeTo:h,isMoving:s})}var f=a[a.length-1];if(f.descriptor.id===r.descriptor.id)return s.borderBox.center;if(Uc(f.descriptor.id,o)){var y=Ms(f.page,ic(o.displacedBy.point));return Gc({axis:c,moveRelativeTo:y,isMoving:s})}return Gc({axis:c,moveRelativeTo:f.page,isMoving:s})},Xc=function(e,t){var r=e.frame;return r?tc(t,r.scroll.diff.displacement):t},Yc=function(e){var t=function(e){var t=e.impact,r=e.draggable,n=e.droppable,i=e.draggables,o=e.afterCritical,a=r.page.borderBox.center,s=t.at;return n&&s?"REORDER"===s.type?$c({impact:t,draggable:r,draggables:i,droppable:n,afterCritical:o}):Wc({impact:t,draggables:i,afterCritical:o}):a}(e),r=e.droppable;return r?Xc(r,t):t},Qc=function(e,t){var r=rc(t,e.scroll.initial),n=ic(r);return{frame:Cs({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function Jc(e,t){return e.map((function(e){return t[e]}))}var Zc=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=function(e,t){return tc(e.scroll.diff.displacement,t)}(e.viewport,t),i=rc(n,r.page.borderBox.center);return tc(r.client.borderBox.center,i)},el=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,i=e.viewport,o=e.withDroppableDisplacement,a=e.onlyOnMainAxis,s=void 0!==a&&a,c=rc(n,t.page.borderBox.center),l={target:lc(t.page.borderBox,c),destination:r,withDroppableDisplacement:o,viewport:i};return s?function(e){return Nc(Pa({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var r=Ac(e.top,e.bottom),n=Ac(e.left,e.right);return function(e){return t===Rc?r(e.top)&&r(e.bottom):n(e.left)&&n(e.right)}})}));var t}(l):Bc(l)},tl=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,i=e.draggables,o=e.previousImpact,a=e.viewport,s=e.previousPageBorderBoxCenter,c=e.previousClientSelection,l=e.afterCritical;if(!n.isEnabled)return null;var u=Pc(n.descriptor.id,i),d=kc(r,n),p=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,i=e.insideDestination,o=e.previousImpact;if(!n.isCombineEnabled)return null;if(!_c(o))return null;function a(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return Pa({},o,{at:t})}var s=o.displaced.all,c=s.length?s[0]:null;if(t)return c?a(c):null;var l=Cc(r,i);if(!c)return l.length?a(l[l.length-1].descriptor.id):null;var u=yc(l,(function(e){return e.descriptor.id===c}));-1===u&&zs(!1);var d=u-1;return d<0?null:a(l[d].descriptor.id)}({isMovingForward:t,draggable:r,destination:n,insideDestination:u,previousImpact:o})||Vc({isMovingForward:t,isInHomeList:d,draggable:r,draggables:i,destination:n,insideDestination:u,previousImpact:o,viewport:a,afterCritical:l});if(!p)return null;var h=Yc({impact:p,draggable:r,droppable:n,draggables:i,afterCritical:l});if(el({draggable:r,destination:n,newPageBorderBoxCenter:h,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Zc({pageBorderBoxCenter:h,draggable:r,viewport:a}),impact:p,scrollJumpRequest:null};var f=rc(h,s),y=function(e){var t=e.impact,r=e.viewport,n=e.destination,i=e.draggables,o=e.maxScrollChange,a=Qc(r,tc(r.scroll.current,o)),s=n.frame?hc(n,tc(n.frame.scroll.current,o)):n,c=t.displaced,l=Fc({afterDragging:Jc(c.all,i),destination:n,displacedBy:t.displacedBy,viewport:a.frame,last:c,forceShouldAnimate:!1}),u=Fc({afterDragging:Jc(c.all,i),destination:s,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),d={},p={},h=[c,l,u];return c.all.forEach((function(e){var t=function(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}(e,h);t?p[e]=t:d[e]=!0})),Pa({},t,{displaced:{all:c.all,invisible:d,visible:p}})}({impact:p,viewport:a,destination:n,draggables:i,maxScrollChange:f});return{clientSelection:c,impact:y,scrollJumpRequest:f}},rl=function(e){var t=e.subject.active;return t||zs(!1),t},nl=function(e,t){var r=e.page.borderBox.center;return Uc(e.descriptor.id,t)?rc(r,t.displacedBy.point):r},il=function(e,t){var r=e.page.borderBox;return Uc(e.descriptor.id,t)?lc(r,ic(t.displacedBy.point)):r},ol=Bs((function(e,t){var r=t[e.line];return{value:r,point:oc(e.line,r)}})),al=function(e,t){return Pa({},e,{scroll:Pa({},e.scroll,{max:t})})},sl=function(e,t,r){var n=e.frame;kc(t,e)&&zs(!1),e.subject.withPlaceholder&&zs(!1);var i=ol(e.axis,t.displaceBy).point,o=function(e,t,r){var n=e.axis;if("virtual"===e.descriptor.mode)return oc(n.line,t[n.line]);var i=e.subject.page.contentBox[n.size],o=Pc(e.descriptor.id,r).reduce((function(e,t){return e+t.client.marginBox[n.size]}),0)+t[n.line]-i;return o<=0?null:oc(n.line,o)}(e,i,r),a={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n)return Pa({},e,{subject:pc({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame})});var s=o?tc(n.scroll.max,o):n.scroll.max,c=al(n,s);return Pa({},e,{subject:pc({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c}),frame:c})},cl=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,i=e.isOver,o=e.draggables,a=e.droppables,s=e.viewport,c=e.afterCritical,l=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,i=e.droppables,o=e.viewport,a=n.subject.active;if(!a)return null;var s=n.axis,c=Ac(a[s.start],a[s.end]),l=Sc(i).filter((function(e){return e!==n})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return Mc(o.frame)(rl(e))})).filter((function(e){var r=rl(e);return t?a[s.crossAxisEnd]<r[s.crossAxisEnd]:r[s.crossAxisStart]<a[s.crossAxisStart]})).filter((function(e){var t=rl(e),r=Ac(t[s.start],t[s.end]);return c(t[s.start])||c(t[s.end])||r(a[s.start])||r(a[s.end])})).sort((function(e,r){var n=rl(e)[s.crossAxisStart],i=rl(r)[s.crossAxisStart];return t?n-i:i-n})).filter((function(e,t,r){return rl(e)[s.crossAxisStart]===rl(r[0])[s.crossAxisStart]}));if(!l.length)return null;if(1===l.length)return l[0];var u=l.filter((function(e){return Ac(rl(e)[s.start],rl(e)[s.end])(r[s.line])}));return 1===u.length?u[0]:u.length>1?u.sort((function(e,t){return rl(e)[s.start]-rl(t)[s.start]}))[0]:l.sort((function(e,t){var n=sc(r,uc(rl(e))),i=sc(r,uc(rl(t)));return n!==i?n-i:rl(e)[s.start]-rl(t)[s.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:r,source:i,droppables:a,viewport:s});if(!l)return null;var u=Pc(l.descriptor.id,o),d=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,i=e.insideDestination,o=e.afterCritical,a=i.filter((function(e){return Bc({target:il(e,o),destination:n,viewport:r.frame,withDroppableDisplacement:!0})})).sort((function(e,r){var i=ac(t,Xc(n,nl(e,o))),a=ac(t,Xc(n,nl(r,o)));return i<a?-1:a<i?1:e.descriptor.index-r.descriptor.index}));return a[0]||null}({pageBorderBoxCenter:r,viewport:s,destination:l,insideDestination:u,afterCritical:c}),p=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,i=e.draggable,o=e.draggables,a=e.destination,s=e.viewport,c=e.afterCritical;if(!r){if(n.length)return null;var l={displaced:xc,displacedBy:Oc,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},u=Yc({impact:l,draggable:i,droppable:a,draggables:o,afterCritical:c}),d=kc(i,a)?a:sl(a,i,o);return el({draggable:i,destination:d,newPageBorderBoxCenter:u,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?l:null}var p,h=Boolean(t[a.axis.line]<=r.page.borderBox.center[a.axis.line]),f=(p=r.descriptor.index,r.descriptor.id===i.descriptor.id||h?p:p+1),y=ol(a.axis,i.displaceBy);return Kc({draggable:i,insideDestination:n,destination:a,viewport:s,displacedBy:y,last:xc,index:f})}({previousPageBorderBoxCenter:r,destination:l,draggable:n,draggables:o,moveRelativeTo:d,insideDestination:u,viewport:s,afterCritical:c});if(!p)return null;var h=Yc({impact:p,draggable:n,droppable:l,draggables:o,afterCritical:c});return{clientSelection:Zc({pageBorderBoxCenter:h,draggable:n,viewport:s}),impact:p,scrollJumpRequest:null}},ll=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},ul=function(e){var t=e.state,r=e.type,n=function(e,t){var r=ll(e);return r?t[r]:null}(t.impact,t.dimensions.droppables),i=Boolean(n),o=t.dimensions.droppables[t.critical.droppable.id],a=n||o,s=a.axis.direction,c="vertical"===s&&("MOVE_UP"===r||"MOVE_DOWN"===r)||"horizontal"===s&&("MOVE_LEFT"===r||"MOVE_RIGHT"===r);if(c&&!i)return null;var l="MOVE_DOWN"===r||"MOVE_RIGHT"===r,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,p=t.dimensions,h=p.draggables,f=p.droppables;return c?tl({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,destination:a,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):cl({isMovingForward:l,previousPageBorderBoxCenter:d,draggable:u,isOver:a,draggables:h,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function dl(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function pl(e){var t=Ac(e.top,e.bottom),r=Ac(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function hl(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,i=Sc(n).filter((function(e){if(!e.isEnabled)return!1;var r,n,i=e.subject.active;if(!i)return!1;if(n=i,!((r=t).left<n.right&&r.right>n.left&&r.top<n.bottom&&r.bottom>n.top))return!1;if(pl(i)(t.center))return!0;var o=e.axis,a=i.center[o.crossAxisLine],s=t[o.crossAxisStart],c=t[o.crossAxisEnd],l=Ac(i[o.crossAxisStart],i[o.crossAxisEnd]),u=l(s),d=l(c);return!u&&!d||(u?s<a:c>a)}));return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,i=r.page.borderBox.center,o=n.map((function(e){var r=e.axis,n=oc(e.axis.line,t.center[r.line],e.page.borderBox.center[r.crossAxisLine]);return{id:e.descriptor.id,distance:ac(i,n)}})).sort((function(e,t){return t.distance-e.distance}));return o[0]?o[0].id:null}({pageBorderBox:t,draggable:r,candidates:i}):null}var fl=function(e,t){return Cs(lc(e,t))};function yl(e){var t=e.displaced,r=e.id;return Boolean(t.visible[r]||t.invisible[r])}var vl=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,i=e.droppables,o=e.previousImpact,a=e.viewport,s=e.afterCritical,c=fl(r.page.borderBox,t),l=hl({pageBorderBox:c,draggable:r,droppables:i});if(!l)return Ic;var u=i[l],d=Pc(u.descriptor.id,n),p=function(e,t){var r=e.frame;return r?fl(t,r.scroll.diff.value):t}(u,c);return function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,i=e.destination,o=e.insideDestination,a=e.afterCritical;if(!i.isCombineEnabled)return null;var s=i.axis,c=ol(i.axis,t.displaceBy),l=c.value,u=r[s.start],d=r[s.end],p=vc(Cc(t,o),(function(e){var t=e.descriptor.id,r=e.page.borderBox,i=r[s.size]/4,o=Uc(t,a),c=yl({displaced:n.displaced,id:t});return o?c?d>r[s.start]+i&&d<r[s.end]-i:u>r[s.start]-l+i&&u<r[s.end]-l-i:c?d>r[s.start]+l+i&&d<r[s.end]+l-i:u>r[s.start]+i&&u<r[s.end]-i}));return p?{displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:p,draggable:r,previousImpact:o,destination:u,insideDestination:d,afterCritical:s})||function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,i=e.insideDestination,o=e.last,a=e.viewport,s=e.afterCritical,c=n.axis,l=ol(n.axis,r.displaceBy),u=l.value,d=t[c.start],p=t[c.end],h=function(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}({draggable:r,closest:vc(Cc(r,i),(function(e){var t=e.descriptor.id,r=e.page.borderBox.center[c.line],n=Uc(t,s),i=yl({displaced:o,id:t});return n?i?p<=r:d<r-u:i?p<=r+u:d<r})),inHomeList:kc(r,n)});return Kc({draggable:r,insideDestination:i,destination:n,viewport:a,last:o,displacedBy:l,index:h})}({pageBorderBoxWithDroppableScroll:p,draggable:r,destination:u,insideDestination:d,last:o.displaced,viewport:a,afterCritical:s})},gl=function(e,t){var r;return Pa({},e,((r={})[t.descriptor.id]=t,r))},ml=function(e){var t=e.previousImpact,r=e.impact,n=e.droppables,i=ll(t),o=ll(r);if(!i)return n;if(i===o)return n;var a=n[i];if(!a.subject.withPlaceholder)return n;var s=function(e){var t=e.subject.withPlaceholder;t||zs(!1);var r=e.frame;if(!r)return Pa({},e,{subject:pc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var n=t.oldFrameMaxScroll;n||zs(!1);var i=al(r,n);return Pa({},e,{subject:pc({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null}),frame:i})}(a);return gl(n,s)},bl=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,i=e.viewport,o=e.impact,a=e.scrollJumpRequest,s=i||t.viewport,c=n||t.dimensions,l=r||t.current.client.selection,u=rc(l,t.initial.client.selection),d={offset:u,selection:l,borderBoxCenter:tc(t.initial.client.borderBoxCenter,u)},p={selection:tc(d.selection,s.scroll.current),borderBoxCenter:tc(d.borderBoxCenter,s.scroll.current),offset:tc(d.offset,s.scroll.diff.value)},h={client:d,page:p};if("COLLECTING"===t.phase)return Pa({phase:"COLLECTING"},t,{dimensions:c,viewport:s,current:h});var f=c.draggables[t.critical.draggable.id],y=o||vl({pageOffset:p.offset,draggable:f,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,i=e.previousImpact,o=e.impact,a=ml({previousImpact:i,impact:o,droppables:n}),s=ll(o);if(!s)return a;var c=n[s];if(kc(t,c))return a;if(c.subject.withPlaceholder)return a;var l=sl(c,t,r);return gl(a,l)}({draggable:f,impact:y,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables});return Pa({},t,{current:h,dimensions:{draggables:c.draggables,droppables:v},impact:y,viewport:s,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null})};var Sl=function(e){var t=e.impact,r=e.viewport,n=e.draggables,i=e.destination,o=e.forceShouldAnimate,a=t.displaced,s=function(e,t){return e.map((function(e){return t[e]}))}(a.all,n);return Pa({},t,{displaced:Fc({afterDragging:s,destination:i,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:o,last:a})})},wl=function(e){var t=e.impact,r=e.draggable,n=e.droppable,i=e.draggables,o=e.viewport,a=e.afterCritical,s=Yc({impact:t,draggable:r,draggables:i,droppable:n,afterCritical:a});return Zc({pageBorderBoxCenter:s,draggable:r,viewport:o})},Pl=function(e){var t=e.state,r=e.dimensions,n=e.viewport;"SNAP"!==t.movementMode&&zs(!1);var i=t.impact,o=n||t.viewport,a=r||t.dimensions,s=a.draggables,c=a.droppables,l=s[t.critical.draggable.id],u=ll(i);u||zs(!1);var d=c[u],p=Sl({impact:i,viewport:o,destination:d,draggables:s}),h=wl({impact:p,draggable:l,droppable:d,draggables:s,viewport:o,afterCritical:t.afterCritical});return bl({impact:p,clientSelection:h,state:t,dimensions:a,viewport:o})},_l=function(e){var t=e.draggable,r=e.home,n=e.draggables,i=e.viewport,o=ol(r.axis,t.displaceBy),a=Pc(r.descriptor.id,n),s=a.indexOf(t);-1===s&&zs(!1);var c,l=a.slice(s+1),u=l.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),d={inVirtualList:"virtual"===r.descriptor.mode,displacedBy:o,effected:u};return{impact:{displaced:Fc({afterDragging:l,destination:r,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:(c=t.descriptor,{index:c.index,droppableId:c.droppableId})}},afterCritical:d}},El=function(e){0},Cl=function(e){0},kl=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,i=n.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,o=function(e){var t=e.frame;return t||zs(!1),t}(r[t]),a=o.scroll.diff.value,s=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,i=Ms(t.client,r),o=Ds(i,n);return Pa({},t,{placeholder:Pa({},t.placeholder,{client:i}),client:i,page:o})}({draggable:e,offset:tc(i,a),initialWindowScroll:n.scroll.initial});return s}))},Ol=function(e){return"SNAP"===e.movementMode},xl=function(e,t,r){var n=function(e,t){return{draggables:e.draggables,droppables:gl(e.droppables,t)}}(e.dimensions,t);return!Ol(e)||r?bl({state:e,dimensions:n}):Pl({state:e,dimensions:n})};function Il(e){return e.isDragging&&"SNAP"===e.movementMode?Pa({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Al={phase:"IDLE",completed:null,shouldFlush:!1},Ml=function(e,t){if(void 0===e&&(e=Al),"FLUSH"===t.type)return Pa({},Al,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&zs(!1);var r=t.payload,n=r.critical,i=r.clientSelection,o=r.viewport,a=r.dimensions,s=r.movementMode,c=a.draggables[n.draggable.id],l=a.droppables[n.droppable.id],u={selection:i,borderBoxCenter:c.client.borderBox.center,offset:ec},d={client:u,page:{selection:tc(u.selection,o.scroll.initial),borderBoxCenter:tc(u.selection,o.scroll.initial),offset:tc(u.selection,o.scroll.diff.value)}},p=Sc(a.droppables).every((function(e){return!e.isFixedOnPage})),h=_l({draggable:c,home:l,draggables:a.draggables,viewport:o}),f=h.impact;return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:s,dimensions:a,initial:d,current:d,isWindowScrollAllowed:p,impact:f,afterCritical:h.afterCritical,onLiftImpact:f,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&zs(!1),Pa({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&zs(!1),function(e){var t=e.state,r=e.published;El();var n=r.modified.map((function(e){var r=t.dimensions.droppables[e.droppableId];return hc(r,e.scroll)})),i=Pa({},t.dimensions.droppables,{},mc(n)),o=bc(kl({additions:r.additions,updatedDroppables:i,viewport:t.viewport})),a=Pa({},t.dimensions.draggables,{},o);r.removals.forEach((function(e){delete a[e]}));var s={droppables:i,draggables:a},c=ll(t.impact),l=c?s.droppables[c]:null,u=s.draggables[t.critical.draggable.id],d=s.droppables[t.critical.droppable.id],p=_l({draggable:u,home:d,draggables:a,viewport:t.viewport}),h=p.impact,f=p.afterCritical,y=l&&l.isCombineEnabled?t.impact:h,v=vl({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:y,viewport:t.viewport,afterCritical:f});Cl();var g=Pa({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:h,dimensions:s,afterCritical:f,forceShouldAnimate:!1});return"COLLECTING"===t.phase?g:Pa({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;dl(e)||zs(!1);var y=t.payload.client;return nc(y,e.current.client.selection)?e:bl({state:e,clientSelection:y,impact:Ol(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return Il(e);if("COLLECTING"===e.phase)return Il(e);dl(e)||zs(!1);var v=t.payload,g=v.id,m=v.newScroll,b=e.dimensions.droppables[g];if(!b)return e;var S=hc(b,m);return xl(e,S,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;dl(e)||zs(!1);var w=t.payload,P=w.id,_=w.isEnabled,E=e.dimensions.droppables[P];E||zs(!1),E.isEnabled===_&&zs(!1);var C=Pa({},E,{isEnabled:_});return xl(e,C,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;dl(e)||zs(!1);var k=t.payload,O=k.id,x=k.isCombineEnabled,I=e.dimensions.droppables[O];I||zs(!1),I.isCombineEnabled===x&&zs(!1);var A=Pa({},I,{isCombineEnabled:x});return xl(e,A,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;dl(e)||zs(!1),e.isWindowScrollAllowed||zs(!1);var M=t.payload.newScroll;if(nc(e.viewport.scroll.current,M))return Il(e);var D=Qc(e.viewport,M);return Ol(e)?Pl({state:e,viewport:D}):bl({state:e,viewport:D})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!dl(e))return e;var R=t.payload.maxScroll;if(nc(R,e.viewport.scroll.max))return e;var T=Pa({},e.viewport,{scroll:Pa({},e.viewport.scroll,{max:R})});return Pa({phase:"DRAGGING"},e,{viewport:T})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&zs(!1);var N=ul({state:e,type:t.type});return N?bl({state:e,impact:N.impact,clientSelection:N.clientSelection,scrollJumpRequest:N.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var j=t.payload.reason;return"COLLECTING"!==e.phase&&zs(!1),Pa({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:j})}if("DROP_ANIMATE"===t.type){var B=t.payload,F=B.completed,L=B.dropDuration,K=B.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&zs(!1),{phase:"DROP_ANIMATING",completed:F,dropDuration:L,newHomeClientOffset:K,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},Dl=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Rl=function(){return{type:"COLLECTION_STARTING",payload:null}},Tl=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Nl=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},jl=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},Bl=function(e){return{type:"MOVE",payload:e}},Fl=function(){return{type:"MOVE_UP",payload:null}},Ll=function(){return{type:"MOVE_DOWN",payload:null}},Kl=function(){return{type:"MOVE_RIGHT",payload:null}},Ul=function(){return{type:"MOVE_LEFT",payload:null}},Vl=function(e){return{type:"DROP_COMPLETE",payload:e}},Wl=function(e){return{type:"DROP",payload:e}},zl=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var Hl="cubic-bezier(.2,1,.1,1)",Gl={drop:0,combining:.7},ql={drop:.75},$l=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Xl={fluid:"opacity "+$l,snap:"transform "+$l+", opacity "+$l,drop:function(e){var t=e+"s "+Hl;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+$l,placeholder:"height "+$l+", width "+$l+", margin "+$l},Yl=function(e){return nc(e,ec)?null:"translate("+e.x+"px, "+e.y+"px)"},Ql=Yl,Jl=function(e,t){var r=Yl(e);return r?t?r+" scale("+ql.drop+")":r:null},Zl=.33,eu=.55,tu=eu-Zl,ru=function(e){var t=e.getState,r=e.dispatch;return function(e){return function(n){if("DROP"===n.type){var i=t(),o=n.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&zs(!1),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&zs(!1);var a=i.critical,s=i.dimensions,c=s.draggables[i.critical.draggable.id],l=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,i=e.home,o=e.viewport,a=e.onLiftImpact;return n.at&&"DROP"===r?"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:Pa({},n,{displaced:xc}),didDropInsideDroppable:!0}:{impact:Sl({draggables:t,impact:a,destination:i,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=l.impact,d=l.didDropInsideDroppable,p=d?_c(u):null,h=d?Ec(u):null,f={index:a.draggable.index,droppableId:a.droppable.id},y={draggableId:c.descriptor.id,type:c.descriptor.type,source:f,reason:o,mode:i.movementMode,destination:p,combine:h},v=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,i=e.viewport,o=e.afterCritical,a=n.draggables,s=n.droppables,c=ll(t),l=c?s[c]:null,u=s[r.descriptor.droppableId],d=wl({impact:t,draggable:r,draggables:a,afterCritical:o,droppable:l||u,viewport:i});return rc(d,r.client.borderBox.center)}({impact:u,draggable:c,dimensions:s,viewport:i.viewport,afterCritical:i.afterCritical}),g={critical:i.critical,afterCritical:i.afterCritical,result:y,impact:u};if(!nc(i.current.client.offset,v)||Boolean(y.combine)){var m=function(e){var t=e.current,r=e.destination,n=e.reason,i=ac(t,r);if(i<=0)return Zl;if(i>=1500)return eu;var o=Zl+tu*(i/1500);return Number(("CANCEL"===n?.6*o:o).toFixed(2))}({current:i.current.client.offset,destination:v,reason:o});r(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:v,dropDuration:m,completed:g}))}else r(Vl({completed:g}))}}else r(function(e){return{type:"DROP_PENDING",payload:e}}({reason:o}))}else e(n)}}},nu=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function iu(e){var t=e.onWindowScroll;var r=Fs((function(){t(nu())})),n=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(r),i=Ks;function o(){return i!==Ks}return{start:function(){o()&&zs(!1),i=Us(window,[n])},stop:function(){o()||zs(!1),r.cancel(),i(),i=Ks},isActive:o}}var ou=function(e){var t=iu({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(r){t.isActive()||"INITIAL_PUBLISH"!==r.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r)&&t.stop(),e(r)}}},au=function(){var e=[];return{add:function(t){var r=setTimeout((function(){return function(t){var r=yc(e,(function(e){return e.timerId===t}));-1===r&&zs(!1),e.splice(r,1)[0].callback()}(r)})),n={timerId:r,callback:t};e.push(n)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}},su=function(e,t){El(),t(),Cl()},cu=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},lu=function(e,t,r,n){if(e){var i=function(e){var t=!1,r=!1,n=setTimeout((function(){r=!0})),i=function(i){t||r||(t=!0,e(i),clearTimeout(n))};return i.wasCalled=function(){return t},i}(r);e(t,{announce:i}),i.wasCalled()||r(n(t))}else r(n(t))},uu=function(e,t){var r=function(e,t){var r=au(),n=null,i=function(r){n||zs(!1),n=null,su(0,(function(){return lu(e().onDragEnd,r,t,Zs)}))};return{beforeCapture:function(t,r){n&&zs(!1),su(0,(function(){var n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})}))},beforeStart:function(t,r){n&&zs(!1),su(0,(function(){var n=e().onBeforeDragStart;n&&n(cu(t,r))}))},start:function(i,o){n&&zs(!1);var a=cu(i,o);n={mode:o,lastCritical:i,lastLocation:a.source,lastCombine:null},r.add((function(){su(0,(function(){return lu(e().onDragStart,a,t,Qs)}))}))},update:function(i,o){var a=_c(o),s=Ec(o);n||zs(!1);var c=!function(e,t){if(e===t)return!0;var r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n}(i,n.lastCritical);c&&(n.lastCritical=i);var l,u,d=(u=a,!(null==(l=n.lastLocation)&&null==u||null!=l&&null!=u&&l.droppableId===u.droppableId&&l.index===u.index));d&&(n.lastLocation=a);var p=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(n.lastCombine,s);if(p&&(n.lastCombine=s),c||d||p){var h=Pa({},cu(i,n.mode),{combine:s,destination:a});r.add((function(){su(0,(function(){return lu(e().onDragUpdate,h,t,Js)}))}))}},flush:function(){n||zs(!1),r.flush()},drop:i,abort:function(){if(n){var e=Pa({},cu(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(n){if("BEFORE_INITIAL_CAPTURE"!==n.type){if("INITIAL_PUBLISH"===n.type){var i=n.payload.critical;return r.beforeStart(i,n.payload.movementMode),t(n),void r.start(i,n.payload.movementMode)}if("DROP_COMPLETE"===n.type){var o=n.payload.completed.result;return r.flush(),t(n),void r.drop(o)}if(t(n),"FLUSH"!==n.type){var a=e.getState();"DRAGGING"===a.phase&&r.update(a.critical,a.impact)}else r.abort()}else r.beforeCapture(n.payload.draggableId,n.payload.movementMode)}}}},du=function(e){return function(t){return function(r){if("DROP_ANIMATION_FINISHED"===r.type){var n=e.getState();"DROP_ANIMATING"!==n.phase&&zs(!1),e.dispatch(Vl({completed:n.completed}))}else t(r)}}},pu=function(e){var t=null,r=null;return function(n){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(i),"DROP_ANIMATE"===i.type){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};r=requestAnimationFrame((function(){r=null,t=Us(window,[o])}))}}}},hu=function(e){return function(t){return function(r){if(t(r),"PUBLISH_WHILE_DRAGGING"===r.type){var n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(Wl({reason:n.reason})))}}}},fu=Ra,yu=function(e){var t,r=e.dimensionMarshal,n=e.focusMarshal,i=e.styleMarshal,o=e.getResponders,a=e.announce,s=e.autoScroller;return Aa(Ml,fu(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(Ca(15))},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return n=Ra.apply(void 0,o)(r.dispatch),Ea(Ea({},r),{},{dispatch:n})}}}((t=i,function(){return function(e){return function(r){"INITIAL_PUBLISH"===r.type&&t.dragging(),"DROP_ANIMATE"===r.type&&t.dropping(r.payload.completed.result.reason),"FLUSH"!==r.type&&"DROP_COMPLETE"!==r.type||t.resting(),e(r)}}}),function(e){return function(){return function(t){return function(r){"DROP_COMPLETE"!==r.type&&"FLUSH"!==r.type&&"DROP_ANIMATE"!==r.type||e.stopPublishing(),t(r)}}}}(r),function(e){return function(t){var r=t.getState,n=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var o=i.payload,a=o.id,s=o.clientSelection,c=o.movementMode,l=r();"DROP_ANIMATING"===l.phase&&n(Vl({completed:l.completed})),"IDLE"!==r().phase&&zs(!1),n({type:"FLUSH",payload:null}),n({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:c}});var u={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===c}},d=e.startPublishing(u),p=d.critical,h=d.dimensions,f=d.viewport;n({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:h,clientSelection:s,movementMode:c,viewport:f}})}else t(i)}}}}(r),ru,du,pu,hu,function(e){return function(t){return function(r){return function(n){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n))return e.stop(),void r(n);if("INITIAL_PUBLISH"===n.type){r(n);var i=t.getState();return"DRAGGING"!==i.phase&&zs(!1),void e.start(i)}r(n),e.scroll(t.getState())}}}}(s),ou,function(e){var t=!1;return function(){return function(r){return function(n){if("INITIAL_PUBLISH"===n.type)return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if("FLUSH"===n.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===n.type){t=!1;var i=n.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(n),uu(o,a))))};var vu=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,i=e.width,o=rc({x:r,y:t},{x:i,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},gu=function(){var e=document.documentElement;return e||zs(!1),e},mu=function(){var e=gu();return vu({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},bu=function(e){var t=e.critical,r=e.scrollOptions,n=e.registry;El();var i,o,a,s,c,l,u,d=(i=nu(),o=mu(),a=i.y,s=i.x,c=gu(),l=c.clientWidth,u=c.clientHeight,{frame:Cs({top:a,left:s,right:s+l,bottom:a+u}),scroll:{initial:i,current:i,max:o,diff:{value:ec,displacement:ec}}}),p=d.scroll.current,h=t.droppable,f=n.droppable.getAllByType(h.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(p,r)})),y=n.draggable.getAllByType(t.draggable.type).map((function(e){return e.getDimension(p)})),v={draggables:bc(y),droppables:mc(f)};return Cl(),{dimensions:v,critical:t,viewport:d}};function Su(e,t,r){return r.descriptor.id!==t.id&&(r.descriptor.type===t.type&&"virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode)}var wu,Pu,_u=function(e,t){var r=null,n=function(e){var t=e.registry,r=e.callbacks,n={additions:{},removals:{},modified:{}},i=null,o=function(){i||(r.collectionStarting(),i=requestAnimationFrame((function(){i=null,El();var e=n,o=e.additions,a=e.removals,s=e.modified,c=Object.keys(o).map((function(e){return t.draggable.getById(e).getDimension(ec)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),l=Object.keys(s).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),u={additions:c,removals:Object.keys(a),modified:l};n={additions:{},removals:{},modified:{}},Cl(),r.publish(u)})))};return{add:function(e){var t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],o()},remove:function(e){var t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],o()},stop:function(){i&&(cancelAnimationFrame(i),i=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){r||zs(!1);var i=r.critical.draggable;"ADDITION"===t.type&&Su(e,i,t.value)&&n.add(t.value),"REMOVAL"===t.type&&Su(e,i,t.value)&&n.remove(t.value)},o={updateDroppableIsEnabled:function(n,i){e.droppable.exists(n)||zs(!1),r&&t.updateDroppableIsEnabled({id:n,isEnabled:i})},updateDroppableIsCombineEnabled:function(n,i){r&&(e.droppable.exists(n)||zs(!1),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:i}))},scrollDroppable:function(t,n){r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:function(n,i){r&&(e.droppable.exists(n)||zs(!1),t.updateDroppableScroll({id:n,newScroll:i}))},startPublishing:function(t){r&&zs(!1);var n=e.draggable.getById(t.draggableId),o=e.droppable.getById(n.descriptor.droppableId),a={draggable:n.descriptor,droppable:o.descriptor},s=e.subscribe(i);return r={critical:a,unsubscribe:s},bu({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(r){n.stop();var t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),r.unsubscribe(),r=null}}};return o},Eu=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},Cu=function(e){window.scrollBy(e.x,e.y)},ku=Bs((function(e){return Sc(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),Ou=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var i=n[r];return i.frame?i:null}var o=function(e,t){var r=vc(ku(t),(function(t){return t.frame||zs(!1),pl(t.frame.pageMarginBox)(e)}));return r}(t,n);return o},xu=.25,Iu=.05,Au=28,Mu=function(e){return Math.pow(e,2)},Du={stopDampeningAt:1200,accelerateAt:360},Ru=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,i=r-t;return 0===i?0:(n-t)/i},Tu=Du.accelerateAt,Nu=Du.stopDampeningAt,ju=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,i=e.shouldUseTimeDampening,o=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Au;if(e===t.startScrollingFrom)return 1;var r=Ru({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=Au*Mu(1-r);return Math.ceil(n)}(t,r);return 0===o?0:i?Math.max(function(e,t){var r=t,n=Nu,i=Date.now()-r;if(i>=Nu)return e;if(i<Tu)return 1;var o=Ru({startOfRange:Tu,endOfRange:n,current:i}),a=e*Mu(o);return Math.ceil(a)}(o,n),1):o},Bu=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,i=e.axis,o=e.shouldUseTimeDampening,a=function(e,t){return{startScrollingFrom:e[t.size]*xu,maxScrollValueAt:e[t.size]*Iu}}(t,i);return r[i.end]<r[i.start]?ju({distanceToEdge:r[i.end],thresholds:a,dragStartTime:n,shouldUseTimeDampening:o}):-1*ju({distanceToEdge:r[i.start],thresholds:a,dragStartTime:n,shouldUseTimeDampening:o})},Fu=cc((function(e){return 0===e?0:e})),Lu=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,i=e.center,o=e.shouldUseTimeDampening,a={top:i.y-r.top,right:r.right-i.x,bottom:r.bottom-i.y,left:i.x-r.left},s=Bu({container:r,distanceToEdges:a,dragStartTime:t,axis:Rc,shouldUseTimeDampening:o}),c=Bu({container:r,distanceToEdges:a,dragStartTime:t,axis:Tc,shouldUseTimeDampening:o}),l=Fu({x:c,y:s});if(nc(l,ec))return null;var u=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,i=r.height>t.height,o=r.width>t.width;return o||i?o&&i?null:{x:o?0:n.x,y:i?0:n.y}:n}({container:r,subject:n,proposedScroll:l});return u?nc(u,ec)?null:u:null},Ku=cc((function(e){return 0===e?0:e>0?1:-1})),Uu=(wu=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,r=e.max,n=e.change,i=tc(t,n),o={x:wu(i.x,r.x),y:wu(i.y,r.y)};return nc(o,ec)?null:o}),Vu=function(e){var t=e.max,r=e.current,n=e.change,i={x:Math.max(r.x,t.x),y:Math.max(r.y,t.y)},o=Ku(n),a=Uu({max:i,current:r,change:o});return!a||(0!==o.x&&0===a.x||0!==o.y&&0===a.y)},Wu=function(e,t){return Vu({current:e.scroll.current,max:e.scroll.max,change:t})},zu=function(e,t){var r=e.frame;return!!r&&Vu({current:r.scroll.current,max:r.scroll.max,change:t})},Hu=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,i=e.scrollWindow,o=e.scrollDroppable,a=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var c=function(e){var t=e.viewport,r=e.subject,n=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=Lu({dragStartTime:i,container:t.frame,subject:r,center:n,shouldUseTimeDampening:o});return a&&Wu(t,a)?a:null}({dragStartTime:r,viewport:t.viewport,subject:s,center:a,shouldUseTimeDampening:n});if(c)return void i(c)}var l=Ou({center:a,destination:ll(t.impact),droppables:t.dimensions.droppables});if(l){var u=function(e){var t=e.droppable,r=e.subject,n=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var s=Lu({dragStartTime:i,container:a.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:o});return s&&zu(t,s)?s:null}({dragStartTime:r,droppable:l,subject:s,center:a,shouldUseTimeDampening:n});u&&o(l.descriptor.id,u)}},Gu=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,i=function(e,t){if(!zu(e,t))return t;var n=function(e,t){var r=e.frame;return r&&zu(e,t)?Uu({current:r.scroll.current,max:r.scroll.max,change:t}):null}(e,t);if(!n)return r(e.descriptor.id,t),null;var i=rc(t,n);return r(e.descriptor.id,i),rc(t,i)},o=function(e,t,r){if(!e)return r;if(!Wu(t,r))return r;var i=function(e,t){if(!Wu(e,t))return null;var r=e.scroll.max,n=e.scroll.current;return Uu({current:n,max:r,change:t})}(t,r);if(!i)return n(r),null;var o=rc(r,i);return n(o),rc(r,o)};return function(e){var r=e.scrollJumpRequest;if(r){var n=ll(e.impact);n||zs(!1);var a=i(e.dimensions.droppables[n],r);if(a){var s=e.viewport,c=o(e.isWindowScrollAllowed,s,a);c&&function(e,r){var n=tc(e.current.client.selection,r);t({client:n})}(e,c)}}}},qu=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,i=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=Fs(t),i=Fs(r),o=null,a=function(e){o||zs(!1);var t=o,r=t.shouldUseTimeDampening,a=t.dragStartTime;Hu({state:e,scrollWindow:n,scrollDroppable:i,dragStartTime:a,shouldUseTimeDampening:r})};return{start:function(e){El(),o&&zs(!1);var t=Date.now(),r=!1,n=function(){r=!0};Hu({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),o={dragStartTime:t,shouldUseTimeDampening:r},Cl(),r&&a(e)},stop:function(){o&&(n.cancel(),i.cancel(),o=null)},scroll:a}}({scrollWindow:r,scrollDroppable:t}),o=Gu({move:n,scrollWindow:r,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&o(e):i.scroll(e))},start:i.start,stop:i.stop}},$u={base:Pu="data-rbd-drag-handle",draggableId:Pu+"-draggable-id",contextId:Pu+"-context-id"},Xu=function(){var e="data-rbd-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Yu=function(){var e="data-rbd-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Qu={contextId:"data-rbd-scroll-container-context-id"},Ju=function(e,t){return e.map((function(e){var r=e.styles[t];return r?e.selector+" { "+r+" }":""})).join(" ")},Zu="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?w.useLayoutEffect:w.useEffect,ed=function(){var e=document.querySelector("head");return e||zs(!1),e},td=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function rd(e,t){var r=Ps((function(){return function(e){var t,r,n,i=(t=e,function(e){return"["+e+'="'+t+'"]'}),o=(r="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:i($u.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:r,dragging:"pointer-events: none;",dropAnimating:r}}),a=[(n="\n      transition: "+Xl.outOfTheWay+";\n    ",{selector:i(Xu.contextId),styles:{dragging:n,dropAnimating:n,userCancel:n}}),o,{selector:i(Yu.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Ju(a,"always"),resting:Ju(a,"resting"),dragging:Ju(a,"dragging"),dropAnimating:Ju(a,"dropAnimating"),userCancel:Ju(a,"userCancel")}}(e)}),[e]),n=(0,w.useRef)(null),i=(0,w.useRef)(null),o=_s(Bs((function(e){var t=i.current;t||zs(!1),t.textContent=e})),[]),a=_s((function(e){var t=n.current;t||zs(!1),t.textContent=e}),[]);Zu((function(){(n.current||i.current)&&zs(!1);var s=td(t),c=td(t);return n.current=s,i.current=c,s.setAttribute("data-rbd-always",e),c.setAttribute("data-rbd-dynamic",e),ed().appendChild(s),ed().appendChild(c),a(r.always),o(r.resting),function(){var e=function(e){var t=e.current;t||zs(!1),ed().removeChild(t),e.current=null};e(n),e(i)}}),[t,a,o,r.always,r.resting,e]);var s=_s((function(){return o(r.dragging)}),[o,r.dragging]),c=_s((function(e){o("DROP"!==e?r.userCancel:r.dropAnimating)}),[o,r.dropAnimating,r.userCancel]),l=_s((function(){i.current&&o(r.resting)}),[o,r.resting]);return Ps((function(){return{dragging:s,dropping:c,resting:l}}),[s,c,l])}var nd=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function id(e){return e instanceof nd(e).HTMLElement}function od(e,t){var r="["+$u.contextId+'="'+e+'"]',n=gc(document.querySelectorAll(r));if(!n.length)return null;var i=vc(n,(function(e){return e.getAttribute($u.draggableId)===t}));return i&&id(i)?i:null}function ad(){var e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach((function(t){return t(e)}))}function n(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:function(t,r){var n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,o=n(i);o&&t.uniqueId===o.uniqueId&&(delete e.draggables[i],r({type:"REMOVAL",value:t}))},getById:function(e){var t=n(e);return t||zs(!1),t},findById:n,exists:function(e){return Boolean(n(e))},getAllByType:function(t){return fc(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var r=i(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=i(e);return t||zs(!1),t},findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return fc(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var sd=w.createContext(null),cd=function(){var e=document.body;return e||zs(!1),e},ld={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var ud=0,dd={separator:"::"};function pd(e,t){return void 0===t&&(t=dd),Ps((function(){return""+e+t.separator+ud++}),[t.separator,e])}var hd=w.createContext(null);function fd(e){0}function yd(e,t){fd()}function vd(){yd()}function gd(e){var t=(0,w.useRef)(e);return(0,w.useEffect)((function(){t.current=e})),t}var md,bd=((md={})[13]=!0,md[9]=!0,md),Sd=function(e){bd[e.keyCode]&&e.preventDefault()},wd=function(){var e="visibilitychange";return"undefined"==typeof document?e:vc([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}();var Pd,_d={type:"IDLE"};function Ed(e){var t=e.cancel,r=e.completed,n=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,r=e.clientX,o=e.clientY;if(0===t){var a={x:r,y:o},s=n();if("DRAGGING"===s.type)return e.preventDefault(),void s.actions.move(a);"PENDING"!==s.type&&zs(!1);var c=s.point;if(l=c,u=a,Math.abs(u.x-l.x)>=5||Math.abs(u.y-l.y)>=5){var l,u;e.preventDefault();var d=s.actions.fluidLift(a);i({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var i=n();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===n().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==n().type)return 27===e.keyCode?(e.preventDefault(),void t()):void Sd(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===n().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var r=n();"IDLE"===r.type&&zs(!1),r.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:wd,fn:t}]}function Cd(){}var kd=((Pd={})[34]=!0,Pd[33]=!0,Pd[36]=!0,Pd[35]=!0,Pd);function Od(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:function(n){return 27===n.keyCode?(n.preventDefault(),void r()):32===n.keyCode?(n.preventDefault(),t(),void e.drop()):40===n.keyCode?(n.preventDefault(),void e.moveDown()):38===n.keyCode?(n.preventDefault(),void e.moveUp()):39===n.keyCode?(n.preventDefault(),void e.moveRight()):37===n.keyCode?(n.preventDefault(),void e.moveLeft()):void(kd[n.keyCode]?n.preventDefault():Sd(n))}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:wd,fn:r}]}var xd={type:"IDLE"};var Id={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Ad(e,t){if(null==t)return!1;if(Boolean(Id[t.tagName.toLowerCase()]))return!0;var r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&Ad(e,t.parentElement)}function Md(e,t){var r=t.target;return!!id(r)&&Ad(e,r)}var Dd=function(e){return Cs(e.getBoundingClientRect()).center};var Rd=function(){var e="matches";return"undefined"==typeof document?e:vc([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function Td(e,t){return null==e?null:e[Rd](t)?e:Td(e.parentElement,t)}function Nd(e,t){return e.closest?e.closest(t):Td(e,t)}function jd(e,t){var r,n=t.target;if(!((r=n)instanceof nd(r).Element))return null;var i=function(e){return"["+$u.contextId+'="'+e+'"]'}(e),o=Nd(n,i);return o&&id(o)?o:null}function Bd(e){e.preventDefault()}function Fd(e){var t=e.expected,r=e.phase,n=e.isLockActive;e.shouldWarn;return!!n()&&t===r}function Ld(e){var t=e.lockAPI,r=e.store,n=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var o=n.draggable.findById(i);return!!o&&(!!o.options.isEnabled&&!!Eu(r.getState(),i))}function Kd(e){var t=e.lockAPI,r=e.contextId,n=e.store,i=e.registry,o=e.draggableId,a=e.forceSensorStop,s=e.sourceEvent;if(!Ld({lockAPI:t,store:n,registry:i,draggableId:o}))return null;var c=i.draggable.getById(o),l=function(e,t){var r="["+Xu.contextId+'="'+e+'"]',n=vc(gc(document.querySelectorAll(r)),(function(e){return e.getAttribute(Xu.id)===t}));return n&&id(n)?n:null}(r,c.descriptor.id);if(!l)return null;if(s&&!c.options.canDragInteractiveElements&&Md(l,s))return null;var u=t.claim(a||Ks),d="PRE_DRAG";function p(){return c.options.shouldRespectForcePress}function h(){return t.isActive(u)}var f=function(e,t){Fd({expected:e,phase:d,isLockActive:h,shouldWarn:!0})&&n.dispatch(t())}.bind(null,"DRAGGING");function y(e){function r(){t.release(),d="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var o=Us(window,[{eventName:"click",fn:Bd,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(o)}r(),n.dispatch(Wl({reason:t}))}return"PRE_DRAG"!==d&&(r(),"PRE_DRAG"!==d&&zs(!1)),n.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),d="DRAGGING",Pa({isActive:function(){return Fd({expected:"DRAGGING",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}return{isActive:function(){return Fd({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=Fs((function(e){f((function(){return Bl({client:e})}))}));return Pa({},y({liftActionArgs:{id:o,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return f(Fl)},moveRight:function(){return f(Kl)},moveDown:function(){return f(Ll)},moveLeft:function(){return f(Ul)}};return y({liftActionArgs:{id:o,clientSelection:Dd(l),movementMode:"SNAP"},cleanup:Ks,actions:e})},abort:function(){Fd({expected:"PRE_DRAG",phase:d,isLockActive:h,shouldWarn:!0})&&t.release()}}}var Ud=[function(e){var t=(0,w.useRef)(_d),r=(0,w.useRef)(Ks),n=Ps((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=e.findClosestDraggableId(t);if(n){var i=e.tryGetLock(n,a,{sourceEvent:t});if(i){t.preventDefault();var o={x:t.clientX,y:t.clientY};r.current(),l(i,o)}}}}}}),[e]),i=Ps((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}}}}}),[e]),o=_s((function(){r.current=Us(window,[i,n],{passive:!1,capture:!0})}),[i,n]),a=_s((function(){"IDLE"!==t.current.type&&(t.current=_d,r.current(),o())}),[o]),s=_s((function(){var e=t.current;a(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[a]),c=_s((function(){var e=Ed({cancel:s,completed:a,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});r.current=Us(window,e,{capture:!0,passive:!1})}),[s,a]),l=_s((function(e,r){"IDLE"!==t.current.type&&zs(!1),t.current={type:"PENDING",point:r,actions:e},c()}),[c]);Zu((function(){return o(),function(){r.current()}}),[o])},function(e){var t=(0,w.useRef)(Cd),r=Ps((function(){return{eventName:"keydown",fn:function(r){if(!r.defaultPrevented&&32===r.keyCode){var i=e.findClosestDraggableId(r);if(i){var o=e.tryGetLock(i,c,{sourceEvent:r});if(o){r.preventDefault();var a=!0,s=o.snapLift();t.current(),t.current=Us(window,Od(s,c),{capture:!0,passive:!1})}}}function c(){a||zs(!1),a=!1,t.current(),n()}}}}),[e]),n=_s((function(){t.current=Us(window,[r],{passive:!1,capture:!0})}),[r]);Zu((function(){return n(),function(){t.current()}}),[n])},function(e){var t=(0,w.useRef)(xd),r=(0,w.useRef)(Ks),n=_s((function(){return t.current}),[]),i=_s((function(e){t.current=e}),[]),o=Ps((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var i=e.tryGetLock(n,s,{sourceEvent:t});if(i){var o=t.touches[0],a={x:o.clientX,y:o.clientY};r.current(),d(i,a)}}}}}}),[e]),a=_s((function(){r.current=Us(window,[o],{capture:!0,passive:!1})}),[o]),s=_s((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),i(xd),r.current(),a())}),[a,i]),c=_s((function(){var e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),l=_s((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:s,getPhase:n},i=Us(window,function(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var r=n();if("DRAGGING"===r.type){r.hasMoved=!0;var i=e.touches[0],o={x:i.clientX,y:i.clientY};e.preventDefault(),r.actions.move(o)}else t()}},{eventName:"touchend",fn:function(e){var i=n();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===n().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var r=n();"IDLE"===r.type&&zs(!1);var i=e.touches[0];if(i&&i.force>=.15){var o=r.actions.shouldRespectForcePress();if("PENDING"!==r.type)return o?r.hasMoved?void e.preventDefault():void t():void e.preventDefault();o&&t()}}},{eventName:wd,fn:t}]}(t),e),o=Us(window,function(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===r().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:wd,fn:t}]}(t),e);r.current=function(){i(),o()}}),[c,n,s]),u=_s((function(){var e=n();"PENDING"!==e.type&&zs(!1);var t=e.actions.fluidLift(e.point);i({type:"DRAGGING",actions:t,hasMoved:!1})}),[n,i]),d=_s((function(e,t){"IDLE"!==n().type&&zs(!1);var r=setTimeout(u,120);i({type:"PENDING",point:t,actions:e,longPressTimerId:r}),l()}),[l,n,i,u]);Zu((function(){return a(),function(){r.current();var e=n();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),i(xd))}}),[n,a,i]),Zu((function(){return Us(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function Vd(e){var t=e.contextId,r=e.store,n=e.registry,i=e.customSensors,o=e.enableDefaultSensors,a=[].concat(o?Ud:[],i||[]),s=(0,w.useState)((function(){return function(){var e=null;function t(){e||zs(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&zs(!1);var r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=_s((function(e,t){e.isDragging&&!t.isDragging&&s.tryAbandon()}),[s]);Zu((function(){var e=r.getState();return r.subscribe((function(){var t=r.getState();c(e,t),e=t}))}),[s,r,c]),Zu((function(){return s.tryAbandon}),[s.tryAbandon]);var l=_s((function(e){return Ld({lockAPI:s,registry:n,store:r,draggableId:e})}),[s,n,r]),u=_s((function(e,i,o){return Kd({lockAPI:s,registry:n,contextId:t,store:r,draggableId:e,forceSensorStop:i,sourceEvent:o&&o.sourceEvent?o.sourceEvent:null})}),[t,s,n,r]),d=_s((function(e){return function(e,t){var r=jd(e,t);return r?r.getAttribute($u.draggableId):null}(t,e)}),[t]),p=_s((function(e){var t=n.draggable.findById(e);return t?t.options:null}),[n.draggable]),h=_s((function(){s.isClaimed()&&(s.tryAbandon(),"IDLE"!==r.getState().phase&&r.dispatch({type:"FLUSH",payload:null}))}),[s,r]),f=_s(s.isClaimed,[s]),y=Ps((function(){return{canGetLock:l,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:p,tryReleaseLock:h,isLockClaimed:f}}),[l,u,d,p,h,f]);fd();for(var v=0;v<a.length;v++)a[v](y)}function Wd(e){return e.current||zs(!1),e.current}function zd(e){var t=e.contextId,r=e.setCallbacks,n=e.sensors,i=e.nonce,o=e.dragHandleUsageInstructions,a=(0,w.useRef)(null);vd();var s=gd(e),c=_s((function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(s.current)}),[s]),l=function(e){var t=Ps((function(){return function(e){return"rbd-announcement-"+e}(e)}),[e]),r=(0,w.useRef)(null);return(0,w.useEffect)((function(){var e=document.createElement("div");return r.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Pa(e.style,ld),cd().appendChild(e),function(){setTimeout((function(){var t=cd();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)}))}}),[t]),_s((function(e){var t=r.current;t&&(t.textContent=e)}),[])}(t),u=function(e){var t=e.contextId,r=e.text,n=pd("hidden-text",{separator:"-"}),i=Ps((function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:n}).contextId+"-"+e.uniqueId;var e}),[n,t]);return(0,w.useEffect)((function(){var e=document.createElement("div");return e.id=i,e.textContent=r,e.style.display="none",cd().appendChild(e),function(){var t=cd();t.contains(e)&&t.removeChild(e)}}),[i,r]),i}({contextId:t,text:o}),d=rd(t,i),p=_s((function(e){Wd(a).dispatch(e)}),[]),h=Ps((function(){return Da({publishWhileDragging:Dl,updateDroppableScroll:Tl,updateDroppableIsEnabled:Nl,updateDroppableIsCombineEnabled:jl,collectionStarting:Rl},p)}),[p]),f=function(){var e=Ps(ad,[]);return(0,w.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),y=Ps((function(){return _u(f,h)}),[f,h]),v=Ps((function(){return qu(Pa({scrollWindow:Cu,scrollDroppable:y.scrollDroppable},Da({move:Bl},p)))}),[y.scrollDroppable,p]),g=function(e){var t=(0,w.useRef)({}),r=(0,w.useRef)(null),n=(0,w.useRef)(null),i=(0,w.useRef)(!1),o=_s((function(e,r){var n={id:e,focus:r};return t.current[e]=n,function(){var r=t.current;r[e]!==n&&delete r[e]}}),[]),a=_s((function(t){var r=od(e,t);r&&r!==document.activeElement&&r.focus()}),[e]),s=_s((function(e,t){r.current===e&&(r.current=t)}),[]),c=_s((function(){n.current||i.current&&(n.current=requestAnimationFrame((function(){n.current=null;var e=r.current;e&&a(e)})))}),[a]),l=_s((function(e){r.current=null;var t=document.activeElement;t&&t.getAttribute($u.draggableId)===e&&(r.current=e)}),[]);return Zu((function(){return i.current=!0,function(){i.current=!1;var e=n.current;e&&cancelAnimationFrame(e)}}),[]),Ps((function(){return{register:o,tryRecordFocus:l,tryRestoreFocusRecorded:c,tryShiftRecord:s}}),[o,l,c,s])}(t),m=Ps((function(){return yu({announce:l,autoScroller:v,dimensionMarshal:y,focusMarshal:g,getResponders:c,styleMarshal:d})}),[l,v,y,g,c,d]);a.current=m;var b=_s((function(){var e=Wd(a);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),S=_s((function(){var e=Wd(a).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);r(Ps((function(){return{isDragging:S,tryAbort:b}}),[S,b]));var P=_s((function(e){return Eu(Wd(a).getState(),e)}),[]),_=_s((function(){return dl(Wd(a).getState())}),[]),E=Ps((function(){return{marshal:y,focus:g,contextId:t,canLift:P,isMovementAllowed:_,dragHandleUsageInstructionsId:u,registry:f}}),[t,y,u,g,P,_,f]);return Vd({contextId:t,store:m,registry:f,customSensors:n,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,w.useEffect)((function(){return b}),[b]),w.createElement(hd.Provider,{value:E},w.createElement(Ka,{context:sd,store:m},e.children))}var Hd=0;function Gd(e){var t=Ps((function(){return""+Hd++}),[]),r=e.dragHandleUsageInstructions||Ys;return w.createElement(Hs,null,(function(n){return w.createElement(zd,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var qd=function(e){return function(t){return e===t}},$d=qd("scroll"),Xd=qd("auto"),Yd=(qd("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Qd=function(e){var t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return Yd(r,$d)||Yd(r,Xd)},Jd=function e(t){return null==t||t===document.body||t===document.documentElement?null:Qd(t)?t:e(t.parentElement)},Zd=function(e){return{x:e.scrollLeft,y:e.scrollTop}},ep=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},tp=function(e){return{closestScrollable:Jd(e),isFixedOnPage:ep(e)}},rp=function(e){var t=e.ref,r=e.descriptor,n=e.env,i=e.windowScroll,o=e.direction,a=e.isDropDisabled,s=e.isCombineEnabled,c=e.shouldClipSubject,l=n.closestScrollable,u=function(e,t){var r=Ts(e);if(!t)return r;if(e!==t)return r;var n=r.paddingBox.top-t.scrollTop,i=r.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,a=i+t.scrollWidth,s=ks({top:n,right:a,bottom:o,left:i},r.border);return Is({borderBox:s,margin:r.margin,border:r.border,padding:r.padding})}(t,l),d=Ds(u,i),p=function(){if(!l)return null;var e=Ts(l),t={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:e,page:Ds(e,i),scroll:Zd(l),scrollSize:t,shouldClipSubject:c}}(),h=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,i=e.isFixedOnPage,o=e.direction,a=e.client,s=e.page,c=e.closest,l=function(){if(!c)return null;var e=c.scrollSize,t=c.client,r=vu({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:r,diff:{value:ec,displacement:ec}}}}(),u="vertical"===o?Rc:Tc;return{descriptor:t,isCombineEnabled:n,isFixedOnPage:i,axis:u,isEnabled:r,client:a,page:s,frame:l,subject:pc({page:s,withPlaceholder:null,axis:u,frame:l})}}({descriptor:r,isEnabled:!a,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:o,client:u,page:d,closest:p});return h},np={passive:!1},ip={passive:!0},op=function(e){return e.shouldPublishImmediately?np:ip};function ap(e){var t=(0,w.useContext)(e);return t||zs(!1),t}var sp=function(e){return e&&e.env.closestScrollable||null};function cp(){}var lp={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},up=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate;return t||"close"===n?lp:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}}({isAnimatingOpenOnMount:t,placeholder:r,animate:n});return{display:r.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?Xl.placeholder:null}};var dp=w.memo((function(e){var t=(0,w.useRef)(null),r=_s((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),n=e.animate,i=e.onTransitionEnd,o=e.onClose,a=e.contextId,s=(0,w.useState)("open"===e.animate),c=s[0],l=s[1];(0,w.useEffect)((function(){return c?"open"!==n?(r(),l(!1),cp):t.current?cp:(t.current=setTimeout((function(){t.current=null,l(!1)})),r):cp}),[n,c,r]);var u=_s((function(e){"height"===e.propertyName&&(i(),"close"===n&&o())}),[n,o,i]),d=up({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return w.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":a,onTransitionEnd:u,ref:e.innerRef})})),pp=w.createContext(null);var hp=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return wa(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(w.PureComponent),fp=5e3,yp=4500,vp=function(e,t){return t?Xl.drop(t.duration):e?Xl.snap:Xl.fluid},gp=function(e,t){return e?t?Gl.drop:Gl.combining:null};function mp(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,r=e.offset,n=e.combineWith,i=e.dropping,o=Boolean(n),a=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),s=Boolean(i),c=s?Jl(r,o):Ql(r);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:vp(a,i),transform:c,opacity:gp(o,s),zIndex:s?yp:fp,pointerEvents:"none"}}(e):{transform:Ql((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function bp(e){var t=pd("draggable"),r=e.descriptor,n=e.registry,i=e.getDraggableRef,o=e.canDragInteractiveElements,a=e.shouldRespectForcePress,s=e.isEnabled,c=Ps((function(){return{canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:s}}),[o,s,a]),l=_s((function(e){var t=i();return t||zs(!1),function(e,t,r){void 0===r&&(r=ec);var n=window.getComputedStyle(t),i=t.getBoundingClientRect(),o=Rs(i,n),a=Ds(o,r);return{descriptor:e,placeholder:{client:o,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:o.marginBox.width,y:o.marginBox.height},client:o,page:a}}(r,t,e)}),[r,i]),u=Ps((function(){return{uniqueId:t,descriptor:r,options:c,getDimension:l}}),[r,l,c,t]),d=(0,w.useRef)(u),p=(0,w.useRef)(!0);Zu((function(){return n.draggable.register(d.current),function(){return n.draggable.unregister(d.current)}}),[n.draggable]),Zu((function(){if(p.current)p.current=!1;else{var e=d.current;d.current=u,n.draggable.update(u,e)}}),[u,n.draggable])}function Sp(e,t,r){yd()}function wp(e){e.preventDefault()}var Pp=function(e,t){return e===t},_p=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null};function Ep(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Cp={mapped:{type:"SECONDARY",offset:ec,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Ep(null)}};var kp=ms((function(){var e,t,r,n=(e=Bs((function(e,t){return{x:e,y:t}})),t=Bs((function(e,t,r,n,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null}})),r=Bs((function(e,r,n,i,o,a,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:o,combineWith:a,mode:r,offset:e,dimension:n,forceShouldAnimate:s,snapshot:t(r,i,o,a,null)}}})),function(n,i){if(n.isDragging){if(n.critical.draggable.id!==i.draggableId)return null;var o=n.current.client.offset,a=n.dimensions.draggables[i.draggableId],s=ll(n.impact),c=(u=n.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,l=n.forceShouldAnimate;return r(e(o.x,o.y),n.movementMode,a,i.isClone,s,c,l)}var u;if("DROP_ANIMATING"===n.phase){var d=n.completed;if(d.result.draggableId!==i.draggableId)return null;var p=i.isClone,h=n.dimensions.draggables[i.draggableId],f=d.result,y=f.mode,v=_p(f),g=function(e){return e.combine?e.combine.draggableId:null}(f),m={duration:n.dropDuration,curve:Hl,moveTo:n.newHomeClientOffset,opacity:g?Gl.drop:null,scale:g?ql.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:h,dropping:m,draggingOver:v,combineWith:g,mode:y,forceShouldAnimate:null,snapshot:t(y,p,v,g,m)}}}return null}),i=function(){var e=Bs((function(e,t){return{x:e,y:t}})),t=Bs(Ep),r=Bs((function(e,r,n){return void 0===r&&(r=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:n,snapshot:t(r)}}})),n=function(e){return e?r(ec,e,!0):null},i=function(t,i,o,a){var s=o.displaced.visible[t],c=Boolean(a.inVirtualList&&a.effected[t]),l=Ec(o),u=l&&l.draggableId===t?i:null;if(!s){if(!c)return n(u);if(o.displaced.invisible[t])return null;var d=ic(a.displacedBy.point),p=e(d.x,d.y);return r(p,u,!0)}if(c)return n(u);var h=o.displacedBy.point,f=e(h.x,h.y);return r(f,u,s.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var r=e.completed;return r.result.draggableId===t.draggableId?null:i(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}();return function(e,t){return n(e,t)||i(e,t)||Cp}}),{dropAnimationFinished:zl},null,{context:sd,pure:!0,areStatePropsEqual:Pp})((function(e){var t=(0,w.useRef)(null),r=_s((function(e){t.current=e}),[]),n=_s((function(){return t.current}),[]),i=ap(hd),o=i.contextId,a=i.dragHandleUsageInstructionsId,s=i.registry,c=ap(pp),l=c.type,u=c.droppableId,d=Ps((function(){return{id:e.draggableId,index:e.index,type:l,droppableId:u}}),[e.draggableId,e.index,l,u]),p=e.children,h=e.draggableId,f=e.isEnabled,y=e.shouldRespectForcePress,v=e.canDragInteractiveElements,g=e.isClone,m=e.mapped,b=e.dropAnimationFinished;Sp(),fd(),g||bp(Ps((function(){return{descriptor:d,registry:s,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:y,isEnabled:f}}),[d,s,n,v,y,f]));var S=Ps((function(){return f?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:wp}:null}),[o,a,h,f]),P=_s((function(e){"DRAGGING"===m.type&&m.dropping&&"transform"===e.propertyName&&b()}),[b,m]),_=Ps((function(){var e=mp(m),t="DRAGGING"===m.type&&m.dropping?P:null;return{innerRef:r,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:S}}),[o,S,h,m,P,r]),E=Ps((function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}}),[d.droppableId,d.id,d.index,d.type]);return p(_,m.snapshot,E)}));function Op(e){return ap(pp).isUsingCloneFor!==e.draggableId||e.isClone?w.createElement(kp,e):null}function xp(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return w.createElement(Op,Pa({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}var Ip=function(e,t){return e===t.droppable.type},Ap=function(e,t){return t.draggables[e.draggable.id]};var Mp={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||zs(!1),document.body}},Dp=ms((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=Pa({},e,{shouldAnimatePlaceholder:!1}),r=Bs((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),n=Bs((function(n,i,o,a,s,c){var l=s.descriptor.id;if(s.descriptor.droppableId===n){var u=c?{render:c,dragging:r(s.descriptor)}:null,d={isDraggingOver:o,draggingOverWith:o?l:null,draggingFromThisWith:l,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!i)return t;if(!a)return e;var p={isDraggingOver:o,draggingOverWith:l,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}));return function(r,i){var o=i.droppableId,a=i.type,s=!i.isDropDisabled,c=i.renderClone;if(r.isDragging){var l=r.critical;if(!Ip(a,l))return t;var u=Ap(l,r.dimensions),d=ll(r.impact)===o;return n(o,s,d,d,u,c)}if("DROP_ANIMATING"===r.phase){var p=r.completed;if(!Ip(a,p.critical))return t;var h=Ap(p.critical,r.dimensions);return n(o,s,_p(p.result)===o,ll(p.impact)===o,h,c)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){var f=r.completed;if(!Ip(a,f.critical))return t;var y=ll(f.impact)===o,v=Boolean(f.impact.at&&"COMBINE"===f.impact.at.type),g=f.critical.droppable.id===o;return y?v?e:t:g?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:sd,pure:!0,areStatePropsEqual:Pp})((function(e){var t=(0,w.useContext)(hd);t||zs(!1);var r=t.contextId,n=t.isMovementAllowed,i=(0,w.useRef)(null),o=(0,w.useRef)(null),a=e.children,s=e.droppableId,c=e.type,l=e.mode,u=e.direction,d=e.ignoreContainerClipping,p=e.isDropDisabled,h=e.isCombineEnabled,f=e.snapshot,y=e.useClone,v=e.updateViewportMaxScroll,g=e.getContainerForClone,m=_s((function(){return i.current}),[]),b=_s((function(e){i.current=e}),[]),S=(_s((function(){return o.current}),[]),_s((function(e){o.current=e}),[]));yd();var P=_s((function(){n()&&v({maxScroll:mu()})}),[n,v]);!function(e){var t=(0,w.useRef)(null),r=ap(hd),n=pd("droppable"),i=r.registry,o=r.marshal,a=gd(e),s=Ps((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),c=(0,w.useRef)(s),l=Ps((function(){return Bs((function(e,r){t.current||zs(!1);var n={x:e,y:r};o.updateDroppableScroll(s.id,n)}))}),[s.id,o]),u=_s((function(){var e=t.current;return e&&e.env.closestScrollable?Zd(e.env.closestScrollable):ec}),[]),d=_s((function(){var e=u();l(e.x,e.y)}),[u,l]),p=Ps((function(){return Fs(d)}),[d]),h=_s((function(){var e=t.current,r=sp(e);e&&r||zs(!1),e.scrollOptions.shouldPublishImmediately?d():p()}),[p,d]),f=_s((function(e,n){t.current&&zs(!1);var i=a.current,o=i.getDroppableRef();o||zs(!1);var c=tp(o),l={ref:o,descriptor:s,env:c,scrollOptions:n};t.current=l;var u=rp({ref:o,descriptor:s,env:c,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=c.closestScrollable;return d&&(d.setAttribute(Qu.contextId,r.contextId),d.addEventListener("scroll",h,op(l.scrollOptions))),u}),[r.contextId,s,h,a]),y=_s((function(){var e=t.current,r=sp(e);return e&&r||zs(!1),Zd(r)}),[]),v=_s((function(){var e=t.current;e||zs(!1);var r=sp(e);t.current=null,r&&(p.cancel(),r.removeAttribute(Qu.contextId),r.removeEventListener("scroll",h,op(e.scrollOptions)))}),[h,p]),g=_s((function(e){var r=t.current;r||zs(!1);var n=sp(r);n||zs(!1),n.scrollTop+=e.y,n.scrollLeft+=e.x}),[]),m=Ps((function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:y,dragStopped:v,scroll:g}}),[v,f,y,g]),b=Ps((function(){return{uniqueId:n,descriptor:s,callbacks:m}}),[m,s,n]);Zu((function(){return c.current=b.descriptor,i.droppable.register(b),function(){t.current&&v(),i.droppable.unregister(b)}}),[m,s,v,b,o,i.droppable]),Zu((function(){t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)}),[e.isDropDisabled,o]),Zu((function(){t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,o])}({droppableId:s,type:c,mode:l,direction:u,isDropDisabled:p,isCombineEnabled:h,ignoreContainerClipping:d,getDroppableRef:m});var _=w.createElement(hp,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,n=e.data,i=e.animate;return w.createElement(dp,{placeholder:n,onClose:t,innerRef:S,animate:i,contextId:r,onTransitionEnd:P})})),E=Ps((function(){return{innerRef:b,placeholder:_,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}}),[r,s,_,b]),C=y?y.dragging.draggableId:null,k=Ps((function(){return{droppableId:s,type:c,isUsingCloneFor:C}}),[s,C,c]);return w.createElement(pp.Provider,{value:k},a(E,f),function(){if(!y)return null;var e=y.dragging,t=y.render,r=w.createElement(Op,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(r,n){return t(r,n,e)}));return Ss.createPortal(r,g())}())}));Dp.defaultProps=Mp;const Rp=e=>{let{entries:t,onEdit:r,onRemove:n,onCopyValue:o,canEdit:a,updateEntries:s,searchValue:c,lastUpdated:l}=e;return(0,i.jsx)(Gd,{onDragEnd:e=>{if(!e.destination)return;const r=((e,t,r)=>{const n=Array.from(e),[i]=n.splice(t,1);return n.splice(r,0,i),n})(t,e.source.index,e.destination.index);s(r)},children:(0,i.jsx)(Dp,{droppableId:"droppable",isDropDisabled:!a,children:e=>(0,i.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"auth-list",children:[t.map(((e,t)=>{const s=`${e.account}${e.service}${e.notes}`.toLowerCase();if(!c||s.includes(c))return(0,i.jsx)(xp,{draggableId:`${e.service}-${t}`,index:t,isDragDisabled:!a,children:i=>(0,w.createElement)(ba,{...i.draggableProps,...i.dragHandleProps,innerRef:i.innerRef,key:t,id:t,entry:e,onEdit:r,onRemove:n,onCopyValue:o,canEdit:a,lastUpdated:l})},`${e.service}-${t}`)})),e.placeholder]})})})};Rp.propTypes={entries:n().arrayOf(n().object),onEdit:n().func.isRequired,onRemove:n().func.isRequired,onCopyValue:n().func.isRequired,canEdit:n().bool.isRequired,lastUpdated:n().number.isRequired,updateEntries:n().func.isRequired,searchValue:n().string};const Tp=Rp;var Np,jp=r(5513),Bp=r.n(jp),Fp=r(3456),Lp=r.n(Fp);function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kp.apply(this,arguments)}const Up=function(e){return w.createElement("svg",Kp({xmlns:"http://www.w3.org/2000/svg",width:12,height:10,viewBox:"0 0 300 300",role:"img"},e),Np||(Np=w.createElement("g",{fill:"currentColor"},w.createElement("path",{d:"M159.365 23.736v-10c0-5.523-4.477-10-10-10H10c-5.523 0-10 4.477-10 10v10c0 5.523 4.477 10 10 10h139.365c5.523 0 10-4.477 10-10zM130.586 66.736H10c-5.523 0-10 4.477-10 10v10c0 5.523 4.477 10 10 10h120.586c5.523 0 10-4.477 10-10v-10c0-5.523-4.477-10-10-10zM111.805 129.736H10c-5.523 0-10 4.477-10 10v10c0 5.523 4.477 10 10 10h101.805c5.523 0 10-4.477 10-10v-10c0-5.523-4.477-10-10-10zM93.025 199.736H10c-5.523 0-10 4.477-10 10v10c0 5.523 4.477 10 10 10h83.025c5.522 0 10-4.477 10-10v-10c0-5.523-4.477-10-10-10zM74.244 262.736H10c-5.523 0-10 4.477-10 10v10c0 5.523 4.477 10 10 10h64.244c5.522 0 10-4.477 10-10v-10c0-5.523-4.477-10-10-10zM298.29 216.877l-7.071-7.071a10.001 10.001 0 0 0-14.143 0l-34.393 34.393V18.736c0-5.523-4.477-10-10-10h-10c-5.523 0-10 4.477-10 10v225.462l-34.393-34.393a10.003 10.003 0 0 0-14.142 0l-7.072 7.071c-3.904 3.905-3.904 10.237 0 14.142l63.536 63.536a9.968 9.968 0 0 0 7.071 2.929 9.966 9.966 0 0 0 7.071-2.929l63.536-63.536c3.905-3.905 3.905-10.237 0-14.141z"}))))},Vp=e=>{let{isVisible:t}=e;return(0,i.jsx)("div",{className:"auth-copy-notification "+(t?"visible":"hidden"),children:(0,i.jsx)("div",{className:"sk-panel",children:(0,i.jsx)("div",{className:"sk-font-small sk-bold",children:"Copied value to clipboard."})})})};Vp.propTypes={isVisible:n().bool.isRequired};const Wp=Vp,zp={text:"",entries:[],parseError:!1,editMode:!1,editEntry:null,confirmRemove:!1,confirmReorder:!1,displayCopy:!1,canEdit:!0,searchValue:"",lastUpdated:0};class Hp extends w.Component{constructor(t){super(t),e(this,"addEntry",(e=>{this.setState((t=>{const r=t.entries.concat([e]);return this.saveNote(r),{editMode:!1,editEntry:null,entries:r}}))})),e(this,"editEntry",(e=>{let{id:t,entry:r}=e;this.setState((e=>{const n=Lp()(e.entries,{[t]:{$set:r}});return this.saveNote(n),{editMode:!1,editEntry:null,entries:n}}))})),e(this,"removeEntry",(e=>{this.setState((t=>{const r=Lp()(t.entries,{$splice:[[e,1]]});return this.saveNote(r),{confirmRemove:!1,editEntry:null,entries:r}}))})),e(this,"onAddNew",(()=>{this.state.canEdit&&this.setState({editMode:!0,editEntry:null})})),e(this,"onEdit",(e=>{this.state.canEdit&&this.setState((t=>({editMode:!0,editEntry:{id:e,entry:t.entries[e]}})))})),e(this,"onCancel",(()=>{this.setState({confirmRemove:!1,confirmReorder:!1,editMode:!1,editEntry:null})})),e(this,"onRemove",(e=>{this.state.canEdit&&this.setState((t=>({confirmRemove:!0,editEntry:{id:e,entry:t.entries[e]}})))})),e(this,"onSave",(e=>{let{id:t,entry:r}=e;null!=t?this.editEntry({id:t,entry:r}):this.addEntry(r)})),e(this,"onCopyValue",(()=>{this.setState({displayCopy:!0}),this.clearTooltipTimer&&clearTimeout(this.clearTooltipTimer),this.clearTooltipTimer=setTimeout((()=>{this.setState({displayCopy:!1})}),2e3)})),e(this,"updateEntries",(e=>{this.saveNote(e),this.setState({entries:e})})),e(this,"onReorderEntries",(()=>{this.state.canEdit&&this.setState({confirmReorder:!0})})),e(this,"onSearchChange",(e=>{const t=e.target;this.setState({searchValue:t.value.toLowerCase()})})),e(this,"clearSearchValue",(()=>{this.setState({searchValue:""})})),e(this,"reorderEntries",(()=>{const{entries:e}=this.state,t=e.sort(((e,t)=>{const r=e.service.toLowerCase(),n=t.service.toLowerCase();return r<n?-1:r>n?1:0}));this.saveNote(t),this.setState({entries:t,confirmReorder:!1})})),this.configureEditorKit(),this.state=zp}configureEditorKit(){const e={setEditorRawText:e=>{let t=!1,r=[];if(e)try{r=this.parseNote(e)}catch(e){t=!0,this.setState({parseError:!0})}this.setState({...zp,text:e,parseError:t,entries:r})},generateCustomPreview:e=>{let t=[];try{t=this.parseNote(e)}finally{return{html:`<div><strong>${t.length}</strong> TokenVault Entries </div>`,plain:`${t.length} TokenVault Entries`}}},clearUndoHistory:()=>{},getElementsBySelector:()=>[],onNoteLockToggle:e=>{this.setState({canEdit:!e})},onThemesChange:()=>{this.setState({lastUpdated:Date.now()})},handleRequestForContentHeight:()=>document.body.scrollHeight};this.editorKit=new(Bp())(e,{mode:"json"})}parseNote(e){const t=JSON.parse(e);if(t instanceof Array){if(0===t.length)return[];for(const e of t){if(!("service"in e))throw Error("Service key is missing for an entry.");if(!("secret"in e)&&!("password"in e))throw Error("An entry does not have a secret key or a password.")}return t}return[]}saveNote(e){this.editorKit.onEditorValueChanged(JSON.stringify(e,null,2))}render(){const e=this.state.editEntry||{},{canEdit:t,displayCopy:r,parseError:n,editMode:o,entries:c,confirmRemove:l,confirmReorder:u,searchValue:d,lastUpdated:p}=this.state;return n?(0,i.jsx)("div",{className:"sn-component",children:(0,i.jsx)(s,{})}):(0,i.jsxs)("div",{className:"sn-component",children:[(0,i.jsx)(Wp,{isVisible:r}),!o&&(0,i.jsxs)("div",{id:"header",children:[(0,i.jsxs)("div",{className:`sk-horizontal-group left align-items-center ${!t&&"full-width"}`,children:[(0,i.jsx)("input",{name:"search",className:"sk-input contrast search-bar",placeholder:"Search entries...",value:d,onChange:this.onSearchChange,autoComplete:"off",type:"text"}),d&&(0,i.jsx)("div",{onClick:this.clearSearchValue,className:"sk-button danger",children:(0,i.jsx)("div",{className:"sk-label",children:""})})]}),t&&(0,i.jsx)("div",{className:"sk-horizontal-group right",children:(0,i.jsxs)("div",{className:"sk-button-group stretch",children:[(0,i.jsx)("div",{onClick:this.onReorderEntries,className:"sk-button info",children:(0,i.jsx)(Up,{})}),(0,i.jsx)("div",{onClick:this.onAddNew,className:"sk-button info",children:(0,i.jsx)("div",{className:"sk-label",children:"Add new"})})]})})]}),(0,i.jsxs)("div",{id:"content",children:[o?(0,i.jsx)(ca,{id:e.id,entry:e.entry,onSave:this.onSave,onCancel:this.onCancel}):(0,i.jsx)(Tp,{entries:c,searchValue:d,onEdit:this.onEdit,onRemove:this.onRemove,onCopyValue:this.onCopyValue,canEdit:t,lastUpdated:p,updateEntries:this.updateEntries}),l&&(0,i.jsx)(a,{title:`Remove ${e.entry.service}`,message:"Are you sure you want to remove this entry?",onConfirm:()=>this.removeEntry(e.id),onCancel:this.onCancel}),u&&(0,i.jsx)(a,{title:"Auto-sort entries",message:"Are you sure you want to auto-sort all entries alphabetically based on service name?",onConfirm:this.reorderEntries,onCancel:this.onCancel})]})]})}}Ss.render((0,i.jsx)(Hp,{}),document.body.appendChild(document.createElement("div")))})()})();