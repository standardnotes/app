<html>

<head>
  <meta charset="utf-8">
  <title>Mocha Tests</title>
  <link href="assets/mocha.css" rel="stylesheet" />
  <script src="https://unpkg.com/chai@4.3.6/chai.js"></script>
  <script src="./vendor/chai-as-promised-built.js"></script>
  <script src="https://unpkg.com/regenerator-runtime@0.13.9/runtime.js"></script>
  <script src="https://unpkg.com/mocha@9.2.2/mocha.js"></script>
  <script src="https://unpkg.com/chai-subset@1.6.0/lib/chai-subset.js"></script>
  <script src="https://unpkg.com/sinon@13.0.2/pkg/sinon.js"></script>
  <script src="./vendor/sncrypto-web.js"></script>
  <script src="../dist/snjs.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const syncServerHostName = urlParams.get('sync_server_host_name') ?? 'syncing-server-proxy';
    const bail = urlParams.get('bail') === 'false' ? false : true;
    const skipPaidFeatures = urlParams.get('skip_paid_features') === 'true' ? true : false;

    Object.assign(window, SNCrypto);

    Object.assign(window, SNLibrary);

    SNLog.onLog = (message) => {
      console.log(message);
    };

    SNLog.onError = (error) => {
      console.error(error);
    };

    mocha.setup({
      ui: 'bdd',
      timeout: 5000,
      bail: bail,
    });
    if (skipPaidFeatures) {
      mocha.grep('@paidfeature').invert();
    }
  </script>
  <script type="module" src="memory.test.js"></script>
  <script type="module" src="protocol.test.js"></script>
  <script type="module" src="utils.test.js"></script>
  <script type="module" src="000.test.js"></script>
  <script type="module" src="001.test.js"></script>
  <script type="module" src="002.test.js"></script>
  <script type="module" src="003.test.js"></script>
  <script type="module" src="004.test.js"></script>
  <script type="module" src="username.test.js"></script>
  <script type="module" src="app-group.test.js"></script>
  <script type="module" src="application.test.js"></script>
  <script type="module" src="payload.test.js"></script>
  <script type="module" src="payload_encryption.test.js"></script>
  <script type="module" src="item.test.js"></script>
  <script type="module" src="item_manager.test.js"></script>
  <script type="module" src="features.test.js"></script>
  <script type="module" src="settings.test.js"></script>
  <script type="module" src="mfa_service.test.js"></script>
  <script type="module" src="mutator.test.js"></script>
  <script type="module" src="payload_manager.test.js"></script>
  <script type="module" src="collections.test.js"></script>
  <script type="module" src="note_display_criteria.test.js"></script>
  <script type="module" src="keys.test.js"></script>
  <script type="module" src="key_params.test.js"></script>
  <script type="module" src="key_recovery_service.test.js"></script>
  <script type="module" src="backups.test.js"></script>
  <script type="module" src="upgrading.test.js"></script>
  <script type="module" src="model_tests/importing.test.js"></script>
  <script type="module" src="model_tests/appmodels.test.js"></script>
  <script type="module" src="model_tests/items.test.js"></script>
  <script type="module" src="model_tests/mapping.test.js"></script>
  <script type="module" src="model_tests/notes_smart_tags.test.js"></script>
  <script type="module" src="model_tests/notes_tags.test.js"></script>
  <script type="module" src="model_tests/notes_tags_folders.test.js"></script>
  <script type="module" src="model_tests/performance.test.js"></script>
  <script type="module" src="sync_tests/offline.test.js"></script>
  <script type="module" src="sync_tests/notes_tags.test.js"></script>
  <script type="module" src="sync_tests/online.test.js"></script>
  <script type="module" src="sync_tests/conflicting.test.js"></script>
  <script type="module" src="sync_tests/integrity.test.js"></script>
  <script type="module" src="auth-fringe-cases.test.js"></script>
  <script type="module" src="auth.test.js"></script>
  <script type="module" src="device_auth.test.js"></script>
  <script type="module" src="storage.test.js"></script>
  <script type="module" src="protection.test.js"></script>
  <script type="module" src="singletons.test.js"></script>
  <script type="module" src="migrations/migration.test.js"></script>
  <script type="module" src="migrations/tags-to-folders.test.js"></script>
  <script type="module" src="history.test.js"></script>
  <script type="module" src="actions.test.js"></script>
  <script type="module" src="preferences.test.js"></script>
  <script type="module" src="files.test.js"></script>
  <script type="module" src="session.test.js"></script>
  <script type="module" src="subscriptions.test.js"></script>
  <script type="module" src="recovery.test.js"></script>
  <script type="module">
    mocha.run();
  </script>
</head>

<body>
  <div id="mocha"></div>
</body>

</html>
