!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=74)}([function(e,t,n){e.exports=n(46)},function(e,t){function n(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,c,"next",e)}function c(e){n(o,i,a,s,c,"throw",e)}s(void 0)}))}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=214)}([function(e,t,n){var r=n(23),i=n(159);e.exports=function(e,t){var n=[];if(!e||!e.length)return n;var a=-1,o=[],s=e.length;for(t=r(t,3);++a<s;){var c=e[a];t(c,a,e)&&(n.push(c),o.push(a))}return i(e,o),n}},function(e,t,n){var r=n(86)(n(201));e.exports=r},function(e,t,n){var r=n(95)(n(156));e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t=n(e);return null!=e&&("object"==t||"function"==t)}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(57),a="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,o=i||a||Function("return this")();e.exports=o},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return null!=e&&"object"==n(e)}},function(e,t,n){"use strict";(function(e){function r(){return"undefined"!=typeof window?window:void 0!==e?e:null}function i(){return null!==r()}function a(e,t,n){return e.find((function(e){return e[t]===n}))}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}))}).call(this,n(56))},function(e,t,n){var r=n(76),i=n(85)((function(e,t,n){r(e,t,n)}));e.exports=i},function(e,t,n){(function(e){var n,r,i,a;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window,a=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==o(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=36)}([function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},a=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<i;a++){var o=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=o<<24-(r+a)%4*8}else for(a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){t=t;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var s=i(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new o.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*c,i);if(c){for(var l=0;l<c;l+=a)this._doProcessBlock(r,l);var f=r.splice(0,c);n.sigBytes-=u}return new o.init(f,u)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(i.Hasher=f.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math);return e},"object"===c(t)?e.exports=t=s():(i=[],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){e.lib.Cipher||function(t){var n=e,r=n.lib,i=r.Base,a=r.WordArray,o=r.BufferedBlockAlgorithm,s=n.enc,c=(s.Utf8,s.Base64),u=n.algo.EvpKDF,l=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:y}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),f=(r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),p=r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=f.CBC=function(){var e=p.extend();function t(e,t,n){var r=this._iv;if(r){var i=r;this._iv=void 0}else i=this._prevBlock;for(var a=0;a<n;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,a=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=a}}),e}(),h=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(i);var c=a.create(o,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:h}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else r=n.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=a.create([1398893684,1701076831]).concat(n).concat(t);else r=t;return r.toString(c)},parse:function(e){var t=c.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var r=a.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:r})}},y=r.SerializableCipher=i.extend({cfg:i.extend({format:m}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),a=i.finalize(t),o=i.cfg;return v.create({ciphertext:a,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),g=(n.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=a.random(8));var i=u.create({keySize:t+n}).compute(e,r),o=a.create(i.words.slice(t),4*n);return i.sigBytes=4*t,v.create({key:i,iv:o,salt:r})}},b=r.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:g}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var a=y.encrypt.call(this,e,t,i.key,r);return a.mixIn(i),a},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,y.decrypt.call(this,e,t,i.key,r)}})}()},"object"===c(t)?e.exports=t=s(n(0),n(2)):(i=[n(0),n(2)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n,r,i,a,o,s;return r=(n=(t=e).lib).Base,i=n.WordArray,o=(a=t.algo).MD5,s=a.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),a=i.create(),o=a.words,s=n.keySize,c=n.iterations;o.length<s;){u&&r.update(u);var u=r.update(e).finalize(t);r.reset();for(var l=1;l<c;l++)u=r.finalize(u),r.reset();a.concat(u)}return a.sigBytes=4*s,a}}),t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)},e.EvpKDF},"object"===c(t)?e.exports=t=s(n(0),n(7),n(8)):(i=[n(0),n(7),n(8)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n;return n=(t=e).lib.WordArray,t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],a=0;a<n;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)i.push(r.charAt(o>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<r.length;a++)i[r.charCodeAt(a)]=a}var o=r.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return function(e,t,r){for(var i=[],a=0,o=0;o<t;o++)if(o%4){var s=r[e.charCodeAt(o-1)]<<o%4*2,c=r[e.charCodeAt(o)]>>>6-o%4*2;i[a>>>2]|=(s|c)<<24-a%4*8,a++}return n.create(i,a)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64},"object"===c(t)?e.exports=t=s(n(0)):(i=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,a=r.Hasher,o=n.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=o.MD5=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var a=this._hash.words,o=e[t+0],c=e[t+1],d=e[t+2],h=e[t+3],v=e[t+4],m=e[t+5],y=e[t+6],g=e[t+7],b=e[t+8],k=e[t+9],w=e[t+10],x=e[t+11],S=e[t+12],$=e[t+13],_=e[t+14],M=e[t+15],C=a[0],A=a[1],O=a[2],I=a[3];C=u(C,A,O,I,o,7,s[0]),I=u(I,C,A,O,c,12,s[1]),O=u(O,I,C,A,d,17,s[2]),A=u(A,O,I,C,h,22,s[3]),C=u(C,A,O,I,v,7,s[4]),I=u(I,C,A,O,m,12,s[5]),O=u(O,I,C,A,y,17,s[6]),A=u(A,O,I,C,g,22,s[7]),C=u(C,A,O,I,b,7,s[8]),I=u(I,C,A,O,k,12,s[9]),O=u(O,I,C,A,w,17,s[10]),A=u(A,O,I,C,x,22,s[11]),C=u(C,A,O,I,S,7,s[12]),I=u(I,C,A,O,$,12,s[13]),O=u(O,I,C,A,_,17,s[14]),C=l(C,A=u(A,O,I,C,M,22,s[15]),O,I,c,5,s[16]),I=l(I,C,A,O,y,9,s[17]),O=l(O,I,C,A,x,14,s[18]),A=l(A,O,I,C,o,20,s[19]),C=l(C,A,O,I,m,5,s[20]),I=l(I,C,A,O,w,9,s[21]),O=l(O,I,C,A,M,14,s[22]),A=l(A,O,I,C,v,20,s[23]),C=l(C,A,O,I,k,5,s[24]),I=l(I,C,A,O,_,9,s[25]),O=l(O,I,C,A,h,14,s[26]),A=l(A,O,I,C,b,20,s[27]),C=l(C,A,O,I,$,5,s[28]),I=l(I,C,A,O,d,9,s[29]),O=l(O,I,C,A,g,14,s[30]),C=f(C,A=l(A,O,I,C,S,20,s[31]),O,I,m,4,s[32]),I=f(I,C,A,O,b,11,s[33]),O=f(O,I,C,A,x,16,s[34]),A=f(A,O,I,C,_,23,s[35]),C=f(C,A,O,I,c,4,s[36]),I=f(I,C,A,O,v,11,s[37]),O=f(O,I,C,A,g,16,s[38]),A=f(A,O,I,C,w,23,s[39]),C=f(C,A,O,I,$,4,s[40]),I=f(I,C,A,O,o,11,s[41]),O=f(O,I,C,A,h,16,s[42]),A=f(A,O,I,C,y,23,s[43]),C=f(C,A,O,I,k,4,s[44]),I=f(I,C,A,O,S,11,s[45]),O=f(O,I,C,A,M,16,s[46]),C=p(C,A=f(A,O,I,C,d,23,s[47]),O,I,o,6,s[48]),I=p(I,C,A,O,g,10,s[49]),O=p(O,I,C,A,_,15,s[50]),A=p(A,O,I,C,m,21,s[51]),C=p(C,A,O,I,S,6,s[52]),I=p(I,C,A,O,h,10,s[53]),O=p(O,I,C,A,w,15,s[54]),A=p(A,O,I,C,c,21,s[55]),C=p(C,A,O,I,b,6,s[56]),I=p(I,C,A,O,M,10,s[57]),O=p(O,I,C,A,y,15,s[58]),A=p(A,O,I,C,$,21,s[59]),C=p(C,A,O,I,v,6,s[60]),I=p(I,C,A,O,x,10,s[61]),O=p(O,I,C,A,d,15,s[62]),A=p(A,O,I,C,k,21,s[63]),a[0]=a[0]+C|0,a[1]=a[1]+A|0,a[2]=a[2]+O|0,a[3]=a[3]+I|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var a=t.floor(r/4294967296),o=r;n[15+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+i+o;return(s<<a|s>>>32-a)+t}function l(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+i+o;return(s<<a|s>>>32-a)+t}function f(e,t,n,r,i,a,o){var s=e+(t^n^r)+i+o;return(s<<a|s>>>32-a)+t}function p(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+i+o;return(s<<a|s>>>32-a)+t}n.MD5=a._createHelper(c),n.HmacMD5=a._createHmacHelper(c)}(Math),e.MD5},"object"===c(t)?e.exports=t=s(n(0)):(i=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){"use strict";(function(e){function r(){return"undefined"!=typeof window?window:void 0!==e?e:null}function i(){return!("undefined"!=typeof document&&document.documentMode||/Edge/.test(navigator.userAgent))&&r().crypto&&r().crypto.subtle}function a(){return r().crypto?r().crypto.subtle:null}function o(){var e=r(),t=e.crypto||e.msCrypto;if(t){var n=new Uint32Array(4);t.getRandomValues(n);var i=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){i++;var t=n[i>>3]>>i%8*4&15;return("x"==e?t:3&t|8).toString(16)}))}var a=(new Date).getTime();return e.performance&&"function"==typeof e.performance.now&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==e?t:3&t|8).toString(16)}))}n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}))}).call(this,n(35))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n,r,i,a;return n=(t=e).lib,r=n.Base,i=n.WordArray,(a=t.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}}),e},"object"===c(t)?e.exports=t=s(n(0)):(i=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n,r,i,a,o,s;return n=(t=e).lib,r=n.WordArray,i=n.Hasher,a=t.algo,o=[],s=a.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],s=n[3],c=n[4],u=0;u<80;u++){if(u<16)o[u]=0|e[t+u];else{var l=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=l<<1|l>>>31}var f=(r<<5|r>>>27)+c+o[u];f+=u<20?1518500249+(i&a|~i&s):u<40?1859775393+(i^a^s):u<60?(i&a|i&s|a&s)-1894007588:(i^a^s)-899497514,c=s,s=a,a=i<<30|i>>>2,i=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=i._createHelper(s),t.HmacSHA1=i._createHmacHelper(s),e.SHA1},"object"===c(t)?e.exports=t=s(n(0)):(i=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n,r;n=(t=e).lib.Base,r=t.enc.Utf8,t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),o=this._iKey=t.clone(),s=a.words,c=o.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;a.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})},"object"===c(t)?e.exports=t=s(n(0)):(i=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,a=r.Hasher,o=n.algo,s=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(s[i]=n(t.pow(r,.5))),c[i]=n(t.pow(r,1/3)),i++),r++}();var u=[],l=o.SHA256=a.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],f=n[6],p=n[7],d=0;d<64;d++){if(d<16)u[d]=0|e[t+d];else{var h=u[d-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=u[d-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[d]=v+u[d-7]+y+u[d-16]}var g=r&i^r&a^i&a,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),k=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&f)+c[d]+u[d];p=f,f=l,l=s,s=o+k|0,o=a,a=i,i=r,r=k+(b+g)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+p|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=a._createHelper(l),n.HmacSHA256=a._createHmacHelper(l)}(Math),e.SHA256},"object"===c(t)?e.exports=t=s(n(0)):(i=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(){var t=e,n=t.lib.Hasher,r=t.x64,i=r.Word,a=r.WordArray,o=t.algo;function s(){return i.create.apply(i,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=s()}();var l=o.SHA512=n.extend({_doReset:function(){this._hash=new a.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],f=n[6],p=n[7],d=r.high,h=r.low,v=i.high,m=i.low,y=a.high,g=a.low,b=o.high,k=o.low,w=s.high,x=s.low,S=l.high,$=l.low,_=f.high,M=f.low,C=p.high,A=p.low,O=d,I=h,E=v,D=m,R=y,P=g,T=b,j=k,F=w,N=x,L=S,U=$,B=_,H=M,z=C,V=A,W=0;W<80;W++){var K=u[W];if(W<16)var q=K.high=0|e[t+2*W],J=K.low=0|e[t+2*W+1];else{var G=u[W-15],Y=G.high,Z=G.low,X=(Y>>>1|Z<<31)^(Y>>>8|Z<<24)^Y>>>7,Q=(Z>>>1|Y<<31)^(Z>>>8|Y<<24)^(Z>>>7|Y<<25),ee=u[W-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ae=u[W-7],oe=ae.high,se=ae.low,ce=u[W-16],ue=ce.high,le=ce.low;q=(q=(q=X+oe+((J=Q+se)>>>0<Q>>>0?1:0))+re+((J+=ie)>>>0<ie>>>0?1:0))+ue+((J+=le)>>>0<le>>>0?1:0),K.high=q,K.low=J}var fe,pe=F&L^~F&B,de=N&U^~N&H,he=O&E^O&R^E&R,ve=I&D^I&P^D&P,me=(O>>>28|I<<4)^(O<<30|I>>>2)^(O<<25|I>>>7),ye=(I>>>28|O<<4)^(I<<30|O>>>2)^(I<<25|O>>>7),ge=(F>>>14|N<<18)^(F>>>18|N<<14)^(F<<23|N>>>9),be=(N>>>14|F<<18)^(N>>>18|F<<14)^(N<<23|F>>>9),ke=c[W],we=ke.high,xe=ke.low,Se=z+ge+((fe=V+be)>>>0<V>>>0?1:0),$e=ye+ve;z=B,V=H,B=L,H=U,L=F,U=N,F=T+(Se=(Se=(Se=Se+pe+((fe+=de)>>>0<de>>>0?1:0))+we+((fe+=xe)>>>0<xe>>>0?1:0))+q+((fe+=J)>>>0<J>>>0?1:0))+((N=j+fe|0)>>>0<j>>>0?1:0)|0,T=R,j=P,R=E,P=D,E=O,D=I,O=Se+(me+he+($e>>>0<ye>>>0?1:0))+((I=fe+$e|0)>>>0<fe>>>0?1:0)|0}h=r.low=h+I,r.high=d+O+(h>>>0<I>>>0?1:0),m=i.low=m+D,i.high=v+E+(m>>>0<D>>>0?1:0),g=a.low=g+P,a.high=y+R+(g>>>0<P>>>0?1:0),k=o.low=k+j,o.high=b+T+(k>>>0<j>>>0?1:0),x=s.low=x+N,s.high=w+F+(x>>>0<N>>>0?1:0),$=l.low=$+U,l.high=S+L+($>>>0<U>>>0?1:0),M=f.low=M+H,f.high=_+B+(M>>>0<H>>>0?1:0),A=p.low=A+V,p.high=C+z+(A>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(l),t.HmacSHA512=n._createHmacHelper(l)}(),e.SHA512},"object"===c(t)?e.exports=t=s(n(0),n(6)):(i=[n(0),n(6)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return e},"object"===c(t)?e.exports=t=s(n(0),n(6),n(12),n(13),n(3),n(4),n(7),n(9),n(14),n(10),n(15),n(16),n(17),n(8),n(18),n(2),n(1),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),n(33),n(34)):(i=[n(0),n(6),n(12),n(13),n(3),n(4),n(7),n(9),n(14),n(10),n(15),n(16),n(17),n(8),n(18),n(2),n(1),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),n(33),n(34)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],i=0;i<t;i++)r[i>>>2]|=e[i]<<24-i%4*8;n.call(this,r,t)}else n.apply(this,arguments)}).prototype=t}}(),e.lib.WordArray},"object"===c(t)?e.exports=t=s(n(0)):(i=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(){var t=e,n=t.lib.WordArray,r=t.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var a=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return n.create(r,2*t)}},r.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a+=2){var o=i(t[a>>>2]>>>16-a%4*8&65535);r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,r=[],a=0;a<t;a++)r[a>>>1]|=i(e.charCodeAt(a)<<16-a%2*16);return n.create(r,2*t)}}}(),e.enc.Utf16},"object"===c(t)?e.exports=t=s(n(0)):(i=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n,r,i,a;return n=(t=e).lib.WordArray,r=t.algo,i=r.SHA256,a=r.SHA224=i.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=i._createHelper(a),t.HmacSHA224=i._createHmacHelper(a),e.SHA224},"object"===c(t)?e.exports=t=s(n(0),n(9)):(i=[n(0),n(9)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n,r,i,a,o,s;return n=(t=e).x64,r=n.Word,i=n.WordArray,a=t.algo,o=a.SHA512,s=a.SHA384=o.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=o._createHelper(s),t.HmacSHA384=o._createHmacHelper(s),e.SHA384},"object"===c(t)?e.exports=t=s(n(0),n(6),n(10)):(i=[n(0),n(6),n(10)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,a=r.Hasher,o=n.x64.Word,s=n.algo,c=[],u=[],l=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,a=0;a<24;a++){for(var s=0,f=0,p=0;p<7;p++){if(1&i){var d=(1<<p)-1;d<32?f^=1<<d:s^=1<<d-32}128&i?i=i<<1^113:i<<=1}l[a]=o.create(s,f)}}();var f=[];!function(){for(var e=0;e<25;e++)f[e]=o.create()}();var p=s.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var a=e[t+2*i],o=e[t+2*i+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(A=n[i]).high^=o,A.low^=a}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var d=0,h=0,v=0;v<5;v++)d^=(A=n[p+5*v]).high,h^=A.low;var m=f[p];m.high=d,m.low=h}for(p=0;p<5;p++){var y=f[(p+4)%5],g=f[(p+1)%5],b=g.high,k=g.low;for(d=y.high^(b<<1|k>>>31),h=y.low^(k<<1|b>>>31),v=0;v<5;v++)(A=n[p+5*v]).high^=d,A.low^=h}for(var w=1;w<25;w++){var x=(A=n[w]).high,S=A.low,$=c[w];$<32?(d=x<<$|S>>>32-$,h=S<<$|x>>>32-$):(d=S<<$-32|x>>>64-$,h=x<<$-32|S>>>64-$);var _=f[u[w]];_.high=d,_.low=h}var M=f[0],C=n[0];for(M.high=C.high,M.low=C.low,p=0;p<5;p++)for(v=0;v<5;v++){var A=n[w=p+5*v],O=f[w],I=f[(p+1)%5+5*v],E=f[(p+2)%5+5*v];A.high=O.high^~I.high&E.high,A.low=O.low^~I.low&E.low}A=n[0];var D=l[s];A.high^=D.high,A.low^=D.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(this._nDataBytes,8*e.sigBytes),a=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/a)*a>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var o=this._state,s=this.cfg.outputLength/8,c=s/8,u=[],l=0;l<c;l++){var f=o[l],p=f.high,d=f.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u.push(d),u.push(p)}return new i.init(u,s)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=a._createHelper(p),n.HmacSHA3=a._createHmacHelper(p)}(Math),e.SHA3},"object"===c(t)?e.exports=t=s(n(0),n(6)):(i=[n(0),n(6)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){
/** @preserve
        (c) 2012 by CÃ©dric Mesnil. All rights reserved.
        	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
        	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
            - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
        	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
        */
return function(t){var n=e,r=n.lib,i=r.WordArray,a=r.Hasher,o=n.algo,s=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=i.create([0,1518500249,1859775393,2400959708,2840853838]),p=i.create([1352829926,1548603684,1836072691,2053994217,0]),d=o.RIPEMD160=a.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var a,o,d,k,w,x,S,$,_,M,C,A=this._hash.words,O=f.words,I=p.words,E=s.words,D=c.words,R=u.words,P=l.words;for(x=a=A[0],S=o=A[1],$=d=A[2],_=k=A[3],M=w=A[4],n=0;n<80;n+=1)C=a+e[t+E[n]]|0,C+=n<16?h(o,d,k)+O[0]:n<32?v(o,d,k)+O[1]:n<48?m(o,d,k)+O[2]:n<64?y(o,d,k)+O[3]:g(o,d,k)+O[4],C=(C=b(C|=0,R[n]))+w|0,a=w,w=k,k=b(d,10),d=o,o=C,C=x+e[t+D[n]]|0,C+=n<16?g(S,$,_)+I[0]:n<32?y(S,$,_)+I[1]:n<48?m(S,$,_)+I[2]:n<64?v(S,$,_)+I[3]:h(S,$,_)+I[4],C=(C=b(C|=0,P[n]))+M|0,x=M,M=_,_=b($,10),$=S,S=C;C=A[1]+d+_|0,A[1]=A[2]+k+M|0,A[2]=A[3]+w+x|0,A[3]=A[4]+a+S|0,A[4]=A[0]+o+$|0,A[0]=C},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,a=i.words,o=0;o<5;o++){var s=a[o];a[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,n){return e^t^n}function v(e,t,n){return e&t|~e&n}function m(e,t,n){return(e|~t)^n}function y(e,t,n){return e&n|t&~n}function g(e,t,n){return e^(t|~n)}function b(e,t){return e<<t|e>>>32-t}n.RIPEMD160=a._createHelper(d),n.HmacRIPEMD160=a._createHmacHelper(d)}(Math),e.RIPEMD160},"object"===c(t)?e.exports=t=s(n(0)):(i=[n(0)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n,r,i,a,o,s,c;return r=(n=(t=e).lib).Base,i=n.WordArray,o=(a=t.algo).SHA1,s=a.HMAC,c=a.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=s.create(n.hasher,e),a=i.create(),o=i.create([1]),c=a.words,u=o.words,l=n.keySize,f=n.iterations;c.length<l;){var p=r.update(t).finalize(o);r.reset();for(var d=p.words,h=d.length,v=p,m=1;m<f;m++){v=r.finalize(v),r.reset();for(var y=v.words,g=0;g<h;g++)d[g]^=y[g]}a.concat(p),u[0]++}return a.sigBytes=4*l,a}}),t.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)},e.PBKDF2},"object"===c(t)?e.exports=t=s(n(0),n(7),n(8)):(i=[n(0),n(7),n(8)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,r){var i=this._iv;if(i){var a=i.slice(0);this._iv=void 0}else a=this._prevBlock;r.encryptBlock(a,0);for(var o=0;o<n;o++)e[t+o]^=a[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i,r),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,a=e.slice(t,t+i);n.call(this,e,t,i,r),this._prevBlock=a}}),t}(),e.mode.CFB},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n;return e.mode.CTR=(n=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0);var o=a.slice(0);n.encryptBlock(o,0),a[r-1]=a[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=o[s]}}),t.Decryptor=n,t),e.mode.CTR},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){
/** @preserve
         * Counter block mode compatible with  Dr Brian Gladman fileenc.c
         * derived from CryptoJS.mode.CTR
         * Jan Hruby jhruby.web@gmail.com
         */
return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0),function(e){0===(e[0]=n(e[0]))&&(e[1]=n(e[1]))}(o);var s=o.slice(0);r.encryptBlock(s,0);for(var c=0;c<i;c++)e[t+c]^=s[c]}});return t.Decryptor=r,t}(),e.mode.CTRGladman},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n;return e.mode.OFB=(n=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,a=this._keystream;i&&(a=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(a,0);for(var o=0;o<r;o++)e[t+o]^=a[o]}}),t.Decryptor=n,t),e.mode.OFB},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t;return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,a=n+i-1;e.clamp(),e.words[a>>>2]|=i<<24-a%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return e.pad.Iso10126={pad:function(t,n){var r=4*n,i=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},e.pad.ZeroPadding},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){var t,n,r;return n=(t=e).lib.CipherParams,r=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}},e.format.Hex},"object"===c(t)?e.exports=t=s(n(0),n(1)):(i=[n(0),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(){var t=e,n=t.lib.BlockCipher,r=t.algo,i=[],a=[],o=[],s=[],c=[],u=[],l=[],f=[],p=[],d=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var h=r^r<<1^r<<2^r<<3^r<<4;h=h>>>8^255&h^99,i[n]=h,a[h]=n;var v=e[n],m=e[v],y=e[m],g=257*e[h]^16843008*h;o[n]=g<<24|g>>>8,s[n]=g<<16|g>>>16,c[n]=g<<8|g>>>24,u[n]=g,g=16843009*y^65537*m^257*v^16843008*n,l[h]=g<<24|g>>>8,f[h]=g<<16|g>>>16,p[h]=g<<8|g>>>24,d[h]=g,n?(n=v^e[e[e[y^v]]],r^=e[e[r]]):n=r=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],v=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),a=this._keySchedule=[],o=0;o<r;o++)if(o<n)a[o]=t[o];else{var s=a[o-1];o%n?n>6&&o%n==4&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=h[o/n|0]<<24),a[o]=a[o-n]^s}for(var c=this._invKeySchedule=[],u=0;u<r;u++)o=r-u,s=u%4?a[o]:a[o-4],c[u]=u<4||o<=4?s:l[i[s>>>24]]^f[i[s>>>16&255]]^p[i[s>>>8&255]]^d[i[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,c,u,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,p,d,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,a,o,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],p=e[t+3]^n[3],d=4,h=1;h<c;h++){var v=r[u>>>24]^i[l>>>16&255]^a[f>>>8&255]^o[255&p]^n[d++],m=r[l>>>24]^i[f>>>16&255]^a[p>>>8&255]^o[255&u]^n[d++],y=r[f>>>24]^i[p>>>16&255]^a[u>>>8&255]^o[255&l]^n[d++],g=r[p>>>24]^i[u>>>16&255]^a[l>>>8&255]^o[255&f]^n[d++];u=v,l=m,f=y,p=g}v=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&p])^n[d++],m=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[p>>>8&255]<<8|s[255&u])^n[d++],y=(s[f>>>24]<<24|s[p>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[d++],g=(s[p>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[d++],e[t]=v,e[t+1]=m,e[t+2]=y,e[t+3]=g},keySize:8});t.AES=n._createHelper(v)}(),e.AES},"object"===c(t)?e.exports=t=s(n(0),n(3),n(4),n(2),n(1)):(i=[n(0),n(3),n(4),n(2),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(){var t=e,n=t.lib,r=n.WordArray,i=n.BlockCipher,a=t.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=a.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=o[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],a=0;a<16;a++){var u=i[a]=[],l=c[a];for(n=0;n<24;n++)u[n/6|0]|=t[(s[n]-1+l)%28]<<31-n%6,u[4+(n/6|0)]|=t[28+(s[n+24]-1+l)%28]<<31-n%6;for(u[0]=u[0]<<1|u[0]>>>31,n=1;n<7;n++)u[n]=u[n]>>>4*(n-1)+3;u[7]=u[7]<<5|u[7]>>>27}var f=this._invSubKeys=[];for(n=0;n<16;n++)f[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],p.call(this,4,252645135),p.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),p.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],a=this._lBlock,o=this._rBlock,s=0,c=0;c<8;c++)s|=u[c][((o^i[c])&l[c])>>>0];this._lBlock=o,this._rBlock=a^s}var f=this._lBlock;this._lBlock=this._rBlock,this._rBlock=f,p.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function d(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=i._createHelper(f);var h=a.TripleDES=i.extend({_doReset:function(){var e=this._key.words;this._des1=f.createEncryptor(r.create(e.slice(0,2))),this._des2=f.createEncryptor(r.create(e.slice(2,4))),this._des3=f.createEncryptor(r.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(h)}(),e.TripleDES},"object"===c(t)?e.exports=t=s(n(0),n(3),n(4),n(2),n(1)):(i=[n(0),n(3),n(4),n(2),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(){var t=e,n=t.lib.StreamCipher,r=t.algo,i=r.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var a=0;i<256;i++){var o=i%n,s=t[o>>>2]>>>24-o%4*8&255;a=(a+r[i]+s)%256;var c=r[i];r[i]=r[a],r[a]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[n],e[n]=a,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}t.RC4=n._createHelper(i);var o=r.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});t.RC4Drop=n._createHelper(o)}(),e.RC4},"object"===c(t)?e.exports=t=s(n(0),n(3),n(4),n(2),n(1)):(i=[n(0),n(3),n(4),n(2),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(){var t=e,n=t.lib.StreamCipher,r=t.algo,i=[],a=[],o=[],s=r.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var a=t.words,o=a[0],s=a[1],u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,p=l<<16|65535&u;for(i[0]^=u,i[1]^=f,i[2]^=l,i[3]^=p,i[4]^=u,i[5]^=f,i[6]^=l,i[7]^=p,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,c=((i*i>>>17)+i*s>>>15)+s*s,u=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=c^u}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.Rabbit=n._createHelper(s)}(),e.Rabbit},"object"===c(t)?e.exports=t=s(n(0),n(3),n(4),n(2),n(1)):(i=[n(0),n(3),n(4),n(2),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t,n){var r,i,a,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}s=function(e){return function(){var t=e,n=t.lib.StreamCipher,r=t.algo,i=[],a=[],o=[],s=r.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var a=t.words,o=a[0],s=a[1],u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=u>>>16|4294901760&l,p=l<<16|65535&u;for(r[0]^=u,r[1]^=f,r[2]^=l,r[3]^=p,r[4]^=u,r[5]^=f,r[6]^=l,r[7]^=p,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,c=((i*i>>>17)+i*s>>>15)+s*s,u=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=c^u}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.RabbitLegacy=n._createHelper(s)}(),e.RabbitLegacy},"object"===c(t)?e.exports=t=s(n(0),n(3),n(4),n(2),n(1)):(i=[n(0),n(3),n(4),n(2),n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,i):r)||(e.exports=a))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(11),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DefaultPBKDF2Length=768}var t;return(t=[{key:"generateUUIDSync",value:function(){return Object(r.a)()}},{key:"generateUUID",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.a)());case 1:case"end":return e.stop()}}))}},{key:"timingSafeEqual",value:function(e,t){var n=String(e),r=String(t),i=n.length,a=0;i!==r.length&&(r=n,a=1);for(var o=0;o<i;o++)a|=n.charCodeAt(o)^r.charCodeAt(o);return 0===a}},{key:"generateRandomKey",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.lib.WordArray.random(e/8).toString());case 1:case"end":return t.stop()}}))}},{key:"generateItemEncryptionKey",value:function(){var e,t,n,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=512,t=1,i.next=3,regeneratorRuntime.awrap(this.generateRandomKey(e));case 3:return n=i.sent,i.next=6,regeneratorRuntime.awrap(this.generateRandomKey(e));case 6:return r=i.sent,i.abrupt("return",this.pbkdf2(r,n,t,e));case 8:case"end":return i.stop()}}),null,this)}},{key:"firstHalfOfKey",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.substring(0,e.length/2));case 1:case"end":return t.stop()}}))}},{key:"secondHalfOfKey",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.substring(e.length/2,e.length));case 1:case"end":return t.stop()}}))}},{key:"base64",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r.b)().btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))));case 1:case"end":return t.stop()}}))}},{key:"base64Decode",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r.b)().atob(e));case 1:case"end":return t.stop()}}))}},{key:"sha256",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.SHA256(e).toString());case 1:case"end":return t.stop()}}))}},{key:"hmac256",value:function(e,t){var n,r,a;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=i.enc.Hex.parse(t),r=i.enc.Utf8.parse(e),a=i.HmacSHA256(r,n).toString(),o.abrupt("return",a);case 4:case"end":return o.stop()}}))}},{key:"generateSymmetricKeyPair",value:function(){var e,t,n,r,i,a,o,s,c,u,l=arguments;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t=e.password,n=e.pw_salt,r=e.pw_cost,f.next=3,regeneratorRuntime.awrap(this.pbkdf2(t,n,r,this.DefaultPBKDF2Length));case 3:return i=f.sent,a=i.length,o=a/3,s=i.slice(0,o),c=i.slice(o,2*o),u=i.slice(2*o,3*o),f.abrupt("return",[s,c,u]);case 10:case"end":return f.stop()}}),null,this)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=Object(r.c)(),f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,c(t).apply(this,arguments))}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),(n=[{key:"pbkdf2",value:function(e,t,n,r){var i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.webCryptoImportKey(e,"PBKDF2",["deriveBits"]));case 2:if(i=a.sent){a.next=6;break}return console.log("Key is null, unable to continue"),a.abrupt("return",null);case 6:return a.abrupt("return",this.webCryptoDeriveBits(i,t,n,r));case 7:case"end":return a.stop()}}),null,this)}},{key:"generateRandomKey",value:function(e){var t=this;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",l.generateKey({name:"AES-CBC",length:e},!0,["encrypt","decrypt"]).then((function(e){return l.exportKey("raw",e).then((function(e){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t.arrayBufferToHexString(new Uint8Array(e)));case 2:return n=r.sent,r.abrupt("return",n);case 4:case"end":return r.stop()}}))})).catch((function(e){console.error("Error exporting key",e)}))})).catch((function(e){console.error("Error generating key",e)})));case 2:case"end":return n.stop()}}))}},{key:"generateItemEncryptionKey",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([this.generateRandomKey(256),this.generateRandomKey(256)]).then((function(e){return e.join("")})));case 2:case"end":return e.stop()}}),null,this)}},{key:"aes256CbcDecrypt",value:function(e,t,n){var r,i,a,o=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n||(n=new ArrayBuffer(16)),r={name:"AES-CBC",iv:n},s.next=4,regeneratorRuntime.awrap(this.webCryptoImportKey(t,r.name,["decrypt"]));case 4:return i=s.sent,s.next=7,regeneratorRuntime.awrap(this.base64ToArrayBuffer(e));case 7:return a=s.sent,s.abrupt("return",crypto.subtle.decrypt(r,i,a).then((function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(o.arrayBufferToString(e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}))})).catch((function(e){console.error("Error decrypting:",e)})));case 9:case"end":return s.stop()}}),null,this)}},{key:"aes256CbcEncrypt",value:function(e,t,n){var r,i,a,o,s;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n||(n=new ArrayBuffer(16)),r={name:"AES-CBC",iv:n},c.next=4,regeneratorRuntime.awrap(this.webCryptoImportKey(t,r.name,["encrypt"]));case 4:return i=c.sent,c.next=7,regeneratorRuntime.awrap(this.stringToArrayBuffer(e));case 7:return a=c.sent,c.next=10,regeneratorRuntime.awrap(crypto.subtle.encrypt(r,i,a));case 10:return o=c.sent,c.next=13,regeneratorRuntime.awrap(this.arrayBufferToBase64(o));case 13:return s=c.sent,c.abrupt("return",s);case 15:case"end":return c.stop()}}),null,this)}},{key:"hmac256",value:function(e,t){var n,r,i,a=this;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.hexStringToArrayBuffer(t));case 2:return n=o.sent,o.next=5,regeneratorRuntime.awrap(this.webCryptoImportKey(n,"HMAC",["sign"],{name:"SHA-256"}));case 5:return r=o.sent,o.next=8,regeneratorRuntime.awrap(this.stringToArrayBuffer(e));case 8:return i=o.sent,o.abrupt("return",crypto.subtle.sign({name:"HMAC"},r,i).then((function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(a.arrayBufferToHexString(e));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}))})).catch((function(e){console.error("Error computing hmac",e)})));case 10:case"end":return o.stop()}}),null,this)}},{key:"webCryptoImportKey",value:function(e,t,n,r){var i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:if("string"!=typeof e){a.next=6;break}return a.next=3,regeneratorRuntime.awrap(this.stringToArrayBuffer(e));case 3:a.t0=a.sent,a.next=7;break;case 6:a.t0=e;case 7:return i=a.t0,a.abrupt("return",l.importKey("raw",i,{name:t,hash:r},!1,n).then((function(e){return e})).catch((function(e){return console.error(e),null})));case 9:case"end":return a.stop()}}),null,this)}},{key:"webCryptoDeriveBits",value:function(e,t,n,r){var i,a=this;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.stringToArrayBuffer(t));case 2:return o.t0=o.sent,o.t1=n,o.t2={name:"SHA-512"},i={name:"PBKDF2",salt:o.t0,iterations:o.t1,hash:o.t2},o.abrupt("return",l.deriveBits(i,e,r).then((function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(a.arrayBufferToHexString(new Uint8Array(e)));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}))})).catch((function(e){return console.error(e),null})));case 7:case"end":return o.stop()}}),null,this)}},{key:"stringToArrayBuffer",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Blob([e]),i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsArrayBuffer(r)})));case 1:case"end":return t.stop()}}))}},{key:"arrayBufferToString",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Blob([e]),i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsText(r)})));case 1:case"end":return t.stop()}}))}},{key:"arrayBufferToHexString",value:function(e){var t,n,r,i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:for(t=new Uint8Array(e),n="",i=0;i<t.byteLength;i++)(r=t[i].toString(16)).length<2&&(r="0"+r),n+=r;return a.abrupt("return",n);case 4:case"end":return a.stop()}}))}},{key:"hexStringToArrayBuffer",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:for(t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return r.abrupt("return",new Uint8Array(t));case 2:case"end":return r.stop()}}))}},{key:"base64ToArrayBuffer",value:function(e){var t,n,r,i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.base64Decode(e));case 2:for(t=a.sent,n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return a.abrupt("return",r.buffer);case 7:case"end":return a.stop()}}),null,this)}},{key:"arrayBufferToBase64",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new Blob([e],{type:"application/octet-binary"}),i=new FileReader;i.onload=function(e){var n=e.target.result;t(n.substr(n.indexOf(",")+1))},i.readAsDataURL(r)})));case 1:case"end":return t.stop()}}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),t}(a);function p(e){return(p="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=n(11),m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,d(t).apply(this,arguments))}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),(n=[{key:"pbkdf2",value:function(e,t,n,r){var i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return i={keySize:r/32,hasher:v.algo.SHA512,iterations:n},a.abrupt("return",v.PBKDF2(e,t,i).toString());case 2:case"end":return a.stop()}}))}},{key:"hexStringToArrayBuffer",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v.enc.Hex.parse(e));case 1:case"end":return t.stop()}}))}},{key:"aes256CbcDecrypt",value:function(e,t,n){var r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=v.AES.decrypt(e,t,{iv:n,mode:v.mode.CBC,padding:v.pad.Pkcs7}),i.abrupt("return",r.toString(v.enc.Utf8));case 2:case"end":return i.stop()}}))}},{key:"aes256CbcEncrypt",value:function(e,t,n){var r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=v.AES.encrypt(e,t,{iv:n,mode:v.mode.CBC,padding:v.pad.Pkcs7}),i.abrupt("return",r.toString());case 2:case"end":return i.stop()}}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),t}(a);function y(e){return(y="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,g(t).apply(this,arguments))}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),(n=[{key:"setNativeModules",value:function(e){var t=e.aes,n=e.base64;this.Aes=t,this.base64=n}},{key:"generateUUID",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.Aes.randomUuid().then((function(e){return e.toLowerCase()})));case 1:case"end":return e.stop()}}),null,this)}},{key:"pbkdf2",value:function(e,t,n,r){return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.Aes.pbkdf2(e,t,n,r).then((function(e){return e})));case 1:case"end":return i.stop()}}),null,this)}},{key:"generateRandomKey",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.Aes.randomKey(e/8));case 1:case"end":return t.stop()}}),null,this)}},{key:"generateRandomEncryptionKey",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.generateRandomKey(512));case 1:case"end":return e.stop()}}),null,this)}},{key:"base64",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.base64.encode(e));case 1:case"end":return t.stop()}}),null,this)}},{key:"base64Decode",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.base64.decode(e));case 1:case"end":return t.stop()}}),null,this)}},{key:"sha256",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.Aes.sha256(e));case 1:case"end":return t.stop()}}),null,this)}},{key:"hmac256",value:function(e,t){return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.Aes.hmac256(e,t));case 1:case"end":return n.stop()}}),null,this)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),t}(a);n.d(t,"SNAbstractCrypto",(function(){return a})),n.d(t,"SNWebCrypto",(function(){return f})),n.d(t,"SNCryptoJS",(function(){return m})),n.d(t,"SNReactNativeCrypto",(function(){return k})),n.d(t,"isWebCryptoAvailable",(function(){return r.d}))}])},"object"==o(t)&&"object"==o(e)?e.exports=a():(r=[],void 0===(i="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(22)(e))},function(e,t,n){var r=n(38),i=n(44);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){var r=n(108),i=n(113);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(14),i=n(109),a=n(110),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},function(e,t,n){var r=n(67),i=n(138),a=n(10);e.exports=function(e){return a(e)?r(e):i(e)}},function(e,t,n){var r=n(5).Symbol;e.exports=r},function(e,t,n){var r=n(3),i=n(47),a=n(146),o=n(149);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(o(e))}},function(e,t,n){var r=n(34);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=n(53),i=n(49);e.exports=function(e,t,n,a){var o=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=a?a(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),o?i(n,u,l):r(n,u,l)}return n}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=n(e);return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){var r=n(206);e.exports=function(e){return e&&e.length?r(e):[]}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(96),a=n(144),o=n(48),s=n(3),c=n(153);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==r(e)?s(e)?a(e[0],e[1]):i(e):c(e)}},function(e,t,n){var r=n(25),i=n(103),a=n(104),o=n(105),s=n(106),c=n(107);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=s,u.prototype.set=c,e.exports=u},function(e,t,n){var r=n(98),i=n(99),a=n(100),o=n(101),s=n(102);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=o,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(18);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(11)(Object,"create");e.exports=r},function(e,t,n){var r=n(122);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(135),i=n(6),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,t,n){(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(5),a=n(136),o="object"==r(t)&&t&&!t.nodeType&&t,s=o&&"object"==r(e)&&e&&!e.nodeType&&e,c=s&&s.exports===o?i.Buffer:void 0,u=(c?c.isBuffer:void 0)||a;e.exports=u}).call(this,n(22)(e))},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){var r=n(140),i=n(37),a=n(141),o=n(69),s=n(142),c=n(12),u=n(58),l=u(r),f=u(i),p=u(a),d=u(o),h=u(s),v=c;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||a&&"[object Promise]"!=v(a.resolve())||o&&"[object Set]"!=v(new o)||s&&"[object WeakMap]"!=v(new s))&&(v=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case d:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,n){var r=n(15),i=n(16);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(12),a=n(6);e.exports=function(e){return"symbol"==r(e)||a(e)&&"[object Symbol]"==i(e)}},function(e,t,n){var r=n(67),i=n(168),a=n(10);e.exports=function(e){return a(e)?r(e,!0):i(e)}},function(e,t,n){var r=n(20),i=n(175),a=n(75),o=n(15),s=n(17),c=n(190),u=n(91),l=n(90),f=u((function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,(function(t){return t=o(t,e),u||(u=t.length>1),t})),s(e,l(e),n),u&&(n=i(n,7,c));for(var f=t.length;f--;)a(n,t[f]);return n}));e.exports=f},function(e,t,n){var r=n(11)(n(5),"Map");e.exports=r},function(e,t,n){var r=n(12),i=n(4);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(114),i=n(121),a=n(123),o=n(124),s=n(125);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=o,c.prototype.set=s,e.exports=c},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(133),i=n(66),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return a.call(e,t)})))}:i;e.exports=s},function(e,t,n){var r=n(137),i=n(31),a=n(45),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(57),a="object"==r(t)&&t&&!t.nodeType&&t,o=a&&"object"==r(e)&&e&&!e.nodeType&&e,s=o&&o.exports===a&&i.process,c=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=c}).call(this,n(22)(e))},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(3),a=n(34),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(i(e))return!1;var n=r(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||s.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(78);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(63);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(68)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(49),i=n(18),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var o=e[t];a.call(e,t)&&i(o,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(73),i=n(203),a=n(204);e.exports=function(e,t,n){return t==t?a(e,t,n):r(e,i,n)}},function(e,t,n){var r=n(54),i=n(10),a=n(211),o=n(74),s=n(212),c=Math.max;e.exports=function(e,t,n,u){e=i(e)?e:s(e),n=n&&!u?o(n):0;var l=e.length;return n<0&&(n=c(l+n,0)),a(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&r(e,t,n)>-1}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r="object"==(void 0===t?"undefined":n(t))&&t&&t.Object===Object&&t;e.exports=r}).call(this,n(56))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(126),i=n(6);e.exports=function e(t,n,a,o,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,a,o,e,s))}},function(e,t,n){var r=n(61),i=n(129),a=n(62);e.exports=function(e,t,n,o,s,c){var u=1&n,l=e.length,f=t.length;if(l!=f&&!(u&&f>l))return!1;var p=c.get(e);if(p&&c.get(t))return p==t;var d=-1,h=!0,v=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++d<l;){var m=e[d],y=t[d];if(o)var g=u?o(y,m,d,t,e,c):o(m,y,d,e,t,c);if(void 0!==g){if(g)continue;h=!1;break}if(v){if(!i(t,(function(e,t){if(!a(v,t)&&(m===e||s(m,e,n,o,c)))return v.push(t)}))){h=!1;break}}else if(m!==y&&!s(m,y,n,o,c)){h=!1;break}}return c.delete(e),c.delete(t),h}},function(e,t,n){var r=n(39),i=n(127),a=n(128);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(5).Uint8Array;e.exports=r},function(e,t,n){var r=n(65),i=n(42),a=n(13);e.exports=function(e){return r(e,a,i)}},function(e,t,n){var r=n(41),i=n(3);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(134),i=n(29),a=n(3),o=n(30),s=n(19),c=n(43),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),l=!n&&i(e),f=!n&&!l&&o(e),p=!n&&!l&&!f&&c(e),d=n||l||f||p,h=d?r(e.length,String):[],v=h.length;for(var m in e)!t&&!u.call(e,m)||d&&("length"==m||f&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||h.push(m);return h}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(11)(n(5),"Set");e.exports=r},function(e,t,n){var r=n(4);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},function(e,t,n){var r=n(151),i=n(152);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}},function(e,t,n){var r=n(157);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(15),i=n(160),a=n(161),o=n(16);e.exports=function(e,t){return t=r(t,e),null==(e=a(e,t))||delete e[o(i(t))]}},function(e,t,n){var r=n(24),i=n(77),a=n(79),o=n(164),s=n(4),c=n(35),u=n(84);e.exports=function e(t,n,l,f,p){t!==n&&a(n,(function(a,c){if(p||(p=new r),s(a))o(t,n,c,l,e,f,p);else{var d=f?f(u(t,c),a,c+"",t,n,p):void 0;void 0===d&&(d=a),i(t,c,d)}}),c)}},function(e,t,n){var r=n(49),i=n(18);e.exports=function(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(11),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){var r=n(163)();e.exports=r},function(e,t,n){(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(5),a="object"==r(t)&&t&&!t.nodeType&&t,o=a&&"object"==r(e)&&e&&!e.nodeType&&e,s=o&&o.exports===a?i.Buffer:void 0,c=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(22)(e))},function(e,t,n){var r=n(50);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(165),i=n(52),a=n(46);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(i(e))}},function(e,t,n){var r=n(12),i=n(52),a=n(6),o=Function.prototype,s=Object.prototype,c=o.toString,u=s.hasOwnProperty,l=c.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,n){var r=n(86),i=n(174);e.exports=function(e){return r((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,s&&i(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),t=Object(t);++r<a;){var c=n[r];c&&e(t,c,r,o)}return t}))}},function(e,t,n){var r=n(48),i=n(87),a=n(88);e.exports=function(e,t){return a(i(e,t,r),e+"")}},function(e,t,n){var r=n(170),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=i(a.length-t,0),c=Array(s);++o<s;)c[o]=a[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=a[o];return u[t]=n(c),r(e,this,u)}}},function(e,t,n){var r=n(171),i=n(173)(r);e.exports=i},function(e,t,n){var r=n(41),i=n(52),a=n(42),o=n(66),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=i(e);return t}:o;e.exports=s},function(e,t,n){var r=n(65),i=n(89),a=n(35);e.exports=function(e){return r(e,a,i)}},function(e,t,n){var r=n(191),i=n(87),a=n(88);e.exports=function(e){return a(i(e,void 0,r),e+"")}},function(e,t,n){var r=n(76),i=n(85)((function(e,t,n,i){r(e,t,n,i)}));e.exports=i},function(e,t,n){var r=n(194),i=n(91)((function(e,t){return null==e?{}:r(e,t)}));e.exports=i},function(e,t,n){var r=n(20),i=n(23),a=n(197),o=n(3);e.exports=function(e,t){return(o(e)?r:a)(e,i(t,3))}},function(e,t,n){var r=n(23),i=n(10),a=n(13);e.exports=function(e){return function(t,n,o){var s=Object(t);if(!i(t)){var c=r(n,3);t=a(t),n=function(e){return c(s[e],e,s)}}var u=e(t,n,o);return u>-1?s[c?t[u]:u]:void 0}}},function(e,t,n){var r=n(97),i=n(143),a=n(71);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(24),i=n(59);e.exports=function(e,t,n,a){var o=n.length,s=o,c=!a;if(null==e)return!s;for(e=Object(e);o--;){var u=n[o];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<s;){var l=(u=n[o])[0],f=e[l],p=u[1];if(c&&u[2]){if(void 0===f&&!(l in e))return!1}else{var d=new r;if(a)var h=a(f,p,l,e,t,d);if(!(void 0===h?i(p,f,3,a,d):h))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(26),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(26);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(26);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(26);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(25);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(25),i=n(37),a=n(39);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(38),i=n(111),a=n(4),o=n(58),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?p:s).test(o(e))}},function(e,t,n){var r=n(14),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=o.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,i=n(112),a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},function(e,t,n){var r=n(5)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(115),i=n(25),a=n(37);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},function(e,t,n){var r=n(116),i=n(117),a=n(118),o=n(119),s=n(120);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=o,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(27);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(27),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(27),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(27);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(28);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t=n(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(28);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(28);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(28);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(24),i=n(60),a=n(130),o=n(132),s=n(32),c=n(3),u=n(30),l=n(43),f="[object Arguments]",p="[object Array]",d="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,m,y){var g=c(e),b=c(t),k=g?p:s(e),w=b?p:s(t),x=(k=k==f?d:k)==d,S=(w=w==f?d:w)==d,$=k==w;if($&&u(e)){if(!u(t))return!1;g=!0,x=!1}if($&&!x)return y||(y=new r),g||l(e)?i(e,t,n,v,m,y):a(e,t,k,n,v,m,y);if(!(1&n)){var _=x&&h.call(e,"__wrapped__"),M=S&&h.call(t,"__wrapped__");if(_||M){var C=_?e.value():e,A=M?t.value():t;return y||(y=new r),m(C,A,n,v,y)}}return!!$&&(y||(y=new r),o(e,t,n,v,m,y))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(14),i=n(63),a=n(18),o=n(60),s=n(131),c=n(40),u=r?r.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,f,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=s;case"[object Set]":var h=1&r;if(d||(d=c),e.size!=t.size&&!h)return!1;var v=p.get(e);if(v)return v==t;r|=2,p.set(e,t);var m=o(d(e),d(t),r,u,f,p);return p.delete(e),m;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(64),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,o,s){var c=1&n,u=r(e),l=u.length;if(l!=r(t).length&&!c)return!1;for(var f=l;f--;){var p=u[f];if(!(c?p in t:i.call(t,p)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var h=!0;s.set(e,t),s.set(t,e);for(var v=c;++f<l;){var m=e[p=u[f]],y=t[p];if(a)var g=c?a(y,m,p,t,e,s):a(m,y,p,e,t,s);if(!(void 0===g?m===y||o(m,y,n,a,s):g)){h=!1;break}v||(v="constructor"==p)}if(h&&!v){var b=e.constructor,k=t.constructor;b!=k&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof k&&k instanceof k)&&(h=!1)}return s.delete(e),s.delete(t),h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(12),i=n(6);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(12),i=n(44),a=n(6),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},function(e,t,n){var r=n(46),i=n(139),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(68)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(11)(n(5),"DataView");e.exports=r},function(e,t,n){var r=n(11)(n(5),"Promise");e.exports=r},function(e,t,n){var r=n(11)(n(5),"WeakMap");e.exports=r},function(e,t,n){var r=n(70),i=n(13);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var a=t[n],o=e[a];t[n]=[a,o,r(o)]}return t}},function(e,t,n){var r=n(59),i=n(145),a=n(72),o=n(47),s=n(70),c=n(71),u=n(16);e.exports=function(e,t){return o(e)&&s(t)?c(u(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?a(n,e):r(t,o,3)}}},function(e,t,n){var r=n(33);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e,t,n){var r=n(147),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)})),t}));e.exports=o},function(e,t,n){var r=n(148);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(39);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t,n){var r=n(150);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(14),i=n(20),a=n(3),o=n(34),s=r?r.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(15),i=n(29),a=n(3),o=n(19),s=n(44),c=n(16);e.exports=function(e,t,n){for(var u=-1,l=(t=r(t,e)).length,f=!1;++u<l;){var p=c(t[u]);if(!(f=null!=e&&n(e,p)))break;e=e[p]}return f||++u!=l?f:!!(l=null==e?0:e.length)&&s(l)&&o(p,l)&&(a(e)||i(e))}},function(e,t,n){var r=n(154),i=n(155),a=n(47),o=n(16);e.exports=function(e){return a(e)?r(o(e)):i(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(33);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(73),i=n(23),a=n(74),o=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var c=null==n?0:a(n);return c<0&&(c=o(s+c,0)),r(e,i(t,3),c)}},function(e,t,n){var r=n(158);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(4),i=n(34),a=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?NaN:+e}},function(e,t,n){var r=n(75),i=n(19),a=Array.prototype.splice;e.exports=function(e,t){for(var n=e?t.length:0,o=n-1;n--;){var s=t[n];if(n==o||s!==c){var c=s;i(s)?a.call(e,s,1):r(e,s)}}return e}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(33),i=n(162);e.exports=function(e,t){return t.length<2?e:r(e,i(t,0,-1))}},function(e,t){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}},function(e,t){e.exports=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(!1===n(a[c],c,a))break}return t}}},function(e,t,n){var r=n(77),i=n(80),a=n(81),o=n(51),s=n(82),c=n(29),u=n(3),l=n(166),f=n(30),p=n(38),d=n(4),h=n(83),v=n(43),m=n(84),y=n(167);e.exports=function(e,t,n,g,b,k,w){var x=m(e,n),S=m(t,n),$=w.get(S);if($)r(e,n,$);else{var _=k?k(x,S,n+"",e,t,w):void 0,M=void 0===_;if(M){var C=u(S),A=!C&&f(S),O=!C&&!A&&v(S);_=S,C||A||O?u(x)?_=x:l(x)?_=o(x):A?(M=!1,_=i(S,!0)):O?(M=!1,_=a(S,!0)):_=[]:h(S)||c(S)?(_=x,c(x)?_=y(x):d(x)&&!p(x)||(_=s(S))):M=!1}M&&(w.set(S,_),b(_,S,g,k,w),w.delete(S)),r(e,n,_)}}},function(e,t,n){var r=n(4),i=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){var r=n(10),i=n(6);e.exports=function(e){return i(e)&&r(e)}},function(e,t,n){var r=n(17),i=n(35);e.exports=function(e){return r(e,i(e))}},function(e,t,n){var r=n(4),i=n(46),a=n(169),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&o.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(172),i=n(78),a=n(48),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=o},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var i=n(),a=16-(i-r);if(r=i,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(18),a=n(10),o=n(19),s=n(4);e.exports=function(e,t,n){if(!s(n))return!1;var c=r(t);return!!("number"==c?a(n)&&o(t,n.length):"string"==c&&t in n)&&i(n[t],e)}},function(e,t,n){var r=n(24),i=n(176),a=n(53),o=n(177),s=n(178),c=n(80),u=n(51),l=n(179),f=n(180),p=n(64),d=n(90),h=n(32),v=n(181),m=n(182),y=n(82),g=n(3),b=n(30),k=n(186),w=n(4),x=n(188),S=n(13),$="[object Arguments]",_="[object Function]",M="[object Object]",C={};C[$]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[M]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[_]=C["[object WeakMap]"]=!1,e.exports=function e(t,n,A,O,I,E){var D,R=1&n,P=2&n,T=4&n;if(A&&(D=I?A(t,O,I,E):A(t)),void 0!==D)return D;if(!w(t))return t;var j=g(t);if(j){if(D=v(t),!R)return u(t,D)}else{var F=h(t),N=F==_||"[object GeneratorFunction]"==F;if(b(t))return c(t,R);if(F==M||F==$||N&&!I){if(D=P||N?{}:y(t),!R)return P?f(t,s(D,t)):l(t,o(D,t))}else{if(!C[F])return I?t:{};D=m(t,F,R)}}E||(E=new r);var L=E.get(t);if(L)return L;E.set(t,D),x(t)?t.forEach((function(r){D.add(e(r,n,A,r,t,E))})):k(t)&&t.forEach((function(r,i){D.set(i,e(r,n,A,i,t,E))}));var U=T?P?d:p:P?keysIn:S,B=j?void 0:U(t);return i(B||t,(function(r,i){B&&(r=t[i=r]),a(D,i,e(r,n,A,i,t,E))})),D}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(17),i=n(13);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(17),i=n(35);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(17),i=n(42);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(17),i=n(89);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(50),i=n(183),a=n(184),o=n(185),s=n(81);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return a(e);case"[object Set]":return new c;case"[object Symbol]":return o(e)}}},function(e,t,n){var r=n(50);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(14),i=r?r.prototype:void 0,a=i?i.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},function(e,t,n){var r=n(187),i=n(31),a=n(45),o=a&&a.isMap,s=o?i(o):r;e.exports=s},function(e,t,n){var r=n(32),i=n(6);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(189),i=n(31),a=n(45),o=a&&a.isSet,s=o?i(o):r;e.exports=s},function(e,t,n){var r=n(32),i=n(6);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},function(e,t,n){var r=n(83);e.exports=function(e){return r(e)?void 0:e}},function(e,t,n){var r=n(192);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t,n){var r=n(41),i=n(193);e.exports=function e(t,n,a,o,s){var c=-1,u=t.length;for(a||(a=i),s||(s=[]);++c<u;){var l=t[c];n>0&&a(l)?n>1?e(l,n-1,a,o,s):r(s,l):o||(s[s.length]=l)}return s}},function(e,t,n){var r=n(14),i=n(29),a=n(3),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(o&&e&&e[o])}},function(e,t,n){var r=n(195),i=n(72);e.exports=function(e,t){return r(e,t,(function(t,n){return i(e,n)}))}},function(e,t,n){var r=n(33),i=n(196),a=n(15);e.exports=function(e,t,n){for(var o=-1,s=t.length,c={};++o<s;){var u=t[o],l=r(e,u);n(l,u)&&i(c,a(u,e),l)}return c}},function(e,t,n){var r=n(53),i=n(15),a=n(19),o=n(4),s=n(16);e.exports=function(e,t,n,c){if(!o(e))return e;for(var u=-1,l=(t=i(t,e)).length,f=l-1,p=e;null!=p&&++u<l;){var d=s(t[u]),h=n;if(u!=f){var v=p[d];void 0===(h=c?c(v,d,p):void 0)&&(h=o(v)?v:a(t[u+1])?[]:{})}r(p,d,h),p=p[d]}return e}},function(e,t,n){var r=n(198),i=n(10);e.exports=function(e,t){var n=-1,a=i(e)?Array(e.length):[];return r(e,(function(e,r,i){a[++n]=t(e,r,i)})),a}},function(e,t,n){var r=n(199),i=n(200)(r);e.exports=i},function(e,t,n){var r=n(79),i=n(13);e.exports=function(e,t){return e&&r(e,t,i)}},function(e,t,n){var r=n(10);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var a=n.length,o=t?a:-1,s=Object(n);(t?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},function(e,t,n){var r=n(202);e.exports=function(e,t){return e&&e.length&&t&&t.length?r(e,t):e}},function(e,t,n){var r=n(20),i=n(54),a=n(205),o=n(31),s=n(51),c=Array.prototype.splice;e.exports=function(e,t,n,u){var l=u?a:i,f=-1,p=t.length,d=e;for(e===t&&(t=s(t)),n&&(d=r(e,o(n)));++f<p;)for(var h=0,v=t[f],m=n?n(v):v;(h=l(d,m,h,u))>-1;)d!==e&&c.call(d,h,1),c.call(e,h,1);return e}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},function(e,t){e.exports=function(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}},function(e,t,n){var r=n(61),i=n(207),a=n(208),o=n(62),s=n(209),c=n(40);e.exports=function(e,t,n){var u=-1,l=i,f=e.length,p=!0,d=[],h=d;if(n)p=!1,l=a;else if(f>=200){var v=t?null:s(e);if(v)return c(v);p=!1,l=o,h=new r}else h=t?[]:d;e:for(;++u<f;){var m=e[u],y=t?t(m):m;if(m=n||0!==m?m:0,p&&y==y){for(var g=h.length;g--;)if(h[g]===y)continue e;t&&h.push(y),d.push(m)}else l(h,y,n)||(h!==d&&h.push(y),d.push(m))}return d}},function(e,t,n){var r=n(54);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(69),i=n(210),a=n(40),o=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=o},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(12),i=n(3),a=n(6);e.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&"[object String]"==r(e)}},function(e,t,n){var r=n(213),i=n(13);e.exports=function(e){return null==e?[]:r(e,i(e))}},function(e,t,n){var r=n(20);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},function(e,t,n){"use strict";n.r(t);var r=n(9);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.crypto=t}var t,n;return t=e,(n=[{key:"decryptText",value:function(){var e,t,n,r,i,a,o,s,c,u,l=arguments;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(e=l.length>0&&void 0!==l[0]?l[0]:{},t=e.ciphertextToAuth,n=e.contentCiphertext,r=e.encryptionKey,i=e.iv,a=e.authHash,o=e.authKey,!(l.length>1?l[1]:void 0)||a){f.next=5;break}return console.error("Auth hash is required."),f.abrupt("return");case 5:if(!a){f.next=12;break}return f.next=8,regeneratorRuntime.awrap(this.crypto.hmac256(t,o));case 8:if(s=f.sent,!1!==this.crypto.timingSafeEqual(a,s)){f.next=12;break}return console.error("Auth hash does not match, returning null."),f.abrupt("return",null);case 12:return f.next=14,regeneratorRuntime.awrap(this.crypto.hexStringToArrayBuffer(r));case 14:return c=f.sent,f.next=17,regeneratorRuntime.awrap(this.crypto.hexStringToArrayBuffer(i||""));case 17:return u=f.sent,f.abrupt("return",this.crypto.aes256CbcDecrypt(n,c,u));case 19:case"end":return f.stop()}}),null,this)}},{key:"encryptText",value:function(e,t,n){var r,i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.crypto.hexStringToArrayBuffer(t));case 2:return r=a.sent,a.next=5,regeneratorRuntime.awrap(this.crypto.hexStringToArrayBuffer(n||""));case 5:return i=a.sent,a.abrupt("return",this.crypto.aes256CbcEncrypt(e,r,i));case 7:case"end":return a.stop()}}),null,this)}}])&&i(t.prototype,n),e}();function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,i=[{key:"pwCost",value:function(){return 3e3}},{key:"versionString",value:function(){return"001"}}],(r=[{key:"generateSalt",value:function(e,t,n,r){var i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.crypto.sha256([e,"SF",t,n,r].join(":")));case 2:return i=a.sent,a.abrupt("return",i);case 4:case"end":return a.stop()}}),null,this)}},{key:"computeEncryptionKeysForUser",value:function(e,t){var n,r,i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.pw_salt,a.next=3,regeneratorRuntime.awrap(this.crypto.generateSymmetricKeyPair({password:e,pw_salt:n,pw_cost:t.pw_cost}));case 3:return r=a.sent,i={pw:r[0],mk:r[1],ak:r[2]},a.abrupt("return",i);case 6:case"end":return a.stop()}}),null,this)}},{key:"_private_encryptString",value:function(e,t,n,r,i){var a,o;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.encryptText(e,t,null));case 2:return o=n.sent,a=i.version+o,n.abrupt("return",a);case 5:case"end":return n.stop()}}),null,this)}},{key:"encryptItem",value:function(e,t,n){var r,i,a,o,s,c;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r={},u.next=3,regeneratorRuntime.awrap(this.crypto.generateItemEncryptionKey());case 3:return i=u.sent,u.next=6,regeneratorRuntime.awrap(this.encryptText(i,t.mk,null));case 6:return r.enc_item_key=u.sent,u.next=9,regeneratorRuntime.awrap(this.crypto.firstHalfOfKey(i));case 9:return a=u.sent,u.next=12,regeneratorRuntime.awrap(this.crypto.secondHalfOfKey(i));case 12:return o=u.sent,u.next=15,regeneratorRuntime.awrap(this._private_encryptString(JSON.stringify(e.createContentJSONFromProperties()),a,o,e.uuid,n));case 15:return s=u.sent,u.next=18,regeneratorRuntime.awrap(this.crypto.hmac256(s,o));case 18:return c=u.sent,r.auth_hash=c,r.content=s,u.abrupt("return",r);case 22:case"end":return u.stop()}}),null,this)}},{key:"encryptionComponentsFromString",value:function(e,t,n){var r=e.substring(0,3);return{contentCiphertext:e.substring(3,e.length),encryptionVersion:r,ciphertextToAuth:e,iv:null,authHash:null,encryptionKey:t,authKey:n}}},{key:"decryptItem",value:function(e,t){var n,r,i,a,o,s,c,u;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:if("string"==typeof e.content){l.next=2;break}return l.abrupt("return");case 2:if(!e.content.startsWith("000")){l.next=14;break}return l.prev=3,l.t0=JSON,l.next=7,regeneratorRuntime.awrap(this.crypto.base64Decode(e.content.substring(3,e.content.length)));case 7:l.t1=l.sent,e.content=l.t0.parse.call(l.t0,l.t1),l.next=13;break;case 11:l.prev=11,l.t2=l.catch(3);case 13:return l.abrupt("return");case 14:if(e.enc_item_key){l.next=17;break}return console.log("Missing item encryption key, skipping decryption."),l.abrupt("return");case 17:if(n=e.enc_item_key,r=!0,n="001"+n,r=!1,!(i=this.encryptionComponentsFromString(n,t.mk,t.ak)).uuid||i.uuid===e.uuid){l.next=27;break}return console.error("Item key params UUID does not match item UUID"),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,l.abrupt("return");case 27:return l.next=29,regeneratorRuntime.awrap(this.decryptText(i,r));case 29:if(a=l.sent){l.next=35;break}return console.log("Error decrypting item",e),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,l.abrupt("return");case 35:return l.next=37,regeneratorRuntime.awrap(this.crypto.firstHalfOfKey(a));case 37:return o=l.sent,l.next=40,regeneratorRuntime.awrap(this.crypto.secondHalfOfKey(a));case 40:return s=l.sent,c=this.encryptionComponentsFromString(e.content,o,s),l.prev=42,l.t3=JSON,l.next=46,regeneratorRuntime.awrap(this.crypto.base64Decode(c.authParams));case 46:l.t4=l.sent,e.auth_params=l.t3.parse.call(l.t3,l.t4),l.next=52;break;case 50:l.prev=50,l.t5=l.catch(42);case 52:if(!c.uuid||c.uuid===e.uuid){l.next=56;break}return e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,l.abrupt("return");case 56:return c.authHash||(c.authHash=e.auth_hash),l.next=59,regeneratorRuntime.awrap(this.decryptText(c,!0));case 59:(u=l.sent)?(1==e.errorDecrypting&&(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!1,e.content=u):(e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0);case 61:case"end":return l.stop()}}),null,this,[[3,11],[42,50]])}}])&&s(n.prototype,r),i&&s(n,i),t}(a);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,v(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,i=[{key:"pwCost",value:function(){return 3e3}},{key:"versionString",value:function(){return"002"}}],(r=[{key:"generateSalt",value:function(e,t,n,r){var i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.crypto.sha256([e,"SF",t,n,r].join(":")));case 2:return i=a.sent,a.abrupt("return",i);case 4:case"end":return a.stop()}}),null,this)}},{key:"computeEncryptionKeysForUser",value:function(e,t){var n,r,i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.pw_salt,a.next=3,regeneratorRuntime.awrap(this.crypto.generateSymmetricKeyPair({password:e,pw_salt:n,pw_cost:t.pw_cost}));case 3:return r=a.sent,i={pw:r[0],mk:r[1],ak:r[2]},a.abrupt("return",i);case 6:case"end":return a.stop()}}),null,this)}},{key:"_private_encryptString",value:function(e,t,n,r,i){var a,o,s,c,u,l;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,regeneratorRuntime.awrap(this.crypto.generateRandomKey(128));case 2:return s=f.sent,f.next=5,regeneratorRuntime.awrap(this.encryptText(e,t,s));case 5:return o=f.sent,c=[i.version,r,s,o].join(":"),f.next=9,regeneratorRuntime.awrap(this.crypto.hmac256(c,n));case 9:return u=f.sent,f.next=12,regeneratorRuntime.awrap(this.crypto.base64(JSON.stringify(i)));case 12:return l=f.sent,a=[i.version,u,r,s,o,l].join(":"),f.abrupt("return",a);case 15:case"end":return f.stop()}}),null,this)}},{key:"encryptItem",value:function(e,t,n){var r,i,a,o,s;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r={},c.next=3,regeneratorRuntime.awrap(this.crypto.generateItemEncryptionKey());case 3:return i=c.sent,c.next=6,regeneratorRuntime.awrap(this._private_encryptString(i,t.mk,t.ak,e.uuid,n));case 6:return r.enc_item_key=c.sent,c.next=9,regeneratorRuntime.awrap(this.crypto.firstHalfOfKey(i));case 9:return a=c.sent,c.next=12,regeneratorRuntime.awrap(this.crypto.secondHalfOfKey(i));case 12:return o=c.sent,c.next=15,regeneratorRuntime.awrap(this._private_encryptString(JSON.stringify(e.createContentJSONFromProperties()),a,o,e.uuid,n));case 15:return s=c.sent,r.content=s,c.abrupt("return",r);case 18:case"end":return c.stop()}}),null,this)}},{key:"encryptionComponentsFromString",value:function(e,t,n){e.substring(0,3);var r=e.split(":");return{encryptionVersion:r[0],authHash:r[1],uuid:r[2],iv:r[3],contentCiphertext:r[4],authParams:r[5],ciphertextToAuth:[r[0],r[2],r[3],r[4]].join(":"),encryptionKey:t,authKey:n}}},{key:"decryptItem",value:function(e,t){var n,r,i,a,o,s,c,u;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:if("string"==typeof e.content){l.next=2;break}return l.abrupt("return");case 2:if(!e.content.startsWith("000")){l.next=14;break}return l.prev=3,l.t0=JSON,l.next=7,regeneratorRuntime.awrap(this.crypto.base64Decode(e.content.substring(3,e.content.length)));case 7:l.t1=l.sent,e.content=l.t0.parse.call(l.t0,l.t1),l.next=13;break;case 11:l.prev=11,l.t2=l.catch(3);case 13:return l.abrupt("return");case 14:if(e.enc_item_key){l.next=17;break}return console.log("Missing item encryption key, skipping decryption."),l.abrupt("return");case 17:if(n=e.enc_item_key,r=!0,!(i=this.encryptionComponentsFromString(n,t.mk,t.ak)).uuid||i.uuid===e.uuid){l.next=25;break}return console.error("Item key params UUID does not match item UUID"),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,l.abrupt("return");case 25:return l.next=27,regeneratorRuntime.awrap(this.decryptText(i,r));case 27:if(a=l.sent){l.next=33;break}return console.log("Error decrypting item",e),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,l.abrupt("return");case 33:return l.next=35,regeneratorRuntime.awrap(this.crypto.firstHalfOfKey(a));case 35:return o=l.sent,l.next=38,regeneratorRuntime.awrap(this.crypto.secondHalfOfKey(a));case 38:return s=l.sent,c=this.encryptionComponentsFromString(e.content,o,s),l.prev=40,l.t3=JSON,l.next=44,regeneratorRuntime.awrap(this.crypto.base64Decode(c.authParams));case 44:l.t4=l.sent,e.auth_params=l.t3.parse.call(l.t3,l.t4),l.next=50;break;case 48:l.prev=48,l.t5=l.catch(40);case 50:if(!c.uuid||c.uuid===e.uuid){l.next=54;break}return e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,l.abrupt("return");case 54:return l.next=56,regeneratorRuntime.awrap(this.decryptText(c,!0));case 56:(u=l.sent)?(1==e.errorDecrypting&&(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!1,e.content=u):(e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0);case 58:case"end":return l.stop()}}),null,this,[[3,11],[40,48]])}}])&&d(n.prototype,r),i&&d(n,i),t}(a);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,w(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,i=[{key:"pwCost",value:function(){return 11e4}},{key:"versionString",value:function(){return"003"}}],(r=[{key:"generateSalt",value:function(e,t,n,r){var i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.crypto.sha256([e,"SF",t,n,r].join(":")));case 2:return i=a.sent,a.abrupt("return",i);case 4:case"end":return a.stop()}}),null,this)}},{key:"computeEncryptionKeysForUser",value:function(e,t){var n,r,i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.identifier){a.next=3;break}return console.error("authParams is missing identifier."),a.abrupt("return");case 3:return a.next=5,regeneratorRuntime.awrap(this.generateSalt(t.identifier,t.version,t.pw_cost,t.pw_nonce));case 5:return n=a.sent,a.next=8,regeneratorRuntime.awrap(this.crypto.generateSymmetricKeyPair({password:e,pw_salt:n,pw_cost:t.pw_cost}));case 8:return r=a.sent,i={pw:r[0],mk:r[1],ak:r[2]},a.abrupt("return",i);case 11:case"end":return a.stop()}}),null,this)}},{key:"generateInitialKeysAndAuthParamsForUser",value:function(e,t){var n,r,i,a,o,s,c;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n=this.constructor.versionString(),r=this.constructor.pwCost(),u.next=4,regeneratorRuntime.awrap(this.crypto.generateRandomKey(256));case 4:return i=u.sent,u.next=7,regeneratorRuntime.awrap(this.generateSalt(e,n,r,i));case 7:return a=u.sent,u.next=10,regeneratorRuntime.awrap(this.crypto.generateSymmetricKeyPair({password:t,pw_salt:a,pw_cost:r}));case 10:return o=u.sent,s={pw_nonce:i,pw_cost:r,identifier:e,version:n},c={pw:o[0],mk:o[1],ak:o[2]},u.abrupt("return",{keys:c,authParams:s});case 14:case"end":return u.stop()}}),null,this)}},{key:"_private_encryptString",value:function(e,t,n,r,i){var a,o,s,c,u,l;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,regeneratorRuntime.awrap(this.crypto.generateRandomKey(128));case 2:return s=f.sent,f.next=5,regeneratorRuntime.awrap(this.encryptText(e,t,s));case 5:return o=f.sent,c=[i.version,r,s,o].join(":"),f.next=9,regeneratorRuntime.awrap(this.crypto.hmac256(c,n));case 9:return u=f.sent,f.next=12,regeneratorRuntime.awrap(this.crypto.base64(JSON.stringify(i)));case 12:return l=f.sent,a=[i.version,u,r,s,o,l].join(":"),f.abrupt("return",a);case 15:case"end":return f.stop()}}),null,this)}},{key:"encryptItem",value:function(e,t,n){var r,i,a,o,s;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r={},c.next=3,regeneratorRuntime.awrap(this.crypto.generateItemEncryptionKey());case 3:return i=c.sent,c.next=6,regeneratorRuntime.awrap(this._private_encryptString(i,t.mk,t.ak,e.uuid,n));case 6:return r.enc_item_key=c.sent,c.next=9,regeneratorRuntime.awrap(this.crypto.firstHalfOfKey(i));case 9:return a=c.sent,c.next=12,regeneratorRuntime.awrap(this.crypto.secondHalfOfKey(i));case 12:return o=c.sent,c.next=15,regeneratorRuntime.awrap(this._private_encryptString(JSON.stringify(e.createContentJSONFromProperties()),a,o,e.uuid,n));case 15:return s=c.sent,r.content=s,c.abrupt("return",r);case 18:case"end":return c.stop()}}),null,this)}},{key:"encryptionComponentsFromString",value:function(e,t,n){e.substring(0,3);var r=e.split(":");return{encryptionVersion:r[0],authHash:r[1],uuid:r[2],iv:r[3],contentCiphertext:r[4],authParams:r[5],ciphertextToAuth:[r[0],r[2],r[3],r[4]].join(":"),encryptionKey:t,authKey:n}}},{key:"decryptItem",value:function(e,t){var n,r,i,a,o,s,c,u;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:if("string"==typeof e.content){l.next=2;break}return l.abrupt("return");case 2:if(!e.content.startsWith("000")){l.next=14;break}return l.prev=3,l.t0=JSON,l.next=7,regeneratorRuntime.awrap(this.crypto.base64Decode(e.content.substring(3,e.content.length)));case 7:l.t1=l.sent,e.content=l.t0.parse.call(l.t0,l.t1),l.next=13;break;case 11:l.prev=11,l.t2=l.catch(3);case 13:return l.abrupt("return");case 14:if(e.enc_item_key){l.next=17;break}return console.log("Missing item encryption key, skipping decryption."),l.abrupt("return");case 17:if(n=e.enc_item_key,r=!0,!(i=this.encryptionComponentsFromString(n,t.mk,t.ak)).uuid||i.uuid===e.uuid){l.next=25;break}return console.error("Item key params UUID does not match item UUID"),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,l.abrupt("return");case 25:return l.next=27,regeneratorRuntime.awrap(this.decryptText(i,r));case 27:if(a=l.sent){l.next=33;break}return console.log("Error decrypting item",e),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,l.abrupt("return");case 33:return l.next=35,regeneratorRuntime.awrap(this.crypto.firstHalfOfKey(a));case 35:return o=l.sent,l.next=38,regeneratorRuntime.awrap(this.crypto.secondHalfOfKey(a));case 38:return s=l.sent,c=this.encryptionComponentsFromString(e.content,o,s),l.prev=40,l.t3=JSON,l.next=44,regeneratorRuntime.awrap(this.crypto.base64Decode(c.authParams));case 44:l.t4=l.sent,e.auth_params=l.t3.parse.call(l.t3,l.t4),l.next=50;break;case 48:l.prev=48,l.t5=l.catch(40);case 50:if(!c.uuid||c.uuid===e.uuid){l.next=54;break}return e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,l.abrupt("return");case 54:return l.next=56,regeneratorRuntime.awrap(this.decryptText(c,!0));case 56:(u=l.sent)?(1==e.errorDecrypting&&(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!1,e.content=u):(e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0);case 58:case"end":return l.stop()}}),null,this,[[3,11],[40,48]])}}])&&b(n.prototype,r),i&&b(n,i),t}(a),$=n(7);function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operators=[],!t&&Object($.c)()?Object(r.isWebCryptoAvailable)()?this.crypto=new r.SNWebCrypto:this.crypto=new r.SNCryptoJS:this.crypto=t}var t,n;return t=e,(n=[{key:"version",value:function(){return"003"}},{key:"supportsPasswordDerivationCost",value:function(e){return!(e>5e3)||this.crypto instanceof r.SNWebCrypto}},{key:"supportedVersions",value:function(){return["001","002","003"]}},{key:"isVersionNewerThanLibraryVersion",value:function(e){var t=this.version();return parseInt(e)>parseInt(t)}},{key:"isProtocolVersionOutdated",value:function(e){var t={"001":Date.parse("2018-01-01"),"002":Date.parse("2020-01-01")}[e];return!!t&&new Date>t}},{key:"costMinimumForVersion",value:function(e){return{"001":f.pwCost(),"002":y.pwCost(),"003":S.pwCost()}[e]}},{key:"defaultPasswordGenerationCost",value:function(){return this.costMinimumForVersion(this.version())}},{key:"versionForItem",value:function(e){return e.content.substring(0,3)}},{key:"createOperatorForLatestVersion",value:function(){return this.createOperatorForVersion(this.version())}},{key:"createOperatorForVersion",value:function(e){if("001"===e)return new f(this.crypto);if("002"===e)return new y(this.crypto);if("003"===e)return new S(this.crypto);if("000"===e)return this.createOperatorForLatestVersion();throw"Unable to find operator for version ".concat(e)}},{key:"operatorForVersion",value:function(e){var t=e,n=this.operators[t];return n||(n=this.createOperatorForVersion(e),this.operators[t]=n),n}},{key:"defaultOperator",value:function(){return this.operatorForVersion(this.version())}},{key:"computeEncryptionKeysForUser",value:function(e,t){var n,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.version,r=this.operatorForVersion(n),i.abrupt("return",r.computeEncryptionKeysForUser(e,t));case 3:case"end":return i.stop()}}),null,this)}},{key:"generateInitialKeysAndAuthParamsForUser",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.defaultOperator(),r.abrupt("return",n.generateInitialKeysAndAuthParamsForUser(e,t));case 2:case"end":return r.stop()}}),null,this)}},{key:"decryptItem",value:function(e,t){var n,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=this.versionForItem(e),r=this.operatorForVersion(n),i.abrupt("return",r.decryptItem(e,t));case 3:case"end":return i.stop()}}),null,this)}},{key:"encryptItem",value:function(e,t,n){var r,i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.version,i=this.operatorForVersion(r),a.abrupt("return",i.encryptItem(e,t,n));case 3:case"end":return a.stop()}}),null,this)}},{key:"decryptMultipleItems",value:function(e,t,n){var r,i=this;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return r=function(e){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:if(!0!==e.deleted||null!==e.content){r.next=4;break}return r.abrupt("return");case 4:if(!("string"==typeof e.content||e.content instanceof String)){r.next=19;break}return r.prev=6,r.next=9,regeneratorRuntime.awrap(i.decryptItem(e,t));case 9:r.next=19;break;case 11:if(r.prev=11,r.t0=r.catch(6),e.errorDecrypting||(e.errorDecryptingValueChanged=!0),e.errorDecrypting=!0,!n){r.next=17;break}throw r.t0;case 17:return console.error("Error decrypting item",e,r.t0),r.abrupt("return");case 19:case"end":return r.stop()}}),null,null,[[6,11]])},a.abrupt("return",Promise.all(e.map((function(e){return r(e)}))));case 2:case"end":return a.stop()}}))}}])&&_(t.prototype,n),e}(),C=new M,A=n(2),O=n.n(A),I=n(0),E=n.n(I),D=n(3),R=n.n(D),P=n(92),T=n.n(P);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F,N=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keypath=t,this.operator=n,this.value=r,e.IsRecursiveOperator(this.operator)&&(this.value=this.value.map(e.fromArray))}var t,n;return t=e,(n=[{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2])}},{key:"ObjectSatisfiesPredicate",value:function(t,n){if(Array.isArray(n)&&(n=this.fromArray(n)),e.IsRecursiveOperator(n.operator)){if("and"===n.operator){var r=!0,i=!1,a=void 0;try{for(var o,s=n.value[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;if(!this.ObjectSatisfiesPredicate(t,c))return!1}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return!0}if("or"===n.operator){var u=!0,l=!1,f=void 0;try{for(var p,d=n.value[Symbol.iterator]();!(u=(p=d.next()).done);u=!0)if(c=p.value,this.ObjectSatisfiesPredicate(t,c))return!0}catch(e){l=!0,f=e}finally{try{u||null==d.return||d.return()}finally{if(l)throw f}}return!1}}var h=n.value;"string"==typeof h&&h.includes(".ago")&&(h=this.DateFromString(h));var v=n.keypath.split(".").reduce((function(e,t){return e&&e[t]}),t),m=[!1,"",null,void 0,NaN];return null==v?"!="==n.operator?!m.includes(n.value):m.includes(n.value):"="==n.operator?Array.isArray(v)?JSON.stringify(v)==JSON.stringify(h):v==h:"!="==n.operator?Array.isArray(v)?JSON.stringify(v)!=JSON.stringify(h):v!==h:"<"==n.operator?v<h:">"==n.operator?v>h:"<="==n.operator?v<=h:">="==n.operator?v>=h:"startsWith"==n.operator?v.startsWith(h):"in"==n.operator?-1!=h.indexOf(v):"includes"==n.operator?this.resolveIncludesPredicate(v,h):"matches"==n.operator&&new RegExp(h).test(v)}},{key:"resolveIncludesPredicate",value:function(t,n){if("string"==typeof n)return t.includes(n);var r;r=Array.isArray(n)?e.fromArray(n):n;var i=!0,a=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if(this.ObjectSatisfiesPredicate(u,r))return!0}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return!1}},{key:"ItemSatisfiesPredicate",value:function(t,n){return Array.isArray(n)&&(n=e.fromArray(n)),this.ObjectSatisfiesPredicate(t,n)}},{key:"ItemSatisfiesPredicates",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!this.ItemSatisfiesPredicate(e,s))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}},{key:"DateFromString",value:function(e){var t=e.split("."),n=t[1],r=new Date,i=parseInt(t[0]);return"days"==n?r.setDate(r.getDate()-i):"hours"==n&&r.setHours(r.getHours()-i),r}},{key:"IsRecursiveOperator",value:function(e){return["and","or"].includes(e)}}])&&j(t,n),e}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content={},this.referencingObjects=[],this.updateFromJSON(t),this.uuid||Object($.c)()&&(this.uuid=C.crypto.generateUUIDSync()),"object"!==L(this.content)||this.content.references||(this.content.references=[])}var t,n,r;return t=e,r=[{key:"deepMerge",value:function(e,t){return T()(e,t,(function(e,t){if(R()(e))return t})),e}},{key:"AreItemContentsEqual",value:function(t){var n=t.leftContent,r=t.rightContent,i=t.keysToIgnore,a=t.appDataKeysToIgnore,o=function(e,t){if(!e)return e;var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)delete e[a.value]}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e};return(n=JSON.parse(JSON.stringify(n))).appData&&o(n.appData[e.AppDomain],a),n=o(n,i),(r=JSON.parse(JSON.stringify(r))).appData&&o(r.appData[e.AppDomain],a),r=o(r,i),JSON.stringify(n)===JSON.stringify(r)}}],(n=[{key:"initUUID",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.uuid){e.next=4;break}return e.next=3,regeneratorRuntime.awrap(C.crypto.generateUUID());case 3:this.uuid=e.sent;case 4:case"end":return e.stop()}}),null,this)}},{key:"updateFromJSON",value:function(t){if(t){this.deleted=t.deleted,this.uuid=t.uuid,this.enc_item_key=t.enc_item_key,this.auth_hash=t.auth_hash,this.auth_params=t.auth_params;for(var n=0,r=["errorDecrypting","dirty","dirtyCount","dirtiedDate","dummy"];n<r.length;n++){var i=r[n];void 0!==t[i]&&(this[i]=t[i])}if(this.dirtiedDate&&"string"==typeof this.dirtiedDate&&(this.dirtiedDate=new Date(this.dirtiedDate)),this.content_type||(this.content_type=t.content_type),t.errorDecrypting)this.content=t.content;else try{var a="string"==typeof t.content?JSON.parse(t.content):t.content;e.deepMerge(this.contentObject,a)}catch(e){console.log("Error while updating item from json",e)}t.created_at&&(this.created_at=t.created_at),t.updated_at&&(this.updated_at=t.updated_at),this.created_at?this.created_at=new Date(this.created_at):this.created_at=new Date,this.updated_at?this.updated_at=new Date(this.updated_at):this.updated_at=new Date(0),this._client_updated_at=null,t.content?this.mapContentToLocalProperties(this.contentObject):1==t.deleted&&this.handleDeletedContent()}}},{key:"mapContentToLocalProperties",value:function(e){}},{key:"collapseCustomPropertiesIntoContent",value:function(){this.createContentJSONFromProperties()}},{key:"createContentJSONFromProperties",value:function(){var t=this.structureParams();return e.deepMerge(this.contentObject,t),t}},{key:"structureParams",value:function(){return this.getContentCopy()}},{key:"handleDeletedContent",value:function(){}},{key:"setDirty",value:function(e,t){this.dirty=e,this.dirtyCount||(this.dirtyCount=0),e?this.dirtyCount++:this.dirtyCount=0,this.dirtiedDate=new Date,e&&t?this.client_updated_at=new Date:this.hasRawClientUpdatedAtValue()||(this.client_updated_at=new Date(this.updated_at)),this.collapseCustomPropertiesIntoContent()}},{key:"updateLocalRelationships",value:function(){}},{key:"addItemAsRelationship",value:function(e){if(e.setIsBeingReferencedBy(this),!this.hasRelationshipWithItem(e)){var t=this.content.references||[];t.push({uuid:e.uuid,content_type:e.content_type}),this.content.references=t}}},{key:"removeItemAsRelationship",value:function(e){e.setIsNoLongerBeingReferencedBy(this),this.removeReferenceWithUuid(e.uuid)}},{key:"setIsBeingReferencedBy",value:function(e){O()(this.referencingObjects,{uuid:e.uuid})||this.referencingObjects.push(e)}},{key:"setIsNoLongerBeingReferencedBy",value:function(e){E()(this.referencingObjects,{uuid:e.uuid}),this.hasRelationshipWithItem(e)&&(this.removeReferenceWithUuid(e.uuid),this.setDirty(!0))}},{key:"removeReferenceWithUuid",value:function(e){var t=this.content.references||[];t=t.filter((function(t){return t.uuid!=e})),this.content.references=t}},{key:"hasRelationshipWithItem",value:function(e){return null!=this.content.references.find((function(t){return t.uuid==e.uuid}))}},{key:"isBeingRemovedLocally",value:function(){}},{key:"didFinishSyncing",value:function(){}},{key:"informReferencesOfUUIDChange",value:function(e,t){}},{key:"potentialItemOfInterestHasChangedItsUUID",value:function(e,t,n){if(!this.errorDecrypting){var r=!0,i=!1,a=void 0;try{for(var o,s=this.content.references[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c.uuid==t&&(c.uuid=n,this.setDirty(!0))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}},{key:"doNotEncrypt",value:function(){return!1}},{key:"setDomainDataItem",value:function(e,t,n){if(n){if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var r=this.content.appData[n];r||(r={}),r[e]=t,this.content.appData[n]=r}}else console.error("SFItem.AppDomain needs to be set.")}},{key:"getDomainDataItem",value:function(e,t){if(t){if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var n=this.content.appData[t];return n?n[e]:null}}else console.error("SFItem.AppDomain needs to be set.")}},{key:"setAppDataItem",value:function(t,n){this.setDomainDataItem(t,n,e.AppDomain)}},{key:"getAppDataItem",value:function(t){return this.getDomainDataItem(t,e.AppDomain)}},{key:"hasRawClientUpdatedAtValue",value:function(){return null!=this.getAppDataItem("client_updated_at")}},{key:"keysToIgnoreWhenCheckingContentEquality",value:function(){return[]}},{key:"appDataKeysToIgnoreWhenCheckingContentEquality",value:function(){return["client_updated_at"]}},{key:"getContentCopy",value:function(){return JSON.parse(JSON.stringify(this.content))}},{key:"isItemContentEqualWith",value:function(t){return e.AreItemContentsEqual({leftContent:this.content,rightContent:t.content,keysToIgnore:this.keysToIgnoreWhenCheckingContentEquality(),appDataKeysToIgnore:this.appDataKeysToIgnoreWhenCheckingContentEquality()})}},{key:"isContentEqualWithNonItemContent",value:function(t){return e.AreItemContentsEqual({leftContent:this.content,rightContent:t,keysToIgnore:this.keysToIgnoreWhenCheckingContentEquality(),appDataKeysToIgnore:this.appDataKeysToIgnoreWhenCheckingContentEquality()})}},{key:"satisfiesPredicate",value:function(e){return N.ItemSatisfiesPredicate(this,e)}},{key:"createdAtString",value:function(){return this.dateToLocalizedString(this.created_at)}},{key:"updatedAtString",value:function(){return this.dateToLocalizedString(this.client_updated_at)}},{key:"updatedAtTimestamp",value:function(){return this.updated_at.getTime()}},{key:"dateToLocalizedString",value:function(e){if("undefined"!=typeof Intl&&Intl.DateTimeFormat){if(!F){var t=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;F=new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"})}return F.format(e)}return e.toDateString()+" "+e.toLocaleTimeString()}},{key:"contentObject",get:function(){if(this.errorDecrypting)return this.content;if(!this.content)return this.content={},this.content;if(null!==this.content&&"object"===L(this.content))return this.content;try{var e=JSON.parse(this.content);return this.content=e,this.content}catch(e){return console.log("Error parsing json",e,this),this.content={},this.content}}},{key:"pinned",get:function(){return this.getAppDataItem("pinned")}},{key:"archived",get:function(){return this.getAppDataItem("archived")}},{key:"locked",get:function(){return this.getAppDataItem("locked")}},{key:"displayName",get:function(){return"Item"}},{key:"client_updated_at",get:function(){if(!this._client_updated_at){var e=this.getAppDataItem("client_updated_at");this._client_updated_at=e?new Date(e):new Date(this.updated_at)}return this._client_updated_at},set:function(e){this._client_updated_at=e,this.setAppDataItem("client_updated_at",e)}}])&&U(t.prototype,n),r&&U(t,r),e}(),H=n(36),z=n.n(H),V=n(8),W=n.n(V),K=n(93),q=n.n(K);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.item=t,this.keys=n,this.auth_params=r,this.keys&&!this.auth_params)throw"SFItemParams.auth_params must be supplied if supplying keys.";if(this.auth_params&&!this.auth_params.version)throw"SFItemParams.auth_params is missing version"}var t,n;return t=e,(n=[{key:"paramsForExportFile",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.forExportFile=!0,!e){n.next=5;break}return n.abrupt("return",this.__params());case 5:return n.next=7,regeneratorRuntime.awrap(this.__params());case 7:return t=n.sent,n.abrupt("return",z()(t,["deleted"]));case 9:case"end":return n.stop()}}),null,this)}},{key:"paramsForExtension",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.paramsForExportFile());case 1:case"end":return e.stop()}}),null,this)}},{key:"paramsForLocalStorage",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.additionalFields=["dirty","dirtiedDate","errorDecrypting"],this.forExportFile=!0,e.abrupt("return",this.__params());case 3:case"end":return e.stop()}}),null,this)}},{key:"paramsForSync",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.__params());case 1:case"end":return e.stop()}}),null,this)}},{key:"__params",value:function(){var e,t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e={uuid:this.item.uuid,content_type:this.item.content_type,deleted:this.item.deleted,created_at:this.item.created_at,updated_at:this.item.updated_at},this.item.errorDecrypting){r.next=23;break}if(t=this.item.doNotEncrypt()&&!this.forExportFile,!this.keys||t){r.next=11;break}return r.next=6,regeneratorRuntime.awrap(C.encryptItem(this.item,this.keys,this.auth_params));case 6:n=r.sent,W()(e,n),"001"!==this.auth_params.version&&(e.auth_hash=null),r.next=21;break;case 11:if(!this.forExportFile){r.next=15;break}r.t0=this.item.createContentJSONFromProperties(),r.next=19;break;case 15:return r.next=17,regeneratorRuntime.awrap(C.crypto.base64(JSON.stringify(this.item.createContentJSONFromProperties())));case 17:r.t1=r.sent,r.t0="000"+r.t1;case 19:e.content=r.t0,this.forExportFile||(e.enc_item_key=null,e.auth_hash=null);case 21:r.next=26;break;case 23:e.content=this.item.content,e.enc_item_key=this.item.enc_item_key,e.auth_hash=this.item.auth_hash;case 26:return this.additionalFields&&W()(e,q()(this.item,this.additionalFields)),r.abrupt("return",e);case 28:case"end":return r.stop()}}),null,this)}}])&&J(t.prototype,n),e}();function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t,n){return(X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Q(t).call(this,e))).content_type||(n.content_type="Tag"),n.notes||(n.notes=[]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,e),n=t,i=[{key:"arrayToDisplayString",value:function(e){return e.sort((function(e,t){return e.title>t.title})).map((function(e,t){return"#"+e.title})).join(" ")}}],(r=[{key:"mapContentToLocalProperties",value:function(e){X(Q(t.prototype),"mapContentToLocalProperties",this).call(this,e),this.title=e.title}},{key:"structureParams",value:function(){var e={title:this.title},n=X(Q(t.prototype),"structureParams",this).call(this);return Object.assign(n,e),n}},{key:"addItemAsRelationship",value:function(e){"Note"==e.content_type&&(Object($.a)(this.notes,"uuid",e.uuid)||(this.notes.push(e),e.tags.push(this))),X(Q(t.prototype),"addItemAsRelationship",this).call(this,e)}},{key:"removeItemAsRelationship",value:function(e){"Note"==e.content_type&&(E()(this.notes,{uuid:e.uuid}),E()(e.tags,{uuid:this.uuid})),X(Q(t.prototype),"removeItemAsRelationship",this).call(this,e)}},{key:"updateLocalRelationships",value:function(){var e=this.content.references.map((function(e){return e.uuid}));this.notes.slice().forEach(function(t){e.includes(t.uuid)||(E()(t.tags,{uuid:this.uuid}),E()(this.notes,{uuid:t.uuid}),t.setIsNoLongerBeingReferencedBy(this))}.bind(this))}},{key:"isBeingRemovedLocally",value:function(){var e=this;this.notes.forEach((function(t){E()(t.tags,{uuid:e.uuid}),t.setIsNoLongerBeingReferencedBy(e)})),this.notes.length=0,X(Q(t.prototype),"isBeingRemovedLocally",this).call(this)}},{key:"informReferencesOfUUIDChange",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.notes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;E()(s.tags,{uuid:e}),s.tags.push(this)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"didFinishSyncing",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.notes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.tagDidFinishSyncing(this)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"isSmartTag",value:function(){return"SN|SmartTag"==this.content_type}},{key:"displayName",get:function(){return"Tag"}}])&&Z(n.prototype,r),i&&Z(n,i),t}(B);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){return(ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ae(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ae(t).call(this,e))).text||(n.text=""),n.tags||(n.tags=[]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,e),n=t,i=[{key:"filterDummyNotes",value:function(e){return e.filter((function(e){return 0==e.dummy||null==e.dummy}))}}],(r=[{key:"mapContentToLocalProperties",value:function(e){ie(ae(t.prototype),"mapContentToLocalProperties",this).call(this,e),this.title=e.title,this.text=e.text}},{key:"structureParams",value:function(){var e={title:this.title,text:this.text},n=ie(ae(t.prototype),"structureParams",this).call(this);return Object.assign(n,e),n}},{key:"addItemAsRelationship",value:function(e){"Tag"==e.content_type&&e.addItemAsRelationship(this),ie(ae(t.prototype),"addItemAsRelationship",this).call(this,e)}},{key:"setIsBeingReferencedBy",value:function(e){ie(ae(t.prototype),"setIsBeingReferencedBy",this).call(this,e),this.clearSavedTagsString()}},{key:"setIsNoLongerBeingReferencedBy",value:function(e){ie(ae(t.prototype),"setIsNoLongerBeingReferencedBy",this).call(this,e),this.clearSavedTagsString()}},{key:"isBeingRemovedLocally",value:function(){this.tags.forEach(function(e){E()(e.notes,{uuid:this.uuid})}.bind(this)),ie(ae(t.prototype),"isBeingRemovedLocally",this).call(this)}},{key:"informReferencesOfUUIDChange",value:function(e,n){ie(ae(t.prototype),"informReferencesOfUUIDChange",this).call(this);var r=!0,i=!1,a=void 0;try{for(var o,s=this.tags[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;E()(c.notes,{uuid:e}),c.notes.push(this)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"tagDidFinishSyncing",value:function(e){this.clearSavedTagsString()}},{key:"safeText",value:function(){return this.text||""}},{key:"safeTitle",value:function(){return this.title||""}},{key:"clearSavedTagsString",value:function(){this.savedTagsString=null}},{key:"tagsString",value:function(){return this.savedTagsString=te.arrayToDisplayString(this.tags),this.savedTagsString}},{key:"content_type",get:function(){return"Note"}},{key:"displayName",get:function(){return"Note"}}])&&re(n.prototype,r),i&&re(n,i),t}(B);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,le(t).call(this,e))).content_type="SN|SmartTag",n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,e),n=t,(r=[{key:"systemSmartTags",value:function(){return[new t({uuid:t.SystemSmartTagIdAllNotes,dummy:!0,content:{title:"All notes",isSystemTag:!0,isAllTag:!0,predicate:new N.fromArray(["content_type","=","Note"])}}),new t({uuid:t.SystemSmartTagIdArchivedNotes,dummy:!0,content:{title:"Archived",isSystemTag:!0,isArchiveTag:!0,predicate:new N.fromArray(["archived","=",!0])}}),new t({uuid:t.SystemSmartTagIdTrashedNotes,dummy:!0,content:{title:"Trash",isSystemTag:!0,isTrashTag:!0,predicate:new N.fromArray(["content.trashed","=",!0])}})]}}])&&ue(n,r),t}(te);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}pe.SystemSmartTagIdAllNotes="all-notes",pe.SystemSmartTagIdArchivedNotes="archived-notes",pe.SystemSmartTagIdTrashedNotes="trashed-notes";var ye=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ve(t).call(this,e))}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,e),n=t,(r=[{key:"doNotEncrypt",value:function(){return!0}},{key:"content_type",get:function(){return"SF|MFA"}}])&&he(n.prototype,r),t}(B);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e,t,n){return(we="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ke(this,xe(t).apply(this,arguments))}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,e),n=t,(r=[{key:"mapContentToLocalProperties",value:function(e){we(xe(t.prototype),"mapContentToLocalProperties",this).call(this,e),this.url=e.url}},{key:"doNotEncrypt",value:function(){return!0}},{key:"content_type",get:function(){return"SF|Extension"}}])&&be(n.prototype,r),t}(B);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t,n){return(Ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ie=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.window=null,(n=function(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ae(t).call(this,e))).componentData||(n.componentData={}),n.disassociatedItemIds||(n.disassociatedItemIds=[]),n.associatedItemIds||(n.associatedItemIds=[]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,e),n=t,i=[{key:"associativeAreas",value:function(){return["editor-editor"]}}],(r=[{key:"mapContentToLocalProperties",value:function(e){Ce(Ae(t.prototype),"mapContentToLocalProperties",this).call(this,e),e.hosted_url||(this.legacy_url=e.url),this.local_url=e.local_url,this.hosted_url=e.hosted_url||e.url,this.offlineOnly=e.offlineOnly,e.valid_until&&(this.valid_until=new Date(e.valid_until)),this.name=e.name,this.autoupdateDisabled=e.autoupdateDisabled,this.package_info=e.package_info,this.area=e.area,this.permissions=e.permissions,this.permissions||(this.permissions=[]),this.active=e.active,this.componentData=e.componentData||{},this.disassociatedItemIds=e.disassociatedItemIds||[],this.associatedItemIds=e.associatedItemIds||[]}},{key:"handleDeletedContent",value:function(){Ce(Ae(t.prototype),"handleDeletedContent",this).call(this),this.active=!1}},{key:"structureParams",value:function(){var e={legacy_url:this.legacy_url,hosted_url:this.hosted_url,local_url:this.local_url,valid_until:this.valid_until,offlineOnly:this.offlineOnly,name:this.name,area:this.area,package_info:this.package_info,permissions:this.permissions,active:this.active,autoupdateDisabled:this.autoupdateDisabled,componentData:this.componentData,disassociatedItemIds:this.disassociatedItemIds,associatedItemIds:this.associatedItemIds},n=Ce(Ae(t.prototype),"structureParams",this).call(this);return Object.assign(n,e),n}},{key:"isEditor",value:function(){return"editor-editor"==this.area}},{key:"isTheme",value:function(){return"SN|Theme"==this.content_type||"themes"==this.area}},{key:"isDefaultEditor",value:function(){return 1==this.getAppDataItem("defaultEditor")}},{key:"setLastSize",value:function(e){this.setAppDataItem("lastSize",e)}},{key:"getLastSize",value:function(){return this.getAppDataItem("lastSize")}},{key:"acceptsThemes",value:function(){return!(this.content.package_info&&"acceptsThemes"in this.content.package_info)||this.content.package_info.acceptsThemes}},{key:"getClientDataKey",value:function(){return this.legacy_url?this.legacy_url:this.uuid}},{key:"hasValidHostedUrl",value:function(){return this.hosted_url||this.legacy_url}},{key:"keysToIgnoreWhenCheckingContentEquality",value:function(){return["active","disassociatedItemIds","associatedItemIds"].concat(Ce(Ae(t.prototype),"keysToIgnoreWhenCheckingContentEquality",this).call(this))}},{key:"isAssociative",value:function(){return Component.associativeAreas().includes(this.area)}},{key:"associateWithItem",value:function(e){this.associatedItemIds.push(e.uuid)}},{key:"isExplicitlyEnabledForItem",value:function(e){return-1!==this.associatedItemIds.indexOf(e.uuid)}},{key:"isExplicitlyDisabledForItem",value:function(e){return-1!==this.disassociatedItemIds.indexOf(e.uuid)}},{key:"content_type",get:function(){return"SN|Component"}}])&&Me(n.prototype,r),i&&Me(n,i),t}(B),Ee=n(94),De=n.n(Ee),Re=n(1),Pe=n.n(Re);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return(Fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ne(t).call(this,e))).notes||(n.notes=[]),n.data||(n.data={}),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,e),n=t,(r=[{key:"mapContentToLocalProperties",value:function(e){Fe(Ne(t.prototype),"mapContentToLocalProperties",this).call(this,e),this.url=e.url,this.name=e.name,this.data=e.data||{},this.default=e.default,this.systemEditor=e.systemEditor}},{key:"structureParams",value:function(){var e={url:this.url,name:this.name,data:this.data,default:this.default,systemEditor:this.systemEditor},n=Fe(Ne(t.prototype),"structureParams",this).call(this);return Object.assign(n,e),n}},{key:"referenceParams",value:function(){return De()(this.notes,(function(e){return{uuid:e.uuid,content_type:e.content_type}}))}},{key:"addItemAsRelationship",value:function(e){"Note"==e.content_type&&(O()(this.notes,e)||this.notes.push(e)),Fe(Ne(t.prototype),"addItemAsRelationship",this).call(this,e)}},{key:"removeItemAsRelationship",value:function(e){"Note"==e.content_type&&Pe()(this.notes,e),Fe(Ne(t.prototype),"removeItemAsRelationship",this).call(this,e)}},{key:"removeAndDirtyAllRelationships",value:function(){Fe(Ne(t.prototype),"removeAndDirtyAllRelationships",this).call(this),this.notes=[]}},{key:"removeReferencesNotPresentIn",value:function(e){Fe(Ne(t.prototype),"removeReferencesNotPresentIn",this).call(this,e);var n=e.map((function(e){return e.uuid}));this.notes.forEach(function(e){n.includes(e.uuid)||E()(this.notes,{uuid:e.uuid})}.bind(this))}},{key:"potentialItemOfInterestHasChangedItsUUID",value:function(e,t,n){"Note"===e.content_type&&O()(this.notes,{uuid:t})&&(E()(this.notes,{uuid:t}),this.notes.push(e))}},{key:"setData",value:function(e,t){return!(JSON.stringify(this.data[e])===JSON.stringify(t)||(this.data[e]=t,0))}},{key:"dataForKey",value:function(e){return this.data[e]||{}}},{key:"content_type",get:function(){return"SN|Editor"}}])&&je(n.prototype,r),t}(B);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t,n){return(ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ve(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var qe=function e(t){Ke(this,e),W()(this,t),this.running=!1,this.error=!1,this.lastExecuted&&(this.lastExecuted=new Date(this.lastExecuted))},Je=function(e){function t(e){var n;return Ke(this,t),n=function(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ve(t).call(this,e)),e.actions&&(n.actions=e.actions.map((function(e){return new qe(e)}))),n.actions||(n.actions=[]),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(t,e),n=t,(r=[{key:"actionsWithContextForItem",value:function(e){return this.actions.filter((function(t){return t.context==e.content_type||"Item"==t.context}))}},{key:"mapContentToLocalProperties",value:function(e){ze(Ve(t.prototype),"mapContentToLocalProperties",this).call(this,e),this.description=e.description,this.url=e.url,this.name=e.name,this.package_info=e.package_info,this.supported_types=e.supported_types,e.actions&&(this.actions=e.actions.map((function(e){return new qe(e)})))}},{key:"structureParams",value:function(){var e={name:this.name,url:this.url,package_info:this.package_info,description:this.description,actions:this.actions.map((function(e){return z()(e,["subrows","subactions"])})),supported_types:this.supported_types},n=ze(Ve(t.prototype),"structureParams",this).call(this);return Object.assign(n,e),n}},{key:"content_type",get:function(){return"Extension"}}])&&He(n.prototype,r),t}(B);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ze(t).call(this,e))).area="themes",n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,e),n=t,(r=[{key:"isLayerable",value:function(){return this.package_info&&this.package_info.layerable}},{key:"setMobileRules",value:function(e){this.setAppDataItem("mobileRules",e)}},{key:"getMobileRules",value:function(){return this.getAppDataItem("mobileRules")||{constants:{},rules:{}}}},{key:"hasMobileRules",value:function(){return this.getAppDataItem("mobileRules")}},{key:"setNotAvailOnMobile",value:function(e){this.setAppDataItem("notAvailableOnMobile",e)}},{key:"getNotAvailOnMobile",value:function(){return this.getAppDataItem("notAvailableOnMobile")}},{key:"setMobileActive",value:function(e){this.setAppDataItem("mobileActive",e)}},{key:"isMobileActive",value:function(){return this.getAppDataItem("mobileActive")}},{key:"content_type",get:function(){return"SN|Theme"}},{key:"displayName",get:function(){return"Theme"}}])&&Ye(n.prototype,r),t}(Ie);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e,t,n){return(rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=it(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ot=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,it(t).apply(this,arguments))}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,e),n=t,(r=[{key:"mapContentToLocalProperties",value:function(e){rt(it(t.prototype),"mapContentToLocalProperties",this).call(this,e),this.storage=e.storage}},{key:"content_type",get:function(){return"SN|EncryptedStorage"}}])&&tt(n.prototype,r),t}(B),st=n(21),ct=n.n(st),ut=n(55),lt=n.n(ut);function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e,t,n){return t&&dt(e.prototype,t),n&&dt(e,n),e}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,pt(t).call(this,e))).content.desktopPrivileges||(n.content.desktopPrivileges={}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,e),ht(t,null,[{key:"contentType",value:function(){return"SN|Privileges"}}]),ht(t,[{key:"setCredentialsForAction",value:function(e,t){this.content.desktopPrivileges[e]=t}},{key:"getCredentialsForAction",value:function(e){return this.content.desktopPrivileges[e]||[]}},{key:"toggleCredentialForAction",value:function(e,t){this.isCredentialRequiredForAction(e,t)?this.removeCredentialForAction(e,t):this.addCredentialForAction(e,t)}},{key:"removeCredentialForAction",value:function(e,t){Pe()(this.content.desktopPrivileges[e],t)}},{key:"addCredentialForAction",value:function(e,t){var n=this.getCredentialsForAction(e);n.push(t),this.setCredentialsForAction(e,n)}},{key:"isCredentialRequiredForAction",value:function(e,t){return this.getCredentialsForAction(e).includes(t)}}]),t}(B);function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.MappingSourceRemoteRetrieved="MappingSourceRemoteRetrieved",e.MappingSourceRemoteSaved="MappingSourceRemoteSaved",e.MappingSourceLocalSaved="MappingSourceLocalSaved",e.MappingSourceLocalRetrieved="MappingSourceLocalRetrieved",e.MappingSourceLocalDirtied="MappingSourceLocalDirtied",e.MappingSourceComponentRetrieved="MappingSourceComponentRetrieved",e.MappingSourceDesktopInstalled="MappingSourceDesktopInstalled",e.MappingSourceRemoteActionRetrieved="MappingSourceRemoteActionRetrieved",e.MappingSourceFileImport="MappingSourceFileImport",e.ContentTypeClassMapping={Note:se,Tag:te,"SN|SmartTag":pe,Extension:Je,"SN|Editor":Ue,"SN|Theme":Qe,"SN|Component":Ie,"SF|Extension":$e,"SF|MFA":ye,"SN|Privileges":mt},e.isMappingSourceRetrieved=function(t){return[e.MappingSourceRemoteRetrieved,e.MappingSourceComponentRetrieved,e.MappingSourceRemoteActionRetrieved].includes(t)},this.$timeout=t||setTimeout.bind(window),this.itemSyncObservers=[],this.items=[],this.itemsHash={},this.missedReferences={},this.uuidChangeObservers=[]}var t,n;return t=e,(n=[{key:"handleSignout",value:function(){this.items.length=0,this.itemsHash={},this.missedReferences={}}},{key:"addModelUuidChangeObserver",value:function(e,t){this.uuidChangeObservers.push({id:e,callback:t})}},{key:"notifyObserversOfUuidChange",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.uuidChangeObservers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;try{s.callback(e,t)}catch(e){console.error("Notify observers of uuid change exception:",e)}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"alternateUUIDForItem",value:function(t){var n,r,i,a,o,s,c;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return n=this.createItem(t),u.next=3,regeneratorRuntime.awrap(C.crypto.generateUUID());case 3:for(n.uuid=u.sent,n.informReferencesOfUUIDChange(t.uuid,n.uuid),this.informModelsOfUUIDChangeForItem(n,t.uuid,n.uuid),r=!0,i=!1,a=void 0,u.prev=9,o=t.referencingObjects[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)(c=s.value).setIsNoLongerBeingReferencedBy(t),t.setIsNoLongerBeingReferencedBy(c),c.addItemAsRelationship(n);u.next=17;break;case 13:u.prev=13,u.t0=u.catch(9),i=!0,a=u.t0;case 17:u.prev=17,u.prev=18,r||null==o.return||o.return();case 20:if(u.prev=20,!i){u.next=23;break}throw a;case 23:return u.finish(20);case 24:return u.finish(17);case 25:return this.setItemsDirty(t.referencingObjects,!0),this.resolveReferencesForItem(n),this.loggingEnabled&&console.log(t.uuid,"--\x3e",n.uuid),t.deleted=!0,t.content.references=[],this.setItemDirty(t,!1,!1,e.MappingSourceLocalSaved),u.next=33,regeneratorRuntime.awrap(this.mapResponseItemsToLocalModels([t],e.MappingSourceLocalSaved));case 33:return this.addItem(n),this.setItemDirty(n,!0,!0,e.MappingSourceLocalSaved),this.notifyObserversOfUuidChange(t,n),u.abrupt("return",n);case 37:case"end":return u.stop()}}),null,this,[[9,13,17,25],[18,,20,24]])}},{key:"informModelsOfUUIDChangeForItem",value:function(e,t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=this.items[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)o.value.potentialItemOfInterestHasChangedItsUUID(e,t,n)}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"didSyncModelsOffline",value:function(t){this.notifySyncObserversOfModels(t,e.MappingSourceLocalSaved)}},{key:"mapResponseItemsToLocalModels",value:function(e,t,n){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.mapResponseItemsToLocalModelsWithOptions({items:e,source:t,sourceKey:n}));case 1:case"end":return r.stop()}}),null,this)}},{key:"mapResponseItemsToLocalModelsOmittingFields",value:function(e,t,n,r){return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.mapResponseItemsToLocalModelsWithOptions({items:e,omitFields:t,source:n,sourceKey:r}));case 1:case"end":return i.stop()}}),null,this)}},{key:"mapResponseItemsToLocalModelsWithOptions",value:function(e){var t,n,r,i,a,o,s,c,u,l,f,p,d,h,v,m,y,g,b,k,w,x,S,$,_,M,C,A,O,I,E,D,R,P,T,j,F,N,L;return regeneratorRuntime.async((function(U){for(;;)switch(U.prev=U.next){case 0:t=e.items,n=e.omitFields,r=e.source,i=e.sourceKey,e.options,a=[],o=[],s=[],c=!0,u=!1,l=void 0,U.prev=5,f=t[Symbol.iterator]();case 7:if(c=(p=f.next()).done){U.next=58;break}if(d=p.value){U.next=11;break}return U.abrupt("continue",55);case 11:if(h=!d.content&&!d.errorDecrypting,d.content_type&&d.uuid&&!h||d.deleted){U.next=16;break}return console.error("Server response item is corrupt:",d),U.abrupt("continue",55);case 16:if(!Array.isArray(n)){U.next=36;break}for(v=!0,m=!1,y=void 0,U.prev=20,g=n[Symbol.iterator]();!(v=(b=g.next()).done);v=!0)k=b.value,delete d[k];U.next=28;break;case 24:U.prev=24,U.t0=U.catch(20),m=!0,y=U.t0;case 28:U.prev=28,U.prev=29,v||null==g.return||g.return();case 31:if(U.prev=31,!m){U.next=34;break}throw y;case 34:return U.finish(31);case 35:return U.finish(28);case 36:if((w=this.findItem(d.uuid))&&(w.updateFromJSON(d),w.dummy=!1),x=d.content_type||w&&w.content_type,!this.acceptableContentTypes||this.acceptableContentTypes.includes(x)){U.next=42;break}return U.abrupt("continue",55);case 42:if(S=!1,1!=d.deleted){U.next=50;break}if(!d.dirty){U.next=48;break}S=!0,U.next=50;break;case 48:return w&&(a.push(w),s.push(w),this.removeItemLocally(w)),U.abrupt("continue",55);case 50:w||(w=this.createItem(d)),this.addItem(w,S),w.errorDecrypting||s.push(w),a.push(w),o.push(d);case 55:c=!0,U.next=7;break;case 58:U.next=64;break;case 60:U.prev=60,U.t1=U.catch(5),u=!0,l=U.t1;case 64:U.prev=64,U.prev=65,c||null==f.return||f.return();case 67:if(U.prev=67,!u){U.next=70;break}throw l;case 70:return U.finish(67);case 71:return U.finish(64);case 72:for($=!0,_=!1,M=void 0,U.prev=75,C=o.entries()[Symbol.iterator]();!($=(A=C.next()).done);$=!0)O=yt(A.value,2),I=O[0],E=O[1],D=a[I],E.content&&this.resolveReferencesForItem(D),D.didFinishSyncing();U.next=83;break;case 79:U.prev=79,U.t2=U.catch(75),_=!0,M=U.t2;case 83:U.prev=83,U.prev=84,$||null==C.return||C.return();case 86:if(U.prev=86,!_){U.next=89;break}throw M;case 89:return U.finish(86);case 90:return U.finish(83);case 91:for(R=this.popMissedReferenceStructsForObjects(o),P=!0,T=!1,j=void 0,U.prev=95,F=function(){var e=L.value,t=a.find((function(t){return t.uuid==e.reference_uuid}));t&&e.for_item.addItemAsRelationship(t)},N=R[Symbol.iterator]();!(P=(L=N.next()).done);P=!0)F();U.next=104;break;case 100:U.prev=100,U.t3=U.catch(95),T=!0,j=U.t3;case 104:U.prev=104,U.prev=105,P||null==N.return||N.return();case 107:if(U.prev=107,!T){U.next=110;break}throw j;case 110:return U.finish(107);case 111:return U.finish(104);case 112:return U.next=114,regeneratorRuntime.awrap(this.notifySyncObserversOfModels(s,r,i));case 114:return U.abrupt("return",a);case 115:case"end":return U.stop()}}),null,this,[[5,60,64,72],[20,24,28,36],[29,,31,35],[65,,67,71],[75,79,83,91],[84,,86,90],[95,100,104,112],[105,,107,111]])}},{key:"missedReferenceBuildKey",value:function(e,t){return"".concat(e,":").concat(t)}},{key:"popMissedReferenceStructsForObjects",value:function(e){if(!e||0==e.length)return[];for(var t=[],n=[],r=e.map((function(e){return e.uuid})),i=r[0].length,a=0,o=Object.keys(this.missedReferences);a<o.length;a++){var s=o[a];r.includes(s.substring(0,i))&&(t.push(this.missedReferences[s]),n.push(s))}for(var c=0,u=n;c<u.length;c++){var l=u[c];delete this.missedReferences[l]}return t}},{key:"resolveReferencesForItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.errorDecrypting){var n=e.contentObject;if(e.updateLocalRelationships(),n.references){var r=n.references.slice(),i=r.map((function(e){return e.uuid})),a=!0,o=this.findItems(i,a),s=!0,c=!1,u=void 0;try{for(var l,f=o.entries()[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var p=yt(l.value,2),d=p[0],h=p[1];if(h)e.addItemAsRelationship(h),t&&this.setItemDirty(h,!0);else{var v=i[d],m=this.missedReferenceBuildKey(v,e.uuid);if(!this.missedReferences[m]){var y={reference_uuid:v,for_item:e};this.missedReferences[m]=y}}}}catch(e){c=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}}}}},{key:"notifySyncObserversOfModels",value:function(e,t,n){var r,i,a,o,s,c,u,l=this;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:r=this.itemSyncObservers.sort((function(e,t){return e.priority<t.priority?-1:1})),i=!0,a=!1,o=void 0,f.prev=4,s=function(){var r,i,a,o,s,c,f,p,d,h;return regeneratorRuntime.async((function(v){for(;;)switch(v.prev=v.next){case 0:for(r=u.value,i=r.types.includes("*")?e:e.filter((function(e){return r.types.includes(e.content_type)})),a=[],o=[],s=!0,c=!1,f=void 0,v.prev=6,p=i[Symbol.iterator]();!(s=(d=p.next()).done);s=!0)(h=d.value).deleted?o.push(h):a.push(h);v.next=14;break;case 10:v.prev=10,v.t0=v.catch(6),c=!0,f=v.t0;case 14:v.prev=14,v.prev=15,s||null==p.return||p.return();case 17:if(v.prev=17,!c){v.next=20;break}throw f;case 20:return v.finish(17);case 21:return v.finish(14);case 22:if(!(i.length>0)){v.next=25;break}return v.next=25,regeneratorRuntime.awrap(l._callSyncObserverCallbackWithTimeout(r,i,a,o,t,n));case 25:case"end":return v.stop()}}),null,null,[[6,10,14,22],[15,,17,21]])},c=r[Symbol.iterator]();case 7:if(i=(u=c.next()).done){f.next=13;break}return f.next=10,regeneratorRuntime.awrap(s());case 10:i=!0,f.next=7;break;case 13:f.next=19;break;case 15:f.prev=15,f.t0=f.catch(4),a=!0,o=f.t0;case 19:f.prev=19,f.prev=20,i||null==c.return||c.return();case 22:if(f.prev=22,!a){f.next=25;break}throw o;case 25:return f.finish(22);case 26:return f.finish(19);case 27:case"end":return f.stop()}}),null,this,[[4,15,19,27],[20,,22,26]])}},{key:"_callSyncObserverCallbackWithTimeout",value:function(e,t,n,r,i,a){var o=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise((function(s,c){o.$timeout((function(){try{e.callback(t,n,r,i,a)}catch(e){console.error("Sync observer exception",e)}finally{s()}}))})));case 1:case"end":return s.stop()}}))}},{key:"setItemDirty",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;this.setItemsDirty([e],t,n,r,i)}},{key:"setItemsDirty",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=!0,s=!1,c=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var f=u.value;f.setDirty(n,r)}}catch(e){s=!0,c=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}this.notifySyncObserversOfModels(t,i||e.MappingSourceLocalDirtied,a)}},{key:"createItem",value:function(t){var n=e.ContentTypeClassMapping&&e.ContentTypeClassMapping[t.content_type];return n||(n=B),new n(t)}},{key:"createDuplicateItemFromResponseItem",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if("function"!=typeof e.setDirty){r.next=3;break}return console.error("Attempting to create conflicted copy of non-response item."),r.abrupt("return",null);case 3:return t=JSON.parse(JSON.stringify(e)),r.next=6,regeneratorRuntime.awrap(C.crypto.generateUUID());case 6:return t.uuid=r.sent,n=this.createItem(t),r.abrupt("return",n);case 9:case"end":return r.stop()}}),null,this)}},{key:"duplicateItemAndAddAsConflict",value:function(e){return this.duplicateItemWithCustomContentAndAddAsConflict({content:e.content,duplicateOf:e})}},{key:"duplicateItemWithCustomContentAndAddAsConflict",value:function(e){var t=e.content,n=e.duplicateOf,r=this.duplicateItemWithCustomContent({content:t,duplicateOf:n});return this.addDuplicatedItemAsConflict({duplicate:r,duplicateOf:n}),r}},{key:"addDuplicatedItemAsConflict",value:function(e){var t=e.duplicate,n=e.duplicateOf;this.addDuplicatedItem(t,n),t.content.conflict_of=n.uuid}},{key:"duplicateItemWithCustomContent",value:function(e){var t=e.content,n=e.duplicateOf,r=new n.constructor({content:t});return r.created_at=n.created_at,r.content_type||(r.content_type=n.content_type),r}},{key:"duplicateItemAndAdd",value:function(e){var t=this.duplicateItemWithoutAdding(e);return this.addDuplicatedItem(t,e),t}},{key:"duplicateItemWithoutAdding",value:function(e){var t=new e.constructor({content:e.content});return t.created_at=e.created_at,t.content_type||(t.content_type=e.content_type),t}},{key:"addDuplicatedItem",value:function(e,t){this.addItem(e);var n=!0,r=!1,i=void 0;try{for(var a,o=t.referencingObjects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.addItemAsRelationship(e),this.setItemDirty(s,!0)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}this.resolveReferencesForItem(e),this.setItemDirty(e,!0)}},{key:"addItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addItems([e],t)}},{key:"addItems",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.forEach((function(e){t.itemsHash[e.uuid]||(t.itemsHash[e.uuid]=e,t.items.push(e))}))}},{key:"addItemSyncObserver",value:function(e,t,n){this.addItemSyncObserverWithPriority({id:e,types:t,callback:n,priority:1})}},{key:"addItemSyncObserverWithPriority",value:function(e){var t=e.id,n=e.priority,r=e.types,i=e.callback;Array.isArray(r)||(r=[r]),this.itemSyncObservers.push({id:t,types:r,priority:n,callback:i})}},{key:"removeItemSyncObserver",value:function(e){E()(this.itemSyncObservers,O()(this.itemSyncObservers,{id:e}))}},{key:"getDirtyItems",value:function(){return this.items.filter((function(e){return 1==e.dirty&&!e.dummy&&(!e.errorDecrypting||e.deleted)}))}},{key:"clearDirtyItems",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.setDirty(!1)}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"removeAndDirtyAllRelationshipsForItem",value:function(e){if(!e.errorDecrypting){var t=!0,n=!1,r=void 0;try{for(var i,a=e.content.references[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=this.findItem(o.uuid);s&&(e.removeItemAsRelationship(s),s.hasRelationshipWithItem(e)&&(s.removeItemAsRelationship(e),this.setItemDirty(s,!0)))}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}var c=!0,u=!1,l=void 0;try{for(var f,p=e.referencingObjects[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var d=f.value;d.removeItemAsRelationship(e),this.setItemDirty(d,!0)}}catch(e){u=!0,l=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw l}}e.referencingObjects=[]}},{key:"setAllItemsDirty",value:function(){var e=this.allItems;this.setItemsDirty(e,!0)}},{key:"setItemToBeDeleted",value:function(e){e.deleted=!0,e.dummy||this.setItemDirty(e,!0),this.removeAndDirtyAllRelationshipsForItem(e)}},{key:"removeItemLocally",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:E()(this.items,{uuid:e.uuid}),delete this.itemsHash[e.uuid],e.isBeingRemovedLocally();case 3:case"end":return t.stop()}}),null,this)}},{key:"allItemsMatchingTypes",value:function(e){return this.allItems.filter((function(t){return(lt()(e,t.content_type)||lt()(e,"*"))&&!t.dummy}))}},{key:"invalidItems",value:function(){return this.allItems.filter((function(e){return e.errorDecrypting}))}},{key:"validItemsForContentType",value:function(e){return this.allItems.filter((function(t){return t.content_type==e&&!t.errorDecrypting}))}},{key:"findItem",value:function(e){return this.itemsHash[e]}},{key:"findItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,u=this.itemsHash[c];(u||t)&&n.push(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:"itemsMatchingPredicate",value:function(e){return this.itemsMatchingPredicates([e])}},{key:"itemsMatchingPredicates",value:function(e){return this.filterItemsWithPredicates(this.allItems,e)}},{key:"filterItemsWithPredicates",value:function(e,t){return e.filter((function(e){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!e.satisfiesPredicate(s))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}))}},{key:"importItems",value:function(t){var n,r,i,a,o,s,c,u,l,f,p,d,h,v,m,y,g,b,k,w,x,S,$,_,M,C,A;return regeneratorRuntime.async((function(O){for(;;)switch(O.prev=O.next){case 0:n=[],r={},i=!0,a=!1,o=void 0,O.prev=5,s=t[Symbol.iterator]();case 7:if(i=(c=s.next()).done){O.next=18;break}if(u=c.value,l=this.findItem(u.uuid)){O.next=13;break}return r[u.uuid]={},O.abrupt("continue",15);case 13:f=this.duplicateItemWithoutAdding(l),r[u.uuid]={frozenValue:f,itemRef:l};case 15:i=!0,O.next=7;break;case 18:O.next=24;break;case 20:O.prev=20,O.t0=O.catch(5),a=!0,o=O.t0;case 24:O.prev=24,O.prev=25,i||null==s.return||s.return();case 27:if(O.prev=27,!a){O.next=30;break}throw o;case 30:return O.finish(27);case 31:return O.finish(24);case 32:p=!0,d=!1,h=void 0,O.prev=35,v=t[Symbol.iterator]();case 37:if(p=(m=v.next()).done){O.next=52;break}if(y=m.value,g=r[y.uuid],b=g.frozenValue,k=g.itemRef,!b||k.errorDecrypting){O.next=47;break}return O.next=43,regeneratorRuntime.awrap(this.createDuplicateItemFromResponseItem(y));case 43:w=O.sent,y.deleted||b.isItemContentEqualWith(w)||(this.addDuplicatedItemAsConflict({duplicate:w,duplicateOf:k}),n.push(w)),O.next=49;break;case 47:n.push(y),k&&k.errorDecrypting&&(k.errorDecrypting=!1);case 49:p=!0,O.next=37;break;case 52:O.next=58;break;case 54:O.prev=54,O.t1=O.catch(35),d=!0,h=O.t1;case 58:O.prev=58,O.prev=59,p||null==v.return||v.return();case 61:if(O.prev=61,!d){O.next=64;break}throw h;case 64:return O.finish(61);case 65:return O.finish(58);case 66:return O.next=68,regeneratorRuntime.awrap(this.mapResponseItemsToLocalModels(n,e.MappingSourceFileImport));case 68:for(x=O.sent,S=!0,$=!1,_=void 0,O.prev=72,M=x[Symbol.iterator]();!(S=(C=M.next()).done);S=!0)A=C.value,this.setItemDirty(A,!0,!1),A.deleted=!1;O.next=80;break;case 76:O.prev=76,O.t2=O.catch(72),$=!0,_=O.t2;case 80:O.prev=80,O.prev=81,S||null==M.return||M.return();case 83:if(O.prev=83,!$){O.next=86;break}throw _;case 86:return O.finish(83);case 87:return O.finish(80);case 88:return O.abrupt("return",x);case 89:case"end":return O.stop()}}),null,this,[[5,20,24,32],[25,,27,31],[35,54,58,66],[59,,61,65],[72,76,80,88],[81,,83,87]])}},{key:"getAllItemsJSONData",value:function(e,t,n){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.getJSONDataForItems(this.allItems,e,t,n));case 1:case"end":return r.stop()}}),null,this)}},{key:"getJSONDataForItems",value:function(e,t,n,r){return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(e.map((function(e){return new G(e,t,n).paramsForExportFile()}))).then((function(e){if(r&&0==e.length)return null;var i={items:e};return t&&(i.auth_params=n),JSON.stringify(i,null,2)})));case 1:case"end":return i.stop()}}))}},{key:"computeDataIntegrityHash",value:function(){var e,t,n,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,e=this.allNondummyItems.sort((function(e,t){return t.updated_at-e.updated_at})),t=e.map((function(e){return e.updatedAtTimestamp()})),n=t.join(","),i.next=6,regeneratorRuntime.awrap(C.crypto.sha256(n));case 6:return r=i.sent,i.abrupt("return",r);case 10:return i.prev=10,i.t0=i.catch(0),console.error("Error computing data integrity hash",i.t0),i.abrupt("return",null);case 14:case"end":return i.stop()}}),null,this,[[0,10]])}},{key:"allItems",get:function(){return this.items.slice()}},{key:"allNondummyItems",get:function(){return this.items.filter((function(e){return!e.dummy}))}}])&&gt(t.prototype,n),e}();function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=function(){function e(t){var n=t.modelManager,r=t.syncManager,i=t.desktopManager,a=t.nativeExtManager,o=t.alertManager,s=t.$uiRunner,c=t.$timeout,u=t.environment,l=t.platform;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.ClientDataDomain="org.standardnotes.sn.components",this.$uiRunner=s||function(e){e()},this.$timeout=c||setTimeout.bind(window),this.modelManager=n,this.syncManager=r,this.desktopManager=i,this.nativeExtManager=a,this.alertManager=o,this.streamObservers=[],this.contextStreamObservers=[],this.activeComponents=[],this.environment=u,this.platform=l,this.isDesktop="desktop"==this.environment,this.isMobile="mobile"==this.environment,"mobile"!=u&&this.configureForNonMobileUsage(),this.configureForGeneralUsage(),this.permissionDialogs=[],this.handlers=[]}var t,n;return t=e,(n=[{key:"configureForGeneralUsage",value:function(){var e=this;this.modelManager.addItemSyncObserver("component-manager","*",(function(t,n,r,i,a){var o=t.filter((function(e){return"SN|Component"===e.content_type||"SN|Theme"==e.content_type}));o.length>0&&i!=bt.MappingSourceRemoteSaved&&e.isDesktop&&e.desktopManager.syncComponentsInstallation(o);var s=!0,c=!1,u=void 0;try{for(var l,f=o[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var p=l.value,d=O()(e.activeComponents,{uuid:p.uuid});!p.active||p.deleted||d?!p.active&&d&&e.deactivateComponent(p):e.activateComponent(p)}}catch(e){c=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}var h=!0,v=!1,m=void 0;try{for(var y,g=function(){var n=y.value;if(a&&a==n.component.uuid)return"continue";var r=t.filter((function(e){return-1!==n.contentTypes.indexOf(e.content_type)}));if(0==r.length)return"continue";var i=[{name:"stream-items",content_types:n.contentTypes.sort()}];e.runWithPermissions(n.component,i,(function(){e.sendItemsInReply(n.component,r,n.originalMessage)}))},b=e.streamObservers[Symbol.iterator]();!(h=(y=b.next()).done);h=!0)g()}catch(e){v=!0,m=e}finally{try{h||null==b.return||b.return()}finally{if(v)throw m}}var k=[{name:"stream-context-item"}],w=!0,x=!1,S=void 0;try{for(var $,_=function(){var n=$.value;if(a&&a==n.component.uuid)return"continue";var r=!0,o=!1,s=void 0;try{for(var c,u=e.handlers[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var l=c.value;(l.areas.includes(n.component.area)||l.areas.includes("*"))&&l.contextRequestHandler&&(C=l.contextRequestHandler(n.component))&&(A=O()(t,{uuid:C.uuid}))&&e.runWithPermissions(n.component,k,(function(){e.sendContextItemInReply(n.component,A,n.originalMessage,i)}))}}catch(e){o=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw s}}},M=e.contextStreamObservers[Symbol.iterator]();!(w=($=M.next()).done);w=!0){var C,A;_()}}catch(e){x=!0,S=e}finally{try{w||null==M.return||M.return()}finally{if(x)throw S}}}))}},{key:"configureForNonMobileUsage",value:function(){var e=this,t=function(t){var n=!0,r=!1,i=void 0;try{for(var a,o=e.activeComponents[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(document.activeElement==e.iframeForComponent(s)){e.$timeout((function(){e.focusChangedForComponent(s)}));break}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}};window.addEventListener?window.addEventListener("focus",t,!0):window.attachEvent("onfocusout",t),window.addEventListener?window.addEventListener("blur",t,!0):window.attachEvent("onblur",t),this.desktopManager.registerUpdateObserver((function(t){t.active&&t.isTheme()&&e.postActiveThemesToAllComponents()})),window.addEventListener("message",(function(t){e.loggingEnabled&&console.log("Web app: received message",t),t.data.sessionKey&&e.handleMessage(e.componentForSessionKey(t.data.sessionKey),t.data)}),!1)}},{key:"postActiveThemesToAllComponents",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.components[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;!a.isTheme()&&a.active&&a.window&&this.postActiveThemesToComponent(a)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"getActiveThemes",value:function(){return this.componentsForArea("themes").filter((function(e){return e.active}))}},{key:"urlsForActiveThemes",value:function(){var e=this;return this.getActiveThemes().map((function(t){return e.urlForComponent(t)}))}},{key:"postActiveThemesToComponent",value:function(e){var t={themes:this.urlsForActiveThemes()};this.sendMessageToComponent(e,{action:"themes",data:t})}},{key:"contextItemDidChangeInArea",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.handlers[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!1!==o.areas.includes(e)||o.areas.includes("*")){var s=this.contextStreamObservers.filter((function(t){return t.component.area===e})),c=!0,u=!1,l=void 0;try{for(var f,p=s[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var d=f.value;if(o.contextRequestHandler){var h=o.contextRequestHandler(d.component);h&&this.sendContextItemInReply(d.component,h,d.originalMessage)}}}catch(e){u=!0,l=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw l}}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"setComponentHidden",value:function(e,t){if(t)e.hidden=!0;else if(e.hidden){e.hidden=!1;var n=O()(this.contextStreamObservers,{identifier:e.uuid});n&&this.handleStreamContextItemMessage(e,n.originalMessage);var r=O()(this.streamObservers,{identifier:e.uuid});r&&this.handleStreamItemsMessage(e,r.originalMessage)}}},{key:"jsonForItem",value:function(t,n,r){var i={uuid:t.uuid,content_type:t.content_type,created_at:t.created_at,updated_at:t.updated_at,deleted:t.deleted};return i.content=t.createContentJSONFromProperties(),i.clientData=t.getDomainDataItem(n.getClientDataKey(),e.ClientDataDomain)||{},!r||r!=bt.MappingSourceRemoteSaved&&r!=bt.MappingSourceLocalSaved||(i.isMetadataUpdate=!0),this.removePrivatePropertiesFromResponseItems([i],n,{type:"outgoing"}),i}},{key:"sendItemsInReply",value:function(e,t,n,r){var i=this;this.loggingEnabled&&console.log("Web|componentManager|sendItemsInReply",e,t,n);var a={items:{}},o=t.map((function(t){return i.jsonForItem(t,e,r)}));a.items=o,this.replyToMessage(e,n,a)}},{key:"sendContextItemInReply",value:function(e,t,n,r){this.loggingEnabled&&console.log("Web|componentManager|sendContextItemInReply",e,t,n);var i={item:this.jsonForItem(t,e,r)};this.replyToMessage(e,n,i)}},{key:"replyToMessage",value:function(e,t,n){var r={action:"reply",original:t,data:n};this.sendMessageToComponent(e,r)}},{key:"sendMessageToComponent",value:function(e,t){if(!e.hidden||["component-registered","themes"].includes(t.action)){this.loggingEnabled&&console.log("Web|sendMessageToComponent",e,t);var n=this.urlForComponent(e);n.startsWith("http")||n.startsWith("file")||(n=window.location.href+n),e.window||this.alertManager.alert({text:"Standard Notes is trying to communicate with ".concat(e.name,", but an error is occurring. Please restart this extension and try again.")}),this.isMobile&&(t=JSON.stringify(t)),e.window.postMessage(t,n)}else this.loggingEnabled&&console.log("Component disabled for current item, not sending any messages.",e.name)}},{key:"componentsForArea",value:function(e){return this.components.filter((function(t){return t.area===e}))}},{key:"urlForComponent",value:function(e){if(e.offlineOnly&&!this.isDesktop)return null;if(e.offlineOnly||this.isDesktop&&e.local_url)return e.local_url&&e.local_url.replace("sn://",this.desktopManager.getExtServerHost());var t=e.hosted_url||e.legacy_url;if(this.isMobile){var n="ios"==this.platform?"localhost":"10.0.2.2";t=t.replace("localhost",n).replace("sn.local",n)}return t}},{key:"componentForUrl",value:function(e){return this.components.filter((function(t){return t.hosted_url===e||t.legacy_url===e}))[0]}},{key:"componentForSessionKey",value:function(e){var t=O()(this.components,{sessionKey:e});if(!t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.handlers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.componentForSessionKeyHandler&&(t=s.componentForSessionKeyHandler(e)))break}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}return t}},{key:"handleMessage",value:function(e,t){var n=this;if(!e)return console.log("Component not defined for message, returning",t),void this.alertManager.alert({text:"An extension is trying to communicate with Standard Notes, but there is an error establishing a bridge. Please restart the app and try again."});if(e.readonly&&["save-items","associate-item","deassociate-item","create-item","create-items","delete-items","set-component-data"].includes(t.action))this.alertManager.alert({text:"The extension ".concat(e.name," is trying to save, but it is in a locked state and cannot accept changes.")});else{if("stream-items"===t.action)this.handleStreamItemsMessage(e,t);else if("stream-context-item"===t.action)this.handleStreamContextItemMessage(e,t);else if("set-component-data"===t.action)this.handleSetComponentDataMessage(e,t);else if("delete-items"===t.action)this.handleDeleteItemsMessage(e,t);else if("create-items"===t.action||"create-item"===t.action)this.handleCreateItemsMessage(e,t);else if("save-items"===t.action)this.handleSaveItemsMessage(e,t);else if("toggle-activate-component"===t.action){var r=this.modelManager.findItem(t.data.uuid);this.handleToggleComponentMessage(e,r,t)}else"request-permissions"===t.action?this.handleRequestPermissionsMessage(e,t):"install-local-component"===t.action?this.handleInstallLocalComponentMessage(e,t):"duplicate-item"===t.action&&this.handleDuplicateItemMessage(e,t);var i=!0,a=!1,o=void 0;try{for(var s,c=function(){var r=s.value;r.actionHandler&&(r.areas.includes(e.area)||r.areas.includes("*"))&&n.$timeout((function(){r.actionHandler(e,t.action,t.data)}))},u=this.handlers[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)c()}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}},{key:"removePrivatePropertiesFromResponseItems",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("incoming"==n.type){var r=["updated_at"],i=!0,a=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if("function"!=typeof u.setDirty){var l=!0,f=!1,p=void 0;try{for(var d,h=r[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var v=d.value;delete u[v]}}catch(e){f=!0,p=e}finally{try{l||null==h.return||h.return()}finally{if(f)throw p}}}else console.error("Attempting to pass object. Use JSON.")}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}if(!(t&&this.nativeExtManager&&this.nativeExtManager.isSystemExtension(t))){var m=["autoupdateDisabled","permissions","active"];n&&n.includeUrls&&(m=m.concat(["url","hosted_url","local_url"]));var y=!0,g=!1,b=void 0;try{for(var k,w=e[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var x=k.value;if("function"!=typeof x.setDirty){var S=!0,$=!1,_=void 0;try{for(var M,C=m[Symbol.iterator]();!(S=(M=C.next()).done);S=!0){var A=M.value;delete x.content[A]}}catch(e){$=!0,_=e}finally{try{S||null==C.return||C.return()}finally{if($)throw _}}}else console.error("Attempting to pass object. Use JSON.")}}catch(e){g=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(g)throw b}}}}},{key:"handleStreamItemsMessage",value:function(e,t){var n=this,r=[{name:"stream-items",content_types:t.data.content_types.sort()}];this.runWithPermissions(e,r,(function(){O()(n.streamObservers,{identifier:e.uuid})||n.streamObservers.push({identifier:e.uuid,component:e,originalMessage:t,contentTypes:t.data.content_types});var r=[],i=!0,a=!1,o=void 0;try{for(var s,c=t.data.content_types[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;r=r.concat(n.modelManager.validItemsForContentType(u))}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}n.sendItemsInReply(e,r,t)}))}},{key:"handleStreamContextItemMessage",value:function(e,t){var n=this;this.runWithPermissions(e,[{name:"stream-context-item"}],(function(){O()(n.contextStreamObservers,{identifier:e.uuid})||n.contextStreamObservers.push({identifier:e.uuid,component:e,originalMessage:t});var r=!0,i=!1,a=void 0;try{for(var o,s=n.handlersForArea(e.area)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;if(c.contextRequestHandler){var u=c.contextRequestHandler(e);u&&n.sendContextItemInReply(e,u,t)}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}))}},{key:"isItemIdWithinComponentContextJurisdiction",value:function(e,t){return this.itemIdsInContextJurisdictionForComponent(t).includes(e)}},{key:"itemIdsInContextJurisdictionForComponent",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=this.handlersForArea(e.area)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.contextRequestHandler){var c=s.contextRequestHandler(e);c&&t.push(c.uuid)}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"handlersForArea",value:function(e){return this.handlers.filter((function(t){return t.areas.includes(e)}))}},{key:"handleSaveItemsMessage",value:function(t,n){var r,i,a,o,s,c,u,l,f,p,d,h=this;return regeneratorRuntime.async((function(v){for(;;)switch(v.prev=v.next){case 0:r=n.data.items,i=[],a=this.itemIdsInContextJurisdictionForComponent(t),o=r.slice(),s=!0,c=!1,u=void 0,v.prev=7,l=r.slice()[Symbol.iterator]();case 9:if(s=(f=l.next()).done){v.next=18;break}if(p=f.value,!a.includes(p.uuid)){v.next=15;break}return i.push({name:"stream-context-item"}),Pe()(o,p),v.abrupt("break",18);case 15:s=!0,v.next=9;break;case 18:v.next=24;break;case 20:v.prev=20,v.t0=v.catch(7),c=!0,u=v.t0;case 24:v.prev=24,v.prev=25,s||null==l.return||l.return();case 27:if(v.prev=27,!c){v.next=30;break}throw u;case 30:return v.finish(27);case 31:return v.finish(24);case 32:o.length>0&&(d=ct()(o.map((function(e){return e.content_type}))).sort(),i.push({name:"stream-items",content_types:d})),this.runWithPermissions(t,i,(function(){var i,a,o,s,c,u,l,f,p,d,v,m,y,g,b,k,w,x,S;return regeneratorRuntime.async((function($){for(;;)switch($.prev=$.next){case 0:for(h.removePrivatePropertiesFromResponseItems(r,t,{includeUrls:!0,type:"incoming"}),i=r.map((function(e){return e.uuid})),a=h.modelManager.findItems(i),o=0,s=!0,c=!1,u=void 0,$.prev=7,l=a[Symbol.iterator]();!(s=(f=l.next()).done);s=!0)(p=f.value).locked&&(E()(r,{uuid:p.uuid}),o++);$.next=15;break;case 11:$.prev=11,$.t0=$.catch(7),c=!0,u=$.t0;case 15:$.prev=15,$.prev=16,s||null==l.return||l.return();case 18:if($.prev=18,!c){$.next=21;break}throw u;case 21:return $.finish(18);case 22:return $.finish(15);case 23:return o>0&&(d=1==o?"item":"items",v=1==o?"is":"are",h.alertManager.alert({title:"Items Locked",text:"".concat(o," ").concat(d," you are attempting to save ").concat(v," locked and cannot be edited.")})),$.next=26,regeneratorRuntime.awrap(h.modelManager.mapResponseItemsToLocalModels(r,bt.MappingSourceComponentRetrieved,t.uuid));case 26:m=$.sent,y=!0,g=!1,b=void 0,$.prev=30,k=r[Symbol.iterator]();case 32:if(y=(w=k.next()).done){$.next=42;break}if(x=w.value,S=O()(m,{uuid:x.uuid})){$.next=38;break}return h.alertManager.alert({text:"The extension ".concat(t.name," is trying to save an item with type ").concat(x.content_type,", but that item does not exist. Please restart this extension and try again.")}),$.abrupt("continue",39);case 38:S.locked||(x.clientData&&S.setDomainDataItem(t.getClientDataKey(),x.clientData,e.ClientDataDomain),h.modelManager.setItemDirty(S,!0,!0,bt.MappingSourceComponentRetrieved,t.uuid));case 39:y=!0,$.next=32;break;case 42:$.next=48;break;case 44:$.prev=44,$.t1=$.catch(30),g=!0,b=$.t1;case 48:$.prev=48,$.prev=49,y||null==k.return||k.return();case 51:if($.prev=51,!g){$.next=54;break}throw b;case 54:return $.finish(51);case 55:return $.finish(48);case 56:h.syncManager.sync().then((function(e){var r=Object.assign({},n);r.action=e&&e.error?"save-error":"save-success",h.replyToMessage(t,n,{error:e&&e.error}),h.handleMessage(t,r)}));case 57:case"end":return $.stop()}}),null,null,[[7,11,15,23],[16,,18,22],[30,44,48,56],[49,,51,55]])}));case 34:case"end":return v.stop()}}),null,this,[[7,20,24,32],[25,,27,31]])}},{key:"handleDuplicateItemMessage",value:function(e,t){var n=this,r=t.data.item,i=this.modelManager.findItem(r.uuid),a=[{name:"stream-items",content_types:[i.content_type]}];this.runWithPermissions(e,a,(function(){var r=n.modelManager.duplicateItemAndAdd(i);n.syncManager.sync(),n.replyToMessage(e,t,{item:n.jsonForItem(r,e)})}))}},{key:"handleCreateItemsMessage",value:function(t,n){var r=this,i=n.data.item?[n.data.item]:n.data.items,a=[{name:"stream-items",content_types:ct()(i.map((function(e){return e.content_type})))}];this.runWithPermissions(t,a,(function(){r.removePrivatePropertiesFromResponseItems(i,t,{type:"incoming"});var a=[],o=!0,s=!1,c=void 0;try{for(var u,l=i[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var f=u.value,p=r.modelManager.createItem(f);f.clientData&&p.setDomainDataItem(t.getClientDataKey(),f.clientData,e.ClientDataDomain),r.modelManager.addItem(p),r.modelManager.resolveReferencesForItem(p,!0),r.modelManager.setItemDirty(p,!0),a.push(p)}}catch(e){s=!0,c=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}r.syncManager.sync();var d="create-item"==n.action?{item:r.jsonForItem(a[0],t)}:{items:a.map((function(e){return r.jsonForItem(e,t)}))};r.replyToMessage(t,n,d)}))}},{key:"handleDeleteItemsMessage",value:function(e,t){var n=this,r=[{name:"stream-items",content_types:ct()(t.data.items.map((function(e){return e.content_type}))).sort()}];this.runWithPermissions(e,r,(function(){var r,i,a,o,s,c,u,l,f,p,d;return regeneratorRuntime.async((function(h){for(;;)switch(h.prev=h.next){case 0:return r=t.data.items,i=1==r.length?"item":"items",a=null,o=!0,h.next=6,regeneratorRuntime.awrap(n.alertManager.confirm({text:"Are you sure you want to delete ".concat(r.length," ").concat(i,"?")}).catch((function(){o=!1})));case 6:if(!o){h.next=42;break}s=!0,c=!1,u=void 0,h.prev=10,l=r[Symbol.iterator]();case 12:if(s=(f=l.next()).done){h.next=24;break}if(p=f.value,d=n.modelManager.findItem(p.uuid)){h.next=18;break}return n.alertManager.alert({text:"The item you are trying to delete cannot be found."}),h.abrupt("continue",21);case 18:["SN|Component","SN|Theme"].includes(d.content_type)&&n.deactivateComponent(d,!0),n.modelManager.setItemToBeDeleted(d),n.modelManager.notifySyncObserversOfModels([d],bt.MappingSourceRemoteSaved);case 21:s=!0,h.next=12;break;case 24:h.next=30;break;case 26:h.prev=26,h.t0=h.catch(10),c=!0,u=h.t0;case 30:h.prev=30,h.prev=31,s||null==l.return||l.return();case 33:if(h.prev=33,!c){h.next=36;break}throw u;case 36:return h.finish(33);case 37:return h.finish(30);case 38:n.syncManager.sync(),a={deleted:!0},h.next=43;break;case 42:a={deleted:!1};case 43:n.replyToMessage(e,t,a);case 44:case"end":return h.stop()}}),null,null,[[10,26,30,38],[31,,33,37]])}))}},{key:"handleRequestPermissionsMessage",value:function(e,t){var n=this;this.runWithPermissions(e,t.data.permissions,(function(){n.replyToMessage(e,t,{approved:!0})}))}},{key:"handleSetComponentDataMessage",value:function(e,t){var n=this;this.runWithPermissions(e,[],(function(){e.componentData=t.data.componentData,n.modelManager.setItemDirty(e,!0),n.syncManager.sync()}))}},{key:"handleToggleComponentMessage",value:function(e,t,n){this.toggleComponent(t)}},{key:"toggleComponent",value:function(e){var t=this;if("modal"==e.area)this.openModalComponent(e);else if(e.active)this.deactivateComponent(e);else if("SN|Theme"==e.content_type){var n=this.getActiveThemes();this.activateComponent(e),e.isLayerable()||setTimeout((function(){var e=!0,r=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;s&&!s.isLayerable()&&t.deactivateComponent(s)}}catch(e){r=!0,i=e}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}}),10)}else this.activateComponent(e)}},{key:"handleInstallLocalComponentMessage",value:function(e,t){if(!this.nativeExtManager||this.nativeExtManager.isSystemExtension(e)){var n=this.modelManager.findItem(t.data.uuid);this.desktopManager.installComponent(n)}}},{key:"runWithPermissions",value:function(e,t,n){e.permissions||(e.permissions=[]),t=JSON.parse(JSON.stringify(t));var r=e.permissions,i=!0,a=!1,o=void 0;try{for(var s,c=function(){var e=s.value,n=r.find((function(t){return t.name==e.name}));if(!n)return"continue";var i=e.content_types;if(!i)return Pe()(t,e),"continue";var a=!0,o=!1,c=void 0;try{for(var u,l=n.content_types[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value;Pe()(i,f)}}catch(e){o=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw c}}0==i.length&&Pe()(t,e)},u=t.slice()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)c()}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}t.length>0?this.promptForPermissions(e,t,(function(e){e&&n()})):n()}},{key:"promptForPermissions",value:function(e,t,n){var r=this,i={};i.component=e,i.permissions=t,i.permissionsString=this.permissionsStringForPermissions(t,e),i.actionBlock=n,i.callback=function(n){if(n){var a=!0,o=!1,s=void 0;try{for(var c,u=function(){var t=c.value,n=e.permissions.find((function(e){return e.name==t.name}));if(n){var r=n.content_types||[];n.content_types=ct()(r.concat(t.content_types))}else e.permissions.push(t)},l=t[Symbol.iterator]();!(a=(c=l.next()).done);a=!0)u()}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}r.modelManager.setItemDirty(e,!0),r.syncManager.sync()}r.permissionDialogs=r.permissionDialogs.filter((function(r){return r==i?(r.actionBlock&&r.actionBlock(n),!1):!!(r.component!=e||r.permissions!=t&&(a=t,r.permissions.some((function(e){return!a.find((function(t){return JSON.stringify(t)===JSON.stringify(e)}))}))))||(n&&r.actionBlock&&r.actionBlock(n),!1);var a})),r.permissionDialogs.length>0&&r.presentPermissionsDialog(r.permissionDialogs[0])};var a=O()(this.permissionDialogs,{component:e});this.permissionDialogs.push(i),a?console.log("Existing dialog, not presenting."):this.presentPermissionsDialog(i)}},{key:"presentPermissionsDialog",value:function(e){console.error("Must override")}},{key:"openModalComponent",value:function(e){console.error("Must override")}},{key:"registerHandler",value:function(e){this.handlers.push(e)}},{key:"deregisterHandler",value:function(e){var t=O()(this.handlers,{identifier:e});t?this.handlers.splice(this.handlers.indexOf(t),1):console.log("Attempting to deregister non-existing handler")}},{key:"registerComponentWindow",value:function(e,t){return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.window===t&&this.loggingEnabled&&console.log("Web|componentManager","attempting to re-register same component window."),this.loggingEnabled&&console.log("Web|componentManager|registerComponentWindow",e),e.window=t,n.next=5,regeneratorRuntime.awrap(C.crypto.generateUUID());case 5:e.sessionKey=n.sent,this.sendMessageToComponent(e,{action:"component-registered",sessionKey:e.sessionKey,componentData:e.componentData,data:{uuid:e.uuid,environment:this.environment,platform:this.platform,activeThemeUrls:this.urlsForActiveThemes()}}),this.postActiveThemesToComponent(e),this.desktopManager&&this.desktopManager.notifyComponentActivation(e);case 9:case"end":return n.stop()}}),null,this)}},{key:"activateComponent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=1!=e.active;e.active=!0;var i=!0,a=!1,o=void 0;try{for(var s,c=function(){var n=s.value;(n.areas.includes(e.area)||n.areas.includes("*"))&&t.$uiRunner((function(){n.activationHandler&&n.activationHandler(e)}))},u=this.handlers[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)c()}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}r&&!n&&(this.modelManager.setItemDirty(e,!0),this.syncManager.sync()),this.activeComponents.includes(e)||this.activeComponents.push(e),"themes"==e.area&&this.postActiveThemesToAllComponents()}},{key:"deactivateComponent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0!=e.active;e.active=!1,e.sessionKey=null;var i=!0,a=!1,o=void 0;try{for(var s,c=function(){var n=s.value;(n.areas.includes(e.area)||n.areas.includes("*"))&&t.$uiRunner((function(){n.activationHandler&&n.activationHandler(e)}))},u=this.handlers[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)c()}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}r&&!n&&(this.modelManager.setItemDirty(e,!0),this.syncManager.sync()),Pe()(this.activeComponents,e),this.streamObservers=this.streamObservers.filter((function(t){return t.component!==e})),this.contextStreamObservers=this.contextStreamObservers.filter((function(t){return t.component!==e})),"themes"==e.area&&this.postActiveThemesToAllComponents()}},{key:"reloadComponent",value:function(e){var t,n,r,i,a,o,s=this;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:for(e.active=!1,t=!0,n=!1,r=void 0,c.prev=4,i=function(){var t=o.value;(t.areas.includes(e.area)||t.areas.includes("*"))&&s.$uiRunner((function(){t.activationHandler&&t.activationHandler(e)}))},a=this.handlers[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)i();c.next=13;break;case 9:c.prev=9,c.t0=c.catch(4),n=!0,r=c.t0;case 13:c.prev=13,c.prev=14,t||null==a.return||a.return();case 16:if(c.prev=16,!n){c.next=19;break}throw r;case 19:return c.finish(16);case 20:return c.finish(13);case 21:return this.streamObservers=this.streamObservers.filter((function(t){return t.component!==e})),this.contextStreamObservers=this.contextStreamObservers.filter((function(t){return t.component!==e})),"themes"==e.area&&this.postActiveThemesToAllComponents(),c.abrupt("return",new Promise((function(t,n){s.$timeout((function(){e.active=!0;var n=!0,r=!1,i=void 0;try{for(var a,o=s.handlers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var c=a.value;(c.areas.includes(e.area)||c.areas.includes("*"))&&s.$uiRunner((function(){c.activationHandler&&c.activationHandler(e),t()}))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}s.activeComponents.includes(e)||s.activeComponents.push(e),"themes"==e.area&&s.postActiveThemesToAllComponents(),t()}))})));case 25:case"end":return c.stop()}}),null,this,[[4,9,13,21],[14,,16,20]])}},{key:"deleteComponent",value:function(e){this.modelManager.setItemToBeDeleted(e),this.syncManager.sync()}},{key:"isComponentActive",value:function(e){return e.active}},{key:"iframeForComponent",value:function(e){for(var t=0,n=Array.from(document.getElementsByTagName("iframe"));t<n.length;t++){var r=n[t];if(r.dataset.componentId===e.uuid)return r}}},{key:"focusChangedForComponent",value:function(e){var t=document.activeElement==this.iframeForComponent(e),n=!0,r=!1,i=void 0;try{for(var a,o=this.handlers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.focusHandler&&s.focusHandler(e,t)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"handleSetSizeEvent",value:function(e,t){var n=function(e,n){var r="string"==typeof n.width?n.width:"".concat(t.width,"px"),i="string"==typeof n.height?n.height:"".concat(t.height,"px");e&&e.setAttribute("style","width:".concat(r,"; height:").concat(i,";"))};if("rooms"==e.area||"modal"==e.area){var r="rooms"==e.area?"inner":"outer",i=document.getElementById("component-content-".concat(r,"-").concat(e.uuid));i&&n(i,t)}else{var a=this.iframeForComponent(e);if(!a)return;if(n(a,t),"editor-stack"==e.area){var o=a.parentElement;o&&n(o,t)}}}},{key:"editorForNote",value:function(e){var t=this.componentsForArea("editor-editor"),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.isExplicitlyEnabledForItem(e))return s}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}if(this.isMobile){if(!e.content.mobilePrefersPlainEditor)return this.getDefaultEditor()}else if(!e.getAppDataItem("prefersPlainEditor"))return t.filter((function(e){return e.isDefaultEditor()}))[0]}},{key:"permissionsStringForPermissions",value:function(e,t){var n=this,r="",i=e.length,a=function(e,t){return e>0?e==t-1?2==t?" and ":", and ":", ":""};return e.forEach((function(e,o){if("stream-items"===e.name){for(var s=e.content_types.map((function(e){var t=n.modelManager.humanReadableDisplayForContentType(e);return t?t+"s":"items of type "+e})),c="",u=0;u<s.length;u++){var l=s[u];c+=a(u,s.length+i-o-1),c+=l}r+=a(o,i),r+=c,s.length>=2&&o<i-1&&(r+=", ")}else"stream-context-item"===e.name&&(r+=a(o,i),r+={"editor-stack":"working note","note-tags":"working note","editor-editor":"working note"}[t.area])})),r+"."}},{key:"components",get:function(){return this.modelManager.allItemsMatchingTypes(["SN|Component","SN|Theme"])}}])&&kt(t.prototype,n),e}();function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var St=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.item=B.deepMerge({},t),this.defaultContentKeyToDiffOn="text",this.textCharDiffLength=0,"string"==typeof this.item.updated_at&&(this.item.updated_at=new Date(this.item.updated_at))}var t,n;return t=e,(n=[{key:"setPreviousEntry",value:function(e){this.hasPreviousEntry=null!=e,this.item.content[this.defaultContentKeyToDiffOn]&&(this.textCharDiffLength=e?this.item.content[this.defaultContentKeyToDiffOn].length-e.item.content[this.defaultContentKeyToDiffOn].length:this.item.content[this.defaultContentKeyToDiffOn].length)}},{key:"operationVector",value:function(){return null!=this.textCharDiffLength?this.hasPreviousEntry&&0!=this.textCharDiffLength?this.textCharDiffLength<0?-1:1:0:1}},{key:"deltaSize",value:function(){return null!=this.textCharDiffLength?Math.abs(this.textCharDiffLength):1}},{key:"isSameAsEntry",value:function(e){if(!e)return!1;var t=new B(this.item),n=new B(e.item);return t.isItemContentEqualWith(n)}}])&&xt(t.prototype,n),e}();function $t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _t=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entries||(this.entries=[]),t.entries){var n=!0,r=!1,i=void 0;try{for(var a,o=t.entries[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,c=this.createEntryForItem(s.item);c.setPreviousEntry(this.getLastEntry()),this.entries.push(c)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}var t,n;return t=e,(n=[{key:"createEntryForItem",value:function(t){var n=e.HistoryEntryClassMapping&&e.HistoryEntryClassMapping[t.content_type];return n||(n=St),new n(t)}},{key:"getLastEntry",value:function(){return this.entries[this.entries.length-1]}},{key:"addHistoryEntryForItem",value:function(e){var t=this.createEntryForItem(e),n=this.getLastEntry();if(t.setPreviousEntry(n),!t.isSameAsEntry(n))return this.entries.push(t),t}},{key:"clear",value:function(){this.entries.length=0}},{key:"optimize",value:function(){var t=this,n=[],r=function(t){return t.deltaSize()>e.LargeEntryDeltaThreshold},i=function(e,i,a){if(a?n.push(e):-1!==(i=n.indexOf(e))&&n.splice(i,1),a&&r(e)&&-1==e.operationVector()){var o=t.entries[i-1];o&&n.push(o)}};this.entries.forEach((function(e,n){if(0==n||n==t.entries.length-1)i(e,n,!0);else{var a=r(e);i(e,n,a)}})),this.entries=this.entries.filter((function(e,t){return-1!==n.indexOf(e)}))}}])&&$t(t.prototype,n),e}();function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_t.LargeEntryDeltaThreshold=15;var It=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,At(t).call(this,e))).content.itemUUIDToItemHistoryMapping||(n.content.itemUUIDToItemHistoryMapping={}),Object.keys(n.content.itemUUIDToItemHistoryMapping).forEach((function(e){var t=n.content.itemUUIDToItemHistoryMapping[e];n.content.itemUUIDToItemHistoryMapping[e]=new _t(t)})),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(t,e),n=t,(r=[{key:"addEntryForItem",value:function(e){return this.historyForItem(e).addHistoryEntryForItem(e)}},{key:"historyForItem",value:function(e){var t=this.content.itemUUIDToItemHistoryMapping[e.uuid];return t||(t=this.content.itemUUIDToItemHistoryMapping[e.uuid]=new _t),t}},{key:"clearItemHistory",value:function(e){this.historyForItem(e).clear()}},{key:"clearAllHistory",value:function(){this.content.itemUUIDToItemHistoryMapping={}}},{key:"optimizeHistoryForItem",value:function(e){var n=this.historyForItem(e);n.entries.length>t.LargeItemEntryAmountThreshold&&n.optimize()}}])&&Ct(n.prototype,r),t}(B);function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t,n){return t&&Et(e.prototype,t),n&&Et(e,n),e}It.LargeItemEntryAmountThreshold=60;var Rt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$timeout=t||setTimeout.bind(Object($.b)())}return Dt(e,null,[{key:"getApiVersion",value:function(){return"20190520"}}]),Dt(e,[{key:"setJWTRequestHandler",value:function(e){this.jwtRequestHandler=e}},{key:"setAuthHeadersForRequest",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.jwtRequestHandler());case 2:(t=n.sent)&&e.setRequestHeader("Authorization","Bearer "+t);case 4:case"end":return n.stop()}}),null,this)}},{key:"postAbsolute",value:function(e,t,n,r){return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.httpRequest("post",e,t,n,r));case 1:case"end":return i.stop()}}),null,this)}},{key:"postAuthenticatedAbsolute",value:function(e,t,n,r){return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.httpRequest("post",e,t,n,r,!0));case 1:case"end":return i.stop()}}),null,this)}},{key:"patchAbsolute",value:function(e,t,n,r){return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.httpRequest("patch",e,t,n,r));case 1:case"end":return i.stop()}}),null,this)}},{key:"getAbsolute",value:function(e,t,n,r){return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.httpRequest("get",e,t,n,r));case 1:case"end":return i.stop()}}),null,this)}},{key:"httpRequest",value:function(e,t,n,r,i){var a,o=this,s=arguments;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=s.length>5&&void 0!==s[5]&&s[5],c.abrupt("return",new Promise((function(s,c){var u;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:if((u=new XMLHttpRequest).onreadystatechange=function(){if(4==u.readyState){var e=u.responseText;if(e)try{e=JSON.parse(e)}catch(e){}u.status>=200&&u.status<=299?o.$timeout((function(){r(e),s(e)})):(console.error("Request error:",e),o.$timeout((function(){i(e,u.status),c(e)})))}},"get"==e&&Object.keys(n).length>0&&(t=o.urlForUrlAndParams(t,n)),u.open(e,t,!0),u.setRequestHeader("Content-type","application/json"),!a){l.next=8;break}return l.next=8,regeneratorRuntime.awrap(o.setAuthHeadersForRequest(u));case 8:"post"==e||"patch"==e?u.send(JSON.stringify(n)):u.send();case 9:case"end":return l.stop()}}))})));case 2:case"end":return c.stop()}}))}},{key:"urlForUrlAndParams",value:function(e,t){var n=Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&");return e.includes("?")?e+"&"+n:e+"?"+n}}]),e}();function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"setItem",value:function(e,t){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"getItem",value:function(e){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"removeItem",value:function(e){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"clear",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"getAllModels",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"saveModel",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.saveModels([e]));case 1:case"end":return t.stop()}}),null,this)}},{key:"saveModels",value:function(e){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"deleteModel",value:function(e){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"clearAllModels",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"clearAllData",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([this.clear(),this.clearAllModels()]));case 1:case"end":return e.stop()}}),null,this)}}])&&Pt(t.prototype,n),e}();function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ft=function(){function e(t,n,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.KeyRequestLoadLocal="KeyRequestLoadLocal",e.KeyRequestSaveLocal="KeyRequestSaveLocal",e.KeyRequestLoadSaveAccount="KeyRequestLoadSaveAccount",this.httpManager=r,this.modelManager=t,this.storageManager=n,this.$interval=a||setInterval.bind(window),this.$timeout=i||setTimeout.bind(window),this.syncStatus={},this.syncStatusObservers=[],this.eventHandlers=[],this.PerSyncItemUploadLimit=150,this.ServerItemDownloadLimit=150,this.MajorDataChangeThreshold=15,this.MaxDiscordanceBeforeOutOfSync=5,this.syncDiscordance=0,this.outOfSync=!1,this.contentTypeLoadPriority=["SN|UserPreferences","SN|Privileges","SN|Component","SN|Theme"]}var t,n;return t=e,(n=[{key:"handleServerIntegrityHash",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&0!=e.length){n.next=2;break}return n.abrupt("return",!0);case 2:return n.next=4,regeneratorRuntime.awrap(this.modelManager.computeDataIntegrityHash());case 4:if(t=n.sent){n.next=7;break}return n.abrupt("return",!0);case 7:if(t===e){n.next=13;break}return this.syncDiscordance++,this.syncDiscordance>=this.MaxDiscordanceBeforeOutOfSync&&(this.outOfSync||(this.outOfSync=!0,this.notifyEvent("enter-out-of-sync"))),n.abrupt("return",!1);case 13:return this.outOfSync&&(this.outOfSync=!1,this.notifyEvent("exit-out-of-sync")),this.syncDiscordance=0,n.abrupt("return",!0);case 16:case"end":return n.stop()}}),null,this)}},{key:"isOutOfSync",value:function(){return this.outOfSync}},{key:"getServerURL",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.storageManager.getItem("server"));case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=window._default_sf_server;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),null,this)}},{key:"getSyncURL",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.getServerURL());case 2:return e.t0=e.sent,e.abrupt("return",e.t0+"/items/sync");case 4:case"end":return e.stop()}}),null,this)}},{key:"registerSyncStatusObserver",value:function(e){var t={key:new Date,callback:e};return this.syncStatusObservers.push(t),t}},{key:"removeSyncStatusObserver",value:function(e){Pe()(this.syncStatusObservers,e)}},{key:"syncStatusDidChange",value:function(){var e=this;this.syncStatusObservers.forEach((function(t){t.callback(e.syncStatus)}))}},{key:"addEventHandler",value:function(e){return this.eventHandlers.push(e),e}},{key:"removeEventHandler",value:function(e){Pe()(this.eventHandlers,e)}},{key:"notifyEvent",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.eventHandlers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)(0,a.value)(e,t||{})}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"setKeyRequestHandler",value:function(e){this.keyRequestHandler=e}},{key:"getActiveKeyInfo",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.keyRequestHandler(e));case 1:case"end":return t.stop()}}),null,this)}},{key:"initialDataLoaded",value:function(){return!0===this._initialDataLoaded}},{key:"_sortLocalItems",value:function(e){var t=this;return e.sort((function(e,n){var r=new Date(n.updated_at)-new Date(e.updated_at),i=t.contentTypeLoadPriority,a=0,o=0;return i&&(a=i.indexOf(e.content_type),o=i.indexOf(n.content_type),-1==a&&(a=i.length),-1==o&&(o=i.length)),a==o?r:a<o?-1:1}))}},{key:"loadLocalItems",value:function(){var t,n,r,i,a,o=this,s=arguments;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.incrementalCallback,r=t.batchSize,!(i=t.options)||!i.simulateHighLatency){c.next=5;break}return a=i.simulatedLatency||1e3,c.next=5,regeneratorRuntime.awrap(this._awaitSleep(a));case 5:if(!this.loadLocalDataPromise){c.next=7;break}return c.abrupt("return",this.loadLocalDataPromise);case 7:return r||(r=100),this.loadLocalDataPromise=this.storageManager.getAllModels().then((function(t){var i=(t=(t=o._sortLocalItems(t)).filter((function(e){var t=o.modelManager.findItem(e.uuid);return!t||new Date(e.dirtiedDate)>t.dirtiedDate}))).length,a=0,s=[];return function c(){var u,l;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:return u=t.slice(a,a+r),f.next=3,regeneratorRuntime.awrap(o.handleItemsResponse(u,null,bt.MappingSourceLocalRetrieved,e.KeyRequestLoadLocal));case 3:if(l=f.sent,s.push(l),!((a+=u.length)<i)){f.next=10;break}return f.abrupt("return",new Promise((function(e,t){o.$timeout((function(){o.notifyEvent("local-data-incremental-load"),n&&n(a,i),c().then(e)}))})));case 10:o._initialDataLoaded=!0,o.notifyEvent("local-data-loaded");case 12:case"end":return f.stop()}}))}()})),c.abrupt("return",this.loadLocalDataPromise);case 10:case"end":return c.stop()}}),null,this)}},{key:"writeItemsToLocalStorage",value:function(t,n){var r=this;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(0!=t.length){i.next=2;break}return i.abrupt("return");case 2:return i.abrupt("return",new Promise((function(i,a){var o,s,c,u,l,f,p,d,h,v;return regeneratorRuntime.async((function(m){for(;;)switch(m.prev=m.next){case 0:for(o=[],s=[],c=!0,u=!1,l=void 0,m.prev=4,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0)!0!==(d=p.value).deleted||d.dirty?o.push(d):s.push(d);m.next=12;break;case 8:m.prev=8,m.t0=m.catch(4),u=!0,l=m.t0;case 12:m.prev=12,m.prev=13,c||null==f.return||f.return();case 15:if(m.prev=15,!u){m.next=18;break}throw l;case 18:return m.finish(15);case 19:return m.finish(12);case 20:if(!(s.length>0)){m.next=23;break}return m.next=23,regeneratorRuntime.awrap(Promise.all(s.map((function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.storageManager.deleteModel(e));case 1:case"end":return t.stop()}}))}))));case 23:return m.next=25,regeneratorRuntime.awrap(r.getActiveKeyInfo(e.KeyRequestSaveLocal));case 25:if(h=m.sent,!(o.length>0)){m.next=33;break}return m.next=29,regeneratorRuntime.awrap(Promise.all(o.map((function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=new G(e,h.keys,h.auth_params),r.next=3,regeneratorRuntime.awrap(t.paramsForLocalStorage());case 3:return t=r.sent,n&&delete t.dirty,r.abrupt("return",t);case 6:case"end":return r.stop()}}))}))).catch((function(e){return a(e)})));case 29:return v=m.sent,m.next=32,regeneratorRuntime.awrap(r.storageManager.saveModels(v).catch((function(e){console.error("Error writing items",e),r.syncStatus.localError=e,r.syncStatusDidChange(),a()})));case 32:r.syncStatus.localError&&(r.syncStatus.localError=null,r.syncStatusDidChange());case 33:i();case 34:case"end":return m.stop()}}),null,null,[[4,8,12,20],[13,,15,19]])})));case 3:case"end":return i.stop()}}))}},{key:"syncOffline",value:function(e){var t,n,r,i,a,o=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:for(t=!0,n=!1,r=void 0,s.prev=3,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)a.value.updated_at=new Date;s.next=11;break;case 7:s.prev=7,s.t0=s.catch(3),n=!0,r=s.t0;case 11:s.prev=11,s.prev=12,t||null==i.return||i.return();case 14:if(s.prev=14,!n){s.next=17;break}throw r;case 17:return s.finish(14);case 18:return s.finish(11);case 19:return s.abrupt("return",this.writeItemsToLocalStorage(e,!0).then((function(t){var n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;c.deleted&&o.modelManager.removeItemLocally(c)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return o.modelManager.clearDirtyItems(e),o.modelManager.didSyncModelsOffline(e),o.notifyEvent("sync:completed",{savedItems:e}),{saved_items:e}})));case 20:case"end":return s.stop()}}),null,this,[[3,7,11,19],[12,,14,18]])}},{key:"markAllItemsDirtyAndSaveOffline",value:function(e){var t,n,r,i,a,o,s,c,u,l,f,p,d;return regeneratorRuntime.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(!e){h.next=28;break}t=this.modelManager.allNondummyItems.filter((function(e){return!e.errorDecrypting})).slice(),n=!0,r=!1,i=void 0,h.prev=5,a=t[Symbol.iterator]();case 7:if(n=(o=a.next()).done){h.next=14;break}return s=o.value,h.next=11,regeneratorRuntime.awrap(this.modelManager.alternateUUIDForItem(s));case 11:n=!0,h.next=7;break;case 14:h.next=20;break;case 16:h.prev=16,h.t0=h.catch(5),r=!0,i=h.t0;case 20:h.prev=20,h.prev=21,n||null==a.return||a.return();case 23:if(h.prev=23,!r){h.next=26;break}throw i;case 26:return h.finish(23);case 27:return h.finish(20);case 28:for(c=this.modelManager.allNondummyItems,u=!0,l=!1,f=void 0,h.prev=32,p=c[Symbol.iterator]();!(u=(d=p.next()).done);u=!0)d.value.setDirty(!0);h.next=40;break;case 36:h.prev=36,h.t1=h.catch(32),l=!0,f=h.t1;case 40:h.prev=40,h.prev=41,u||null==p.return||p.return();case 43:if(h.prev=43,!l){h.next=46;break}throw f;case 46:return h.finish(43);case 47:return h.finish(40);case 48:return h.abrupt("return",this.writeItemsToLocalStorage(c,!1));case 49:case"end":return h.stop()}}),null,this,[[5,16,20,28],[21,,23,27],[32,36,40,48],[41,,43,47]])}},{key:"setSyncToken",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this._syncToken=e,t.next=3,regeneratorRuntime.awrap(this.storageManager.setItem("syncToken",e));case 3:case"end":return t.stop()}}),null,this)}},{key:"getSyncToken",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._syncToken){e.next=4;break}return e.next=3,regeneratorRuntime.awrap(this.storageManager.getItem("syncToken"));case 3:this._syncToken=e.sent;case 4:return e.abrupt("return",this._syncToken);case 5:case"end":return e.stop()}}),null,this)}},{key:"setCursorToken",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._cursorToken=e,!e){t.next=6;break}return t.next=4,regeneratorRuntime.awrap(this.storageManager.setItem("cursorToken",e));case 4:t.next=8;break;case 6:return t.next=8,regeneratorRuntime.awrap(this.storageManager.removeItem("cursorToken"));case 8:case"end":return t.stop()}}),null,this)}},{key:"getCursorToken",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cursorToken){e.next=4;break}return e.next=3,regeneratorRuntime.awrap(this.storageManager.getItem("cursorToken"));case 3:this._cursorToken=e.sent;case 4:return e.abrupt("return",this._cursorToken);case 5:case"end":return e.stop()}}),null,this)}},{key:"clearQueuedCallbacks",value:function(){this._queuedCallbacks=[]}},{key:"callQueuedCallbacks",value:function(e){var t=this.queuedCallbacks;if(t.length){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)(0,a.value)(e)}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}this.clearQueuedCallbacks()}}},{key:"beginCheckingIfSyncIsTakingTooLong",value:function(){this.syncStatus.checker&&this.stopCheckingIfSyncIsTakingTooLong(),this.syncStatus.checker=this.$interval(function(){(new Date-this.syncStatus.syncStart)/1e3>5&&(this.notifyEvent("sync:taking-too-long"),this.stopCheckingIfSyncIsTakingTooLong())}.bind(this),500)}},{key:"stopCheckingIfSyncIsTakingTooLong",value:function(){this.$interval.hasOwnProperty("cancel")?this.$interval.cancel(this.syncStatus.checker):clearInterval(this.syncStatus.checker),this.syncStatus.checker=null}},{key:"lockSyncing",value:function(){this.syncLocked=!0}},{key:"unlockSyncing",value:function(){this.syncLocked=!1}},{key:"sync",value:function(){var t,n=this,r=arguments;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},!this.syncLocked){i.next=4;break}return console.log("Sync Locked, Returning;"),i.abrupt("return");case 4:return i.abrupt("return",new Promise((function(r,i){var a,o,s,c,u,l,f,p,d,h,v,m,y,g;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t||(t={}),a=n.modelManager.getDirtyItems(),o=a.filter((function(e){return!n.lastDirtyItemsSave||e.dirtiedDate>n.lastDirtyItemsSave})),i.next=5,regeneratorRuntime.awrap(n.getActiveKeyInfo(e.KeyRequestLoadSaveAccount));case 5:if(s=i.sent,c=n.syncStatus.syncOpInProgress,u=n.initialDataLoaded(),!c&&u){i.next=16;break}return n.performSyncAgainOnCompletion=!0,n.lastDirtyItemsSave=new Date,i.next=13,regeneratorRuntime.awrap(n.writeItemsToLocalStorage(o,!1));case 13:return c&&(n.queuedCallbacks.push(r),n.loggingEnabled&&console.warn("Attempting to sync while existing sync is in progress.")),u||(n.loggingEnabled&&console.warn("(1) Attempting to perform online sync before local data has loaded"),r()),i.abrupt("return");case 16:if(n.syncStatus.syncOpInProgress=!0,!s.offline){i.next=19;break}return i.abrupt("return",n.syncOffline(a).then((function(e){n.syncStatus.syncOpInProgress=!1,r(e)})).catch((function(e){n.notifyEvent("sync-exception",e)})));case 19:if(n.initialDataLoaded()){i.next=22;break}return console.error("Attempting to perform online sync before local data has loaded"),i.abrupt("return");case 22:return n.loggingEnabled&&console.log("Syncing online user."),l=n.syncStatus.needsMoreSync,n.syncStatus.syncStart=new Date,n.beginCheckingIfSyncIsTakingTooLong(),f=n.PerSyncItemUploadLimit,(p=a.slice(0,f)).length<a.length?n.syncStatus.needsMoreSync=!0:n.syncStatus.needsMoreSync=!1,l||(n.syncStatus.total=a.length,n.syncStatus.current=0),n.syncStatus.current>n.syncStatus.total&&(n.syncStatus.total=n.syncStatus.current),n.syncStatusDidChange(),i.next=34,regeneratorRuntime.awrap(n.writeItemsToLocalStorage(o,!1));case 34:return n.lastDirtyItemsSave=new Date,t.onPreSyncSave&&t.onPreSyncSave(),n.allRetreivedItems||(n.allRetreivedItems=[]),n.allSavedItems||(n.allSavedItems=[]),(d={}).limit=n.ServerItemDownloadLimit,t.performIntegrityCheck&&(d.compute_integrity=!0),i.prev=41,i.next=44,regeneratorRuntime.awrap(Promise.all(p.map((function(e){var n=new G(e,s.keys,s.auth_params);return n.additionalFields=t.additionalFields,n.paramsForSync()}))).then((function(e){d.items=e})));case 44:i.next=49;break;case 46:i.prev=46,i.t0=i.catch(41),n.notifyEvent("sync-exception",i.t0);case 49:for(h=!0,v=!1,m=void 0,i.prev=52,y=p[Symbol.iterator]();!(h=(g=y.next()).done);h=!0)g.value.dirtyCount=0;i.next=60;break;case 56:i.prev=56,i.t1=i.catch(52),v=!0,m=i.t1;case 60:i.prev=60,i.prev=61,h||null==y.return||y.return();case 63:if(i.prev=63,!v){i.next=66;break}throw m;case 66:return i.finish(63);case 67:return i.finish(60);case 68:return i.next=70,regeneratorRuntime.awrap(n.getSyncToken());case 70:return d.sync_token=i.sent,i.next=73,regeneratorRuntime.awrap(n.getCursorToken());case 73:return d.cursor_token=i.sent,d.api=Rt.getApiVersion(),n.loggingEnabled&&console.log("Syncing with params",d),i.prev=76,i.t2=n.httpManager,i.next=80,regeneratorRuntime.awrap(n.getSyncURL());case 80:i.t3=i.sent,i.t4=d,i.t5=function(e){n.handleSyncSuccess(p,e,t).then((function(){r(e)})).catch((function(e){console.log("Caught sync success exception:",e),n.handleSyncError(e,null,a).then((function(t){n.notifyEvent("sync-exception",e),r(t)}))}))},i.t6=function(e,t){n.handleSyncError(e,t,a).then((function(e){r(e)}))},i.t2.postAuthenticatedAbsolute.call(i.t2,i.t3,i.t4,i.t5,i.t6),i.next=90;break;case 87:i.prev=87,i.t7=i.catch(76),console.log("Sync exception caught:",i.t7);case 90:case"end":return i.stop()}}),null,null,[[41,46],[52,56,60,68],[61,,63,67],[76,87]])})));case 5:case"end":return i.stop()}}),null,this)}},{key:"_awaitSleep",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.warn("Simulating high latency sync request",e),t.abrupt("return",new Promise((function(t,n){setTimeout((function(){t()}),e)})));case 2:case"end":return t.stop()}}))}},{key:"handleSyncSuccess",value:function(t,n,r){var i,a,o,s,c,u,l,f,p,d,h,v,m,y,g,b,k,w,x,S,$,_,M,A,O,I,E,D=this;return regeneratorRuntime.async((function(R){for(;;)switch(R.prev=R.next){case 0:if(!r.simulateHighLatency){R.next=4;break}return i=r.simulatedLatency||1e3,R.next=4,regeneratorRuntime.awrap(this._awaitSleep(i));case 4:for(this.syncStatus.error=null,this.loggingEnabled&&console.log("Sync response",n),a=this.allSavedItems.map((function(e){return e.uuid})),o=n.saved_items.map((function(e){return e.uuid})),s=[],n.retrieved_items=n.retrieved_items.filter((function(e){var t=a.includes(e.uuid),n=o.includes(e.uuid);if(t||n)return s.push(e),!1;var r=D.modelManager.findItem(e.uuid);return!r||!r.dirty||(s.push(e),!1)})),c=[],u=!0,l=!1,f=void 0,R.prev=14,p=t[Symbol.iterator]();!(u=(d=p.next()).done);u=!0)0==(h=d.value).dirtyCount&&c.push(h);R.next=22;break;case 18:R.prev=18,R.t0=R.catch(14),l=!0,f=R.t0;case 22:R.prev=22,R.prev=23,u||null==p.return||p.return();case 25:if(R.prev=25,!l){R.next=28;break}throw f;case 28:return R.finish(25);case 29:return R.finish(22);case 30:if(this.modelManager.clearDirtyItems(c),v=[],!(s.length>0)){R.next=72;break}return R.next=35,regeneratorRuntime.awrap(this.getActiveKeyInfo(e.KeyRequestLoadSaveAccount));case 35:return m=R.sent.keys,R.next=38,regeneratorRuntime.awrap(C.decryptMultipleItems(s,m));case 38:y=!0,g=!1,b=void 0,R.prev=41,k=s[Symbol.iterator]();case 43:if(y=(w=k.next()).done){R.next=58;break}if(x=w.value,S=this.modelManager.findItem(x.uuid),$=JSON.parse(x.content),S&&$){R.next=49;break}return R.abrupt("continue",55);case 49:if(!S||S.isContentEqualWithNonItemContent($)){R.next=55;break}return R.next=52,regeneratorRuntime.awrap(this.modelManager.createDuplicateItemFromResponseItem(x));case 52:_=R.sent,this.modelManager.addDuplicatedItemAsConflict({duplicate:_,duplicateOf:S}),v.push(_);case 55:y=!0,R.next=43;break;case 58:R.next=64;break;case 60:R.prev=60,R.t1=R.catch(41),g=!0,b=R.t1;case 64:R.prev=64,R.prev=65,y||null==k.return||k.return();case 67:if(R.prev=67,!g){R.next=70;break}throw b;case 70:return R.finish(67);case 71:return R.finish(64);case 72:return R.next=74,regeneratorRuntime.awrap(this.handleItemsResponse(n.retrieved_items,null,bt.MappingSourceRemoteRetrieved,e.KeyRequestLoadSaveAccount));case 74:return M=R.sent,this.allRetreivedItems=this.allRetreivedItems.concat(M),this.syncStatus.retrievedCount=this.allRetreivedItems.length,A=["content","auth_hash"],R.next=80,regeneratorRuntime.awrap(this.handleItemsResponse(n.saved_items,A,bt.MappingSourceRemoteSaved,e.KeyRequestLoadSaveAccount));case 80:return O=R.sent,this.allSavedItems=this.allSavedItems.concat(O),I=n.unsaved,R.next=85,regeneratorRuntime.awrap(this.deprecated_handleUnsavedItemsResponse(I));case 85:return R.next=87,regeneratorRuntime.awrap(this.handleConflictsResponse(n.conflicts));case 87:if(R.t2=R.sent,R.t2){R.next=90;break}R.t2=[];case 90:if(E=R.t2,!((v=v.concat(E)).length>0)){R.next=95;break}return R.next=95,regeneratorRuntime.awrap(this.writeItemsToLocalStorage(v,!1));case 95:return R.next=97,regeneratorRuntime.awrap(this.writeItemsToLocalStorage(O,!1));case 97:return R.next=99,regeneratorRuntime.awrap(this.writeItemsToLocalStorage(M,!1));case 99:if(!n.integrity_hash||n.cursor_token){R.next=104;break}return R.next=102,regeneratorRuntime.awrap(this.handleServerIntegrityHash(n.integrity_hash));case 102:R.sent||this.syncDiscordance<this.MaxDiscordanceBeforeOutOfSync&&(this.performSyncAgainOnCompletion=!0);case 104:return this.syncStatus.syncOpInProgress=!1,this.syncStatus.current+=t.length,this.syncStatusDidChange(),this.setSyncToken(n.sync_token),this.setCursorToken(n.cursor_token),this.stopCheckingIfSyncIsTakingTooLong(),R.next=112,regeneratorRuntime.awrap(this.getCursorToken());case 112:if(!R.sent&&!this.syncStatus.needsMoreSync){R.next=117;break}return R.abrupt("return",new Promise((function(e,t){setTimeout(function(){this.sync(r).then(e)}.bind(D),10)})));case 117:if(!(v.length>0)){R.next=122;break}return this.performSyncAgainOnCompletion=!1,R.abrupt("return",new Promise((function(e,t){setTimeout((function(){D.sync(r).then(e)}),10)})));case 122:return this.syncStatus.retrievedCount=0,this.syncStatus.current=0,this.syncStatus.total=0,this.syncStatusDidChange(),(this.allRetreivedItems.length>=this.majorDataChangeThreshold||O.length>=this.majorDataChangeThreshold||I&&I.length>=this.majorDataChangeThreshold||v&&v.length>=this.majorDataChangeThreshold)&&this.notifyEvent("major-data-change"),this.callQueuedCallbacks(n),this.notifyEvent("sync:completed",{retrievedItems:this.allRetreivedItems,savedItems:this.allSavedItems}),this.allRetreivedItems=[],this.allSavedItems=[],this.performSyncAgainOnCompletion&&(this.performSyncAgainOnCompletion=!1,setTimeout((function(){D.sync(r)}),10)),R.abrupt("return",n);case 133:case"end":return R.stop()}}),null,this,[[14,18,22,30],[23,,25,29],[41,60,64,72],[65,,67,71]])}},{key:"handleSyncError",value:function(e,t,n){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Sync error: ",e),401==t&&this.notifyEvent("sync-session-invalid"),e?"string"==typeof e&&(e={error:{message:e}}):e={error:{message:"Could not connect to server."}},this.syncStatus.syncOpInProgress=!1,this.syncStatus.error=e.error,this.syncStatusDidChange(),this.writeItemsToLocalStorage(n,!1),this.modelManager.didSyncModelsOffline(n),this.stopCheckingIfSyncIsTakingTooLong(),this.notifyEvent("sync:error",e.error),this.callQueuedCallbacks({error:"Sync error"}),r.abrupt("return",e);case 12:case"end":return r.stop()}}),null,this)}},{key:"handleItemsResponse",value:function(e,t,n,r){var i,a,o;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(this.getActiveKeyInfo(r));case 2:return i=s.sent.keys,s.next=5,regeneratorRuntime.awrap(C.decryptMultipleItems(e,i));case 5:return s.next=7,regeneratorRuntime.awrap(this.modelManager.mapResponseItemsToLocalModelsOmittingFields(e,t,n));case 7:return a=s.sent,(o=a.filter((function(e){var t=e.errorDecryptingValueChanged;return e.errorDecryptingValueChanged=!1,t}))).length>0&&this.writeItemsToLocalStorage(o,!1),s.abrupt("return",a);case 11:case"end":return s.stop()}}),null,this)}},{key:"refreshErroredItems",value:function(){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((t=this.modelManager.allNondummyItems.filter((function(e){return 1==e.errorDecrypting}))).length>0)){n.next=3;break}return n.abrupt("return",this.handleItemsResponse(t,null,bt.MappingSourceLocalRetrieved,e.KeyRequestLoadSaveAccount));case 3:case"end":return n.stop()}}),null,this)}},{key:"handleConflictsResponse",value:function(t){var n,r,i,a,o,s,c,u,l,f,p,d,h,v,m,y,g,b,k,w,x,S,$,_,M,A,O,I,E,D,R;return regeneratorRuntime.async((function(P){for(;;)switch(P.prev=P.next){case 0:if(t&&0!=t.length){P.next=2;break}return P.abrupt("return");case 2:this.loggingEnabled&&console.log("Handle Conflicted Items:",t),n={},r=!0,i=!1,a=void 0,P.prev=7,o=t[Symbol.iterator]();case 9:if(r=(s=o.next()).done){P.next=21;break}if(c=s.value,u=c.server_item||c.unsaved_item,l=this.modelManager.findItem(u.uuid)){P.next=16;break}return n[u.uuid]={},P.abrupt("continue",18);case 16:f=l.getContentCopy(),n[u.uuid]={frozenCurrentContent:f,itemRef:l};case 18:r=!0,P.next=9;break;case 21:P.next=27;break;case 23:P.prev=23,P.t0=P.catch(7),i=!0,a=P.t0;case 27:P.prev=27,P.prev=28,r||null==o.return||o.return();case 30:if(P.prev=30,!i){P.next=33;break}throw a;case 33:return P.finish(30);case 34:return P.finish(27);case 35:p=[],d=!0,h=!1,v=void 0,P.prev=39,m=t[Symbol.iterator]();case 41:if(d=(y=m.next()).done){P.next=93;break}return g=y.value,b=g.server_item||g.unsaved_item,P.t1=regeneratorRuntime,P.t2=C,P.t3=[b],P.next=49,regeneratorRuntime.awrap(this.getActiveKeyInfo(e.KeyRequestLoadSaveAccount));case 49:return P.t4=P.sent.keys,P.t5=P.t2.decryptMultipleItems.call(P.t2,P.t3,P.t4),P.next=53,P.t1.awrap.call(P.t1,P.t5);case 53:if(k=n[b.uuid],w=k.frozenCurrentContent,x=k.itemRef){P.next=56;break}return P.abrupt("continue",90);case 56:if(p.push(x),"uuid_conflict"!==g.type){P.next=64;break}return P.next=60,regeneratorRuntime.awrap(this.modelManager.alternateUUIDForItem(x));case 60:S=P.sent,p.push(S),P.next=90;break;case 64:if("sync_conflict"!==g.type){P.next=88;break}return P.next=67,regeneratorRuntime.awrap(this.modelManager.createDuplicateItemFromResponseItem(b));case 67:if($=P.sent,_=this.modelManager.duplicateItemWithCustomContent({content:w,duplicateOf:x}),M=!_.isItemContentEqualWith($),A=!x.isItemContentEqualWith($),O=!1,I=!1,E=!1,D=!1,b.deleted||x.deleted?D=!0:M?(new Date-x.client_updated_at)/1e3<20?(E=!0,I=!0):(O=!0,D=!0):A?SFItem.AreItemContentsEqual({leftContent:x.content,rightContent:$.content,keysToIgnore:x.keysToIgnoreWhenCheckingContentEquality().concat(["references"]),appDataKeysToIgnore:x.appDataKeysToIgnoreWhenCheckingContentEquality()})?E=!0:(O=!0,D=!0):D=!0,!O){P.next=81;break}return P.next=79,regeneratorRuntime.awrap(this.modelManager.duplicateItemWithCustomContentAndAddAsConflict({content:w,duplicateOf:x}));case 79:R=P.sent,p.push(R);case 81:if(I&&(this.modelManager.addDuplicatedItemAsConflict({duplicate:$,duplicateOf:x}),p.push($)),!D){P.next=85;break}return P.next=85,regeneratorRuntime.awrap(this.modelManager.mapResponseItemsToLocalModelsOmittingFields([b],null,bt.MappingSourceRemoteRetrieved));case 85:E&&(x.updated_at=$.updated_at,x.setDirty(!0)),P.next=90;break;case 88:return console.error("Unsupported conflict type",g.type),P.abrupt("continue",90);case 90:d=!0,P.next=41;break;case 93:P.next=99;break;case 95:P.prev=95,P.t6=P.catch(39),h=!0,v=P.t6;case 99:P.prev=99,P.prev=100,d||null==m.return||m.return();case 102:if(P.prev=102,!h){P.next=105;break}throw v;case 105:return P.finish(102);case 106:return P.finish(99);case 107:return P.abrupt("return",p);case 108:case"end":return P.stop()}}),null,this,[[7,23,27,35],[28,,30,34],[39,95,99,107],[100,,102,106]])}},{key:"deprecated_handleUnsavedItemsResponse",value:function(t){var n,r,i,a,o,s,c,u,l,f;return regeneratorRuntime.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(t&&0!=t.length){p.next=2;break}return p.abrupt("return");case 2:this.loggingEnabled&&console.log("Handle Unsaved Items:",t),n=!0,r=!1,i=void 0,p.prev=6,a=t[Symbol.iterator]();case 8:if(n=(o=a.next()).done){p.next=37;break}return s=o.value,c=s.item,p.t0=regeneratorRuntime,p.t1=C,p.t2=[c],p.next=16,regeneratorRuntime.awrap(this.getActiveKeyInfo(e.KeyRequestLoadSaveAccount));case 16:return p.t3=p.sent.keys,p.t4=p.t1.decryptMultipleItems.call(p.t1,p.t2,p.t3),p.next=20,p.t0.awrap.call(p.t0,p.t4);case 20:if(u=this.modelManager.findItem(c.uuid)){p.next=23;break}return p.abrupt("continue",34);case 23:if("uuid_conflict"!==(l=s.error).tag){p.next=29;break}return p.next=27,regeneratorRuntime.awrap(this.modelManager.alternateUUIDForItem(u));case 27:p.next=34;break;case 29:if("sync_conflict"!==l.tag){p.next=34;break}return p.next=32,regeneratorRuntime.awrap(this.modelManager.createDuplicateItemFromResponseItem(c));case 32:f=p.sent,c.deleted||u.isItemContentEqualWith(f)||this.modelManager.addDuplicatedItemAsConflict({duplicate:f,duplicateOf:u});case 34:n=!0,p.next=8;break;case 37:p.next=43;break;case 39:p.prev=39,p.t5=p.catch(6),r=!0,i=p.t5;case 43:p.prev=43,p.prev=44,n||null==a.return||a.return();case 46:if(p.prev=46,!r){p.next=49;break}throw i;case 49:return p.finish(46);case 50:return p.finish(43);case 51:case"end":return p.stop()}}),null,this,[[6,39,43,51],[44,,46,50]])}},{key:"stateless_downloadAllItems",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(r,i){var a;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a={limit:n.limit||500,sync_token:n.syncToken,cursor_token:n.cursorToken,content_type:n.contentType,event:n.event,api:Rt.getApiVersion()},o.prev=1,o.t0=t.httpManager,o.next=5,regeneratorRuntime.awrap(t.getSyncURL());case 5:o.t1=o.sent,o.t2=a,o.t3=function(i){var a,o;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n.retrievedItems||(n.retrievedItems=[]),a=i.retrieved_items,s.next=4,regeneratorRuntime.awrap(t.getActiveKeyInfo(e.KeyRequestLoadSaveAccount));case 4:return o=s.sent.keys,s.next=7,regeneratorRuntime.awrap(C.decryptMultipleItems(a,o));case 7:n.retrievedItems=n.retrievedItems.concat(a.map((function(e){return t.modelManager.createItem(e)}))),n.syncToken=i.sync_token,n.cursorToken=i.cursor_token,n.cursorToken?t.stateless_downloadAllItems(n).then(r):r(n.retrievedItems);case 11:case"end":return s.stop()}}))},o.t4=function(e,t){i(e)},o.t0.postAuthenticatedAbsolute.call(o.t0,o.t1,o.t2,o.t3,o.t4),o.next=16;break;case 12:o.prev=12,o.t5=o.catch(1),console.log("Download all items exception caught:",o.t5),i(o.t5);case 16:case"end":return o.stop()}}),null,null,[[1,12]])}))}},{key:"resolveOutOfSync",value:function(){var e=this;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.stateless_downloadAllItems({event:"resolve-out-of-sync"}).then((function(t){var n,r,i,a,o,s,c,u;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:n=[],r=!0,i=!1,a=void 0,l.prev=4,o=t[Symbol.iterator]();case 6:if(r=(s=o.next()).done){l.next=18;break}if(c=s.value,!(u=e.modelManager.findItem(c.uuid))){l.next=14;break}if(c.isItemContentEqualWith(u)){l.next=14;break}return l.next=14,regeneratorRuntime.awrap(e.modelManager.duplicateItemAndAddAsConflict(u));case 14:n.push(c);case 15:r=!0,l.next=6;break;case 18:l.next=24;break;case 20:l.prev=20,l.t0=l.catch(4),i=!0,a=l.t0;case 24:l.prev=24,l.prev=25,r||null==o.return||o.return();case 27:if(l.prev=27,!i){l.next=30;break}throw a;case 30:return l.finish(27);case 31:return l.finish(24);case 32:return l.next=34,regeneratorRuntime.awrap(e.modelManager.mapResponseItemsToLocalModelsWithOptions({items:n,source:bt.MappingSourceRemoteRetrieved}));case 34:return l.next=36,regeneratorRuntime.awrap(e.writeItemsToLocalStorage(e.modelManager.allNondummyItems));case 36:return l.abrupt("return",e.sync({performIntegrityCheck:!0}));case 37:case"end":return l.stop()}}),null,null,[[4,20,24,32],[25,,27,31]])})));case 1:case"end":return t.stop()}}),null,this)}},{key:"handleSignout",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.outOfSync=!1,this.loadLocalDataPromise=null,this.performSyncAgainOnCompletion=!1,this.syncStatus.syncOpInProgress=!1,this._queuedCallbacks=[],this.syncStatus={},e.abrupt("return",this.clearSyncToken());case 7:case"end":return e.stop()}}),null,this)}},{key:"clearSyncToken",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this._syncToken=null,this._cursorToken=null,e.abrupt("return",this.storageManager.removeItem("syncToken"));case 3:case"end":return e.stop()}}),null,this)}},{key:"__setLocalDataNotLoaded",value:function(){this.loadLocalDataPromise=null,this._initialDataLoaded=!1}},{key:"queuedCallbacks",get:function(){return this._queuedCallbacks||(this._queuedCallbacks=[]),this._queuedCallbacks}}])&&jt(t.prototype,n),e}();function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Lt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"alert",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){window.alert(e.text),t()})));case 1:case"end":return t.stop()}}))}},{key:"confirm",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){window.confirm(e.text)?t():n()})));case 1:case"end":return t.stop()}}))}}])&&Nt(t.prototype,n),e}();function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ht=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.DidSignOutEvent="DidSignOutEvent",e.WillSignInEvent="WillSignInEvent",e.DidSignInEvent="DidSignInEvent",this.httpManager=n,this.storageManager=t,this.alertManager=r||new Lt,this.$timeout=i||setTimeout.bind(window),this.eventHandlers=[]}var t,n;return t=e,(n=[{key:"getMinPasswordLength",value:function(){return 8}},{key:"addEventHandler",value:function(e){return this.eventHandlers.push(e),e}},{key:"removeEventHandler",value:function(e){Pe()(this.eventHandlers,e)}},{key:"notifyEvent",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.eventHandlers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)(0,a.value)(e,t||{})}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"saveKeys",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this._keys=e,t.next=3,regeneratorRuntime.awrap(this.storageManager.setItem("mk",e.mk));case 3:return t.next=5,regeneratorRuntime.awrap(this.storageManager.setItem("ak",e.ak));case 5:case"end":return t.stop()}}),null,this)}},{key:"signout",value:function(t){var n=this;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._keys=null,this._authParams=null,!t){r.next=6;break}return r.abrupt("return",this.storageManager.clearAllData().then((function(){n.notifyEvent(e.DidSignOutEvent)})));case 6:this.notifyEvent(e.DidSignOutEvent);case 7:case"end":return r.stop()}}),null,this)}},{key:"keys",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._keys){t.next=11;break}return t.next=3,regeneratorRuntime.awrap(this.storageManager.getItem("mk"));case 3:if(e=t.sent){t.next=6;break}return t.abrupt("return",null);case 6:return t.t0=e,t.next=9,regeneratorRuntime.awrap(this.storageManager.getItem("ak"));case 9:t.t1=t.sent,this._keys={mk:t.t0,ak:t.t1};case 11:return t.abrupt("return",this._keys);case 12:case"end":return t.stop()}}),null,this)}},{key:"getAuthParams",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._authParams){t.next=5;break}return t.next=3,regeneratorRuntime.awrap(this.storageManager.getItem("auth_params"));case 3:e=t.sent,this._authParams=JSON.parse(e);case 5:if(!this._authParams||this._authParams.version){t.next=9;break}return t.next=8,regeneratorRuntime.awrap(this.defaultProtocolVersion());case 8:this._authParams.version=t.sent;case 9:return t.abrupt("return",this._authParams);case 10:case"end":return t.stop()}}),null,this)}},{key:"defaultProtocolVersion",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.keys());case 2:if(!(e=t.sent)||!e.ak){t.next=7;break}return t.abrupt("return","002");case 7:return t.abrupt("return","001");case 8:case"end":return t.stop()}}),null,this)}},{key:"protocolVersion",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.getAuthParams());case 2:if(!(e=t.sent)||!e.version){t.next=5;break}return t.abrupt("return",e.version);case 5:return t.abrupt("return",this.defaultProtocolVersion());case 6:case"end":return t.stop()}}),null,this)}},{key:"getAuthParamsForEmail",value:function(e,t,n){var r,i=this;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return(r=W()({email:t},n)).api=Rt.getApiVersion(),a.abrupt("return",new Promise((function(t,n){var a=e+"/auth/params";i.httpManager.getAbsolute(a,r,(function(e){t(e)}),(function(e){console.error("Error getting auth params",e),"object"!==Ut(e)&&(e={error:{message:"A server error occurred while trying to sign in. Please try again."}}),t(e)}))})));case 3:case"end":return a.stop()}}))}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"isLocked",value:function(){return 1==this.locked}},{key:"unlockAndResolve",value:function(e,t){this.unlock(),e(t)}},{key:"login",value:function(t,n,r,i,a){var o=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise((function(s,c){var u,l,f,p,d,h,v,m,y,g;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,regeneratorRuntime.awrap(o.keys());case 2:if(null==c.sent){c.next=6;break}return s({error:{message:"Cannot log in because already signed in."}}),c.abrupt("return");case 6:if(!o.isLocked()){c.next=9;break}return s({error:{message:"Login already in progress."}}),c.abrupt("return");case 9:return o.lock(),o.notifyEvent(e.WillSignInEvent),c.next=13,regeneratorRuntime.awrap(o.getAuthParamsForEmail(t,n,a));case 13:if((u=c.sent).identifier=n,!u.error){c.next=18;break}return o.unlockAndResolve(s,u),c.abrupt("return");case 18:if(u&&u.pw_cost){c.next=21;break}return o.unlockAndResolve(s,{error:{message:"Invalid email or password."}}),c.abrupt("return");case 21:if(C.supportedVersions().includes(u.version)){c.next=25;break}return l=C.isVersionNewerThanLibraryVersion(u.version)?"This version of the application does not support your newer account type. Please upgrade to the latest version of Standard Notes to sign in.":"The protocol version associated with your account is outdated and no longer supported by this application. Please visit standardnotes.org/help/security for more information.",o.unlockAndResolve(s,{error:{message:l}}),c.abrupt("return");case 25:if(!C.isProtocolVersionOutdated(u.version)){c.next=32;break}return f="The encryption version for your account, ".concat(u.version,", is outdated and requires upgrade. You may proceed with login, but are advised to perform a security update using the web or desktop application. Please visit standardnotes.org/help/security for more information."),p=!1,c.next=30,regeneratorRuntime.awrap(o.alertManager.confirm({title:"Update Needed",text:f,confirmButtonText:"Sign In"}).catch((function(){o.unlockAndResolve(s,{error:{}}),p=!0})));case 30:if(!p){c.next=32;break}return c.abrupt("return");case 32:if(C.supportsPasswordDerivationCost(u.pw_cost)){c.next=36;break}return o.unlockAndResolve(s,{error:{message:"Your account was created on a platform with higher security capabilities than this browser supports. If we attempted to generate your login keys here, it would take hours. Please use a browser with more up to date security capabilities, like Google Chrome or Firefox, to log in."}}),c.abrupt("return");case 36:if(d=C.costMinimumForVersion(u.version),!(u.pw_cost<d)){c.next=41;break}return o.unlockAndResolve(s,{error:{message:"Unable to login due to insecure password parameters. Please visit standardnotes.org/help/security for more information."}}),c.abrupt("return");case 41:if(!i){c.next=47;break}if(h=C.version(),u.version===h){c.next=47;break}return v="Strict sign in refused server sign in parameters. The latest security version is ".concat(h,", but your account is reported to have version ").concat(u.version,". If you'd like to proceed with sign in anyway, please disable strict sign in and try again."),o.unlockAndResolve(s,{error:{message:v}}),c.abrupt("return");case 47:return c.next=49,regeneratorRuntime.awrap(C.computeEncryptionKeysForUser(r,u));case 49:m=c.sent,y=t+"/auth/sign_in",(g=W()({password:m.pw,email:n},a)).api=Rt.getApiVersion(),o.httpManager.postAbsolute(y,g,(function(r){return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(o.handleAuthResponse(r,n,t,u,m));case 2:o.notifyEvent(e.DidSignInEvent),o.$timeout((function(){return o.unlockAndResolve(s,r)}));case 4:case"end":return i.stop()}}))}),(function(e){console.error("Error logging in",e),"object"!==Ut(e)&&(e={error:{message:"A server error occurred while trying to sign in. Please try again."}}),o.$timeout((function(){return o.unlockAndResolve(s,e)}))}));case 54:case"end":return c.stop()}}))})));case 1:case"end":return s.stop()}}))}},{key:"register",value:function(e,t,n){var r=this;return new Promise((function(i,a){var o,s,c,u,l,f;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!r.isLocked()){a.next=3;break}return i({error:{message:"Register already in progress."}}),a.abrupt("return");case 3:if(!(n.length<8)){a.next=7;break}return o="Your password must be at least ".concat(8," characters in length. For your security, please choose a longer password or, ideally, a passphrase, and try again."),i({error:{message:o}}),a.abrupt("return");case 7:return r.lock(),a.next=10,regeneratorRuntime.awrap(C.generateInitialKeysAndAuthParamsForUser(t,n));case 10:s=a.sent,c=s.keys,u=s.authParams,l=e+"/auth",(f=W()({password:c.pw,email:t},u)).api=Rt.getApiVersion(),r.httpManager.postAbsolute(l,f,(function(n){return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r.handleAuthResponse(n,t,e,u,c));case 2:r.unlockAndResolve(i,n);case 3:case"end":return a.stop()}}))}),(function(e){console.error("Registration error",e),"object"!==Ut(e)&&(e={error:{message:"A server error occurred while trying to register. Please try again."}}),r.unlockAndResolve(i,e)}));case 17:case"end":return a.stop()}}))}))}},{key:"changePassword",value:function(e,t,n,r,i){var a=this;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise((function(o,s){var c,u,l;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!a.isLocked()){s.next=3;break}return o({error:{message:"Change password already in progress."}}),s.abrupt("return");case 3:a.lock(),c=r.pw,u=e+"/auth/change_pw",(l=W()({new_password:c,current_password:n},i)).api=Rt.getApiVersion(),a.httpManager.postAuthenticatedAbsolute(u,l,(function(e){return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(a.handleAuthResponse(e,t,null,i,r));case 2:a.unlockAndResolve(o,e);case 3:case"end":return n.stop()}}))}),(function(e){"object"!==Ut(e)&&(e={error:{message:"Something went wrong while changing your password. Your password was not changed. Please try again."}}),a.unlockAndResolve(o,e)}));case 9:case"end":return s.stop()}}))})));case 1:case"end":return o.stop()}}))}},{key:"handleAuthResponse",value:function(e,t,n,r,i){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=3;break}return t.next=3,regeneratorRuntime.awrap(this.storageManager.setItem("server",n));case 3:return this._authParams=r,t.next=6,regeneratorRuntime.awrap(this.storageManager.setItem("auth_params",JSON.stringify(r)));case 6:return t.next=8,regeneratorRuntime.awrap(this.storageManager.setItem("jwt",e.token));case 8:return t.abrupt("return",this.saveKeys(i));case 9:case"end":return t.stop()}}),null,this)}}])&&Bt(t.prototype,n),e}();function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vt=function(){function e(t,n,r,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modelManager=t,this.syncManager=n,this.storageManager=r,this.completionHandlers=[],this.loadMigrations();var o=!1,s=i.addEventHandler((function(e){e==Ht.DidSignInEvent&&(o=!0)}));this.receivedLocalDataEvent=n.initialDataLoaded(),this.syncManager.addEventHandler((function(e,t){var n,r,c,u,l,f,p,d,h;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="sync:completed"==e,!(n="local-data-loaded"==e)&&!r){t.next=40;break}if(n?a.receivedLocalDataEvent=!0:r&&(a.receivedSyncCompletedEvent=!0),!a.receivedLocalDataEvent||!a.receivedSyncCompletedEvent){t.next=40;break}if(!o){t.next=39;break}return o=!1,i.removeEventHandler(s),t.next=10,regeneratorRuntime.awrap(a.getCompletedMigrations());case 10:c=t.sent.slice(),u=!0,l=!1,f=void 0,t.prev=14,p=c[Symbol.iterator]();case 16:if(u=(d=p.next()).done){t.next=25;break}return h=d.value,t.next=20,regeneratorRuntime.awrap(a.migrationForEncodedName(h));case 20:t.sent.runOnlyOnce||Pe()(a._completed,h);case 22:u=!0,t.next=16;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(14),l=!0,f=t.t0;case 31:t.prev=31,t.prev=32,u||null==p.return||p.return();case 34:if(t.prev=34,!l){t.next=37;break}throw f;case 37:return t.finish(34);case 38:return t.finish(31);case 39:a.runPendingMigrations();case 40:case"end":return t.stop()}}),null,null,[[14,27,31,39],[32,,34,38]])}))}var t,n;return t=e,(n=[{key:"addCompletionHandler",value:function(e){this.completionHandlers.push(e)}},{key:"removeCompletionHandler",value:function(e){Pe()(this.completionHandlers,e)}},{key:"migrationForEncodedName",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.decode(e));case 2:return t=n.sent,n.abrupt("return",this.migrations.find((function(e){return e.name==t})));case 4:case"end":return n.stop()}}),null,this)}},{key:"loadMigrations",value:function(){this.migrations=this.registeredMigrations()}},{key:"registeredMigrations",value:function(){}},{key:"runPendingMigrations",value:function(){var e,t,n,r,i,a,o,s,c,u,l,f,p,d,h,v,m,y,g,b,k,w,x,S,$,_,M,C;return regeneratorRuntime.async((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,regeneratorRuntime.awrap(this.getPendingMigrations());case 2:for(e=A.sent,t=!0,n=!1,r=void 0,A.prev=6,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)(o=a.value).items=[];A.next=14;break;case 10:A.prev=10,A.t0=A.catch(6),n=!0,r=A.t0;case 14:A.prev=14,A.prev=15,t||null==i.return||i.return();case 17:if(A.prev=17,!n){A.next=20;break}throw r;case 20:return A.finish(17);case 21:return A.finish(14);case 22:s=!0,c=!1,u=void 0,A.prev=25,l=this.modelManager.allNondummyItems[Symbol.iterator]();case 27:if(s=(f=l.next()).done){A.next=51;break}for(p=f.value,d=!0,h=!1,v=void 0,A.prev=32,m=e[Symbol.iterator]();!(d=(y=m.next()).done);d=!0)o=y.value,p.content_type==o.content_type&&o.items.push(p);A.next=40;break;case 36:A.prev=36,A.t1=A.catch(32),h=!0,v=A.t1;case 40:A.prev=40,A.prev=41,d||null==m.return||m.return();case 43:if(A.prev=43,!h){A.next=46;break}throw v;case 46:return A.finish(43);case 47:return A.finish(40);case 48:s=!0,A.next=27;break;case 51:A.next=57;break;case 53:A.prev=53,A.t2=A.catch(25),c=!0,u=A.t2;case 57:A.prev=57,A.prev=58,s||null==l.return||l.return();case 60:if(A.prev=60,!c){A.next=63;break}throw u;case 63:return A.finish(60);case 64:return A.finish(57);case 65:g=!0,b=!1,k=void 0,A.prev=68,w=e[Symbol.iterator]();case 70:if(g=(x=w.next()).done){A.next=81;break}if(!((o=x.value).items&&o.items.length>0||o.customHandler)){A.next=77;break}return A.next=75,regeneratorRuntime.awrap(this.runMigration(o,o.items));case 75:A.next=78;break;case 77:this.markMigrationCompleted(o);case 78:g=!0,A.next=70;break;case 81:A.next=87;break;case 83:A.prev=83,A.t3=A.catch(68),b=!0,k=A.t3;case 87:A.prev=87,A.prev=88,g||null==w.return||w.return();case 90:if(A.prev=90,!b){A.next=93;break}throw k;case 93:return A.finish(90);case 94:return A.finish(87);case 95:for(S=!0,$=!1,_=void 0,A.prev=98,M=this.completionHandlers[Symbol.iterator]();!(S=(C=M.next()).done);S=!0)(0,C.value)();A.next=106;break;case 102:A.prev=102,A.t4=A.catch(98),$=!0,_=A.t4;case 106:A.prev=106,A.prev=107,S||null==M.return||M.return();case 109:if(A.prev=109,!$){A.next=112;break}throw _;case 112:return A.finish(109);case 113:return A.finish(106);case 114:case"end":return A.stop()}}),null,this,[[6,10,14,22],[15,,17,21],[25,53,57,65],[32,36,40,48],[41,,43,47],[58,,60,64],[68,83,87,95],[88,,90,94],[98,102,106,114],[107,,109,113]])}},{key:"encode",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.btoa(e));case 1:case"end":return t.stop()}}))}},{key:"decode",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.atob(e));case 1:case"end":return t.stop()}}))}},{key:"getCompletedMigrations",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._completed){t.next=5;break}return t.next=3,regeneratorRuntime.awrap(this.storageManager.getItem("migrations"));case 3:e=t.sent,this._completed=e?JSON.parse(e):[];case 5:return t.abrupt("return",this._completed);case 6:case"end":return t.stop()}}),null,this)}},{key:"getPendingMigrations",value:function(){var e,t,n,r,i,a,o,s;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,regeneratorRuntime.awrap(this.getCompletedMigrations());case 2:e=c.sent,t=[],n=!0,r=!1,i=void 0,c.prev=7,a=this.migrations[Symbol.iterator]();case 9:if(n=(o=a.next()).done){c.next=22;break}return s=o.value,c.t0=e,c.next=14,regeneratorRuntime.awrap(this.encode(s.name));case 14:if(c.t1=c.sent,c.t2=c.t0.indexOf.call(c.t0,c.t1),c.t3=-1,c.t2!=c.t3){c.next=19;break}t.push(s);case 19:n=!0,c.next=9;break;case 22:c.next=28;break;case 24:c.prev=24,c.t4=c.catch(7),r=!0,i=c.t4;case 28:c.prev=28,c.prev=29,n||null==a.return||a.return();case 31:if(c.prev=31,!r){c.next=34;break}throw i;case 34:return c.finish(31);case 35:return c.finish(28);case 36:return c.abrupt("return",t);case 37:case"end":return c.stop()}}),null,this,[[7,24,28,36],[29,,31,35]])}},{key:"markMigrationCompleted",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.getCompletedMigrations());case 2:return t=n.sent,n.t0=t,n.next=6,regeneratorRuntime.awrap(this.encode(e.name));case 6:n.t1=n.sent,n.t0.push.call(n.t0,n.t1),this.storageManager.setItem("migrations",JSON.stringify(t)),e.running=!1;case 10:case"end":return n.stop()}}),null,this)}},{key:"runMigration",value:function(e,t){var n=this;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.running){r.next=2;break}return r.abrupt("return");case 2:if(console.log("Running migration:",e.name),e.running=!0,!e.customHandler){r.next=8;break}return r.abrupt("return",e.customHandler().then((function(){n.markMigrationCompleted(e)})));case 8:return r.abrupt("return",e.handler(t).then((function(){n.markMigrationCompleted(e)})));case 9:case"end":return r.stop()}}))}}])&&zt(t.prototype,n),e}();function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Kt=function(){function e(t,n,r,i,a){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modelManager=t,this.storageManager=n,this.$timeout=a||setTimeout.bind(window),this.keyRequestHandler=r,this.loadFromDisk().then((function(){o.modelManager.addItemSyncObserver("session-history",i,(function(e,t,n,r,i){if(r!==bt.MappingSourceLocalDirtied){var a=!0,s=!1,c=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value;try{o.addHistoryEntryForItem(f)}catch(e){console.log("Caught exception while trying to add item history entry",e)}}}catch(e){s=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw c}}}}))}))}var t,n;return t=e,(n=[{key:"encryptionParams",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.keyRequestHandler());case 1:case"end":return e.stop()}}),null,this)}},{key:"addHistoryEntryForItem",value:function(e){var t=this,n={uuid:e.uuid,content_type:e.content_type,updated_at:e.updated_at,content:e.getContentCopy()},r=this.historySession.addEntryForItem(n);this.autoOptimize&&this.historySession.optimizeHistoryForItem(e),r&&this.diskEnabled&&(this.diskTimeout&&(this.$timeout.hasOwnProperty("cancel")?this.$timeout.cancel(this.diskTimeout):clearTimeout(this.diskTimeout)),this.diskTimeout=this.$timeout((function(){t.saveToDisk()}),2e3))}},{key:"historyForItem",value:function(e){return this.historySession.historyForItem(e)}},{key:"clearHistoryForItem",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.historySession.clearItemHistory(e),t.abrupt("return",this.saveToDisk());case 2:case"end":return t.stop()}}),null,this)}},{key:"clearAllHistory",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.historySession.clearAllHistory(),e.abrupt("return",this.storageManager.removeItem("sessionHistory_revisions"));case 2:case"end":return e.stop()}}),null,this)}},{key:"toggleDiskSaving",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.diskEnabled=!this.diskEnabled,!this.diskEnabled){e.next=6;break}this.storageManager.setItem("sessionHistory_persist",JSON.stringify(!0)),this.saveToDisk(),e.next=8;break;case 6:return this.storageManager.setItem("sessionHistory_persist",JSON.stringify(!1)),e.abrupt("return",this.storageManager.removeItem("sessionHistory_revisions"));case 8:case"end":return e.stop()}}),null,this)}},{key:"saveToDisk",value:function(){var e,t=this;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.diskEnabled){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,regeneratorRuntime.awrap(this.encryptionParams());case 4:e=n.sent,new G(this.historySession,e.keys,e.auth_params).paramsForSync().then((function(e){t.storageManager.setItem("sessionHistory_revisions",JSON.stringify(e))}));case 7:case"end":return n.stop()}}),null,this)}},{key:"loadFromDisk",value:function(){var e,t,n,r,i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.storageManager.getItem("sessionHistory_persist"));case 2:return(e=a.sent)&&(this.diskEnabled=JSON.parse(e)),a.next=6,regeneratorRuntime.awrap(this.storageManager.getItem("sessionHistory_revisions"));case 6:if(!(t=a.sent)){a.next=18;break}return t=JSON.parse(t),a.next=11,regeneratorRuntime.awrap(this.encryptionParams());case 11:return n=a.sent,a.next=14,regeneratorRuntime.awrap(C.decryptItem(t,n.keys));case 14:r=new It(t),this.historySession=r,a.next=19;break;case 18:this.historySession=new It;case 19:return a.next=21,regeneratorRuntime.awrap(this.storageManager.getItem("sessionHistory_autoOptimize"));case 21:i=a.sent,this.autoOptimize=!i||JSON.parse(i);case 23:case"end":return a.stop()}}),null,this)}},{key:"toggleAutoOptimize",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.autoOptimize=!this.autoOptimize,this.autoOptimize?this.storageManager.setItem("sessionHistory_autoOptimize",JSON.stringify(!0)):this.storageManager.setItem("sessionHistory_autoOptimize",JSON.stringify(!1));case 2:case"end":return e.stop()}}),null,this)}}])&&Wt(t.prototype,n),e}();function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Jt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modelManager=t,this.syncManager=n,this.singletonManager=r,this.loadPrivileges(),e.CredentialAccountPassword="CredentialAccountPassword",e.CredentialLocalPasscode="CredentialLocalPasscode",e.ActionManageExtensions="ActionManageExtensions",e.ActionManageBackups="ActionManageBackups",e.ActionViewProtectedNotes="ActionViewProtectedNotes",e.ActionManagePrivileges="ActionManagePrivileges",e.ActionManagePasscode="ActionManagePasscode",e.ActionDeleteNote="ActionDeleteNote",e.SessionExpiresAtKey="SessionExpiresAtKey",e.SessionLengthKey="SessionLengthKey",e.SessionLengthNone=0,e.SessionLengthFiveMinutes=300,e.SessionLengthOneHour=3600,e.SessionLengthOneWeek=604800,this.availableActions=[e.ActionViewProtectedNotes,e.ActionDeleteNote,e.ActionManagePasscode,e.ActionManageBackups,e.ActionManageExtensions,e.ActionManagePrivileges],this.availableCredentials=[e.CredentialAccountPassword,e.CredentialLocalPasscode],this.sessionLengths=[e.SessionLengthNone,e.SessionLengthFiveMinutes,e.SessionLengthOneHour,e.SessionLengthOneWeek,e.SessionLengthIndefinite]}var t,n;return t=e,(n=[{key:"setDelegate",value:function(e){this.delegate=e}},{key:"getAvailableActions",value:function(){return this.availableActions}},{key:"getAvailableCredentials",value:function(){return this.availableCredentials}},{key:"netCredentialsForAction",value:function(t){var n,r,i,a,o,s,c,u;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,regeneratorRuntime.awrap(this.getPrivileges());case 2:l.t0=t,n=l.sent.getCredentialsForAction(l.t0),r=[],i=!0,a=!1,o=void 0,l.prev=8,s=n[Symbol.iterator]();case 10:if(i=(c=s.next()).done){l.next=27;break}if((u=c.value)!=e.CredentialAccountPassword){l.next=19;break}return l.next=15,regeneratorRuntime.awrap(this.delegate.isOffline());case 15:l.sent||r.push(u),l.next=24;break;case 19:if(u!=e.CredentialLocalPasscode){l.next=24;break}return l.next=22,regeneratorRuntime.awrap(this.delegate.hasLocalPasscode());case 22:l.sent&&r.push(u);case 24:i=!0,l.next=10;break;case 27:l.next=33;break;case 29:l.prev=29,l.t1=l.catch(8),a=!0,o=l.t1;case 33:l.prev=33,l.prev=34,i||null==s.return||s.return();case 36:if(l.prev=36,!a){l.next=39;break}throw o;case 39:return l.finish(36);case 40:return l.finish(33);case 41:return l.abrupt("return",r);case 42:case"end":return l.stop()}}),null,this,[[8,29,33,41],[34,,36,40]])}},{key:"loadPrivileges",value:function(){var e=this;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.loadPromise){t.next=2;break}return t.abrupt("return",this.loadPromise);case 2:return this.loadPromise=new Promise((function(t,n){var r=mt.contentType(),i=new N("content_type","=",r);e.singletonManager.registerSingleton([i],(function(n){e.privileges=n,t(n)}),(function(n){var i;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=new mt({content_type:r}),C.crypto.generateUUIDSync){a.next=4;break}return a.next=4,regeneratorRuntime.awrap(i.initUUID());case 4:e.modelManager.addItem(i),e.modelManager.setItemDirty(i,!0),e.syncManager.sync(),n(i),t(i);case 9:case"end":return a.stop()}}))}))})),t.abrupt("return",this.loadPromise);case 4:case"end":return t.stop()}}),null,this)}},{key:"getPrivileges",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privileges){e.next=4;break}return e.abrupt("return",this.privileges);case 4:return e.abrupt("return",this.loadPrivileges());case 5:case"end":return e.stop()}}),null,this)}},{key:"displayInfoForCredential",value:function(t){var n={};return n[e.CredentialAccountPassword]={label:"Account Password",prompt:"Please enter your account password."},n[e.CredentialLocalPasscode]={label:"Local Passcode",prompt:"Please enter your local passcode."},n[t]}},{key:"displayInfoForAction",value:function(t){var n={};return n[e.ActionManageExtensions]={label:"Manage Extensions"},n[e.ActionManageBackups]={label:"Download/Import Backups"},n[e.ActionViewProtectedNotes]={label:"View Protected Notes"},n[e.ActionManagePrivileges]={label:"Manage Privileges"},n[e.ActionManagePasscode]={label:"Manage Passcode"},n[e.ActionDeleteNote]={label:"Delete Notes"},n[t]}},{key:"getSessionLengthOptions",value:function(){return[{value:e.SessionLengthNone,label:"Don't Remember"},{value:e.SessionLengthFiveMinutes,label:"5 Minutes"},{value:e.SessionLengthOneHour,label:"1 Hour"},{value:e.SessionLengthOneWeek,label:"1 Week"}]}},{key:"setSessionLength",value:function(t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return i=t,a=void 0,(a=new Date).setSeconds(a.getSeconds()+i),n=a,r.abrupt("return",Promise.all([this.delegate.saveToStorage(e.SessionExpiresAtKey,JSON.stringify(n)),this.delegate.saveToStorage(e.SessionLengthKey,JSON.stringify(t))]));case 3:case"end":return r.stop()}var i,a}),null,this)}},{key:"clearSession",value:function(){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.setSessionLength(e.SessionLengthNone));case 1:case"end":return t.stop()}}),null,this)}},{key:"getSelectedSessionLength",value:function(){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.delegate.getFromStorage(e.SessionLengthKey));case 2:if(!(t=n.sent)){n.next=7;break}return n.abrupt("return",JSON.parse(t));case 7:return n.abrupt("return",e.SessionLengthNone);case 8:case"end":return n.stop()}}),null,this)}},{key:"getSessionExpirey",value:function(){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.delegate.getFromStorage(e.SessionExpiresAtKey));case 2:if(!(t=n.sent)){n.next=7;break}return n.abrupt("return",new Date(JSON.parse(t)));case 7:return n.abrupt("return",new Date);case 8:case"end":return n.stop()}}),null,this)}},{key:"actionHasPrivilegesConfigured",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.netCredentialsForAction(e));case 2:return t.t0=t.sent.length,t.abrupt("return",t.t0>0);case 4:case"end":return t.stop()}}),null,this)}},{key:"actionRequiresPrivilege",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.getSessionExpirey());case 2:if(!(n.sent>new Date)){n.next=5;break}return n.abrupt("return",!1);case 5:return n.next=7,regeneratorRuntime.awrap(this.netCredentialsForAction(e));case 7:return t=n.sent,n.abrupt("return",t.length>0);case 9:case"end":return n.stop()}}),null,this)}},{key:"savePrivileges",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.getPrivileges());case 2:e=t.sent,this.modelManager.setItemDirty(e,!0),this.syncManager.sync();case 5:case"end":return t.stop()}}),null,this)}},{key:"authenticateAction",value:function(e,t){var n,r,i,a,o,s,c,u,l;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,regeneratorRuntime.awrap(this.netCredentialsForAction(e));case 2:n=f.sent,r=[],i=[],a=!0,o=!1,s=void 0,f.prev=7,c=n[Symbol.iterator]();case 9:if(a=(u=c.next()).done){f.next=18;break}return l=u.value,f.next=13,regeneratorRuntime.awrap(this._verifyAuthenticationParameters(l,t[l]));case 13:f.sent?r.push(l):i.push(l);case 15:a=!0,f.next=9;break;case 18:f.next=24;break;case 20:f.prev=20,f.t0=f.catch(7),o=!0,s=f.t0;case 24:f.prev=24,f.prev=25,a||null==c.return||c.return();case 27:if(f.prev=27,!o){f.next=30;break}throw s;case 30:return f.finish(27);case 31:return f.finish(24);case 32:return f.abrupt("return",{success:0==i.length,successfulCredentials:r,failedCredentials:i});case 33:case"end":return f.stop()}}),null,this,[[7,20,24,32],[25,,27,31]])}},{key:"_verifyAuthenticationParameters",value:function(t,n){var r,i,a=this;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(r=function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.delegate.verifyAccountPassword(e));case 1:case"end":return t.stop()}}))},i=function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.delegate.verifyLocalPasscode(e));case 1:case"end":return t.stop()}}))},t!=e.CredentialAccountPassword){o.next=6;break}return o.abrupt("return",r(n));case 6:if(t!=e.CredentialLocalPasscode){o.next=8;break}return o.abrupt("return",i(n));case 8:case"end":return o.stop()}}))}}])&&qt(t.prototype,n),e}();function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Yt=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.syncManager=n,this.modelManager=t,this.singletonHandlers=[],t.addItemSyncObserverWithPriority({id:"sf-singleton-manager",types:"*",priority:-1,callback:function(e,n,i,a,o){a!==bt.MappingSourceLocalDirtied&&r.resolveSingletons(t.allNondummyItems,!0)}}),n.addEventHandler((function(e,n){if("local-data-loaded"==e)r.resolveSingletons(t.allNondummyItems,!0),r.initialDataLoaded=!0;else if("sync:completed"==e){if(!r.initialDataLoaded)return;r.resolveSingletons(n.retrievedItems)}})),t.addModelUuidChangeObserver("singleton-manager",(function(e,t){var n=!0,i=!1,a=void 0;try{for(var o,s=r.singletonHandlers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;c.singleton&&N.ItemSatisfiesPredicates(t,c.predicates)&&(c.singleton=null,r.resolveSingletons([t]))}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}))}var t,n;return t=e,(n=[{key:"registerSingleton",value:function(e,t,n){this.singletonHandlers.push({predicates:e,resolutionCallback:t,createBlock:n})}},{key:"resolveSingletons",value:function(e,t){var n=this;e=e||[];var r=!0,i=!1,a=void 0;try{for(var o,s=function(){var r=o.value,i=r.predicates.slice(),a=function(){r.createBlock&&(r.pendingCreateBlockCallback=!0,r.createBlock((function(e){r.singleton=e,r.pendingCreateBlockCallback=!1,r.resolutionCallback&&r.resolutionCallback(e)})))};if(n.modelManager.filterItemsWithPredicates(e,i).length>0){var s=n.modelManager.itemsMatchingPredicates(i);if(s.length>=2){var c=s.sort((function(e,t){return e.errorDecrypting?1:t.errorDecrypting?-1:e.created_at<t.created_at?-1:1})),u=c[0],l=c.slice(1,c.length),f=!0,p=!1,d=void 0;try{for(var h,v=l[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var m=h.value;n.modelManager.setItemToBeDeleted(m)}}catch(e){p=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(p)throw d}}n.syncManager.sync(),r.singleton=u,r.resolutionCallback&&r.resolutionCallback(u)}else if(1==s.length){var y=s[0];y.errorDecrypting?(n.modelManager.setItemToBeDeleted(y),a()):r.singleton&&r.singleton===y||(r.singleton=y,r.resolutionCallback&&r.resolutionCallback(y))}}else r.singleton||t||r.pendingCreateBlockCallback||a()},c=this.singletonHandlers[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)s()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}}}])&&Gt(t.prototype,n),e}();n.d(t,"SNProtocolManager",(function(){return M})),n.d(t,"protocolManager",(function(){return C})),n.d(t,"SFItem",(function(){return B})),n.d(t,"SFItemParams",(function(){return G})),n.d(t,"SFPredicate",(function(){return N})),n.d(t,"SNNote",(function(){return se})),n.d(t,"SNTag",(function(){return te})),n.d(t,"SNSmartTag",(function(){return pe})),n.d(t,"SNMfa",(function(){return ye})),n.d(t,"SNServerExtension",(function(){return $e})),n.d(t,"SNComponent",(function(){return Ie})),n.d(t,"SNEditor",(function(){return Ue})),n.d(t,"SNExtension",(function(){return Je})),n.d(t,"Action",(function(){return qe})),n.d(t,"SNTheme",(function(){return Qe})),n.d(t,"SNEncryptedStorage",(function(){return ot})),n.d(t,"SNComponentManager",(function(){return wt})),n.d(t,"SFHistorySession",(function(){return It})),n.d(t,"SFItemHistory",(function(){return _t})),n.d(t,"SFItemHistoryEntry",(function(){return St})),n.d(t,"SFPrivileges",(function(){return mt})),n.d(t,"SNWebCrypto",(function(){return r.SNWebCrypto})),n.d(t,"SNCryptoJS",(function(){return r.SNCryptoJS})),n.d(t,"SNReactNativeCrypto",(function(){return r.SNReactNativeCrypto})),n.d(t,"findInArray",(function(){return $.a})),n.d(t,"SFModelManager",(function(){return bt})),n.d(t,"SFHttpManager",(function(){return Rt})),n.d(t,"SFStorageManager",(function(){return Tt})),n.d(t,"SFSyncManager",(function(){return Ft})),n.d(t,"SFAuthManager",(function(){return Ht})),n.d(t,"SFMigrationManager",(function(){return Vt})),n.d(t,"SFAlertManager",(function(){return Lt})),n.d(t,"SFSessionHistoryManager",(function(){return Kt})),n.d(t,"SFPrivilegesManager",(function(){return Jt})),n.d(t,"SFSingletonManager",(function(){return Yt}))}])},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(14),i=n(13);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t,n){var r=n(47);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){n(40),e.exports=angular},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],c="[object Arguments]",u="[object Array]",l="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Function]",h="[object GeneratorFunction]",v="[object Map]",m="[object Number]",y="[object Object]",g="[object RegExp]",b="[object Set]",k="[object String]",w="[object Symbol]",x="[object WeakMap]",S="[object ArrayBuffer]",$="[object DataView]",_="[object Float32Array]",M="[object Float64Array]",C="[object Int8Array]",A="[object Int16Array]",O="[object Int32Array]",I="[object Uint8Array]",E="[object Uint16Array]",D="[object Uint32Array]",R=/\b__p \+= '';/g,P=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,N=RegExp(j.source),L=RegExp(F.source),U=/<%-([\s\S]+?)%>/g,B=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,q=RegExp(K.source),J=/^\s+|\s+$/g,G=/^\s+/,Y=/\s+$/,Z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,ae=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,ce=/^(?:0|[1-9]\d*)$/,ue=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,pe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",he="[\\ud800-\\udfff]",ve="["+de+"]",me="["+pe+"]",ye="\\d+",ge="[\\u2700-\\u27bf]",be="[a-z\\xdf-\\xf6\\xf8-\\xff]",ke="[^\\ud800-\\udfff"+de+ye+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",we="\\ud83c[\\udffb-\\udfff]",xe="[^\\ud800-\\udfff]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",_e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Me="(?:"+be+"|"+ke+")",Ce="(?:"+_e+"|"+ke+")",Ae="(?:"+me+"|"+we+")"+"?",Oe="[\\ufe0e\\ufe0f]?"+Ae+("(?:\\u200d(?:"+[xe,Se,$e].join("|")+")[\\ufe0e\\ufe0f]?"+Ae+")*"),Ie="(?:"+[ge,Se,$e].join("|")+")"+Oe,Ee="(?:"+[xe+me+"?",me,Se,$e,he].join("|")+")",De=RegExp("['â]","g"),Re=RegExp(me,"g"),Pe=RegExp(we+"(?="+we+")|"+Ee+Oe,"g"),Te=RegExp([_e+"?"+be+"+(?:['â](?:d|ll|m|re|s|t|ve))?(?="+[ve,_e,"$"].join("|")+")",Ce+"+(?:['â](?:D|LL|M|RE|S|T|VE))?(?="+[ve,_e+Me,"$"].join("|")+")",_e+"?"+Me+"+(?:['â](?:d|ll|m|re|s|t|ve))?",_e+"+(?:['â](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ye,Ie].join("|"),"g"),je=RegExp("[\\u200d\\ud800-\\udfff"+pe+"\\ufe0e\\ufe0f]"),Fe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Le=-1,Ue={};Ue[_]=Ue[M]=Ue[C]=Ue[A]=Ue[O]=Ue[I]=Ue["[object Uint8ClampedArray]"]=Ue[E]=Ue[D]=!0,Ue[c]=Ue[u]=Ue[S]=Ue[l]=Ue[$]=Ue[f]=Ue[p]=Ue[d]=Ue[v]=Ue[m]=Ue[y]=Ue[g]=Ue[b]=Ue[k]=Ue[x]=!1;var Be={};Be[c]=Be[u]=Be[S]=Be[$]=Be[l]=Be[f]=Be[_]=Be[M]=Be[C]=Be[A]=Be[O]=Be[v]=Be[m]=Be[y]=Be[g]=Be[b]=Be[k]=Be[w]=Be[I]=Be["[object Uint8ClampedArray]"]=Be[E]=Be[D]=!0,Be[p]=Be[d]=Be[x]=!1;var He={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=parseFloat,Ve=parseInt,We="object"==typeof e&&e&&e.Object===Object&&e,Ke="object"==typeof self&&self&&self.Object===Object&&self,qe=We||Ke||Function("return this")(),Je=t&&!t.nodeType&&t,Ge=Je&&"object"==typeof r&&r&&!r.nodeType&&r,Ye=Ge&&Ge.exports===Je,Ze=Ye&&We.process,Xe=function(){try{var e=Ge&&Ge.require&&Ge.require("util").types;return e||Ze&&Ze.binding&&Ze.binding("util")}catch(e){}}(),Qe=Xe&&Xe.isArrayBuffer,et=Xe&&Xe.isDate,tt=Xe&&Xe.isMap,nt=Xe&&Xe.isRegExp,rt=Xe&&Xe.isSet,it=Xe&&Xe.isTypedArray;function at(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ot(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function ft(e,t){return!!(null==e?0:e.length)&&wt(e,t,0)>-1}function pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function ht(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function vt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function mt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function yt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var gt=_t("length");function bt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function kt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function wt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):kt(e,St,n)}function xt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function St(e){return e!=e}function $t(e,t){var n=null==e?0:e.length;return n?At(e,t)/n:NaN}function _t(e){return function(t){return null==t?void 0:t[e]}}function Mt(e){return function(t){return null==e?void 0:e[t]}}function Ct(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function At(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);void 0!==a&&(n=void 0===n?a:n+a)}return n}function Ot(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function It(e){return function(t){return e(t)}}function Et(e,t){return dt(t,(function(t){return e[t]}))}function Dt(e,t){return e.has(t)}function Rt(e,t){for(var n=-1,r=e.length;++n<r&&wt(t,e[n],0)>-1;);return n}function Pt(e,t){for(var n=e.length;n--&&wt(t,e[n],0)>-1;);return n}function Tt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var jt=Mt({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),Ft=Mt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Nt(e){return"\\"+He[e]}function Lt(e){return je.test(e)}function Ut(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Bt(e,t){return function(n){return e(t(n))}}function Ht(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var s=e[n];s!==t&&s!==o||(e[n]=o,a[i++]=n)}return a}function zt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Vt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Wt(e){return Lt(e)?function(e){var t=Pe.lastIndex=0;for(;Pe.test(e);)++t;return t}(e):gt(e)}function Kt(e){return Lt(e)?function(e){return e.match(Pe)||[]}(e):function(e){return e.split("")}(e)}var qt=Mt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Jt=function e(t){var n,r=(t=null==t?qe:Jt.defaults(qe.Object(),t,Jt.pick(qe,Ne))).Array,i=t.Date,pe=t.Error,de=t.Function,he=t.Math,ve=t.Object,me=t.RegExp,ye=t.String,ge=t.TypeError,be=r.prototype,ke=de.prototype,we=ve.prototype,xe=t["__core-js_shared__"],Se=ke.toString,$e=we.hasOwnProperty,_e=0,Me=(n=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ce=we.toString,Ae=Se.call(ve),Oe=qe._,Ie=me("^"+Se.call($e).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=Ye?t.Buffer:void 0,Pe=t.Symbol,je=t.Uint8Array,He=Ee?Ee.allocUnsafe:void 0,We=Bt(ve.getPrototypeOf,ve),Ke=ve.create,Je=we.propertyIsEnumerable,Ge=be.splice,Ze=Pe?Pe.isConcatSpreadable:void 0,Xe=Pe?Pe.iterator:void 0,gt=Pe?Pe.toStringTag:void 0,Mt=function(){try{var e=Qi(ve,"defineProperty");return e({},"",{}),e}catch(e){}}(),Gt=t.clearTimeout!==qe.clearTimeout&&t.clearTimeout,Yt=i&&i.now!==qe.Date.now&&i.now,Zt=t.setTimeout!==qe.setTimeout&&t.setTimeout,Xt=he.ceil,Qt=he.floor,en=ve.getOwnPropertySymbols,tn=Ee?Ee.isBuffer:void 0,nn=t.isFinite,rn=be.join,an=Bt(ve.keys,ve),on=he.max,sn=he.min,cn=i.now,un=t.parseInt,ln=he.random,fn=be.reverse,pn=Qi(t,"DataView"),dn=Qi(t,"Map"),hn=Qi(t,"Promise"),vn=Qi(t,"Set"),mn=Qi(t,"WeakMap"),yn=Qi(ve,"create"),gn=mn&&new mn,bn={},kn=Ma(pn),wn=Ma(dn),xn=Ma(hn),Sn=Ma(vn),$n=Ma(mn),_n=Pe?Pe.prototype:void 0,Mn=_n?_n.valueOf:void 0,Cn=_n?_n.toString:void 0;function An(e){if(Vo(e)&&!Ro(e)&&!(e instanceof Dn)){if(e instanceof En)return e;if($e.call(e,"__wrapped__"))return Ca(e)}return new En(e)}var On=function(){function e(){}return function(t){if(!zo(t))return{};if(Ke)return Ke(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function In(){}function En(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Dn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Tn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Tn;++t<n;)this.add(e[t])}function Fn(e){var t=this.__data__=new Pn(e);this.size=t.size}function Nn(e,t){var n=Ro(e),r=!n&&Do(e),i=!n&&!r&&Fo(e),a=!n&&!r&&!i&&Xo(e),o=n||r||i||a,s=o?Ot(e.length,ye):[],c=s.length;for(var u in e)!t&&!$e.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||oa(u,c))||s.push(u);return s}function Ln(e){var t=e.length;return t?e[jr(0,t-1)]:void 0}function Un(e,t){return Sa(yi(e),Gn(t,0,e.length))}function Bn(e){return Sa(yi(e))}function Hn(e,t,n){(void 0===n||Oo(e[t],n))&&(void 0!==n||t in e)||qn(e,t,n)}function zn(e,t,n){var r=e[t];$e.call(e,t)&&Oo(r,n)&&(void 0!==n||t in e)||qn(e,t,n)}function Vn(e,t){for(var n=e.length;n--;)if(Oo(e[n][0],t))return n;return-1}function Wn(e,t,n,r){return er(e,(function(e,i,a){t(r,e,n(e),a)})),r}function Kn(e,t){return e&&gi(t,ks(t),e)}function qn(e,t,n){"__proto__"==t&&Mt?Mt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Jn(e,t){for(var n=-1,i=t.length,a=r(i),o=null==e;++n<i;)a[n]=o?void 0:vs(e,t[n]);return a}function Gn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Yn(e,t,n,r,i,a){var o,s=1&t,u=2&t,p=4&t;if(n&&(o=i?n(e,r,i,a):n(e)),void 0!==o)return o;if(!zo(e))return e;var x=Ro(e);if(x){if(o=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&$e.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!s)return yi(e,o)}else{var R=na(e),P=R==d||R==h;if(Fo(e))return fi(e,s);if(R==y||R==c||P&&!i){if(o=u||P?{}:ia(e),!s)return u?function(e,t){return gi(e,ta(e),t)}(e,function(e,t){return e&&gi(t,ws(t),e)}(o,e)):function(e,t){return gi(e,ea(e),t)}(e,Kn(o,e))}else{if(!Be[R])return i?e:{};o=function(e,t,n){var r=e.constructor;switch(t){case S:return pi(e);case l:case f:return new r(+e);case $:return function(e,t){var n=t?pi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case _:case M:case C:case A:case O:case I:case"[object Uint8ClampedArray]":case E:case D:return di(e,n);case v:return new r;case m:case k:return new r(e);case g:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case b:return new r;case w:return i=e,Mn?ve(Mn.call(i)):{}}var i}(e,R,s)}}a||(a=new Fn);var T=a.get(e);if(T)return T;a.set(e,o),Go(e)?e.forEach((function(r){o.add(Yn(r,t,n,r,e,a))})):Wo(e)&&e.forEach((function(r,i){o.set(i,Yn(r,t,n,i,e,a))}));var j=x?void 0:(p?u?Ki:Wi:u?ws:ks)(e);return st(j||e,(function(r,i){j&&(r=e[i=r]),zn(o,i,Yn(r,t,n,i,e,a))})),o}function Zn(e,t,n){var r=n.length;if(null==e)return!r;for(e=ve(e);r--;){var i=n[r],a=t[i],o=e[i];if(void 0===o&&!(i in e)||!a(o))return!1}return!0}function Xn(e,t,n){if("function"!=typeof e)throw new ge(a);return ba((function(){e.apply(void 0,n)}),t)}function Qn(e,t,n,r){var i=-1,a=ft,o=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=dt(t,It(n))),r?(a=pt,o=!1):t.length>=200&&(a=Dt,o=!1,t=new jn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,o&&f==f){for(var p=u;p--;)if(t[p]===f)continue e;c.push(l)}else a(t,f,r)||c.push(l)}return c}An.templateSettings={escape:U,evaluate:B,interpolate:H,variable:"",imports:{_:An}},An.prototype=In.prototype,An.prototype.constructor=An,En.prototype=On(In.prototype),En.prototype.constructor=En,Dn.prototype=On(In.prototype),Dn.prototype.constructor=Dn,Rn.prototype.clear=function(){this.__data__=yn?yn(null):{},this.size=0},Rn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Rn.prototype.get=function(e){var t=this.__data__;if(yn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return $e.call(t,e)?t[e]:void 0},Rn.prototype.has=function(e){var t=this.__data__;return yn?void 0!==t[e]:$e.call(t,e)},Rn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yn&&void 0===t?"__lodash_hash_undefined__":t,this},Pn.prototype.clear=function(){this.__data__=[],this.size=0},Pn.prototype.delete=function(e){var t=this.__data__,n=Vn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ge.call(t,n,1),--this.size,!0)},Pn.prototype.get=function(e){var t=this.__data__,n=Vn(t,e);return n<0?void 0:t[n][1]},Pn.prototype.has=function(e){return Vn(this.__data__,e)>-1},Pn.prototype.set=function(e,t){var n=this.__data__,r=Vn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Tn.prototype.clear=function(){this.size=0,this.__data__={hash:new Rn,map:new(dn||Pn),string:new Rn}},Tn.prototype.delete=function(e){var t=Zi(this,e).delete(e);return this.size-=t?1:0,t},Tn.prototype.get=function(e){return Zi(this,e).get(e)},Tn.prototype.has=function(e){return Zi(this,e).has(e)},Tn.prototype.set=function(e,t){var n=Zi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},jn.prototype.add=jn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},jn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.clear=function(){this.__data__=new Pn,this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fn.prototype.get=function(e){return this.__data__.get(e)},Fn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Pn){var r=n.__data__;if(!dn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Tn(r)}return n.set(e,t),this.size=n.size,this};var er=wi(cr),tr=wi(ur,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],o=t(a);if(null!=o&&(void 0===s?o==o&&!Zo(o):n(o,s)))var s=o,c=a}return c}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function ar(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=aa),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?ar(s,t-1,n,r,i):ht(i,s):r||(i[i.length]=s)}return i}var or=xi(),sr=xi(!0);function cr(e,t){return e&&or(e,t,ks)}function ur(e,t){return e&&sr(e,t,ks)}function lr(e,t){return lt(t,(function(t){return Uo(e[t])}))}function fr(e,t){for(var n=0,r=(t=si(t,e)).length;null!=e&&n<r;)e=e[_a(t[n++])];return n&&n==r?e:void 0}function pr(e,t,n){var r=t(e);return Ro(e)?r:ht(r,n(e))}function dr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":gt&&gt in ve(e)?function(e){var t=$e.call(e,gt),n=e[gt];try{e[gt]=void 0;var r=!0}catch(e){}var i=Ce.call(e);r&&(t?e[gt]=n:delete e[gt]);return i}(e):function(e){return Ce.call(e)}(e)}function hr(e,t){return e>t}function vr(e,t){return null!=e&&$e.call(e,t)}function mr(e,t){return null!=e&&t in ve(e)}function yr(e,t,n){for(var i=n?pt:ft,a=e[0].length,o=e.length,s=o,c=r(o),u=1/0,l=[];s--;){var f=e[s];s&&t&&(f=dt(f,It(t))),u=sn(f.length,u),c[s]=!n&&(t||a>=120&&f.length>=120)?new jn(s&&f):void 0}f=e[0];var p=-1,d=c[0];e:for(;++p<a&&l.length<u;){var h=f[p],v=t?t(h):h;if(h=n||0!==h?h:0,!(d?Dt(d,v):i(l,v,n))){for(s=o;--s;){var m=c[s];if(!(m?Dt(m,v):i(e[s],v,n)))continue e}d&&d.push(v),l.push(h)}}return l}function gr(e,t,n){var r=null==(e=va(e,t=si(t,e)))?e:e[_a(Na(t))];return null==r?void 0:at(r,e,n)}function br(e){return Vo(e)&&dr(e)==c}function kr(e,t,n,r,i){return e===t||(null==e||null==t||!Vo(e)&&!Vo(t)?e!=e&&t!=t:function(e,t,n,r,i,a){var o=Ro(e),s=Ro(t),d=o?u:na(e),h=s?u:na(t),x=(d=d==c?y:d)==y,_=(h=h==c?y:h)==y,M=d==h;if(M&&Fo(e)){if(!Fo(t))return!1;o=!0,x=!1}if(M&&!x)return a||(a=new Fn),o||Xo(e)?zi(e,t,n,r,i,a):function(e,t,n,r,i,a,o){switch(n){case $:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!a(new je(e),new je(t)));case l:case f:case m:return Oo(+e,+t);case p:return e.name==t.name&&e.message==t.message;case g:case k:return e==t+"";case v:var s=Ut;case b:var c=1&r;if(s||(s=zt),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var d=zi(s(e),s(t),r,i,a,o);return o.delete(e),d;case w:if(Mn)return Mn.call(e)==Mn.call(t)}return!1}(e,t,d,n,r,i,a);if(!(1&n)){var C=x&&$e.call(e,"__wrapped__"),A=_&&$e.call(t,"__wrapped__");if(C||A){var O=C?e.value():e,I=A?t.value():t;return a||(a=new Fn),i(O,I,n,r,a)}}if(!M)return!1;return a||(a=new Fn),function(e,t,n,r,i,a){var o=1&n,s=Wi(e),c=s.length,u=Wi(t).length;if(c!=u&&!o)return!1;var l=c;for(;l--;){var f=s[l];if(!(o?f in t:$e.call(t,f)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var d=!0;a.set(e,t),a.set(t,e);var h=o;for(;++l<c;){f=s[l];var v=e[f],m=t[f];if(r)var y=o?r(m,v,f,t,e,a):r(v,m,f,e,t,a);if(!(void 0===y?v===m||i(v,m,n,r,a):y)){d=!1;break}h||(h="constructor"==f)}if(d&&!h){var g=e.constructor,b=t.constructor;g!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b)&&(d=!1)}return a.delete(e),a.delete(t),d}(e,t,n,r,i,a)}(e,t,n,r,kr,i))}function wr(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=ve(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var c=(s=n[i])[0],u=e[c],l=s[1];if(o&&s[2]){if(void 0===u&&!(c in e))return!1}else{var f=new Fn;if(r)var p=r(u,l,c,e,t,f);if(!(void 0===p?kr(l,u,3,r,f):p))return!1}}return!0}function xr(e){return!(!zo(e)||(t=e,Me&&Me in t))&&(Uo(e)?Ie:oe).test(Ma(e));var t}function Sr(e){return"function"==typeof e?e:null==e?Ks:"object"==typeof e?Ro(e)?Or(e[0],e[1]):Ar(e):tc(e)}function $r(e){if(!fa(e))return an(e);var t=[];for(var n in ve(e))$e.call(e,n)&&"constructor"!=n&&t.push(n);return t}function _r(e){if(!zo(e))return function(e){var t=[];if(null!=e)for(var n in ve(e))t.push(n);return t}(e);var t=fa(e),n=[];for(var r in e)("constructor"!=r||!t&&$e.call(e,r))&&n.push(r);return n}function Mr(e,t){return e<t}function Cr(e,t){var n=-1,i=To(e)?r(e.length):[];return er(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function Ar(e){var t=Xi(e);return 1==t.length&&t[0][2]?da(t[0][0],t[0][1]):function(n){return n===e||wr(n,e,t)}}function Or(e,t){return ca(e)&&pa(t)?da(_a(e),t):function(n){var r=vs(n,e);return void 0===r&&r===t?ms(n,e):kr(t,r,3)}}function Ir(e,t,n,r,i){e!==t&&or(t,(function(a,o){if(i||(i=new Fn),zo(a))!function(e,t,n,r,i,a,o){var s=ya(e,n),c=ya(t,n),u=o.get(c);if(u)return void Hn(e,n,u);var l=a?a(s,c,n+"",e,t,o):void 0,f=void 0===l;if(f){var p=Ro(c),d=!p&&Fo(c),h=!p&&!d&&Xo(c);l=c,p||d||h?Ro(s)?l=s:jo(s)?l=yi(s):d?(f=!1,l=fi(c,!0)):h?(f=!1,l=di(c,!0)):l=[]:qo(c)||Do(c)?(l=s,Do(s)?l=os(s):zo(s)&&!Uo(s)||(l=ia(c))):f=!1}f&&(o.set(c,l),i(l,c,r,a,o),o.delete(c));Hn(e,n,l)}(e,t,o,n,Ir,r,i);else{var s=r?r(ya(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),Hn(e,o,s)}}),ws)}function Er(e,t){var n=e.length;if(n)return oa(t+=t<0?n:0,n)?e[t]:void 0}function Dr(e,t,n){var r=-1;return t=dt(t.length?t:[Ks],It(Yi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Cr(e,(function(e,n,i){return{criteria:dt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var c=hi(i[r],a[r]);if(c){if(r>=s)return c;var u=n[r];return c*("desc"==u?-1:1)}}return e.index-t.index}(e,t,n)}))}function Rr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=fr(e,o);n(s,o)&&Br(a,si(o,e),s)}return a}function Pr(e,t,n,r){var i=r?xt:wt,a=-1,o=t.length,s=e;for(e===t&&(t=yi(t)),n&&(s=dt(e,It(n)));++a<o;)for(var c=0,u=t[a],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==e&&Ge.call(s,c,1),Ge.call(e,c,1);return e}function Tr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;oa(i)?Ge.call(e,i,1):Qr(e,i)}}return e}function jr(e,t){return e+Qt(ln()*(t-e+1))}function Fr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Qt(t/2))&&(e+=e)}while(t);return n}function Nr(e,t){return ka(ha(e,t,Ks),e+"")}function Lr(e){return Ln(Os(e))}function Ur(e,t){var n=Os(e);return Sa(n,Gn(t,0,n.length))}function Br(e,t,n,r){if(!zo(e))return e;for(var i=-1,a=(t=si(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var c=_a(t[i]),u=n;if(i!=o){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=zo(l)?l:oa(t[i+1])?[]:{})}zn(s,c,u),s=s[c]}return e}var Hr=gn?function(e,t){return gn.set(e,t),e}:Ks,zr=Mt?function(e,t){return Mt(e,"toString",{configurable:!0,enumerable:!1,value:zs(t),writable:!0})}:Ks;function Vr(e){return Sa(Os(e))}function Wr(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=r(a);++i<a;)o[i]=e[i+t];return o}function Kr(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function qr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!Zo(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return Jr(e,t,Ks,n)}function Jr(e,t,n,r){t=n(t);for(var i=0,a=null==e?0:e.length,o=t!=t,s=null===t,c=Zo(t),u=void 0===t;i<a;){var l=Qt((i+a)/2),f=n(e[l]),p=void 0!==f,d=null===f,h=f==f,v=Zo(f);if(o)var m=r||h;else m=u?h&&(r||p):s?h&&p&&(r||!d):c?h&&p&&!d&&(r||!v):!d&&!v&&(r?f<=t:f<t);m?i=l+1:a=l}return sn(a,4294967294)}function Gr(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Oo(s,c)){var c=s;a[i++]=0===o?0:o}}return a}function Yr(e){return"number"==typeof e?e:Zo(e)?NaN:+e}function Zr(e){if("string"==typeof e)return e;if(Ro(e))return dt(e,Zr)+"";if(Zo(e))return Cn?Cn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xr(e,t,n){var r=-1,i=ft,a=e.length,o=!0,s=[],c=s;if(n)o=!1,i=pt;else if(a>=200){var u=t?null:Fi(e);if(u)return zt(u);o=!1,i=Dt,c=new jn}else c=t?[]:s;e:for(;++r<a;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,o&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),s.push(l)}else i(c,f,n)||(c!==s&&c.push(f),s.push(l))}return s}function Qr(e,t){return null==(e=va(e,t=si(t,e)))||delete e[_a(Na(t))]}function ei(e,t,n,r){return Br(e,t,n(fr(e,t)),r)}function ti(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?Wr(e,r?0:a,r?a+1:i):Wr(e,r?a+1:0,r?i:a)}function ni(e,t){var n=e;return n instanceof Dn&&(n=n.value()),vt(t,(function(e,t){return t.func.apply(t.thisArg,ht([e],t.args))}),n)}function ri(e,t,n){var i=e.length;if(i<2)return i?Xr(e[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=e[a],c=-1;++c<i;)c!=a&&(o[a]=Qn(o[a]||s,e[c],t,n));return Xr(ar(o,1),t,n)}function ii(e,t,n){for(var r=-1,i=e.length,a=t.length,o={};++r<i;){var s=r<a?t[r]:void 0;n(o,e[r],s)}return o}function ai(e){return jo(e)?e:[]}function oi(e){return"function"==typeof e?e:Ks}function si(e,t){return Ro(e)?e:ca(e,t)?[e]:$a(ss(e))}var ci=Nr;function ui(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Wr(e,t,n)}var li=Gt||function(e){return qe.clearTimeout(e)};function fi(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function pi(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function di(e,t){var n=t?pi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function hi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,a=Zo(e),o=void 0!==t,s=null===t,c=t==t,u=Zo(t);if(!s&&!u&&!a&&e>t||a&&o&&c&&!s&&!u||r&&o&&c||!n&&c||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!c)return-1}return 0}function vi(e,t,n,i){for(var a=-1,o=e.length,s=n.length,c=-1,u=t.length,l=on(o-s,0),f=r(u+l),p=!i;++c<u;)f[c]=t[c];for(;++a<s;)(p||a<o)&&(f[n[a]]=e[a]);for(;l--;)f[c++]=e[a++];return f}function mi(e,t,n,i){for(var a=-1,o=e.length,s=-1,c=n.length,u=-1,l=t.length,f=on(o-c,0),p=r(f+l),d=!i;++a<f;)p[a]=e[a];for(var h=a;++u<l;)p[h+u]=t[u];for(;++s<c;)(d||a<o)&&(p[h+n[s]]=e[a++]);return p}function yi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function gi(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?qn(n,s,c):zn(n,s,c)}return n}function bi(e,t){return function(n,r){var i=Ro(n)?ot:Wn,a=t?t():{};return i(n,e,Yi(r,2),a)}}function ki(e){return Nr((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&sa(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),t=ve(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t}))}function wi(e,t){return function(n,r){if(null==n)return n;if(!To(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=ve(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function xi(e){return function(t,n,r){for(var i=-1,a=ve(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(!1===n(a[c],c,a))break}return t}}function Si(e){return function(t){var n=Lt(t=ss(t))?Kt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ui(n,1).join(""):t.slice(1);return r[e]()+i}}function $i(e){return function(t){return vt(Us(Ds(t).replace(De,"")),e,"")}}function _i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=On(e.prototype),r=e.apply(n,t);return zo(r)?r:n}}function Mi(e){return function(t,n,r){var i=ve(t);if(!To(t)){var a=Yi(n,3);t=ks(t),n=function(e){return a(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:void 0}}function Ci(e){return Vi((function(t){var n=t.length,r=n,i=En.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new ge(a);if(i&&!s&&"wrapper"==Ji(o))var s=new En([],!0)}for(r=s?r:n;++r<n;){var c=Ji(o=t[r]),u="wrapper"==c?qi(o):void 0;s=u&&ua(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?s[Ji(u[0])].apply(s,u[3]):1==o.length&&ua(o)?s[c]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Ro(r))return s.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Ai(e,t,n,i,a,o,s,c,u,l){var f=128&t,p=1&t,d=2&t,h=24&t,v=512&t,m=d?void 0:_i(e);return function y(){for(var g=arguments.length,b=r(g),k=g;k--;)b[k]=arguments[k];if(h)var w=Gi(y),x=Tt(b,w);if(i&&(b=vi(b,i,a,h)),o&&(b=mi(b,o,s,h)),g-=x,h&&g<l){var S=Ht(b,w);return Ti(e,t,Ai,y.placeholder,n,b,S,c,u,l-g)}var $=p?n:this,_=d?$[e]:e;return g=b.length,c?b=ma(b,c):v&&g>1&&b.reverse(),f&&u<g&&(b.length=u),this&&this!==qe&&this instanceof y&&(_=m||_i(_)),_.apply($,b)}}function Oi(e,t){return function(n,r){return function(e,t,n,r){return cr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Ii(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Zr(n),r=Zr(r)):(n=Yr(n),r=Yr(r)),i=e(n,r)}return i}}function Ei(e){return Vi((function(t){return t=dt(t,It(Yi())),Nr((function(n){var r=this;return e(t,(function(e){return at(e,r,n)}))}))}))}function Di(e,t){var n=(t=void 0===t?" ":Zr(t)).length;if(n<2)return n?Fr(t,e):t;var r=Fr(t,Xt(e/Wt(t)));return Lt(t)?ui(Kt(r),0,e).join(""):r.slice(0,e)}function Ri(e){return function(t,n,i){return i&&"number"!=typeof i&&sa(t,n,i)&&(n=i=void 0),t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n,i){for(var a=-1,o=on(Xt((t-e)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=e,e+=n;return s}(t,n,i=void 0===i?t<n?1:-1:ns(i),e)}}function Pi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=as(t),n=as(n)),e(t,n)}}function Ti(e,t,n,r,i,a,o,s,c,u){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?a:void 0,l?o:void 0,l?void 0:a,l?void 0:o,s,c,u],p=n.apply(void 0,f);return ua(e)&&ga(p,f),p.placeholder=r,wa(p,e,t)}function ji(e){var t=he[e];return function(e,n){if(e=as(e),(n=null==n?0:sn(rs(n),292))&&nn(e)){var r=(ss(e)+"e").split("e");return+((r=(ss(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Fi=vn&&1/zt(new vn([,-0]))[1]==1/0?function(e){return new vn(e)}:Zs;function Ni(e){return function(t){var n=na(t);return n==v?Ut(t):n==b?Vt(t):function(e,t){return dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Li(e,t,n,i,s,c,u,l){var f=2&t;if(!f&&"function"!=typeof e)throw new ge(a);var p=i?i.length:0;if(p||(t&=-97,i=s=void 0),u=void 0===u?u:on(rs(u),0),l=void 0===l?l:rs(l),p-=s?s.length:0,64&t){var d=i,h=s;i=s=void 0}var v=f?void 0:qi(e),m=[e,t,n,i,s,d,h,c,u,l];if(v&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,s=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?vi(u,c,t[4]):c,e[4]=u?Ht(e[3],o):t[4]}(c=t[5])&&(u=e[5],e[5]=u?mi(u,c,t[6]):c,e[6]=u?Ht(e[5],o):t[6]);(c=t[7])&&(e[7]=c);128&r&&(e[8]=null==e[8]?t[8]:sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(m,v),e=m[0],t=m[1],n=m[2],i=m[3],s=m[4],!(l=m[9]=void 0===m[9]?f?0:e.length:on(m[9]-p,0))&&24&t&&(t&=-25),t&&1!=t)y=8==t||16==t?function(e,t,n){var i=_i(e);return function a(){for(var o=arguments.length,s=r(o),c=o,u=Gi(a);c--;)s[c]=arguments[c];var l=o<3&&s[0]!==u&&s[o-1]!==u?[]:Ht(s,u);if((o-=l.length)<n)return Ti(e,t,Ai,a.placeholder,void 0,s,l,void 0,void 0,n-o);var f=this&&this!==qe&&this instanceof a?i:e;return at(f,this,s)}}(e,t,l):32!=t&&33!=t||s.length?Ai.apply(void 0,m):function(e,t,n,i){var a=1&t,o=_i(e);return function t(){for(var s=-1,c=arguments.length,u=-1,l=i.length,f=r(l+c),p=this&&this!==qe&&this instanceof t?o:e;++u<l;)f[u]=i[u];for(;c--;)f[u++]=arguments[++s];return at(p,a?n:this,f)}}(e,t,n,i);else var y=function(e,t,n){var r=1&t,i=_i(e);return function t(){var a=this&&this!==qe&&this instanceof t?i:e;return a.apply(r?n:this,arguments)}}(e,t,n);return wa((v?Hr:ga)(y,m),e,t)}function Ui(e,t,n,r){return void 0===e||Oo(e,we[n])&&!$e.call(r,n)?t:e}function Bi(e,t,n,r,i,a){return zo(e)&&zo(t)&&(a.set(t,e),Ir(e,t,void 0,Bi,a),a.delete(t)),e}function Hi(e){return qo(e)?void 0:e}function zi(e,t,n,r,i,a){var o=1&n,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var l=-1,f=!0,p=2&n?new jn:void 0;for(a.set(e,t),a.set(t,e);++l<s;){var d=e[l],h=t[l];if(r)var v=o?r(h,d,l,t,e,a):r(d,h,l,e,t,a);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!yt(t,(function(e,t){if(!Dt(p,t)&&(d===e||i(d,e,n,r,a)))return p.push(t)}))){f=!1;break}}else if(d!==h&&!i(d,h,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function Vi(e){return ka(ha(e,void 0,Ra),e+"")}function Wi(e){return pr(e,ks,ea)}function Ki(e){return pr(e,ws,ta)}var qi=gn?function(e){return gn.get(e)}:Zs;function Ji(e){for(var t=e.name+"",n=bn[t],r=$e.call(bn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function Gi(e){return($e.call(An,"placeholder")?An:e).placeholder}function Yi(){var e=An.iteratee||qs;return e=e===qs?Sr:e,arguments.length?e(arguments[0],arguments[1]):e}function Zi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Xi(e){for(var t=ks(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,pa(i)]}return t}function Qi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return xr(n)?n:void 0}var ea=en?function(e){return null==e?[]:(e=ve(e),lt(en(e),(function(t){return Je.call(e,t)})))}:ic,ta=en?function(e){for(var t=[];e;)ht(t,ea(e)),e=We(e);return t}:ic,na=dr;function ra(e,t,n){for(var r=-1,i=(t=si(t,e)).length,a=!1;++r<i;){var o=_a(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Ho(i)&&oa(o,i)&&(Ro(e)||Do(e))}function ia(e){return"function"!=typeof e.constructor||fa(e)?{}:On(We(e))}function aa(e){return Ro(e)||Do(e)||!!(Ze&&e&&e[Ze])}function oa(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ce.test(e))&&e>-1&&e%1==0&&e<t}function sa(e,t,n){if(!zo(n))return!1;var r=typeof t;return!!("number"==r?To(n)&&oa(t,n.length):"string"==r&&t in n)&&Oo(n[t],e)}function ca(e,t){if(Ro(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Zo(e))||(V.test(e)||!z.test(e)||null!=t&&e in ve(t))}function ua(e){var t=Ji(e),n=An[t];if("function"!=typeof n||!(t in Dn.prototype))return!1;if(e===n)return!0;var r=qi(n);return!!r&&e===r[0]}(pn&&na(new pn(new ArrayBuffer(1)))!=$||dn&&na(new dn)!=v||hn&&"[object Promise]"!=na(hn.resolve())||vn&&na(new vn)!=b||mn&&na(new mn)!=x)&&(na=function(e){var t=dr(e),n=t==y?e.constructor:void 0,r=n?Ma(n):"";if(r)switch(r){case kn:return $;case wn:return v;case xn:return"[object Promise]";case Sn:return b;case $n:return x}return t});var la=xe?Uo:ac;function fa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||we)}function pa(e){return e==e&&!zo(e)}function da(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in ve(n)))}}function ha(e,t,n){return t=on(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=on(i.length-t,0),s=r(o);++a<o;)s[a]=i[t+a];a=-1;for(var c=r(t+1);++a<t;)c[a]=i[a];return c[t]=n(s),at(e,this,c)}}function va(e,t){return t.length<2?e:fr(e,Wr(t,0,-1))}function ma(e,t){for(var n=e.length,r=sn(t.length,n),i=yi(e);r--;){var a=t[r];e[r]=oa(a,n)?i[a]:void 0}return e}function ya(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ga=xa(Hr),ba=Zt||function(e,t){return qe.setTimeout(e,t)},ka=xa(zr);function wa(e,t,n){var r=t+"";return ka(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Z,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return st(s,(function(n){var r="_."+n[0];t&n[1]&&!ft(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(X);return t?t[1].split(Q):[]}(r),n)))}function xa(e){var t=0,n=0;return function(){var r=cn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Sa(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var a=jr(n,i),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}var $a=function(e){var t=So(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(W,(function(e,n,r,i){t.push(r?i.replace(te,"$1"):n||e)})),t}));function _a(e){if("string"==typeof e||Zo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ma(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ca(e){if(e instanceof Dn)return e.clone();var t=new En(e.__wrapped__,e.__chain__);return t.__actions__=yi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Aa=Nr((function(e,t){return jo(e)?Qn(e,ar(t,1,jo,!0)):[]})),Oa=Nr((function(e,t){var n=Na(t);return jo(n)&&(n=void 0),jo(e)?Qn(e,ar(t,1,jo,!0),Yi(n,2)):[]})),Ia=Nr((function(e,t){var n=Na(t);return jo(n)&&(n=void 0),jo(e)?Qn(e,ar(t,1,jo,!0),void 0,n):[]}));function Ea(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:rs(n);return i<0&&(i=on(r+i,0)),kt(e,Yi(t,3),i)}function Da(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=rs(n),i=n<0?on(r+i,0):sn(i,r-1)),kt(e,Yi(t,3),i,!0)}function Ra(e){return(null==e?0:e.length)?ar(e,1):[]}function Pa(e){return e&&e.length?e[0]:void 0}var Ta=Nr((function(e){var t=dt(e,ai);return t.length&&t[0]===e[0]?yr(t):[]})),ja=Nr((function(e){var t=Na(e),n=dt(e,ai);return t===Na(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?yr(n,Yi(t,2)):[]})),Fa=Nr((function(e){var t=Na(e),n=dt(e,ai);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?yr(n,void 0,t):[]}));function Na(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var La=Nr(Ua);function Ua(e,t){return e&&e.length&&t&&t.length?Pr(e,t):e}var Ba=Vi((function(e,t){var n=null==e?0:e.length,r=Jn(e,t);return Tr(e,dt(t,(function(e){return oa(e,n)?+e:e})).sort(hi)),r}));function Ha(e){return null==e?e:fn.call(e)}var za=Nr((function(e){return Xr(ar(e,1,jo,!0))})),Va=Nr((function(e){var t=Na(e);return jo(t)&&(t=void 0),Xr(ar(e,1,jo,!0),Yi(t,2))})),Wa=Nr((function(e){var t=Na(e);return t="function"==typeof t?t:void 0,Xr(ar(e,1,jo,!0),void 0,t)}));function Ka(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(jo(e))return t=on(e.length,t),!0})),Ot(t,(function(t){return dt(e,_t(t))}))}function qa(e,t){if(!e||!e.length)return[];var n=Ka(e);return null==t?n:dt(n,(function(e){return at(t,void 0,e)}))}var Ja=Nr((function(e,t){return jo(e)?Qn(e,t):[]})),Ga=Nr((function(e){return ri(lt(e,jo))})),Ya=Nr((function(e){var t=Na(e);return jo(t)&&(t=void 0),ri(lt(e,jo),Yi(t,2))})),Za=Nr((function(e){var t=Na(e);return t="function"==typeof t?t:void 0,ri(lt(e,jo),void 0,t)})),Xa=Nr(Ka);var Qa=Nr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,qa(e,n)}));function eo(e){var t=An(e);return t.__chain__=!0,t}function to(e,t){return t(e)}var no=Vi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Jn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Dn&&oa(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:to,args:[i],thisArg:void 0}),new En(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var ro=bi((function(e,t,n){$e.call(e,n)?++e[n]:qn(e,n,1)}));var io=Mi(Ea),ao=Mi(Da);function oo(e,t){return(Ro(e)?st:er)(e,Yi(t,3))}function so(e,t){return(Ro(e)?ct:tr)(e,Yi(t,3))}var co=bi((function(e,t,n){$e.call(e,n)?e[n].push(t):qn(e,n,[t])}));var uo=Nr((function(e,t,n){var i=-1,a="function"==typeof t,o=To(e)?r(e.length):[];return er(e,(function(e){o[++i]=a?at(t,e,n):gr(e,t,n)})),o})),lo=bi((function(e,t,n){qn(e,n,t)}));function fo(e,t){return(Ro(e)?dt:Cr)(e,Yi(t,3))}var po=bi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var ho=Nr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&sa(e,t[0],t[1])?t=[]:n>2&&sa(t[0],t[1],t[2])&&(t=[t[0]]),Dr(e,ar(t,1),[])})),vo=Yt||function(){return qe.Date.now()};function mo(e,t,n){return t=n?void 0:t,Li(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function yo(e,t){var n;if("function"!=typeof t)throw new ge(a);return e=rs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var go=Nr((function(e,t,n){var r=1;if(n.length){var i=Ht(n,Gi(go));r|=32}return Li(e,r,t,n,i)})),bo=Nr((function(e,t,n){var r=3;if(n.length){var i=Ht(n,Gi(bo));r|=32}return Li(t,r,e,n,i)}));function ko(e,t,n){var r,i,o,s,c,u,l=0,f=!1,p=!1,d=!0;if("function"!=typeof e)throw new ge(a);function h(t){var n=r,a=i;return r=i=void 0,l=t,s=e.apply(a,n)}function v(e){return l=e,c=ba(y,t),f?h(e):s}function m(e){var n=e-u;return void 0===u||n>=t||n<0||p&&e-l>=o}function y(){var e=vo();if(m(e))return g(e);c=ba(y,function(e){var n=t-(e-u);return p?sn(n,o-(e-l)):n}(e))}function g(e){return c=void 0,d&&r?h(e):(r=i=void 0,s)}function b(){var e=vo(),n=m(e);if(r=arguments,i=this,u=e,n){if(void 0===c)return v(u);if(p)return li(c),c=ba(y,t),h(u)}return void 0===c&&(c=ba(y,t)),s}return t=as(t)||0,zo(n)&&(f=!!n.leading,o=(p="maxWait"in n)?on(as(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==c&&li(c),l=0,r=u=i=c=void 0},b.flush=function(){return void 0===c?s:g(vo())},b}var wo=Nr((function(e,t){return Xn(e,1,t)})),xo=Nr((function(e,t,n){return Xn(e,as(t)||0,n)}));function So(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ge(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(So.Cache||Tn),n}function $o(e){if("function"!=typeof e)throw new ge(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}So.Cache=Tn;var _o=ci((function(e,t){var n=(t=1==t.length&&Ro(t[0])?dt(t[0],It(Yi())):dt(ar(t,1),It(Yi()))).length;return Nr((function(r){for(var i=-1,a=sn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return at(e,this,r)}))})),Mo=Nr((function(e,t){return Li(e,32,void 0,t,Ht(t,Gi(Mo)))})),Co=Nr((function(e,t){return Li(e,64,void 0,t,Ht(t,Gi(Co)))})),Ao=Vi((function(e,t){return Li(e,256,void 0,void 0,void 0,t)}));function Oo(e,t){return e===t||e!=e&&t!=t}var Io=Pi(hr),Eo=Pi((function(e,t){return e>=t})),Do=br(function(){return arguments}())?br:function(e){return Vo(e)&&$e.call(e,"callee")&&!Je.call(e,"callee")},Ro=r.isArray,Po=Qe?It(Qe):function(e){return Vo(e)&&dr(e)==S};function To(e){return null!=e&&Ho(e.length)&&!Uo(e)}function jo(e){return Vo(e)&&To(e)}var Fo=tn||ac,No=et?It(et):function(e){return Vo(e)&&dr(e)==f};function Lo(e){if(!Vo(e))return!1;var t=dr(e);return t==p||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!qo(e)}function Uo(e){if(!zo(e))return!1;var t=dr(e);return t==d||t==h||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Bo(e){return"number"==typeof e&&e==rs(e)}function Ho(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function zo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Vo(e){return null!=e&&"object"==typeof e}var Wo=tt?It(tt):function(e){return Vo(e)&&na(e)==v};function Ko(e){return"number"==typeof e||Vo(e)&&dr(e)==m}function qo(e){if(!Vo(e)||dr(e)!=y)return!1;var t=We(e);if(null===t)return!0;var n=$e.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Se.call(n)==Ae}var Jo=nt?It(nt):function(e){return Vo(e)&&dr(e)==g};var Go=rt?It(rt):function(e){return Vo(e)&&na(e)==b};function Yo(e){return"string"==typeof e||!Ro(e)&&Vo(e)&&dr(e)==k}function Zo(e){return"symbol"==typeof e||Vo(e)&&dr(e)==w}var Xo=it?It(it):function(e){return Vo(e)&&Ho(e.length)&&!!Ue[dr(e)]};var Qo=Pi(Mr),es=Pi((function(e,t){return e<=t}));function ts(e){if(!e)return[];if(To(e))return Yo(e)?Kt(e):yi(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=na(e);return(t==v?Ut:t==b?zt:Os)(e)}function ns(e){return e?(e=as(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function rs(e){var t=ns(e),n=t%1;return t==t?n?t-n:t:0}function is(e){return e?Gn(rs(e),0,4294967295):0}function as(e){if("number"==typeof e)return e;if(Zo(e))return NaN;if(zo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=zo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(J,"");var n=ae.test(e);return n||se.test(e)?Ve(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function os(e){return gi(e,ws(e))}function ss(e){return null==e?"":Zr(e)}var cs=ki((function(e,t){if(fa(t)||To(t))gi(t,ks(t),e);else for(var n in t)$e.call(t,n)&&zn(e,n,t[n])})),us=ki((function(e,t){gi(t,ws(t),e)})),ls=ki((function(e,t,n,r){gi(t,ws(t),e,r)})),fs=ki((function(e,t,n,r){gi(t,ks(t),e,r)})),ps=Vi(Jn);var ds=Nr((function(e,t){e=ve(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&sa(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],o=ws(a),s=-1,c=o.length;++s<c;){var u=o[s],l=e[u];(void 0===l||Oo(l,we[u])&&!$e.call(e,u))&&(e[u]=a[u])}return e})),hs=Nr((function(e){return e.push(void 0,Bi),at(Ss,void 0,e)}));function vs(e,t,n){var r=null==e?void 0:fr(e,t);return void 0===r?n:r}function ms(e,t){return null!=e&&ra(e,t,mr)}var ys=Oi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),e[t]=n}),zs(Ks)),gs=Oi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ce.call(t)),$e.call(e,t)?e[t].push(n):e[t]=[n]}),Yi),bs=Nr(gr);function ks(e){return To(e)?Nn(e):$r(e)}function ws(e){return To(e)?Nn(e,!0):_r(e)}var xs=ki((function(e,t,n){Ir(e,t,n)})),Ss=ki((function(e,t,n,r){Ir(e,t,n,r)})),$s=Vi((function(e,t){var n={};if(null==e)return n;var r=!1;t=dt(t,(function(t){return t=si(t,e),r||(r=t.length>1),t})),gi(e,Ki(e),n),r&&(n=Yn(n,7,Hi));for(var i=t.length;i--;)Qr(n,t[i]);return n}));var _s=Vi((function(e,t){return null==e?{}:function(e,t){return Rr(e,t,(function(t,n){return ms(e,n)}))}(e,t)}));function Ms(e,t){if(null==e)return{};var n=dt(Ki(e),(function(e){return[e]}));return t=Yi(t),Rr(e,n,(function(e,n){return t(e,n[0])}))}var Cs=Ni(ks),As=Ni(ws);function Os(e){return null==e?[]:Et(e,ks(e))}var Is=$i((function(e,t,n){return t=t.toLowerCase(),e+(n?Es(t):t)}));function Es(e){return Ls(ss(e).toLowerCase())}function Ds(e){return(e=ss(e))&&e.replace(ue,jt).replace(Re,"")}var Rs=$i((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ps=$i((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ts=Si("toLowerCase");var js=$i((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Fs=$i((function(e,t,n){return e+(n?" ":"")+Ls(t)}));var Ns=$i((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ls=Si("toUpperCase");function Us(e,t,n){return e=ss(e),void 0===(t=n?void 0:t)?function(e){return Fe.test(e)}(e)?function(e){return e.match(Te)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var Bs=Nr((function(e,t){try{return at(e,void 0,t)}catch(e){return Lo(e)?e:new pe(e)}})),Hs=Vi((function(e,t){return st(t,(function(t){t=_a(t),qn(e,t,go(e[t],e))})),e}));function zs(e){return function(){return e}}var Vs=Ci(),Ws=Ci(!0);function Ks(e){return e}function qs(e){return Sr("function"==typeof e?e:Yn(e,1))}var Js=Nr((function(e,t){return function(n){return gr(n,e,t)}})),Gs=Nr((function(e,t){return function(n){return gr(e,n,t)}}));function Ys(e,t,n){var r=ks(t),i=lr(t,r);null!=n||zo(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=lr(t,ks(t)));var a=!(zo(n)&&"chain"in n&&!n.chain),o=Uo(e);return st(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=yi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,ht([this.value()],arguments))})})),e}function Zs(){}var Xs=Ei(dt),Qs=Ei(ut),ec=Ei(yt);function tc(e){return ca(e)?_t(_a(e)):function(e){return function(t){return fr(t,e)}}(e)}var nc=Ri(),rc=Ri(!0);function ic(){return[]}function ac(){return!1}var oc=Ii((function(e,t){return e+t}),0),sc=ji("ceil"),cc=Ii((function(e,t){return e/t}),1),uc=ji("floor");var lc,fc=Ii((function(e,t){return e*t}),1),pc=ji("round"),dc=Ii((function(e,t){return e-t}),0);return An.after=function(e,t){if("function"!=typeof t)throw new ge(a);return e=rs(e),function(){if(--e<1)return t.apply(this,arguments)}},An.ary=mo,An.assign=cs,An.assignIn=us,An.assignInWith=ls,An.assignWith=fs,An.at=ps,An.before=yo,An.bind=go,An.bindAll=Hs,An.bindKey=bo,An.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ro(e)?e:[e]},An.chain=eo,An.chunk=function(e,t,n){t=(n?sa(e,t,n):void 0===t)?1:on(rs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,o=0,s=r(Xt(i/t));a<i;)s[o++]=Wr(e,a,a+=t);return s},An.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},An.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return ht(Ro(n)?yi(n):[n],ar(t,1))},An.cond=function(e){var t=null==e?0:e.length,n=Yi();return e=t?dt(e,(function(e){if("function"!=typeof e[1])throw new ge(a);return[n(e[0]),e[1]]})):[],Nr((function(n){for(var r=-1;++r<t;){var i=e[r];if(at(i[0],this,n))return at(i[1],this,n)}}))},An.conforms=function(e){return function(e){var t=ks(e);return function(n){return Zn(n,e,t)}}(Yn(e,1))},An.constant=zs,An.countBy=ro,An.create=function(e,t){var n=On(e);return null==t?n:Kn(n,t)},An.curry=function e(t,n,r){var i=Li(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},An.curryRight=function e(t,n,r){var i=Li(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},An.debounce=ko,An.defaults=ds,An.defaultsDeep=hs,An.defer=wo,An.delay=xo,An.difference=Aa,An.differenceBy=Oa,An.differenceWith=Ia,An.drop=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,(t=n||void 0===t?1:rs(t))<0?0:t,r):[]},An.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,0,(t=r-(t=n||void 0===t?1:rs(t)))<0?0:t):[]},An.dropRightWhile=function(e,t){return e&&e.length?ti(e,Yi(t,3),!0,!0):[]},An.dropWhile=function(e,t){return e&&e.length?ti(e,Yi(t,3),!0):[]},An.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&sa(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=rs(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:rs(r))<0&&(r+=i),r=n>r?0:is(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},An.filter=function(e,t){return(Ro(e)?lt:ir)(e,Yi(t,3))},An.flatMap=function(e,t){return ar(fo(e,t),1)},An.flatMapDeep=function(e,t){return ar(fo(e,t),1/0)},An.flatMapDepth=function(e,t,n){return n=void 0===n?1:rs(n),ar(fo(e,t),n)},An.flatten=Ra,An.flattenDeep=function(e){return(null==e?0:e.length)?ar(e,1/0):[]},An.flattenDepth=function(e,t){return(null==e?0:e.length)?ar(e,t=void 0===t?1:rs(t)):[]},An.flip=function(e){return Li(e,512)},An.flow=Vs,An.flowRight=Ws,An.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},An.functions=function(e){return null==e?[]:lr(e,ks(e))},An.functionsIn=function(e){return null==e?[]:lr(e,ws(e))},An.groupBy=co,An.initial=function(e){return(null==e?0:e.length)?Wr(e,0,-1):[]},An.intersection=Ta,An.intersectionBy=ja,An.intersectionWith=Fa,An.invert=ys,An.invertBy=gs,An.invokeMap=uo,An.iteratee=qs,An.keyBy=lo,An.keys=ks,An.keysIn=ws,An.map=fo,An.mapKeys=function(e,t){var n={};return t=Yi(t,3),cr(e,(function(e,r,i){qn(n,t(e,r,i),e)})),n},An.mapValues=function(e,t){var n={};return t=Yi(t,3),cr(e,(function(e,r,i){qn(n,r,t(e,r,i))})),n},An.matches=function(e){return Ar(Yn(e,1))},An.matchesProperty=function(e,t){return Or(e,Yn(t,1))},An.memoize=So,An.merge=xs,An.mergeWith=Ss,An.method=Js,An.methodOf=Gs,An.mixin=Ys,An.negate=$o,An.nthArg=function(e){return e=rs(e),Nr((function(t){return Er(t,e)}))},An.omit=$s,An.omitBy=function(e,t){return Ms(e,$o(Yi(t)))},An.once=function(e){return yo(2,e)},An.orderBy=function(e,t,n,r){return null==e?[]:(Ro(t)||(t=null==t?[]:[t]),Ro(n=r?void 0:n)||(n=null==n?[]:[n]),Dr(e,t,n))},An.over=Xs,An.overArgs=_o,An.overEvery=Qs,An.overSome=ec,An.partial=Mo,An.partialRight=Co,An.partition=po,An.pick=_s,An.pickBy=Ms,An.property=tc,An.propertyOf=function(e){return function(t){return null==e?void 0:fr(e,t)}},An.pull=La,An.pullAll=Ua,An.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Pr(e,t,Yi(n,2)):e},An.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Pr(e,t,void 0,n):e},An.pullAt=Ba,An.range=nc,An.rangeRight=rc,An.rearg=Ao,An.reject=function(e,t){return(Ro(e)?lt:ir)(e,$o(Yi(t,3)))},An.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=Yi(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Tr(e,i),n},An.rest=function(e,t){if("function"!=typeof e)throw new ge(a);return Nr(e,t=void 0===t?t:rs(t))},An.reverse=Ha,An.sampleSize=function(e,t,n){return t=(n?sa(e,t,n):void 0===t)?1:rs(t),(Ro(e)?Un:Ur)(e,t)},An.set=function(e,t,n){return null==e?e:Br(e,t,n)},An.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Br(e,t,n,r)},An.shuffle=function(e){return(Ro(e)?Bn:Vr)(e)},An.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&sa(e,t,n)?(t=0,n=r):(t=null==t?0:rs(t),n=void 0===n?r:rs(n)),Wr(e,t,n)):[]},An.sortBy=ho,An.sortedUniq=function(e){return e&&e.length?Gr(e):[]},An.sortedUniqBy=function(e,t){return e&&e.length?Gr(e,Yi(t,2)):[]},An.split=function(e,t,n){return n&&"number"!=typeof n&&sa(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ss(e))&&("string"==typeof t||null!=t&&!Jo(t))&&!(t=Zr(t))&&Lt(e)?ui(Kt(e),0,n):e.split(t,n):[]},An.spread=function(e,t){if("function"!=typeof e)throw new ge(a);return t=null==t?0:on(rs(t),0),Nr((function(n){var r=n[t],i=ui(n,0,t);return r&&ht(i,r),at(e,this,i)}))},An.tail=function(e){var t=null==e?0:e.length;return t?Wr(e,1,t):[]},An.take=function(e,t,n){return e&&e.length?Wr(e,0,(t=n||void 0===t?1:rs(t))<0?0:t):[]},An.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,(t=r-(t=n||void 0===t?1:rs(t)))<0?0:t,r):[]},An.takeRightWhile=function(e,t){return e&&e.length?ti(e,Yi(t,3),!1,!0):[]},An.takeWhile=function(e,t){return e&&e.length?ti(e,Yi(t,3)):[]},An.tap=function(e,t){return t(e),e},An.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ge(a);return zo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ko(e,t,{leading:r,maxWait:t,trailing:i})},An.thru=to,An.toArray=ts,An.toPairs=Cs,An.toPairsIn=As,An.toPath=function(e){return Ro(e)?dt(e,_a):Zo(e)?[e]:yi($a(ss(e)))},An.toPlainObject=os,An.transform=function(e,t,n){var r=Ro(e),i=r||Fo(e)||Xo(e);if(t=Yi(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:zo(e)&&Uo(a)?On(We(e)):{}}return(i?st:cr)(e,(function(e,r,i){return t(n,e,r,i)})),n},An.unary=function(e){return mo(e,1)},An.union=za,An.unionBy=Va,An.unionWith=Wa,An.uniq=function(e){return e&&e.length?Xr(e):[]},An.uniqBy=function(e,t){return e&&e.length?Xr(e,Yi(t,2)):[]},An.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Xr(e,void 0,t):[]},An.unset=function(e,t){return null==e||Qr(e,t)},An.unzip=Ka,An.unzipWith=qa,An.update=function(e,t,n){return null==e?e:ei(e,t,oi(n))},An.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ei(e,t,oi(n),r)},An.values=Os,An.valuesIn=function(e){return null==e?[]:Et(e,ws(e))},An.without=Ja,An.words=Us,An.wrap=function(e,t){return Mo(oi(t),e)},An.xor=Ga,An.xorBy=Ya,An.xorWith=Za,An.zip=Xa,An.zipObject=function(e,t){return ii(e||[],t||[],zn)},An.zipObjectDeep=function(e,t){return ii(e||[],t||[],Br)},An.zipWith=Qa,An.entries=Cs,An.entriesIn=As,An.extend=us,An.extendWith=ls,Ys(An,An),An.add=oc,An.attempt=Bs,An.camelCase=Is,An.capitalize=Es,An.ceil=sc,An.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=as(n))==n?n:0),void 0!==t&&(t=(t=as(t))==t?t:0),Gn(as(e),t,n)},An.clone=function(e){return Yn(e,4)},An.cloneDeep=function(e){return Yn(e,5)},An.cloneDeepWith=function(e,t){return Yn(e,5,t="function"==typeof t?t:void 0)},An.cloneWith=function(e,t){return Yn(e,4,t="function"==typeof t?t:void 0)},An.conformsTo=function(e,t){return null==t||Zn(e,t,ks(t))},An.deburr=Ds,An.defaultTo=function(e,t){return null==e||e!=e?t:e},An.divide=cc,An.endsWith=function(e,t,n){e=ss(e),t=Zr(t);var r=e.length,i=n=void 0===n?r:Gn(rs(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},An.eq=Oo,An.escape=function(e){return(e=ss(e))&&L.test(e)?e.replace(F,Ft):e},An.escapeRegExp=function(e){return(e=ss(e))&&q.test(e)?e.replace(K,"\\$&"):e},An.every=function(e,t,n){var r=Ro(e)?ut:nr;return n&&sa(e,t,n)&&(t=void 0),r(e,Yi(t,3))},An.find=io,An.findIndex=Ea,An.findKey=function(e,t){return bt(e,Yi(t,3),cr)},An.findLast=ao,An.findLastIndex=Da,An.findLastKey=function(e,t){return bt(e,Yi(t,3),ur)},An.floor=uc,An.forEach=oo,An.forEachRight=so,An.forIn=function(e,t){return null==e?e:or(e,Yi(t,3),ws)},An.forInRight=function(e,t){return null==e?e:sr(e,Yi(t,3),ws)},An.forOwn=function(e,t){return e&&cr(e,Yi(t,3))},An.forOwnRight=function(e,t){return e&&ur(e,Yi(t,3))},An.get=vs,An.gt=Io,An.gte=Eo,An.has=function(e,t){return null!=e&&ra(e,t,vr)},An.hasIn=ms,An.head=Pa,An.identity=Ks,An.includes=function(e,t,n,r){e=To(e)?e:Os(e),n=n&&!r?rs(n):0;var i=e.length;return n<0&&(n=on(i+n,0)),Yo(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&wt(e,t,n)>-1},An.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:rs(n);return i<0&&(i=on(r+i,0)),wt(e,t,i)},An.inRange=function(e,t,n){return t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n){return e>=sn(t,n)&&e<on(t,n)}(e=as(e),t,n)},An.invoke=bs,An.isArguments=Do,An.isArray=Ro,An.isArrayBuffer=Po,An.isArrayLike=To,An.isArrayLikeObject=jo,An.isBoolean=function(e){return!0===e||!1===e||Vo(e)&&dr(e)==l},An.isBuffer=Fo,An.isDate=No,An.isElement=function(e){return Vo(e)&&1===e.nodeType&&!qo(e)},An.isEmpty=function(e){if(null==e)return!0;if(To(e)&&(Ro(e)||"string"==typeof e||"function"==typeof e.splice||Fo(e)||Xo(e)||Do(e)))return!e.length;var t=na(e);if(t==v||t==b)return!e.size;if(fa(e))return!$r(e).length;for(var n in e)if($e.call(e,n))return!1;return!0},An.isEqual=function(e,t){return kr(e,t)},An.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?kr(e,t,void 0,n):!!r},An.isError=Lo,An.isFinite=function(e){return"number"==typeof e&&nn(e)},An.isFunction=Uo,An.isInteger=Bo,An.isLength=Ho,An.isMap=Wo,An.isMatch=function(e,t){return e===t||wr(e,t,Xi(t))},An.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,wr(e,t,Xi(t),n)},An.isNaN=function(e){return Ko(e)&&e!=+e},An.isNative=function(e){if(la(e))throw new pe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(e)},An.isNil=function(e){return null==e},An.isNull=function(e){return null===e},An.isNumber=Ko,An.isObject=zo,An.isObjectLike=Vo,An.isPlainObject=qo,An.isRegExp=Jo,An.isSafeInteger=function(e){return Bo(e)&&e>=-9007199254740991&&e<=9007199254740991},An.isSet=Go,An.isString=Yo,An.isSymbol=Zo,An.isTypedArray=Xo,An.isUndefined=function(e){return void 0===e},An.isWeakMap=function(e){return Vo(e)&&na(e)==x},An.isWeakSet=function(e){return Vo(e)&&"[object WeakSet]"==dr(e)},An.join=function(e,t){return null==e?"":rn.call(e,t)},An.kebabCase=Rs,An.last=Na,An.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=rs(n))<0?on(r+i,0):sn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):kt(e,St,i,!0)},An.lowerCase=Ps,An.lowerFirst=Ts,An.lt=Qo,An.lte=es,An.max=function(e){return e&&e.length?rr(e,Ks,hr):void 0},An.maxBy=function(e,t){return e&&e.length?rr(e,Yi(t,2),hr):void 0},An.mean=function(e){return $t(e,Ks)},An.meanBy=function(e,t){return $t(e,Yi(t,2))},An.min=function(e){return e&&e.length?rr(e,Ks,Mr):void 0},An.minBy=function(e,t){return e&&e.length?rr(e,Yi(t,2),Mr):void 0},An.stubArray=ic,An.stubFalse=ac,An.stubObject=function(){return{}},An.stubString=function(){return""},An.stubTrue=function(){return!0},An.multiply=fc,An.nth=function(e,t){return e&&e.length?Er(e,rs(t)):void 0},An.noConflict=function(){return qe._===this&&(qe._=Oe),this},An.noop=Zs,An.now=vo,An.pad=function(e,t,n){e=ss(e);var r=(t=rs(t))?Wt(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Di(Qt(i),n)+e+Di(Xt(i),n)},An.padEnd=function(e,t,n){e=ss(e);var r=(t=rs(t))?Wt(e):0;return t&&r<t?e+Di(t-r,n):e},An.padStart=function(e,t,n){e=ss(e);var r=(t=rs(t))?Wt(e):0;return t&&r<t?Di(t-r,n)+e:e},An.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),un(ss(e).replace(G,""),t||0)},An.random=function(e,t,n){if(n&&"boolean"!=typeof n&&sa(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ns(e),void 0===t?(t=e,e=0):t=ns(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=ln();return sn(e+i*(t-e+ze("1e-"+((i+"").length-1))),t)}return jr(e,t)},An.reduce=function(e,t,n){var r=Ro(e)?vt:Ct,i=arguments.length<3;return r(e,Yi(t,4),n,i,er)},An.reduceRight=function(e,t,n){var r=Ro(e)?mt:Ct,i=arguments.length<3;return r(e,Yi(t,4),n,i,tr)},An.repeat=function(e,t,n){return t=(n?sa(e,t,n):void 0===t)?1:rs(t),Fr(ss(e),t)},An.replace=function(){var e=arguments,t=ss(e[0]);return e.length<3?t:t.replace(e[1],e[2])},An.result=function(e,t,n){var r=-1,i=(t=si(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var a=null==e?void 0:e[_a(t[r])];void 0===a&&(r=i,a=n),e=Uo(a)?a.call(e):a}return e},An.round=pc,An.runInContext=e,An.sample=function(e){return(Ro(e)?Ln:Lr)(e)},An.size=function(e){if(null==e)return 0;if(To(e))return Yo(e)?Wt(e):e.length;var t=na(e);return t==v||t==b?e.size:$r(e).length},An.snakeCase=js,An.some=function(e,t,n){var r=Ro(e)?yt:Kr;return n&&sa(e,t,n)&&(t=void 0),r(e,Yi(t,3))},An.sortedIndex=function(e,t){return qr(e,t)},An.sortedIndexBy=function(e,t,n){return Jr(e,t,Yi(n,2))},An.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=qr(e,t);if(r<n&&Oo(e[r],t))return r}return-1},An.sortedLastIndex=function(e,t){return qr(e,t,!0)},An.sortedLastIndexBy=function(e,t,n){return Jr(e,t,Yi(n,2),!0)},An.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=qr(e,t,!0)-1;if(Oo(e[n],t))return n}return-1},An.startCase=Fs,An.startsWith=function(e,t,n){return e=ss(e),n=null==n?0:Gn(rs(n),0,e.length),t=Zr(t),e.slice(n,n+t.length)==t},An.subtract=dc,An.sum=function(e){return e&&e.length?At(e,Ks):0},An.sumBy=function(e,t){return e&&e.length?At(e,Yi(t,2)):0},An.template=function(e,t,n){var r=An.templateSettings;n&&sa(e,t,n)&&(t=void 0),e=ss(e),t=ls({},t,r,Ui);var i,a,o=ls({},t.imports,r.imports,Ui),s=ks(o),c=Et(o,s),u=0,l=t.interpolate||le,f="__p += '",p=me((t.escape||le).source+"|"+l.source+"|"+(l===H?ne:le).source+"|"+(t.evaluate||le).source+"|$","g"),d="//# sourceURL="+($e.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Le+"]")+"\n";e.replace(p,(function(t,n,r,o,s,c){return r||(r=o),f+=e.slice(u,c).replace(fe,Nt),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),f+="';\n";var h=$e.call(t,"variable")&&t.variable;h||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(R,""):f).replace(P,"$1").replace(T,"$1;"),f="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Bs((function(){return de(s,d+"return "+f).apply(void 0,c)}));if(v.source=f,Lo(v))throw v;return v},An.times=function(e,t){if((e=rs(e))<1||e>9007199254740991)return[];var n=4294967295,r=sn(e,4294967295);e-=4294967295;for(var i=Ot(r,t=Yi(t));++n<e;)t(n);return i},An.toFinite=ns,An.toInteger=rs,An.toLength=is,An.toLower=function(e){return ss(e).toLowerCase()},An.toNumber=as,An.toSafeInteger=function(e){return e?Gn(rs(e),-9007199254740991,9007199254740991):0===e?e:0},An.toString=ss,An.toUpper=function(e){return ss(e).toUpperCase()},An.trim=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(J,"");if(!e||!(t=Zr(t)))return e;var r=Kt(e),i=Kt(t);return ui(r,Rt(r,i),Pt(r,i)+1).join("")},An.trimEnd=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Zr(t)))return e;var r=Kt(e);return ui(r,0,Pt(r,Kt(t))+1).join("")},An.trimStart=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(G,"");if(!e||!(t=Zr(t)))return e;var r=Kt(e);return ui(r,Rt(r,Kt(t))).join("")},An.truncate=function(e,t){var n=30,r="...";if(zo(t)){var i="separator"in t?t.separator:i;n="length"in t?rs(t.length):n,r="omission"in t?Zr(t.omission):r}var a=(e=ss(e)).length;if(Lt(e)){var o=Kt(e);a=o.length}if(n>=a)return e;var s=n-Wt(r);if(s<1)return r;var c=o?ui(o,0,s).join(""):e.slice(0,s);if(void 0===i)return c+r;if(o&&(s+=c.length-s),Jo(i)){if(e.slice(s).search(i)){var u,l=c;for(i.global||(i=me(i.source,ss(re.exec(i))+"g")),i.lastIndex=0;u=i.exec(l);)var f=u.index;c=c.slice(0,void 0===f?s:f)}}else if(e.indexOf(Zr(i),s)!=s){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r},An.unescape=function(e){return(e=ss(e))&&N.test(e)?e.replace(j,qt):e},An.uniqueId=function(e){var t=++_e;return ss(e)+t},An.upperCase=Ns,An.upperFirst=Ls,An.each=oo,An.eachRight=so,An.first=Pa,Ys(An,(lc={},cr(An,(function(e,t){$e.call(An.prototype,t)||(lc[t]=e)})),lc),{chain:!1}),An.VERSION="4.17.15",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){An[e].placeholder=An})),st(["drop","take"],(function(e,t){Dn.prototype[e]=function(n){n=void 0===n?1:on(rs(n),0);var r=this.__filtered__&&!t?new Dn(this):this.clone();return r.__filtered__?r.__takeCount__=sn(n,r.__takeCount__):r.__views__.push({size:sn(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Dn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Dn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),st(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Dn.prototype[e]=function(){return this[n](1).value()[0]}})),st(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Dn.prototype[e]=function(){return this.__filtered__?new Dn(this):this[n](1)}})),Dn.prototype.compact=function(){return this.filter(Ks)},Dn.prototype.find=function(e){return this.filter(e).head()},Dn.prototype.findLast=function(e){return this.reverse().find(e)},Dn.prototype.invokeMap=Nr((function(e,t){return"function"==typeof e?new Dn(this):this.map((function(n){return gr(n,e,t)}))})),Dn.prototype.reject=function(e){return this.filter($o(Yi(e)))},Dn.prototype.slice=function(e,t){e=rs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Dn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=rs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Dn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Dn.prototype.toArray=function(){return this.take(4294967295)},cr(Dn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=An[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(An.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,s=t instanceof Dn,c=o[0],u=s||Ro(t),l=function(e){var t=i.apply(An,ht([e],o));return r&&f?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(s=u=!1);var f=this.__chain__,p=!!this.__actions__.length,d=a&&!f,h=s&&!p;if(!a&&u){t=h?t:new Dn(this);var v=e.apply(t,o);return v.__actions__.push({func:to,args:[l],thisArg:void 0}),new En(v,f)}return d&&h?e.apply(this,o):(v=this.thru(l),d?r?v.value()[0]:v.value():v)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=be[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);An.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ro(i)?i:[],e)}return this[n]((function(n){return t.apply(Ro(n)?n:[],e)}))}})),cr(Dn.prototype,(function(e,t){var n=An[t];if(n){var r=n.name+"";$e.call(bn,r)||(bn[r]=[]),bn[r].push({name:t,func:n})}})),bn[Ai(void 0,2).name]=[{name:"wrapper",func:void 0}],Dn.prototype.clone=function(){var e=new Dn(this.__wrapped__);return e.__actions__=yi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=yi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=yi(this.__views__),e},Dn.prototype.reverse=function(){if(this.__filtered__){var e=new Dn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Dn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ro(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=sn(t,e+o);break;case"takeRight":e=on(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,c=s-o,u=r?s:o-1,l=this.__iteratees__,f=l.length,p=0,d=sn(c,this.__takeCount__);if(!n||!r&&i==c&&d==c)return ni(e,this.__actions__);var h=[];e:for(;c--&&p<d;){for(var v=-1,m=e[u+=t];++v<f;){var y=l[v],g=y.iteratee,b=y.type,k=g(m);if(2==b)m=k;else if(!k){if(1==b)continue e;break e}}h[p++]=m}return h},An.prototype.at=no,An.prototype.chain=function(){return eo(this)},An.prototype.commit=function(){return new En(this.value(),this.__chain__)},An.prototype.next=function(){void 0===this.__values__&&(this.__values__=ts(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},An.prototype.plant=function(e){for(var t,n=this;n instanceof In;){var r=Ca(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},An.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Dn){var t=e;return this.__actions__.length&&(t=new Dn(this)),(t=t.reverse()).__actions__.push({func:to,args:[Ha],thisArg:void 0}),new En(t,this.__chain__)}return this.thru(Ha)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,Xe&&(An.prototype[Xe]=function(){return this}),An}();qe._=Jt,void 0===(i=function(){return Jt}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(51),n(52)(e))},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return Array.isArray(e)?function(e,t){for(var n,r="",a="",o=Array.isArray(t),s=0;s<e.length;s++)(n=i(e[s]))&&(o&&t[s]&&(n=c(n)),r=r+a+n,a=" ");return r}(e,t):e&&"object"==typeof e?function(e){var t="",n="";for(var i in e)i&&e[i]&&r.call(e,i)&&(t=t+n+i,n=" ");return t}(e):e||""}function a(e){if(!e)return"";if("object"==typeof e){var t="";for(var n in e)r.call(e,n)&&(t=t+n+":"+e[n]+";");return t}return e+""}function o(e,t,n,r){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(r?e:e+'="'+e+'"');var i=typeof t;return"object"!==i&&"function"!==i||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=c(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,n){if(1===arguments.length){for(var r=t[0],i=1;i<t.length;i++)r=e(r,t[i]);return r}for(var o in n)if("class"===o){var s=t[o]||[];t[o]=(Array.isArray(s)?s:[s]).concat(n[o]||[])}else if("style"===o){s=(s=a(t[o]))&&";"!==s[s.length-1]?s+";":s;var c=a(n[o]);c=c&&";"!==c[c.length-1]?c+";":c,t[o]=s+c}else t[o]=n[o];return t},t.classes=i,t.style=a,t.attr=o,t.attrs=function(e,t){var n="";for(var s in e)if(r.call(e,s)){var c=e[s];if("class"===s){c=i(c),n=o(s,c,!1,t)+n;continue}"style"===s&&(c=a(c)),n+=o(s,c,!1,t)}return n};var s=/["&<>]/;function c(e){var t=""+e,n=s.exec(t);if(!n)return e;var r,i,a,o="";for(r=n.index,i=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}i!==r&&(o+=t.substring(i,r)),i=r+1,o+=a}return i!==r?o+t.substring(i,r):o}t.escape=c,t.rethrow=function e(t,r,i,a){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&r||a))throw t.message+=" on line "+i,t;try{a=a||n(49).readFileSync(r,"utf8")}catch(n){e(t,null,i)}var o=3,s=a.split("\n"),c=Math.max(i-o,0),u=Math.min(s.length,i+o);o=s.slice(c,u).map((function(e,t){var n=t+c+1;return(n==i?"  > ":"    ")+n+"| "+e})).join("\n");throw t.path=r,t.message=(r||"Pug")+":"+i+"\n"+o+"\n\n"+t.message,t}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(73);function i(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},i(t,n,a||t)}e.exports=i},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){var r;window,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){var n,r,i,a=this,o=t.title,s=t.text,c=t.buttons;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(e){if("Enter"===e.key){var t=a.primaryButton();t.action&&t.action(),a.dismiss()}},(r="keyupListener")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.title=o,this.text=s,this.buttons=c}var t,n,i;return t=e,(n=[{key:"buttonsString",value:function(){var e=this.buttons.map((function(e,t){return function(e,t){return"\n        <div id='button-".concat(t,"' class='sk-button ").concat(e.style,"'>\n          <div class='sk-label'>").concat(e.text,"</div>\n        </div>\n      ")}(e,t)})).join("");return"\n      <div class='sk-button-group'>\n        ".concat(e,"\n      </div>\n    ")}},{key:"templateString",value:function(){var e=this.buttonsString(),t=this.title?"<div class='sk-h3 sk-panel-section-title'>".concat(this.title,"</div>"):"",n=this.text?"<p class='sk-p'>".concat(this.text,"</p>"):"";return'\n      <div class="sk-modal">\n        <div class="sk-modal-background"></div>\n        <div class="sk-modal-content">\n          <div class="sn-component">\n            <div class="sk-panel" style=\'max-width: 500px;\'>\n              <div class="sk-panel-content">\n                <div class="sk-panel-section">\n                  '.concat(t,'\n\n                  <div class="sk-panel-row">\n                    ').concat(n,"\n                  </div>\n\n                  <div class=\"sk-panel-row\" style='margin-top: 8px;'>\n                    ").concat(e,"\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ")}},{key:"dismiss",value:function(){this.onElement.removeChild(this.element),document.removeEventListener("keyup",this.keyupListener)}},{key:"primaryButton",value:function(){var e=this.buttons.find((function(e){return!0===e.primary}));return e||(e=this.buttons[this.buttons.length-1]),e}},{key:"present",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onElement;n||(n=document.body),this.onElement=n,this.element=document.createElement("div"),this.element.className="sn-component",this.element.innerHTML=this.templateString().trim(),document.addEventListener("keyup",this.keyupListener),this.buttons.forEach((function(t,n){e.element.querySelector("#button-".concat(n)).onclick=function(){t.action&&t.action(),e.dismiss()}})),n.appendChild(this.element)}}])&&r(t.prototype,n),i&&r(t,i),e}();n.d(t,"SKAlert",(function(){return i}))}])},e.exports=r()},function(e,t,n){var r=n(48);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(50);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(53);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(54);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(55);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(56);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(57);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(58);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(59);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(60);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(61);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(62);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(63);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(64);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(65);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(66);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(67);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(68);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(69);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(70);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(71);e.exports=(r.default||r).apply(r,[])},function(e,t,n){var r=n(72);e.exports=(r.default||r).apply(r,[])},function(e,t,n){},function(e,t,n){},function(e,t){
/**
 * @license AngularJS v1.7.9
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e){"use strict";var t={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(e){if(!L(e))return t;N(e.objectMaxDepth)&&(t.objectMaxDepth=r(e.objectMaxDepth)?e.objectMaxDepth:NaN),N(e.urlErrorParamsEnabled)&&Y(e.urlErrorParamsEnabled)&&(t.urlErrorParamsEnabled=e.urlErrorParamsEnabled)}function r(e){return H(e)&&e>0}function i(e,n){n=n||Error;var r="https://errors.angularjs.org/1.7.9/",i=r.replace(".","\\.")+"[\\s\\S]*",a=new RegExp(i,"g");return function(){var i,o,s=arguments[0],c=arguments[1],u="["+(e?e+":":"")+s+"] ",l=fe(arguments,2).map((function(e){return He(e,t.objectMaxDepth)}));if(u+=c.replace(/\{\d+\}/g,(function(e){var t=+e.slice(1,-1);return t<l.length?l[t].replace(a,""):e})),u+="\n"+r+(e?e+"/":"")+s,t.urlErrorParamsEnabled)for(o=0,i="?";o<l.length;o++,i="&")u+=i+"p"+o+"="+encodeURIComponent(l[o]);return new n(u)}}var a,o,s,c,u=/^\/(.+)\/([a-z]*)$/,l=Object.prototype.hasOwnProperty,f=function(e){return B(e)?e.toLowerCase():e},p=function(e){return B(e)?e.toUpperCase():e},d=[].slice,h=[].splice,v=[].push,m=Object.prototype.toString,y=Object.getPrototypeOf,g=i("ng"),b=e.angular||(e.angular={}),k=0;function w(e){if(null==e||J(e))return!1;if(V(e)||B(e)||o&&e instanceof o)return!0;var t="length"in Object(e)&&e.length;return H(t)&&(t>=0&&t-1 in e||"function"==typeof e.item)}function x(e,t,n){var r,i;if(e)if(K(e))for(r in e)"prototype"!==r&&"length"!==r&&"name"!==r&&e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else if(V(e)||w(e)){var a="object"!=typeof e;for(r=0,i=e.length;r<i;r++)(a||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==x)e.forEach(t,n,e);else if(U(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)l.call(e,r)&&t.call(n,e[r],r,e);return e}function S(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function $(e){return function(t,n){e(n,t)}}function _(){return++k}function M(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function C(e,t,n){for(var r=e.$$hashKey,i=0,a=t.length;i<a;++i){var o=t[i];if(L(o)||K(o))for(var s=Object.keys(o),c=0,u=s.length;c<u;c++){var l=s[c],f=o[l];n&&L(f)?z(f)?e[l]=new Date(f.valueOf()):q(f)?e[l]=new RegExp(f):f.nodeName?e[l]=f.cloneNode(!0):te(f)?e[l]=f.clone():"__proto__"!==l&&(L(e[l])||(e[l]=V(f)?[]:{}),C(e[l],[f],!0)):e[l]=f}}return M(e,r),e}function A(e){return C(e,d.call(arguments,1),!1)}function O(e){return C(e,d.call(arguments,1),!0)}function I(e){return parseInt(e,10)}a=e.document.documentMode;var E=Number.isNaN||function(e){return e!=e};function D(e,t){return A(Object.create(e),t)}function R(){}function P(e){return e}function T(e){return function(){return e}}function j(e){return K(e.toString)&&e.toString!==m}function F(e){return void 0===e}function N(e){return void 0!==e}function L(e){return null!==e&&"object"==typeof e}function U(e){return null!==e&&"object"==typeof e&&!y(e)}function B(e){return"string"==typeof e}function H(e){return"number"==typeof e}function z(e){return"[object Date]"===m.call(e)}function V(e){return Array.isArray(e)||e instanceof Array}function W(e){switch(m.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function K(e){return"function"==typeof e}function q(e){return"[object RegExp]"===m.call(e)}function J(e){return e&&e.window===e}function G(e){return e&&e.$evalAsync&&e.$watch}function Y(e){return"boolean"==typeof e}function Z(e){return e&&K(e.then)}R.$inject=[],P.$inject=[];var X=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var Q=function(e){return B(e)?e.trim():e},ee=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function te(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function ne(e){return f(e.nodeName||e[0]&&e[0].nodeName)}function re(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function ie(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function ae(e,t,n){var i,a,o=[],s=[];if(n=r(n)?n:NaN,t){if((a=t)&&H(a.length)&&X.test(m.call(a))||(i=t,"[object ArrayBuffer]"===m.call(i)))throw g("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw g("cpi","Can't copy! Source and destination are identical.");return V(t)?t.length=0:x(t,(function(e,n){"$$hashKey"!==n&&delete t[n]})),o.push(e),s.push(t),c(e,t,n)}return u(e,n);function c(e,t,n){if(--n<0)return"...";var r,i=t.$$hashKey;if(V(e))for(var a=0,o=e.length;a<o;a++)t.push(u(e[a],n));else if(U(e))for(r in e)t[r]=u(e[r],n);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=u(e[r],n));else for(r in e)l.call(e,r)&&(t[r]=u(e[r],n));return M(t,i),t}function u(e,t){if(!L(e))return e;var n=o.indexOf(e);if(-1!==n)return s[n];if(J(e)||G(e))throw g("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=function(e){switch(m.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(u(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(K(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===i&&(i=V(e)?[]:Object.create(y(e)),r=!0),o.push(e),s.push(i),r?c(e,i,t):i}}function oe(e,t){return e===t||e!=e&&t!=t}function se(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,r,i,a=typeof e;if(a===typeof t&&"object"===a){if(!V(e)){if(z(e))return!!z(t)&&oe(e.getTime(),t.getTime());if(q(e))return!!q(t)&&e.toString()===t.toString();if(G(e)||G(t)||J(e)||J(t)||V(t)||z(t)||q(t))return!1;for(r in i=Ne(),e)if("$"!==r.charAt(0)&&!K(e[r])){if(!se(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&N(t[r])&&!K(t[r]))return!1;return!0}if(!V(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!se(e[r],t[r]))return!1;return!0}}return!1}var ce=function(){if(!N(ce.rules)){var t=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(t){var n=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp");ce.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ce.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return ce.rules},ue=function(){if(N(ue.name_))return ue.name_;var t,n,r,i,a=_e.length;for(n=0;n<a;++n)if(r=_e[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return ue.name_=i};function le(e,t,n){return e.concat(d.call(t,n))}function fe(e,t){return d.call(e,t||0)}function pe(e,t){var n=arguments.length>2?fe(arguments,2):[];return!K(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,le(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function de(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:J(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":G(n)&&(r="$SCOPE"),r}function he(e,t){if(!F(e))return H(t)||(t=t?2:null),JSON.stringify(e,de,t)}function ve(e){return B(e)?JSON.parse(e):e}var me=/:/g;function ye(e,t){e=e.replace(me,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return E(n)?t:n}function ge(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function be(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return ge(e,n*(ye(t,r)-r))}function ke(e){e=o(e).clone().empty();var t=o("<div></div>").append(e).html();try{return e[0].nodeType===Ue?f(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(e,t){return"<"+f(t)}))}catch(e){return f(t)}}function we(e){try{return decodeURIComponent(e)}catch(e){}}function xe(e){var t={};return x((e||"").split("&"),(function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),-1!==(n=e.indexOf("="))&&(r=e.substring(0,n),i=e.substring(n+1)),N(r=we(r))&&(i=!N(i)||we(i),l.call(t,r)?V(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))})),t}function Se(e){return $e(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function $e(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var _e=["ng-","data-ng-","ng:","x-ng-"];var Me=function(t){var n=t.currentScript;if(!n)return!0;if(!(n instanceof e.HTMLScriptElement||n instanceof e.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every((function(e){if(!e)return!0;if(!e.value)return!1;var n=t.createElement("a");if(n.href=e.value,t.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(e.document);function Ce(t,n){var r,i,a={};if(x(_e,(function(e){var n=e+"app";!r&&t.hasAttribute&&t.hasAttribute(n)&&(r=t,i=t.getAttribute(n))})),x(_e,(function(e){var n,a=e+"app";!r&&(n=t.querySelector("["+a.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(a))})),r){if(!Me)return void e.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==function(e,t){var n,r,i=_e.length;for(r=0;r<i;++r)if(n=_e[r]+t,B(n=e.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],a)}}function Ae(t,n,r){L(r)||(r={});r=A({strictDi:!1},r);var i=function(){if((t=o(t)).injector()){var i=t[0]===e.document?"document":ke(t);throw g("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(e){e.value("$rootElement",t)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var a=Kt(n,r.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply((function(){t.data("$injector",r),n(t)(e)}))}]),a},a=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(e&&a.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(a,"")),e&&!s.test(e.name))return i();e.name=e.name.replace(s,""),b.resumeBootstrap=function(e){return x(e,(function(e){n.push(e)})),i()},K(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function Oe(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function Ie(e){var t=b.element(e).injector();if(!t)throw g("test","no injector found for element argument to getTestability");return t.get("$$testability")}var Ee=/[A-Z]/g;function De(e,t){return t=t||"_",e.replace(Ee,(function(e,n){return(n?t:"")+e.toLowerCase()}))}var Re=!1;function Pe(e,t,n){if(!e)throw g("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function Te(e,t,n){return n&&V(e)&&(e=e[e.length-1]),Pe(K(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function je(e,t){if("hasOwnProperty"===e)throw g("badname","hasOwnProperty is not a valid {0} name",t)}function Fe(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=o(d.call(e,0,i))),t.push(n));return t||e}function Ne(){return Object.create(null)}function Le(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!j(e)||V(e)||z(e)?he(e):e.toString()}return e}var Ue=3;function Be(e,t){if(V(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(L(e))for(var i in t=t||{},e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i]);return t||e}function He(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):F(e)?"undefined":"string"!=typeof e?function(e,t){var n=[];return r(t)&&(e=b.copy(e,null,t)),JSON.stringify(e,(function(e,t){if(L(t=de(e,t))){if(n.indexOf(t)>=0)return"...";n.push(t)}return t}))}(e,t):e}var ze={full:"1.7.9",major:1,minor:7,dot:9,codeName:"pollution-eradication"};st.expando="ng339";var Ve=st.cache={},We=1;st._data=function(e){return this.cache[e[this.expando]]||{}};var Ke=/-([a-z])/g,qe=/^-ms-/,Je={mouseleave:"mouseout",mouseenter:"mouseover"},Ge=i("jqLite");function Ye(e,t){return t.toUpperCase()}function Ze(e){return e.replace(Ke,Ye)}var Xe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Qe=/<|&#?\w+;/,et=/<([\w:-]+)/,tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,nt={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function rt(e){return!Qe.test(e)}function it(e){var t=e.nodeType;return 1===t||!t||9===t}function at(e,t){var n,r,i,a,o=t.createDocumentFragment(),s=[];if(rt(e))s.push(t.createTextNode(e));else{for(n=o.appendChild(t.createElement("div")),r=(et.exec(e)||["",""])[1].toLowerCase(),i=nt[r]||nt._default,n.innerHTML=i[1]+e.replace(tt,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;s=le(s,n.childNodes),(n=o.firstChild).textContent=""}return o.textContent="",o.innerHTML="",x(s,(function(e){o.appendChild(e)})),o}nt.optgroup=nt.option,nt.tbody=nt.tfoot=nt.colgroup=nt.caption=nt.thead,nt.th=nt.td;var ot=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};function st(t){if(t instanceof st)return t;var n,r,i,a;if(B(t)&&(t=Q(t),n=!0),!(this instanceof st)){if(n&&"<"!==t.charAt(0))throw Ge("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new st(t)}n?bt(this,(r=t,i=i||e.document,(a=Xe.exec(r))?[i.createElement(a[1])]:(a=at(r,i))?a.childNodes:[])):K(t)?$t(t):bt(this,t)}function ct(e){return e.cloneNode(!0)}function ut(e,t){!t&&it(e)&&o.cleanData([e]),e.querySelectorAll&&o.cleanData(e.querySelectorAll("*"))}function lt(e){var t;for(t in e)return!1;return!0}function ft(e){var t=e.ng339,n=t&&Ve[t],r=n&&n.events,i=n&&n.data;i&&!lt(i)||r&&!lt(r)||(delete Ve[t],e.ng339=void 0)}function pt(e,t,n,r){if(N(r))throw Ge("offargs","jqLite#off() does not support the `selector` argument");var i=ht(e),a=i&&i.events,o=i&&i.handle;if(o){if(t){var s=function(t){var r=a[t];N(n)&&ie(r||[],n),N(n)&&r&&r.length>0||(e.removeEventListener(t,o),delete a[t])};x(t.split(" "),(function(e){s(e),Je[e]&&s(Je[e])}))}else for(t in a)"$destroy"!==t&&e.removeEventListener(t,o),delete a[t];ft(e)}}function dt(e,t){var n=e.ng339,r=n&&Ve[n];r&&(t?delete r.data[t]:r.data={},ft(e))}function ht(e,t){var n=e.ng339,r=n&&Ve[n];return t&&!r&&(e.ng339=n=++We,r=Ve[n]={events:{},data:{},handle:void 0}),r}function vt(e,t,n){if(it(e)){var r,i=N(n),a=!i&&t&&!L(t),o=!t,s=ht(e,!a),c=s&&s.data;if(i)c[Ze(t)]=n;else{if(o)return c;if(a)return c&&c[Ze(t)];for(r in t)c[Ze(r)]=t[r]}}}function mt(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function yt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;x(t.split(" "),(function(e){e=Q(e),r=r.replace(" "+e+" "," ")})),r!==n&&e.setAttribute("class",Q(r))}}function gt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;x(t.split(" "),(function(e){e=Q(e),-1===r.indexOf(" "+e+" ")&&(r+=e+" ")})),r!==n&&e.setAttribute("class",Q(r))}}function bt(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function kt(e,t){return wt(e,"$"+(t||"ngController")+"Controller")}function wt(e,t,n){9===e.nodeType&&(e=e.documentElement);for(var r=V(t)?t:[t];e;){for(var i=0,a=r.length;i<a;i++)if(N(n=o.data(e,r[i])))return n;e=e.parentNode||11===e.nodeType&&e.host}}function xt(e){for(ut(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function St(e,t){t||ut(e);var n=e.parentNode;n&&n.removeChild(e)}function $t(t){function n(){e.document.removeEventListener("DOMContentLoaded",n),e.removeEventListener("load",n),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))}var _t=st.prototype={ready:$t,toString:function(){var e=[];return x(this,(function(t){e.push(""+t)})),"["+e.join(", ")+"]"},eq:function(e){return o(e>=0?this[e]:this[this.length+e])},length:0,push:v,sort:[].sort,splice:[].splice},Mt={};x("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(e){Mt[f(e)]=e}));var Ct={};x("input,select,option,textarea,button,form,details".split(","),(function(e){Ct[e]=!0}));var At={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Ot(e,t){var n=Mt[t.toLowerCase()];return n&&Ct[ne(e)]&&n}function It(e,t,n){n.call(e,t)}function Et(e,t,n){var r=t.relatedTarget;r&&(r===e||ot.call(e,r))||n.call(e,t)}function Dt(){this.$get=function(){return A(st,{hasClass:function(e,t){return e.attr&&(e=e[0]),mt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),gt(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),yt(e,t)}})}}function Rt(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||_)():r+":"+e}x({data:vt,removeData:dt,hasData:function(e){for(var t in Ve[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,n=e.length;t<n;t++)dt(e[t]),pt(e[t])}},(function(e,t){st[t]=e})),x({data:vt,inheritedData:wt,scope:function(e){return o.data(e,"$scope")||wt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return o.data(e,"$isolateScope")||o.data(e,"$isolateScopeNoTemplate")},controller:kt,injector:function(e){return wt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:mt,css:function(e,t,n){if(t=function(e){return Ze(e.replace(qe,"ms-"))}(t),!N(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var r,i=e.nodeType;if(i!==Ue&&2!==i&&8!==i&&e.getAttribute){var a=f(t),o=Mt[a];if(!N(n))return r=e.getAttribute(t),o&&null!==r&&(r=a),null===r?void 0:r;null===n||!1===n&&o?e.removeAttribute(t):e.setAttribute(t,o?a:n)}},prop:function(e,t,n){if(!N(n))return e[t];e[t]=n},text:function(){return e.$dv="",e;function e(e,t){if(F(t)){var n=e.nodeType;return 1===n||n===Ue?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(F(t)){if(e.multiple&&"select"===ne(e)){var n=[];return x(e.options,(function(e){e.selected&&n.push(e.value||e.text)})),n}return e.value}e.value=t},html:function(e,t){if(F(t))return e.innerHTML;ut(e,!0),e.innerHTML=t},empty:xt},(function(e,t){st.prototype[t]=function(t,n){var r,i,a=this.length;if(e!==xt&&F(2===e.length&&e!==mt&&e!==kt?t:n)){if(L(t)){for(r=0;r<a;r++)if(e===vt)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var o=e.$dv,s=F(o)?Math.min(a,1):a,c=0;c<s;c++){var u=e(this[c],t,n);o=o?o+u:u}return o}for(r=0;r<a;r++)e(this[r],t,n);return this}})),x({removeData:dt,on:function(e,t,n,r){if(N(r))throw Ge("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(it(e)){var i=ht(e,!0),a=i.events,o=i.handle;o||(o=i.handle=function(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],a=i?i.length:0;if(a){if(F(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||It;a>1&&(i=Be(i));for(var c=0;c<a;c++)n.isImmediatePropagationStopped()||s(e,n,i[c])}};return n.elem=e,n}(e,a));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],c=s.length,u=function(t,r,i){var s=a[t];s||((s=a[t]=[]).specialHandlerWrapper=r,"$destroy"===t||i||e.addEventListener(t,o)),s.push(n)};c--;)t=s[c],Je[t]?(u(Je[t],Et),u(t,void 0,!0)):u(t)}},off:pt,one:function(e,t,n){(e=o(e)).on(t,(function r(){e.off(t,n),e.off(t,r)})),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;ut(e),x(new st(t),(function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t}))},children:function(e){var t=[];return x(e.childNodes,(function(e){1===e.nodeType&&t.push(e)})),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(1===n||11===n)for(var r=0,i=(t=new st(t)).length;r<i;r++){var a=t[r];e.appendChild(a)}},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;x(new st(t),(function(t){e.insertBefore(t,n)}))}},wrap:function(e,t){var n,r,i;n=e,r=o(t).eq(0).clone()[0],(i=n.parentNode)&&i.replaceChild(r,n),r.appendChild(n)},remove:St,detach:function(e){St(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r)for(var i=0,a=(t=new st(t)).length;i<a;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:gt,removeClass:yt,toggleClass:function(e,t,n){t&&x(t.split(" "),(function(t){var r=n;F(r)&&(r=!mt(e,t)),(r?gt:yt)(e,t)}))},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:ct,triggerHandler:function(e,t,n){var r,i,a,o=t.type||t,s=ht(e),c=s&&s.events,u=c&&c[o];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:R,type:o,target:e},t.type&&(r=A(r,t)),i=Be(u),a=n?[r].concat(n):[r],x(i,(function(t){r.isImmediatePropagationStopped()||t.apply(e,a)})))}},(function(e,t){st.prototype[t]=function(t,n,r){for(var i,a=0,s=this.length;a<s;a++)F(i)?N(i=e(this[a],t,n,r))&&(i=o(i)):bt(i,e(this[a],t,n,r));return N(i)?i:this}})),st.prototype.bind=st.prototype.on,st.prototype.unbind=st.prototype.off;var Pt=Object.create(null);function Tt(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Tt.prototype={_idx:function(e){return e!==this._lastKey&&(this._lastKey=e,this._lastIndex=this._keys.indexOf(e)),this._lastIndex},_transformKey:function(e){return E(e)?Pt:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},has:function(e){return e=this._transformKey(e),-1!==this._idx(e)},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var jt=Tt,Ft=[function(){this.$get=[function(){return jt}]}],Nt=/^([^(]+?)=>/,Lt=/^[^(]*\(\s*([^)]*)\)/m,Ut=/,/,Bt=/^\s*(_?)(\S+?)\1\s*$/,Ht=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,zt=i("$injector");function Vt(e){return Function.prototype.toString.call(e)}function Wt(e){var t=Vt(e).replace(Ht,"");return t.match(Nt)||t.match(Lt)}function Kt(e,t){t=!0===t;var n={},r=[],i=new jt,o={$provide:{provider:d(h),factory:d(m),service:d((function(e,t){return m(e,["$injector",function(e){return e.instantiate(t)}])})),value:d((function(e,t){return m(e,T(t),!1)})),constant:d((function(e,t){je(e,"constant"),o[e]=t,u[e]=t})),decorator:function(e,t){var n=s.get(e+"Provider"),r=n.$get;n.$get=function(){var e=f.invoke(r,n);return f.invoke(t,null,{$delegate:e})}}}},s=o.$injector=g(o,(function(e,t){throw b.isString(t)&&r.push(t),zt("unpr","Unknown provider: {0}",r.join(" <- "))})),u={},l=g(u,(function(e,t){var n=s.get(e+"Provider",t);return f.invoke(n.$get,n,void 0,e)})),f=l;o.$injectorProvider={$get:T(l)},f.modules=s.modules=Ne();var p=y(e);return(f=l.get("$injector")).strictDi=t,x(p,(function(e){e&&f.invoke(e)})),f.loadNewModules=function(e){x(y(e),(function(e){e&&f.invoke(e)}))},f;function d(e){return function(t,n){if(!L(t))return e(t,n);x(t,$(e))}}function h(e,t){if(je(e,"service"),(K(t)||V(t))&&(t=s.instantiate(t)),!t.$get)throw zt("pget","Provider '{0}' must define $get factory method.",e);return o[e+"Provider"]=t}function v(e,t){return function(){var n=f.invoke(t,this);if(F(n))throw zt("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function m(e,t,n){return h(e,{$get:!1!==n?v(e,t):t})}function y(e){Pe(F(e)||V(e),"modulesToLoad","not an array");var t,n=[];return x(e,(function(e){if(!i.get(e)){i.set(e,!0);try{B(e)?(t=c(e),f.modules[e]=t,n=n.concat(y(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):K(e)?n.push(s.invoke(e)):V(e)?n.push(s.invoke(e)):Te(e,"module")}catch(t){throw V(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),zt("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=s.get(r[0]);i[r[1]].apply(i,r[2])}}})),n}function g(e,i){function s(t,a){if(e.hasOwnProperty(t)){if(e[t]===n)throw zt("cdep","Circular dependency found: {0}",t+" <- "+r.join(" <- "));return e[t]}try{return r.unshift(t),e[t]=n,e[t]=i(t,a),e[t]}catch(r){throw e[t]===n&&delete e[t],r}finally{r.shift()}}function c(e,n,r){for(var i=[],a=Kt.$$annotate(e,t,r),o=0,c=a.length;o<c;o++){var u=a[o];if("string"!=typeof u)throw zt("itkn","Incorrect injection token! Expected service name as string, got {0}",u);i.push(n&&n.hasOwnProperty(u)?n[u]:s(u,r))}return i}return{invoke:function(e,t,n,r){"string"==typeof n&&(r=n,n=null);var i=c(e,n,r);return V(e)&&(e=e[e.length-1]),function(e){if(a||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return Y(t)||(t=e.$$ngIsClass=/^class\b/.test(Vt(e))),t}(e)?(i.unshift(null),new(Function.prototype.bind.apply(e,i))):e.apply(t,i)},instantiate:function(e,t,n){var r=V(e)?e[e.length-1]:e,i=c(e,t,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:s,annotate:Kt.$$annotate,has:function(t){return o.hasOwnProperty(t+"Provider")||e.hasOwnProperty(t)}}}}function qt(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var a=n.document;function s(e){if(e){e.scrollIntoView();var t=function(){var e=c.yOffset;if(K(e))e=e();else if(te(e)){var t=e[0];e="fixed"!==n.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom}else H(e)||(e=0);return e}();if(t){var r=e.getBoundingClientRect().top;n.scrollBy(0,r-t)}}else n.scrollTo(0,0)}function c(e){var t,n,i;(e=B(e)?e:H(e)?e.toString():r.hash())?(t=a.getElementById(e))?s(t):(n=a.getElementsByName(e),i=null,Array.prototype.some.call(n,(function(e){if("a"===ne(e))return i=e,!0})),(t=i)?s(t):"top"===e&&s(null)):s(null)}return t&&i.$watch((function(){return r.hash()}),(function(t,n){var r,a;t===n&&""===t||(r=function(){i.$evalAsync(c)},"complete"===(a=a||e).document.readyState?a.setTimeout(r):o(a).on("load",r))})),c}]}Kt.$$annotate=function(e,t,n){var r,i;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw B(n)&&n||(n=e.name||function(e){var t=Wt(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(e)),zt("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);x(Wt(e)[1].split(Ut),(function(e){e.replace(Bt,(function(e,t,n){r.push(n)}))}))}e.$inject=r}}else V(e)?(Te(e[i=e.length-1],"fn"),r=e.slice(0,i)):Te(e,"fn",!0);return r};var Jt=i("$animate");function Gt(e,t){return e||t?e?t?(V(e)&&(e=e.join(" ")),V(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function Yt(e){return L(e)?e:{}}var Zt=function(){this.$get=R},Xt=function(){var e=new jt,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:R,on:R,off:R,pin:R,push:function(o,s,c,u){u&&u(),(c=c||{}).from&&o.css(c.from),c.to&&o.css(c.to),(c.addClass||c.removeClass)&&function(n,o,s){var c=e.get(n)||{},u=i(c,o,!0),l=i(c,s,!1);(u||l)&&(e.set(n,c),t.push(n),1===t.length&&r.$$postDigest(a))}(o,c.addClass,c.removeClass);var l=new n;return l.complete(),l}};function i(e,t,n){var r=!1;return t&&x(t=B(t)?t.split(" "):V(t)?t:[],(function(t){t&&(r=!0,e[t]=n)})),r}function a(){x(t,(function(t){var n=e.get(t);if(n){var r=function(e){B(e)&&(e=e.split(" "));var t=Ne();return x(e,(function(e){e.length&&(t[e]=!0)})),t}(t.attr("class")),i="",a="";x(n,(function(e,t){e!==!!r[t]&&(e?i+=(i.length?" ":"")+t:a+=(a.length?" ":"")+t)})),x(t,(function(e){i&&gt(e,i),a&&yt(e,a)})),e.delete(t)}})),t.length=0}}]},Qt=["$provide",function(e){var t=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Jt("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.customFilter=function(e){return 1===arguments.length&&(r=K(e)?e:null),r},this.classNameFilter=function(e){if(1===arguments.length&&(n=e instanceof RegExp?e:null)){var t=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(t.test(n.toString()))throw n=null,Jt("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate")}return n},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(1===n.nodeType)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.cancel&&e.cancel()},enter:function(n,r,i,a){return r=r&&o(r),i=i&&o(i),t(n,r=r||i.parent(),i),e.push(n,"enter",Yt(a))},move:function(n,r,i,a){return r=r&&o(r),i=i&&o(i),t(n,r=r||i.parent(),i),e.push(n,"move",Yt(a))},leave:function(t,n){return e.push(t,"leave",Yt(n),(function(){t.remove()}))},addClass:function(t,n,r){return(r=Yt(r)).addClass=Gt(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return(r=Yt(r)).removeClass=Gt(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return(i=Yt(i)).addClass=Gt(i.addClass,n),i.removeClass=Gt(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,a){return(a=Yt(a)).from=a.from?A(a.from,n):n,a.to=a.to?A(a.to,r):r,i=i||"ng-inline-animate",a.tempClasses=Gt(a.tempClasses,i),e.push(t,"animate",a)}}}]}],en=function(){this.$get=["$$rAF",function(e){var t=[];function n(n){t.push(n),t.length>1||e((function(){for(var e=0;e<t.length;e++)t[e]();t=[]}))}return function(){var e=!1;return n((function(){e=!0})),function(t){e?t():n(t)}}}]},tn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,r,i){function a(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){r()?function(e){i(e,0,!1)}(e):t(e)},this._state=0}return a.chain=function(e,t){var n=0;!function r(){if(n===e.length)return void t(!0);e[n]((function(e){!1!==e?(n++,r()):t(!1)}))}()},a.all=function(e,t){var n=0,r=!0;function i(i){r=r&&i,++n===e.length&&t(r)}x(e,(function(e){e.done(i)}))},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:R,getPromise:function(){if(!this.promise){var t=this;this.promise=e((function(e,n){t.done((function(t){!1===t?n():e()}))}))}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick((function(){t._resolve(e)})))},_resolve:function(e){2!==this._state&&(x(this._doneCallbacks,(function(t){t(e)})),this._doneCallbacks.length=0,this._state=2)}},a}]},nn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){var i=r||{};i.$$prepared||(i=ae(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(t.css(i.from),i.from=null);var a,o=new n;return{start:s,end:s};function s(){return e((function(){!function(){i.addClass&&(t.addClass(i.addClass),i.addClass=null);i.removeClass&&(t.removeClass(i.removeClass),i.removeClass=null);i.to&&(t.css(i.to),i.to=null)}(),a||o.complete(),a=!0})),o}}}]};function rn(e,t,n,r,i){var a=this,s=e.location,c=e.history,u=e.setTimeout,l=e.clearTimeout,f={},p=i(n);a.isMock=!1,a.$$completeOutstandingRequest=p.completeTask,a.$$incOutstandingRequestCount=p.incTaskCount,a.notifyWhenNoOutstandingRequests=p.notifyWhenNoPendingTasks;var d,h,v=s.href,m=t.find("base"),y=null,g=r.history?function(){try{return c.state}catch(e){}}:R;$(),a.url=function(t,n,i){if(F(i)&&(i=null),s!==e.location&&(s=e.location),c!==e.history&&(c=e.history),t){var o=h===i;if(t=ri(t).href,v===t&&(!r.history||o))return a;var u=v&&nr(v)===nr(t);return v=t,h=i,!r.history||u&&o?(u||(y=t),n?s.replace(t):u?s.hash=function(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}(t):s.href=t,s.href!==t&&(y=t)):(c[n?"replaceState":"pushState"](i,"",t),$()),y&&(y=t),a}return function(e){return e.replace(/#$/,"")}(y||s.href)},a.state=function(){return d};var b=[],k=!1;function w(){y=null,_()}var S=null;function $(){se(d=F(d=g())?null:d,S)&&(d=S),S=d,h=d}function _(){var e=h;$(),v===a.url()&&e===d||(v=a.url(),h=d,x(b,(function(e){e(a.url(),d)})))}a.onUrlChange=function(t){return k||(r.history&&o(e).on("popstate",w),o(e).on("hashchange",w),k=!0),b.push(t),t},a.$$applicationDestroyed=function(){o(e).off("hashchange popstate",w)},a.$$checkUrlChange=_,a.baseHref=function(){var e=m.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},a.defer=function(e,t,n){var r;return t=t||0,n=n||p.DEFAULT_TASK_TYPE,p.incTaskCount(n),r=u((function(){delete f[r],p.completeTask(e,n)}),t),f[r]=n,r},a.defer.cancel=function(e){if(f.hasOwnProperty(e)){var t=f[e];return delete f[e],l(e),p.completeTask(R,t),!0}return!1}}function an(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(e,t,n,r,i){return new rn(e,r,t,n,i)}]}function on(){this.$get=function(){var e={};function t(t,n){if(t in e)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var r=0,a=A({},n,{id:t}),o=Ne(),s=n&&n.capacity||Number.MAX_VALUE,c=Ne(),u=null,l=null;return e[t]={put:function(e,t){if(!F(t)){if(s<Number.MAX_VALUE)f(c[e]||(c[e]={key:e}));return e in o||r++,o[e]=t,r>s&&this.remove(l.key),t}},get:function(e){if(s<Number.MAX_VALUE){var t=c[e];if(!t)return;f(t)}return o[e]},remove:function(e){if(s<Number.MAX_VALUE){var t=c[e];if(!t)return;t===u&&(u=t.p),t===l&&(l=t.n),p(t.n,t.p),delete c[e]}e in o&&(delete o[e],r--)},removeAll:function(){o=Ne(),r=0,c=Ne(),u=l=null},destroy:function(){o=null,a=null,c=null,delete e[t]},info:function(){return A({},a,{size:r})}};function f(e){e!==u&&(l?l===e&&(l=e.n):l=e,p(e.n,e.p),p(e,u),(u=e).n=null)}function p(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}}return t.info=function(){var t={};return x(e,(function(e,n){t[n]=e.info()})),t},t.get=function(t){return e[t]},t}}function sn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var cn=i("$compile");var un=new function(){};function ln(t,n){var r={},i=/^\s*directive:\s*([\w-]+)\s+(.*)$/,s=/(([\w-]+)(?::([^;]+))?;?)/,c=function(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),u=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/,d=Ne();function h(e,t,n){var r=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,i=Ne();return x(e,(function(e,a){if((e=e.trim())in d)i[a]=d[e];else{var o=e.match(r);if(!o)throw cn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,a,e,n?"controller bindings definition":"isolate scope definition");i[a]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||a},o[4]&&(d[e]=i[a])}})),i}function v(e,t){var n={isolateScope:null,bindToController:null};if(L(e.scope)&&(!0===e.bindToController?(n.bindToController=h(e.scope,t,!0),n.isolateScope={}):n.isolateScope=h(e.scope,t,!1)),L(e.bindToController)&&(n.bindToController=h(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw cn("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}this.directive=function e(n,i){return Pe(n,"name"),je(n,"directive"),B(n)?(!function(e){var t=e.charAt(0);if(!t||t!==f(t))throw cn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw cn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}(n),Pe(i,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],t.factory(n+"Directive",["$injector","$exceptionHandler",function(e,t){var i=[];return x(r[n],(function(r,a){try{var o=e.invoke(r);K(o)?o={compile:T(o)}:!o.compile&&o.link&&(o.compile=T(o.link)),o.priority=o.priority||0,o.index=a,o.name=o.name||n,o.require=function(e){var t=e.require||e.controller&&e.name;return!V(t)&&L(t)&&x(t,(function(e,n){var r=e.match(u);e.substring(r[0].length)||(t[n]=r[0]+n)})),t}(o),o.restrict=function(e,t){if(e&&(!B(e)||!/[EACM]/.test(e)))throw cn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}(o.restrict,n),o.$$moduleName=r.$$moduleName,i.push(o)}catch(e){t(e)}})),i}])),r[n].push(i)):x(n,$(e)),this},this.component=function e(t,n){if(!B(t))return x(t,$(pe(this,e))),this;var r=n.controller||function(){};function i(e){function t(t){return K(t)||V(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var i=n.template||n.templateUrl?n.template:"",a={controller:r,controllerAs:bn(n.controller)||n.controllerAs||"$ctrl",template:t(i),templateUrl:t(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return x(n,(function(e,t){"$"===t.charAt(0)&&(a[t]=e)})),a}return x(n,(function(e,t){"$"===t.charAt(0)&&(i[t]=e,K(r)&&(r[t]=e))})),i.$inject=["$injector"],this.directive(t,i)},this.aHrefSanitizationWhitelist=function(e){return N(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return N(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(e){return N(e)?(y=e,this):y};var g=!1;this.strictComponentBindingsEnabled=function(e){return N(e)?(g=e,this):g};var b=10;this.onChangesTtl=function(e){return arguments.length?(b=e,this):b};var k=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(k=e,this):k};var w=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(w=e,this):w};var S=Ne();this.addPropertySecurityContext=function(e,t,n){var r=e.toLowerCase()+"|"+t.toLowerCase();if(r in S&&S[r]!==n)throw cn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",e,t,S[r],n);return S[r]=n,this},function(){function e(e,t){x(t,(function(t){S[t.toLowerCase()]=e}))}e(Lr.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),e(Lr.CSS,["*|style"]),e(Lr.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),e(Lr.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),e(Lr.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(t,n,d,h,$,_,M,C,O){var I,E=/^\w/,T=e.document.createElement("div"),j=k,N=w,U=b;function H(){try{if(!--U)throw I=void 0,cn("infchng","{0} $onChanges() iterations reached. Aborting!\n",b);M.$apply((function(){for(var e=0,t=I.length;e<t;++e)try{I[e]()}catch(e){d(e)}I=void 0}))}finally{U++}}function z(e,t){if(!e)return e;if(!B(e))throw cn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',t,e.toString());for(var n="",r=Q(e),i=/\s/.test(r)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,a=r.split(i),o=Math.floor(a.length/2),s=0;s<o;s++){var c=2*s;n+=C.getTrustedMediaUrl(Q(a[c])),n+=" "+Q(a[c+1])}var u=Q(a[2*s]).split(/\s/);return n+=C.getTrustedMediaUrl(Q(u[0])),2===u.length&&(n+=" "+Q(u[1])),n}function q(e,t){if(t){var n,r,i,a=Object.keys(t);for(n=0,r=a.length;n<r;n++)this[i=a[n]]=t[i]}else this.$attr={};this.$$element=e}function J(e,t){try{e.addClass(t)}catch(e){}}q.prototype={$normalize:hn,$addClass:function(e){e&&e.length>0&&O.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&O.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=vn(e,t);n&&n.length&&O.addClass(this.$$element,n);var r=vn(t,e);r&&r.length&&O.removeClass(this.$$element,r)},$set:function(e,t,n,r){var i=Ot(this.$$element[0],e),a=At[e],o=e;i?(this.$$element.prop(e,t),r=i):a&&(this[a]=t,o=a),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e])||(this.$attr[e]=r=De(e,"-")),"img"===ne(this.$$element)&&"srcset"===e&&(this[e]=t=z(t,"$set('srcset', value)")),!1!==n&&(null===t||F(t)?this.$$element.removeAttr(r):E.test(r)?i&&!1===t?this.$$element.removeAttr(r):this.$$element.attr(r,t):function(e,t,n){T.innerHTML="<span "+t+">";var r=T.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}(this.$$element[0],r,t));var s=this.$$observers;s&&x(s[o],(function(e){try{e(t)}catch(e){d(e)}}))},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=Ne()),i=r[e]||(r[e]=[]);return i.push(t),M.$evalAsync((function(){i.$$inter||!n.hasOwnProperty(e)||F(n[e])||t(n[e])})),function(){ie(i,t)}}};var Z=n.startSymbol(),X=n.endSymbol(),ee="{{"===Z&&"}}"===X?P:function(e){return e.replace(/\{\{/g,Z).replace(/}}/g,X)},te=/^ng(Attr|Prop|On)([A-Z].*)$/,re=/^(.+)Start$/;return ae.$$addBindingInfo=y?function(e,t){var n=e.data("$binding")||[];V(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:R,ae.$$addBindingClass=y?function(e){J(e,"ng-binding")}:R,ae.$$addScopeInfo=y?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:R,ae.$$addScopeClass=y?function(e,t){J(e,t?"ng-isolate-scope":"ng-scope")}:R,ae.$$createComment=function(t,n){var r="";return y&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},ae;function ae(e,t,n,r,i){e instanceof o||(e=o(e));var a=ce(e,t,e,n,r,i);ae.$$addScopeClass(e);var s=null;return function(t,n,r){if(!e)throw cn("multilink","This element has already been linked.");Pe(t,"scope"),i&&i.needsNewScope&&(t=t.$parent.$new());var c,u,l,f=(r=r||{}).parentBoundTranscludeFn,p=r.transcludeControllers,d=r.futureParentElement;if(f&&f.$$boundTransclude&&(f=f.$$boundTransclude),s||(u=(c=d)&&c[0],s=u&&"foreignobject"!==ne(u)&&m.call(u).match(/SVG/)?"svg":"html"),l="html"!==s?o(Ce(s,o("<div></div>").append(e).html())):n?_t.clone.call(e):e,p)for(var h in p)l.data("$"+h+"Controller",p[h].instance);return ae.$$addScopeInfo(l,t),n&&n(l,t),a&&a(t,l,l,f),n||(e=a=null),l}}function ce(e,t,n,r,i,s){for(var c,u,l,f,p,d,h,v=[],m=V(e)||e instanceof o,y=0;y<e.length;y++)c=new q,11===a&&ue(e,y,m),(l=(u=de(e[y],[],c,0===y?r:void 0,i)).length?ye(u,e[y],c,t,n,null,[],[],s):null)&&l.scope&&ae.$$addScopeClass(c.$$element),p=l&&l.terminal||!(f=e[y].childNodes)||!f.length?null:ce(f,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),(l||p)&&(v.push(y,l,p),d=!0,h=h||l),s=null;return d?function(e,n,r,i){var a,s,c,u,l,f,p,d,m;if(h){var y=n.length;for(m=new Array(y),l=0;l<v.length;l+=3)p=v[l],m[p]=n[p]}else m=n;for(l=0,f=v.length;l<f;)c=m[v[l++]],a=v[l++],s=v[l++],a?(a.scope?(u=e.$new(),ae.$$addScopeInfo(o(c),u)):u=e,d=a.transcludeOnThisElement?le(e,a.transclude,i):!a.templateOnThisElement&&i?i:!i&&t?le(e,t):null,a(s,u,c,r,d)):s&&s(e,c.childNodes,void 0,i)}:null}function ue(e,t,n){var r,i=e[t],a=i.parentNode;if(i.nodeType===Ue)for(;(r=a?i.nextSibling:e[t+1])&&r.nodeType===Ue;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===e[t+1]&&e.splice(t+1,1)}function le(e,t,n){function r(r,i,a,o,s){return r||((r=e.$new(!1,s)).$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})}var i=r.$$slots=Ne();for(var a in t.$$slots)t.$$slots[a]?i[a]=le(e,t.$$slots[a],n):i[a]=null;return r}function de(e,t,r,a,o){var c,u,l,f=e.nodeType,p=r.$attr;switch(f){case 1:we(t,hn(u=ne(e)),"E",a,o);for(var d,h,v,m,y,g=e.attributes,b=0,k=g&&g.length;b<k;b++){var w,x=!1,S=!1,$=!1,_=!1,M=!1;h=(d=g[b]).name,m=d.value,(y=(v=hn(h.toLowerCase())).match(te))?($="Attr"===y[1],_="Prop"===y[1],M="On"===y[1],h=h.replace(pn,"").toLowerCase().substr(4+y[1].length).replace(/_(.)/g,(function(e,t){return t.toUpperCase()}))):(w=v.match(re))&&xe(w[1])&&(x=h,S=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6)),_||M?(r[v]=m,p[v]=d.name,_?Oe(e,t,v,h):Ie(t,v,h)):(p[v=hn(h.toLowerCase())]=h,!$&&r.hasOwnProperty(v)||(r[v]=m,Ot(e,v)&&(r[v]=!0)),Ee(e,t,m,v,$),we(t,v,"A",a,o,x,S))}if("input"===u&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!N)break;if(L(l=e.className)&&(l=l.animVal),B(l)&&""!==l)for(;c=s.exec(l);)we(t,v=hn(c[2]),"C",a,o)&&(r[v]=Q(c[3])),l=l.substr(c.index+c[0].length);break;case Ue:!function(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&ae.$$addBindingClass(t),function(e,t){var i=t.parent();n||ae.$$addBindingClass(i),ae.$$addBindingInfo(i,r.expressions),e.$watch(r,(function(e){t[0].nodeValue=e}))}}})}(t,e.nodeValue);break;case 8:if(!j)break;!function(e,t,n,r,a){try{var o=i.exec(e.nodeValue);if(o){var s=hn(o[1]);we(t,s,"M",r,a)&&(n[s]=Q(o[2]))}}catch(e){}}(e,t,r,a,o)}return t.sort(_e),t}function he(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw cn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1===e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0);else r.push(e);return o(r)}function ve(e,t,n){return function(r,i,a,o,s){return i=he(i[0],t,n),e(r,i,a,o,s)}}function me(e,t,n,r,i,a){var o;return e?ae(t,n,r,i,a):function(){return o||(o=ae(t,n,r,i,a),t=n=a=null),o.apply(this,arguments)}}function ye(t,n,r,i,a,s,c,u,l){l=l||{};for(var f,p,h,v,m,y=-Number.MAX_VALUE,g=l.newScopeDirective,b=l.controllerDirectives,k=l.newIsolateScopeDirective,w=l.templateDirective,S=l.nonTlbTranscludeDirective,$=!1,M=!1,C=l.hasElementTranscludeDirective,O=r.$$element=o(n),I=s,E=i,D=!1,R=!1,P=0,T=t.length;P<T;P++){var j=(f=t[P]).$$start,N=f.$$end;if(j&&(O=he(n,j,N)),h=void 0,y>f.priority)break;if((m=f.scope)&&(f.templateUrl||(L(m)?(Me("new/isolated scope",k||g,f,O),k=f):Me("new/isolated scope",k,f,O)),g=g||f),p=f.name,!D&&(f.replace&&(f.templateUrl||f.template)||f.transclude&&!f.$$tlb)){for(var U,B=P+1;U=t[B++];)if(U.transclude&&!U.$$tlb||U.replace&&(U.templateUrl||U.template)){R=!0;break}D=!0}if(!f.templateUrl&&f.controller&&(b=b||Ne(),Me("'"+p+"' controller",b[p],f,O),b[p]=f),m=f.transclude)if($=!0,f.$$tlb||(Me("transclusion",S,f,O),S=f),"element"===m)C=!0,y=f.priority,h=O,O=r.$$element=o(ae.$$createComment(p,r[p])),n=O[0],Re(a,fe(h),n),E=me(R,h,i,y,I&&I.name,{nonTlbTranscludeDirective:S});else{var H=Ne();if(L(m)){h=e.document.createDocumentFragment();var z=Ne(),W=Ne();for(var J in x(m,(function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,z[e]=t,H[t]=null,W[t]=n})),x(O.contents(),(function(t){var n=z[hn(ne(t))];n?(W[n]=!0,H[n]=H[n]||e.document.createDocumentFragment(),H[n].appendChild(t)):h.appendChild(t)})),x(W,(function(e,t){if(!e)throw cn("reqslot","Required transclusion slot `{0}` was not filled.",t)})),H)if(H[J]){var Y=o(H[J].childNodes);H[J]=me(R,Y,i)}h=o(h.childNodes)}else h=o(ct(n)).contents();O.empty(),(E=me(R,h,i,void 0,void 0,{needsNewScope:f.$$isolateScope||f.$$newScope})).$$slots=H}if(f.template)if(M=!0,Me("template",w,f,O),w=f,m=K(f.template)?f.template(O,r):f.template,m=ee(m),f.replace){if(I=f,h=rt(m)?[]:mn(Ce(f.templateNamespace,Q(m))),n=h[0],1!==h.length||1!==n.nodeType)throw cn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");Re(a,O,n);var Z={$attr:{}},X=de(n,[],Z),te=t.splice(P+1,t.length-(P+1));(k||g)&&be(X,k,g),t=t.concat(X).concat(te),Se(r,Z),T=t.length}else O.html(m);if(f.templateUrl)M=!0,Me("template",w,f,O),w=f,f.replace&&(I=f),oe=$e(t.splice(P,t.length-P),O,r,a,$&&E,c,u,{controllerDirectives:b,newScopeDirective:g!==f&&g,newIsolateScopeDirective:k,templateDirective:w,nonTlbTranscludeDirective:S}),T=t.length;else if(f.compile)try{v=f.compile(O,r,E);var re=f.$$originalDirective||f;K(v)?ie(null,pe(re,v),j,N):v&&ie(pe(re,v.pre),pe(re,v.post),j,N)}catch(e){d(e,ke(O))}f.terminal&&(oe.terminal=!0,y=Math.max(y,f.priority))}return oe.scope=g&&!0===g.scope,oe.transcludeOnThisElement=$,oe.templateOnThisElement=M,oe.transclude=E,l.hasElementTranscludeDirective=C,oe;function ie(e,t,n,r){e&&(n&&(e=ve(e,n,r)),e.require=f.require,e.directiveName=p,(k===f||f.$$isolateScope)&&(e=Te(e,{isolateScope:!0})),c.push(e)),t&&(n&&(t=ve(t,n,r)),t.require=f.require,t.directiveName=p,(k===f||f.$$isolateScope)&&(t=Te(t,{isolateScope:!0})),u.push(t))}function oe(e,t,i,a,s){var l,f,p,h,v,m,y,S,$,M;for(var O in n===i?($=r,S=r.$$element):$=new q(S=o(i),r),v=t,k?h=t.$new(!0):g&&(v=t.$parent),s&&((y=function(e,t,n,r){var i;G(e)||(r=n,n=t,t=e,e=void 0);C&&(i=m);n||(n=C?S.parent():S);if(!r)return s(e,t,i,n,R);var a=s.$$slots[r];if(a)return a(e,t,i,n,R);if(F(a))throw cn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,ke(S))}).$$boundTransclude=s,y.isSlotFilled=function(e){return!!s.$$slots[e]}),b&&(m=function(e,t,n,r,i,a,o){var s=Ne();for(var c in r){var u=r[c],l={$scope:u===o||u.$$isolateScope?i:a,$element:e,$attrs:t,$transclude:n},f=u.controller;"@"===f&&(f=t[u.name]);var p=_(f,l,!0,u.controllerAs);s[u.name]=p,e.data("$"+u.name+"Controller",p.instance)}return s}(S,$,y,b,h,t,k)),k&&(ae.$$addScopeInfo(S,h,!0,!(w&&(w===k||w===k.$$originalDirective))),ae.$$addScopeClass(S,!0),h.$$isolateBindings=k.$$isolateBindings,(M=Le(t,$,h,h.$$isolateBindings,k)).removeWatches&&h.$on("$destroy",M.removeWatches)),m){var I=b[O],E=m[O],D=I.$$bindings.bindToController;E.instance=E(),S.data("$"+I.name+"Controller",E.instance),E.bindingInfo=Le(v,$,E.instance,D,I)}for(x(b,(function(e,t){var n=e.require;e.bindToController&&!V(n)&&L(n)&&A(m[t].instance,ge(t,n,S,m))})),x(m,(function(e){var t=e.instance;if(K(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){d(e)}if(K(t.$onInit))try{t.$onInit()}catch(e){d(e)}K(t.$doCheck)&&(v.$watch((function(){t.$doCheck()})),t.$doCheck()),K(t.$onDestroy)&&v.$on("$destroy",(function(){t.$onDestroy()}))})),l=0,f=c.length;l<f;l++)je(p=c[l],p.isolateScope?h:t,S,$,p.require&&ge(p.directiveName,p.require,S,m),y);var R=t;for(k&&(k.template||null===k.templateUrl)&&(R=h),e&&e(R,i.childNodes,void 0,s),l=u.length-1;l>=0;l--)je(p=u[l],p.isolateScope?h:t,S,$,p.require&&ge(p.directiveName,p.require,S,m),y);x(m,(function(e){var t=e.instance;K(t.$postLink)&&t.$postLink()}))}}function ge(e,t,n,r){var i;if(B(t)){var a=t.match(u),o=t.substring(a[0].length),s=a[1]||a[3],c="?"===a[2];if("^^"===s?n=n.parent():i=(i=r&&r[o])&&i.instance,!i){var l="$"+o+"Controller";i="^^"===s&&n[0]&&9===n[0].nodeType?null:s?n.inheritedData(l):n.data(l)}if(!i&&!c)throw cn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,e)}else if(V(t)){i=[];for(var f=0,p=t.length;f<p;f++)i[f]=ge(e,t[f],n,r)}else L(t)&&(i={},x(t,(function(t,a){i[a]=ge(e,t,n,r)})));return i||null}function be(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=D(e[r],{$$isolateScope:t,$$newScope:n})}function we(e,n,i,a,o,s,c){if(n===o)return null;var u=null;if(r.hasOwnProperty(n))for(var l,f=t.get(n+"Directive"),p=0,d=f.length;p<d;p++)if(l=f[p],(F(a)||a>l.priority)&&-1!==l.restrict.indexOf(i)){if(s&&(l=D(l,{$$start:s,$$end:c})),!l.$$bindings){var h=l.$$bindings=v(l,l.name);L(h.isolateScope)&&(l.$$isolateBindings=h.isolateScope)}e.push(l),u=l}return u}function xe(e){if(r.hasOwnProperty(e))for(var n=t.get(e+"Directive"),i=0,a=n.length;i<a;i++)if(n[i].multiElement)return!0;return!1}function Se(e,t){var n=t.$attr,r=e.$attr;x(e,(function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r.length?r+=("style"===i?";":" ")+t[i]:r=t[i]),e.$set(i,r,!0,n[i]))})),x(t,(function(t,i){e.hasOwnProperty(i)||"$"===i.charAt(0)||(e[i]=t,"class"!==i&&"style"!==i&&(r[i]=n[i]))}))}function $e(e,t,n,r,i,a,s,c){var u,l,f=[],p=t[0],v=e.shift(),m=D(v,{templateUrl:null,transclude:null,replace:null,$$originalDirective:v}),y=K(v.templateUrl)?v.templateUrl(t,n):v.templateUrl,g=v.templateNamespace;return t.empty(),h(y).then((function(d){var h,b,k,w;if(d=ee(d),v.replace){if(k=rt(d)?[]:mn(Ce(g,Q(d))),h=k[0],1!==k.length||1!==h.nodeType)throw cn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",v.name,y);b={$attr:{}},Re(r,t,h);var S=de(h,[],b);L(v.scope)&&be(S,!0),e=S.concat(e),Se(n,b)}else h=p,t.html(d);for(e.unshift(m),u=ye(e,h,n,i,t,v,a,s,c),x(r,(function(e,n){e===h&&(r[n]=t[0])})),l=ce(t[0].childNodes,i);f.length;){var $=f.shift(),_=f.shift(),M=f.shift(),C=f.shift(),A=t[0];if(!$.$$destroyed){if(_!==p){var O=_.className;c.hasElementTranscludeDirective&&v.replace||(A=ct(h)),Re(M,o(_),A),J(o(A),O)}w=u.transcludeOnThisElement?le($,u.transclude,C):C,u(l,$,A,r,w)}}f=null})).catch((function(e){W(e)&&d(e)})),function(e,t,n,r,i){var a=i;t.$$destroyed||(f?f.push(t,n,r,a):(u.transcludeOnThisElement&&(a=le(t,u.transclude,i)),u(l,t,n,r,a)))}}function _e(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function Me(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw cn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,ke(r))}function Ce(t,n){switch(t=f(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function Ae(e){return z(C.valueOf(e),"ng-prop-srcset")}function Oe(e,t,n,r){if(p.test(r))throw cn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var i=ne(e),a=function(e,t){var n=t.toLowerCase();return S[e+"|"+n]||S["*|"+n]}(i,r),o=P;"srcset"!==r||"img"!==i&&"source"!==i?a&&(o=C.getTrusted.bind(C,a)):o=Ae,t.push({priority:100,compile:function(e,t){var i=$(t[n]),a=$(t[n],(function(e){return C.valueOf(e)}));return{pre:function(e,t){function n(){var n=i(e);t[0][r]=o(n)}n(),e.$watch(a,n)}}}})}function Ie(e,t,n){e.push(Ma($,M,d,t,n,!1))}function Ee(e,t,r,i,a){var o=ne(e),s=function(e,t){return"srcdoc"===t?C.HTML:"src"===t||"ngSrc"===t?-1===["img","video","audio","source","track"].indexOf(e)?C.RESOURCE_URL:C.MEDIA_URL:"xlinkHref"===t?"image"===e?C.MEDIA_URL:"a"===e?C.URL:C.RESOURCE_URL:"form"===e&&"action"===t||"base"===e&&"href"===t||"link"===e&&"href"===t?C.RESOURCE_URL:"a"!==e||"href"!==t&&"ngHref"!==t?void 0:C.URL}(o,i),u=!a,l=c[i]||a,f=n(r,u,s,l);if(f){if("multiple"===i&&"select"===o)throw cn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",ke(e));if(p.test(i))throw cn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");t.push({priority:100,compile:function(){return{pre:function(e,t,a){var o=a.$$observers||(a.$$observers=Ne()),c=a[i];c!==r&&(f=c&&n(c,!0,s,l),r=c),f&&(a[i]=f(e),(o[i]||(o[i]=[])).$$inter=!0,(a.$$observers&&a.$$observers[i].$$scope||e).$watch(f,(function(e,t){"class"===i&&e!==t?a.$updateClass(e,t):a.$set(i,e)})))}}}})}}function Re(t,n,r){var i,a,s=n[0],c=n.length,u=s.parentNode;if(t)for(i=0,a=t.length;i<a;i++)if(t[i]===s){t[i++]=r;for(var l=i,f=l+c-1,p=t.length;l<p;l++,f++)f<p?t[l]=t[f]:delete t[l];t.length-=c-1,t.context===s&&(t.context=r);break}u&&u.replaceChild(r,s);var d=e.document.createDocumentFragment();for(i=0;i<c;i++)d.appendChild(n[i]);for(o.hasData(s)&&(o.data(r,o.data(s)),o(s).off("$destroy")),o.cleanData(d.querySelectorAll("*")),i=1;i<c;i++)delete n[i];n[0]=r,n.length=1}function Te(e,t){return A((function(){return e.apply(null,arguments)}),e,t)}function je(e,t,n,r,i,a){try{e(t,n,r,i,a)}catch(e){d(e,ke(n))}}function Fe(e,t){if(g)throw cn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}function Le(e,t,r,i,a){var o,s=[],c={};function u(t,n,i){K(r.$onChanges)&&!oe(n,i)&&(I||(e.$$postDigest(H),I=[]),o||(o={},I.push(f)),o[t]&&(i=o[t].previousValue),o[t]=new fn(i,n))}function f(){r.$onChanges(o),o=void 0}return x(i,(function(i,o){var f,p,d,h,v,m=i.attrName,y=i.optional;switch(i.mode){case"@":y||l.call(t,m)||(Fe(m,a.name),r[o]=t[m]=void 0),v=t.$observe(m,(function(e){if(B(e)||Y(e)){var t=r[o];u(o,e,t),r[o]=e}})),t.$$observers[m].$$scope=e,B(f=t[m])?r[o]=n(f)(e):Y(f)&&(r[o]=f),c[o]=new fn(un,r[o]),s.push(v);break;case"=":if(!l.call(t,m)){if(y)break;Fe(m,a.name),t[m]=void 0}if(y&&!t[m])break;p=$(t[m]),h=p.literal?se:oe,d=p.assign||function(){throw f=r[o]=p(e),cn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[m],m,a.name)},f=r[o]=p(e);var g=function(t){return h(t,r[o])||(h(t,f)?d(e,t=r[o]):r[o]=t),f=t};g.$stateful=!0,v=i.collection?e.$watchCollection(t[m],g):e.$watch($(t[m],g),null,p.literal),s.push(v);break;case"<":if(!l.call(t,m)){if(y)break;Fe(m,a.name),t[m]=void 0}if(y&&!t[m])break;var b=(p=$(t[m])).literal,k=r[o]=p(e);c[o]=new fn(un,r[o]),v=e[i.collection?"$watchCollection":"$watch"](p,(function(e,t){if(t===e){if(t===k||b&&se(t,k))return;t=k}u(o,e,t),r[o]=e})),s.push(v);break;case"&":if(y||l.call(t,m)||Fe(m,a.name),(p=t.hasOwnProperty(m)?$(t[m]):R)===R&&y)break;r[o]=function(t){return p(e,t)}}})),{initialChanges:c,removeWatches:s.length&&function(){for(var e=0,t=s.length;e<t;++e)s[e]()}}}}]}function fn(e,t){this.previousValue=e,this.currentValue=t}ln.$inject=["$provide","$$sanitizeUriProvider"],fn.prototype.isFirstChange=function(){return this.previousValue===un};var pn=/^((?:x|data)[:\-_])/i,dn=/[:\-_]+(.)/g;function hn(e){return e.replace(pn,"").replace(dn,(function(e,t,n){return n?t.toUpperCase():t}))}function vn(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o===i[s])continue e;n+=(n.length>0?" ":"")+o}return n}function mn(e){var t=(e=o(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(8===n.nodeType||n.nodeType===Ue&&""===n.nodeValue.trim())&&h.call(e,t,1)}return e}var yn=i("$controller"),gn=/^(\S+)(\s+as\s+([\w$]+))?$/;function bn(e,t){if(t&&B(t))return t;if(B(e)){var n=gn.exec(e);if(n)return n[3]}}function kn(){var e={};this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){je(t,"controller"),L(t)?A(e,t):e[t]=n},this.$get=["$injector",function(t){return function(r,i,a,o){var s,c,u,l;if(a=!0===a,o&&B(o)&&(l=o),B(r)){if(!(c=r.match(gn)))throw yn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(u=c[1],l=l||c[3],!(r=e.hasOwnProperty(u)?e[u]:function(e,t,n){if(!t)return e;for(var r,i=t.split("."),a=e,o=i.length,s=0;s<o;s++)r=i[s],e&&(e=(a=e)[r]);return!n&&K(e)?pe(a,e):e}(i.$scope,u,!0)))throw yn("ctrlreg","The controller with the name '{0}' is not registered.",u);Te(r,u,!0)}if(a){var f=(V(r)?r[r.length-1]:r).prototype;return s=Object.create(f||null),l&&n(i,l,s,u||r.name),A((function(){var e=t.invoke(r,s,i,u);return e!==s&&(L(e)||K(e))&&(s=e,l&&n(i,l,s,u||r.name)),s}),{instance:s,identifier:l})}return s=t.instantiate(r,i,u),l&&n(i,l,s,u||r.name),s};function n(e,t,n,r){if(!e||!L(e.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);e.$scope[t]=n}}]}function wn(){this.$get=["$window",function(e){return o(e.document)}]}function xn(){this.$get=["$document","$rootScope",function(e,t){var n=e[0],r=n&&n.hidden;function i(){r=n.hidden}return e.on("visibilitychange",i),t.$on("$destroy",(function(){e.off("visibilitychange",i)})),function(){return r}}]}function Sn(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}var $n=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof o&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},_n={"Content-Type":"application/json;charset=utf-8"},Mn=/^\[|^\{(?!\{)/,Cn={"[":/]$/,"{":/}$/},An=/^\)]\}',?\n/,On=i("$http");function In(e){return L(e)?z(e)?e.toISOString():he(e):e}function En(){this.$get=function(){return function(e){if(!e)return"";var t=[];return S(e,(function(e,n){null===e||F(e)||K(e)||(V(e)?x(e,(function(e){t.push($e(n)+"="+$e(In(e)))})):t.push($e(n)+"="+$e(In(e))))})),t.join("&")}}}function Dn(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function e(n,r,i){V(n)?x(n,(function(t,n){e(t,r+"["+(L(t)?n:"")+"]")})):L(n)&&!z(n)?S(n,(function(t,n){e(t,r+(i?"":"[")+n+(i?"":"]"))})):(K(n)&&(n=n()),t.push($e(r)+"="+(null==n?"":$e(In(n)))))}(e,"",!0),t.join("&")}}}function Rn(e,t){if(B(e)){var n=e.replace(An,"").trim();if(n){var r=t("Content-Type"),i=r&&0===r.indexOf("application/json");if(i||(o=(a=n).match(Mn))&&Cn[o[0]].test(a))try{e=ve(n)}catch(t){if(!i)return e;throw On("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',e,t)}}}var a,o;return e}function Pn(e){var t,n=Ne();function r(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}return B(e)?x(e.split("\n"),(function(e){t=e.indexOf(":"),r(f(Q(e.substr(0,t))),Q(e.substr(t+1)))})):L(e)&&x(e,(function(e,t){r(f(t),Q(e))})),n}function Tn(e){var t;return function(n){if(t||(t=Pn(e)),n){var r=t[f(n)];return void 0===r&&(r=null),r}return t}}function jn(e,t,n,r){return K(r)?r(e,t,n):(x(r,(function(r){e=r(e,t,n)})),e)}function Fn(e){return 200<=e&&e<300}function Nn(){var e=this.defaults={transformResponse:[Rn],transformRequest:[function(e){return!L(e)||(t=e,"[object File]"===m.call(t))||function(e){return"[object Blob]"===m.call(e)}(e)||function(e){return"[object FormData]"===m.call(e)}(e)?e:he(e);var t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Be(_n),put:Be(_n),patch:Be(_n)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},t=!1;this.useApplyAsync=function(e){return N(e)?(t=!!e,this):t};var n=this.interceptors=[],r=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(a,o,s,c,u,l,d,h){var v=c("$http");e.paramSerializer=B(e.paramSerializer)?d.get(e.paramSerializer):e.paramSerializer;var m=[];x(n,(function(e){m.unshift(B(e)?d.get(e):d.invoke(e))}));var y,g=(y=[ti].concat(r.map(ri)),function(e){var t=ri(e);return y.some(ii.bind(null,t))});function b(n){if(!L(n))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!B(h.valueOf(n.url)))throw i("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var r=A({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},n);r.headers=function(t){var n,r,i,a=e.headers,o=A({},t.headers);a=A({},a.common,a[f(t.method)]);e:for(n in a){for(i in r=f(n),o)if(f(i)===r)continue e;o[n]=a[n]}return function(e,t){var n,r={};return x(e,(function(e,i){K(e)?null!=(n=e(t))&&(r[i]=n):r[i]=e})),r}(o,Be(t))}(n),r.method=p(r.method),r.paramSerializer=B(r.paramSerializer)?d.get(r.paramSerializer):r.paramSerializer,a.$$incOutstandingRequestCount("$http");var c=[],y=[],k=l.resolve(r);return x(m,(function(e){(e.request||e.requestError)&&c.unshift(e.request,e.requestError),(e.response||e.responseError)&&y.push(e.response,e.responseError)})),k=w(k,c),k=(k=w(k=k.then((function(n){var r=n.headers,i=jn(n.data,Tn(r),void 0,n.transformRequest);F(i)&&x(r,(function(e,t){"content-type"===f(t)&&delete r[t]}));F(n.withCredentials)&&!F(e.withCredentials)&&(n.withCredentials=e.withCredentials);return function(n,r){var i,a,c=l.defer(),p=c.promise,d=n.headers,m="jsonp"===f(n.method),y=n.url;m?y=h.getTrustedResourceUrl(y):B(y)||(y=h.valueOf(y));y=function(e,t){t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t);return e}(y,n.paramSerializer(n.params)),m&&(y=function(e,t){var n=e.split("?");if(n.length>2)throw On("badjsonp",'Illegal use more than one "?", in url, "{1}"',e);return x(xe(n[1]),(function(n,r){if("JSON_CALLBACK"===n)throw On("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);if(r===t)throw On("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e)})),e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}(y,n.jsonpCallbackParam));b.pendingRequests.push(n),p.then(_,_),!n.cache&&!e.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=L(n.cache)?n.cache:L(e.cache)?e.cache:v);i&&(N(a=i.get(y))?Z(a)?a.then($,$):V(a)?S(a[1],a[0],Be(a[2]),a[3],a[4]):S(a,200,{},"OK","complete"):i.put(y,p));if(F(a)){var k=g(n.url)?s()[n.xsrfCookieName||e.xsrfCookieName]:void 0;k&&(d[n.xsrfHeaderName||e.xsrfHeaderName]=k),o(n.method,y,r,(function(e,n,r,a,o){i&&(Fn(e)?i.put(y,[e,n,Pn(r),a,o]):i.remove(y));function s(){S(n,e,r,a,o)}t?u.$applyAsync(s):(s(),u.$$phase||u.$apply())}),d,n.timeout,n.withCredentials,n.responseType,w(n.eventHandlers),w(n.uploadEventHandlers))}return p;function w(e){if(e){var n={};return x(e,(function(e,r){n[r]=function(n){function r(){e(n)}t?u.$applyAsync(r):u.$$phase?r():u.$apply(r)}})),n}}function S(e,t,r,i,a){(Fn(t=t>=-1?t:0)?c.resolve:c.reject)({data:e,status:t,headers:Tn(r),config:n,statusText:i,xhrStatus:a})}function $(e){S(e.data,e.status,Be(e.headers()),e.statusText,e.xhrStatus)}function _(){var e=b.pendingRequests.indexOf(n);-1!==e&&b.pendingRequests.splice(e,1)}}(n,i).then(S,S)})),y)).finally((function(){a.$$completeOutstandingRequest(R,"$http")}));function w(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],a=t[n++];e=e.then(i,a)}return t.length=0,e}function S(e){var t=A({},e);return t.data=jn(e.data,e.headers,e.status,r.transformResponse),Fn(e.status)?t:l.reject(t)}}return b.pendingRequests=[],function(e){x(arguments,(function(e){b[e]=function(t,n){return b(A({},n||{},{method:e,url:t}))}}))}("get","delete","head","jsonp"),function(e){x(arguments,(function(e){b[e]=function(t,n,r){return b(A({},r||{},{method:e,url:t,data:n}))}}))}("post","put","patch"),b.defaults=e,b}]}function Ln(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Un(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return function(e,t,n,r,i){return function(a,o,s,c,u,l,p,d,h,v){if(o=o||e.url(),"jsonp"===f(a))var m=r.createCallback(o),y=function(e,t,n){e=e.replace("JSON_CALLBACK",t);var a=i.createElement("script"),o=null;return a.type="text/javascript",a.src=e,a.async=!0,o=function(e){a.removeEventListener("load",o),a.removeEventListener("error",o),i.body.removeChild(a),a=null;var s=-1,c="unknown";e&&("load"!==e.type||r.wasCalled(t)||(e={type:"error"}),c=e.type,s="error"===e.type?404:200),n&&n(s,c)},a.addEventListener("load",o),a.addEventListener("error",o),i.body.appendChild(a),o}(o,m,(function(e,t){var n=200===e&&r.getResponse(m);S(c,e,n,"",t,"complete"),r.removeCallback(m)}));else{var g=t(a,o),b=!1;g.open(a,o,!0),x(u,(function(e,t){N(e)&&g.setRequestHeader(t,e)})),g.onload=function(){var e=g.statusText||"",t="response"in g?g.response:g.responseText,n=1223===g.status?204:g.status;0===n&&(n=t?200:"file"===ri(o).protocol?404:0),S(c,n,t,g.getAllResponseHeaders(),e,"complete")};if(g.onerror=function(){S(c,-1,null,null,"","error")},g.ontimeout=function(){S(c,-1,null,null,"","timeout")},g.onabort=function(){S(c,-1,null,null,"",b?"timeout":"abort")},x(h,(function(e,t){g.addEventListener(t,e)})),x(v,(function(e,t){g.upload.addEventListener(t,e)})),p&&(g.withCredentials=!0),d)try{g.responseType=d}catch(e){if("json"!==d)throw e}g.send(F(s)?null:s)}if(l>0)var k=n((function(){w("timeout")}),l);else Z(l)&&l.then((function(){w(N(l.$$timeoutId)?"timeout":"abort")}));function w(e){b="timeout"===e,y&&y(),g&&g.abort()}function S(e,t,r,i,a,o){N(k)&&n.cancel(k),y=g=null,e(t,r,i,a,o)}}}(e,r,e.defer,t,n[0])}]}var Bn=b.$interpolateMinErr=i("$interpolate");function Hn(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var a=e.length,o=t.length,s=new RegExp(e.replace(/./g,u),"g"),c=new RegExp(t.replace(/./g,u),"g");function u(e){return"\\\\\\"+e}function l(n){return n.replace(s,e).replace(c,t)}function f(e,t,n,r){var i=e.$watch((function(e){return i(),r(e)}),t,n);return i}function p(s,c,u,p){var d=u===i.URL||u===i.MEDIA_URL;if(!s.length||-1===s.indexOf(e)){if(c)return;var h=l(s);d&&(h=i.getTrusted(u,h));var v=T(h);return v.exp=s,v.expressions=[],v.$$watchDelegate=f,v}p=!!p;for(var m,y,g,b,k,w=0,x=[],S=s.length,$=[],_=[];w<S;){if(-1===(m=s.indexOf(e,w))||-1===(y=s.indexOf(t,m+a))){w!==S&&$.push(l(s.substring(w)));break}w!==m&&$.push(l(s.substring(w,m))),b=s.substring(m+a,y),x.push(b),w=y+o,_.push($.length),$.push("")}k=1===$.length&&1===_.length;var M=d&&k?void 0:function(e){try{return e=u&&!d?i.getTrusted(u,e):i.valueOf(e),p&&!N(e)?e:Le(e)}catch(e){r(Bn.interr(s,e))}};if(g=x.map((function(e){return n(e,M)})),!c||x.length){var C=function(e){for(var t=0,n=x.length;t<n;t++){if(p&&F(e[t]))return;$[_[t]]=e[t]}return d?i.getTrusted(u,k?$[0]:$.join("")):(u&&$.length>1&&Bn.throwNoconcat(s),$.join(""))};return A((function(e){var t=0,n=x.length,i=new Array(n);try{for(;t<n;t++)i[t]=g[t](e);return C(i)}catch(e){r(Bn.interr(s,e))}}),{exp:s,expressions:x,$$watchDelegate:function(e,t){var n;return e.$watchGroup(g,(function(r,i){var a=C(r);t.call(this,a,r!==i?n:a,e),n=a}))}})}}return p.startSymbol=function(){return e},p.endSymbol=function(){return t},p}]}Bn.throwNoconcat=function(e){throw Bn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},Bn.interr=function(e,t){return Bn("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var zn=i("$interval");function Vn(){this.$get=["$$intervalFactory","$window",function(e,t){var n={},r=function(e){t.clearInterval(e),delete n[e]},i=e((function(e,r,i){var a=t.setInterval(e,r);return n[a]=i,a}),r);return i.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$intervalId"))throw zn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(e.$$intervalId))return!1;var t=e.$$intervalId,i=n[t];return Pr(i.promise),i.reject("canceled"),r(t),!0},i}]}function Wn(){this.$get=["$browser","$q","$$q","$rootScope",function(e,t,n,r){return function(i,a){return function(o,s,c,u){var l=arguments.length>4,f=l?fe(arguments,4):[],p=0,d=N(u)&&!u,h=(d?n:t).defer(),v=h.promise;function m(){l?o.apply(null,f):o(p)}function y(){d?e.defer(m):r.$evalAsync(m),h.notify(p++),c>0&&p>=c&&(h.resolve(p),a(v.$$intervalId)),d||r.$apply()}return c=N(c)?c:0,v.$$intervalId=i(y,s,h,d),v}}}]}var Kn=function(){this.$get=function(){var e=b.callbacks,t={};return{createCallback:function(n){var r="_"+(e.$$counter++).toString(36),i="angular.callbacks."+r,a=function(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}(r);return t[i]=e[r]=a,i},wasCalled:function(e){return t[e].called},getResponse:function(e){return t[e].data},removeCallback:function(n){var r=t[n];delete e[r.id],delete t[n]}}}},qn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Jn={http:80,https:443,ftp:21},Gn=i("$location");function Yn(e,t,n){var r,i=(r=[],x(t,(function(e,t){V(e)?x(e,(function(e){r.push($e(t,!0)+(!0===e?"":"="+$e(e,!0)))})):r.push($e(t,!0)+(!0===e?"":"="+$e(e,!0)))})),r.length?r.join("&"):""),a=n?"#"+Se(n):"";return function(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=Se(t[n].replace(/%2F/g,"/"));return t.join("/")}(e)+(i?"?"+i:"")+a}function Zn(e,t){var n=ri(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=I(n.port)||Jn[n.protocol]||null}var Xn=/^\s*[\\/]{2,}/;function Qn(e,t,n){if(Xn.test(e))throw Gn("badpath",'Invalid url "{0}".',e);var r="/"!==e.charAt(0);r&&(e="/"+e);var i=ri(e),a=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;t.$$path=function(e,t){for(var n=e.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),t&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(a,n),t.$$search=xe(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function er(e,t){return e.slice(0,t.length)===t}function tr(e,t){if(er(t,e))return t.substr(e.length)}function nr(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function rr(e,t,n){this.$$html5=!0,n=n||"",Zn(e,this),this.$$parse=function(e){var n=tr(t,e);if(!B(n))throw Gn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Qn(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(e){return t+e.substr(1)},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(N(a=tr(e,r))?(o=a,s=n&&N(a=tr(n,a))?t+(tr("/",a)||a):e+o):N(a=tr(t,r))?s=t+a:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s);var a,o,s}}function ir(e,t,n){Zn(e,this),this.$$parse=function(r){var i,a=tr(e,r)||tr(t,r);F(a)||"#"!==a.charAt(0)?this.$$html5?i=a:(i="",F(a)&&(e=r,this.replace())):F(i=tr(n,a))&&(i=a),Qn(i,this,!1),this.$$path=function(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;er(t,n)&&(t=t.replace(n,""));if(i.exec(t))return e;return(r=i.exec(e))?r[1]:e}(this.$$path,i,e),this.$$compose()},this.$$normalizeUrl=function(t){return e+(t?n+t:"")},this.$$parseLinkUrl=function(t,n){return nr(e)===nr(t)&&(this.$$parse(t),!0)}}function ar(e,t,n){this.$$html5=!0,ir.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(e===nr(r)?a=r:(o=tr(t,r))?a=e+n+o:t===r+"/"&&(a=t),a&&this.$$parse(a),!!a);var a,o},this.$$normalizeUrl=function(t){return e+n+t}}var or={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=Yn(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:sr("$$absUrl"),url:function(e){if(F(e))return this.$$url;var t=qn.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:sr("$$protocol"),host:sr("$$host"),port:sr("$$port"),path:cr("$$path",(function(e){return"/"===(e=null!==e?e.toString():"").charAt(0)?e:"/"+e})),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(B(e)||H(e))e=e.toString(),this.$$search=xe(e);else{if(!L(e))throw Gn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");x(e=ae(e,{}),(function(t,n){null==t&&delete e[n]})),this.$$search=e}break;default:F(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:cr("$$hash",(function(e){return null!==e?e.toString():""})),replace:function(){return this.$$replace=!0,this}};function sr(e){return function(){return this[e]}}function cr(e,t){return function(n){return F(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function ur(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return N(t)?(e=t,this):e},this.html5Mode=function(e){return Y(e)?(t.enabled=e,this):L(e)?(Y(e.enabled)&&(t.enabled=e.enabled),Y(e.requireBase)&&(t.requireBase=e.requireBase),(Y(e.rewriteLinks)||B(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,a,s){var c,u,l,f,p=r.baseHref(),d=r.url();if(t.enabled){if(!p&&t.requireBase)throw Gn("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=(f=d).substring(0,f.indexOf("/",f.indexOf("//")+2))+(p||"/"),u=i.history?rr:ar}else l=nr(d),u=ir;var h=function(e){return e.substr(0,nr(e).lastIndexOf("/")+1)}(l);(c=new u(l,h,"#"+e)).$$parseLinkUrl(d,d),c.$$state=r.state();var v=/^\s*(javascript|mailto):/i;function m(e,t,n){var i=c.url(),a=c.$$state;try{r.url(e,t,n),c.$$state=r.state()}catch(e){throw c.url(i),c.$$state=a,e}}a.on("click",(function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=o(e.target);"a"!==ne(s[0]);)if(s[0]===a[0]||!(s=s.parent())[0])return;if(!B(i)||!F(s.attr(i))){var u=s.prop("href"),l=s.attr("href")||s.attr("xlink:href");L(u)&&"[object SVGAnimatedString]"===u.toString()&&(u=ri(u.animVal).href),v.test(u)||!u||s.attr("target")||e.isDefaultPrevented()||c.$$parseLinkUrl(u,l)&&(e.preventDefault(),c.absUrl()!==r.url()&&n.$apply())}}})),c.absUrl()!==d&&r.url(c.absUrl(),!0);var y=!0;return r.onUrlChange((function(e,t){er(e,h)?(n.$evalAsync((function(){var r,i=c.absUrl(),a=c.$$state;c.$$parse(e),c.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,a).defaultPrevented,c.absUrl()===e&&(r?(c.$$parse(i),c.$$state=a,m(i,!1,a)):(y=!1,g(i,a)))})),n.$$phase||n.$digest()):s.location.href=e})),n.$watch((function(){if(y||c.$$urlUpdatedByLocation){c.$$urlUpdatedByLocation=!1;var e=r.url(),t=c.absUrl(),a=r.state(),o=c.$$replace,s=!((u=e)===(l=t)||ri(u).href===ri(l).href)||c.$$html5&&i.history&&a!==c.$$state;(y||s)&&(y=!1,n.$evalAsync((function(){var t=c.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,c.$$state,a).defaultPrevented;c.absUrl()===t&&(r?(c.$$parse(e),c.$$state=a):(s&&m(t,o,a===c.$$state?null:c.$$state),g(e,a)))})))}var u,l;c.$$replace=!1})),c;function g(e,t){n.$broadcast("$locationChangeSuccess",c.absUrl(),e,c.$$state,t)}}]}function lr(){var e=!0,t=this;this.debugEnabled=function(t){return N(t)?(e=t,this):e},this.$get=["$window",function(n){var r,i=a||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:s("log"),info:s("info"),warn:s("warn"),error:s("error"),debug:(r=s("debug"),function(){e&&r.apply(t,arguments)})};function o(e){return W(e)&&(e.stack&&i?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function s(e){var t=n.console||{},r=t[e]||t.log||R;return function(){var e=[];return x(arguments,(function(t){e.push(o(t))})),Function.prototype.apply.call(r,t,e)}}}]}x([ar,ir,rr],(function(e){e.prototype=Object.create(or),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==rr||!this.$$html5)throw Gn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=F(t)?null:t,this.$$urlUpdatedByLocation=!0,this}}));var fr=i("$parse"),pr={}.constructor.prototype.valueOf;function dr(e){return e+""}var hr=Ne();x("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(e){hr[e]=!0}));var vr={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},mr=function(e){this.options=e};mr.prototype={constructor:mr,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=hr[t],a=hr[n],o=hr[r];if(i||a||o){var s=o?r:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||"Â "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=N(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw fr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=f(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{n+=vr[a]||a}i=!1}else if("\\"===a)i=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var yr=function(e,t){this.lexer=e,this.options=t};function gr(e,t){return void 0!==e?e:t}function br(e,t){return void 0===e?t:void 0===t?e:e+t}yr.Program="Program",yr.ExpressionStatement="ExpressionStatement",yr.AssignmentExpression="AssignmentExpression",yr.ConditionalExpression="ConditionalExpression",yr.LogicalExpression="LogicalExpression",yr.BinaryExpression="BinaryExpression",yr.UnaryExpression="UnaryExpression",yr.CallExpression="CallExpression",yr.MemberExpression="MemberExpression",yr.Identifier="Identifier",yr.Literal="Literal",yr.ArrayExpression="ArrayExpression",yr.Property="Property",yr.ObjectExpression="ObjectExpression",yr.ThisExpression="ThisExpression",yr.LocalsExpression="LocalsExpression",yr.NGValueParameter="NGValueParameter",yr.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:yr.Program,body:e}},expressionStatement:function(){return{type:yr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!xr(e))throw fr("lval","Trying to assign a value to a non l-value");e={type:yr.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:yr.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:yr.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:yr.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:yr.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:yr.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:yr.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:yr.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:yr.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=ae(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:yr.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:yr.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:yr.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:yr.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:yr.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:yr.Identifier,name:e.text}},constant:function(){return{type:yr.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:yr.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:yr.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:yr.ObjectExpression,properties:t}},throwError:function(e,t){throw fr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw fr("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw fr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return a}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:yr.ThisExpression},$locals:{type:yr.LocalsExpression}}};function kr(e,t,n){var r,i,a,o=e.isPure=function(e,t){switch(e.type){case yr.MemberExpression:if(e.computed)return!1;break;case yr.UnaryExpression:return 1;case yr.BinaryExpression:return"+"!==e.operator&&1;case yr.CallExpression:return!1}return void 0===t?2:t}(e,n);switch(e.type){case yr.Program:r=!0,x(e.body,(function(e){kr(e.expression,t,o),r=r&&e.expression.constant})),e.constant=r;break;case yr.Literal:e.constant=!0,e.toWatch=[];break;case yr.UnaryExpression:kr(e.argument,t,o),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case yr.BinaryExpression:kr(e.left,t,o),kr(e.right,t,o),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case yr.LogicalExpression:kr(e.left,t,o),kr(e.right,t,o),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case yr.ConditionalExpression:kr(e.test,t,o),kr(e.alternate,t,o),kr(e.consequent,t,o),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case yr.Identifier:e.constant=!1,e.toWatch=[e];break;case yr.MemberExpression:kr(e.object,t,o),e.computed&&kr(e.property,t,o),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=e.constant?[]:[e];break;case yr.CallExpression:a=!!e.filter&&function(e,t){return!e(t).$stateful}(t,e.callee.name),r=a,i=[],x(e.arguments,(function(e){kr(e,t,o),r=r&&e.constant,i.push.apply(i,e.toWatch)})),e.constant=r,e.toWatch=a?i:[e];break;case yr.AssignmentExpression:kr(e.left,t,o),kr(e.right,t,o),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case yr.ArrayExpression:r=!0,i=[],x(e.elements,(function(e){kr(e,t,o),r=r&&e.constant,i.push.apply(i,e.toWatch)})),e.constant=r,e.toWatch=i;break;case yr.ObjectExpression:r=!0,i=[],x(e.properties,(function(e){kr(e.value,t,o),r=r&&e.value.constant,i.push.apply(i,e.value.toWatch),e.computed&&(kr(e.key,t,!1),r=r&&e.key.constant,i.push.apply(i,e.key.toWatch))})),e.constant=r,e.toWatch=i;break;case yr.ThisExpression:case yr.LocalsExpression:e.constant=!1,e.toWatch=[]}}function wr(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function xr(e){return e.type===yr.Identifier||e.type===yr.MemberExpression}function Sr(e){if(1===e.body.length&&xr(e.body[0].expression))return{type:yr.AssignmentExpression,left:e.body[0].expression,right:{type:yr.NGValueParameter},operator:"="}}function $r(e){this.$filter=e}function _r(e){this.$filter=e}function Mr(e,t,n){this.ast=new yr(e,n),this.astCompiler=n.csp?new _r(t):new $r(t)}function Cr(e){return K(e.valueOf)?e.valueOf():pr.call(e)}function Ar(){var e,t,n=Ne(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){r[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(i){var a={csp:ce().noUnsafeEval,literals:ae(r),isIdentifierStart:K(e)&&e,isIdentifierContinue:K(t)&&t};return o.$$getAst=function(e){return new Mr(new mr(a),i,a).getAst(e).ast},o;function o(e,t){var r,o;switch(typeof e){case"string":if(e=e.trim(),!(r=n[o=e]))r=new Mr(new mr(a),i,a).parse(e),n[o]=p(r);return d(r,t);case"function":return d(e,t);default:return d(R,t)}}function s(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=Cr(e))&&!n)&&(e===t||e!=e&&t!=t)}function c(e,t,n,r,i){var a,o=r.inputs;if(1===o.length){var c=s;return o=o[0],e.$watch((function(e){var t=o(e);return s(t,c,o.isPure)||(a=r(e,void 0,void 0,[t]),c=t&&Cr(t)),a}),t,n,i)}for(var u=[],l=[],f=0,p=o.length;f<p;f++)u[f]=s,l[f]=null;return e.$watch((function(e){for(var t=!1,n=0,i=o.length;n<i;n++){var c=o[n](e);(t||(t=!s(c,u[n],o[n].isPure)))&&(l[n]=c,u[n]=c&&Cr(c))}return t&&(a=r(e,void 0,void 0,l)),a}),t,n,i)}function u(e,t,n,r,i){var a,o,s=r.literal?l:N,c=r.$$intercepted||r,u=r.$$interceptor||P,f=r.inputs&&!c.inputs;return h.literal=r.literal,h.constant=r.constant,h.inputs=r.inputs,p(h),a=e.$watch(h,t,n,i);function d(){s(o)&&a()}function h(e,t,n,r){return o=f&&r?r[0]:c(e,t,n,r),s(o)&&e.$$postDigest(d),u(o)}}function l(e){var t=!0;return x(e,(function(e){N(e)||(t=!1)})),t}function f(e,t,n,r){var i=e.$watch((function(e){return i(),r(e)}),t,n);return i}function p(e){return e.constant?e.$$watchDelegate=f:e.oneTime?e.$$watchDelegate=u:e.inputs&&(e.$$watchDelegate=c),e}function d(e,t){if(!t)return e;e.$$interceptor&&(t=function(e,t){function n(n){return t(e(n))}return n.$stateful=e.$stateful||t.$stateful,n.$$pure=e.$$pure&&t.$$pure,n}(e.$$interceptor,t),e=e.$$intercepted);var n=!1,r=function(r,i,a,o){var s=n&&o?o[0]:e(r,i,a,o);return t(s)};return r.$$intercepted=e,r.$$interceptor=t,r.literal=e.literal,r.oneTime=e.oneTime,r.constant=e.constant,t.$stateful||(n=!e.inputs,r.inputs=e.inputs?e.inputs:[e],t.$$pure||(r.inputs=r.inputs.map((function(e){return 2===e.isPure?function(t){return e(t)}:e})))),p(r)}}]}function Or(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return Er((function(e){t.$evalAsync(e)}),n,e)}],this.errorOnUnhandledRejections=function(t){return N(t)?(e=t,this):e}}function Ir(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return Er((function(e){t.defer(e)}),n,e)}],this.errorOnUnhandledRejections=function(t){return N(t)?(e=t,this):e}}function Er(e,t,n){var r=i("$q",TypeError),a=0,o=[];function s(){return new c}function c(){var e=this.promise=new u;this.resolve=function(t){p(e,t)},this.reject=function(t){d(e,t)},this.notify=function(t){v(e,t)}}function u(){this.$$state={status:0}}function l(){for(;!a&&o.length;){var e=o.shift();if(!Dr(e)){Rr(e);var n="Possibly unhandled rejection: "+He(e.value);W(e.value)?t(e.value,n):t(n)}}}function f(r){!n||r.pending||2!==r.status||Dr(r)||(0===a&&0===o.length&&e(l),o.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++a,e((function(){!function(r){var i,o,s;s=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var c=0,u=s.length;c<u;++c){Rr(r),o=s[c][0],i=s[c][r.status];try{K(i)?p(o,i(r.value)):1===r.status?p(o,r.value):d(o,r.value)}catch(e){d(o,e),e&&!0===e.$$passToExceptionHandler&&t(e)}}}finally{--a,n&&0===a&&e(l)}}(r)})))}function p(e,t){e.$$state.status||(t===e?h(e,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):function e(t,n){var r,i=!1;try{(L(n)||K(n))&&(r=n.then),K(r)?(t.$$state.status=-1,r.call(n,a,o,(function(e){v(t,e)}))):(t.$$state.value=n,t.$$state.status=1,f(t.$$state))}catch(e){o(e)}function a(n){i||(i=!0,e(t,n))}function o(e){i||(i=!0,h(t,e))}}(e,t))}function d(e,t){e.$$state.status||h(e,t)}function h(e,t){e.$$state.value=t,e.$$state.status=2,f(e.$$state)}function v(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&e((function(){for(var e,n,a=0,o=i.length;a<o;a++){n=i[a][0],e=i[a][3];try{v(n,K(e)?e(r):r)}catch(e){t(e)}}}))}function m(e){var t=new u;return d(t,e),t}function y(e,t,n){var r=null;try{K(n)&&(r=n())}catch(e){return m(e)}return Z(r)?r.then((function(){return t(e)}),m):t(e)}function g(e,t,n,r){var i=new u;return p(i,e),i.then(t,n,r)}A(u.prototype,{then:function(e,t,n){if(F(e)&&F(t)&&F(n))return this;var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&f(this.$$state),r},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then((function(t){return y(t,b,e)}),(function(t){return y(t,m,e)}),t)}});var b=g;function k(e){if(!K(e))throw r("norslvr","Expected resolverFn, got '{0}'",e);var t=new u;return e((function(e){p(t,e)}),(function(e){d(t,e)})),t}return k.prototype=u.prototype,k.defer=s,k.reject=m,k.when=g,k.resolve=b,k.all=function(e){var t=new u,n=0,r=V(e)?[]:{};return x(e,(function(e,i){n++,g(e).then((function(e){r[i]=e,--n||p(t,r)}),(function(e){d(t,e)}))})),0===n&&p(t,r),t},k.race=function(e){var t=s();return x(e,(function(e){g(e).then(t.resolve,t.reject)})),t.promise},k}function Dr(e){return!!e.pur}function Rr(e){e.pur=!0}function Pr(e){e.$$state&&Rr(e.$$state)}function Tr(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return a.supported=i,a}]}function jr(){var e=10,t=i("$rootScope"),n=null,r=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$exceptionHandler","$parse","$browser",function(i,o,s){function c(e){e.currentScope.$$destroyed=!0}function u(){this.$id=_(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(e,t){var n;return t=t||this,e?(n=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=_(),this.$$ChildScope=null,this.$$suspended=!1}return t.prototype=e,t}(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!==this)&&n.$on("$destroy",c),n},$watch:function(e,t,r,i){var a=o(e),s=K(t)?t:R;if(a.$$watchDelegate)return a.$$watchDelegate(this,s,r,a,e);var c=this,u=c.$$watchers,l={fn:s,last:k,get:a,exp:i||e,eq:!!r};return n=null,u||((u=c.$$watchers=[]).$$digestWatchIndex=-1),u.unshift(l),u.$$digestWatchIndex++,g(this,1),function(){var e=ie(u,l);e>=0&&(g(c,-1),e<u.$$digestWatchIndex&&u.$$digestWatchIndex--),n=null}},$watchGroup:function(e,t){var n=new Array(e.length),r=new Array(e.length),i=[],a=this,o=!1,s=!0;if(!e.length){var c=!0;return a.$evalAsync((function(){c&&t(r,r,a)})),function(){c=!1}}if(1===e.length)return this.$watch(e[0],(function(e,i,a){r[0]=e,n[0]=i,t(r,e===i?r:n,a)}));function u(){o=!1;try{s?(s=!1,t(r,r,a)):t(r,n,a)}finally{for(var i=0;i<e.length;i++)n[i]=r[i]}}return x(e,(function(e,t){var n=a.$watch(e,(function(e){r[t]=e,o||(o=!0,a.$evalAsync(u))}));i.push(n)})),function(){for(;i.length;)i.shift()()}},$watchCollection:function(e,t){v.$$pure=o(e).literal,v.$stateful=!v.$$pure;var n,r,i,a=this,s=t.length>1,c=0,u=o(e,v),f=[],p={},d=!0,h=0;function v(e){var t,i,a,o;if(!F(n=e)){if(L(n))if(w(n)){r!==f&&(h=(r=f).length=0,c++),t=n.length,h!==t&&(c++,r.length=h=t);for(var s=0;s<t;s++)o=r[s],a=n[s],o!=o&&a!=a||o===a||(c++,r[s]=a)}else{for(i in r!==p&&(r=p={},h=0,c++),t=0,n)l.call(n,i)&&(t++,a=n[i],o=r[i],i in r?o!=o&&a!=a||o===a||(c++,r[i]=a):(h++,r[i]=a,c++));if(h>t)for(i in c++,r)l.call(n,i)||(h--,delete r[i])}else r!==n&&(r=n,c++);return c}}return this.$watch(u,(function(){if(d?(d=!1,t(n,n,a)):t(n,i,a),s)if(L(n))if(w(n)){i=new Array(n.length);for(var e=0;e<n.length;e++)i[e]=n[e]}else for(var r in i={},n)l.call(n,r)&&(i[r]=n[r]);else i=n}))},$digest:function(){var a,o,c,u,l,h,g,b,w,x=e,$=p.length?f:this,_=[];m("$digest"),s.$$checkUrlChange(),this===f&&null!==r&&(s.defer.cancel(r),S()),n=null;do{l=!1,g=$;for(var M=0;M<p.length;M++){try{(0,(w=p[M]).fn)(w.scope,w.locals)}catch(e){i(e)}n=null}p.length=0;e:do{if(u=!g.$$suspended&&g.$$watchers)for(u.$$digestWatchIndex=u.length;u.$$digestWatchIndex--;)try{if(a=u[u.$$digestWatchIndex])if((o=(0,a.get)(g))===(c=a.last)||(a.eq?se(o,c):E(o)&&E(c))){if(a===n){l=!1;break e}}else l=!0,n=a,a.last=a.eq?ae(o,null):o,(0,a.fn)(o,c===k?o:c,g),x<5&&(_[b=4-x]||(_[b]=[]),_[b].push({msg:K(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:o,oldVal:c}))}catch(e){i(e)}if(!(h=!g.$$suspended&&g.$$watchersCount&&g.$$childHead||g!==$&&g.$$nextSibling))for(;g!==$&&!(h=g.$$nextSibling);)g=g.$parent}while(g=h);if((l||p.length)&&!x--)throw y(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,_)}while(l||p.length);for(y();v<d.length;)try{d[v++]()}catch(e){i(e)}d.length=v=0,s.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;for(var t in this.$broadcast("$destroy"),this.$$destroyed=!0,this===f&&s.$$applicationDestroyed(),g(this,-this.$$watchersCount),this.$$listenerCount)b(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=R,this.$on=this.$watch=this.$watchGroup=function(){return R},this.$$listeners={},this.$$nextSibling=null,function e(t){9===a&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return o(e)(this,t)},$evalAsync:function(e,t){f.$$phase||p.length||s.defer((function(){p.length&&f.$digest()}),null,"$evalAsync"),p.push({scope:this,fn:o(e),locals:t})},$$postDigest:function(e){d.push(e)},$apply:function(e){try{m("$apply");try{return this.$eval(e)}finally{y()}}catch(e){i(e)}finally{try{f.$digest()}catch(e){throw i(e),e}}},$applyAsync:function(e){var t=this;e&&h.push((function(){t.$eval(e)})),e=o(e),null===r&&(r=s.defer((function(){f.$apply(S)}),null,"$applyAsync"))},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do{r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(delete n[r],b(i,1,e))}},$emit:function(e,t){var n,r,a,o=[],s=this,c=!1,u={name:e,targetScope:s,stopPropagation:function(){c=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=le([u],arguments,1);do{for(n=s.$$listeners[e]||o,u.currentScope=s,r=0,a=n.length;r<a;r++)if(n[r])try{n[r].apply(null,l)}catch(e){i(e)}else n.splice(r,1),r--,a--;if(c)break;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(e,t){var n=this,r=n,a=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return o;for(var s,c,u,l=le([o],arguments,1);r=a;){for(o.currentScope=r,c=0,u=(s=r.$$listeners[e]||[]).length;c<u;c++)if(s[c])try{s[c].apply(null,l)}catch(e){i(e)}else s.splice(c,1),c--,u--;if(!(a=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(a=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var f=new u,p=f.$$asyncQueue=[],d=f.$$postDigestQueue=[],h=f.$$applyAsyncQueue=[],v=0;return f;function m(e){if(f.$$phase)throw t("inprog","{0} already in progress",f.$$phase);f.$$phase=e}function y(){f.$$phase=null}function g(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function b(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function k(){}function S(){for(;h.length;)try{h.shift()()}catch(e){i(e)}r=null}}]}function Fr(){var e=/^\s*(https?|s?ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return N(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return N(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i=r?t:e,a=ri(n&&n.trim()).href;return""===a||a.match(i)?n:"unsafe:"+a}}}$r.prototype={compile:function(e){var t=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},kr(e,t.$filter);var n,r="";if(this.stage="assign",n=Sr(e)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var a=wr(e.body);t.stage="inputs",x(a,(function(e,n){var r="fn"+n;t.state[r]={vars:[],body:[],own:{}},t.state.computing=r;var i=t.nextId();t.recurse(e,i),t.return_(i),t.state.inputs.push({name:r,isPure:e.isPure}),e.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(e);var o='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",o)(this.$filter,dr,gr,br);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return x(t,(function(t){e.push("var "+t.name+"="+n.generateFunction(t.name,"s")),t.isPure&&e.push(t.name,".isPure="+JSON.stringify(t.isPure)+";")})),t.length&&e.push("fn.inputs=["+t.map((function(e){return e.name})).join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return x(this.state.filters,(function(n,r){e.push(n+"=$filter("+t.escape(r)+")")})),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,r,i,a){var o,s,c,u,l,f=this;if(r=r||R,!a&&N(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,r,i,!0));switch(e.type){case yr.Program:x(e.body,(function(t,n){f.recurse(t.expression,void 0,void 0,(function(e){s=e})),n!==e.body.length-1?f.current().body.push(s,";"):f.return_(s)}));break;case yr.Literal:u=this.escape(e.value),this.assign(t,u),r(t||u);break;case yr.UnaryExpression:this.recurse(e.argument,void 0,void 0,(function(e){s=e})),u=e.operator+"("+this.ifDefined(s,0)+")",this.assign(t,u),r(u);break;case yr.BinaryExpression:this.recurse(e.left,void 0,void 0,(function(e){o=e})),this.recurse(e.right,void 0,void 0,(function(e){s=e})),u="+"===e.operator?this.plus(o,s):"-"===e.operator?this.ifDefined(o,0)+e.operator+this.ifDefined(s,0):"("+o+")"+e.operator+"("+s+")",this.assign(t,u),r(u);break;case yr.LogicalExpression:t=t||this.nextId(),f.recurse(e.left,t),f.if_("&&"===e.operator?t:f.not(t),f.lazyRecurse(e.right,t)),r(t);break;case yr.ConditionalExpression:t=t||this.nextId(),f.recurse(e.test,t),f.if_(t,f.lazyRecurse(e.alternate,t),f.lazyRecurse(e.consequent,t)),r(t);break;case yr.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",e.name)),(function(){f.if_("inputs"===f.stage||"s",(function(){i&&1!==i&&f.if_(f.isNull(f.nonComputedMember("s",e.name)),f.lazyAssign(f.nonComputedMember("s",e.name),"{}")),f.assign(t,f.nonComputedMember("s",e.name))}))}),t&&f.lazyAssign(t,f.nonComputedMember("l",e.name))),r(t);break;case yr.MemberExpression:o=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),f.recurse(e.object,o,void 0,(function(){f.if_(f.notNull(o),(function(){e.computed?(s=f.nextId(),f.recurse(e.property,s),f.getStringValue(s),i&&1!==i&&f.if_(f.not(f.computedMember(o,s)),f.lazyAssign(f.computedMember(o,s),"{}")),u=f.computedMember(o,s),f.assign(t,u),n&&(n.computed=!0,n.name=s)):(i&&1!==i&&f.if_(f.isNull(f.nonComputedMember(o,e.property.name)),f.lazyAssign(f.nonComputedMember(o,e.property.name),"{}")),u=f.nonComputedMember(o,e.property.name),f.assign(t,u),n&&(n.computed=!1,n.name=e.property.name))}),(function(){f.assign(t,"undefined")})),r(t)}),!!i);break;case yr.CallExpression:t=t||this.nextId(),e.filter?(s=f.filter(e.callee.name),c=[],x(e.arguments,(function(e){var t=f.nextId();f.recurse(e,t),c.push(t)})),u=s+"("+c.join(",")+")",f.assign(t,u),r(t)):(s=f.nextId(),o={},c=[],f.recurse(e.callee,s,o,(function(){f.if_(f.notNull(s),(function(){x(e.arguments,(function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,(function(e){c.push(e)}))})),u=o.name?f.member(o.context,o.name,o.computed)+"("+c.join(",")+")":s+"("+c.join(",")+")",f.assign(t,u)}),(function(){f.assign(t,"undefined")})),r(t)})));break;case yr.AssignmentExpression:s=this.nextId(),o={},this.recurse(e.left,void 0,o,(function(){f.if_(f.notNull(o.context),(function(){f.recurse(e.right,s),u=f.member(o.context,o.name,o.computed)+e.operator+s,f.assign(t,u),r(t||u)}))}),1);break;case yr.ArrayExpression:c=[],x(e.elements,(function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,(function(e){c.push(e)}))})),u="["+c.join(",")+"]",this.assign(t,u),r(t||u);break;case yr.ObjectExpression:c=[],l=!1,x(e.properties,(function(e){e.computed&&(l=!0)})),l?(t=t||this.nextId(),this.assign(t,"{}"),x(e.properties,(function(e){e.computed?(o=f.nextId(),f.recurse(e.key,o)):o=e.key.type===yr.Identifier?e.key.name:""+e.key.value,s=f.nextId(),f.recurse(e.value,s),f.assign(f.member(t,o,e.computed),s)}))):(x(e.properties,(function(t){f.recurse(t.value,e.constant?void 0:f.nextId(),void 0,(function(e){c.push(f.escape(t.key.type===yr.Identifier?t.key.name:""+t.key.value)+":"+e)}))})),u="{"+c.join(",")+"}",this.assign(t,u)),r(t||u);break;case yr.ThisExpression:this.assign(t,"s"),r(t||"s");break;case yr.LocalsExpression:this.assign(t,"l"),r(t||"l");break;case yr.NGValueParameter:this.assign(t,"v"),r(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,i,a){var o=this;return function(){o.recurse(e,t,n,r,i,a)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(B(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(H(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw fr("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},_r.prototype={compile:function(e){var t,n,r=this;kr(e,r.$filter),(t=Sr(e))&&(n=this.recurse(t));var i,a=wr(e.body);a&&(i=[],x(a,(function(e,t){var n=r.recurse(e);n.isPure=e.isPure,e.input=n,i.push(n),e.watchId=t})));var o=[];x(e.body,(function(e){o.push(r.recurse(e.expression))}));var s=0===e.body.length?R:1===e.body.length?o[0]:function(e,t){var n;return x(o,(function(r){n=r(e,t)})),n};return n&&(s.assign=function(e,t,r){return n(e,r,t)}),i&&(s.inputs=i),s},recurse:function(e,t,n){var r,i,a,o=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case yr.Literal:return this.value(e.value,t);case yr.UnaryExpression:return i=this.recurse(e.argument),this["unary"+e.operator](i,t);case yr.BinaryExpression:case yr.LogicalExpression:return r=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](r,i,t);case yr.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case yr.Identifier:return o.identifier(e.name,t,n);case yr.MemberExpression:return r=this.recurse(e.object,!1,!!n),e.computed||(i=e.property.name),e.computed&&(i=this.recurse(e.property)),e.computed?this.computedMember(r,i,t,n):this.nonComputedMember(r,i,t,n);case yr.CallExpression:return a=[],x(e.arguments,(function(e){a.push(o.recurse(e))})),e.filter&&(i=this.$filter(e.callee.name)),e.filter||(i=this.recurse(e.callee,!0)),e.filter?function(e,n,r,o){for(var s=[],c=0;c<a.length;++c)s.push(a[c](e,n,r,o));var u=i.apply(void 0,s,o);return t?{context:void 0,name:void 0,value:u}:u}:function(e,n,r,o){var s,c=i(e,n,r,o);if(null!=c.value){for(var u=[],l=0;l<a.length;++l)u.push(a[l](e,n,r,o));s=c.value.apply(c.context,u)}return t?{value:s}:s};case yr.AssignmentExpression:return r=this.recurse(e.left,!0,1),i=this.recurse(e.right),function(e,n,a,o){var s=r(e,n,a,o),c=i(e,n,a,o);return s.context[s.name]=c,t?{value:c}:c};case yr.ArrayExpression:return a=[],x(e.elements,(function(e){a.push(o.recurse(e))})),function(e,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,r,i));return t?{value:o}:o};case yr.ObjectExpression:return a=[],x(e.properties,(function(e){e.computed?a.push({key:o.recurse(e.key),computed:!0,value:o.recurse(e.value)}):a.push({key:e.key.type===yr.Identifier?e.key.name:""+e.key.value,computed:!1,value:o.recurse(e.value)})})),function(e,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(e,n,r,i)]=a[s].value(e,n,r,i):o[a[s].key]=a[s].value(e,n,r,i);return t?{value:o}:o};case yr.ThisExpression:return function(e){return t?{value:e}:e};case yr.LocalsExpression:return function(e,n){return t?{value:n}:n};case yr.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=N(o)?+o:0,t?{value:o}:o}},"unary-":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=N(o)?-o:-0,t?{value:o}:o}},"unary!":function(e,t){return function(n,r,i,a){var o=!e(n,r,i,a);return t?{value:o}:o}},"binary+":function(e,t,n){return function(r,i,a,o){var s=br(e(r,i,a,o),t(r,i,a,o));return n?{value:s}:s}},"binary-":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o),c=t(r,i,a,o),u=(N(s)?s:0)-(N(c)?c:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)*t(r,i,a,o);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)/t(r,i,a,o);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)%t(r,i,a,o);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)===t(r,i,a,o);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!==t(r,i,a,o);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)==t(r,i,a,o);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!=t(r,i,a,o);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<t(r,i,a,o);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>t(r,i,a,o);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<=t(r,i,a,o);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>=t(r,i,a,o);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)&&t(r,i,a,o);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)||t(r,i,a,o);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,a,o,s){var c=e(i,a,o,s)?t(i,a,o,s):n(i,a,o,s);return r?{value:c}:c}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(r,i,a,o){var s=i&&e in i?i:r;n&&1!==n&&s&&null==s[e]&&(s[e]={});var c=s?s[e]:void 0;return t?{context:s,name:e,value:c}:c}},computedMember:function(e,t,n,r){return function(i,a,o,s){var c,u,l=e(i,a,o,s);return null!=l&&(c=dr(c=t(i,a,o,s)),r&&1!==r&&l&&!l[c]&&(l[c]={}),u=l[c]),n?{context:l,name:c,value:u}:u}},nonComputedMember:function(e,t,n,r){return function(i,a,o,s){var c=e(i,a,o,s);r&&1!==r&&c&&null==c[t]&&(c[t]={});var u=null!=c?c[t]:void 0;return n?{context:c,name:t,value:u}:u}},inputs:function(e,t){return function(n,r,i,a){return a?a[t]:e(n,r,i)}}},Mr.prototype={constructor:Mr,parse:function(e){var t=this.getAst(e),n=this.astCompiler.compile(t.ast);return n.literal=function(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===yr.Literal||e.body[0].expression.type===yr.ArrayExpression||e.body[0].expression.type===yr.ObjectExpression)}(t.ast),n.constant=function(e){return e.constant}(t.ast),n.oneTime=t.oneTime,n},getAst:function(e){var t=!1;return":"===(e=e.trim()).charAt(0)&&":"===e.charAt(1)&&(t=!0,e=e.substring(2)),{ast:this.ast.ast(e),oneTime:t}}};var Nr=i("$sce"),Lr={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ur=/_([a-z])/g;function Br(e){return e.replace(Ur,Ye)}function Hr(e){var t=[];return N(e)&&x(e,(function(e){t.push(function(e){if("self"===e)return e;if(B(e)){if(e.indexOf("***")>-1)throw Nr("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=ee(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(q(e))return new RegExp("^"+e.source+"$");throw Nr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))})),t}function zr(){this.SCE_CONTEXTS=Lr;var t=["self"],n=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Hr(e)),t},this.resourceUrlBlacklist=function(e){return arguments.length&&(n=Hr(e)),n},this.$get=["$injector","$$sanitizeUri",function(r,i){var a=function(e){throw Nr("unsafe","Attempting to use an unsafe value in a safe context.")};function o(t,n){return"self"===t?ii(n,ti)||function(t){return ii(t,function(){if(e.document.baseURI)return e.document.baseURI;Qr||((Qr=e.document.createElement("a")).href=".",Qr=Qr.cloneNode(!1));return Qr.href}())}(n):!!t.exec(n.href)}function s(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}r.has("$sanitize")&&(a=r.get("$sanitize"));var c=s(),u={};return u[Lr.HTML]=s(c),u[Lr.CSS]=s(c),u[Lr.MEDIA_URL]=s(c),u[Lr.URL]=s(u[Lr.MEDIA_URL]),u[Lr.JS]=s(c),u[Lr.RESOURCE_URL]=s(u[Lr.URL]),{trustAs:function(e,t){var n=u.hasOwnProperty(e)?u[e]:null;if(!n)throw Nr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||F(t)||""===t)return t;if("string"!=typeof t)throw Nr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(e,r){if(null===r||F(r)||""===r)return r;var s=u.hasOwnProperty(e)?u[e]:null;if(s&&r instanceof s)return r.$$unwrapTrustedValue();if(K(r.$$unwrapTrustedValue)&&(r=r.$$unwrapTrustedValue()),e===Lr.MEDIA_URL||e===Lr.URL)return i(r.toString(),e===Lr.MEDIA_URL);if(e===Lr.RESOURCE_URL){if(function(e){var r,i,a=ri(e.toString()),s=!1;for(r=0,i=t.length;r<i;r++)if(o(t[r],a)){s=!0;break}if(s)for(r=0,i=n.length;r<i;r++)if(o(n[r],a)){s=!1;break}return s}(r))return r;throw Nr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",r.toString())}if(e===Lr.HTML)return a(r);throw Nr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof c?e.$$unwrapTrustedValue():e}}}]}function Vr(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&a<8)throw Nr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Be(Lr);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=P),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,(function(t){return r.getTrusted(e,t)}))};var i=r.parseAs,o=r.getTrusted,s=r.trustAs;return x(Lr,(function(e,t){var n=f(t);r[Br("parse_as_"+n)]=function(t){return i(e,t)},r[Br("get_trusted_"+n)]=function(t){return o(e,t)},r[Br("trust_as_"+n)]=function(t){return s(e,t)}})),r}]}function Wr(){this.$get=["$window","$document",function(e,t){var n={},r=!(!(e.nw&&e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,i=I((/android (\d+)/.exec(f((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},c=s.body&&s.body.style,u=!1,l=!1;return c&&(u=!!("transition"in c||"webkitTransition"in c),l=!!("animation"in c||"webkitAnimation"in c)),{history:!(!r||i<4||o),hasEvent:function(e){if("input"===e&&a)return!1;if(F(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:ce(),transitions:u,animations:l,android:i}}]}function Kr(){this.$get=T((function(e){return new qr(e)}))}function qr(e){var t={},n=[],r=this.ALL_TASKS_TYPE="$$all$$",i=this.DEFAULT_TASK_TYPE="$$default$$";function a(){var e=n.pop();return e&&e.cb}function o(e){for(var t=n.length-1;t>=0;--t){var r=n[t];if(r.type===e)return n.splice(t,1),r.cb}}this.completeTask=function(n,s){s=s||i;try{n()}finally{!function(e){t[e=e||i]&&(t[e]--,t[r]--)}(s);var c=t[s],u=t[r];if(!u||!c)for(var l,f=u?o:a;l=f(s);)try{l()}catch(t){e.error(t)}}},this.incTaskCount=function(e){t[e=e||i]=(t[e]||0)+1,t[r]=(t[r]||0)+1},this.notifyWhenNoPendingTasks=function(e,i){t[i=i||r]?n.push({type:i,cb:e}):e()}}var Jr=i("$templateRequest");function Gr(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,r,i,a){function o(s,c){o.totalPendingRequests++,B(s)&&!F(n.get(s))||(s=a.getTrustedResourceUrl(s));var u=r.defaults&&r.defaults.transformResponse;return V(u)?u=u.filter((function(e){return e!==Rn})):u===Rn&&(u=null),r.get(s,A({cache:n,transformResponse:u},e)).finally((function(){o.totalPendingRequests--})).then((function(e){return n.put(s,e.data)}),(function(e){c||(e=Jr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText),t(e));return i.reject(e)}))}return o.totalPendingRequests=0,o}]}function Yr(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={findBindings:function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return x(r,(function(e){var r=b.element(e).data("$binding");r&&x(r,(function(r){n?new RegExp("(^|\\s)"+ee(t)+"(\\s|\\||$)").test(r)&&i.push(e):-1!==r.indexOf(t)&&i.push(e)}))})),i},findModels:function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a="["+r[i]+"model"+(n?"=":"*=")+'"'+t+'"]',o=e.querySelectorAll(a);if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(t){t!==n.url()&&(n.url(t),e.$digest())},whenStable:function(e){t.notifyWhenNoOutstandingRequests(e)}};return r}]}var Zr=i("$timeout");function Xr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){var a={};function o(o,s,c){K(o)||(c=s,s=o,o=R);var u,l=fe(arguments,3),f=N(c)&&!c,p=(f?r:n).defer(),d=p.promise;return u=t.defer((function(){try{p.resolve(o.apply(null,l))}catch(e){p.reject(e),i(e)}finally{delete a[d.$$timeoutId]}f||e.$apply()}),s,"$timeout"),d.$$timeoutId=u,a[u]=p,d}return o.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$timeoutId"))throw Zr("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!a.hasOwnProperty(e.$$timeoutId))return!1;var n=e.$$timeoutId,r=a[n];return Pr(r.promise),r.reject("canceled"),delete a[n],t.defer.cancel(n)},o}]}var Qr,ei=e.document.createElement("a"),ti=ri(e.location.href);ei.href="http://[::1]";var ni="[::1]"===ei.hostname;function ri(e){if(!B(e))return e;var t=e;a&&(ei.setAttribute("href",t),t=ei.href),ei.setAttribute("href",t);var n=ei.hostname;return!ni&&n.indexOf(":")>-1&&(n="["+n+"]"),{href:ei.href,protocol:ei.protocol?ei.protocol.replace(/:$/,""):"",host:ei.host,search:ei.search?ei.search.replace(/^\?/,""):"",hash:ei.hash?ei.hash.replace(/^#/,""):"",hostname:n,port:ei.port,pathname:"/"===ei.pathname.charAt(0)?ei.pathname:"/"+ei.pathname}}function ii(e,t){return e=ri(e),t=ri(t),e.protocol===t.protocol&&e.host===t.host}function ai(){this.$get=T(e)}function oi(e){var t=e[0]||{},n={},r="";function i(e){try{return decodeURIComponent(e)}catch(t){return e}}return function(){var e,a,o,s,c,u=function(e){try{return e.cookie||""}catch(e){return""}}(t);if(u!==r)for(e=(r=u).split("; "),n={},o=0;o<e.length;o++)(s=(a=e[o]).indexOf("="))>0&&(c=i(a.substring(0,s)),F(n[c])&&(n[c]=i(a.substring(s+1))));return n}}function si(){this.$get=oi}function ci(e){function t(n,r){if(L(n)){var i={};return x(n,(function(e,n){i[n]=t(n,e)})),i}return e.factory(n+"Filter",r)}this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+"Filter")}}],t("currency",pi),t("date",$i),t("filter",ui),t("json",_i),t("limitTo",Ai),t("lowercase",Mi),t("number",di),t("orderBy",Ii),t("uppercase",Ci)}function ui(){return function(e,t,n,r){if(!w(e)){if(null==e)return e;throw i("filter")("notarray","Expected array but received: {0}",e)}var a,o;switch(r=r||"$",fi(t)){case"function":a=t;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":a=function(e,t,n,r){var i=L(e)&&n in e;!0===t?t=se:K(t)||(t=function(e,t){return!F(e)&&(null===e||null===t?e===t:!(L(t)||L(e)&&!j(e))&&(e=f(""+e),t=f(""+t),-1!==e.indexOf(t)))});return function(a){return i&&!L(a)?li(a,e[n],t,n,!1):li(a,e,t,n,r)}}(t,n,r,o);break;default:return e}return Array.prototype.filter.call(e,a)}}function li(e,t,n,r,i,a){var o=fi(e),s=fi(t);if("string"===s&&"!"===t.charAt(0))return!li(e,t.substring(1),n,r,i);if(V(e))return e.some((function(e){return li(e,t,n,r,i)}));switch(o){case"object":var c;if(i){for(c in e)if(c.charAt&&"$"!==c.charAt(0)&&li(e[c],t,n,r,!0))return!0;return!a&&li(e,t,n,r,!1)}if("object"===s){for(c in t){var u=t[c];if(!K(u)&&!F(u)){var l=c===r;if(!li(l?e:e[c],u,n,r,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function fi(e){return null===e?"null":typeof e}oi.$inject=["$document"],ci.$inject=["$provide"];function pi(e){var t=e.NUMBER_FORMATS;return function(e,n,r){F(n)&&(n=t.CURRENCY_SYM),F(r)&&(r=t.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==e?e:hi(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(i,n)}}function di(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:hi(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function hi(e,t,n,r,i){if(!B(e)&&!H(e)||isNaN(e))return"";var a,o=!isFinite(e),s=!1,c=Math.abs(e)+"",u="";if(o)u="â";else{(function(e,t,n,r){var i=e.d,a=i.length-e.i,o=(t=F(t)?Math.min(Math.max(n,a),r):+t)+e.i,s=i[o];if(o>0){i.splice(Math.max(e.i,o));for(var c=o;c<i.length;c++)i[c]=0}else{a=Math.max(0,a),e.i=1,i.length=Math.max(1,o=t+1),i[0]=0;for(var u=1;u<o;u++)i[u]=0}if(s>=5)if(o-1<0){for(var l=0;l>o;l--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[o-1]++;for(;a<Math.max(0,t);a++)i.push(0);var f=i.reduceRight((function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)}),0);f&&(i.unshift(f),e.i++)})(a=function(e){var t,n,r,i,a,o=0;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;"0"===e.charAt(r);r++);if(r===(a=e.length))t=[0],n=1;else{for(a--;"0"===e.charAt(a);)a--;for(n-=r,t=[],i=0;r<=a;r++,i++)t[i]=+e.charAt(r)}return n>22&&(t=t.splice(0,21),o=n-1,n=1),{d:t,e:o,i:n}}(c),i,t.minFrac,t.maxFrac);var l=a.d,f=a.i,p=a.e,d=[];for(s=l.reduce((function(e,t){return e&&!t}),!0);f<0;)l.unshift(0),f++;f>0?d=l.splice(f,l.length):(d=l,l=[0]);var h=[];for(l.length>=t.lgSize&&h.unshift(l.splice(-t.lgSize,l.length).join(""));l.length>t.gSize;)h.unshift(l.splice(-t.gSize,l.length).join(""));l.length&&h.unshift(l.join("")),u=h.join(n),d.length&&(u+=r+d.join("")),p&&(u+="e+"+p)}return e<0&&!s?t.negPre+u+t.negSuf:t.posPre+u+t.posSuf}function vi(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=1-e:(e=-e,i="-")),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function mi(e,t,n,r,i){return n=n||0,function(a){var o=a["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12===n&&(o=12),vi(o,t,r,i)}}function yi(e,t,n){return function(r,i){var a=r["get"+e]();return i[p((n?"STANDALONE":"")+(t?"SHORT":"")+e)][a]}}function gi(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function bi(e){return function(t){var n,r=gi(t.getFullYear()),i=+(n=t,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+r;return vi(1+Math.round(i/6048e5),e)}}function ki(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}pi.$inject=["$locale"],di.$inject=["$locale"];var wi={yyyy:mi("FullYear",4,0,!1,!0),yy:mi("FullYear",2,0,!0,!0),y:mi("FullYear",1,0,!1,!0),MMMM:yi("Month"),MMM:yi("Month",!0),MM:mi("Month",2,1),M:mi("Month",1,1),LLLL:yi("Month",!1,!0),dd:mi("Date",2),d:mi("Date",1),HH:mi("Hours",2),H:mi("Hours",1),hh:mi("Hours",2,-12),h:mi("Hours",1,-12),mm:mi("Minutes",2),m:mi("Minutes",1),ss:mi("Seconds",2),s:mi("Seconds",1),sss:mi("Milliseconds",3),EEEE:yi("Day"),EEE:yi("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=vi(Math[r>0?"floor":"ceil"](r/60),2)+vi(Math.abs(r%60),2)},ww:bi(2),w:bi(1),G:ki,GG:ki,GGG:ki,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},xi=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Si=/^-?\d+$/;function $i(e){var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,o,s="",c=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,B(n)&&(n=Si.test(n)?I(n):function(e){var n;if(n=e.match(t)){var r=new Date(0),i=0,a=0,o=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=I(n[9]+n[10]),a=I(n[9]+n[11])),o.call(r,I(n[1]),I(n[2])-1,I(n[3]));var c=I(n[4]||0)-i,u=I(n[5]||0)-a,l=I(n[6]||0),f=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,c,u,l,f),r}return e}(n)),H(n)&&(n=new Date(n)),!z(n)||!isFinite(n.getTime()))return n;for(;r;)(o=xi.exec(r))?r=(c=le(c,o,1)).pop():(c.push(r),r=null);var u=n.getTimezoneOffset();return i&&(u=ye(i,u),n=be(n,i,!0)),x(c,(function(t){s+=(a=wi[t])?a(n,e.DATETIME_FORMATS,u):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),s}}function _i(){return function(e,t){return F(t)&&(t=2),he(e,t)}}$i.$inject=["$locale"];var Mi=T(f),Ci=T(p);function Ai(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):I(t),E(t)?e:(H(e)&&(e=e.toString()),w(e)?(n=(n=!n||isNaN(n)?0:I(n))<0?Math.max(0,e.length+n):n,t>=0?Oi(e,n,n+t):0===n?Oi(e,t,e.length):Oi(e,Math.max(0,n+t),n)):e)}}function Oi(e,t,n){return B(e)?e.slice(t,n):d.call(e,t,n)}function Ii(e){return function(r,a,o,s){if(null==r)return r;if(!w(r))throw i("orderBy")("notarray","Expected array but received: {0}",r);V(a)||(a=[a]),0===a.length&&(a=["+"]);var c=a.map((function(t){var n=1,r=P;if(K(t))r=t;else if(B(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t)).constant)){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})),u=o?-1:1,l=K(s)?s:n,f=Array.prototype.map.call(r,(function(e,n){return{value:e,tieBreaker:{value:n,type:"number",index:n},predicateValues:c.map((function(r){return function(e,n){var r=typeof e;null===e?r="null":"object"===r&&(e=function(e){if(K(e.valueOf)&&t(e=e.valueOf()))return e;if(j(e)&&t(e=e.toString()))return e;return e}(e));return{value:e,type:r,index:n}}(r.get(e),n)}))}}));return f.sort((function(e,t){for(var r=0,i=c.length;r<i;r++){var a=l(e.predicateValues[r],t.predicateValues[r]);if(a)return a*c[r].descending*u}return(l(e.tieBreaker,t.tieBreaker)||n(e.tieBreaker,t.tieBreaker))*u})),r=f.map((function(e){return e.value}))};function t(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function n(e,t){var n=0,r=e.type,i=t.type;if(r===i){var a=e.value,o=t.value;"string"===r?(a=a.toLowerCase(),o=o.toLowerCase()):"object"===r&&(L(a)&&(a=e.index),L(o)&&(o=t.index)),a!==o&&(n=a<o?-1:1)}else n="undefined"===r?1:"undefined"===i?-1:"null"===r?1:"null"===i?-1:r<i?-1:1;return n}}function Ei(e){return K(e)&&(e={link:e}),e.restrict=e.restrict||"AC",T(e)}Ii.$inject=["$parse"];var Di=T({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===m.call(t.prop("href"))?"xlink:href":"href";t.on("click",(function(e){t.attr(n)||e.preventDefault()}))}}}}),Ri={};x(Mt,(function(e,t){if("multiple"!==e){var n=hn("ng-"+t),r=i;"checked"===e&&(r=function(e,t,r){r.ngModel!==r[n]&&i(e,0,r)}),Ri[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(e,r,i){e.$watch(i[n],(function(e){i.$set(t,!!e)}))}})),x(At,(function(e,t){Ri[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(u);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],(function(e){r.$set(t,e)}))}}}})),x(["src","srcset","href"],(function(e){var t=hn("ng-"+e);Ri[t]=["$sce",function(n){return{priority:99,link:function(r,i,o){var s=e,c=e;"href"===e&&"[object SVGAnimatedString]"===m.call(i.prop("href"))&&(c="xlinkHref",o.$attr[c]="xlink:href",s=null),o.$set(t,n.getTrustedMediaUrl(o[t])),o.$observe(t,(function(t){t?(o.$set(c,t),a&&s&&i.prop(s,o[c])):"href"===e&&o.$set(c,null)}))}}}]}));var Pi={$addControl:R,$getControls:T([]),$$renameControl:function(e,t){e.$name=t},$removeControl:R,$setValidity:R,$setDirty:R,$setPristine:R,$setSubmitted:R,$$setSubmitted:R};function Ti(e,t,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Pi,this.$$element=e,this.$$animate=r,Li(this)}Ti.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Ti.prototype={$rollbackViewValue:function(){x(this.$$controls,(function(e){e.$rollbackViewValue()}))},$commitViewValue:function(){x(this.$$controls,(function(e){e.$commitViewValue()}))},$addControl:function(e){je(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$getControls:function(){return Be(this.$$controls)},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],x(this.$pending,(function(t,n){this.$setValidity(n,null,e)}),this),x(this.$error,(function(t,n){this.$setValidity(n,null,e)}),this),x(this.$$success,(function(t,n){this.$setValidity(n,null,e)}),this),ie(this.$$controls,e),e.$$parentForm=Pi},$setDirty:function(){this.$$animate.removeClass(this.$$element,Pa),this.$$animate.addClass(this.$$element,Ta),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Pa,Ta+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,x(this.$$controls,(function(e){e.$setPristine()}))},$setUntouched:function(){x(this.$$controls,(function(e){e.$setUntouched()}))},$setSubmitted:function(){for(var e=this;e.$$parentForm&&e.$$parentForm!==Pi;)e=e.$$parentForm;e.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,x(this.$$controls,(function(e){e.$$setSubmitted&&e.$$setSubmitted()}))}},Ui({clazz:Ti,set:function(e,t,n){var r=e[t];r?-1===r.indexOf(n)&&r.push(n):e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(ie(r,n),0===r.length&&delete e[t])}});var ji=function(e){return["$timeout","$parse",function(t,n){return{name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:Ti,compile:function(n,i){n.addClass(Pa).addClass(Da);var a=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,n,i,o){var s=o[0];if(!("action"in i)){var c=function(t){e.$apply((function(){s.$commitViewValue(),s.$setSubmitted()})),t.preventDefault()};n[0].addEventListener("submit",c),n.on("$destroy",(function(){t((function(){n[0].removeEventListener("submit",c)}),0,!1)}))}(o[1]||s.$$parentForm).$addControl(s);var u=a?r(s.$name):R;a&&(u(e,s),i.$observe(a,(function(t){s.$name!==t&&(u(e,void 0),s.$$parentForm.$$renameControl(s,t),(u=r(s.$name))(e,s))}))),n.on("$destroy",(function(){s.$$parentForm.$removeControl(s),u(e,void 0),A(s,Pi)}))}}}};function r(e){return""===e?n('this[""]').assign:n(e).assign||R}}]},Fi=ji(),Ni=ji(!0);function Li(e){e.$$classCache={},e.$$classCache[Ra]=!(e.$$classCache[Da]=e.$$element.hasClass(Da))}function Ui(e){var t=e.clazz,n=e.set,r=e.unset;function i(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function a(e,t,n){t=t?"-"+De(t,"-"):"",i(e,Da+t,!0===n),i(e,Ra+t,!1===n)}t.prototype.$setValidity=function(e,t,o){var s;F(t)?function(e,t,r,i){e[t]||(e[t]={});n(e[t],r,i)}(this,"$pending",e,o):function(e,t,n,i){e[t]&&r(e[t],n,i);Bi(e[t])&&(e[t]=void 0)}(this,"$pending",e,o),Y(t)?t?(r(this.$error,e,o),n(this.$$success,e,o)):(n(this.$error,e,o),r(this.$$success,e,o)):(r(this.$error,e,o),r(this.$$success,e,o)),this.$pending?(i(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,a(this,"",null)):(i(this,"ng-pending",!1),this.$valid=Bi(this.$error),this.$invalid=!this.$valid,a(this,"",this.$valid)),a(this,e,s=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,s,this)}}function Bi(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Hi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,zi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Vi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Wi=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Ki=/^(\d{4,})-(\d{2})-(\d{2})$/,qi=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ji=/^(\d{4,})-W(\d\d)$/,Gi=/^(\d{4,})-(\d\d)$/,Yi=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Zi=Ne();x("date,datetime-local,month,time,week".split(","),(function(e){Zi[e]=!0}));var Xi={text:function(e,t,n,r,i,a){ea(e,t,n,r,i,a),Qi(r)},date:na("date",Ki,ta(Ki,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":na("datetimelocal",qi,ta(qi,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:na("time",Yi,ta(Yi,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:na("week",Ji,(function(e,t){if(z(e))return e;if(B(e)){Ji.lastIndex=0;var n=Ji.exec(e);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,c=0,u=gi(r),l=7*(i-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds()),new Date(r,0,u.getDate()+l,a,o,s,c)}}return NaN}),"yyyy-Www"),month:na("month",Gi,ta(Gi,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,r,i,a,o,s){var c;if(ra(e,t,n,r,"number"),ia(r),ea(e,t,n,r,i,a),N(n.min)||n.ngMin){var u=n.min||s(n.ngMin)(e);c=aa(u),r.$validators.min=function(e,t){return r.$isEmpty(t)||F(c)||t>=c},n.$observe("min",(function(e){e!==u&&(c=aa(e),u=e,r.$validate())}))}if(N(n.max)||n.ngMax){var l=n.max||s(n.ngMax)(e),f=aa(l);r.$validators.max=function(e,t){return r.$isEmpty(t)||F(f)||t<=f},n.$observe("max",(function(e){e!==l&&(f=aa(e),l=e,r.$validate())}))}if(N(n.step)||n.ngStep){var p=n.step||s(n.ngStep)(e),d=aa(p);r.$validators.step=function(e,t){return r.$isEmpty(t)||F(d)||ca(t,c||0,d)},n.$observe("step",(function(e){e!==p&&(d=aa(e),p=e,r.$validate())}))}},url:function(e,t,n,r,i,a){ea(e,t,n,r,i,a),Qi(r),r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||zi.test(n)}},email:function(e,t,n,r,i,a){ea(e,t,n,r,i,a),Qi(r),r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||Vi.test(n)}},radio:function(e,t,n,r){var i=!n.ngTrim||"false"!==Q(n.ngTrim);F(n.name)&&t.attr("name",_());t.on("change",(function(e){var a;t[0].checked&&(a=n.value,i&&(a=Q(a)),r.$setViewValue(a,e&&e.type))})),r.$render=function(){var e=n.value;i&&(e=Q(e)),t[0].checked=e===r.$viewValue},n.$observe("value",r.$render)},range:function(e,t,n,r,i,a){ra(e,t,n,r,"range"),ia(r),ea(e,t,n,r,i,a);var o=r.$$hasNativeValidators&&"range"===t[0].type,s=o?0:void 0,c=o?100:void 0,u=o?1:void 0,l=t[0].validity,f=N(n.min),p=N(n.max),d=N(n.step),h=r.$render;r.$render=o&&N(l.rangeUnderflow)&&N(l.rangeOverflow)?function(){h(),r.$setViewValue(t.val())}:h,f&&(s=aa(n.min),r.$validators.min=o?function(){return!0}:function(e,t){return r.$isEmpty(t)||F(s)||t>=s},v("min",(function(e){if(s=aa(e),E(r.$modelValue))return;if(o){var n=t.val();s>n&&(n=s,t.val(n)),r.$setViewValue(n)}else r.$validate()})));p&&(c=aa(n.max),r.$validators.max=o?function(){return!0}:function(e,t){return r.$isEmpty(t)||F(c)||t<=c},v("max",(function(e){if(c=aa(e),E(r.$modelValue))return;if(o){var n=t.val();c<n&&(t.val(c),n=c<s?s:c),r.$setViewValue(n)}else r.$validate()})));d&&(u=aa(n.step),r.$validators.step=o?function(){return!l.stepMismatch}:function(e,t){return r.$isEmpty(t)||F(u)||ca(t,s||0,u)},v("step",(function(e){if(u=aa(e),E(r.$modelValue))return;o?r.$viewValue!==t.val()&&r.$setViewValue(t.val()):r.$validate()})));function v(e,r){t.attr(e,n[e]);var i=n[e];n.$observe(e,(function(e){e!==i&&(i=e,r(e))}))}},checkbox:function(e,t,n,r,i,a,o,s){var c=ua(s,e,"ngTrueValue",n.ngTrueValue,!0),u=ua(s,e,"ngFalseValue",n.ngFalseValue,!1);t.on("change",(function(e){r.$setViewValue(t[0].checked,e&&e.type)})),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return!1===e},r.$formatters.push((function(e){return se(e,c)})),r.$parsers.push((function(e){return e?c:u}))},hidden:R,button:R,submit:R,reset:R,file:R};function Qi(e){e.$formatters.push((function(t){return e.$isEmpty(t)?t:t.toString()}))}function ea(e,t,n,r,i,a){var o,s=f(t[0].type);if(!i.android){var c=!1;t.on("compositionstart",(function(){c=!0})),t.on("compositionupdate",(function(e){(F(e.data)||""===e.data)&&(c=!1)})),t.on("compositionend",(function(){c=!1,u()}))}var u=function(e){if(o&&(a.defer.cancel(o),o=null),!c){var i=t.val(),u=e&&e.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=Q(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))t.on("input",u);else{var l=function(e,t,n){o||(o=a.defer((function(){o=null,t&&t.value===n||u(e)})))};t.on("keydown",(function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||l(e,this,this.value)})),i.hasEvent("paste")&&t.on("paste cut drop",l)}t.on("change",u),Zi[s]&&r.$$hasNativeValidators&&s===n.type&&t.on("keydown wheel mousedown",(function(e){if(!o){var t=this.validity,n=t.badInput,r=t.typeMismatch;o=a.defer((function(){o=null,t.badInput===n&&t.typeMismatch===r||u(e)}))}})),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function ta(e,t){return function(n,r){var i,a;if(z(n))return n;if(B(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Hi.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n)){i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},x(i,(function(e,n){n<t.length&&(a[t[n]]=+e)}));var o=new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0);return a.yyyy<100&&o.setFullYear(a.yyyy),o}}return NaN}}function na(e,t,n,r){return function(i,a,o,s,c,u,l,f){ra(i,a,o,s,e),ea(0,a,o,s,c,u);var p,d,h="time"===e||"datetimelocal"===e;if(s.$parsers.push((function(n){return s.$isEmpty(n)?null:t.test(n)?w(n,p):void(s.$$parserName=e)})),s.$formatters.push((function(e){if(e&&!z(e))throw ja("datefmt","Expected `{0}` to be a date",e);if(b(e)){p=e;var t=s.$options.getOption("timezone");return t&&(d=t,p=be(p,t,!0)),function(e,t){var n=r;h&&B(s.$options.getOption("timeSecondsFormat"))&&(n=r.replace("ss.sss",s.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var i=l("date")(e,n,t);h&&s.$options.getOption("timeStripZeroSeconds")&&(i=i.replace(/(?::00)?(?:\.000)?$/,""));return i}(e,t)}return p=null,d=null,""})),N(o.min)||o.ngMin){var v=o.min||f(o.ngMin)(i),m=k(v);s.$validators.min=function(e){return!b(e)||F(m)||n(e)>=m},o.$observe("min",(function(e){e!==v&&(m=k(e),v=e,s.$validate())}))}if(N(o.max)||o.ngMax){var y=o.max||f(o.ngMax)(i),g=k(y);s.$validators.max=function(e){return!b(e)||F(g)||n(e)<=g},o.$observe("max",(function(e){e!==y&&(g=k(e),y=e,s.$validate())}))}function b(e){return e&&!(e.getTime&&e.getTime()!=e.getTime())}function k(e){return N(e)&&!z(e)?w(e)||void 0:e}function w(e,t){var r=s.$options.getOption("timezone");d&&d!==r&&(t=ge(t,ye(d)));var i=n(e,t);return!isNaN(i)&&r&&(i=be(i,r)),i}}}function ra(e,t,n,r,i){var a=t[0];(r.$$hasNativeValidators=L(a.validity))&&r.$parsers.push((function(e){var n=t.prop("validity")||{};if(!n.badInput&&!n.typeMismatch)return e;r.$$parserName=i}))}function ia(e){e.$parsers.push((function(t){return e.$isEmpty(t)?null:Wi.test(t)?parseFloat(t):void(e.$$parserName="number")})),e.$formatters.push((function(t){if(!e.$isEmpty(t)){if(!H(t))throw ja("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}))}function aa(e){return N(e)&&!H(e)&&(e=parseFloat(e)),E(e)?void 0:e}function oa(e){return(0|e)===e}function sa(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function ca(e,t,n){var r=Number(e),i=!oa(r),a=!oa(t),o=!oa(n);if(i||a||o){var s=i?sa(r):0,c=a?sa(t):0,u=o?sa(n):0,l=Math.max(s,c,u),f=Math.pow(10,l);r*=f,t*=f,n*=f,i&&(r=Math.round(r)),a&&(t=Math.round(t)),o&&(n=Math.round(n))}return(r-t)%n==0}function ua(e,t,n,r,i){var a;if(N(r)){if(!(a=e(r)).constant)throw ja("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(t)}return i}var la=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,o,s){s[0]&&(Xi[f(o.type)]||Xi.text)(i,a,o,s[0],t,e,n,r)}}}}],fa=function(){var e={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(e){this.setAttribute("value",e)}};return{restrict:"E",priority:200,compile:function(t,n){if("hidden"===f(n.type))return{pre:function(t,n,r,i){var a=n[0];a.parentNode&&a.parentNode.insertBefore(a,a.nextSibling),Object.defineProperty&&Object.defineProperty(a,"value",e)}}}}},pa=/^(true|false|\d+)$/,da=function(){function e(e,t,n){var r=N(n)?n:9===a?"":null;e.prop("value",r),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,n){return pa.test(n.ngValue)?function(t,n,r){e(n,r,t.$eval(r.ngValue))}:function(t,n,r){t.$watch(r.ngValue,(function(t){e(n,r,t)}))}}}},ha=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,(function(e){n.textContent=Le(e)}))}}}}],va=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var a=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,a.expressions),r=r[0],i.$observe("ngBindTemplate",(function(e){r.textContent=F(e)?"":e}))}}}}],ma=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var a=t(i.ngBindHtml),o=t(i.ngBindHtml,(function(t){return e.valueOf(t)}));return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(o,(function(){var n=a(t);r.html(e.getTrustedHtml(n)||"")}))}}}}],ya=T({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push((function(){e.$eval(n.ngChange)}))}});function ga(e,t){var n;return e="ngClass"+e,["$parse",function(o){return{restrict:"AC",link:function(s,c,u){var l,f=c.data("$classCounts"),p=!0;function d(e,t){var n=[];return x(e,(function(e){(t>0||f[e])&&(f[e]=(f[e]||0)+t,f[e]===+(t>0)&&n.push(e))})),n.join(" ")}f||(f=Ne(),c.data("$classCounts",f)),"ngClass"!==e&&(n||(n=o("$index",(function(e){return 1&e}))),s.$watch(n,(function(e){e===t?(n=d(i(n=l),1),u.$addClass(n)):function(e){e=d(i(e),-1),u.$removeClass(e)}(l);var n;p=e}))),s.$watch(o(u[e],a),(function(e){p===t&&function(e,t){var n=i(e),a=i(t),o=r(n,a),s=r(a,n),c=d(o,-1),l=d(s,1);u.$addClass(l),u.$removeClass(c)}(l,e);l=e}))}}}];function r(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],a=0;a<t.length;a++)if(i===t[a])continue e;n.push(i)}return n}function i(e){return e&&e.split(" ")}function a(e){if(!e)return e;var t=e;return V(e)?t=e.map(a).join(" "):L(e)?t=Object.keys(e).filter((function(t){return e[t]})).join(" "):B(e)||(t=e+""),t}}var ba=ga("",!0),ka=ga("Odd",0),wa=ga("Even",1),xa=Ei({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Sa=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],$a={},_a={blur:!0,focus:!0};function Ma(e,t,n,r,i,a){return{restrict:"A",compile:function(o,s){var c=e(s[r]);return function(e,r){r.on(i,(function(r){var i=function(){c(e,{$event:r})};if(t.$$phase)if(a)e.$evalAsync(i);else try{i()}catch(e){n(e)}else e.$apply(i)}))}}}}x("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(e){var t=hn("ng-"+e);$a[t]=["$parse","$rootScope","$exceptionHandler",function(n,r,i){return Ma(n,r,i,t,e,_a[e])}]}));var Ca=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,c,u;n.$watch(i.ngIf,(function(n){n?c||o((function(n,a){c=a,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)})):(u&&(u.remove(),u=null),c&&(c.$destroy(),c=null),s&&(u=Fe(s.clone),e.leave(u).done((function(e){!1!==e&&(u=null)})),s=null))}))}}}],Aa=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(r,i){var a=i.ngInclude||i.src,o=i.onload||"",s=i.autoscroll;return function(r,i,c,u,l){var f,p,d,h=0,v=function(){p&&(p.remove(),p=null),f&&(f.$destroy(),f=null),d&&(n.leave(d).done((function(e){!1!==e&&(p=null)})),p=d,d=null)};r.$watch(a,(function(a){var c=function(e){!1===e||!N(s)||s&&!r.$eval(s)||t()},p=++h;a?(e(a,!0).then((function(e){if(!r.$$destroyed&&p===h){var t=r.$new();u.template=e;var s=l(t,(function(e){v(),n.enter(e,null,i).done(c)}));d=s,(f=t).$emit("$includeContentLoaded",a),r.$eval(o)}}),(function(){r.$$destroyed||p===h&&(v(),r.$emit("$includeContentError",a))})),r.$emit("$includeContentRequested",a)):(v(),u.template=null)}))}}}}],Oa=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,a){if(m.call(r[0]).match(/SVG/))return r.empty(),void t(at(a.template,e.document).childNodes)(n,(function(e){r.append(e)}),{futureParentElement:r});r.html(a.template),t(r.contents())(n)}}}],Ia=Ei({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ea=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var i=n.ngList||", ",a="false"!==n.ngTrim,o=a?Q(i):i;r.$parsers.push((function(e){if(!F(e)){var t=[];return e&&x(e.split(o),(function(e){e&&t.push(a?Q(e):e)})),t}})),r.$formatters.push((function(e){if(V(e))return e.join(i)})),r.$isEmpty=function(e){return!e||!e.length}}}},Da="ng-valid",Ra="ng-invalid",Pa="ng-pristine",Ta="ng-dirty",ja=i("ngModel");function Fa(e,t,n,r,i,a,o,s,c){var u;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(e),this.$$parentForm=Pi,this.$options=Na,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=e,this.$$rootScope=e.$root,this.$$attr=n,this.$$element=r,this.$$animate=a,this.$$timeout=o,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,Li(this),(u=this).$$scope.$watch((function(e){var t=u.$$ngModelGet(e);return t===u.$modelValue||u.$modelValue!=u.$modelValue&&t!=t||u.$$setModelValue(t),t}))}Fa.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Fa.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return K(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){K(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw ja("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,ke(this.$$element))},$render:R,$isEmpty:function(e){return F(e)||""===e||null===e||e!=e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Ta),this.$$animate.addClass(this.$$element,Pa)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Pa),this.$$animate.addClass(this.$$element,Ta),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!E(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),a=this;this.$$runValidators(t,e,(function(e){i||n===e||(a.$modelValue=e?t:void 0,a.$modelValue!==r&&a.$$writeModelToScope())}))}},$$runValidators:function(e,t,n){this.$$currentValidationRunId++;var r,i,a=this.$$currentValidationRunId,o=this;(function(){var e=o.$$parserName;if(!F(o.$$parserValid))return o.$$parserValid||(x(o.$validators,(function(e,t){s(t,null)})),x(o.$asyncValidators,(function(e,t){s(t,null)}))),s(e,o.$$parserValid),o.$$parserValid;s(e,null);return!0})()?!function(){var n=!0;if(x(o.$validators,(function(r,i){var a=Boolean(r(e,t));n=n&&a,s(i,a)})),!n)return x(o.$asyncValidators,(function(e,t){s(t,null)})),!1;return!0}()?c(!1):(r=[],i=!0,x(o.$asyncValidators,(function(n,a){var o=n(e,t);if(!Z(o))throw ja("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",o);s(a,void 0),r.push(o.then((function(){s(a,!0)}),(function(){i=!1,s(a,!1)})))})),r.length?o.$$q.all(r).then((function(){c(i)}),R):c(!0)):c(!1);function s(e,t){a===o.$$currentValidationRunId&&o.$setValidity(e,t)}function c(e){a===o.$$currentValidationRunId&&n(e)}},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var e=this.$$lastCommittedViewValue,t=this;if(this.$$parserValid=!F(e)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(F(e=this.$parsers[n](e))){this.$$parserValid=!1;break}E(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function a(){t.$modelValue!==r&&t.$$writeModelToScope()}this.$$rawModelValue=e,i&&(this.$modelValue=e,a()),this.$$runValidators(e,this.$$lastCommittedViewValue,(function(n){i||(t.$modelValue=n?e:void 0,a())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),x(this.$viewChangeListeners,(function(e){try{e()}catch(e){this.$$exceptionHandler(e)}}),this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");H(t[e])?t=t[e]:H(t.default)&&-1===this.$options.getOption("updateOn").indexOf(e)?t=t.default:H(t["*"])&&(t=t["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),t):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e),this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();this.$viewValue!==e&&(this.$$updateEmptyClasses(e),this.$viewValue=this.$$lastCommittedViewValue=e,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,R))},$$format:function(){for(var e=this.$formatters,t=e.length,n=this.$modelValue;t--;)n=e[t](n);return n},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}},Ui({clazz:Fa,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Na,La=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Fa,priority:1,compile:function(t){return t.addClass(Pa).addClass("ng-untouched").addClass(Da),{pre:function(e,t,n,r){var i=r[0],a=r[1]||i.$$parentForm,o=r[2];o&&(i.$options=o.$options),i.$$initGetterSetters(),a.$addControl(i),n.$observe("name",(function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)})),e.$on("$destroy",(function(){i.$$parentForm.$removeControl(i)}))},post:function(t,n,r,i){var a=i[0];function o(){a.$setTouched()}a.$$setUpdateOnEvents(),n.on("blur",(function(){a.$touched||(e.$$phase?t.$evalAsync(o):t.$apply(o))}))}}}}}],Ua=/(\s+|^)default(\s+|$)/;function Ba(e){this.$$options=e}Ba.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return x(e=A({},e),(function(n,r){"$inherit"===n?"*"===r?t=!0:(e[r]=this.$$options[r],"updateOn"===r&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(e.updateOnDefault=!1,e[r]=Q(n.replace(Ua,(function(){return e.updateOnDefault=!0," "}))))}),this),t&&(delete e["*"],za(e,this.$$options)),za(e,Na.$$options),new Ba(e)}},Na=new Ba({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Ha=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Na,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}};function za(e,t){x(t,(function(t,n){N(e[n])||(e[n]=t)}))}var Va=Ei({terminal:!0,priority:1e3}),Wa=i("ngOptions"),Ka=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,qa=["$compile","$document","$parse",function(t,n,r){var i=e.document.createElement("option"),a=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=R},post:function(e,s,c,u){for(var l=u[0],f=u[1],p=c.multiple,d=0,h=s.children(),v=h.length;d<v;d++)if(""===h[d].value){l.hasEmptyOption=!0,l.emptyOption=h.eq(d);break}s.empty();var m,y=!!l.emptyOption;o(i.cloneNode(!1)).val("?");var g=function(e,t,n){var i=e.match(Ka);if(!i)throw Wa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,ke(t));var a=i[5]||i[7],o=i[6],s=/ as /.test(i[0])&&i[1],c=i[9],u=r(i[2]?i[1]:a),l=s&&r(s)||u,f=c&&r(c),p=c?function(e,t){return f(n,t)}:function(e){return Rt(e)},d=function(e,t){return p(e,b(e,t))},h=r(i[2]||i[1]),v=r(i[3]||""),m=r(i[4]||""),y=r(i[8]),g={},b=o?function(e,t){return g[o]=t,g[a]=e,g}:function(e){return g[a]=e,g};function k(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function x(e){var t;if(!o&&w(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}return{trackBy:c,getTrackByValue:d,getWatchables:r(y,(function(e){for(var t=[],r=x(e=e||[]),a=r.length,o=0;o<a;o++){var s=e===r?o:r[o],c=e[s],u=b(c,s),l=p(c,u);if(t.push(l),i[2]||i[1]){var f=h(n,u);t.push(f)}if(i[4]){var d=m(n,u);t.push(d)}}return t})),getOptions:function(){for(var e=[],t={},r=y(n)||[],i=x(r),a=i.length,o=0;o<a;o++){var s=r===i?o:i[o],u=r[s],f=b(u,s),g=l(n,f),w=p(g,f),S=new k(w,g,h(n,f),v(n,f),m(n,f));e.push(S),t[w]=S}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[d(e)]},getViewValueFromOption:function(e){return c?ae(e.viewValue):e.viewValue}}}}}(c.ngOptions,s,e),b=n[0].createDocumentFragment();function k(e,t){var n=i.cloneNode(!1);t.appendChild(n),function(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label);t.value=e.selectValue}(e,n)}function S(e){var t=m.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}l.generateUnknownOptionValue=function(e){return"?"},p?(l.writeValue=function(e){if(m){var t=e&&e.map(S)||[];m.items.forEach((function(e){e.element.selected&&!re(t,e)&&(e.element.selected=!1)}))}},l.readValue=function(){var e=s.val()||[],t=[];return x(e,(function(e){var n=m.selectValueMap[e];n&&!n.disabled&&t.push(m.getViewValueFromOption(n))})),t},g.trackBy&&e.$watchCollection((function(){if(V(f.$viewValue))return f.$viewValue.map((function(e){return g.getTrackByValue(e)}))}),(function(){f.$render()}))):(l.writeValue=function(e){if(m){var t=s[0].options[s[0].selectedIndex],n=m.getOptionFromViewValue(e);t&&t.removeAttribute("selected"),n?(s[0].value!==n.selectValue&&(l.removeUnknownOption(),s[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):l.selectUnknownOrEmptyOption(e)}},l.readValue=function(){var e=m.selectValueMap[s.val()];return e&&!e.disabled?(l.unselectEmptyOption(),l.removeUnknownOption(),m.getViewValueFromOption(e)):null},g.trackBy&&e.$watch((function(){return g.getTrackByValue(f.$viewValue)}),(function(){f.$render()}))),y&&(t(l.emptyOption)(e),s.prepend(l.emptyOption),8===l.emptyOption[0].nodeType?(l.hasEmptyOption=!1,l.registerOption=function(e,t){""===t.val()&&(l.hasEmptyOption=!0,l.emptyOption=t,l.emptyOption.removeClass("ng-scope"),f.$render(),t.on("$destroy",(function(){var e=l.$isEmptyOptionSelected();l.hasEmptyOption=!1,l.emptyOption=void 0,e&&f.$render()})))}):l.emptyOption.removeClass("ng-scope")),e.$watchCollection(g.getWatchables,(function(){var e=m&&l.readValue();if(m)for(var t=m.items.length-1;t>=0;t--){var n=m.items[t];N(n.group)?St(n.element.parentNode):St(n.element)}m=g.getOptions();var r={};if(m.items.forEach((function(e){var t;N(e.group)?((t=r[e.group])||(t=a.cloneNode(!1),b.appendChild(t),t.label=null===e.group?"null":e.group,r[e.group]=t),k(e,t)):k(e,b)})),s[0].appendChild(b),f.$render(),!f.$isEmpty(e)){var i=l.readValue();(g.trackBy||p?se(e,i):e===i)||(f.$setViewValue(i),f.$render())}}))}}}}],Ja=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,o,s){var c,u=s.count,l=s.$attr.when&&o.attr(s.$attr.when),p=s.offset||0,d=a.$eval(l)||{},h={},v=t.startSymbol(),m=t.endSymbol(),y=v+u+"-"+p+m,g=b.noop;function k(e){o.text(e||"")}x(s,(function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+f(n[2]);d[r]=o.attr(s.$attr[t])}})),x(d,(function(e,n){h[n]=t(e.replace(r,y))})),a.$watch(u,(function(t){var r=parseFloat(t),i=E(r);if(i||r in d||(r=e.pluralCat(r-p)),!(r===c||i&&E(c))){g();var o=h[r];F(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+l),g=R,k()):g=a.$watch(o,k),c=r}}))}}}],Ga=i("ngRef"),Ya=["$parse",function(e){return{priority:-1,restrict:"A",compile:function(t,n){var r=hn(ne(t)),i=e(n.ngRef),a=i.assign||function(){throw Ga("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(e,t,o){var s;if(o.hasOwnProperty("ngRefRead")){if("$element"===o.ngRefRead)s=t;else if(!(s=t.data("$"+o.ngRefRead+"Controller")))throw Ga("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',o.ngRefRead,n.ngRef)}else s=t.data("$"+r+"Controller");a(e,s=s||t),t.on("$destroy",(function(){i(e)===s&&a(e,null)}))}}}}],Za=["$parse","$animate","$compile",function(e,t,n){var r=i("ngRepeat"),a=function(e,t,n,r,i,a,o){e[n]=r,i&&(e[i]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},o=function(e){return e.clone[0]},s=function(e){return e.clone[e.clone.length-1]},c=function(e,t,n){return Rt(n)},u=function(e,t){return t};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,f){var p=f.ngRepeat,d=n.$$createComment("end ngRepeat",p),h=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!h)throw r("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var v=h[1],m=h[2],y=h[3],g=h[4];if(!(h=v.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw r("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v);var b,k=h[3]||h[1],S=h[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw r("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);if(g){var $={$id:Rt},_=e(g);b=function(e,t,n,r){return S&&($[S]=t),$[k]=n,$.$index=r,_(e,$)}}return function(e,n,i,f,h){var v=Ne();e.$watchCollection(m,(function(i){var f,m,g,_,M,C,A,O,I,E,D,R,P=n[0],T=Ne();if(y&&(e[y]=i),w(i))I=i,O=b||c;else for(var j in O=b||u,I=[],i)l.call(i,j)&&"$"!==j.charAt(0)&&I.push(j);for(_=I.length,D=new Array(_),f=0;f<_;f++)if(M=i===I?f:I[f],C=i[M],A=O(e,M,C,f),v[A])E=v[A],delete v[A],T[A]=E,D[f]=E;else{if(T[A])throw x(D,(function(e){e&&e.scope&&(v[e.id]=e)})),r("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,A,C);D[f]={id:A,scope:void 0,clone:void 0},T[A]=!0}for(var F in $&&($[k]=void 0),v){if(R=Fe((E=v[F]).clone),t.leave(R),R[0].parentNode)for(f=0,m=R.length;f<m;f++)R[f].$$NG_REMOVED=!0;E.scope.$destroy()}for(f=0;f<_;f++)if(M=i===I?f:I[f],C=i[M],(E=D[f]).scope){g=P;do{g=g.nextSibling}while(g&&g.$$NG_REMOVED);o(E)!==g&&t.move(Fe(E.clone),null,P),P=s(E),a(E.scope,f,k,C,S,M,_)}else h((function(e,n){E.scope=n;var r=d.cloneNode(!1);e[e.length++]=r,t.enter(e,null,P),P=r,E.clone=e,T[E.id]=E,a(E.scope,f,k,C,S,M,_)}));v=T}))}}}}],Xa=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,(function(t){e[t?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],Qa=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,(function(t){e[t?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],eo=Ei((function(e,t,n){e.$watchCollection(n.ngStyle,(function(e,n){n&&e!==n&&x(n,(function(e,n){t.css(n,"")})),e&&t.css(e)}))})),to=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var o=i.ngSwitch||i.on,s=[],c=[],u=[],l=[],f=function(e,t){return function(n){!1!==n&&e.splice(t,1)}};n.$watch(o,(function(n){for(var r,i;u.length;)e.cancel(u.pop());for(r=0,i=l.length;r<i;++r){var o=Fe(c[r].clone);l[r].$destroy(),(u[r]=e.leave(o)).done(f(u,r))}c.length=0,l.length=0,(s=a.cases["!"+n]||a.cases["?"])&&x(s,(function(n){n.transclude((function(r,i){l.push(i);var a=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var o={clone:r};c.push(o),e.enter(r,a.parent(),a)}))}))}))}}}],no=Ei({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){x(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(e,t,n){return n[t-1]!==e})),(function(e){r.cases["!"+e]=r.cases["!"+e]||[],r.cases["!"+e].push({transclude:i,element:t})}))}}),ro=Ei({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),io=i("ngTransclude"),ao=["$compile",function(e){return{restrict:"EAC",compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,i,a){if(!a)throw io("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",ke(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var o=r.ngTransclude||r.ngTranscludeSlot;function s(){n(e,(function(e){t.append(e)}))}a((function(e,n){e.length&&function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.nodeType!==Ue||r.nodeValue.trim())return!0}}(e)?t.append(e):(s(),n.$destroy())}),null,o),o&&!a.isSlotFilled(o)&&s()}}}}],oo=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],so={$setViewValue:R,$render:R};function co(e,t){e.prop("selected",t),e.attr("selected",t)}var uo=["$element","$scope",function(t,n){var r=this,i=new jt;r.selectValueMap={},r.ngModelCtrl=so,r.multiple=!1,r.unknownOption=o(e.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(e){var n=r.generateUnknownOptionValue(e);r.unknownOption.val(n),t.prepend(r.unknownOption),co(r.unknownOption,!0),t.val(n)},r.updateUnknownOption=function(e){var n=r.generateUnknownOptionValue(e);r.unknownOption.val(n),co(r.unknownOption,!0),t.val(n)},r.generateUnknownOptionValue=function(e){return"? "+Rt(e)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(t.val(""),co(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&co(r.emptyOption,!1)},n.$on("$destroy",(function(){r.renderUnknownOption=R})),r.readValue=function(){var e=t.val(),n=e in r.selectValueMap?r.selectValueMap[e]:e;return r.hasOption(n)?n:null},r.writeValue=function(e){var n=t[0].options[t[0].selectedIndex];if(n&&co(o(n),!1),r.hasOption(e)){r.removeUnknownOption();var i=Rt(e);t.val(i in r.selectValueMap?i:e);var a=t[0].options[t[0].selectedIndex];co(o(a),!0)}else r.selectUnknownOrEmptyOption(e)},r.addOption=function(e,t){if(8!==t[0].nodeType){je(e,'"option value"'),""===e&&(r.hasEmptyOption=!0,r.emptyOption=t);var n=i.get(e)||0;i.set(e,n+1),s()}},r.removeOption=function(e){var t=i.get(e);t&&(1===t?(i.delete(e),""===e&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(e,t-1))},r.hasOption=function(e){return!!i.get(e)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return t[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&t[0].options[t[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(e){null==e&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(e):r.renderUnknownOption(e)};var a=!1;function s(){a||(a=!0,n.$$postDigest((function(){a=!1,r.ngModelCtrl.$render()})))}var c=!1;function u(e){c||(c=!0,n.$$postDigest((function(){n.$$destroyed||(c=!1,r.ngModelCtrl.$setViewValue(r.readValue()),e&&r.ngModelCtrl.$render())})))}r.registerOption=function(e,t,n,i,a){var o,c;n.$attr.ngValue?n.$observe("value",(function(e){var n,i=t.prop("selected");N(c)&&(r.removeOption(o),delete r.selectValueMap[c],n=!0),c=Rt(e),o=e,r.selectValueMap[c]=e,r.addOption(e,t),t.attr("value",c),n&&i&&u()})):i?n.$observe("value",(function(e){var n;r.readValue();var i=t.prop("selected");N(o)&&(r.removeOption(o),n=!0),o=e,r.addOption(e,t),n&&i&&u()})):a?e.$watch(a,(function(e,i){n.$set("value",e);var a=t.prop("selected");i!==e&&r.removeOption(i),r.addOption(e,t),i&&a&&u()})):r.addOption(n.value,t);n.$observe("disabled",(function(e){("true"===e||e&&t.prop("selected"))&&(r.multiple?u(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))})),t.on("$destroy",(function(){var e=r.readValue(),t=n.value;r.removeOption(t),s(),(r.multiple&&e&&-1!==e.indexOf(t)||e===t)&&u(!0)}))}}],lo=function(){return{restrict:"E",require:["select","?ngModel"],controller:uo,priority:1,link:{pre:function(e,t,n,r){var i=r[0],a=r[1];if(!a)return void(i.registerOption=R);if(i.ngModelCtrl=a,t.on("change",(function(){i.removeUnknownOption(),e.$apply((function(){a.$setViewValue(i.readValue())}))})),n.multiple){i.multiple=!0,i.readValue=function(){var e=[];return x(t.find("option"),(function(t){if(t.selected&&!t.disabled){var n=t.value;e.push(n in i.selectValueMap?i.selectValueMap[n]:n)}})),e},i.writeValue=function(e){x(t.find("option"),(function(t){var n=!!e&&(re(e,t.value)||re(e,i.selectValueMap[t.value]));n!==t.selected&&co(o(t),n)}))};var s,c=NaN;e.$watch((function(){c!==a.$viewValue||se(s,a.$viewValue)||(s=Be(a.$viewValue),a.$render()),c=a.$viewValue})),a.$isEmpty=function(e){return!e||0===e.length}}},post:function(e,t,n,r){var i=r[1];if(!i)return;var a=r[0];i.$render=function(){a.writeValue(i.$viewValue)}}}}},fo=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,i;return N(n.ngValue)||(N(n.value)?r=e(n.value,!0):(i=e(t.text(),!0))||n.$set("value",t.text())),function(e,t,n){var a=t.parent(),o=a.data("$selectController")||a.parent().data("$selectController");o&&o.registerOption(e,t,n,r,i)}}}}],po=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,i){if(i){var a=r.hasOwnProperty("required")||e(r.ngRequired)(t);r.ngRequired||(r.required=!0),i.$validators.required=function(e,t){return!a||!i.$isEmpty(t)},r.$observe("required",(function(e){a!==e&&(a=e,i.$validate())}))}}}}],ho=["$parse",function(e){return{restrict:"A",require:"?ngModel",compile:function(t,n){var r,i;return n.ngPattern&&(r=n.ngPattern,i="/"===n.ngPattern.charAt(0)&&u.test(n.ngPattern)?function(){return n.ngPattern}:e(n.ngPattern)),function(e,t,n,a){if(a){var o=n.pattern;n.ngPattern?o=i(e):r=n.pattern;var s=yo(o,r,t);n.$observe("pattern",(function(e){var n=s;s=yo(e,r,t),(n&&n.toString())!==(s&&s.toString())&&a.$validate()})),a.$validators.pattern=function(e,t){return a.$isEmpty(t)||F(s)||s.test(t)}}}}}}],vo=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,i){if(i){var a=r.maxlength||e(r.ngMaxlength)(t),o=go(a);r.$observe("maxlength",(function(e){a!==e&&(o=go(e),a=e,i.$validate())})),i.$validators.maxlength=function(e,t){return o<0||i.$isEmpty(t)||t.length<=o}}}}}],mo=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,i){if(i){var a=r.minlength||e(r.ngMinlength)(t),o=go(a)||-1;r.$observe("minlength",(function(e){a!==e&&(o=go(e)||-1,a=e,i.$validate())})),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=o}}}}}];function yo(e,t,n){if(e){if(B(e)&&(e=new RegExp("^"+e+"$")),!e.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",t,e,ke(n));return e}}function go(e){var t=I(e);return E(t)?-1:t}e.angular.bootstrap?e.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var t;if(!Re){var n=ue();(s=F(n)?e.jQuery:n?e[n]:void 0)&&s.fn.on?(o=s,A(s.fn,{scope:_t.scope,isolateScope:_t.isolateScope,controller:_t.controller,injector:_t.injector,inheritedData:_t.inheritedData})):o=st,t=o.cleanData,o.cleanData=function(e){for(var n,r,i=0;null!=(r=e[i]);i++)(n=(o._data(r)||{}).events)&&n.$destroy&&o(r).triggerHandler("$destroy");t(e)},b.element=o,Re=!0}}(),function(t){A(t,{errorHandlingConfig:n,bootstrap:Ae,copy:ae,extend:A,merge:O,equals:se,element:o,forEach:x,injector:Kt,noop:R,bind:pe,toJson:he,fromJson:ve,identity:P,isUndefined:F,isDefined:N,isString:B,isFunction:K,isObject:L,isNumber:H,isElement:te,isArray:V,version:ze,isDate:z,callbacks:{$$counter:0},getTestability:Ie,reloadWithDebugInfo:Oe,$$minErr:i,$$csp:ce,$$encodeUriSegment:Se,$$encodeUriQuery:$e,$$lowercase:f,$$stringify:Le,$$uppercase:p}),(c=function(e){var t=i("$injector"),n=i("ng");function r(e,t,n){return e[t]||(e[t]=n())}var a=r(e,"angular",Object);return a.$$minErr=a.$$minErr||i,r(a,"module",(function(){var e={};return function(i,a,o){var s={};return function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name",t)}(i,"module"),a&&e.hasOwnProperty(i)&&(e[i]=null),r(e,i,(function(){if(!a)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var e=[],r=[],c=[],u=f("$injector","invoke","push",r),l={_invokeQueue:e,_configBlocks:r,_runBlocks:c,info:function(e){if(N(e)){if(!L(e))throw n("aobj","Argument '{0}' must be an object","value");return s=e,this}return s},requires:a,name:i,provider:p("$provide","provider"),factory:p("$provide","factory"),service:p("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),decorator:p("$provide","decorator",r),animation:p("$animateProvider","register"),filter:p("$filterProvider","register"),controller:p("$controllerProvider","register"),directive:p("$compileProvider","directive"),component:p("$compileProvider","component"),config:u,run:function(e){return c.push(e),this}};return o&&u(o),l;function f(t,n,r,i){return i||(i=e),function(){return i[r||"push"]([t,n,arguments]),l}}function p(t,n,r){return r||(r=e),function(e,a){return a&&K(a)&&(a.$$moduleName=i),r.push([t,n,arguments]),l}}}))}}))}(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Fr}),e.provider("$compile",ln).directive({a:Di,input:la,textarea:la,form:Fi,script:oo,select:lo,option:fo,ngBind:ha,ngBindHtml:ma,ngBindTemplate:va,ngClass:ba,ngClassEven:wa,ngClassOdd:ka,ngCloak:xa,ngController:Sa,ngForm:Ni,ngHide:Qa,ngIf:Ca,ngInclude:Aa,ngInit:Ia,ngNonBindable:Va,ngPluralize:Ja,ngRef:Ya,ngRepeat:Za,ngShow:Xa,ngStyle:eo,ngSwitch:to,ngSwitchWhen:no,ngSwitchDefault:ro,ngOptions:qa,ngTransclude:ao,ngModel:La,ngList:Ea,ngChange:ya,pattern:ho,ngPattern:ho,required:po,ngRequired:po,minlength:mo,ngMinlength:mo,maxlength:vo,ngMaxlength:vo,ngValue:da,ngModelOptions:Ha}).directive({ngInclude:Oa,input:fa}).directive(Ri).directive($a),e.provider({$anchorScroll:qt,$animate:Qt,$animateCss:nn,$$animateJs:Zt,$$animateQueue:Xt,$$AnimateRunner:tn,$$animateAsyncRun:en,$browser:an,$cacheFactory:on,$controller:kn,$document:wn,$$isDocumentHidden:xn,$exceptionHandler:Sn,$filter:ci,$$forceReflow:$n,$interpolate:Hn,$interval:Vn,$$intervalFactory:Wn,$http:Nn,$httpParamSerializer:En,$httpParamSerializerJQLike:Dn,$httpBackend:Un,$xhrFactory:Ln,$jsonpCallbacks:Kn,$location:ur,$log:lr,$parse:Ar,$rootScope:jr,$q:Or,$$q:Ir,$sce:Vr,$sceDelegate:zr,$sniffer:Wr,$$taskTrackerFactory:Kr,$templateCache:sn,$templateRequest:Gr,$$testability:Yr,$timeout:Xr,$window:ai,$$rAF:Tr,$$jqLite:Dt,$$Map:Ft,$$cookieReader:si})}]).info({angularVersion:"1.7.9"})}(b),b.module("ngLocale",[],["$provide",function(e){var t="one",n="other";e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,r){var i=0|e,a=function(e,t){var n=t;void 0===n&&(n=Math.min(function(e){var t=(e+="").indexOf(".");return-1==t?0:e.length-t-1}(e),3));var r=Math.pow(10,n);return{v:n,f:(e*r|0)%r}}(e,r);return 1==i&&0==a.v?t:n}})}]),o((function(){Ce(e.document,Ae)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(e,t,n){"use strict";var r,i,a,o,s,c,u,l,f,p=angular.$$minErr("$sanitize");angular.module("ngSanitize",[]).provider("$sanitize",(function(){var e=!1,t=!1;this.$get=["$$sanitizeUri",function(n){return e=!0,t&&i(x,k),function(e){var t=[];return l(e,f(t,(function(e,t){return!/^unsafe:/.test(n(e,t))}))),t.join("")}}],this.enableSvg=function(e){return s(e)?(t=e,this):t},this.addValidElements=function(t){return e||(o(t)&&(t={htmlElements:t}),O(k,t.svgElements),O(h,t.htmlVoidElements),O(x,t.htmlVoidElements),O(x,t.htmlElements)),this},this.addValidAttrs=function(t){return e||i(M,A(t,!0)),this},r=angular.bind,i=angular.extend,a=angular.forEach,o=angular.isArray,s=angular.isDefined,c=angular.$$lowercase,angular.noop,l=function(e,t){null==e?e="":"string"!=typeof e&&(e=""+e);var n=I(e);if(!n)return"";var r=5;do{if(0===r)throw p("uinput","Failed to sanitize html because the input is unstable");r--,e=n.innerHTML,n=I(e)}while(e!==n.innerHTML);var i=n.firstChild;for(;i;){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),E(i.attributes));break;case 3:t.chars(i.textContent)}var a;if(!((a=i.firstChild)||(1===i.nodeType&&t.end(i.nodeName.toLowerCase()),a=P("nextSibling",i))))for(;null==a&&(i=P("parentNode",i))!==n;)a=P("nextSibling",i),1===i.nodeType&&t.end(i.nodeName.toLowerCase());i=a}for(;i=n.firstChild;)n.removeChild(i)},f=function(e,t){var n=!1,i=r(e,e.push);return{start:function(e,r){e=c(e),!n&&w[e]&&(n=e),n||!0!==x[e]||(i("<"),i(e),a(r,(function(n,r){var a=c(r),o="img"===e&&"src"===a||"background"===a;!0!==M[a]||!0===S[a]&&!t(n,o)||(i(" "),i(r),i('="'),i(D(n)),i('"'))})),i(">"))},end:function(e){e=c(e),n||!0!==x[e]||!0===h[e]||(i("</"),i(e),i(">")),e==n&&(n=!1)},chars:function(e){n||i(D(e))}}},u=window.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/([^#-~ |!])/g,h=C("area,br,col,hr,img,wbr"),v=C("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m=C("rp,rt"),y=i({},m,v),g=i({},v,C("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul,progress")),b=i({},m,C("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),k=C("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),w=C("script,style"),x=i({},h,g,b,y),S=C("background,cite,href,longdesc,src,xlink:href,xml:base"),$=C("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width,style"),_=C("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),M=i({},S,_,$);function C(e,t){return A(e.split(","),t)}function A(e,t){var n,r={};for(n=0;n<e.length;n++)r[t?c(e[n]):e[n]]=!0;return r}function O(e,t){t&&t.length&&i(e,A(t))}var I=function(e,t){var n;if(!t||!t.implementation)throw p("noinert","Can't create an inert html document");var r=((n=t.implementation.createHTMLDocument("inert")).documentElement||n.getDocumentElement()).querySelector("body");return r.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',r.querySelector("svg")?(r.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',r.querySelector("svg img")?function(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;return n.firstChild.remove(),n}catch(e){return}}:function(e){r.innerHTML=e,t.documentMode&&R(r);return r}):function(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return}var n=new e.XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+t,!1),n.send(null);var r=n.response.body;return r.firstChild.remove(),r}}(window,window.document);function E(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function D(e){return e.replace(/&/g,"&amp;").replace(n,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(d,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function R(e){for(;e;){if(e.nodeType===window.Node.ELEMENT_NODE)for(var t=e.attributes,n=0,r=t.length;n<r;n++){var i=t[n],a=i.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(e.removeAttributeNode(i),n--,r--)}var o=e.firstChild;o&&R(o),e=P("nextSibling",e)}}function P(e,t){var n=t[e];if(n&&u.call(t,n))throw p("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}})).info({angularVersion:'"NG_VERSION_FULL"'})},function(e,t){!function(e){"use strict";var t=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function n(){var e=this;function t(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.build_tree=function(n){var r,i,a,o=e.dyn_tree,s=e.stat_desc.static_tree,c=e.stat_desc.elems,u=-1;for(n.heap_len=0,n.heap_max=573,r=0;r<c;r++)0!==o[2*r]?(n.heap[++n.heap_len]=u=r,n.depth[r]=0):o[2*r+1]=0;for(;n.heap_len<2;)o[2*(a=n.heap[++n.heap_len]=u<2?++u:0)]=1,n.depth[a]=0,n.opt_len--,s&&(n.static_len-=s[2*a+1]);for(e.max_code=u,r=Math.floor(n.heap_len/2);r>=1;r--)n.pqdownheap(o,r);a=c;do{r=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(o,1),i=n.heap[1],n.heap[--n.heap_max]=r,n.heap[--n.heap_max]=i,o[2*a]=o[2*r]+o[2*i],n.depth[a]=Math.max(n.depth[r],n.depth[i])+1,o[2*r+1]=o[2*i+1]=a,n.heap[1]=a++,n.pqdownheap(o,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(t){var n,r,i,a,o,s,c=e.dyn_tree,u=e.stat_desc.static_tree,l=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,d=0;for(a=0;a<=15;a++)t.bl_count[a]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(a=c[2*c[2*(r=t.heap[n])+1]+1]+1)>p&&(a=p,d++),c[2*r+1]=a,r>e.max_code||(t.bl_count[a]++,o=0,r>=f&&(o=l[r-f]),s=c[2*r],t.opt_len+=s*(a+o),u&&(t.static_len+=s*(u[2*r+1]+o)));if(0!==d){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,d-=2}while(d>0);for(a=p;0!==a;a--)for(r=t.bl_count[a];0!==r;)(i=t.heap[--n])>e.max_code||(c[2*i+1]!=a&&(t.opt_len+=(a-c[2*i+1])*c[2*i],c[2*i+1]=a),r--)}}(n),function(e,n,r){var i,a,o,s=[],c=0;for(i=1;i<=15;i++)s[i]=c=c+r[i-1]<<1;for(a=0;a<=n;a++)0!==(o=e[2*a+1])&&(e[2*a]=t(s[o]++,o))}(o,e.max_code,n.bl_count)}}function r(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i}n._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],n.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],n.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],n.d_code=function(e){return e<256?t[e]:t[256+(e>>>7)]},n.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],n.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],n.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],n.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],r.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],r.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],r.static_l_desc=new r(r.static_ltree,n.extra_lbits,257,286,15),r.static_d_desc=new r(r.static_dtree,n.extra_dbits,0,30,15),r.static_bl_desc=new r(null,n.extra_blbits,0,19,7);function i(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var a=[new i(0,0,0,0,0),new i(4,4,8,4,1),new i(4,5,16,8,1),new i(4,6,32,32,1),new i(4,4,16,16,2),new i(8,16,32,32,2),new i(8,16,128,128,2),new i(8,32,128,256,2),new i(32,128,258,1024,2),new i(32,258,258,4096,2)],o=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function s(e,t,n,r){var i=e[2*t],a=e[2*n];return i<a||i==a&&r[t]<=r[n]}function c(){var e,t,i,c,u,l,f,p,d,h,v,m,y,g,b,k,w,x,S,$,_,M,C,A,O,I,E,D,R,P,T,j,F,N,L,U,B,H,z,V,W,K=this,q=new n,J=new n,G=new n;function Y(){var e;for(e=0;e<286;e++)T[2*e]=0;for(e=0;e<30;e++)j[2*e]=0;for(e=0;e<19;e++)F[2*e]=0;T[512]=1,K.opt_len=K.static_len=0,U=H=0}function Z(e,t){var n,r,i=-1,a=e[1],o=0,s=7,c=4;for(0===a&&(s=138,c=3),e[2*(t+1)+1]=65535,n=0;n<=t;n++)r=a,a=e[2*(n+1)+1],++o<s&&r==a||(o<c?F[2*r]+=o:0!==r?(r!=i&&F[2*r]++,F[32]++):o<=10?F[34]++:F[36]++,o=0,i=r,0===a?(s=138,c=3):r==a?(s=6,c=3):(s=7,c=4))}function X(e){K.pending_buf[K.pending++]=e}function Q(e){X(255&e),X(e>>>8&255)}function ee(e,t){var n,r=t;W>16-r?(Q(V|=(n=e)<<W&65535),V=n>>>16-W,W+=r-16):(V|=e<<W&65535,W+=r)}function te(e,t){var n=2*e;ee(65535&t[n],65535&t[n+1])}function ne(e,t){var n,r,i=-1,a=e[1],o=0,s=7,c=4;for(0===a&&(s=138,c=3),n=0;n<=t;n++)if(r=a,a=e[2*(n+1)+1],!(++o<s&&r==a)){if(o<c)do{te(r,F)}while(0!=--o);else 0!==r?(r!=i&&(te(r,F),o--),te(16,F),ee(o-3,2)):o<=10?(te(17,F),ee(o-3,3)):(te(18,F),ee(o-11,7));o=0,i=r,0===a?(s=138,c=3):r==a?(s=6,c=3):(s=7,c=4)}}function re(){16==W?(Q(V),V=0,W=0):W>=8&&(X(255&V),V>>>=8,W-=8)}function ie(e,t){var r,i,a;if(K.pending_buf[B+2*U]=e>>>8&255,K.pending_buf[B+2*U+1]=255&e,K.pending_buf[N+U]=255&t,U++,0===e?T[2*t]++:(H++,e--,T[2*(n._length_code[t]+256+1)]++,j[2*n.d_code(e)]++),0==(8191&U)&&E>2){for(r=8*U,i=_-w,a=0;a<30;a++)r+=j[2*a]*(5+n.extra_dbits[a]);if(r>>>=3,H<Math.floor(U/2)&&r<Math.floor(i/2))return!0}return U==L-1}function ae(e,t){var r,i,a,o,s=0;if(0!==U)do{r=K.pending_buf[B+2*s]<<8&65280|255&K.pending_buf[B+2*s+1],i=255&K.pending_buf[N+s],s++,0===r?te(i,e):(te((a=n._length_code[i])+256+1,e),0!==(o=n.extra_lbits[a])&&ee(i-=n.base_length[a],o),r--,te(a=n.d_code(r),t),0!==(o=n.extra_dbits[a])&&ee(r-=n.base_dist[a],o))}while(s<U);te(256,e),z=e[513]}function oe(){W>8?Q(V):W>0&&X(255&V),V=0,W=0}function se(e,t,n){ee(0+(n?1:0),3),function(e,t,n){oe(),z=8,n&&(Q(t),Q(~t)),K.pending_buf.set(p.subarray(e,e+t),K.pending),K.pending+=t}(e,t,!0)}function ce(e,t,i){var a,o,s=0;E>0?(q.build_tree(K),J.build_tree(K),s=function(){var e;for(Z(T,q.max_code),Z(j,J.max_code),G.build_tree(K),e=18;e>=3&&0===F[2*n.bl_order[e]+1];e--);return K.opt_len+=3*(e+1)+5+5+4,e}(),a=K.opt_len+3+7>>>3,(o=K.static_len+3+7>>>3)<=a&&(a=o)):a=o=t+5,t+4<=a&&-1!=e?se(e,t,i):o==a?(ee(2+(i?1:0),3),ae(r.static_ltree,r.static_dtree)):(ee(4+(i?1:0),3),function(e,t,r){var i;for(ee(e-257,5),ee(t-1,5),ee(r-4,4),i=0;i<r;i++)ee(F[2*n.bl_order[i]+1],3);ne(T,e-1),ne(j,t-1)}(q.max_code+1,J.max_code+1,s+1),ae(T,j)),Y(),i&&oe()}function ue(t){ce(w>=0?w:-1,_-w,t),w=_,e.flush_pending()}function le(){var t,n,r,i;do{if(0===(i=d-C-_)&&0===_&&0===C)i=u;else if(-1==i)i--;else if(_>=u+u-262){p.set(p.subarray(u,u+u),0),M-=u,_-=u,w-=u,r=t=y;do{n=65535&v[--r],v[r]=n>=u?n-u:0}while(0!=--t);r=t=u;do{n=65535&h[--r],h[r]=n>=u?n-u:0}while(0!=--t);i+=u}if(0===e.avail_in)return;t=e.read_buf(p,_+C,i),(C+=t)>=3&&(m=((m=255&p[_])<<k^255&p[_+1])&b)}while(C<262&&0!==e.avail_in)}function fe(e){var t,n,r=O,i=_,a=A,o=_>u-262?_-(u-262):0,s=P,c=f,l=_+258,d=p[i+a-1],v=p[i+a];A>=R&&(r>>=2),s>C&&(s=C);do{if(p[(t=e)+a]==v&&p[t+a-1]==d&&p[t]==p[i]&&p[++t]==p[i+1]){i+=2,t++;do{}while(p[++i]==p[++t]&&p[++i]==p[++t]&&p[++i]==p[++t]&&p[++i]==p[++t]&&p[++i]==p[++t]&&p[++i]==p[++t]&&p[++i]==p[++t]&&p[++i]==p[++t]&&i<l);if(n=258-(l-i),i=l-258,n>a){if(M=e,a=n,n>=s)break;d=p[i+a-1],v=p[i+a]}}}while((e=65535&h[e&c])>o&&0!=--r);return a<=C?a:C}function pe(e){return e.total_in=e.total_out=0,e.msg=null,K.pending=0,K.pending_out=0,t=113,c=0,q.dyn_tree=T,q.stat_desc=r.static_l_desc,J.dyn_tree=j,J.stat_desc=r.static_d_desc,G.dyn_tree=F,G.stat_desc=r.static_bl_desc,V=0,W=0,z=8,Y(),function(){var e;for(d=2*u,v[y-1]=0,e=0;e<y-1;e++)v[e]=0;I=a[E].max_lazy,R=a[E].good_length,P=a[E].nice_length,O=a[E].max_chain,_=0,w=0,C=0,x=A=2,$=0,m=0}(),0}K.depth=[],K.bl_count=[],K.heap=[],T=[],j=[],F=[],K.pqdownheap=function(e,t){for(var n=K.heap,r=n[t],i=t<<1;i<=K.heap_len&&(i<K.heap_len&&s(e,n[i+1],n[i],K.depth)&&i++,!s(e,r,n[i],K.depth));)n[t]=n[i],t=i,i<<=1;n[t]=r},K.deflateInit=function(e,t,n,r,a,o){return r||(r=8),a||(a=8),o||(o=0),e.msg=null,-1==t&&(t=6),a<1||a>9||8!=r||n<9||n>15||t<0||t>9||o<0||o>2?-2:(e.dstate=K,f=(u=1<<(l=n))-1,b=(y=1<<(g=a+7))-1,k=Math.floor((g+3-1)/3),p=new Uint8Array(2*u),h=[],v=[],L=1<<a+6,K.pending_buf=new Uint8Array(4*L),i=4*L,B=Math.floor(L/2),N=3*L,E=t,D=o,255&r,pe(e))},K.deflateEnd=function(){return 42!=t&&113!=t&&666!=t?-2:(K.pending_buf=null,v=null,h=null,p=null,K.dstate=null,113==t?-3:0)},K.deflateParams=function(e,t,n){var r=0;return-1==t&&(t=6),t<0||t>9||n<0||n>2?-2:(a[E].func!=a[t].func&&0!==e.total_in&&(r=e.deflate(1)),E!=t&&(I=a[E=t].max_lazy,R=a[E].good_length,P=a[E].nice_length,O=a[E].max_chain),D=n,r)},K.deflateSetDictionary=function(e,n,r){var i,a=r,o=0;if(!n||42!=t)return-2;if(a<3)return 0;for(a>u-262&&(o=r-(a=u-262)),p.set(n.subarray(o,o+a),0),_=a,w=a,m=((m=255&p[0])<<k^255&p[1])&b,i=0;i<=a-3;i++)m=(m<<k^255&p[i+2])&b,h[i&f]=v[m],v[m]=i;return 0},K.deflate=function(n,s){var d,g,O,R,P,T;if(s>4||s<0)return-2;if(!n.next_out||!n.next_in&&0!==n.avail_in||666==t&&4!=s)return n.msg=o[4],-2;if(0===n.avail_out)return n.msg=o[7],-5;if(e=n,R=c,c=s,42==t&&(g=8+(l-8<<4)<<8,(O=(E-1&255)>>1)>3&&(O=3),g|=O<<6,0!==_&&(g|=32),t=113,X((T=g+=31-g%31)>>8&255),X(255&T)),0!==K.pending){if(e.flush_pending(),0===e.avail_out)return c=-1,0}else if(0===e.avail_in&&s<=R&&4!=s)return e.msg=o[7],-5;if(666==t&&0!==e.avail_in)return n.msg=o[7],-5;if(0!==e.avail_in||0!==C||0!=s&&666!=t){switch(P=-1,a[E].func){case 0:P=function(t){var n,r=65535;for(r>i-5&&(r=i-5);;){if(C<=1){if(le(),0===C&&0==t)return 0;if(0===C)break}if(_+=C,C=0,n=w+r,(0===_||_>=n)&&(C=_-n,_=n,ue(!1),0===e.avail_out))return 0;if(_-w>=u-262&&(ue(!1),0===e.avail_out))return 0}return ue(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(s);break;case 1:P=function(t){for(var n,r=0;;){if(C<262){if(le(),C<262&&0==t)return 0;if(0===C)break}if(C>=3&&(m=(m<<k^255&p[_+2])&b,r=65535&v[m],h[_&f]=v[m],v[m]=_),0!==r&&(_-r&65535)<=u-262&&2!=D&&(x=fe(r)),x>=3)if(n=ie(_-M,x-3),C-=x,x<=I&&C>=3){x--;do{_++,m=(m<<k^255&p[_+2])&b,r=65535&v[m],h[_&f]=v[m],v[m]=_}while(0!=--x);_++}else _+=x,x=0,m=((m=255&p[_])<<k^255&p[_+1])&b;else n=ie(0,255&p[_]),C--,_++;if(n&&(ue(!1),0===e.avail_out))return 0}return ue(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(s);break;case 2:P=function(t){for(var n,r,i=0;;){if(C<262){if(le(),C<262&&0==t)return 0;if(0===C)break}if(C>=3&&(m=(m<<k^255&p[_+2])&b,i=65535&v[m],h[_&f]=v[m],v[m]=_),A=x,S=M,x=2,0!==i&&A<I&&(_-i&65535)<=u-262&&(2!=D&&(x=fe(i)),x<=5&&(1==D||3==x&&_-M>4096)&&(x=2)),A>=3&&x<=A){r=_+C-3,n=ie(_-1-S,A-3),C-=A-1,A-=2;do{++_<=r&&(m=(m<<k^255&p[_+2])&b,i=65535&v[m],h[_&f]=v[m],v[m]=_)}while(0!=--A);if($=0,x=2,_++,n&&(ue(!1),0===e.avail_out))return 0}else if(0!==$){if((n=ie(0,255&p[_-1]))&&ue(!1),_++,C--,0===e.avail_out)return 0}else $=1,_++,C--}return 0!==$&&(n=ie(0,255&p[_-1]),$=0),ue(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(s)}if(2!=P&&3!=P||(t=666),0==P||2==P)return 0===e.avail_out&&(c=-1),0;if(1==P){if(1==s)ee(2,3),te(256,r.static_ltree),re(),1+z+10-W<9&&(ee(2,3),te(256,r.static_ltree),re()),z=7;else if(se(0,0,!1),3==s)for(d=0;d<y;d++)v[d]=0;if(e.flush_pending(),0===e.avail_out)return c=-1,0}}return 4!=s?0:1}}function u(){this.next_in_index=0,this.next_out_index=0,this.avail_in=0,this.total_in=0,this.avail_out=0,this.total_out=0}u.prototype={deflateInit:function(e,t){return this.dstate=new c,t||(t=15),this.dstate.deflateInit(this,e,t)},deflate:function(e){return this.dstate?this.dstate.deflate(this,e):-2},deflateEnd:function(){if(!this.dstate)return-2;var e=this.dstate.deflateEnd();return this.dstate=null,e},deflateParams:function(e,t){return this.dstate?this.dstate.deflateParams(this,e,t):-2},deflateSetDictionary:function(e,t){return this.dstate?this.dstate.deflateSetDictionary(this,e,t):-2},read_buf:function(e,t,n){var r=this.avail_in;return r>n&&(r=n),0===r?0:(this.avail_in-=r,e.set(this.next_in.subarray(this.next_in_index,this.next_in_index+r),t),this.next_in_index+=r,this.total_in+=r,r)},flush_pending:function(){var e=this.dstate.pending;e>this.avail_out&&(e=this.avail_out),0!==e&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,this.dstate.pending_out+e),this.next_out_index),this.next_out_index+=e,this.dstate.pending_out+=e,this.total_out+=e,this.avail_out-=e,this.dstate.pending-=e,0===this.dstate.pending&&(this.dstate.pending_out=0))}};var l=e.zip||e;l.Deflater=l._jzlib_Deflater=function(e){var t=new u,n=new Uint8Array(512),r=e?e.level:-1;void 0===r&&(r=-1),t.deflateInit(r),t.next_out=n,this.append=function(e,r){var i,a=[],o=0,s=0,c=0;if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=512,0!=t.deflate(0))throw new Error("deflating: "+t.msg);t.next_out_index&&(512==t.next_out_index?a.push(new Uint8Array(n)):a.push(new Uint8Array(n.subarray(0,t.next_out_index)))),c+=t.next_out_index,r&&t.next_in_index>0&&t.next_in_index!=o&&(r(t.next_in_index),o=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return i=new Uint8Array(c),a.forEach((function(e){i.set(e,s),s+=e.length})),i}},this.flush=function(){var e,r,i=[],a=0,o=0;do{if(t.next_out_index=0,t.avail_out=512,1!=(e=t.deflate(4))&&0!=e)throw new Error("deflating: "+t.msg);512-t.avail_out>0&&i.push(new Uint8Array(n.subarray(0,t.next_out_index))),o+=t.next_out_index}while(t.avail_in>0||0===t.avail_out);return t.deflateEnd(),r=new Uint8Array(o),i.forEach((function(e){r.set(e,a),a+=e.length})),r}}}(this)},function(e,t){!function(e){"use strict";var t=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],n=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],r=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function c(){var e,t,n,r,c,u;function l(e,t,i,a,o,s,l,f,p,d,h){var v,m,y,g,b,k,w,x,S,$,_,M,C,A,O;$=0,b=i;do{n[e[t+$]]++,$++,b--}while(0!==b);if(n[0]==i)return l[0]=-1,f[0]=0,0;for(x=f[0],k=1;k<=15&&0===n[k];k++);for(w=k,x<k&&(x=k),b=15;0!==b&&0===n[b];b--);for(y=b,x>b&&(x=b),f[0]=x,A=1<<k;k<b;k++,A<<=1)if((A-=n[k])<0)return-3;if((A-=n[b])<0)return-3;for(n[b]+=A,u[1]=k=0,$=1,C=2;0!=--b;)u[C]=k+=n[$],C++,$++;b=0,$=0;do{0!==(k=e[t+$])&&(h[u[k]++]=b),$++}while(++b<i);for(i=u[y],u[0]=b=0,$=0,g=-1,M=-x,c[0]=0,_=0,O=0;w<=y;w++)for(v=n[w];0!=v--;){for(;w>M+x;){if(g++,O=(O=y-(M+=x))>x?x:O,(m=1<<(k=w-M))>v+1&&(m-=v+1,C=w,k<O))for(;++k<O&&!((m<<=1)<=n[++C]);)m-=n[C];if(O=1<<k,d[0]+O>1440)return-3;c[g]=_=d[0],d[0]+=O,0!==g?(u[g]=b,r[0]=k,r[1]=x,k=b>>>M-x,r[2]=_-c[g-1]-k,p.set(r,3*(c[g-1]+k))):l[0]=_}for(r[1]=w-M,$>=i?r[0]=192:h[$]<a?(r[0]=h[$]<256?0:96,r[2]=h[$++]):(r[0]=s[h[$]-a]+16+64,r[2]=o[h[$++]-a]),m=1<<w-M,k=b>>>M;k<O;k+=m)p.set(r,3*(_+k));for(k=1<<w-1;0!=(b&k);k>>>=1)b^=k;for(b^=k,S=(1<<M)-1;(b&S)!=u[g];)g--,S=(1<<(M-=x))-1}return 0!==A&&1!=y?-5:0}function f(i){var a;for(e||(e=[],t=[],n=new Int32Array(16),r=[],c=new Int32Array(15),u=new Int32Array(16)),t.length<i&&(t=[]),a=0;a<i;a++)t[a]=0;for(a=0;a<16;a++)n[a]=0;for(a=0;a<3;a++)r[a]=0;c.set(n.subarray(0,15),0),u.set(n.subarray(0,16),0)}this.inflate_trees_bits=function(n,r,i,a,o){var s;return f(19),e[0]=0,-3==(s=l(n,0,19,19,null,null,i,r,a,e,t))?o.msg="oversubscribed dynamic bit lengths tree":-5!=s&&0!==r[0]||(o.msg="incomplete dynamic bit lengths tree",s=-3),s},this.inflate_trees_dynamic=function(n,r,c,u,p,d,h,v,m){var y;return f(288),e[0]=0,0!=(y=l(c,0,n,257,i,a,d,u,v,e,t))||0===u[0]?(-3==y?m.msg="oversubscribed literal/length tree":-4!=y&&(m.msg="incomplete literal/length tree",y=-3),y):(f(288),0!=(y=l(c,n,r,0,o,s,h,p,v,e,t))||0===p[0]&&n>257?(-3==y?m.msg="oversubscribed distance tree":-5==y?(m.msg="incomplete distance tree",y=-3):-4!=y&&(m.msg="empty distance tree with lengths",y=-3),y):0)}}c.inflate_trees_fixed=function(e,t,i,a){return e[0]=9,t[0]=5,i[0]=n,a[0]=r,0};function u(){var e,n,r,i,a=0,o=0,s=0,c=0,u=0,l=0,f=0,p=0,d=0,h=0;function v(e,n,r,i,a,o,s,c){var u,l,f,p,d,h,v,m,y,g,b,k,w,x,S,$;v=c.next_in_index,m=c.avail_in,d=s.bitb,h=s.bitk,g=(y=s.write)<s.read?s.read-y-1:s.end-y,b=t[e],k=t[n];do{for(;h<20;)m--,d|=(255&c.read_byte(v++))<<h,h+=8;if(0!==(p=(l=r)[$=3*((f=i)+(u=d&b))]))for(;;){if(d>>=l[$+1],h-=l[$+1],0!=(16&p)){for(p&=15,w=l[$+2]+(d&t[p]),d>>=p,h-=p;h<15;)m--,d|=(255&c.read_byte(v++))<<h,h+=8;for(p=(l=a)[$=3*((f=o)+(u=d&k))];;){if(d>>=l[$+1],h-=l[$+1],0!=(16&p)){for(p&=15;h<p;)m--,d|=(255&c.read_byte(v++))<<h,h+=8;if(x=l[$+2]+(d&t[p]),d>>=p,h-=p,g-=w,y>=x)y-(S=y-x)>0&&2>y-S?(s.window[y++]=s.window[S++],s.window[y++]=s.window[S++],w-=2):(s.window.set(s.window.subarray(S,S+2),y),y+=2,S+=2,w-=2);else{S=y-x;do{S+=s.end}while(S<0);if(w>(p=s.end-S)){if(w-=p,y-S>0&&p>y-S)do{s.window[y++]=s.window[S++]}while(0!=--p);else s.window.set(s.window.subarray(S,S+p),y),y+=p,S+=p,p=0;S=0}}if(y-S>0&&w>y-S)do{s.window[y++]=s.window[S++]}while(0!=--w);else s.window.set(s.window.subarray(S,S+w),y),y+=w,S+=w,w=0;break}if(0!=(64&p))return c.msg="invalid distance code",m+=w=h>>3<(w=c.avail_in-m)?h>>3:w,v-=w,h-=w<<3,s.bitb=d,s.bitk=h,c.avail_in=m,c.total_in+=v-c.next_in_index,c.next_in_index=v,s.write=y,-3;u+=l[$+2],p=l[$=3*(f+(u+=d&t[p]))]}break}if(0!=(64&p))return 0!=(32&p)?(m+=w=h>>3<(w=c.avail_in-m)?h>>3:w,v-=w,h-=w<<3,s.bitb=d,s.bitk=h,c.avail_in=m,c.total_in+=v-c.next_in_index,c.next_in_index=v,s.write=y,1):(c.msg="invalid literal/length code",m+=w=h>>3<(w=c.avail_in-m)?h>>3:w,v-=w,h-=w<<3,s.bitb=d,s.bitk=h,c.avail_in=m,c.total_in+=v-c.next_in_index,c.next_in_index=v,s.write=y,-3);if(u+=l[$+2],0===(p=l[$=3*(f+(u+=d&t[p]))])){d>>=l[$+1],h-=l[$+1],s.window[y++]=l[$+2],g--;break}}else d>>=l[$+1],h-=l[$+1],s.window[y++]=l[$+2],g--}while(g>=258&&m>=10);return m+=w=h>>3<(w=c.avail_in-m)?h>>3:w,v-=w,h-=w<<3,s.bitb=d,s.bitk=h,c.avail_in=m,c.total_in+=v-c.next_in_index,c.next_in_index=v,s.write=y,0}this.init=function(t,a,o,s,c,u){e=0,f=t,p=a,r=o,d=s,i=c,h=u,n=null},this.proc=function(m,y,g){var b,k,w,x,S,$,_,M=0,C=0,A=0;for(A=y.next_in_index,x=y.avail_in,M=m.bitb,C=m.bitk,$=(S=m.write)<m.read?m.read-S-1:m.end-S;;)switch(e){case 0:if($>=258&&x>=10&&(m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,g=v(f,p,r,d,i,h,m,y),A=y.next_in_index,x=y.avail_in,M=m.bitb,C=m.bitk,$=(S=m.write)<m.read?m.read-S-1:m.end-S,0!=g)){e=1==g?7:9;break}s=f,n=r,o=d,e=1;case 1:for(b=s;C<b;){if(0===x)return m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);g=0,x--,M|=(255&y.read_byte(A++))<<C,C+=8}if(M>>>=n[(k=3*(o+(M&t[b])))+1],C-=n[k+1],0===(w=n[k])){c=n[k+2],e=6;break}if(0!=(16&w)){u=15&w,a=n[k+2],e=2;break}if(0==(64&w)){s=w,o=k/3+n[k+2];break}if(0!=(32&w)){e=7;break}return e=9,y.msg="invalid literal/length code",g=-3,m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);case 2:for(b=u;C<b;){if(0===x)return m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);g=0,x--,M|=(255&y.read_byte(A++))<<C,C+=8}a+=M&t[b],M>>=b,C-=b,s=p,n=i,o=h,e=3;case 3:for(b=s;C<b;){if(0===x)return m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);g=0,x--,M|=(255&y.read_byte(A++))<<C,C+=8}if(M>>=n[(k=3*(o+(M&t[b])))+1],C-=n[k+1],0!=(16&(w=n[k]))){u=15&w,l=n[k+2],e=4;break}if(0==(64&w)){s=w,o=k/3+n[k+2];break}return e=9,y.msg="invalid distance code",g=-3,m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);case 4:for(b=u;C<b;){if(0===x)return m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);g=0,x--,M|=(255&y.read_byte(A++))<<C,C+=8}l+=M&t[b],M>>=b,C-=b,e=5;case 5:for(_=S-l;_<0;)_+=m.end;for(;0!==a;){if(0===$&&(S==m.end&&0!==m.read&&($=(S=0)<m.read?m.read-S-1:m.end-S),0===$&&(m.write=S,g=m.inflate_flush(y,g),$=(S=m.write)<m.read?m.read-S-1:m.end-S,S==m.end&&0!==m.read&&($=(S=0)<m.read?m.read-S-1:m.end-S),0===$)))return m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);m.window[S++]=m.window[_++],$--,_==m.end&&(_=0),a--}e=0;break;case 6:if(0===$&&(S==m.end&&0!==m.read&&($=(S=0)<m.read?m.read-S-1:m.end-S),0===$&&(m.write=S,g=m.inflate_flush(y,g),$=(S=m.write)<m.read?m.read-S-1:m.end-S,S==m.end&&0!==m.read&&($=(S=0)<m.read?m.read-S-1:m.end-S),0===$)))return m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);g=0,m.window[S++]=c,$--,e=0;break;case 7:if(C>7&&(C-=8,x++,A--),m.write=S,g=m.inflate_flush(y,g),$=(S=m.write)<m.read?m.read-S-1:m.end-S,m.read!=m.write)return m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);e=8;case 8:return g=1,m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);case 9:return g=-3,m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g);default:return g=-2,m.bitb=M,m.bitk=C,y.avail_in=x,y.total_in+=A-y.next_in_index,y.next_in_index=A,m.write=S,m.inflate_flush(y,g)}},this.free=function(){}}var l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function f(e,n){var r,i=this,a=0,o=0,s=0,f=0,p=[0],d=[0],h=new u,v=0,m=new Int32Array(4320),y=new c;i.bitk=0,i.bitb=0,i.window=new Uint8Array(n),i.end=n,i.read=0,i.write=0,i.reset=function(e,t){t&&(t[0]=0),6==a&&h.free(e),a=0,i.bitk=0,i.bitb=0,i.read=i.write=0},i.reset(e,null),i.inflate_flush=function(e,t){var n,r,a;return r=e.next_out_index,(n=((a=i.read)<=i.write?i.write:i.end)-a)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.window.subarray(a,a+n),r),r+=n,(a+=n)==i.end&&(a=0,i.write==i.end&&(i.write=0),(n=i.write-a)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.window.subarray(a,a+n),r),r+=n,a+=n),e.next_out_index=r,i.read=a,t},i.proc=function(e,n){var u,g,b,k,w,x,S,$;for(k=e.next_in_index,w=e.avail_in,g=i.bitb,b=i.bitk,S=(x=i.write)<i.read?i.read-x-1:i.end-x;;)switch(a){case 0:for(;b<3;){if(0===w)return i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);n=0,w--,g|=(255&e.read_byte(k++))<<b,b+=8}switch(v=1&(u=7&g),u>>>1){case 0:g>>>=3,g>>>=u=7&(b-=3),b-=u,a=1;break;case 1:var _=[],M=[],C=[[]],A=[[]];c.inflate_trees_fixed(_,M,C,A),h.init(_[0],M[0],C[0],0,A[0],0),g>>>=3,b-=3,a=6;break;case 2:g>>>=3,b-=3,a=3;break;case 3:return g>>>=3,b-=3,a=9,e.msg="invalid block type",n=-3,i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n)}break;case 1:for(;b<32;){if(0===w)return i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);n=0,w--,g|=(255&e.read_byte(k++))<<b,b+=8}if((~g>>>16&65535)!=(65535&g))return a=9,e.msg="invalid stored block lengths",n=-3,i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);o=65535&g,g=b=0,a=0!==o?2:0!==v?7:0;break;case 2:if(0===w)return i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);if(0===S&&(x==i.end&&0!==i.read&&(S=(x=0)<i.read?i.read-x-1:i.end-x),0===S&&(i.write=x,n=i.inflate_flush(e,n),S=(x=i.write)<i.read?i.read-x-1:i.end-x,x==i.end&&0!==i.read&&(S=(x=0)<i.read?i.read-x-1:i.end-x),0===S)))return i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);if(n=0,(u=o)>w&&(u=w),u>S&&(u=S),i.window.set(e.read_buf(k,u),x),k+=u,w-=u,x+=u,S-=u,0!=(o-=u))break;a=0!==v?7:0;break;case 3:for(;b<14;){if(0===w)return i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);n=0,w--,g|=(255&e.read_byte(k++))<<b,b+=8}if(s=u=16383&g,(31&u)>29||(u>>5&31)>29)return a=9,e.msg="too many length or distance symbols",n=-3,i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);if(u=258+(31&u)+(u>>5&31),!r||r.length<u)r=[];else for($=0;$<u;$++)r[$]=0;g>>>=14,b-=14,f=0,a=4;case 4:for(;f<4+(s>>>10);){for(;b<3;){if(0===w)return i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);n=0,w--,g|=(255&e.read_byte(k++))<<b,b+=8}r[l[f++]]=7&g,g>>>=3,b-=3}for(;f<19;)r[l[f++]]=0;if(p[0]=7,0!=(u=y.inflate_trees_bits(r,p,d,m,e)))return-3==(n=u)&&(r=null,a=9),i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);f=0,a=5;case 5:for(;!(f>=258+(31&(u=s))+(u>>5&31));){var O,I;for(u=p[0];b<u;){if(0===w)return i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);n=0,w--,g|=(255&e.read_byte(k++))<<b,b+=8}if(u=m[3*(d[0]+(g&t[u]))+1],(I=m[3*(d[0]+(g&t[u]))+2])<16)g>>>=u,b-=u,r[f++]=I;else{for($=18==I?7:I-14,O=18==I?11:3;b<u+$;){if(0===w)return i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);n=0,w--,g|=(255&e.read_byte(k++))<<b,b+=8}if(b-=u,O+=(g>>>=u)&t[$],g>>>=$,b-=$,($=f)+O>258+(31&(u=s))+(u>>5&31)||16==I&&$<1)return r=null,a=9,e.msg="invalid bit length repeat",n=-3,i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);I=16==I?r[$-1]:0;do{r[$++]=I}while(0!=--O);f=$}}d[0]=-1;var E=[],D=[],R=[],P=[];if(E[0]=9,D[0]=6,u=s,0!=(u=y.inflate_trees_dynamic(257+(31&u),1+(u>>5&31),r,E,D,R,P,m,e)))return-3==u&&(r=null,a=9),n=u,i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);h.init(E[0],D[0],m,R[0],m,P[0]),a=6;case 6:if(i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,1!=(n=h.proc(i,e,n)))return i.inflate_flush(e,n);if(n=0,h.free(e),k=e.next_in_index,w=e.avail_in,g=i.bitb,b=i.bitk,S=(x=i.write)<i.read?i.read-x-1:i.end-x,0===v){a=0;break}a=7;case 7:if(i.write=x,n=i.inflate_flush(e,n),S=(x=i.write)<i.read?i.read-x-1:i.end-x,i.read!=i.write)return i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);a=8;case 8:return n=1,i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);case 9:return n=-3,i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n);default:return n=-2,i.bitb=g,i.bitk=b,e.avail_in=w,e.total_in+=k-e.next_in_index,e.next_in_index=k,i.write=x,i.inflate_flush(e,n)}},i.free=function(e){i.reset(e,null),i.window=null,m=null},i.set_dictionary=function(e,t,n){i.window.set(e.subarray(t,t+n),0),i.read=i.write=n},i.sync_point=function(){return 1==a?1:0}}var p=[0,0,255,255];function d(){var e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),0):-2}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,0},e.inflateInit=function(n,r){return n.msg=null,e.blocks=null,r<8||r>15?(e.inflateEnd(n),-2):(e.wbits=r,n.istate.blocks=new f(n,1<<r),t(n),0)},e.inflate=function(e,t){var n,r;if(!e||!e.istate||!e.next_in)return-2;for(t=4==t?-5:0,n=-5;;)switch(e.istate.mode){case 0:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,8!=(15&(e.istate.method=e.read_byte(e.next_in_index++)))){e.istate.mode=13,e.msg="unknown compression method",e.istate.marker=5;break}if(8+(e.istate.method>>4)>e.istate.wbits){e.istate.mode=13,e.msg="invalid window size",e.istate.marker=5;break}e.istate.mode=1;case 1:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,r=255&e.read_byte(e.next_in_index++),((e.istate.method<<8)+r)%31!=0){e.istate.mode=13,e.msg="incorrect header check",e.istate.marker=5;break}if(0==(32&r)){e.istate.mode=7;break}e.istate.mode=2;case 2:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,e.istate.mode=3;case 3:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,e.istate.mode=4;case 4:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,e.istate.mode=5;case 5:return 0===e.avail_in?n:(n=t,e.avail_in--,e.total_in++,e.istate.need+=255&e.read_byte(e.next_in_index++),e.istate.mode=6,2);case 6:return e.istate.mode=13,e.msg="need dictionary",e.istate.marker=0,-2;case 7:if(-3==(n=e.istate.blocks.proc(e,n))){e.istate.mode=13,e.istate.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,e.istate.blocks.reset(e,e.istate.was),e.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}},e.inflateSetDictionary=function(e,t,n){var r=0,i=n;return e&&e.istate&&6==e.istate.mode?(i>=1<<e.istate.wbits&&(r=n-(i=(1<<e.istate.wbits)-1)),e.istate.blocks.set_dictionary(t,r,i),e.istate.mode=7,0):-2},e.inflateSync=function(e){var n,r,i,a,o;if(!e||!e.istate)return-2;if(13!=e.istate.mode&&(e.istate.mode=13,e.istate.marker=0),0===(n=e.avail_in))return-5;for(r=e.next_in_index,i=e.istate.marker;0!==n&&i<4;)e.read_byte(r)==p[i]?i++:i=0!==e.read_byte(r)?0:4-i,r++,n--;return e.total_in+=r-e.next_in_index,e.next_in_index=r,e.avail_in=n,e.istate.marker=i,4!=i?-3:(a=e.total_in,o=e.total_out,t(e),e.total_in=a,e.total_out=o,e.istate.mode=7,0)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():-2}}function h(){}h.prototype={inflateInit:function(e){return this.istate=new d,e||(e=15),this.istate.inflateInit(this,e)},inflate:function(e){return this.istate?this.istate.inflate(this,e):-2},inflateEnd:function(){if(!this.istate)return-2;var e=this.istate.inflateEnd(this);return this.istate=null,e},inflateSync:function(){return this.istate?this.istate.inflateSync(this):-2},inflateSetDictionary:function(e,t){return this.istate?this.istate.inflateSetDictionary(this,e,t):-2},read_byte:function(e){return this.next_in.subarray(e,e+1)[0]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}};var v=e.zip||e;v.Inflater=v._jzlib_Inflater=function(){var e=new h,t=new Uint8Array(512),n=!1;e.inflateInit(),e.next_out=t,this.append=function(r,i){var a,o,s=[],c=0,u=0,l=0;if(0!==r.length){e.next_in_index=0,e.next_in=r,e.avail_in=r.length;do{if(e.next_out_index=0,e.avail_out=512,0!==e.avail_in||n||(e.next_in_index=0,n=!0),a=e.inflate(0),n&&-5===a){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==a&&1!==a)throw new Error("inflating: "+e.msg);if((n||1===a)&&e.avail_in===r.length)throw new Error("inflating: bad input");e.next_out_index&&(512===e.next_out_index?s.push(new Uint8Array(t)):s.push(new Uint8Array(t.subarray(0,e.next_out_index)))),l+=e.next_out_index,i&&e.next_in_index>0&&e.next_in_index!=c&&(i(e.next_in_index),c=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return o=new Uint8Array(l),s.forEach((function(e){o.set(e,u),u+=e.length})),o}},this.flush=function(){e.inflateEnd()}}}(this)},function(e,t){!function(e){"use strict";var t,n="File format is not recognized.",r="Error while reading zip file.";try{t=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(e){}function i(){this.crc=-1}function a(){}function o(e,t){var n,r;return n=new ArrayBuffer(e),r=new Uint8Array(n),t&&r.set(t,0),{buffer:n,array:r,view:new DataView(n)}}function s(){}function c(e){var t,n=this;n.size=0,n.init=function(r,i){var a=new Blob([e],{type:"text/plain"});(t=new l(a)).init((function(){n.size=t.size,r()}),i)},n.readUint8Array=function(e,n,r,i){t.readUint8Array(e,n,r,i)}}function u(t){var n,r=this;r.size=0,r.init=function(e){for(var i=t.length;"="==t.charAt(i-1);)i--;n=t.indexOf(",")+1,r.size=Math.floor(.75*(i-n)),e()},r.readUint8Array=function(r,i,a){var s,c=o(i),u=4*Math.floor(r/3),l=4*Math.ceil((r+i)/3),f=e.atob(t.substring(u+n,l+n)),p=r-3*Math.floor(u/4);for(s=p;s<p+i;s++)c.array[s-p]=f.charCodeAt(s);a(c.array)}}function l(e){var t=this;t.size=0,t.init=function(n){t.size=e.size,n()},t.readUint8Array=function(t,n,r,i){var a=new FileReader;a.onload=function(e){r(new Uint8Array(e.target.result))},a.onerror=i;try{a.readAsArrayBuffer(function(e,t,n){if(t<0||n<0||t+n>e.size)throw new RangeError("offset:"+t+", length:"+n+", size:"+e.size);return e.slice?e.slice(t,t+n):e.webkitSlice?e.webkitSlice(t,t+n):e.mozSlice?e.mozSlice(t,t+n):e.msSlice?e.msSlice(t,t+n):void 0}(e,t,n))}catch(e){i(e)}}}function f(){}function p(e){var n;this.init=function(e){n=new Blob([],{type:"text/plain"}),e()},this.writeUint8Array=function(e,r){n=new Blob([n,t?e:e.buffer],{type:"text/plain"}),r()},this.getData=function(t,r){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=r,i.readAsText(n,e)}}function d(t){var n="",r="";this.init=function(e){n+="data:"+(t||"")+";base64,",e()},this.writeUint8Array=function(t,i){var a,o=r.length,s=r;for(r="",a=0;a<3*Math.floor((o+t.length)/3)-o;a++)s+=String.fromCharCode(t[a]);for(;a<t.length;a++)r+=String.fromCharCode(t[a]);s.length>2?n+=e.btoa(s):r=s,i()},this.getData=function(t){t(n+e.btoa(r))}}function h(e){var n;this.init=function(t){n=new Blob([],{type:e}),t()},this.writeUint8Array=function(r,i){n=new Blob([n,t?r:r.buffer],{type:e}),i()},this.getData=function(e){e(n)}}function v(e,t,n,r,i,a,o,s,c,u){var l,f,p,d=0,h=t.sn;function v(){e.removeEventListener("message",m,!1),s(f,p)}function m(t){var n=t.data,i=n.data,s=n.error;if(s)return s.toString=function(){return"Error: "+this.message},void c(s);if(n.sn===h)switch("number"==typeof n.codecTime&&(e.codecTime+=n.codecTime),"number"==typeof n.crcTime&&(e.crcTime+=n.crcTime),n.type){case"append":i?(f+=i.length,r.writeUint8Array(i,(function(){y()}),u)):y();break;case"flush":p=n.crc,i?(f+=i.length,r.writeUint8Array(i,(function(){v()}),u)):v();break;case"progress":o&&o(l+n.loaded,a);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",n)}}function y(){(l=524288*d)<=a?n.readUint8Array(i+l,Math.min(524288,a-l),(function(n){o&&o(l,a);var r=0===l?t:{sn:h};r.type="append",r.data=n;try{e.postMessage(r,[n.buffer])}catch(t){e.postMessage(r)}d++}),c):e.postMessage({sn:h,type:"flush"})}f=0,e.addEventListener("message",m,!1),y()}function m(e,t,n,r,a,o,s,c,u,l){var f,p=0,d=0,h="input"===o,v="output"===o,m=new i;!function i(){var o;if((f=524288*p)<a)t.readUint8Array(r+f,Math.min(524288,a-f),(function(t){var r;try{r=e.append(t,(function(e){s&&s(f+e,a)}))}catch(e){return void u(e)}r?(d+=r.length,n.writeUint8Array(r,(function(){p++,setTimeout(i,1)}),l),v&&m.append(r)):(p++,setTimeout(i,1)),h&&m.append(t),s&&s(f,a)}),u);else{try{o=e.flush()}catch(e){return void u(e)}o?(v&&m.append(o),d+=o.length,n.writeUint8Array(o,(function(){c(d,m.get())}),l)):c(d,m.get())}}()}function y(t,n,r,i,o,s,c,u,l,f,p){e.zip.useWebWorkers&&c?v(t,{sn:n,codecClass:"NOOP",crcType:"input"},r,i,o,s,l,u,f,p):m(new a,r,i,o,s,"input",l,u,f,p)}function g(e){var t,n,r="",i=["Ã","Ã¼","Ã©","Ã¢","Ã¤","Ã ","Ã¥","Ã§","Ãª","Ã«","Ã¨","Ã¯","Ã®","Ã¬","Ã","Ã","Ã","Ã¦","Ã","Ã´","Ã¶","Ã²","Ã»","Ã¹","Ã¿","Ã","Ã","Ã¸","Â£","Ã","Ã","Æ","Ã¡","Ã­","Ã³","Ãº","Ã±","Ã","Âª","Âº","Â¿","Â®","Â¬","Â½","Â¼","Â¡","Â«","Â»","_","_","_","Â¦","Â¦","Ã","Ã","Ã","Â©","Â¦","Â¦","+","+","Â¢","Â¥","+","+","-","-","+","-","+","Ã£","Ã","+","+","-","-","Â¦","-","+","Â¤","Ã°","Ã","Ã","Ã","Ã","i","Ã","Ã","Ã","+","+","_","_","Â¦","Ã","_","Ã","Ã","Ã","Ã","Ãµ","Ã","Âµ","Ã¾","Ã","Ã","Ã","Ã","Ã½","Ã","Â¯","Â´","Â­","Â±","_","Â¾","Â¶","Â§","Ã·","Â¸","Â°","Â¨","Â·","Â¹","Â³","Â²","_"," "];for(t=0;t<e.length;t++)r+=(n=255&e.charCodeAt(t))>127?i[n-128]:String.fromCharCode(n);return r}function b(e){return decodeURIComponent(escape(e))}function k(e){var t,n="";for(t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return n}function w(e,t,n,r,i){e.version=t.view.getUint16(n,!0),e.bitFlag=t.view.getUint16(n+2,!0),e.compressionMethod=t.view.getUint16(n+4,!0),e.lastModDateRaw=t.view.getUint32(n+6,!0),e.lastModDate=function(e){var t=(4294901760&e)>>16,n=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}(e.lastModDateRaw),1!=(1&e.bitFlag)?((r||8!=(8&e.bitFlag))&&(e.crc32=t.view.getUint32(n+10,!0),e.compressedSize=t.view.getUint32(n+14,!0),e.uncompressedSize=t.view.getUint32(n+18,!0)),4294967295!==e.compressedSize&&4294967295!==e.uncompressedSize?(e.filenameLength=t.view.getUint16(n+22,!0),e.extraFieldLength=t.view.getUint16(n+24,!0)):i("File is using Zip64 (4gb+ file size).")):i("File contains encrypted entry.")}function x(t,i,a){var s=0;function c(){}c.prototype.getData=function(r,i,c,u){var l=this;function f(e,t){u&&!function(e){var t=o(4);return t.view.setUint32(0,e),l.crc32==t.view.getUint32(0)}(t)?a("CRC failed."):r.getData((function(e){i(e)}))}function p(e){a(e||"Error while reading file data.")}function d(e){a(e||"Error while writing file data.")}t.readUint8Array(l.offset,30,(function(i){var h,g=o(i.length,i);1347093252==g.view.getUint32(0)?(w(l,g,4,!1,a),h=l.offset+30+l.filenameLength+l.extraFieldLength,r.init((function(){0===l.compressionMethod?y(l._worker,s++,t,r,h,l.compressedSize,u,f,c,p,d):function(t,n,r,i,a,o,s,c,u,l,f){var p=s?"output":"none";e.zip.useWebWorkers?v(t,{sn:n,codecClass:"Inflater",crcType:p},r,i,a,o,u,c,l,f):m(new e.zip.Inflater,r,i,a,o,p,u,c,l,f)}(l._worker,s++,t,r,h,l.compressedSize,u,f,c,p,d)}),d)):a(n)}),p)};var u={getEntries:function(e){var i=this._worker;!function(e){if(t.size<22)a(n);else{i(22,(function(){i(Math.min(65558,t.size),(function(){a(n)}))}))}function i(n,i){t.readUint8Array(t.size-n,n,(function(t){for(var n=t.length-22;n>=0;n--)if(80===t[n]&&75===t[n+1]&&5===t[n+2]&&6===t[n+3])return void e(new DataView(t.buffer,n,22));i()}),(function(){a(r)}))}}((function(s){var u,l;u=s.getUint32(16,!0),l=s.getUint16(8,!0),u<0||u>=t.size?a(n):t.readUint8Array(u,t.size-u,(function(t){var r,s,u,f,p=0,d=[],h=o(t.length,t);for(r=0;r<l;r++){if((s=new c)._worker=i,1347092738!=h.view.getUint32(p))return void a(n);w(s,h,p+6,!0,a),s.commentLength=h.view.getUint16(p+32,!0),s.directory=16==(16&h.view.getUint8(p+38)),s.offset=h.view.getUint32(p+42,!0),u=k(h.array.subarray(p+46,p+46+s.filenameLength)),s.filename=2048==(2048&s.bitFlag)?b(u):g(u),s.directory||"/"!=s.filename.charAt(s.filename.length-1)||(s.directory=!0),f=k(h.array.subarray(p+46+s.filenameLength+s.extraFieldLength,p+46+s.filenameLength+s.extraFieldLength+s.commentLength)),s.comment=2048==(2048&s.bitFlag)?b(f):g(f),d.push(s),p+=46+s.filenameLength+s.extraFieldLength+s.commentLength}e(d)}),(function(){a(r)}))}))},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null),e&&e()},_worker:null};e.zip.useWebWorkers?C("inflater",(function(e){u._worker=e,i(u)}),(function(e){a(e)})):i(u)}function S(e){return unescape(encodeURIComponent(e))}function $(e){var t,n=[];for(t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}function _(t,n,r,i){var a={},s=[],c=0,u=0;function l(e){r(e||"Error while writing zip file.")}function f(e){r(e||"Error while reading file data.")}var p={add:function(n,p,d,h,g){var b,k,w,x=this._worker;function _(e,n){var r=o(16);c+=e||0,r.view.setUint32(0,1347094280),void 0!==n&&(b.view.setUint32(10,n,!0),r.view.setUint32(4,n,!0)),p&&(r.view.setUint32(8,e,!0),b.view.setUint32(14,e,!0),r.view.setUint32(12,p.size,!0),b.view.setUint32(18,p.size,!0)),t.writeUint8Array(r.array,(function(){c+=16,d()}),l)}function M(){g=g||{},n=n.trim(),g.directory&&"/"!=n.charAt(n.length-1)&&(n+="/"),a.hasOwnProperty(n)?r("File already exists."):(k=$(S(n)),s.push(n),function(e){var r;w=g.lastModDate||new Date,b=o(26),a[n]={headerArray:b.array,directory:g.directory,filename:k,offset:c,comment:$(S(g.comment||""))},b.view.setUint32(0,335546376),g.version&&b.view.setUint8(0,g.version),i||0===g.level||g.directory||b.view.setUint16(4,2048),b.view.setUint16(6,(w.getHours()<<6|w.getMinutes())<<5|w.getSeconds()/2,!0),b.view.setUint16(8,(w.getFullYear()-1980<<4|w.getMonth()+1)<<5|w.getDate(),!0),b.view.setUint16(22,k.length,!0),(r=o(30+k.length)).view.setUint32(0,1347093252),r.array.set(b.array,4),r.array.set(k,30),c+=r.array.length,t.writeUint8Array(r.array,e,l)}((function(){p?i||0===g.level?y(x,u++,p,t,0,p.size,!0,_,h,f,l):function(t,n,r,i,a,o,s,c,u){e.zip.useWebWorkers?v(t,{sn:n,options:{level:a},codecClass:"Deflater",crcType:"input"},r,i,0,r.size,s,o,c,u):m(new e.zip.Deflater,r,i,0,r.size,"input",s,o,c,u)}(x,u++,p,t,g.level,_,h,f,l):_()})))}p?p.init(M,f):M()},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null);var n,r,i,u=0,f=0;for(r=0;r<s.length;r++)u+=46+(i=a[s[r]]).filename.length+i.comment.length;for(n=o(u+22),r=0;r<s.length;r++)i=a[s[r]],n.view.setUint32(f,1347092738),n.view.setUint16(f+4,5120),n.array.set(i.headerArray,f+6),n.view.setUint16(f+32,i.comment.length,!0),i.directory&&n.view.setUint8(f+38,16),n.view.setUint32(f+42,i.offset,!0),n.array.set(i.filename,f+46),n.array.set(i.comment,f+46+i.filename.length),f+=46+i.filename.length+i.comment.length;n.view.setUint32(f,1347093766),n.view.setUint16(f+8,s.length,!0),n.view.setUint16(f+10,s.length,!0),n.view.setUint32(f+12,u,!0),n.view.setUint32(f+16,c,!0),t.writeUint8Array(n.array,(function(){t.getData(e)}),l)},_worker:null};e.zip.useWebWorkers?C("deflater",(function(e){p._worker=e,n(p)}),(function(e){r(e)})):n(p)}i.prototype.append=function(e){for(var t=0|this.crc,n=this.table,r=0,i=0|e.length;r<i;r++)t=t>>>8^n[255&(t^e[r])];this.crc=t},i.prototype.get=function(){return~this.crc},i.prototype.table=function(){var e,t,n,r=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)1&n?n=n>>>1^3988292384:n>>>=1;r[e]=n}return r}(),a.prototype.append=function(e,t){return e},a.prototype.flush=function(){},c.prototype=new s,c.prototype.constructor=c,u.prototype=new s,u.prototype.constructor=u,l.prototype=new s,l.prototype.constructor=l,f.prototype.getData=function(e){e(this.data)},p.prototype=new f,p.prototype.constructor=p,d.prototype=new f,d.prototype.constructor=d,h.prototype=new f,h.prototype.constructor=h;var M={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function C(t,n,r){if(null===e.zip.workerScripts||null===e.zip.workerScriptsPath){var i,a,o;if(e.zip.workerScripts){if(i=e.zip.workerScripts[t],!Array.isArray(i))return void r(new Error("zip.workerScripts."+t+" is not an array!"));a=i,o=document.createElement("a"),i=a.map((function(e){return o.href=e,o.href}))}else(i=M[t].slice(0))[0]=(e.zip.workerScriptsPath||"")+i[0];var s=new Worker(i[0]);s.codecTime=s.crcTime=0,s.postMessage({type:"importScripts",scripts:i.slice(1)}),s.addEventListener("message",(function e(t){var i=t.data;if(i.error)return s.terminate(),void r(i.error);"importScripts"===i.type&&(s.removeEventListener("message",e),s.removeEventListener("error",c),n(s))})),s.addEventListener("error",c)}else r(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function c(e){s.terminate(),r(e)}}function A(e){console.error(e)}e.zip={Reader:s,Writer:f,BlobReader:l,Data64URIReader:u,TextReader:c,BlobWriter:h,Data64URIWriter:d,TextWriter:p,createReader:function(e,t,n){n=n||A,e.init((function(){x(e,t,n)}),n)},createWriter:function(e,t,n,r){n=n||A,r=!!r,e.init((function(){_(e,t,n,r)}),n)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null}}(this)},function(e,t){!function(e){"use strict";if(e.zWorkerInitialized)throw new Error("z-worker.js should be run only once");e.zWorkerInitialized=!0,addEventListener("message",(function(e){var n=e.data,r=n.type,i=n.sn,a=t[r];if(a)try{a(n)}catch(e){!function(e,t,n){var r={type:e,sn:t,error:o(n)};postMessage(r)}(r,i,e)}}));var t={importScripts:function(e){e.scripts&&e.scripts.length>0&&importScripts.apply(void 0,e.scripts);postMessage({type:"importScripts"})},newTask:r,append:a,flush:a},n={};function r(t){var r=e[t.codecClass],i=t.sn;if(n[i])throw Error("duplicated sn");n[i]={codec:new r(t.options),crcInput:"input"===t.crcType,crcOutput:"output"===t.crcType,crc:new s},postMessage({type:"newTask",sn:i})}var i=e.performance?e.performance.now.bind(e.performance):Date.now;function a(e){var t=e.sn,a=e.type,o=e.data,s=n[t];!s&&e.codecClass&&(r(e),s=n[t]);var c,u="append"===a,l=i();if(u)try{c=s.codec.append(o,(function(e){postMessage({type:"progress",sn:t,loaded:e})}))}catch(e){throw delete n[t],e}else delete n[t],c=s.codec.flush();var f=i()-l;l=i(),o&&s.crcInput&&s.crc.append(o),c&&s.crcOutput&&s.crc.append(c);var p=i()-l,d={type:a,sn:t,codecTime:f,crcTime:p},h=[];c&&(d.data=c,h.push(c.buffer)),u||!s.crcInput&&!s.crcOutput||(d.crc=s.crc.get());try{postMessage(d,h)}catch(e){postMessage(d)}}function o(e){return{message:e.message,stack:e.stack}}function s(){this.crc=-1}function c(){}s.prototype.append=function(e){for(var t=0|this.crc,n=this.table,r=0,i=0|e.length;r<i;r++)t=t>>>8^n[255&(t^e[r])];this.crc=t},s.prototype.get=function(){return~this.crc},s.prototype.table=function(){var e,t,n,r=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)1&n?n=n>>>1^3988292384:n>>>=1;r[e]=n}return r}(),e.NOOP=c,c.prototype.append=function(e,t){return e},c.prototype.flush=function(){}}(this)},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var i=t&&t.prototype instanceof l?t:l,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return $()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function l(){}function f(){}function p(){}var d={};d[i]=function(){return this};var h=Object.getPrototypeOf,v=h&&h(h(S([])));v&&v!==t&&n.call(v,i)&&(d=v);var m=p.prototype=l.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function g(e){var t;this._invoke=function(r,i){function a(){return new Promise((function(t,a){!function t(r,i,a,o){var s=c(e[r],e,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,a,o)}),(function(e){t("throw",e,a,o)})):Promise.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return t("throw",e,a,o)}))}o(s.arg)}(r,i,t,a)}))}return t=t?t.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:$}}function $(){return{value:void 0,done:!0}}return f.prototype=m.constructor=p,p.constructor=f,p[o]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(g.prototype),g.prototype[a]=function(){return this},e.AsyncIterator=g,e.async=function(t,n,r,i){var a=new g(s(t,n,r,i));return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(m),m[o]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="section editor sn-component" id="editor-column" aria-label="Note"><div class="sn-component"><div class="sk-app-bar no-edges" ng-if="self.state.note.locked" ng-init="self.lockText = \'Note Locked\'" ng-mouseleave="self.lockText = \'Note Locked\'" ng-mouseover="self.lockText = \'Unlock\'"><div class="left"><div class="sk-app-bar-item" ng-click="self.toggleLockNote()"><div class="sk-label warning"><i class="icon ion-locked"></i>            {{self.lockText}}</div></div></div></div></div><div class="section-title-bar" id="editor-title-bar" ng-class="{\'locked\' : self.state.note.locked}" ng-show="self.state.note &amp;&amp; !self.state.note.errorDecrypting"><div class="title"><input class="input" id="note-title-editor" ng-blur="self.onNameBlur()" ng-change="self.onTitleChange()" ng-disabled="self.state.note.locked" ng-focus="self.onNameFocus()" ng-keyup="$event.keyCode == 13 &amp;&amp; self.onTitleEnter($event)" ng-model="self.state.note.title" select-on-click="true" spellcheck="false"></div><div id="save-status"><div class="message" ng-class="{\'warning sk-bold\': self.state.syncTakingTooLong, \'danger sk-bold\': self.state.saveError}">{{self.state.noteStatus.message}}</div><div class="desc" ng-show="self.state.noteStatus.desc">{{self.state.noteStatus.desc}}</div></div><div class="editor-tags"><div id="note-tags-component-container" ng-if="self.state.tagsComponent"><component-view class="component-view" component="self.state.tagsComponent" ng-class="{\'locked\' : self.state.note.locked}" ng-style="self.state.note.locked &amp;&amp; {\'pointer-events\' : \'none\'}"></component-view></div><input class="tags-input" ng-blur="self.saveTags()" ng-disabled="self.state.note.locked" ng-if="!(self.state.tagsComponent &amp;&amp; self.state.tagsComponent.active)" ng-keyup="$event.keyCode == 13 &amp;&amp; $event.target.blur();" ng-model="self.state.mutable.tagsString" placeholder="#tags" spellcheck="false" type="text"></div></div><div class="sn-component" ng-if="self.state.note"><div class="sk-app-bar no-edges" id="editor-menu-bar"><div class="left"><div class="sk-app-bar-item" click-outside="self.setMenuState(\'showOptionsMenu\', false)" is-open="self.state.showOptionsMenu" ng-class="{\'selected\' : self.state.showOptionsMenu}" ng-click="self.toggleMenu(\'showOptionsMenu\')"><div class="sk-label">Options</div><div class="sk-menu-panel dropdown-menu" ng-if="self.state.showOptionsMenu"><div class="sk-menu-panel-section"><div class="sk-menu-panel-header"><div class="sk-menu-panel-header-title">Note Options</div></div><menu-row action="self.selectedMenuItem(true); self.togglePin()" desc="\'Pin or unpin a note from the top of your list\'" label="self.state.note.pinned ? \'Unpin\' : \'Pin\'"></menu-row><menu-row action="self.selectedMenuItem(true); self.toggleArchiveNote()" desc="\'Archive or unarchive a note from your Archived system tag\'" label="self.state.note.archived ? \'Unarchive\' : \'Archive\'"></menu-row><menu-row action="self.selectedMenuItem(true); self.toggleLockNote()" desc="\'Locking notes prevents unintentional editing\'" label="self.state.note.locked ? \'Unlock\' : \'Lock\'"></menu-row><menu-row action="self.selectedMenuItem(true); self.toggleProtectNote()" desc="\'Protecting a note will require credentials to view \n                      it (Manage Privileges via Account menu)\'" label="self.state.note.content.protected ? \'Unprotect\' : \'Protect\'"></menu-row><menu-row action="self.selectedMenuItem(true); self.toggleNotePreview()" circle="self.state.note.content.hidePreview ? \'danger\' : \'success\'" circle-align="\'right\'" desc="\'Hide or unhide the note preview from the list of notes\'" label="\'Preview\'"></menu-row><menu-row action="self.selectedMenuItem(); self.deleteNote()" desc="\'Send this note to the trash\'" label="\'Move to Trash\'" ng-show="!self.state.altKeyDown &amp;&amp; !self.state.note.content.trashed &amp;&amp; !self.state.note.errorDecrypting" stylekit-class="\'warning\'"></menu-row><menu-row action="self.selectedMenuItem(); self.deleteNotePermanantely()" desc="\'Delete this note permanently from all your devices\'" label="\'Delete Permanently\'" ng-show="!self.state.note.content.trashed &amp;&amp; self.state.note.errorDecrypting" stylekit-class="\'danger\'"></menu-row></div><div ng-if="self.state.note.content.trashed || self.state.altKeyDown"><menu-row action="self.selectedMenuItem(true); self.restoreTrashedNote()" desc="\'Undelete this note and restore it back into your notes\'" label="\'Restore\'" ng-show="self.state.note.content.trashed" stylekit-class="\'info\'"></menu-row><menu-row action="self.selectedMenuItem(true); self.deleteNotePermanantely()" desc="\'Delete this note permanently from all your devices\'" label="\'Delete Permanently\'" stylekit-class="\'danger\'"></menu-row><menu-row action="self.selectedMenuItem(true); self.emptyTrash()" desc="\'Permanently delete all notes in the trash\'" label="\'Empty Trash\'" ng-show="self.state.note.content.trashed || !self.state.altKeyDown" stylekit-class="\'danger\'" subtitle="self.getTrashCount() + \' notes in trash\'"></menu-row></div><div class="sk-menu-panel-section"><div class="sk-menu-panel-header"><div class="sk-menu-panel-header-title">Global Display</div></div><menu-row action="self.selectedMenuItem(true); self.toggleKey(self.prefKeyMonospace)" circle="self.state.monospaceEnabled ? \'success\' : \'neutral\'" desc="\'Toggles the font style for the default editor\'" disabled="self.state.selectedEditor" label="\'Monospace Font\'" subtitle="self.state.selectedEditor ? \'Not available with editor extensions\' : null"></menu-row><menu-row action="self.selectedMenuItem(true); self.toggleKey(self.prefKeySpellcheck)" circle="self.state.spellcheck ? \'success\' : \'neutral\'" desc="\'Toggles spellcheck for the default editor\'" disabled="self.state.selectedEditor" label="\'Spellcheck\'" subtitle="\n                  self.state.selectedEditor \n                    ? \'Not available with editor extensions\' \n                    : (self.state.isDesktop ? \'May degrade editor performance\' : null)\n                  "></menu-row><menu-row action="self.selectedMenuItem(true); self.toggleKey(self.prefKeyMarginResizers)" circle="self.state.marginResizersEnabled ? \'success\' : \'neutral\'" desc="\'Allows for editor left and right margins to be resized\'" faded="!self.state.marginResizersEnabled" label="\'Margin Resizers\'"></menu-row></div></div></div><div class="sk-app-bar-item" click-outside="self.setMenuState(\'showEditorMenu\', false)" is-open="self.state.showEditorMenu" ng-class="{\'selected\' : self.state.showEditorMenu}" ng-click="self.toggleMenu(\'showEditorMenu\')"><div class="sk-label">Editor</div><editor-menu callback="self.editorMenuOnSelect" current-item="self.state.note" ng-if="self.state.showEditorMenu" selected-editor="self.state.selectedEditor"></editor-menu></div><div class="sk-app-bar-item" click-outside="self.setMenuState(\'showExtensions\', false)" is-open="self.state.showExtensions" ng-class="{\'selected\' : self.state.showExtensions}" ng-click="self.toggleMenu(\'showExtensions\')"><div class="sk-label">Actions</div><actions-menu item="self.state.note" ng-if="self.state.showExtensions"></actions-menu></div><div class="sk-app-bar-item" click-outside="self.setMenuState(\'showSessionHistory\', false)" is-open="self.state.showSessionHistory" ng-click="self.toggleMenu(\'showSessionHistory\')"><div class="sk-label">Session History</div><session-history-menu item="self.state.note" ng-if="self.state.showSessionHistory"></session-history-menu></div></div></div></div><div class="editor-content" id="editor-content" ng-if="self.state.noteReady &amp;&amp; !self.state.note.errorDecrypting"><panel-resizer class="left" control="self.leftResizeControl" hoverable="true" min-width="300" ng-if="self.state.marginResizersEnabled" on-resize-finish="self.onPanelResizeFinish" panel-id="\'editor-content\'" property="\'left\'"></panel-resizer><component-view class="component-view" component="self.state.selectedEditor" ng-if="self.state.selectedEditor" on-load="self.onEditorLoad"></component-view><textarea class="editable" id="note-text-editor" dir="auto" ng-attr-spellcheck="{{self.state.spellcheck}}" ng-change="self.contentChanged()" ng-click="self.clickedTextArea()" ng-focus="self.onContentFocus()" ng-if="!self.state.selectedEditor" ng-model="self.state.note.text" ng-model-options="{ debounce: self.state.editorDebounce}" ng-readonly="self.state.note.locked" ng-trim="false">{{self.onSystemEditorLoad()}}</textarea><panel-resizer control="self.rightResizeControl" hoverable="true" min-width="300" ng-if="self.state.marginResizersEnabled" on-resize-finish="self.onPanelResizeFinish" panel-id="\'editor-content\'" property="\'right\'"></panel-resizer></div><div class="section" ng-show="self.state.note.errorDecrypting"><p class="medium-padding" style="padding-top: 0 !important;">There was an error decrypting this item. Ensure you are running the \nlatest version of this app, then sign out and sign back in to try again.</p></div><div id="editor-pane-component-stack" ng-show="self.state.note"><div class="sk-app-bar no-edges" id="component-stack-menu-bar" ng-if="self.state.componentStack.length"><div class="left"><div class="sk-app-bar-item" ng-click="self.toggleStackComponentForCurrentItem(component)" ng-repeat="component in self.state.componentStack"><div class="sk-app-bar-item-column"><div class="sk-circle small" ng-class="{\'info\' : !component.hidden &amp;&amp; component.active, \'neutral\' : component.hidden  || !component.active}"></div></div><div class="sk-app-bar-item-column"><div class="sk-label">{{component.name}}</div></div></div></div></div><div class="sn-component"><component-view class="component-view component-stack-item" component="component" manual-dealloc="true" ng-if="component.active" ng-repeat="component in self.state.componentStack" ng-show="!component.hidden"></component-view></div></div></div>'}},function(e,t){},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component"><div class="sk-app-bar no-edges no-bottom-edge" id="footer-bar"><div class="left"><div class="sk-app-bar-item" click-outside="ctrl.clickOutsideAccountMenu()" is-open="ctrl.showAccountMenu" ng-click="ctrl.accountMenuPressed()"><div class="sk-app-bar-item-column"><div class="sk-circle small" ng-class="ctrl.error ? \'danger\' : (ctrl.getUser() ? \'info\' : \'neutral\')"></div></div><div class="sk-app-bar-item-column"><div class="sk-label title" ng-class="{red: ctrl.error}">Account</div></div><account-menu close-function="ctrl.closeAccountMenu" ng-click="$event.stopPropagation()" ng-if="ctrl.showAccountMenu"></account-menu></div><div class="sk-app-bar-item"><a class="no-decoration sk-label title" href="https://standardnotes.org/help" rel="noopener" target="_blank">Help</a></div><div class="sk-app-bar-item border"></div><div class="sk-app-bar-item" ng-repeat="room in ctrl.rooms track by room.uuid"><div class="sk-app-bar-item-column" ng-click="ctrl.selectRoom(room)"><div class="sk-label">{{room.name}}</div></div><component-modal component="room" ng-if="room.showRoom" on-dismiss="ctrl.onRoomDismiss"></component-modal></div></div><div class="center"><div class="sk-app-bar-item" ng-show="ctrl.arbitraryStatusMessage"><div class="sk-app-bar-item-column"><span class="neutral sk-label">{{ctrl.arbitraryStatusMessage}}</span></div></div></div><div class="right"><div class="sk-app-bar-item" ng-click="ctrl.openSecurityUpdate()" ng-show="ctrl.securityUpdateAvailable"><span class="success sk-label">Security update available.</span></div><div class="sk-app-bar-item" ng-click="ctrl.clickedNewUpdateAnnouncement()" ng-show="ctrl.newUpdateAvailable == true"><span class="info sk-label">New update available.</span></div><div class="sk-app-bar-item no-pointer" ng-if="ctrl.lastSyncDate &amp;&amp; !ctrl.isRefreshing"><div class="sk-label subtle">Last refreshed {{ctrl.lastSyncDate}}</div></div><div class="sk-app-bar-item" ng-click="ctrl.toggleSyncResolutionMenu()" ng-if="(ctrl.outOfSync &amp;&amp; !ctrl.isRefreshing) || ctrl.showSyncResolution"><div class="sk-label warning" ng-if="ctrl.outOfSync">Potentially Out of Sync</div><sync-resolution-menu close-function="ctrl.toggleSyncResolutionMenu" ng-click="$event.stopPropagation();" ng-if="ctrl.showSyncResolution"></sync-resolution-menu></div><div class="sk-app-bar-item" ng-if="ctrl.lastSyncDate &amp;&amp; ctrl.isRefreshing"><div class="sk-spinner small"></div></div><div class="sk-app-bar-item" ng-if="ctrl.offline"><div class="sk-label">Offline</div></div><div class="sk-app-bar-item" ng-click="ctrl.refreshData()" ng-if="!ctrl.offline"><div class="sk-label">Refresh</div></div><div class="sk-app-bar-item border" ng-if="ctrl.dockShortcuts.length &gt; 0"></div><div class="sk-app-bar-item dock-shortcut" ng-repeat="shortcut in ctrl.dockShortcuts"><div class="sk-app-bar-item-column" ng-class="{\'underline\': shortcut.component.active}" ng-click="ctrl.selectShortcut(shortcut)"><div class="div" ng-if="shortcut.icon.type == \'circle\'" title="{{shortcut.name}}"><div class="sk-circle small" ng-style="{\'background-color\': shortcut.icon.background_color, \'border-color\': shortcut.icon.border_color}"></div></div><div class="div" ng-if="shortcut.icon.type == \'svg\'" title="{{shortcut.name}}"><div class="svg-item" elem-ready="ctrl.initSvgForShortcut(shortcut)" ng-attr-id="dock-svg-{{shortcut.component.uuid}}"></div></div></div></div><div class="sk-app-bar-item border" ng-if="ctrl.hasPasscode()"></div><div class="sk-app-bar-item" id="lock-item" ng-click="ctrl.lockApp()" ng-if="ctrl.hasPasscode()" title="Locks application and wipes unencrypted data from memory."><div class="sk-label"><i class="icon ion-locked" id="footer-lock-icon"></i></div></div></div></div></div>'}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component section notes" id="notes-column" aria-label="Notes"><div class="content"><div class="section-title-bar" id="notes-title-bar"><div class="padded"><div class="section-title-bar-header"><div class="title">{{self.state.panelTitle}}</div><div class="sk-button contrast wide" ng-click="self.createNewNote()" title="Create a new note in the selected tag"><div class="sk-label"><i class="icon ion-plus add-button"></i></div></div></div><div class="filter-section" role="search"><input class="filter-bar" id="search-bar" ng-blur="self.onFilterEnter()" ng-change="self.filterTextChanged()" ng-keyup="$event.keyCode == 13 &amp;&amp; self.onFilterEnter();" ng-model="self.state.noteFilter.text" placeholder="Search" select-on-click="true" title="Searches notes in the currently selected tag"><div id="search-clear-button" ng-click="self.clearFilterText();" ng-show="self.state.noteFilter.text">â</div></div></div><div class="sn-component" id="notes-menu-bar"><div class="sk-app-bar no-edges"><div class="left"><div class="sk-app-bar-item" ng-class="{\'selected\' : self.state.mutable.showMenu}" ng-click="self.state.mutable.showMenu = !self.state.mutable.showMenu"><div class="sk-app-bar-item-column"><div class="sk-label">Options</div></div><div class="sk-app-bar-item-column"><div class="sk-sublabel">{{self.optionsSubtitle()}}</div></div></div><div class="sk-menu-panel dropdown-menu" id="notes-options-menu" ng-show="self.state.mutable.showMenu"><div class="sk-menu-panel-header"><div class="sk-menu-panel-header-title">Sort By</div><a class="info sk-h5" ng-click="self.toggleReverseSort()">{{self.state.sortReverse === true ? \'Disable Reverse Sort\' : \'Enable Reverse Sort\'}}</a></div><menu-row action="self.selectedMenuItem(); self.selectedSortByCreated()" circle="self.state.sortBy == \'created_at\' &amp;&amp; \'success\'" desc="\'Sort notes by newest first\'" label="\'Date Added\'"></menu-row><menu-row action="self.selectedMenuItem(); self.selectedSortByUpdated()" circle="self.state.sortBy == \'client_updated_at\' &amp;&amp; \'success\'" desc="\'Sort notes with the most recently updated first\'" label="\'Date Modified\'"></menu-row><menu-row action="self.selectedMenuItem(); self.selectedSortByTitle()" circle="self.state.sortBy == \'title\' &amp;&amp; \'success\'" desc="\'Sort notes alphabetically by their title\'" label="\'Title\'"></menu-row><div class="sk-menu-panel-section"><div class="sk-menu-panel-header"><div class="sk-menu-panel-header-title">Display</div></div><menu-row action="self.selectedMenuItem(); self.togglePrefKey(\'showArchived\')" circle="self.state.showArchived ? \'success\' : \'danger\'" desc="\'Archived notes are usually hidden.\n                    You can explicitly show them with this option.\'" faded="!self.state.showArchived" label="\'Archived Notes\'"></menu-row><menu-row action="self.selectedMenuItem(); self.togglePrefKey(\'hidePinned\')" circle="self.state.hidePinned ? \'danger\' : \'success\'" desc="\'Pinned notes always appear on top. You can hide them temporarily\n                    with this option so you can focus on other notes in the list.\'" faded="self.state.hidePinned" label="\'Pinned Notes\'"></menu-row><menu-row action="self.selectedMenuItem(); self.togglePrefKey(\'hideNotePreview\')" circle="self.state.hideNotePreview ? \'danger\' : \'success\'" desc="\'Hide the note preview for a more condensed list of notes\'" faded="self.state.hideNotePreview" label="\'Note Preview\'"></menu-row><menu-row action="self.selectedMenuItem(); self.togglePrefKey(\'hideDate\')" circle="self.state.hideDate ? \'danger\' : \'success\'" desc="\'Hide the date displayed in each row\'" faded="self.state.hideDate" label="\'Date\'"></menu-row><menu-row action="self.selectedMenuItem(); self.togglePrefKey(\'hideTags\')" circle="self.state.hideTags ? \'danger\' : \'success\'" desc="\'Hide the list of tags associated with each note\'" faded="self.state.hideTags" label="\'Tags\'"></menu-row></div></div></div></div></div></div><div class="scrollable"><div class="infinite-scroll" id="notes-scrollable" can-load="true" infinite-scroll="self.paginate()" threshold="200"><div class="note" ng-class="{\'selected\' : self.state.selectedNote == note}" ng-click="self.selectNote(note, true)" ng-repeat="note in self.state.renderedNotes track by note.uuid"><div class="note-flags" ng-show="note.flags.length &gt; 0"><div class="flag" ng-class="flag.class" ng-repeat="flag in note.flags"><div class="label">{{flag.text}}</div></div></div><div class="name" ng-show="note.title">{{note.title}}</div><div class="note-preview" ng-if="\n              !self.state.hideNotePreview &amp;&amp;\n              !note.content.hidePreview &amp;&amp;\n              !note.content.protected"><div class="html-preview" ng-bind-html="note.content.preview_html" ng-show="note.content.preview_html"></div><div class="plain-preview" ng-show="!note.content.preview_html &amp;&amp; note.content.preview_plain">{{note.content.preview_plain}}</div><div class="default-preview" ng-show="!note.content.preview_html &amp;&amp; !note.content.preview_plain">{{note.text}}</div></div><div class="date faded" ng-show="!self.state.hideDate"><span ng-show="self.state.sortBy == \'client_updated_at\'">Modified {{note.cachedUpdatedAtString || \'Now\'}}</span><span ng-show="self.state.sortBy != \'client_updated_at\'">{{note.cachedCreatedAtString || \'Now\'}}</span></div><div class="tags-string" ng-show="note.shouldShowTags"><div class="faded">{{note.savedTagsString || note.tagsString()}}</div></div></div></div></div></div><panel-resizer collapsable="true" control="self.panelController" default-width="300" hoverable="true" on-resize-finish="self.onPanelResize" panel-id="\'notes-column\'"></panel-resizer></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component section tags" id="tags-column" aria-label="Tags"><div class="component-view-container" ng-if="self.component.active"><component-view class="component-view" component="self.component"></component-view></div><div class="content" id="tags-content" ng-if="!(self.component &amp;&amp; self.component.active)"><div class="tags-title-section section-title-bar"><div class="section-title-bar-header"><div class="sk-h3 title"><span class="sk-bold">Views</span></div><div class="sk-button sk-secondary-contrast wide" ng-click="self.clickedAddNewTag()" title="Create a new tag"><div class="sk-label"><i class="icon ion-plus add-button"></i></div></div></div></div><div class="scrollable"><div class="infinite-scroll"><div class="tag" ng-class="{\'selected\' : self.state.selectedTag == tag, \'faded\' : !tag.content.isAllTag}" ng-click="self.selectTag(tag)" ng-repeat="tag in self.state.smartTags"><div class="tag-info"><input class="title" ng-disabled="true" ng-model="tag.title"><div class="count" ng-show="tag.content.isAllTag">{{self.state.noteCounts[tag.uuid]}}</div></div></div><div class="tags-title-section section-title-bar"><div class="section-title-bar-header"><div class="sk-h3 title"><span class="sk-bold">Tags</span></div></div></div><div class="tag" ng-class="{\'selected\' : self.state.selectedTag == tag}" ng-click="self.selectTag(tag)" ng-repeat="tag in self.state.tags track by tag.uuid"><div class="tag-info"><div class="tag-icon">#</div><input class="title" ng-attr-id="tag-{{tag.uuid}}" ng-blur="self.saveTag($event, tag)" ng-change="self.tagTitleDidChange(tag)" ng-class="{\'editing\' : self.state.editingTag == tag}" ng-click="self.selectTag(tag)" ng-keyup="$event.keyCode == 13 &amp;&amp; $event.target.blur()" ng-model="tag.title" should-focus="self.state.newTag || self.state.editingTag == tag" sn-autofocus="true" spellcheck="false"><div class="count">{{self.state.noteCounts[tag.uuid]}}</div></div><div class="danger small-text bold" ng-show="tag.content.conflict_of">Conflicted Copy</div><div class="danger small-text bold" ng-show="tag.errorDecrypting">Missing Keys</div><div class="menu" ng-show="self.state.selectedTag == tag"><a class="item" ng-click="self.selectedRenameTag($event, tag)" ng-show="!self.state.editingTag">Rename</a><a class="item" ng-click="self.saveTag($event, tag)" ng-show="self.state.editingTag">Save</a><a class="item" ng-click="self.selectedDeleteTag(tag)">Delete</a></div></div><div class="no-tags-placeholder" ng-show="self.state.tags.length == 0">No tags. Create one using the add button above.</div></div></div></div><panel-resizer collapsable="true" control="self.panelController" default-width="150" hoverable="true" on-resize-finish="self.onPanelResize" panel-id="\'tags-column\'"></panel-resizer></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="main-ui-view" ng-class="platform"><lock-screen ng-if="needsUnlock" on-success="onSuccessfulUnlock"></lock-screen><div class="app" id="app" ng-class="appClass" ng-if="!needsUnlock"><tags-panel></tags-panel><notes-panel></notes-panel><editor-panel></editor-panel></div><footer ng-if="!needsUnlock"></footer></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component" id="lock-screen"><div class="sk-panel"><div class="sk-panel-header"><div class="sk-panel-header-title">Passcode Required</div></div><div class="sk-panel-content"><div class="sk-panel-section"><form class="sk-panel-form sk-panel-row" ng-submit="ctrl.submitPasscodeForm($event)"><div class="sk-panel-column stretch"><input class="center-text sk-input contrast" id="passcode-input" autocomplete="new-password" autofocus="true" ng-model="ctrl.formData.passcode" placeholder="Enter Passcode" should-focus="true" sn-autofocus="true" type="password"><div class="sk-button-group stretch sk-panel-row form-submit"><button class="sk-button info" type="submit"><div class="sk-label">Unlock</div></button></div></div></form></div></div><div class="sk-panel-footer"><div id="passcode-reset"><a class="sk-a neutral" ng-click="ctrl.forgotPasscode()" ng-if="!ctrl.formData.showRecovery">Forgot?</a><div ng-if="ctrl.formData.showRecovery"><div class="sk-p">If you forgot your local passcode, your only option is to clear \nyour local data from this device and sign back in to your account.</div><div class="sk-panel-row"></div><a class="sk-a danger center-text" ng-click="ctrl.beginDeleteData()">Delete Local Data</a></div></div></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component"><div class="sk-panel" id="account-panel"><div class="sk-panel-header"><div class="sk-panel-header-title">Account</div><a class="sk-a info close-button" ng-click="self.close()">Close</a></div><div class="sk-panel-content"><div class="sk-panel-section sk-panel-hero" ng-if="\n          !self.state.user &amp;&amp; \n          !self.state.formData.showLogin &amp;&amp; \n          !self.state.formData.showRegister &amp;&amp; \n          !self.state.formData.mfa"><div class="sk-panel-row"><div class="sk-h1">Sign in or register to enable sync and end-to-end encryption.</div></div><div class="sk-panel-row"><div class="sk-button-group stretch"><div class="sk-button info featured" ng-click="self.state.formData.showLogin = true"><div class="sk-label">Sign In</div></div><div class="sk-button info featured" ng-click="self.state.formData.showRegister = true"><div class="sk-label">Register</div></div></div></div><div class="sk-panel-row sk-p">Standard Notes is free on every platform, and comes \nstandard with sync and encryption.</div></div><div class="sk-panel-section" ng-if="\n          self.state.formData.showLogin || \n          self.state.formData.showRegister"><div class="sk-panel-section-title">{{self.state.formData.showLogin ? "Sign In" : "Register"}}</div><form class="sk-panel-form" ng-submit="self.submitAuthForm()"><div class="sk-panel-section"><input class="sk-input contrast" name="email" ng-model="self.state.formData.email" ng-model-options="{allowInvalid: true}" placeholder="Email" required="" should-focus="true" sn-autofocus="true" spellcheck="false" type="email"><input class="sk-input contrast" name="password" ng-model="self.state.formData.user_password" placeholder="Password" required="" sn-enter="self.submitAuthForm()" type="password"><input class="sk-input contrast" name="password_conf" ng-if="self.state.formData.showRegister" ng-model="self.state.formData.password_conf" placeholder="Confirm Password" required="" sn-enter="self.submitAuthForm()" type="password"><div class="sk-panel-row"></div><a class="sk-panel-row sk-bold" ng-click="\n                self.state.formData.showAdvanced = !self.state.formData.showAdvanced\n                ">Advanced Options</a></div><div class="sk-notification unpadded contrast advanced-options sk-panel-row" ng-if="self.state.formData.showAdvanced"><div class="sk-panel-column stretch"><div class="sk-notification-title sk-panel-row padded-row">Advanced Options</div><div class="bordered-row padded-row"><label class="sk-label">Sync Server Domain</label><input class="sk-input mt-5 sk-base" name="server" ng-model="self.state.formData.url" placeholder="Server URL" required="" type="text"></div><label class="sk-label padded-row sk-panel-row justify-left" ng-if="self.state.formData.showLogin"><div class="sk-horizontal-group tight"><input class="sk-input" ng-model="self.state.formData.strictSignin" type="checkbox"><p class="sk-p">Use strict sign in</p><span><a class="info" href="https://standardnotes.org/help/security" rel="noopener" target="_blank">(Learn more)</a></span></div></label></div></div><div class="sk-panel-section form-submit" ng-if="!self.state.formData.authenticating"><div class="sk-button-group stretch"><div class="sk-button info featured" ng-click="self.submitAuthForm()" ng-disabled="self.state.formData.authenticating"><div class="sk-label">{{self.state.formData.showLogin ? "Sign In" : "Register"}}</div></div></div></div><div class="sk-notification neutral" ng-if="self.state.formData.showRegister"><div class="sk-notification-title">No Password Reset.</div><div class="sk-notification-text">Because your notes are encrypted using your password, \nStandard Notes does not have a password reset option. \nYou cannot forget your password.</div></div><div class="sk-panel-section no-bottom-pad" ng-if="self.state.formData.status"><div class="sk-horizontal-group"><div class="sk-spinner small neutral"></div><div class="sk-label">{{self.state.formData.status}}</div></div></div><div class="sk-panel-section no-bottom-pad" ng-if="!self.state.formData.authenticating"><label class="sk-panel-row justify-left"><div class="sk-horizontal-group tight"><input ng-false-value="true" ng-model="self.state.formData.ephemeral" ng-true-value="false" type="checkbox"><p class="sk-p">Stay signed in</p></div></label><label class="sk-panel-row justify-left" ng-if="self.notesAndTagsCount() &gt; 0"><div class="sk-panel-row"></div><input ng-bind="true" ng-change="self.mergeLocalChanged()" ng-model="self.state.formData.mergeLocal" type="checkbox">Merge local data ({{self.notesAndTagsCount()}} notes and tags)</label></div></form></div><div class="sk-panel-section" ng-if="self.state.formData.mfa"><form class="sk-panel-form" ng-submit="self.submitMfaForm()"><div class="sk-p sk-panel-row">{{self.state.formData.mfa.message}}</div><div class="sk-panel-row"><input class="sk-input contrast" autofocus="true" name="mfa" ng-model="self.state.formData.userMfaCode" placeholder="Enter Code" required="" should-focus="true" sn-autofocus="true"></div><div class="sk-button-group stretch sk-panel-row form-submit" ng-if="!self.state.formData.status"><button class="sk-button info featured" type="submit"><div class="sk-label">Sign In</div></button></div></form><div class="sk-panel-section no-bottom-pad" ng-if="self.state.formData.status"><div class="sk-panel-row"></div><div class="sk-panel-row"></div><div class="sk-horizontal-group"><div class="sk-spinner small neutral"></div><div class="sk-label">{{self.state.formData.status}}</div></div></div></div><div ng-if="\n          !self.state.formData.showLogin &amp;&amp; \n          !self.state.formData.showRegister &amp;&amp; \n          !self.state.formData.mfa"><div class="sk-panel-section" ng-if="self.state.user"><div class="sk-notification danger" ng-if="self.syncStatus.error"><div class="sk-notification-title">Sync Unreachable</div><div class="sk-notification-text">Hmm...we can\'t seem to sync your account. \nThe reason: {{self.syncStatus.error.message}}</div><a class="sk-a info-contrast sk-bold sk-panel-row" href="https://standardnotes.org/help" rel="noopener" target="_blank">Need help?</a></div><div class="sk-panel-row"><div class="sk-panel-column"><div class="sk-h1 sk-bold wrap">{{self.state.user.email}}</div><div class="sk-subtitle subtle normal">{{self.state.server}}</div></div><div class="sk-horizontal-group" delay="1000" delay-hide="true" show="self.syncStatus.syncOpInProgress || self.syncStatus.needsMoreSync"><div class="sk-spinner small info"></div><div class="sk-sublabel">{{"Syncing" + (self.syncStatus.total > 0 ? ":" : "")}}<span ng-if="self.syncStatus.total &gt; 0">{{self.syncStatus.current}}/{{self.syncStatus.total}}</span></div></div></div><div class="sk-panel-row"></div><a class="sk-a info sk-panel-row condensed" ng-click="self.openPasswordWizard(\'change-pw\')">Change Password</a><a class="sk-a info sk-panel-row condensed" ng-click="self.openPrivilegesModal(\'\')" ng-show="self.state.user">Manage Privileges</a><a class="sk-panel-row justify-left condensed success" ng-click="self.openPasswordWizard(\'upgrade-security\')" ng-if="self.state.securityUpdateAvailable"><div class="inline sk-circle small success mr-8"></div><div class="inline">Security Update Available</div></a></div><div class="sk-panel-section"><div class="sk-panel-section-title">Encryption</div><div class="sk-panel-section-subtitle info" ng-if="self.encryptionEnabled()">{{self.encryptionStatusForNotes()}}</div><p class="sk-p">{{self.encryptionStatusString()}}</p></div><div class="sk-panel-section"><div class="sk-panel-section-title">Passcode Lock</div><div ng-if="!self.hasPasscode()"><div ng-if="self.state.canAddPasscode"><div class="sk-panel-row" ng-if="!self.state.formData.showPasscodeForm"><div class="sk-button info" ng-click="self.addPasscodeClicked(); $event.stopPropagation();"><div class="sk-label">Add Passcode</div></div></div><p class="sk-p"> Add a passcode to lock the application and \nencrypt on-device key storage.</p></div><div ng-if="!self.state.canAddPasscode"><p class="sk-p">Adding a passcode is not supported in temporary sessions. Please sign \nout, then sign back in with the "Stay signed in" option checked.</p></div></div><form class="sk-panel-form" ng-if="self.state.formData.showPasscodeForm" ng-submit="self.submitPasscodeForm()"><div class="sk-panel-row"></div><input class="sk-input contrast" ng-model="self.state.formData.passcode" placeholder="Passcode" should-focus="true" sn-autofocus="true" type="password"><input class="sk-input contrast" ng-model="self.state.formData.confirmPasscode" placeholder="Confirm Passcode" type="password"><div class="sk-button-group stretch sk-panel-row form-submit"><button class="sk-button info" type="submit"><div class="sk-label">Set Passcode</div></button></div><a class="neutral sk-a sk-panel-row" ng-click="self.state.formData.showPasscodeForm = false">Cancel</a></form><div ng-if="self.hasPasscode() &amp;&amp; !self.state.formData.showPasscodeForm"><div class="sk-p">Passcode lock is enabled.</div><div class="sk-notification contrast"><div class="sk-notification-title">Options</div><div class="sk-notification-text"><div class="sk-panel-row"><div class="sk-horizontal-group"><div class="sk-h4 sk-bold">Autolock</div><a class="sk-a info" ng-class="{\n                        \'boxed\' : option.value == self.state.selectedAutoLockInterval\n                        }" ng-click="self.selectAutoLockInterval(option.value)" ng-repeat="option in self.state.passcodeAutoLockOptions">{{option.label}}</a></div></div><div class="sk-p">The autolock timer begins when the window or tab loses focus.</div><div class="sk-panel-row"></div><a class="sk-a info sk-panel-row condensed" ng-click="self.openPrivilegesModal(\'\')" ng-show="!self.state.user">Manage Privileges</a><a class="sk-a info sk-panel-row condensed" ng-click="self.changePasscodePressed()">Change Passcode</a><a class="sk-a danger sk-panel-row condensed" ng-click="self.removePasscodePressed()">Remove Passcode</a></div></div></div></div><div class="sk-panel-section" ng-if="!self.state.importData.loading"><div class="sk-panel-section-title">Data Backups</div><div class="sk-p">Download a backup of all your data.</div><div class="sk-panel-row"></div><form class="sk-panel-form sk-panel-row" ng-if="self.encryptedBackupsAvailable()"><div class="sk-input-group"><label class="sk-horizontal-group tight"><input ng-change="self.state.mutable.backupEncrypted = true" ng-model="self.state.mutable.backupEncrypted" ng-value="true" type="radio"><p class="sk-p">Encrypted</p></label><label class="sk-horizontal-group tight"><input ng-change="self.state.mutable.backupEncrypted = false" ng-model="self.state.mutable.backupEncrypted" ng-value="false" type="radio"><p class="sk-p">Decrypted</p></label></div></form><div class="sk-panel-row"></div><div class="sk-button-group sk-panel-row justify-left"><div class="sk-button info" ng-click="self.downloadDataArchive()"><div class="sk-label">Download Backup</div></div><label class="sk-button info"><input file-change="-&gt;" handler="self.importFileSelected(files)" style="display: none;" type="file"><div class="sk-label">Import Backup</div></label></div><span ng-if="self.isDesktopApplication()">Backups are automatically created on desktop and can be managed \nvia the "Backups" top-level menu.</span><div id="import-password-request" ng-if="self.state.importData.requestPassword"><form class="sk-panel-form stretch" ng-submit="self.submitImportPassword()"><p>Enter the account password associated with the import file.</p><input class="sk-input contrast mt-5" autofocus="true" ng-model="self.state.importData.password" placeholder="Enter File Account Password" type="password"><div class="sk-button-group stretch sk-panel-row form-submit"><button class="sk-button info" type="submit"><div class="sk-label">Decrypt & Import</div></button></div><p>Importing from backup will not overwrite existing data, \nbut instead create a duplicate of any differing data.</p><p>If you\'d like to import only a selection of items instead of \nthe whole file, please use the Batch Manager extension.</p></form></div><div class="sk-panel-row"><div class="sk-spinner small info" ng-if="self.state.importData.loading"></div></div></div></div></div><div class="sk-panel-footer"><div class="sk-panel-row"><div class="sk-p left neutral faded">{{self.state.appVersion}}</div><a class="sk-a right" ng-click="self.hidePasswordForm()" ng-if="self.state.formData.showLogin || self.state.formData.showRegister">Cancel</a><a class="sk-a right danger" ng-click="self.destroyLocalData()" ng-if="\n              !self.state.formData.showLogin &amp;&amp; \n              !self.state.formData.showRegister">{{ self.state.user ? "Sign out and clear local data" : "Clear all local data" }}</a></div></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component"><div class="sk-menu-panel dropdown-menu"><a class="no-decoration" href="https://standardnotes.org/extensions" ng-if="self.state.extensions.length == 0" rel="noopener" target="blank"><menu-row label="\'Download Actions\'"></menu-row></a><div ng-repeat="extension in self.state.extensions"><div class="sk-menu-panel-header" ng-click="extension.hide = !extension.hide; $event.stopPropagation();"><div class="sk-menu-panel-column"><div class="sk-menu-panel-header-title">{{extension.name}}</div><div class="sk-spinner small loading" ng-if="extension.loading"></div><div ng-if="extension.hide">â¦</div></div></div><menu-row action="self.executeAction(action, extension);" label="action.label" ng-if="!extension.hide" ng-repeat="action in extension.actionsWithContextForItem(self.props.item)" spinner-class="action.running ? \'info\' : null" sub-rows="action.subrows" subtitle="action.desc"><div class="sk-sublabel" ng-if="action.access_type">Uses <strong>{{action.access_type}}</strong> access to this note.</div></menu-row><menu-row faded="true" label="\'No Actions Available\'" ng-if="extension.actionsWithContextForItem(self.props.item).length == 0"></menu-row></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sk-modal-background" ng-click="ctrl.dismiss()"></div><div class="sk-modal-content" ng-attr-id="component-content-outer-{{ctrl.component.uuid}}"><div class="sn-component"><div class="sk-panel" ng-attr-id="component-content-inner-{{ctrl.component.uuid}}"><div class="sk-panel-header"><div class="sk-panel-header-title">{{ctrl.component.name}}</div><a class="sk-a info close-button" ng-click="ctrl.dismiss()">Close</a></div><component-view class="component-view" component="ctrl.component"></component-view></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component" ng-if="ctrl.issueLoading"><div class="sk-app-bar no-edges no-top-edge dynamic-height"><div class="left"><div class="sk-app-bar-item"><div class="sk-label warning">There was an issue loading {{ctrl.component.name}}.</div></div></div><div class="right"><div class="sk-app-bar-item" ng-click="ctrl.reloadComponent()"><div class="sk-button info"><div class="sk-label">Reload</div></div></div></div></div></div><div class="sn-component" ng-if="ctrl.showNoThemesMessage"><div class="sk-app-bar no-edges no-top-edge dynamic-height"><div class="left"><div class="sk-app-bar-item"><div class="sk-label warning">This extension does not support themes.</div></div></div><div class="right"><div class="sk-app-bar-item" ng-click="ctrl.dismissNoThemesMessage()"><div class="sk-label">Dismiss</div></div><div class="sk-app-bar-item" ng-click="ctrl.disableActiveTheme()"><div class="sk-label">Disable Active Theme</div></div></div></div></div><div class="sn-component" ng-if="ctrl.expired"><div class="sk-app-bar no-edges no-top-edge dynamic-height"><div class="left"><div class="sk-app-bar-item"><div class="sk-app-bar-item-column"><div class="sk-circle danger small"></div></div><div class="sk-app-bar-item-column"><div><a class="sk-label sk-base" href="https://dashboard.standardnotes.org" rel="noopener" target="_blank">Your Extended subscription expired on \n{{ctrl.component.dateToLocalizedString(ctrl.component.valid_until)}}.</a><div class="sk-p">Extensions are in a read-only state.</div></div></div></div></div><div class="right"><div class="sk-app-bar-item" ng-click="ctrl.reloadComponent()"><div class="sk-button info"><div class="sk-label">Reload</div></div></div><div class="sk-app-bar-item"><div class="sk-app-bar-item-column"><div class="sk-button warning"><a class="sk-label" href="https://standardnotes.org/help/41/expired" rel="noopener" target="_blank">Help</a></div></div></div></div></div></div><div class="sn-component" ng-if="ctrl.error == \'offline-restricted\'"><div class="sk-panel static"><div class="sk-panel-content"><div class="sk-panel-section stretch"><div class="sk-panel-column"></div><div class="sk-h1 sk-bold">You have restricted this extension to be used offline only.</div><div class="sk-subtitle">Offline extensions are not available in the Web app.</div><div class="sk-panel-row"></div><div class="sk-panel-row"><div class="sk-panel-column"><div class="sk-p">You can either:</div><ul><li class="sk-p"><strong>Enable the Hosted option</strong> for this extension by opening the \'Extensions\' menu and \ntoggling \'Use hosted when local is unavailable\' under this \nextension\'s options. Then press Reload below.</li><li class="sk-p"><strong>Use the Desktop application.</strong></li></ul></div></div><div class="sk-panel-row"><div class="sk-button info" ng-click="ctrl.reloadStatus()" ng-if="!ctrl.reloading"><div class="sk-label">Reload</div></div><div class="sk-spinner info small" ng-if="ctrl.reloading"></div></div></div></div></div></div><div class="sn-component" ng-if="ctrl.error == \'url-missing\'"><div class="sk-panel static"><div class="sk-panel-content"><div class="sk-panel-section stretch"><div class="sk-panel-section-title">This extension is not installed correctly.</div><p>Please uninstall {{ctrl.component.name}}, then re-install it.</p><p>This issue can occur if you access Standard Notes using an older \nversion of the app.\nEnsure you are running at least version 2.1 on all platforms.</p></div></div></div></div><iframe data-component-id="{{ctrl.component.uuid}}" frameborder="0" ng-attr-id="component-iframe-{{ctrl.component.uuid}}" ng-if="ctrl.component &amp;&amp; ctrl.componentValid" ng-src="{{ctrl.getUrl() | trusted}}" sandbox="allow-scripts allow-top-navigation-by-user-activation allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-modals allow-forms">Loading</iframe><div class="loading-overlay" ng-if="ctrl.loading"></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component"><div class="sk-modal large" id="conflict-resolution-modal"><div class="sk-modal-background"></div><div class="sk-modal-content"><div class="sk-panel"><div class="sk-panel-header"><h1 class="sk-panel-header-title">Conflicted items âÂ choose which version to keep</h1><div class="sk-horizontal-group"><a class="sk-a info close-button" ng-click="ctrl.keepItem1()">Keep left</a><a class="sk-a info close-button" ng-click="ctrl.keepItem2()">Keep right</a><a class="sk-a info close-button" ng-click="ctrl.keepBoth()">Keep both</a><a class="sk-a info close-button" ng-click="ctrl.export()">Export</a><a class="sk-a info close-button" ng-click="ctrl.dismiss(); $event.stopPropagation()">Close</a></div></div><div class="sk-panel-content selectable"><div class="sk-panel-section"><h3><strong>Content type:</strong>{{ctrl.contentType}}</h3><p>You may wish to look at the "created_at" and "updated_at" fields\nof the items to gain better context in deciding which to keep.</p></div><div id="items"><div class="sk-panel static item" id="item1"><p class="normal" style="white-space: pre-wrap; font-size: 16px;"> {{ctrl.item1Content}}</p></div><div class="border"></div><div class="sk-panel static item" id="item2"><p class="normal" style="white-space: pre-wrap; font-size: 16px;"> {{ctrl.item2Content}}</p></div></div></div></div></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component"><div class="sk-menu-panel dropdown-menu"><div class="sk-menu-panel-section"><div class="sk-menu-panel-header"><div class="sk-menu-panel-header-title">Note Editor</div></div><menu-row action="self.selectComponent(null)" circle="self.selectedEditor == null &amp;&amp; \'success\'" label="\'Plain Editor\'"></menu-row><menu-row ng-repeat="editor in self.state.editors" action="self.selectComponent(editor)" button-action="self.toggleDefaultForEditor(editor)" button-class="self.state.defaultEditor == editor ? \'warning\' : \'info\'" button-text="self.state.defaultEditor == editor ? \'Undefault\' : \'Set Default\'" circle="self.selectedEditor === editor &amp;&amp; \'success\'" has-button="self.selectedEditor == editor || self.state.defaultEditor == editor" label="editor.name"><div class="sk-menu-panel-column" ng-if="editor.content.conflict_of || self.shouldDisplayRunningLocallyLabel(editor)"><strong class="danger medium-text" ng-if="editor.content.conflict_of">Conflicted copy</strong><div class="sk-sublabel" ng-if="self.shouldDisplayRunningLocallyLabel(editor)">Running Locally</div></div></menu-row><a class="no-decoration" href="https://standardnotes.org/extensions" ng-if="self.state.editors.length == 0" rel="noopener" target="blank"><menu-row label="\'Download More Editors\'"></menu-row></a></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component"><div class="sk-modal small auto-height"><div class="sk-modal-background"></div><div class="sk-modal-content"><div class="sn-component"><div class="sk-panel"><div class="sk-panel-header"><div class="sk-h1 sk-panel-header-title">{{ctrl.title}}</div><a class="sk-a info close-button" ng-click="ctrl.dismiss()">Close</a></div><div class="sk-panel-content"><div class="sk-panel-section"><div class="sk-p sk-panel-row">{{ctrl.message}}</div><div class="sk-panel-row"><div class="sk-panel-column stretch"><form ng-submit="ctrl.submit()"><input class="sk-input contrast" ng-model="ctrl.formData.input" placeholder="{{ctrl.placeholder}}" should-focus="true" sn-autofocus="true" type="{{ctrl.type}}"></form></div></div></div></div><div class="sk-panel-footer"><a class="sk-a info right" ng-click="ctrl.submit()">Submit</a></div></div></div></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sk-menu-panel-row row" ng-attr-title="{{ctrl.desc}}" ng-click="ctrl.onClick($event)"><div class="sk-menu-panel-column"><div class="left"><div class="sk-menu-panel-column" ng-if="\n              ctrl.circle &amp;&amp; \n              (!ctrl.circleAlign || ctrl.circleAlign == \'left\')\n              "><div class="sk-circle small" ng-class="ctrl.circle"></div></div><div class="sk-menu-panel-column" ng-class="{\'faded\' : ctrl.faded || ctrl.disabled}"><div class="sk-label" ng-class="ctrl.stylekitClass">{{ctrl.label}}</div><div class="sk-sublabel" ng-if="ctrl.subtitle">{{ctrl.subtitle}}</div><ng-transclude></ng-transclude></div></div><div class="sk-menu-panel-subrows" ng-if="ctrl.subRows &amp;&amp; ctrl.subRows.length &gt; 0"><menu-row ng-repeat="row in ctrl.subRows" action="row.onClick()" label="row.label" spinner-class="row.spinnerClass" subtitle="row.subtitle"></menu-row></div></div><div class="sk-menu-panel-column" ng-if="ctrl.circle &amp;&amp; ctrl.circleAlign == \'right\'"><div class="sk-circle small" ng-class="ctrl.circle"></div></div><div class="sk-menu-panel-column" ng-if="ctrl.hasButton"><div class="sk-button" ng-class="ctrl.buttonClass" ng-click="ctrl.clickAccessoryButton($event)"><div class="sk-label">{{ctrl.buttonText}}</div></div></div><div class="sk-menu-panel-column" ng-if="ctrl.spinnerClass"><div class="sk-spinner small" ng-class="ctrl.spinnerClass"></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="panel-resizer-column"></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component"><div class="sk-modal small auto-height" id="password-wizard"><div class="sk-modal-background"></div><div class="sk-modal-content"><div class="sn-component"><div class="sk-panel"><div class="sk-panel-header"><div class="sk-panel-header-title">{{ctrl.title}}</div><a class="sk-a info close-button" ng-click="ctrl.dismiss()">Close</a></div><div class="sk-panel-content"><div ng-if="ctrl.step == 0"><div ng-if="ctrl.changePassword"><p class="sk-p sk-panel-row">Changing your password involves changing your encryption key, \nwhich requires your data to be re-encrypted and synced.\nIf you have many items, syncing your data can take several minutes.</p><p class="sk-p sk-panel-row"> You must keep the application window open during this process.</p></div><div ng-if="ctrl.securityUpdate"><p class="sk-p sk-panel-row">A new update is available for your account. Updates address \nimprovements and enhancements to our security specification.\nThis process will guide you through the update, and perform the \nsteps necessary with your supervision.</p><div class="sk-panel-row"><div class="sk-panel-column"><p class="sk-p">For more information about security updates, please visit</p><a class="sk-a info" href="https://standardnotes.org/help/security" rel="noopener" target="_blank">standardnotes.org/help/security.</a></div></div></div><p class="sk-panel-row sk-p"></p><div class="info">Press Continue to proceed.</div><p></p></div><div class="sk-panel-section" ng-if="ctrl.step &gt; 0"><div class="sk-panel-section-title">Step {{ctrl.step}} â {{ctrl.titleForStep(ctrl.step)}}</div><div ng-if="ctrl.step == 1"><p class="sk-panel-row sk-p">As a result of this process, the entirety of your data will be \nre-encrypted and synced to your account. This is a generally safe \nprocess, but unforeseen factors like poor network connectivity or a \nsudden shutdown of your computer may cause this process to fail. It\'s \nbest to be on the safe side before large operations such as this one.</p><div class="sk-panel-row"></div><div class="sk-panel-row"><div class="sk-button-group"><div class="sk-button info" ng-click="ctrl.downloadBackup(true)"><div class="sk-label">Download Encrypted Backup</div></div><div class="sk-button info" ng-click="ctrl.downloadBackup(false)"><div class="sk-label">Download Decrypted Backup</div></div></div></div></div><div ng-if="ctrl.step == 2"><p class="sk-p sk-panel-row">As a result of this process, your encryption keys will change. Any \ndevice on which you use Standard Notes will need to end its  session. \nAfter this process completes, you will be asked to sign back in.</p><p class="sk-p bold sk-panel-row info-i"> Please sign out of all applications (excluding this one), including:</p><ul><li class="sk-p">Desktop</li><li class="sk-p">Web (Chrome, Firefox, Safari)</li><li class="sk-p">Mobile (iOS and Android)</li></ul><p class="sk-p sk-panel-row">If you do not currently have access to a device you\'re signed in on, \nyou may proceed, but must make signing out and back in the first step \nupon gaining access to that device.</p><p class="sk-p sk-panel-row"> Press Continue only when you have \ncompleted signing out of all your devices.</p></div><div ng-if="ctrl.step == 3"><div ng-if="ctrl.changePassword"></div><div ng-if="ctrl.securityUpdate"><p class="sk-panel-row">Enter your current password. We\'ll run this through our encryption \nscheme to generate strong new encryption keys.</p></div><div class="sk-panel-row"></div><div class="sk-panel-row"><div class="sk-panel-column stretch"><form class="sk-panel-form"><input class="sk-input contrast" ng-model="ctrl.formData.currentPassword" placeholder="Current Password" should-focus="true" sn-autofocus="true" type="password"><input class="sk-input contrast" ng-if="ctrl.changePassword" ng-model="ctrl.formData.newPassword" placeholder="New Password" type="password"><input class="sk-input contrast" ng-if="ctrl.changePassword" ng-model="ctrl.formData.newPasswordConfirmation" placeholder="Confirm New Password" type="password"></form></div></div></div><div ng-if="ctrl.step == 4"><p class="sk-panel-row">Your data is being re-encrypted with your new \nkeys and synced to your account.</p><p class="sk-panel-row danger" ng-if="ctrl.lockContinue">Do not close this window until this process completes.</p><div class="sk-panel-row"><div class="sk-panel-column"><div class="sk-spinner small inline info mr-5" ng-if="ctrl.formData.processing"></div><div class="inline bold" ng-class="{\'info\' : !ctrl.formData.statusError, \'error\' : ctrl.formData.statusError}">{{ctrl.formData.status}}</div></div><div class="sk-panel-column" delay="1000" delay-hide="true" show="ctrl.syncStatus.syncOpInProgress || ctrl.syncStatus.needsMoreSync"><p class="info">Syncing {{ctrl.syncStatus.current}}/{{ctrl.syncStatus.total}}</p></div></div></div><div ng-if="ctrl.step == 5"><div ng-if="ctrl.changePassword"><p class="sk-p sk-panel-row info-i">Your password has been successfully changed.</p></div><div ng-if="ctrl.securityUpdate"><p class="sk-p sk-panel-row info-i">The security update has been successfully applied to your account.</p></div><p class="sk-p sk-panel-row">Please ensure you are running the latest version of Standard Notes \non all platforms to ensure maximum compatibility.</p><p class="sk-p sk-panel-row"> You may now sign back in on all your devices and close this window.</p></div></div></div><div class="sk-panel-footer"><div class="empty"></div><a class="sk-a info right" ng-class="{\'disabled\' : ctrl.lockContinue}" ng-click="ctrl.nextStep()" ng-disabled="ctrl.lockContinue"><div class="sk-spinner small inline info mr-5" ng-if="ctrl.showSpinner"></div>{{ctrl.continueTitle}}</a></div></div></div></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sk-modal-background" ng-click="ctrl.deny()"></div><div class="sk-modal-content" id="permissions-modal"><div class="sn-component"><div class="sk-panel"><div class="sk-panel-header"><div class="sk-panel-header-title">Activate Extension</div><a class="sk-a info close-button" ng-click="ctrl.deny()">Cancel</a></div><div class="sk-panel-content"><div class="sk-panel-section"><div class="sk-panel-row"><div class="sk-h2"><strong>{{ctrl.component.name}}</strong> would like to interact with your\n {{ctrl.permissionsString}}</div></div><div class="sk-panel-row"><p class="sk-p">Extensions use an offline messaging system to communicate. Learn more at <a class="sk-a info" href="https://standardnotes.org/permissions" rel="noopener" target="_blank">https://standardnotes.org/permissions.</a></p></div></div></div><div class="sk-panel-footer"><div class="sk-button info big block bold" ng-click="ctrl.accept()"><div class="sk-label">Continue</div></div></div></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sk-modal-background" ng-click="ctrl.cancel()"></div><div class="sk-modal-content" id="privileges-modal"><div class="sn-component"><div class="sk-panel"><div class="sk-panel-header"><div class="sk-panel-header-title">Authentication Required</div><a class="close-button info" ng-click="ctrl.cancel()">Cancel</a></div><div class="sk-panel-content"><div class="sk-panel-section"><div ng-repeat="credential in ctrl.requiredCredentials"><div class="sk-p sk-bold sk-panel-row"><strong>{{ctrl.promptForCredential(credential)}}</strong></div><div class="sk-panel-row"><input class="sk-input contrast" ng-model="ctrl.authParameters[credential]" should-focus="$index == 0" sn-autofocus="true" sn-enter="ctrl.submit()" type="password"></div><div class="sk-panel-row"><label class="sk-label danger" ng-if="ctrl.isCredentialInFailureState(credential)">Invalid authentication. Please try again.</label></div></div><div class="sk-panel-row"></div><div class="sk-panel-row"><div class="sk-horizontal-group"><div class="sk-p sk-bold">Remember For</div><a class="sk-a info" ng-repeat="option in ctrl.sessionLengthOptions" ng-class="{\'boxed\' : option.value == ctrl.selectedSessionLength}" ng-click="ctrl.selectSessionLength(option.value)">{{option.label}}</a></div></div></div></div><div class="sk-panel-footer extra-padding"><div class="sk-button info big block bold" ng-click="ctrl.submit()"><div class="sk-label">Submit</div></div></div></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sk-modal-background" ng-click="ctrl.cancel()"></div><div class="sk-modal-content" id="privileges-modal"><div class="sn-component"><div class="sk-panel"><div class="sk-panel-header"><div class="sk-panel-header-title">Manage Privileges</div><a class="sk-a close-button info" ng-click="ctrl.cancel()">Done</a></div><div class="sk-panel-content"><div class="sk-panel-section"><table class="sk-table"><thead><tr><th></th><th ng-repeat="cred in ctrl.availableCredentials"><div class="priv-header"><strong>{{ctrl.credentialDisplayInfo[cred].label}}</strong><div class="sk-p font-small" ng-show="!ctrl.credentialDisplayInfo[cred].availability" style="margin-top: 2px">Not Configured</div></div></th></tr></thead><tbody><tr ng-repeat="action in ctrl.availableActions"><td><div class="sk-p">{{ctrl.displayInfoForAction(action)}}</div></td><th ng-repeat="credential in ctrl.availableCredentials"><input ng-checked="ctrl.isCredentialRequiredForAction(action, credential)" ng-click="ctrl.checkboxValueChanged(action, credential)" ng-disabled="!ctrl.credentialDisplayInfo[credential].availability" type="checkbox"></th></tr></tbody></table></div><div class="sk-panel-section" ng-if="ctrl.sessionExpirey &amp;&amp; !ctrl.sessionExpired"><div class="sk-p sk-panel-row"> You will not be asked to authenticate until {{ctrl.sessionExpirey}}.</div><a class="sk-a sk-panel-row info" ng-click="ctrl.clearSession()">Clear Session</a></div></div><div class="sk-panel-footer"><div class="sk-h2 sk-bold">About Privileges</div><div class="sk-panel-section no-bottom-pad"><div class="sk-panel-row"><div class="text-content"><div class="sk-p">Privileges represent interface level authentication for accessing \ncertain items and features. Note that when your application is unlocked,\nyour data exists in temporary memory in an unencrypted state.\nPrivileges are meant to protect against unwanted access in the event of\nan unlocked application, but do not affect data encryption state.</div><p class="sk-p">Privileges sync across your other devices; however, note that if you \nrequire a "Local Passcode" privilege, and another device does not have \na local passcode set up, the local passcode requirement will be ignored \non that device.</p></div></div></div></div></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component"><div class="sk-modal medium" id="item-preview-modal"><div class="sk-modal-background"></div><div class="sk-modal-content"><div class="sn-component"><div class="sk-panel"><div class="sk-panel-header"><div class="sk-panel-header-title">Preview</div><div class="sk-horizontal-group"><a class="sk-a info close-button" ng-click="ctrl.restore(false)">Restore</a><a class="sk-a info close-button" ng-click="ctrl.restore(true)">Restore as copy</a><a class="sk-a info close-button" ng-click="ctrl.dismiss(); $event.stopPropagation()">Close</a></div></div><div class="sk-panel-content selectable" ng-if="!ctrl.editor"><div class="sk-h2">{{ctrl.content.title}}</div><p class="normal sk-p" style="white-space: pre-wrap; font-size: 16px;">{{ctrl.content.text}}</p></div><component-view class="component-view" component="ctrl.editor" ng-if="ctrl.editor"></component-view></div></div></div></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component" id="session-history-menu"><div class="sk-menu-panel dropdown-menu"><div class="sk-menu-panel-header"><div class="sk-menu-panel-header-title">{{ctrl.history.entries.length || \'No\'}} revisions</div><a class="sk-a info sk-h5" ng-click="ctrl.showOptions = !ctrl.showOptions; $event.stopPropagation();">Options</a></div><div ng-if="ctrl.showOptions"><menu-row action="ctrl.clearItemHistory()" label="\'Clear note local history\'"></menu-row><menu-row action="ctrl.clearAllHistory()" label="\'Clear all local history\'"></menu-row><menu-row action="ctrl.toggleAutoOptimize()" label="(ctrl.autoOptimize ? \'Disable\' : \'Enable\') + \' auto cleanup\'"><div class="sk-sublabel">Automatically cleans up small revisions to conserve space.</div></menu-row><menu-row action="ctrl.toggleDiskSaving()" label="(ctrl.diskEnabled ? \'Disable\' : \'Enable\') + \' saving history to disk\'"><div class="sk-sublabel">Saving to disk is not recommended. Decreases performance and increases app \nloading time and memory footprint.</div></menu-row></div><menu-row ng-repeat="revision in ctrl.entries" action="ctrl.openRevision(revision);" label="revision.previewTitle()"><div class="sk-sublabel opaque" ng-class="ctrl.classForRevision(revision)">{{revision.previewSubTitle()}}</div></menu-row></div></div>'}},function(e,t,n){n(10);e.exports=function(e){var t="";return t+='<div class="sn-component"><div class="sk-panel sk-panel-right" id="sync-resolution-menu"><div class="sk-panel-header"><div class="sk-panel-header-title">Out of Sync</div><a class="sk-a info close-button" ng-click="ctrl.close()">Close</a></div><div class="sk-panel-content"><div class="sk-panel-section"><div class="sk-panel-row sk-p">We\'ve detected that the data on the server may not match \nthe data in the current application session.</div><div class="sk-p sk-panel-row"><div class="sk-panel-column"><strong class="sk-panel-row">Option 1 â Restart App:</strong><div class="sk-p"> Quit the application and re-open it. \nSometimes, this may resolve the issue.</div></div></div><div class="sk-p sk-panel-row"><div class="sk-panel-column"><strong class="sk-panel-row">Option 2 (recommended) â Sign Out:</strong><div class="sk-p">Sign out of your account, then sign back in. \nThis will ensure your data is consistent with the server.</div>Be sure to download a backup of your data before doing so.</div></div><div class="sk-p sk-panel-row"><div class="sk-panel-column"><strong class="sk-panel-row">Option 3 â Sync Resolution:</strong><div class="sk-p">We can attempt to reconcile changes by downloading all data from the \nserver. No existing data will be overwritten. If the local contents of \nan item differ from what the server has, a conflicted copy will be created.</div></div></div><div ng-if="!ctrl.status.backupFinished"><div class="sk-p sk-panel-row">Please download a backup before we attempt to \nperform a full account sync resolution.</div><div class="sk-panel-row"><div class="sk-button-group"><div class="sk-button info" ng-click="ctrl.downloadBackup(true)"><div class="sk-label">Encrypted</div></div><div class="sk-button info" ng-click="ctrl.downloadBackup(false)"><div class="sk-label">Decrypted</div></div><div class="sk-button danger" ng-click="ctrl.skipBackup()"><div class="sk-label">Skip</div></div></div></div></div><div ng-if="ctrl.status.backupFinished"><div class="sk-panel-row" ng-if="!ctrl.status.resolving &amp;&amp; !ctrl.status.attemptedResolution"><div class="sk-button info" ng-click="ctrl.performSyncResolution()"><div class="sk-label">Perform Sync Resolution</div></div></div><div class="sk-panel-row justify-left" ng-if="ctrl.status.resolving"><div class="sk-horizontal-group"><div class="sk-spinner small info"></div><div class="sk-label">Attempting sync resolution...</div></div></div><div class="sk-panel-column" ng-if="ctrl.status.fail"><div class="sk-panel-row sk-label danger">Sync Resolution Failed</div><div class="sk-p sk-panel-row">We attempted to reconcile local content and server content, but were \nunable to do so. At this point, we recommend signing out of your account \nand signing back in. You may wish to download a data backup before doing so.</div></div><div class="sk-panel-column" ng-if="ctrl.status.success"><div class="sk-panel-row sk-label success">Sync Resolution Success</div><div class="sk-p sk-panel-row">Your local data is now in sync with the server. You may close this window.</div></div></div></div></div></div></div>'}},function(e,t,n){var r=n(5);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t,n){"use strict";n.r(t);n(38),n(39);var r,i=n(8),a=n.n(i),o=(n(41),n(42),n(43),n(44),n(45),n(4));function s(){try{var e=navigator.platform.toLowerCase(),t="";return-1!==e.indexOf("mac")?t="mac":-1!==e.indexOf("win")&&(t="windows"),-1!==e.indexOf("linux")&&(t="linux"),t+(c()?"-desktop":"-web")}catch(e){return null}}function c(){return window.isElectron}function u(e){c()?e.html5Mode(!1):window.history&&window.history.pushState&&e.html5Mode({enabled:!0,requireBase:!1})}Array.prototype.containsPrimitiveSubset=function(e){var t=this;return!e.some((function(e){return-1===t.indexOf(e)}))},Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var i,a,o=0|t,s=Math.max(o>=0?o:r-Math.abs(o),0);for(;s<r;){if((i=n[s])===(a=e)||"number"==typeof i&&"number"==typeof a&&isNaN(i)&&isNaN(a))return!0;s++}return!1}}),u.$inject=["$locationProvider"];var l=n(0),f=n.n(l),p=n(1),d=n.n(p),h=n(2),v=n.n(h),m=n(3),y=n.n(m),g=n(6),b=n.n(g),k=n(5),w=n.n(k),x=n(7),S=n.n(x),$=function(e){function t(e,n,r,i,a,o,s,c){var u,l,p,h,m,y,g;return v()(this,t),(u=b()(this,w()(t).call(this,a,r,i))).$rootScope=s,u.$compile=c,u.setDelegate({isOffline:(g=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.offline());case 1:case"end":return e.stop()}}),e)}))),function(){return g.apply(this,arguments)}),hasLocalPasscode:(y=d()(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.hasPasscode());case 1:case"end":return t.stop()}}),t)}))),function(){return y.apply(this,arguments)}),saveToStorage:(m=d()(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.setItem(t,n,o.bestStorageMode()));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)}),getFromStorage:(h=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.getItem(t,o.bestStorageMode()));case 1:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)}),verifyAccountPassword:(p=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.verifyAccountPassword(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)}),verifyLocalPasscode:(l=d()(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.verifyPasscode(n));case 1:case"end":return t.stop()}}),t)}))),function(e){return l.apply(this,arguments)})}),u}var n;return t.$inject=["passcodeManager","authManager","syncManager","singletonManager","modelManager","storageManager","$rootScope","$compile"],S()(t,e),y()(t,[{key:"presentPrivilegesModal",value:(n=d()(f.a.mark((function e(t,n,r){var i,o,s,c,u=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.authenticationInProgress()){e.next=3;break}return r&&r(),e.abrupt("return");case 3:i=function(){var e=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,!e.t0){e.next=4;break}return e.next=4,n();case 4:u.currentAuthenticationElement=null;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,!e.t0){e.next=4;break}return e.next=4,r();case 4:u.currentAuthenticationElement=null;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),(s=this.$rootScope.$new(!0)).action=t,s.onSuccess=i,s.onCancel=o,c=this.$compile("\n      <privileges-auth-modal action='action' on-success='onSuccess' \n      on-cancel='onCancel' class='sk-modal'></privileges-auth-modal>\n    ")(s),a.a.element(document.body).append(c),this.currentAuthenticationElement=c;case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"presentPrivilegesManagementModal",value:function(){var e=this.$rootScope.$new(!0),t=this.$compile("<privileges-management-modal class='sk-modal'></privileges-management-modal>")(e);a.a.element(document.body).append(t)}},{key:"authenticationInProgress",value:function(){return null!=this.currentAuthenticationElement}}]),t}(o.SFPrivilegesManager),M=function(){function e(t,n){v()(this,e),this.$timeout=t,this.privilegesManager=n,this.observers=[]}var t,n;return e.$inject=["$timeout","privilegesManager"],y()(e,[{key:"addObserver",value:function(e){return this.observers.push(e),e}},{key:"notifyEvent",value:(n=d()(f.a.mark((function e(t,n){var r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){r.$timeout(d()(f.a.mark((function i(){var a,o,s,c,u,l;return f.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=!0,o=!1,s=void 0,i.prev=3,c=r.observers[Symbol.iterator]();case 5:if(a=(u=c.next()).done){i.next=12;break}return l=u.value,i.next=9,l(t,n);case 9:a=!0,i.next=5;break;case 12:i.next=18;break;case 14:i.prev=14,i.t0=i.catch(3),o=!0,s=i.t0;case 18:i.prev=18,i.prev=19,a||null==c.return||c.return();case 21:if(i.prev=21,!o){i.next=24;break}throw s;case 24:return i.finish(21);case 25:return i.finish(18);case 26:e();case 27:case"end":return i.stop()}}),i,null,[[3,14,18,26],[19,,21,25]])}))))})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"setSelectedTag",value:function(e){if(this.selectedTag!==e){var t=this.selectedTag;this.selectedTag=e,this.notifyEvent(1,{previousTag:t})}}},{key:"setSelectedNote",value:(t=d()(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){var e=d()(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.selectedNote,r.selectedNote=t,e.next=4,r.notifyEvent(2,{previousNote:n});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.t0=t&&t.content.protected,!e.t0){e.next=6;break}return e.next=5,this.privilegesManager.actionRequiresPrivilege($.ActionViewProtectedNotes);case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=10;break}this.privilegesManager.presentPrivilegesModal($.ActionViewProtectedNotes,n),e.next=11;break;case 10:n();case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getSelectedTag",value:function(){return this.selectedTag}},{key:"getSelectedNote",value:function(){return this.selectedNote}},{key:"setUserPreferences",value:function(e){this.userPreferences=e,this.notifyEvent(3)}},{key:"panelDidResize",value:function(e){var t=e.name,n=e.collapsed;this.notifyEvent(4,{panel:t,collapsed:n})}},{key:"editorDidFocus",value:function(e){this.notifyEvent(5,{eventSource:e})}},{key:"beganBackupDownload",value:function(){this.notifyEvent(6)}},{key:"endedBackupDownload",value:function(e){var t=e.success;this.notifyEvent(7,{success:t})}},{key:"desktopExtensionsReady",value:function(){this.notifyEvent(8)}}]),e}(),C=function(){function e(t){if(v()(this,e),!t)throw"Invalid PureCtrl construction.";this.$timeout=t,this.state={},this.props={}}var t;return y()(e,[{key:"setState",value:(t=d()(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){n.$timeout((function(){n.state=Object.freeze(Object.assign({},n.state,t)),e()}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"initProps",value:function(e){if(Object.keys(this.props).length>0)throw"Already init-ed props.";this.props=Object.freeze(Object.assign({},this.props,e))}}]),e}(),A=n(13),O=n.n(A),I=n(11),E=n.n(I),D=function(){function e(){v()(this,e),this.observers=[],e.KeyTab="Tab",e.KeyBackspace="Backspace",e.KeyUp="ArrowUp",e.KeyDown="ArrowDown",e.KeyModifierShift="Shift",e.KeyModifierCtrl="Control",e.KeyModifierMeta="Meta",e.KeyModifierAlt="Alt",e.KeyEventDown="KeyEventDown",e.KeyEventUp="KeyEventUp",e.AllModifiers=[e.KeyModifierShift,e.KeyModifierCtrl,e.KeyModifierMeta,e.KeyModifierAlt],window.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("keyup",this.handleKeyUp.bind(this))}return y()(e,[{key:"modifiersForEvent",value:function(t){return e.AllModifiers.filter((function(n){return(t.ctrlKey||t.key==e.KeyModifierCtrl)&&n===e.KeyModifierCtrl||(t.metaKey||t.key==e.KeyModifierMeta)&&n===e.KeyModifierMeta||(t.altKey||t.key==e.KeyModifierAlt)&&n===e.KeyModifierAlt||(t.shiftKey||t.key==e.KeyModifierShift)&&n===e.KeyModifierShift}))}},{key:"eventMatchesKeyAndModifiers",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.modifiersForEvent(e);if(r.length!=n.length)return!1;var i=!0,a=!1,o=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if(!r.includes(u))return!1}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return!t||t.toLowerCase()==e.key.toLowerCase()}},{key:"notifyObserver",value:function(t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=this.observers[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;if((!c.element||t.target==c.element)&&((!c.elements||c.elements.includes(t.target))&&(!c.notElement||c.notElement!=t.target)&&(!c.notElementIds||!c.notElementIds.includes(t.target.id))&&this.eventMatchesKeyAndModifiers(t,c.key,c.modifiers))){var u=n==e.KeyEventDown?c.onKeyDown:c.onKeyUp;u&&u(t)}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"handleKeyDown",value:function(t){this.notifyObserver(t,e.KeyEventDown)}},{key:"handleKeyUp",value:function(t){this.notifyObserver(t,e.KeyEventUp)}},{key:"addKeyObserver",value:function(e){var t={key:e.key,modifiers:e.modifiers,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,element:e.element,elements:e.elements,notElement:e.notElement,notElementIds:e.notElementIds};return this.observers.push(t),t}},{key:"removeKeyObserver",value:function(e){this.observers.splice(this.observers.indexOf(e),1)}}]),e}(),R=n(16),P=n.n(R);function T(e){return"There was an error while trying to save your items. Please contact support and share this message: ".concat(e,".")}function j(e){var t=e.title;return e.permanently?"Are you sure you want to permanently delete ".concat(t,"?"):"Are you sure you want to move ".concat(t," to the trash?")}function F(e){var t=e.count;return"Are you sure you want to permanently delete ".concat(t," note(s)?")}function N(e){var t=e.errorCount;return"Import complete. ".concat(t," items were not imported because there was an error decrypting them. Make sure the password is correct and try again.")}var L="There was an error re-encrypting your items. Your password was changed, but not all your items were properly re-encrypted and synced. You should try syncing again. If all else fails, you should restore your notes from backup.",U=function(){function e(t,n,r,i){var a=this;v()(this,e),this.singletonManager=n,this.modelManager=t,this.syncManager=i,this.appState=r,this.modelManager.addItemSyncObserver("user-prefs","SN|UserPreferences",(function(e,t,n,r,i){a.preferencesDidChange()}))}return e.$inject=["modelManager","singletonManager","appState","syncManager"],y()(e,[{key:"load",value:function(){var e=this,t=new o.SFPredicate("content_type","=","SN|UserPreferences");this.singletonManager.registerSingleton([t],(function(t){e.userPreferences=t}),(function(t){var n=new o.SFItem({content_type:"SN|UserPreferences"});e.modelManager.addItem(n),e.modelManager.setItemDirty(n),e.syncManager.sync(),t(n)}))}},{key:"preferencesDidChange",value:function(){this.appState.setUserPreferences(this.userPreferences)}},{key:"syncUserPreferences",value:function(){this.userPreferences&&(this.modelManager.setItemDirty(this.userPreferences),this.syncManager.sync())}},{key:"getValue",value:function(e,t){if(!this.userPreferences)return t;var n=this.userPreferences.getAppDataItem(e);return void 0!==n&&null!=n?n:t}},{key:"setUserPrefValue",value:function(e,t,n){this.userPreferences.setAppDataItem(e,t),n&&this.syncUserPreferences()}}]),e}();function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e){function t(e,n,r,i,a,o,s,u,l,f,p,d,h,m){var y;return v()(this,t),y=b()(this,w()(t).call(this,e)),E()(O()(y),"editorMenuOnSelect",(function(e){if(e&&"editor-editor"!==e.area)"editor-stack"===e.area&&y.toggleStackComponentForCurrentItem(e);else{y.setMenuState("showEditorMenu",!1);var t=e;if(y.state.selectedEditor&&t!==y.state.selectedEditor&&y.disassociateComponentWithCurrentNote(y.state.selectedEditor),t)!0===y.state.note.getAppDataItem("prefersPlainEditor")&&(y.state.note.setAppDataItem("prefersPlainEditor",!1),y.modelManager.setItemDirty(y.state.note)),y.associateComponentWithCurrentNote(t);else y.state.note.getAppDataItem("prefersPlainEditor")||(y.state.note.setAppDataItem("prefersPlainEditor",!0),y.modelManager.setItemDirty(y.state.note)),y.reloadFont();y.setState({selectedEditor:t})}y.syncManager.sync()})),E()(O()(y),"onPanelResizeFinish",(function(e,t,n){n?y.preferencesManager.setUserPrefValue("editorWidth",null):null!=e&&(y.preferencesManager.setUserPrefValue("editorWidth",e),y.leftResizeControl.setWidth(e)),null!=t&&(y.preferencesManager.setUserPrefValue("editorLeft",t),y.rightResizeControl.setLeft(t)),y.preferencesManager.syncUserPreferences()})),E()(O()(y),"onEditorLoad",(function(e){y.desktopManager.redoSearch()})),y.$rootScope=n,y.alertManager=r,y.appState=i,y.actionsManager=o,y.authManager=a,y.componentManager=s,y.desktopManager=u,y.keyboardManager=l,y.modelManager=f,y.preferencesManager=p,y.privilegesManager=d,y.syncManager=m,y.state={componentStack:[],editorDebounce:200,isDesktop:c(),spellcheck:!0,mutable:{tagsString:""}},y.leftResizeControl={},y.rightResizeControl={},y.addAppStateObserver(),y.addSyncEventHandler(),y.addSyncStatusObserver(),y.addMappingObservers(),y.registerComponentHandler(),y.registerKeyboardShortcuts(),y.prefKeyMonospace="monospaceFont",y.prefKeySpellcheck="spellcheck",y.prefKeyMarginResizers="marginResizersEnabled",y}var n,r,i;return t.$inject=["$timeout","$rootScope","alertManager","appState","authManager","actionsManager","componentManager","desktopManager","keyboardManager","modelManager","preferencesManager","privilegesManager","sessionHistory","syncManager"],S()(t,e),y()(t,[{key:"addAppStateObserver",value:function(){var e=this;this.appState.addObserver((function(t,n){2===t?e.handleNoteSelectionChange(e.appState.getSelectedNote(),n.previousNote):3===t&&e.loadPreferences()}))}},{key:"handleNoteSelectionChange",value:(i=d()(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({note:this.appState.getSelectedNote(),showExtensions:!1,showOptionsMenu:!1,altKeyDown:!1,noteStatus:null}),t){e.next=3;break}return e.abrupt("return");case 3:return(r=this.editorForNote(t))&&r!==this.state.selectedEditor?this.setState({noteReady:!1,selectedEditor:r}):r||this.setState({selectedEditor:null}),e.next=7,this.setState({noteReady:!0});case 7:this.reloadTagsString(),this.loadPreferences(),t.dummy&&this.focusEditor(),n&&n!==t&&n.dummy&&this.performNoteDeletion(n),this.reloadComponentContext();case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"addMappingObservers",value:function(){var e=this;this.modelManager.addItemSyncObserver("editor-note-observer","Note",(function(t,n,r,i){e.state.note&&(e.state.note.deleted||e.state.note.content.trashed||o.SFModelManager.isMappingSourceRetrieved(i)&&t.find((function(t){return t.uuid===e.state.note.uuid}))&&e.reloadTagsString())})),this.modelManager.addItemSyncObserver("editor-tag-observer","Tag",(function(t,n,r,i){if(e.state.note){var a=!0,o=!1,s=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;if(!e.state.note.savedTagsString||l.deleted||l.hasRelationshipWithItem(e.state.note)){e.reloadTagsString();break}}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}}})),this.modelManager.addItemSyncObserver("editor-component-observer","SN|Component",(function(t,n,r,i){if(e.state.note&&(e.reloadComponentStackArray(),0!==t.filter((function(e){return e.isEditor()})).length)){var a=e.editorForNote(e.state.note);e.setState({selectedEditor:a}),a||e.reloadFont()}}))}},{key:"addSyncEventHandler",value:function(){var e=this;this.syncManager.addEventHandler((function(t,n){if(e.state.note)if("sync:taking-too-long"===t)e.setState({syncTakingTooLong:!0});else if("sync:completed"===t)if(e.setState({syncTakingTooLong:!1}),e.state.note.dirty);else{var r=n.savedItems.find((function(t){return t.uuid===e.state.note.uuid}));(e.state.saveError||r)&&e.showAllChangesSavedStatus()}else"sync:error"===t&&e.state.note.dirty&&e.showErrorStatus()}))}},{key:"addSyncStatusObserver",value:function(){var e=this;this.syncStatusObserver=this.syncManager.registerSyncStatusObserver((function(t){t.localError&&e.$timeout((function(){e.showErrorStatus({message:"Offline Saving Issue",desc:"Changes not saved"})}),500)}))}},{key:"editorForNote",value:function(e){return this.componentManager.editorForNote(e)}},{key:"setMenuState",value:function(e,t){this.setState(E()({},e,t)),this.closeAllMenus({exclude:e})}},{key:"toggleMenu",value:function(e){this.setMenuState(e,!this.state[e])}},{key:"closeAllMenus",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.exclude,n=["showOptionsMenu","showEditorMenu","showExtensions","showSessionHistory"],r={},i=0,a=n;i<a.length;i++){var o=a[i];o!==t&&(r[o]=!1)}this.setState(r)}},{key:"hasAvailableExtensions",value:function(){return this.actionsManager.extensionsInContextOfItem(this.state.note).length>0}},{key:"performFirefoxPinnedTabFix",value:function(){document.hidden&&window.location.reload()}},{key:"saveNote",value:function(e){var t=this,n=e.bypassDebouncer,r=e.updateClientModified,i=e.dontUpdatePreviews;this.performFirefoxPinnedTabFix();var a=this.state.note;if(a.dummy=!1,a.deleted)this.alertManager.alert({text:"The note you are attempting to edit has been deleted, and is awaiting sync. Changes you make will be disregarded."});else if(this.modelManager.findItem(a.uuid)){if(this.showSavingStatus(),!i){var o=a.text||"",s=o.length>80,c=o.substring(0,80)+(s?"...":"");a.content.preview_plain=c,a.content.preview_html=null}this.modelManager.setItemDirty(a,!0,r),this.saveTimeout&&this.$timeout.cancel(this.saveTimeout);var u=n||this.authManager.offline()?100:350;this.saveTimeout=this.$timeout((function(){t.syncManager.sync().then((function(e){e&&e.error&&!t.didShowErrorAlert&&(t.didShowErrorAlert=!0,t.alertManager.alert({text:"There was an error saving your note. Please try again."}))}))}),u)}else this.alertManager.alert({text:"The note you are attempting to save can not be found or has been deleted. Changes you make will not be synced. Please copy this note's text and start a new note."})}},{key:"showSavingStatus",value:function(){this.setStatus({message:"Saving..."},!1)}},{key:"showAllChangesSavedStatus",value:function(){this.setState({saveError:!1,syncTakingTooLong:!1});var e="All changes saved";this.authManager.offline()&&(e+=" (offline)"),this.setStatus({message:e})}},{key:"showErrorStatus",value:function(e){e||(e={message:"Sync Unreachable",desc:"Changes saved offline"}),this.setState({saveError:!0,syncTakingTooLong:!1}),this.setStatus(e)}},{key:"setStatus",value:function(e){var t,n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=this.state.noteStatus&&this.state.noteStatus.date?400-(new Date-this.state.noteStatus.date):0,(!r||t<0)&&(t=0),this.statusTimeout&&this.$timeout.cancel(this.statusTimeout),this.statusTimeout=this.$timeout((function(){e.date=new Date,n.setState({noteStatus:e})}),t)}},{key:"contentChanged",value:function(){this.saveNote({updateClientModified:!0})}},{key:"onTitleEnter",value:function(e){e.target.blur(),this.onTitleChange(),this.focusEditor()}},{key:"onTitleChange",value:function(){this.saveNote({dontUpdatePreviews:!0,updateClientModified:!0})}},{key:"focusEditor",value:function(){var e=document.getElementById("note-text-editor");e&&(this.lastEditorFocusEventSource=2,e.focus())}},{key:"focusTitle",value:function(){document.getElementById("note-title-editor").focus()}},{key:"clickedTextArea",value:function(){this.setMenuState("showOptionsMenu",!1)}},{key:"onNameFocus",value:function(){this.editingName=!0}},{key:"onContentFocus",value:function(){this.appState.editorDidFocus(this.lastEditorFocusEventSource),this.lastEditorFocusEventSource=null}},{key:"onNameBlur",value:function(){this.editingName=!1}},{key:"selectedMenuItem",value:function(e){e&&this.setMenuState("showOptionsMenu",!1)}},{key:"deleteNote",value:(r=d()(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.note.dummy){e.next=3;break}return this.alertManager.alert({text:"This note is a placeholder and cannot be deleted. To remove from your list, simply navigate to a different note."}),e.abrupt("return");case 3:return n=function(){if(r.state.note.locked)r.alertManager.alert({text:"This note is locked. If you'd like to delete it, unlock it, and try again."});else{var e=j({title:r.state.note.safeTitle().length?"'".concat(r.state.note.title,"'"):"this note",permanently:t});r.alertManager.confirm({text:e,destructive:!0,onConfirm:function(){t?r.performNoteDeletion(r.state.note):(r.state.note.content.trashed=!0,r.saveNote({bypassDebouncer:!0,dontUpdatePreviews:!0})),r.appState.setSelectedNote(null),r.setMenuState("showOptionsMenu",!1)}})}},e.next=6,this.privilegesManager.actionRequiresPrivilege($.ActionDeleteNote);case 6:e.sent?this.privilegesManager.presentPrivilegesModal($.ActionDeleteNote,(function(){n()})):n();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"performNoteDeletion",value:function(e){this.modelManager.setItemToBeDeleted(e),e===this.state.note&&this.setState({note:null}),e.dummy?this.modelManager.removeItemLocally(e):this.syncManager.sync()}},{key:"restoreTrashedNote",value:function(){this.state.note.content.trashed=!1,this.saveNote({bypassDebouncer:!0,dontUpdatePreviews:!0}),this.appState.setSelectedNote(null)}},{key:"deleteNotePermanantely",value:function(){this.deleteNote(!0)}},{key:"getTrashCount",value:function(){return this.modelManager.trashedItems().length}},{key:"emptyTrash",value:function(){var e=this,t=this.getTrashCount();this.alertManager.confirm({text:F({count:t}),destructive:!0,onConfirm:function(){e.modelManager.emptyTrash(),e.syncManager.sync()}})}},{key:"togglePin",value:function(){this.state.note.setAppDataItem("pinned",!this.state.note.pinned),this.saveNote({bypassDebouncer:!0,dontUpdatePreviews:!0})}},{key:"toggleLockNote",value:function(){this.state.note.setAppDataItem("locked",!this.state.note.locked),this.saveNote({bypassDebouncer:!0,dontUpdatePreviews:!0})}},{key:"toggleProtectNote",value:function(){var e=this;this.state.note.content.protected=!this.state.note.content.protected,this.saveNote({bypassDebouncer:!0,dontUpdatePreviews:!0}),this.privilegesManager.actionHasPrivilegesConfigured($.ActionViewProtectedNotes).then((function(t){t||e.privilegesManager.presentPrivilegesManagementModal()}))}},{key:"toggleNotePreview",value:function(){this.state.note.content.hidePreview=!this.state.note.content.hidePreview,this.saveNote({bypassDebouncer:!0,dontUpdatePreviews:!0})}},{key:"toggleArchiveNote",value:function(){this.state.note.setAppDataItem("archived",!this.state.note.archived),this.saveNote({bypassDebouncer:!0,dontUpdatePreviews:!0})}},{key:"reloadTagsString",value:function(){this.setState({mutable:H({},this.state.mutable,{tagsString:this.state.note.tagsString()})})}},{key:"addTag",value:function(e){var t=this.state.note.tags.map((function(e){return e.title}));t.push(e.title),this.saveTags({strings:t})}},{key:"removeTag",value:function(e){var t=this.state.note.tags.map((function(e){return e.title})).filter((function(t){return t!==e.title}));this.saveTags({strings:t})}},{key:"saveTags",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.strings;if(t||this.state.mutable.tagsString!==this.state.note.tagsString()){t||(t=this.state.mutable.tagsString.split("#").filter((function(e){return e.length>0})).map((function(e){return e.trim()}))),this.state.note.dummy=!1;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=this.state.note.tags[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;-1===t.indexOf(c.title)&&n.push(c)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}for(var u=0,l=n;u<l.length;u++){var f=l[u];f.removeItemAsRelationship(this.state.note)}this.modelManager.setItemsDirty(n);var p=[],d=!0,h=!1,v=void 0;try{for(var m,y=t[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var g=m.value,b=_.find(this.state.note.tags,{title:g});b||p.push(this.modelManager.findOrCreateTagByTitle(g))}}catch(e){h=!0,v=e}finally{try{d||null==y.return||y.return()}finally{if(h)throw v}}for(var k=0,w=p;k<w.length;k++){var x=w[k];x.addItemAsRelationship(this.state.note)}this.modelManager.setItemsDirty(p),this.syncManager.sync(),this.reloadTagsString()}}},{key:"loadPreferences",value:function(){var e=this.preferencesManager.getValue("monospaceFont",!0),t=this.preferencesManager.getValue("spellcheck",!0),n=this.preferencesManager.getValue("marginResizersEnabled",!0);if(this.setState({monospaceEnabled:e,spellcheck:t,marginResizersEnabled:n}),document.getElementById("editor-content")&&(this.reloadFont(),this.state.marginResizersEnabled)){var r=this.preferencesManager.getValue("editorWidth",null);null!=r&&(this.leftResizeControl.setWidth(r),this.rightResizeControl.setWidth(r));var i=this.preferencesManager.getValue("editorLeft",null);null!=i&&(this.leftResizeControl.setLeft(i),this.rightResizeControl.setLeft(i))}}},{key:"reloadFont",value:function(){var e=document.getElementById("note-text-editor");e&&(this.state.monospaceEnabled?this.state.isDesktop?e.style.fontFamily="Menlo,Consolas,'DejaVu Sans Mono',monospace":e.style.fontFamily="monospace":e.style.fontFamily="inherit")}},{key:"toggleKey",value:(n=d()(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this[t]=!this[t],this.preferencesManager.setUserPrefValue(t,this[t],!0),this.reloadFont(),"spellcheck"!==t){e.next=10;break}return e.next=6,this.setState({noteReady:!1});case 6:this.setState({noteReady:!0}),this.reloadFont(),e.next=11;break;case 10:"marginResizersEnabled"===t&&!0===this[t]&&this.$timeout((function(){n.leftResizeControl.flash(),n.rightResizeControl.flash()}));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"registerComponentHandler",value:function(){var e=this;this.componentManager.registerHandler({identifier:"editor",areas:["note-tags","editor-stack","editor-editor"],activationHandler:function(t){if("note-tags"===t.area)e.setState({tagsComponent:t.active?t:null});else if("editor-editor"===t.area)if(t!==e.state.selectedEditor||t.active){if(e.state.selectedEditor)e.state.selectedEditor.active&&e.state.note&&t.isExplicitlyEnabledForItem(e.state.note)&&!e.state.selectedEditor.isExplicitlyEnabledForItem(e.state.note)&&e.setState({selectedEditor:t});else if(e.state.note){var n=t.isExplicitlyEnabledForItem(e.state.note)||t.isDefaultEditor();t.active&&n?e.setState({selectedEditor:t}):e.setState({selectedEditor:null})}}else e.setState({selectedEditor:null});else"editor-stack"===t.area&&e.reloadComponentContext()},contextRequestHandler:function(t){if(t===e.state.selectedEditor||t===e.state.tagsComponent||e.state.componentStack.includes(t))return e.state.note},focusHandler:function(t,n){t.isEditor()&&n&&e.closeAllMenus()},actionHandler:function(t,n,r){if("set-size"===n){if("container"===r.type&&"note-tags"===t.area){var i=document.getElementById("note-tags-component-container");s=i,u="string"==typeof(c=r).width?c.width:"".concat(r.width,"px"),l="string"==typeof c.height?c.height:"".concat(r.height,"px"),s.setAttribute("style","width: ".concat(u,"; height: ").concat(l,";"))}}else if("associate-item"===n){if("Tag"===r.item.content_type){var a=e.modelManager.findItem(r.item.uuid);e.addTag(a)}}else if("deassociate-item"===n){var o=e.modelManager.findItem(r.item.uuid);e.removeTag(o)}else if("save-items"===n){r.items.map((function(e){return e.uuid})).includes(e.state.note.uuid)&&e.showSavingStatus()}var s,c,u,l}})}},{key:"reloadComponentStackArray",value:function(){var e=this.componentManager.componentsForArea("editor-stack").sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}));this.setState({componentStack:e})}},{key:"reloadComponentContext",value:function(){if(this.reloadComponentStackArray(),this.state.note){var e=!0,t=!1,n=void 0;try{for(var r,i=this.state.componentStack[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;a.active&&this.componentManager.setComponentHidden(a,!a.isExplicitlyEnabledForItem(this.state.note))}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}this.componentManager.contextItemDidChangeInArea("note-tags"),this.componentManager.contextItemDidChangeInArea("editor-stack"),this.componentManager.contextItemDidChangeInArea("editor-editor")}},{key:"toggleStackComponentForCurrentItem",value:function(e){e.hidden||!e.active?(this.componentManager.setComponentHidden(e,!1),this.associateComponentWithCurrentNote(e),e.active||this.componentManager.activateComponent(e),this.componentManager.contextItemDidChangeInArea("editor-stack")):(this.componentManager.setComponentHidden(e,!0),this.disassociateComponentWithCurrentNote(e))}},{key:"disassociateComponentWithCurrentNote",value:function(e){var t=this;e.associatedItemIds=e.associatedItemIds.filter((function(e){return e!==t.state.note.uuid})),e.disassociatedItemIds.includes(this.state.note.uuid)||e.disassociatedItemIds.push(this.state.note.uuid),this.modelManager.setItemDirty(e),this.syncManager.sync()}},{key:"associateComponentWithCurrentNote",value:function(e){var t=this;e.disassociatedItemIds=e.disassociatedItemIds.filter((function(e){return e!==t.state.note.uuid})),e.associatedItemIds.includes(this.state.note.uuid)||e.associatedItemIds.push(this.state.note.uuid),this.modelManager.setItemDirty(e),this.syncManager.sync()}},{key:"registerKeyboardShortcuts",value:function(){var e=this;this.altKeyObserver=this.keyboardManager.addKeyObserver({modifiers:[D.KeyModifierAlt],onKeyDown:function(){e.setState({altKeyDown:!0})},onKeyUp:function(){e.setState({altKeyDown:!1})}}),this.trashKeyObserver=this.keyboardManager.addKeyObserver({key:D.KeyBackspace,notElementIds:["note-text-editor","note-title-editor"],modifiers:[D.KeyModifierMeta],onKeyDown:function(){e.deleteNote()}}),this.deleteKeyObserver=this.keyboardManager.addKeyObserver({key:D.KeyBackspace,modifiers:[D.KeyModifierMeta,D.KeyModifierShift,D.KeyModifierAlt],onKeyDown:function(t){t.preventDefault(),e.deleteNote(!0)}})}},{key:"onSystemEditorLoad",value:function(){var e=this;if(!this.loadedTabListener){this.loadedTabListener=!0;var t=document.getElementById("note-text-editor");this.tabObserver=this.keyboardManager.addKeyObserver({element:t,key:D.KeyTab,onKeyDown:function(n){if(!e.state.note.locked&&!n.shiftKey){if(n.preventDefault(),!document.execCommand("insertText",!1,"\t")){var r=t.selectionStart,i=t.selectionEnd;t.value=t.value.substring(0,r)+"    "+t.value.substring(i),t.selectionStart=t.selectionEnd=r+4}var a=e.state.note;a.text=t.value,e.setState({note:a}),e.saveNote({bypassDebouncer:!0})}}}),a.a.element(t).on("$destroy",(function(){e.tabObserver&&(e.keyboardManager.removeKeyObserver(e.tabObserver),e.loadedTabListener=!1)}))}}}]),t}(C),V=function e(){v()(this,e),this.restrict="E",this.scope={},this.template=P.a,this.replace=!0,this.controller=z,this.controllerAs="self",this.bindToController=!0},W=n(17),K=n.n(W),q=function(){function e(t,n,r,i,a,o,s,c,u,l,f,p){var d=this;v()(this,e),E()(this,"toggleSyncResolutionMenu",(function(){d.showSyncResolution=!d.showSyncResolution})),E()(this,"closeAccountMenu",(function(){d.showAccountMenu=!1})),this.$rootScope=t,this.$timeout=n,this.alertManager=r,this.appState=i,this.authManager=a,this.componentManager=o,this.modelManager=s,this.nativeExtManager=c,this.passcodeManager=u,this.privilegesManager=l,this.statusManager=f,this.syncManager=p,this.rooms=[],this.themesWithIcons=[],this.showSyncResolution=!1,this.addAppStateObserver(),this.updateOfflineStatus(),this.addSyncEventHandler(),this.findErrors(),this.registerMappingObservers(),this.registerComponentHandler(),this.addRootScopeListeners(),this.authManager.checkForSecurityUpdate().then((function(e){d.securityUpdateAvailable=e})),this.statusManager.addStatusObserver((function(e){d.$timeout((function(){d.arbitraryStatusMessage=e}))}))}var t;return e.$inject=["$rootScope","$timeout","alertManager","appState","authManager","componentManager","modelManager","nativeExtManager","passcodeManager","privilegesManager","statusManager","syncManager"],y()(e,[{key:"addRootScopeListeners",value:function(){var e=this;this.$rootScope.$on("security-update-status-changed",(function(){e.securityUpdateAvailable=e.authManager.securityUpdateAvailable})),this.$rootScope.$on("reload-ext-data",(function(){e.reloadExtendedData()})),this.$rootScope.$on("new-update-available",(function(){e.$timeout((function(){e.onNewUpdateAvailable()}))}))}},{key:"addAppStateObserver",value:function(){var e=this;this.appState.addObserver((function(t,n){5===t?1===n.eventSource&&(e.closeAllRooms(),e.closeAccountMenu()):6===t?e.backupStatus=e.statusManager.addStatusFromString("Saving local backup..."):7===t&&(n.success?e.backupStatus=e.statusManager.replaceStatusWithString(e.backupStatus,"Successfully saved backup."):e.backupStatus=e.statusManager.replaceStatusWithString(e.backupStatus,"Unable to save local backup."),e.$timeout((function(){e.backupStatus=e.statusManager.removeStatus(e.backupStatus)}),2e3))}))}},{key:"addSyncEventHandler",value:function(){var e=this;this.syncManager.addEventHandler((function(t,n){e.$timeout((function(){"local-data-loaded"===t?e.offline&&0===e.modelManager.noteCount()&&(e.showAccountMenu=!0):"enter-out-of-sync"===t?e.outOfSync=!0:"exit-out-of-sync"===t?e.outOfSync=!1:"sync:completed"===t?(e.syncUpdated(),e.findErrors(),e.updateOfflineStatus()):"sync:error"===t&&(e.findErrors(),e.updateOfflineStatus())}))}))}},{key:"registerMappingObservers",value:function(){var e=this;this.modelManager.addItemSyncObserver("room-bar","SN|Component",(function(t,n,r,i){e.rooms=e.modelManager.components.filter((function(e){return"rooms"===e.area&&!e.deleted})),e.queueExtReload&&(e.queueExtReload=!1,e.reloadExtendedData())})),this.modelManager.addItemSyncObserver("footer-bar-themes","SN|Theme",(function(t,n,r,i){var a=e.modelManager.validItemsForContentType("SN|Theme").filter((function(e){return!e.deleted&&e.content.package_info&&e.content.package_info.dock_icon})).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})),o=a.length!==e.themesWithIcons.length;e.themesWithIcons=a,o&&e.reloadDockShortcuts()}))}},{key:"registerComponentHandler",value:function(){var e=this;this.componentManager.registerHandler({identifier:"roomBar",areas:["rooms","modal"],activationHandler:function(e){},actionHandler:function(e,t,n){"set-size"===t&&e.setLastSize(n)},focusHandler:function(t,n){t.isEditor()&&n&&(e.closeAllRooms(),e.closeAccountMenu())}})}},{key:"reloadExtendedData",value:function(){var e=this;if(!this.reloadInProgress){this.reloadInProgress=!0;var t=this.rooms.find((function(t){return t.package_info.identifier===e.nativeExtManager.extManagerId}));if(!t)return this.queueExtReload=!0,void(this.reloadInProgress=!1);this.selectRoom(t),this.$timeout((function(){e.selectRoom(t),e.reloadInProgress=!1,e.$rootScope.$broadcast("ext-reload-complete")}),2e3)}}},{key:"getUser",value:function(){return this.authManager.user}},{key:"updateOfflineStatus",value:function(){this.offline=this.authManager.offline()}},{key:"openSecurityUpdate",value:function(){this.authManager.presentPasswordWizard("upgrade-security")}},{key:"findErrors",value:function(){this.error=this.syncManager.syncStatus.error}},{key:"accountMenuPressed",value:function(){this.showAccountMenu=!this.showAccountMenu,this.closeAllRooms()}},{key:"hasPasscode",value:function(){return this.passcodeManager.hasPasscode()}},{key:"lockApp",value:function(){this.$rootScope.lockApplication()}},{key:"refreshData",value:function(){var e=this;this.isRefreshing=!0,this.syncManager.sync({force:!0,performIntegrityCheck:!0}).then((function(t){e.$timeout((function(){e.isRefreshing=!1}),200),t&&t.error?e.alertManager.alert({text:"There was an error syncing. Please try again. If all else fails, try signing out and signing back in."}):e.syncUpdated()}))}},{key:"syncUpdated",value:function(){this.lastSyncDate=function(e){if("undefined"!=typeof Intl&&Intl.DateTimeFormat){if(!r){var t=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;r=new Intl.DateTimeFormat(t,{year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit"})}return r.format(e)}return e.toDateString()+" "+e.toLocaleTimeString()}(new Date)}},{key:"onNewUpdateAvailable",value:function(){this.newUpdateAvailable=!0}},{key:"clickedNewUpdateAnnouncement",value:function(){this.newUpdateAvailable=!1,this.alertManager.alert({text:"A new update is ready to install. Please use the top-level 'Updates' menu to manage installation."})}},{key:"reloadDockShortcuts",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.themesWithIcons[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=o.content.package_info.name,c=o.content.package_info.dock_icon;c&&e.push({name:s,component:o,icon:c})}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.dockShortcuts=e.sort((function(e,t){var n=e.icon.type,r=t.icon.type;return n===r?0:"circle"===n&&"svg"===r?-1:"circle"===r&&"svg"===n?1:void 0}))}},{key:"initSvgForShortcut",value:function(e){var t="dock-svg-"+e.component.uuid,n=document.getElementById(t),r=new DOMParser,i=e.component.content.package_info.dock_icon.source,a=r.parseFromString(i,"image/svg+xml");n.appendChild(a.documentElement)}},{key:"selectShortcut",value:function(e){this.componentManager.toggleComponent(e.component)}},{key:"onRoomDismiss",value:function(e){e.showRoom=!1}},{key:"closeAllRooms",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.rooms[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.showRoom=!1}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"selectRoom",value:(t=d()(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){r.$timeout((function(){t.showRoom=!t.showRoom}))},t.showRoom){e.next=8;break}return e.next=4,this.privilegesManager.actionRequiresPrivilege($.ActionManageExtensions);case 4:e.sent?this.privilegesManager.presentPrivilegesModal($.ActionManageExtensions,n):n(),e.next=9;break;case 8:n();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"clickOutsideAccountMenu",value:function(){this.privilegesManager.authenticationInProgress()||(this.showAccountMenu=!1)}}]),e}(),J=function e(){v()(this,e),this.restrict="E",this.scope={},this.template=K.a,this.controller=q,this.replace=!0,this.controllerAs="ctrl",this.bindToController=!0},G=n(9),Y=n.n(G),Z=n(18),X=n.n(Z);function Q(e){var t=e.notes,n=e.selectedTag,r=e.showArchived,i=e.hidePinned,a=e.filterText,o=e.sortBy,s=e.reverse;return function(e){var t=e.notes,n=void 0===t?[]:t,r=e.sortBy,i=e.reverse;return n.sort((function(e,t){return function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.dummy)return-1;if(n.dummy)return 1;if(!a){if(t.pinned&&n.pinned)return e(t,n,!0);if(t.pinned)return-1;if(n.pinned)return 1}var o=t[r]||"",s=n[r]||"",c=1;if(i&&(c*=-1),"title"===r){if(o=o.toLowerCase(),s=s.toLowerCase(),0===o.length&&0===s.length)return 0;if(0===o.length&&0!==s.length)return 1*c;if(0!==o.length&&0===s.length)return-1*c;c*=-1}return o>s?-1*c:o<s?1*c:0}(e,t)}))}({notes:function(e){var t=e.notes,n=e.selectedTag,r=e.showArchived,i=e.hidePinned,a=e.filterText;return t.filter((function(e){var t=r,o=!i,s=n.content.isTrashTag;return!(!s&&e.content.trashed)&&(n.isSmartTag()&&(t=t||n.content.isArchiveTag||s),!(e.archived&&!t||e.pinned&&!o)&&function(e){var t=e.note,n=e.query;if(0===n.length)return!0;var r=t.safeTitle().toLowerCase(),i=t.safeText().toLowerCase(),a=n.toLowerCase(),o=function(e){var t=e.match(/"(.*?)"/);return t?t[1]:null}(a);if(o)return r.includes(o)||i.includes(o);if(function(e){return!!e.match(/\b[0-9a-f]{8}\b-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-\b[0-9a-f]{12}\b/)}(a))return t.uuid===a;var s=a.split(" "),c=s.every((function(e){return r.indexOf(e)>=0})),u=s.every((function(e){return i.indexOf(e)>=0}));return c||u}({note:e,query:a}))}))}({notes:t,selectedTag:n,showArchived:r,hidePinned:i,filterText:a}),sortBy:o,reverse:s})}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){function t(e,n,r,i,o,s,c,u,l,f){var p;return v()(this,t),p=b()(this,w()(t).call(this,e)),E()(O()(p),"onPanelResize",(function(e,t,n,r){p.preferencesManager.setUserPrefValue("notesPanelWidth",e),p.preferencesManager.syncUserPreferences(),p.appState.panelDidResize({name:"notes",collapsed:r})})),p.$rootScope=n,p.appState=r,p.authManager=i,p.desktopManager=o,p.keyboardManager=s,p.modelManager=c,p.preferencesManager=u,p.privilegesManager=l,p.syncManager=f,p.state={notes:[],renderedNotes:[],selectedNote:null,tag:null,sortBy:null,showArchived:null,hidePinned:null,sortReverse:null,panelTitle:null,mutable:{showMenu:!1},noteFilter:{text:""}},p.panelController={},window.onresize=function(e){p.resetPagination({keepCurrentIfLarger:!0})},p.addAppStateObserver(),p.addSignInObserver(),p.addSyncEventHandler(),p.addMappingObserver(),p.reloadPreferences(),p.resetPagination(),p.registerKeyboardShortcuts(),a.a.element(document).ready((function(){p.reloadPreferences()})),p}var n,r,i,s,c,u,l,p;return t.$inject=["$timeout","$rootScope","appState","authManager","desktopManager","keyboardManager","modelManager","preferencesManager","privilegesManager","syncManager"],S()(t,e),y()(t,[{key:"addAppStateObserver",value:function(){var e=this;this.appState.addObserver((function(t,n){1===t?e.handleTagChange(e.appState.getSelectedTag(),n.previousTag):2===t?e.handleNoteSelection(e.appState.getSelectedNote()):3===t?(e.reloadPreferences(),e.reloadNotes()):5===t&&e.setShowMenuFalse()}))}},{key:"addSignInObserver",value:function(){var e=this;this.authManager.addEventHandler((function(t){t===o.SFAuthManager.DidSignInEvent&&e.state.selectedNote&&e.state.selectedNote.dummy&&(e.modelManager.removeItemLocally(e.state.selectedNote),e.selectNote(null).then((function(){e.reloadNotes()})),e.createDummyOnSynCompletionIfNoNotes=!0)}))}},{key:"addSyncEventHandler",value:function(){var e=this;this.syncManager.addEventHandler((function(t,n){"local-data-loaded"===t?0===e.state.notes.length&&e.createNewNote():"sync:completed"===t&&e.createDummyOnSynCompletionIfNoNotes&&0===e.state.notes.length&&(e.createDummyOnSynCompletionIfNoNotes=!1,e.createNewNote())}))}},{key:"addMappingObserver",value:function(){var e=this;this.modelManager.addItemSyncObserver("note-list","*",function(){var t=d()(f.a.mark((function t(n,r,i,a,o){var s,c,u,l,p,d,h,v;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.reloadNotes();case 2:for((s=e.state.selectedNote)?(s.deleted||s.content.trashed)&&e.selectNextOrCreateNew():e.selectFirstNote(),c=n.filter((function(e){return"Note"===e.content_type})),u=!0,l=!1,p=void 0,t.prev=8,d=c[Symbol.iterator]();!(u=(h=d.next()).done);u=!0)v=h.value,e.loadFlagsForNote(v),v.cachedCreatedAtString=v.createdAtString(),v.cachedUpdatedAtString=v.updatedAtString();t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),l=!0,p=t.t0;case 16:t.prev=16,t.prev=17,u||null==d.return||d.return();case 19:if(t.prev=19,!l){t.next=22;break}throw p;case 22:return t.finish(19);case 23:return t.finish(16);case 24:case"end":return t.stop()}}),t,null,[[8,12,16,24],[17,,19,23]])})));return function(e,n,r,i,a){return t.apply(this,arguments)}}())}},{key:"handleTagChange",value:(p=d()(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.selectedNote||!this.state.selectedNote.dummy){e.next=5;break}return this.modelManager.removeItemLocally(this.state.selectedNote),n&&Y.a.remove(n.notes,this.state.selectedNote),e.next=5,this.selectNote(null);case 5:return e.next=7,this.setState({tag:t});case 7:return this.resetScrollPosition(),this.setShowMenuFalse(),e.next=11,this.setNoteFilterText("");case 11:return this.desktopManager.searchText(),this.resetPagination(),e.next=15,this.reloadNotes();case 15:this.state.notes.length>0?this.selectFirstNote():this.syncManager.initialDataLoaded()&&(!t.isSmartTag()||t.content.isAllTag?this.createNewNote():this.state.selectedNote&&!this.state.notes.includes(this.state.selectedNote)&&this.selectNote(null));case 16:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"resetScrollPosition",value:function(){var e=document.getElementById("notes-scrollable");e&&(e.scrollTop=0,e.scrollLeft=0)}},{key:"selectNote",value:(l=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.appState.setSelectedNote(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"removeNoteFromList",value:(u=d()(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.notes,Y.a.pull(n,t),e.next=4,this.setState({notes:n,renderedNotes:n.slice(0,this.notesToDisplay)});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"reloadNotes",value:(c=d()(f.a.mark((function e(){var t,n,r,i,a,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.tag){e.next=2;break}return e.abrupt("return");case 2:for(t=Q({notes:this.state.tag.notes,selectedTag:this.state.tag,showArchived:this.state.showArchived,hidePinned:this.state.hidePinned,filterText:this.state.noteFilter.text.toLowerCase(),sortBy:this.state.sortBy,reverse:this.state.sortReverse}),n=!0,r=!1,i=void 0,e.prev=6,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)(s=o.value).errorDecrypting&&this.loadFlagsForNote(s),s.shouldShowTags=this.shouldShowTagsForNote(s);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),r=!0,i=e.t0;case 14:e.prev=14,e.prev=15,n||null==a.return||a.return();case 17:if(e.prev=17,!r){e.next=20;break}throw i;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return e.next=24,this.setState({notes:t,renderedNotes:t.slice(0,this.notesToDisplay)});case 24:this.reloadPanelTitle();case 25:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])}))),function(){return c.apply(this,arguments)})},{key:"setShowMenuFalse",value:function(){this.setState({mutable:te({},this.state.mutable,{showMenu:!1})})}},{key:"handleNoteSelection",value:(s=d()(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.selectedNote!==t){e.next=2;break}return e.abrupt("return");case 2:return(n=this.state.selectedNote)&&n.dummy&&(this.modelManager.removeItemLocally(n),this.removeNoteFromList(n)),e.next=6,this.setState({selectedNote:t});case 6:if(t){e.next=8;break}return e.abrupt("return");case 8:this.selectedIndex=Math.max(0,this.displayableNotes().indexOf(t)),t.content.conflict_of&&(t.content.conflict_of=null,this.modelManager.setItemDirty(t),this.syncManager.sync()),this.isFiltering()&&this.desktopManager.searchText(this.state.noteFilter.text);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"reloadPreferences",value:function(){var e={},t=this.state.sortBy,n=this.preferencesManager.getValue("sortBy","created_at");"updated_at"===n&&(n="client_updated_at"),e.sortBy=n,e.sortReverse=this.preferencesManager.getValue("sortReverse",!1),e.showArchived=this.preferencesManager.getValue("showArchived",!1),e.hidePinned=this.preferencesManager.getValue("hidePinned",!1),e.hideNotePreview=this.preferencesManager.getValue("hideNotePreview",!1),e.hideDate=this.preferencesManager.getValue("hideDate",!1),e.hideTags=this.preferencesManager.getValue("hideTags",!1),this.setState(te({},e)),t&&t!==n&&this.selectFirstNote();var r=this.preferencesManager.getValue("notesPanelWidth");r&&(this.panelController.setWidth(r),this.panelController.isCollapsed()&&this.appState.panelDidResize({name:"notes",collapsed:this.panelController.isCollapsed()}))}},{key:"paginate",value:function(){this.notesToDisplay+=this.pageSize,this.reloadNotes(),this.searchSubmitted&&this.desktopManager.searchText(this.state.noteFilter.text)}},{key:"resetPagination",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.keepCurrentIfLarger,n=document.documentElement.clientHeight;this.pageSize=n/51,0===this.pageSize&&(this.pageSize=20),t&&this.notesToDisplay>this.pageSize||(this.notesToDisplay=this.pageSize)}},{key:"reloadPanelTitle",value:function(){var e;if(this.isFiltering()){var t=this.state.notes.length;e="".concat(t," search results")}else this.state.tag&&(e="".concat(this.state.tag.title));this.setState({panelTitle:e})}},{key:"optionsSubtitle",value:function(){var e="";return"created_at"===this.state.sortBy?e+=" Date Added":"client_updated_at"===this.state.sortBy?e+=" Date Modified":"title"===this.state.sortBy&&(e+=" Title"),this.state.showArchived&&(e+=" | + Archived"),this.state.hidePinned&&(e+=" | â Pinned"),this.state.sortReverse&&(e+=" | Reversed"),e}},{key:"loadFlagsForNote",value:function(e){var t=[];return e.pinned&&t.push({text:"Pinned",class:"info"}),e.archived&&t.push({text:"Archived",class:"warning"}),e.content.protected&&t.push({text:"Protected",class:"success"}),e.locked&&t.push({text:"Locked",class:"neutral"}),e.content.trashed&&t.push({text:"Deleted",class:"danger"}),e.content.conflict_of&&t.push({text:"Conflicted Copy",class:"danger"}),e.errorDecrypting&&t.push({text:"Missing Keys",class:"danger"}),e.deleted&&t.push({text:"Deletion Pending Sync",class:"danger"}),e.flags=t,t}},{key:"displayableNotes",value:function(){return this.state.notes}},{key:"getFirstNonProtectedNote",value:function(){for(var e=this.displayableNotes(),t=0,n=e[t];n&&n.content.protected&&!(++t>=e.length);)n=e[t];return n}},{key:"selectFirstNote",value:function(){var e=this.getFirstNonProtectedNote();e&&this.selectNote(e)}},{key:"selectNextNote",value:function(){var e=this.displayableNotes(),t=e.indexOf(this.state.selectedNote);t+1<e.length&&this.selectNote(e[t+1])}},{key:"selectNextOrCreateNew",value:function(){var e=this.getFirstNonProtectedNote();e?this.selectNote(e):this.state.tag&&this.state.tag.isSmartTag()?this.selectNote(null):this.createNewNote()}},{key:"selectPreviousNote",value:function(){var e=this.displayableNotes(),t=e.indexOf(this.state.selectedNote);return t-1>=0&&(this.selectNote(e[t-1]),!0)}},{key:"createNewNote",value:function(){var e,t=!0;if(this.isFiltering())e=this.state.noteFilter.text,t=!1;else{if(this.state.selectedNote&&this.state.selectedNote.dummy)return;e="Note ".concat(this.state.notes.length+1)}var n=this.modelManager.createItem({content_type:"Note",content:{text:"",title:e}});n.client_updated_at=new Date,n.dummy=t,this.modelManager.addItem(n),this.modelManager.setItemDirty(n);var r=this.appState.getSelectedTag();r.isSmartTag()||(r.addItemAsRelationship(n),this.modelManager.setItemDirty(r)),this.selectNote(n)}},{key:"isFiltering",value:function(){return this.state.noteFilter.text&&this.state.noteFilter.text.length>0}},{key:"setNoteFilterText",value:(i=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({noteFilter:te({},this.state.noteFilter,{text:t})});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"clearFilterText",value:(r=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setNoteFilterText("");case 2:this.onFilterEnter(),this.filterTextChanged(),this.resetPagination();case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"filterTextChanged",value:(n=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchSubmitted&&(this.searchSubmitted=!1),e.next=3,this.reloadNotes();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onFilterEnter",value:function(){this.searchSubmitted=!0,this.desktopManager.searchText(this.state.noteFilter.text)}},{key:"selectedMenuItem",value:function(){this.setShowMenuFalse()}},{key:"togglePrefKey",value:function(e){this.preferencesManager.setUserPrefValue(e,!this.state[e]),this.preferencesManager.syncUserPreferences()}},{key:"selectedSortByCreated",value:function(){this.setSortBy("created_at")}},{key:"selectedSortByUpdated",value:function(){this.setSortBy("client_updated_at")}},{key:"selectedSortByTitle",value:function(){this.setSortBy("title")}},{key:"toggleReverseSort",value:function(){this.selectedMenuItem(),this.preferencesManager.setUserPrefValue("sortReverse",!this.state.sortReverse),this.preferencesManager.syncUserPreferences()}},{key:"setSortBy",value:function(e){this.preferencesManager.setUserPrefValue("sortBy",e),this.preferencesManager.syncUserPreferences()}},{key:"shouldShowTagsForNote",value:function(e){return!this.state.hideTags&&!e.content.protected&&(this.state.tag.content.isAllTag?e.tags&&e.tags.length>0:!!this.state.tag.isSmartTag()||e.tags&&e.tags.length>1)}},{key:"getSearchBar",value:function(){return document.getElementById("search-bar")}},{key:"registerKeyboardShortcuts",value:function(){var e=this;this.newNoteKeyObserver=this.keyboardManager.addKeyObserver({key:"n",modifiers:[D.KeyModifierMeta,D.KeyModifierCtrl],onKeyDown:function(t){t.preventDefault(),e.createNewNote()}}),this.nextNoteKeyObserver=this.keyboardManager.addKeyObserver({key:D.KeyDown,elements:[document.body,this.getSearchBar()],onKeyDown:function(t){var n=e.getSearchBar();n===document.activeElement&&n.blur(),e.selectNextNote()}}),this.nextNoteKeyObserver=this.keyboardManager.addKeyObserver({key:D.KeyUp,element:document.body,onKeyDown:function(t){e.selectPreviousNote()}}),this.searchKeyObserver=this.keyboardManager.addKeyObserver({key:"f",modifiers:[D.KeyModifierMeta,D.KeyModifierShift],onKeyDown:function(t){var n=e.getSearchBar();n&&n.focus()}})}}]),t}(C),re=function e(){v()(this,e),this.scope={},this.template=X.a,this.replace=!0,this.controller=ne,this.controllerAs="self",this.bindToController=!0},ie=n(19),ae=n.n(ie),oe=function(e){function t(e,n,r,i,a,o,s,c){var u;return v()(this,t),u=b()(this,w()(t).call(this,n)),E()(O()(u),"onPanelResize",(function(e,t,n,r){u.preferencesManager.setUserPrefValue("tagsPanelWidth",e,!0),u.appState.panelDidResize({name:"tags",collapsed:r})})),u.$rootScope=e,u.alertManager=r,u.appState=i,u.componentManager=a,u.modelManager=o,u.preferencesManager=s,u.syncManager=c,u.panelController={},u.addSyncEventHandler(),u.addAppStateObserver(),u.addMappingObserver(),u.loadPreferences(),u.registerComponentHandler(),u.state={smartTags:u.modelManager.getSmartTags(),noteCounts:{}},u}var n,r,i;return t.$inject=["$rootScope","$timeout","alertManager","appState","componentManager","modelManager","preferencesManager","syncManager"],S()(t,e),y()(t,[{key:"$onInit",value:function(){this.selectTag(this.state.smartTags[0])}},{key:"addSyncEventHandler",value:function(){var e=this;this.syncManager.addEventHandler(function(){var t=d()(f.a.mark((function t(n,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("local-data-loaded"!==n&&"sync:completed"!==n&&"local-data-incremental-load"!==n){t.next=4;break}return t.next=3,e.setState({tags:e.modelManager.tags,smartTags:e.modelManager.getSmartTags()});case 3:e.reloadNoteCounts();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"addAppStateObserver",value:function(){var e=this;this.appState.addObserver((function(t,n){3===t?e.loadPreferences():1===t&&e.setState({selectedTag:e.appState.getSelectedTag()})}))}},{key:"addMappingObserver",value:function(){var e=this;this.modelManager.addItemSyncObserver("tags-list-tags","Tag",(function(t,n,r,i,a){if(e.reloadNoteCounts(),e.state.selectedTag){var o=t.find((function(t){return t.uuid===e.state.selectedTag.uuid}));o&&o.deleted&&e.selectTag(e.state.smartTags[0])}}))}},{key:"reloadNoteCounts",value:function(){var e=[];this.state.tags&&(e=e.concat(this.state.tags)),this.state.smartTags&&(e=e.concat(this.state.smartTags));var t={},n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value,u=o.SNNote.filterDummyNotes(c.notes).filter((function(e){return!e.archived&&!e.content.trashed}));t[c.uuid]=u.length}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}this.setState({noteCounts:t})}},{key:"loadPreferences",value:function(){var e=this.preferencesManager.getValue("tagsPanelWidth");e&&(this.panelController.setWidth(e),this.panelController.isCollapsed()&&this.appState.panelDidResize({name:"tags",collapsed:this.panelController.isCollapsed()}))}},{key:"registerComponentHandler",value:function(){var e=this;this.componentManager.registerHandler({identifier:"tags",areas:["tags-list"],activationHandler:function(t){e.component=t},contextRequestHandler:function(e){return null},actionHandler:function(t,n,r){if("select-item"===n){if("Tag"===r.item.content_type){var i=e.modelManager.findItem(r.item.uuid);i&&e.selectTag(i)}else if("SN|SmartTag"===r.item.content_type){var a=new o.SNSmartTag(r.item);e.selectTag(a)}}else"clear-selection"===n&&e.selectTag(e.state.smartTags[0])}})}},{key:"selectTag",value:(i=d()(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isSmartTag()&&Object.defineProperty(t,"notes",{get:function(){return n.modelManager.notesMatchingSmartTag(t)}}),t.content.conflict_of&&(t.content.conflict_of=null,this.modelManager.setItemDirty(t),this.syncManager.sync()),this.appState.setSelectedTag(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"clickedAddNewTag",value:function(){if(!this.state.editingTag){var e=this.modelManager.createItem({content_type:"Tag"});this.setState({previousTag:this.state.selectedTag,selectedTag:e,editingTag:e,newTag:e}),this.modelManager.addItem(e)}}},{key:"tagTitleDidChange",value:function(e){this.setState({editingTag:e})}},{key:"saveTag",value:(r=d()(f.a.mark((function e(t,n){var r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.blur(),e.next=3,this.setState({editingTag:null});case 3:if(n.title&&0!==n.title.length){e.next=7;break}return this.state.editingTag?(n.title=this.editingOriginalName,this.editingOriginalName=null):this.state.newTag&&(this.modelManager.removeItemLocally(n),this.setState({selectedTag:this.state.previousTag})),this.setState({newTag:null}),e.abrupt("return");case 7:if(this.editingOriginalName=null,r=this.modelManager.findTag(n.title),i=r&&r!==n,this.state.newTag!==n||!i){e.next=15;break}return this.alertManager.alert({text:"A tag with this name already exists."}),this.modelManager.removeItemLocally(n),this.setState({newTag:null}),e.abrupt("return");case 15:this.modelManager.setItemDirty(n),this.syncManager.sync(),this.modelManager.resortTag(n),this.selectTag(n),this.setState({newTag:null});case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"selectedRenameTag",value:(n=d()(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.editingOriginalName=n.title,e.next=3,this.setState({editingTag:n});case 3:document.getElementById("tag-"+n.uuid).focus();case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"selectedDeleteTag",value:function(e){this.removeTag(e),this.selectTag(this.state.smartTags[0])}},{key:"removeTag",value:function(e){var t=this;this.alertManager.confirm({text:"Are you sure you want to delete this tag? Note: deleting a tag will not delete its notes.",destructive:!0,onConfirm:function(){t.modelManager.setItemToBeDeleted(e),t.syncManager.sync()}})}}]),t}(C),se=function e(){v()(this,e),this.restrict="E",this.scope={},this.template=ae.a,this.replace=!0,this.controller=oe,this.controllerAs="self",this.bindToController=!0},ce=n(20),ue=n.n(ce),le=function(){function e(t,n,r,i,a,o,s,c,u,l,f,p,d,h,m){v()(this,e),this.$rootScope=n,this.$scope=r,this.$location=t,this.$timeout=i,this.dbManager=c,this.syncManager=m,this.statusManager=d,this.storageManager=h,this.appState=o,this.authManager=s,this.modelManager=u,this.alertManager=a,this.preferencesManager=f,this.passcodeManager=l,this.defineRootScopeFunctions(),this.initializeStorageManager(),this.addAppStateObserver(),this.defaultLoad(),this.handleAutoSignInFromParams(),this.addDragDropHandlers()}var t;return e.$inject=["$location","$rootScope","$scope","$timeout","alertManager","appState","authManager","dbManager","modelManager","passcodeManager","preferencesManager","themeManager","statusManager","storageManager","syncManager"],y()(e,[{key:"defineRootScopeFunctions",value:function(){var e=this;this.$rootScope.lockApplication=function(){window.location.reload()},this.$rootScope.safeApply=function(t){var n=e.$scope.$root.$$phase;"$apply"===n||"$digest"===n?e.$scope.$eval(t):e.$scope.$apply(t)}}},{key:"defaultLoad",value:function(){var e=this;this.$scope.platform=s(),this.passcodeManager.isLocked()?this.$scope.needsUnlock=!0:this.loadAfterUnlock(),this.$scope.onSuccessfulUnlock=function(){e.$timeout((function(){e.$scope.needsUnlock=!1,e.loadAfterUnlock()}))},this.$scope.onUpdateAvailable=function(){e.$rootScope.$broadcast("new-update-available")}}},{key:"initializeStorageManager",value:function(){this.storageManager.initialize(this.passcodeManager.hasPasscode(),this.authManager.isEphemeralSession())}},{key:"addAppStateObserver",value:function(){var e=this;this.appState.addObserver((function(t,n){if(4===t){"notes"===n.panel&&(e.notesCollapsed=n.collapsed),"tags"===n.panel&&(e.tagsCollapsed=n.collapsed);var r="";e.notesCollapsed&&(r+="collapsed-notes"),e.tagsCollapsed&&(r+=" collapsed-tags"),e.$scope.appClass=r}}))}},{key:"loadAfterUnlock",value:function(){this.openDatabase(),this.authManager.loadInitialData(),this.preferencesManager.load(),this.addSyncStatusObserver(),this.configureKeyRequestHandler(),this.addSyncEventHandler(),this.addSignOutObserver(),this.loadLocalData()}},{key:"openDatabase",value:function(){var e=this;this.dbManager.setLocked(!1),this.dbManager.openDatabase({onUpgradeNeeded:function(){e.syncManager.clearSyncToken(),e.syncManager.sync()}})}},{key:"addSyncStatusObserver",value:function(){var e=this;this.syncStatusObserver=this.syncManager.registerSyncStatusObserver((function(t){if(t.retrievedCount>20){var n="Downloading ".concat(t.retrievedCount," items. Keep app open.");e.syncStatus=e.statusManager.replaceStatusWithString(e.syncStatus,n),e.showingDownloadStatus=!0}else if(e.showingDownloadStatus){e.showingDownloadStatus=!1;e.syncStatus=e.statusManager.replaceStatusWithString(e.syncStatus,"Download Complete."),setTimeout((function(){e.syncStatus=e.statusManager.removeStatus(e.syncStatus)}),2e3)}else t.total>20?e.uploadSyncStatus=e.statusManager.replaceStatusWithString(e.uploadSyncStatus,"Syncing ".concat(t.current,"/").concat(t.total," items...")):e.uploadSyncStatus&&(e.uploadSyncStatus=e.statusManager.removeStatus(e.uploadSyncStatus))}))}},{key:"configureKeyRequestHandler",value:function(){var e=this;this.syncManager.setKeyRequestHandler(d()(f.a.mark((function t(){var n,r,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.authManager.offline())){t.next=5;break}t.t0=e.passcodeManager.passcodeAuthParams(),t.next=8;break;case 5:return t.next=7,e.authManager.getAuthParams();case 7:t.t0=t.sent;case 8:if(r=t.t0,!n){t.next=13;break}t.t1=e.passcodeManager.keys(),t.next=16;break;case 13:return t.next=15,e.authManager.keys();case 15:t.t1=t.sent;case 16:return i=t.t1,t.abrupt("return",{keys:i,offline:n,auth_params:r});case 18:case"end":return t.stop()}}),t)}))))}},{key:"addSyncEventHandler",value:function(){var e,t=this;this.syncManager.addEventHandler((function(n,r){if(t.$rootScope.$broadcast(n,r||{}),"sync-session-invalid"===n){var i=(new Date-e)/1e3;(!e||i>30)&&(e=new Date,setTimeout((function(){t.alertManager.alert({text:"Your session has expired. New changes will not be pulled in. Please sign out and sign back in to refresh your session."})}),500))}else"sync-exception"===n&&t.alertManager.alert({text:T(r)})}))}},{key:"loadLocalData",value:function(){var e=this,t=this.authManager.user||this.passcodeManager.hasPasscode();this.syncStatus=this.statusManager.addStatusFromString(t?"Decrypting items...":"Loading items...");this.syncManager.loadLocalItems({incrementalCallback:function(n,r){var i="".concat(n,"/").concat(r," items..."),a=t?"Decrypting ".concat(i):"Loading ".concat(i);e.syncStatus=e.statusManager.replaceStatusWithString(e.syncStatus,a)}}).then((function(){e.$timeout((function(){e.$rootScope.$broadcast("initial-data-loaded"),e.syncStatus=e.statusManager.replaceStatusWithString(e.syncStatus,"Syncing..."),e.syncManager.sync({performIntegrityCheck:!0}).then((function(){e.syncStatus=e.statusManager.removeStatus(e.syncStatus)})),setInterval((function(){e.syncManager.sync()}),3e4)}))}))}},{key:"addSignOutObserver",value:function(){var e=this;this.authManager.addEventHandler((function(t){t===o.SFAuthManager.DidSignOutEvent&&(e.modelManager.handleSignout(),e.syncManager.handleSignout())}))}},{key:"addDragDropHandlers",value:function(){var e=this;window.addEventListener("dragover",(function(e){e.dataTransfer.files.length>0&&e.preventDefault()}),!1),window.addEventListener("drop",(function(t){t.dataTransfer.files.length>0&&(t.preventDefault(),e.alertManager.alert({text:"Please use FileSafe or the Bold Editor to attach images and files. Learn more at standardnotes.org/filesafe."}))}),!1)}},{key:"handleAutoSignInFromParams",value:(t=d()(f.a.mark((function e(){var t,n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.$location.search(),n=t.server,r=t.email,i=t.pw,n&&r&&i){e.next=6;break}return e.abrupt("return");case 6:if(!this.authManager.offline()){e.next=14;break}return e.next=9,this.authManager.login(n,r,i,!1,!1,{});case 9:e.sent.error||window.location.reload(),e.next=27;break;case 14:if(e.t0=this.authManager.user.email===r,!e.t0){e.next=21;break}return e.next=18,this.syncManager.getServerURL();case 18:e.t1=e.sent,e.t2=n,e.t0=e.t1===e.t2;case 21:if(!e.t0){e.next=25;break}return e.abrupt("return");case 25:this.authManager.signout(!0),window.location.reload();case 27:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),fe=function e(){v()(this,e),this.template=ue.a,this.controller=le},pe=n(21),de=n.n(pe),he=function(){function e(t,n,r,i){v()(this,e),this.$scope=t,this.alertManager=n,this.authManager=r,this.passcodeManager=i,this.formData={},this.addVisibilityObserver(),this.addDestroyHandler()}return e.$inject=["$scope","alertManager","authManager","passcodeManager"],y()(e,[{key:"addDestroyHandler",value:function(){var e=this;this.$scope.$on("$destroy",(function(){e.passcodeManager.removeVisibilityObserver(e.visibilityObserver)}))}},{key:"addVisibilityObserver",value:function(){var e=this;this.visibilityObserver=this.passcodeManager.addVisibilityObserver((function(t){if(t){var n=e.passcodeInput;n&&n.focus()}}))}},{key:"submitPasscodeForm",value:function(e){var t=this;this.formData.passcode&&0!==this.formData.passcode.length&&(this.passcodeInput.blur(),this.passcodeManager.unlock(this.formData.passcode,(function(e){e?t.onSuccess()():(t.formData.passcode=null,t.alertManager.alert({text:"Invalid passcode. Please try again.",onClose:function(){t.passcodeInput.focus()}}))})))}},{key:"forgotPasscode",value:function(){this.formData.showRecovery=!0}},{key:"beginDeleteData",value:function(){var e=this;this.alertManager.confirm({text:"Are you sure you want to clear all local data?",destructive:!0,onConfirm:function(){e.authManager.signout(!0).then((function(){window.location.reload()}))}})}},{key:"passcodeInput",get:function(){return document.getElementById("passcode-input")}}]),e}(),ve=function e(){v()(this,e),this.restrict="E",this.template=de.a,this.controller=he,this.controllerAs="ctrl",this.bindToController=!0,this.scope={onSuccess:"&"}};function me(e){return{restrict:"A",scope:{shouldFocus:"="},link:function(t,n){e((function(){t.shouldFocus&&n[0].focus()}))}}}function ye(e){return{restrict:"A",replace:!1,link:function(t,n,r){var i=!1;n.bind("click",(function(e){i=!1,r.isOpen&&e.stopPropagation()})),e.bind("click",(function(){event.target.closest(".sk-modal")||i||(t.$apply(r.clickOutside),i=!0)}))}}}function ge(e){return{restrict:"A",scope:{show:"=",delay:"@"},link:function(t,n,r){function i(e){e?n.css({display:""}):n.css({display:"none"})}i(!1),t.$watch("show",(function(n){n?function(){t.hidePromise&&(e.cancel(t.hidePromise),t.hidePromise=null);i(!0)}():function(){t.hidePromise=e(i.bind(this,!1),(n=parseInt(t.delay),a.a.isNumber(n)?n:200));var n}()}))}}}function be(e){return{restrict:"A",link:function(t,n,r){n.ready((function(){t.$apply((function(){e(r.elemReady)(t)}))}))}}}function ke(e,t,n){return{link:function(e,t,n){var r=parseInt(n.threshold)||0,i=t[0];t.on("scroll",(function(){e.$eval(n.canLoad)&&i.scrollTop+i.offsetHeight>=i.scrollHeight-r&&e.$apply(n.infiniteScroll)}))}}}function we(e){return{restrict:"A",link:function(t,n,r){n.on("focus",(function(){e.getSelection().toString()||this.setSelectionRange(0,this.value.length)}))}}}me.$inject=["$timeout"],ye.$inject=["$document"],ge.$inject=["$timeout"],be.$inject=["$parse"],ke.$inject=["$rootScope","$window","$timeout"],we.$inject=["$window"];var xe=n(22),Se=n.n(xe);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=function(e){function t(e,n,r,i,a,o,s,c,u,l,f,p){var d;return v()(this,t),(d=b()(this,w()(t).call(this,r))).$scope=e,d.$rootScope=n,d.$timeout=r,d.alertManager=i,d.archiveManager=a,d.authManager=s,d.modelManager=c,d.passcodeManager=u,d.privilegesManager=l,d.storageManager=f,d.syncManager=p,d.state={appVersion:"v"+(window.electronAppVersion||o),user:d.authManager.user,canAddPasscode:!d.authManager.isEphemeralSession(),passcodeAutoLockOptions:d.passcodeManager.getAutoLockIntervalOptions(),formData:{mergeLocal:!0,ephemeral:!1},mutable:{backupEncrypted:d.encryptedBackupsAvailable()}},d.syncStatus=d.syncManager.syncStatus,d.syncManager.getServerURL().then((function(e){d.setState({server:e,formData:_e({},d.state.formData,{url:e})})})),d.authManager.checkForSecurityUpdate().then((function(e){d.setState({securityUpdateAvailable:e})})),d.reloadAutoLockInterval(),d}var n,r,i,a,s,u,l,p,h,m,g,k,x,_,M,C;return t.$inject=["$scope","$rootScope","$timeout","alertManager","archiveManager","appVersion","authManager","modelManager","passcodeManager","privilegesManager","storageManager","syncManager"],S()(t,e),y()(t,[{key:"$onInit",value:function(){this.initProps({closeFunction:this.closeFunction})}},{key:"close",value:function(){var e=this;this.$timeout((function(){e.props.closeFunction()()}))}},{key:"encryptedBackupsAvailable",value:function(){return!(null==this.authManager.user)||this.passcodeManager.hasPasscode()}},{key:"submitMfaForm",value:function(){var e=E()({},this.state.formData.mfa.payload.mfa_key,this.state.formData.userMfaCode);this.login(e)}},{key:"blurAuthFields",value:function(){for(var e=0,t=["email","password","password_conf"];e<t.length;e++){var n=t[e],r=document.getElementsByName(n)[0];r&&r.blur()}}},{key:"submitAuthForm",value:function(){this.state.formData.email&&this.state.formData.user_password&&(this.blurAuthFields(),this.state.formData.showLogin?this.login():this.register())}},{key:"setFormDataState",value:(C=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.setState({formData:_e({},this.state.formData,{},t)}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"login",value:(M=d()(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.syncManager.lockSyncing(),e.next=3,this.setFormDataState({status:"Generating Login Keys...",authenticating:!0});case 3:return e.next=5,this.authManager.login(this.state.formData.url,this.state.formData.email,this.state.formData.user_password,this.state.formData.ephemeral,this.state.formData.strictSignin,t);case 5:if(!(n=e.sent)||n.error){e.next=14;break}return this.setFormDataState({user_password:null}),e.next=11,this.onAuthSuccess();case 11:return this.syncManager.unlockSyncing(),this.syncManager.sync({performIntegrityCheck:!0}),e.abrupt("return");case 14:return this.syncManager.unlockSyncing(),e.next=17,this.setFormDataState({status:null});case 17:if("mfa-required"!==(r=n?n.error:{message:"An unknown error occured."}).tag&&"mfa-invalid"!==r.tag){e.next=23;break}return e.next=21,this.setFormDataState({showLogin:!1,mfa:r});case 21:e.next=26;break;case 23:return e.next=25,this.setFormDataState({showLogin:!0,mfa:null});case 25:r.message&&this.alertManager.alert({text:r.message});case 26:return e.next=28,this.setFormDataState({authenticating:!1});case 28:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"register",value:(_=d()(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.formData.password_conf===this.state.formData.user_password){e.next=4;break}return this.alertManager.alert({text:"The two passwords you entered do not match. Please try again."}),e.abrupt("return");case 4:return e.next=6,this.setFormDataState({confirmPassword:!1,status:"Generating Account Keys...",authenticating:!0});case 6:return e.next=8,this.authManager.register(this.state.formData.url,this.state.formData.email,this.state.formData.user_password,this.state.formData.ephemeral);case 8:if((t=e.sent)&&!t.error){e.next=18;break}return e.next=12,this.setFormDataState({status:null});case 12:return n=t?t.error:{message:"An unknown error occured."},e.next=15,this.setFormDataState({authenticating:!1});case 15:this.alertManager.alert({text:n.message}),e.next=21;break;case 18:return e.next=20,this.onAuthSuccess();case 20:this.syncManager.sync();case 21:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"mergeLocalChanged",value:function(){var e=this;this.state.formData.mergeLocal||this.alertManager.confirm({text:"Unchecking this option means any of the notes you have written while you were signed out will be deleted. Are you sure you want to discard these notes?",destructive:!0,onCancel:function(){e.setFormDataState({mergeLocal:!0})}})}},{key:"onAuthSuccess",value:(x=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.formData.mergeLocal){e.next=6;break}return this.$rootScope.$broadcast("major-data-change"),e.next=4,this.clearDatabaseAndRewriteAllItems({alternateUuids:!0});case 4:e.next=9;break;case 6:return this.modelManager.removeAllItemsFromMemory(),e.next=9,this.storageManager.clearAllModels();case 9:return e.next=11,this.setFormDataState({authenticating:!1});case 11:this.syncManager.refreshErroredItems(),this.close();case 13:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"openPasswordWizard",value:function(e){this.close(),this.authManager.presentPasswordWizard(e)}},{key:"openPrivilegesModal",value:(k=d()(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.close(),t=function(){n.privilegesManager.presentPrivilegesManagementModal()},e.next=4,this.privilegesManager.actionRequiresPrivilege($.ActionManagePrivileges);case 4:e.sent?this.privilegesManager.presentPrivilegesModal($.ActionManagePrivileges,(function(){t()})):t();case 6:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"clearDatabaseAndRewriteAllItems",value:(g=d()(f.a.mark((function e(){var t,n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=t.alternateUuids,e.next=3,this.storageManager.clearAllModels();case 3:return e.next=5,this.syncManager.markAllItemsDirtyAndSaveOffline(n);case 5:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"destroyLocalData",value:function(){var e,t=this;this.alertManager.confirm({text:"Are you sure you want to end your session? This will delete all local items and extensions.",destructive:!0,onConfirm:(e=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.authManager.signout(!0);case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})}},{key:"submitImportPassword",value:(m=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.performImport(this.state.importData.data,this.state.importData.password);case 2:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"readFile",value:(h=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(t){try{var n=JSON.parse(t.target.result);e(n)}catch(t){this.alertManager.alert({text:"Unable to open file. Ensure it is a proper JSON file and try again."})}},r.readAsText(t)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"importFileSelected",value:(p=d()(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=d()(f.a.mark((function e(){var n,i,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[0],e.next=3,r.readFile(n);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!i.auth_params){e.next=13;break}return e.next=9,r.setState({importData:_e({},r.state.importData,{requestPassword:!0,data:i})});case 9:(a=document.getElementById("import-password-request"))&&a.scrollIntoView(!1),e.next=15;break;case 13:return e.next=15,r.performImport(i,null);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,this.privilegesManager.actionRequiresPrivilege($.ActionManageBackups);case 3:e.sent?this.privilegesManager.presentPrivilegesModal($.ActionManageBackups,n):n();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"performImport",value:(l=d()(f.a.mark((function e(t,n){var r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({importData:_e({},this.state.importData,{loading:!0})});case 2:return e.next=4,this.importJSONData(t,n);case 4:r=e.sent,this.setState({importData:null}),r>0?(i=N({errorCount:r}),this.alertManager.alert({text:i})):this.alertManager.alert({text:"Your data has been successfully imported."});case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"importJSONData",value:(u=d()(f.a.mark((function e(t,n){var r,i,a,s,c,u,l,p,d,h,v,m,y,g,b,k;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,!t.auth_params){e.next=36;break}return e.next=4,o.protocolManager.computeEncryptionKeysForUser(n,t.auth_params);case 4:return i=e.sent,e.prev=5,e.next=9,o.protocolManager.decryptMultipleItems(t.items,i,!1);case 9:for(a=[],s=!0,c=!1,u=void 0,e.prev=13,l=t.items[Symbol.iterator]();!(s=(p=l.next()).done);s=!0)(d=p.value).enc_item_key=null,d.auth_hash=null,d.errorDecrypting?r++:a.push(d);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),c=!0,u=e.t0;case 21:e.prev=21,e.prev=22,s||null==l.return||l.return();case 24:if(e.prev=24,!c){e.next=27;break}throw u;case 27:return e.finish(24);case 28:return e.finish(21);case 29:t.items=a,e.next=36;break;case 32:return e.prev=32,e.t1=e.catch(5),this.alertManager.alert({text:"There was an error decrypting your items. Make sure the password you entered is correct and try again."}),e.abrupt("return");case 36:return e.next=38,this.modelManager.importItems(t.items);case 38:for(h=e.sent,v=!0,m=!1,y=void 0,e.prev=42,g=h[Symbol.iterator]();!(v=(b=g.next()).done);v=!0)"SN|Component"===(k=b.value).content_type&&(k.active=!1);e.next=50;break;case 46:e.prev=46,e.t2=e.catch(42),m=!0,y=e.t2;case 50:e.prev=50,e.prev=51,v||null==g.return||g.return();case 53:if(e.prev=53,!m){e.next=56;break}throw y;case 56:return e.finish(53);case 57:return e.finish(50);case 58:return this.syncManager.sync(),e.abrupt("return",r);case 60:case"end":return e.stop()}}),e,this,[[5,32],[13,17,21,29],[22,,24,28],[42,46,50,58],[51,,53,57]])}))),function(e,t){return u.apply(this,arguments)})},{key:"downloadDataArchive",value:(s=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.archiveManager.downloadBackup(this.state.mutable.backupEncrypted);case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"notesAndTagsCount",value:function(){return this.modelManager.allItemsMatchingTypes(["Note","Tag"]).length}},{key:"encryptionStatusForNotes",value:function(){var e=this.notesAndTagsCount();return e+"/"+e+" notes and tags encrypted"}},{key:"encryptionEnabled",value:function(){return this.passcodeManager.hasPasscode()||!this.authManager.offline()}},{key:"encryptionSource",value:function(){return this.authManager.offline()?this.passcodeManager.hasPasscode()?"Local Passcode":null:"Account keys"}},{key:"encryptionStatusString",value:function(){return this.authManager.offline()?this.passcodeManager.hasPasscode()?"Encryption is enabled. Your data is encrypted using your passcode before it is saved to your device storage.":"Encryption is not enabled. Sign in, register, or add a passcode lock to enable encryption.":"End-to-end encryption is enabled. Your data is encrypted on your device first, then synced to your private cloud."}},{key:"reloadAutoLockInterval",value:(a=d()(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.passcodeManager.getAutoLockInterval();case 2:t=e.sent,this.setState({selectedAutoLockInterval:t});case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"selectAutoLockInterval",value:(i=d()(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.passcodeManager.setAutoLockInterval(t);case 2:r.reloadAutoLockInterval();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,this.privilegesManager.actionRequiresPrivilege($.ActionManagePasscode);case 3:e.sent?this.privilegesManager.presentPrivilegesModal($.ActionManagePasscode,(function(){n()})):n();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"hidePasswordForm",value:function(){this.setFormDataState({showLogin:!1,showRegister:!1,user_password:null,password_conf:null})}},{key:"hasPasscode",value:function(){return this.passcodeManager.hasPasscode()}},{key:"addPasscodeClicked",value:function(){this.setFormDataState({showPasscodeForm:!0})}},{key:"submitPasscodeForm",value:function(){var e=this,t=this.state.formData.passcode;t===this.state.formData.confirmPasscode?(this.state.formData.changingPasscode?this.passcodeManager.changePasscode.bind(this.passcodeManager):this.passcodeManager.setPasscode.bind(this.passcodeManager))(t,d()(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setFormDataState({passcode:null,confirmPasscode:null,showPasscodeForm:!1});case 2:return t.next=4,e.authManager.offline();case 4:if(!t.sent){t.next=7;break}e.$rootScope.$broadcast("major-data-change"),e.clearDatabaseAndRewriteAllItems();case 7:case"end":return t.stop()}}),t)})))):this.alertManager.alert({text:"The two passcodes you entered do not match. Please try again."})}},{key:"changePasscodePressed",value:(r=d()(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){n.state.formData.changingPasscode=!0,n.addPasscodeClicked()},e.next=3,this.privilegesManager.actionRequiresPrivilege($.ActionManagePasscode);case 3:e.sent?this.privilegesManager.presentPrivilegesModal($.ActionManagePasscode,t):t();case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"removePasscodePressed",value:(n=d()(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e="Are you sure you want to remove your local passcode?";!n.authManager.offline()||(e+=" This will remove encryption from your local data."),n.alertManager.confirm({text:e,destructive:!0,onConfirm:function(){n.passcodeManager.clearPasscode(),n.authManager.offline()&&n.syncManager.markAllItemsDirtyAndSaveOffline()}})},e.next=3,this.privilegesManager.actionRequiresPrivilege($.ActionManagePasscode);case 3:e.sent?this.privilegesManager.presentPrivilegesModal($.ActionManagePasscode,t):t();case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"isDesktopApplication",value:function(){return c()}}]),t}(C),Ce=function e(){v()(this,e),this.restrict="E",this.template=Se.a,this.controller=Me,this.controllerAs="self",this.bindToController=!0,this.scope={closeFunction:"&"}},Ae=n(23),Oe=n.n(Ae),Ie=function(e){function t(e,n,r){var i;return v()(this,t),(i=b()(this,w()(t).call(this,n))).$timeout=n,i.actionsManager=r,i}var n,r;return t.$inject=["$scope","$timeout","actionsManager"],S()(t,e),y()(t,[{key:"$onInit",value:function(){this.initProps({item:this.item}),this.loadExtensions()}},{key:"loadExtensions",value:(r=d()(f.a.mark((function e(){var t,n,r,i,a,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.actionsManager.extensions.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})),n=!0,r=!1,i=void 0,e.prev=4,a=t[Symbol.iterator]();case 6:if(n=(o=a.next()).done){e.next=15;break}return(s=o.value).loading=!0,e.next=11,this.actionsManager.loadExtensionInContextOfItem(s,this.props.item);case 11:s.loading=!1;case 12:n=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r=!0,i=e.t0;case 21:e.prev=21,e.prev=22,n||null==a.return||a.return();case 24:if(e.prev=24,!r){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:this.setState({extensions:t});case 30:case"end":return e.stop()}}),e,this,[[4,17,21,29],[22,,24,28]])}))),function(){return r.apply(this,arguments)})},{key:"executeAction",value:(n=d()(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("nested"!==t.verb){e.next=3;break}return t.subrows?t.subrows=null:t.subrows=this.subRowsForAction(t,n),e.abrupt("return");case 3:return t.running=!0,e.next=6,this.actionsManager.executeAction(t,n,this.props.item);case 6:if(r=e.sent,!t.error){e.next=9;break}return e.abrupt("return");case 9:return t.running=!1,this.handleActionResult(t,r),e.next=13,this.actionsManager.loadExtensionInContextOfItem(n,this.props.item);case 13:this.setState({extensions:this.state.extensions});case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"handleActionResult",value:function(e,t){switch(e.verb){case"render":var n=t.item;this.actionsManager.presentRevisionPreviewModal(n.uuid,n.content)}}},{key:"subRowsForAction",value:function(e,t){var n=this;return e.subactions?e.subactions.map((function(r){return{onClick:function(){n.executeAction(r,t,e)},label:r.label,subtitle:r.desc,spinnerClass:r.running?"info":null}})):null}}]),t}(C),Ee=function e(){v()(this,e),this.restrict="E",this.template=Oe.a,this.replace=!0,this.controller=Ie,this.controllerAs="self",this.bindToController=!0,this.scope={item:"="}},De=n(24),Re=n.n(De),Pe=function(){function e(t,n){v()(this,e),this.$element=n,this.$scope=t}return e.$inject=["$scope","$element"],y()(e,[{key:"dismiss",value:function(e){this.$element.remove(),this.$scope.$destroy(),this.onDismiss&&this.onDismiss()&&this.onDismiss()(this.component),e&&e()}}]),e}(),Te=function e(){v()(this,e),this.restrict="E",this.template=Re.a,this.controller=Pe,this.controllerAs="ctrl",this.bindToController=!0,this.scope={show:"=",component:"=",callback:"=",onDismiss:"&"}},je=n(25),Fe=n.n(je),Ne=function(){function e(t,n,r,i,a,o){var s=this;v()(this,e),this.$rootScope=n,this.$timeout=r,this.themeManager=o,this.desktopManager=a,this.componentManager=i,this.componentValid=!0,this.destroyed=!1,t.$watch("ctrl.component",(function(e,t){s.componentValueDidSet(e,t)})),t.$on("ext-reload-complete",(function(){s.reloadStatus(!1)})),t.$on("$destroy",(function(){s.destroyed=!0,s.destroy()}))}var t,n,r;return e.$inject=["$scope","$rootScope","$timeout","componentManager","desktopManager","themeManager"],y()(e,[{key:"$onInit",value:function(){this.registerComponentHandlers(),this.registerPackageUpdateObserver()}},{key:"registerPackageUpdateObserver",value:function(){var e=this;this.updateObserver=this.desktopManager.registerUpdateObserver((function(t){t===e.component&&t.active&&e.reloadComponent()}))}},{key:"registerComponentHandlers",value:function(){var e=this;this.themeHandlerIdentifier="component-view-"+Math.random(),this.componentManager.registerHandler({identifier:this.themeHandlerIdentifier,areas:["themes"],activationHandler:function(t){e.reloadThemeStatus()}}),this.identifier="component-view-"+Math.random(),this.componentManager.registerHandler({identifier:this.identifier,areas:[this.component.area],activationHandler:function(t){t===e.component&&e.$timeout((function(){e.handleActivation()}))},actionHandler:function(t,n,r){"set-size"===n&&e.componentManager.handleSetSizeEvent(t,r)}})}},{key:"onVisibilityChange",value:function(){"hidden"!==document.visibilityState&&this.issueLoading&&this.reloadComponent()}},{key:"reloadComponent",value:(r=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.componentValid=!1,e.next=3,this.componentManager.reloadComponent(this.component);case 3:if(!this.destroyed){e.next=5;break}return e.abrupt("return");case 5:this.reloadStatus();case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"reloadStatus",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.reloading=!0;var n=this.component,r=this.componentValid,i=n.offlineOnly&&!c(),a=c()?!n.local_url&&!n.hasValidHostedUrl():!n.hasValidHostedUrl();this.expired=n.valid_until&&n.valid_until<=new Date,n.lockReadonly||(n.readonly=this.expired),this.componentValid=!i&&!a,this.componentValid||(this.loading=!1),this.error=i?"offline-restricted":a?"url-missing":null,this.componentValid!==r&&this.componentValid&&this.componentManager.reloadComponent(n,!0),this.expired&&t&&this.$rootScope.$broadcast("reload-ext-dat"),this.reloadThemeStatus(),this.$timeout((function(){e.reloading=!1}),500)}},{key:"handleActivation",value:function(){var e=this;if(this.component.active){var t=this.componentManager.iframeForComponent(this.component);t&&(this.loading=!0,this.loadTimeout&&this.$timeout.cancel(this.loadTimeout),this.loadTimeout=this.$timeout((function(){e.handleIframeLoadTimeout()}),4e3),t.onload=function(n){e.handleIframeLoad(t)})}}},{key:"handleIframeLoadTimeout",value:(n=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loading&&(this.loading=!1,this.issueLoading=!0,this.didAttemptReload?document.addEventListener("visibilitychange",this.onVisibilityChange.bind(this)):(this.didAttemptReload=!0,this.reloadComponent()));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handleIframeLoad",value:(t=d()(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,c())try{t.contentWindow.origin&&"null"!==t.contentWindow.origin||(n=!0)}catch(e){}return this.$timeout.cancel(this.loadTimeout),e.next=5,this.componentManager.registerComponentWindow(this.component,t.contentWindow);case 5:this.$timeout((function(){r.loading=!1,r.issueLoading=!!n,r.onLoad&&r.onLoad(r.component)}),7);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"componentValueDidSet",value:function(e,t){t&&e!==t&&this.componentManager.deactivateComponent(t,!0),e&&(this.componentManager.activateComponent(e,!0),this.reloadStatus())}},{key:"reloadThemeStatus",value:function(){this.component.acceptsThemes()||(this.themeManager.hasActiveTheme()?this.dismissedNoThemesMessage||(this.showNoThemesMessage=!0):this.showNoThemesMessage=!1)}},{key:"dismissNoThemesMessage",value:function(){this.showNoThemesMessage=!1,this.dismissedNoThemesMessage=!0}},{key:"disableActiveTheme",value:function(){this.themeManager.deactivateAllThemes(),this.dismissNoThemesMessage()}},{key:"getUrl",value:function(){var e=this.componentManager.urlForComponent(this.component);return this.component.runningLocally=e===this.component.local_url,e}},{key:"destroy",value:function(){if(this.componentManager.deregisterHandler(this.themeHandlerIdentifier),this.componentManager.deregisterHandler(this.identifier),this.component&&!this.manualDealloc){this.componentManager.deactivateComponent(this.component,!0)}this.desktopManager.deregisterUpdateObserver(this.updateObserver),document.removeEventListener("visibilitychange",this.onVisibilityChange.bind(this))}}]),e}(),Le=function e(){v()(this,e),this.restrict="E",this.template=Fe.a,this.scope={component:"=",onLoad:"=?",manualDealloc:"=?"},this.controller=Ne,this.controllerAs="ctrl",this.bindToController=!0},Ue=n(26),Be=n.n(Ue),He=function(){function e(t,n,r,i,a){v()(this,e),this.$element=t,this.alertManager=n,this.archiveManager=r,this.modelManager=i,this.syncManager=a}return e.$inject=["$element","alertManager","archiveManager","modelManager","syncManager"],y()(e,[{key:"$onInit",value:function(){this.contentType=this.item1.content_type,this.item1Content=this.createContentString(this.item1),this.item2Content=this.createContentString(this.item2)}},{key:"createContentString",value:function(e){var t=Object.assign({created_at:e.created_at,updated_at:e.updated_at},e.content);return JSON.stringify(t,null,2)}},{key:"keepItem1",value:function(){var e=this;this.alertManager.confirm({text:"Are you sure you want to delete the item on the right?",destructive:!0,onConfirm:function(){e.modelManager.setItemToBeDeleted(e.item2),e.syncManager.sync().then((function(){e.applyCallback()})),e.dismiss()}})}},{key:"keepItem2",value:function(){var e=this;this.alertManager.confirm({text:"Are you sure you want to delete the item on the left?",destructive:!0,onConfirm:function(){e.modelManager.setItemToBeDeleted(e.item1),e.syncManager.sync().then((function(){e.applyCallback()})),e.dismiss()}})}},{key:"keepBoth",value:function(){this.applyCallback(),this.dismiss()}},{key:"export",value:function(){this.archiveManager.downloadBackupOfItems([this.item1,this.item2],!0)}},{key:"applyCallback",value:function(){this.callback&&this.callback()}},{key:"dismiss",value:function(){this.$element.remove()}}]),e}(),ze=function e(){v()(this,e),this.restrict="E",this.template=Be.a,this.controller=He,this.controllerAs="ctrl",this.bindToController=!0,this.scope={item1:"=",item2:"=",callback:"="}},Ve=n(27),We=n.n(Ve),Ke=function(e){function t(e,n,r,i){var a;return v()(this,t),(a=b()(this,w()(t).call(this,e))).$timeout=e,a.componentManager=n,a.modelManager=r,a.syncManager=i,a.state={isDesktop:c()},a}return t.$inject=["$timeout","componentManager","modelManager","syncManager"],S()(t,e),y()(t,[{key:"$onInit",value:function(){var e=this.componentManager.componentsForArea("editor-editor").sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})),t=e.filter((function(e){return e.isDefaultEditor()}))[0];this.setState({editors:e,defaultEditor:t})}},{key:"selectComponent",value:function(e){var t=this;e&&e.content.conflict_of&&(e.content.conflict_of=null,this.modelManager.setItemDirty(e,!0),this.syncManager.sync()),this.$timeout((function(){t.callback()(e)}))}},{key:"toggleDefaultForEditor",value:function(e){this.state.defaultEditor===e?this.removeEditorDefault(e):this.makeEditorDefault(e)}},{key:"offlineAvailableForComponent",value:function(e){return e.local_url&&this.state.isDesktop}},{key:"makeEditorDefault",value:function(e){var t=this.componentManager.componentsForArea("editor-editor").filter((function(e){return e.isDefaultEditor()}))[0];t&&(t.setAppDataItem("defaultEditor",!1),this.modelManager.setItemDirty(t)),e.setAppDataItem("defaultEditor",!0),this.modelManager.setItemDirty(e),this.syncManager.sync(),this.setState({defaultEditor:e})}},{key:"removeEditorDefault",value:function(e){e.setAppDataItem("defaultEditor",!1),this.modelManager.setItemDirty(e),this.syncManager.sync(),this.setState({defaultEditor:null})}},{key:"shouldDisplayRunningLocallyLabel",value:function(e){return!!e.runningLocally&&e===this.selectedEditor}}]),t}(C),qe=function e(){v()(this,e),this.restrict="E",this.template=We.a,this.controller=Ke,this.controllerAs="self",this.bindToController=!0,this.scope={callback:"&",selectedEditor:"=",currentItem:"="}},Je=n(28),Ge=n.n(Je),Ye=function(){function e(t,n){v()(this,e),this.$element=n,this.formData={}}return e.$inject=["$scope","$element"],y()(e,[{key:"dismiss",value:function(){this.$element.remove(),this.$scope.$destroy()}},{key:"submit",value:function(){this.callback()(this.formData.input),this.dismiss()}}]),e}(),Ze=function e(){v()(this,e),this.restrict="E",this.template=Ge.a,this.controller=Ye,this.controllerAs="ctrl",this.bindToController=!0,this.scope={type:"=",title:"=",message:"=",placeholder:"=",callback:"&"}},Xe=n(29),Qe=n.n(Xe),et=function(){function e(){v()(this,e)}return y()(e,[{key:"onClick",value:function(e){this.disabled||(e.stopPropagation(),this.action())}},{key:"clickAccessoryButton",value:function(e){this.disabled||(e.stopPropagation(),this.buttonAction())}}]),e}(),tt=function e(){v()(this,e),this.restrict="E",this.transclude=!0,this.template=Qe.a,this.controller=et,this.controllerAs="ctrl",this.bindToController=!0,this.scope={action:"&",buttonAction:"&",buttonClass:"=",buttonText:"=",desc:"=",disabled:"=",circle:"=",circleAlign:"=",faded:"=",hasButton:"=",label:"=",spinnerClass:"=",stylekitClass:"=",subRows:"=",subtitle:"="}},nt=n(30),rt=n.n(nt),it=function(){function e(t,n,r,i){v()(this,e),this.$compile=t,this.$element=n,this.$scope=r,this.$timeout=i}return e.$inject=["$compile","$element","$scope","$timeout"],y()(e,[{key:"$onInit",value:function(){this.configureControl(),this.configureDefaults(),this.addDoubleClickHandler(),this.reloadDefaultValues(),this.addMouseDownListener(),this.addMouseMoveListener(),this.addMouseUpListener()}},{key:"configureControl",value:function(){var e=this;this.control.setWidth=function(t){e.setWidth(t,!0)},this.control.setLeft=function(t){e.setLeft(t)},this.control.flash=function(){e.flash()},this.control.isCollapsed=function(){return e.isCollapsed()}}},{key:"configureDefaults",value:function(){this.panel=document.getElementById(this.panelId),this.panel||console.error("Panel not found for",this.panelId),this.resizerColumn=this.$element[0],this.currentMinWidth=this.minWidth||this.resizerColumn.offsetWidth,this.pressed=!1,this.startWidth=this.panel.scrollWidth,this.lastDownX=0,this.collapsed=!1,this.lastWidth=this.startWidth,this.startLeft=this.panel.offsetLeft,this.lastLeft=this.startLeft,this.appFrame=null,this.widthBeforeLastDblClick=0,"right"===this.property&&this.configureRightPanel(),this.alwaysVisible&&this.resizerColumn.classList.add("always-visible"),this.hoverable&&this.resizerColumn.classList.add("hoverable")}},{key:"configureRightPanel",value:function(){var e,t,n,r,i=this,a=(e=function(e){i.reloadDefaultValues(),i.handleWidthEvent(),i.$timeout((function(){i.finishSettingWidth()}))},t=250,function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)});window.addEventListener("resize",a),this.$scope.$on("$destroy",(function(){window.removeEventListener("resize",a)}))}},{key:"getParentRect",value:function(){return this.panel.parentNode.getBoundingClientRect()}},{key:"reloadDefaultValues",value:function(){this.startWidth=this.isAtMaxWidth()?this.getParentRect().width:this.panel.scrollWidth,this.lastWidth=this.startWidth,this.appFrame=document.getElementById("app").getBoundingClientRect()}},{key:"addDoubleClickHandler",value:function(){var e=this;this.resizerColumn.ondblclick=function(){e.$timeout((function(){var t=e.isCollapsed();t?e.setWidth(e.widthBeforeLastDblClick||e.defaultWidth):(e.widthBeforeLastDblClick=e.lastWidth,e.setWidth(e.currentMinWidth)),e.finishSettingWidth();var n=!t;e.onResizeFinish()(e.lastWidth,e.lastLeft,e.isAtMaxWidth(),n)}))}}},{key:"addMouseDownListener",value:function(){var e=this;this.resizerColumn.addEventListener("mousedown",(function(t){e.addInvisibleOverlay(),e.pressed=!0,e.lastDownX=t.clientX,e.startWidth=e.panel.scrollWidth,e.startLeft=e.panel.offsetLeft,e.panel.classList.add("no-selection"),e.hoverable&&e.resizerColumn.classList.add("dragging")}))}},{key:"addMouseMoveListener",value:function(){var e=this;document.addEventListener("mousemove",(function(t){e.pressed&&(t.preventDefault(),e.property&&"left"===e.property?e.handleLeftEvent(t):e.handleWidthEvent(t))}))}},{key:"handleWidthEvent",value:function(e){var t;e?t=e.clientX:(t=0,this.lastDownX=0);var n=t-this.lastDownX,r=this.startWidth+n;this.setWidth(r,!1),this.onResize()&&this.onResize()(this.lastWidth,this.panel)}},{key:"handleLeftEvent",value:function(e){var t=this.panel.getBoundingClientRect(),n=(e.clientX||t.x)-this.lastDownX,r=this.startLeft+n;r<0&&(r=0,n=-this.startLeft);var i=this.getParentRect(),a=this.startWidth-n;a<this.currentMinWidth&&(a=this.currentMinWidth),a>i.width&&(a=i.width),r+a>i.width&&(r=i.width-a),this.setLeft(r,!1),this.setWidth(a,!1)}},{key:"addMouseUpListener",value:function(){var e=this;document.addEventListener("mouseup",(function(t){if(e.removeInvisibleOverlay(),e.pressed){e.pressed=!1,e.resizerColumn.classList.remove("dragging"),e.panel.classList.remove("no-selection");var n=e.isAtMaxWidth();e.onResizeFinish&&e.onResizeFinish()(e.lastWidth,e.lastLeft,n,e.isCollapsed()),e.finishSettingWidth()}}))}},{key:"isAtMaxWidth",value:function(){return Math.round(this.lastWidth+this.lastLeft)===Math.round(this.getParentRect().width)}},{key:"isCollapsed",value:function(){return this.lastWidth<=this.currentMinWidth}},{key:"setWidth",value:function(e,t){e<this.currentMinWidth&&(e=this.currentMinWidth);var n=this.getParentRect();e>n.width&&(e=n.width);var r=this.appFrame.width-this.panel.getBoundingClientRect().x;e>r&&(e=r),Math.round(e+this.lastLeft)===Math.round(n.width)?(this.panel.style.width="calc(100% - ".concat(this.lastLeft,"px)"),this.panel.style.flexBasis="calc(100% - ".concat(this.lastLeft,"px)")):(this.panel.style.flexBasis=e+"px",this.panel.style.width=e+"px"),this.lastWidth=e,t&&this.finishSettingWidth()}},{key:"setLeft",value:function(e){this.panel.style.left=e+"px",this.lastLeft=e}},{key:"finishSettingWidth",value:function(){this.collapsable&&(this.collapsed=this.isCollapsed(),this.collapsed?this.resizerColumn.classList.add("collapsed"):this.resizerColumn.classList.remove("collapsed"))}},{key:"addInvisibleOverlay",value:function(){this.overlay||(this.overlay=this.$compile("<div id='resizer-overlay'></div>")(this.$scope),a.a.element(document.body).prepend(this.overlay))}},{key:"removeInvisibleOverlay",value:function(){this.overlay&&(this.overlay.remove(),this.overlay=null)}},{key:"flash",value:function(){var e=this;this.resizerColumn.classList.add("animate-opacity"),this.$timeout((function(){e.resizerColumn.classList.remove("animate-opacity")}),3e3)}}]),e}(),at=function e(){v()(this,e),this.restrict="E",this.template=rt.a,this.controller=it,this.controllerAs="ctrl",this.bindToController=!0,this.scope={alwaysVisible:"=",collapsable:"=",control:"=",defaultWidth:"=",hoverable:"=",index:"=",minWidth:"=",onResize:"&",onResizeFinish:"&",panelId:"=",property:"="}},ot=n(31),st=n.n(ot),ct=0,ut=1,lt=2,ft=3,pt=4,dt=5,ht=function(){function e(t,n,r,i,a,o,s,c){v()(this,e),this.$element=t,this.$timeout=r,this.$scope=n,this.alertManager=i,this.archiveManager=a,this.authManager=o,this.modelManager=s,this.syncManager=c,this.registerWindowUnloadStopper()}var t,n,r,i,a,s;return e.$inject=["$element","$scope","$timeout","alertManager","archiveManager","authManager","modelManager","syncManager"],y()(e,[{key:"$onInit",value:function(){this.syncStatus=this.syncManager.syncStatus,this.formData={},this.configureDefaults()}},{key:"configureDefaults",value:function(){"change-pw"===this.type?(this.title="Change Password",this.changePassword=!0):"upgrade-security"===this.type&&(this.title="Security Update",this.securityUpdate=!0),this.continueTitle="Continue",this.step=ct}},{key:"registerWindowUnloadStopper",value:function(){window.onbeforeunload=function(e){return!0},this.$scope.$on("$destroy",(function(){window.onbeforeunload=null}))}},{key:"titleForStep",value:function(e){switch(e){case ut:return"Download a backup of your data";case lt:return"Sign out of all your devices";case ft:return this.changePassword?"Password information":"Enter your current password";case pt:return"Encrypt and sync data with new keys";case dt:return"Sign back in to your devices";default:return null}}},{key:"nextStep",value:(s=d()(f.a.mark((function e(){var t,n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lockContinue&&!this.isContinuing){e.next=2;break}return e.abrupt("return");case 2:if(this.isContinuing=!0,this.step!==dt){e.next=6;break}return this.dismiss(),e.abrupt("return");case 6:if(t=function(){r.step++,r.initializeStep(r.step),r.isContinuing=!1},!(n=this.preprocessorForStep(this.step))){e.next=13;break}return e.next=11,n().then((function(e){e?t():r.$timeout((function(){r.isContinuing=!1}))})).catch((function(){r.isContinuing=!1}));case 11:e.next=14;break;case 13:t();case 14:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"preprocessorForStep",value:function(e){var t=this;if(e===ft)return d()(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.showSpinner=!0,t.continueTitle="Generating Keys...",e.next=4,t.validateCurrentPassword();case 4:return n=e.sent,t.showSpinner=!1,t.continueTitle="Continue",e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))}},{key:"initializeStep",value:(a=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==pt){e.next=5;break}return e.next=3,this.initializeSyncingStep();case 3:e.next=6;break;case 5:t===dt&&(this.continueTitle="Finish");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"initializeSyncingStep",value:(i=d()(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lockContinue=!0,this.formData.status="Processing encryption keys...",this.formData.processing=!0,e.next=5,this.processPasswordChange();case 5:if(t=e.sent,this.formData.statusError=!t,this.formData.processing=t,t){e.next=11;break}return this.formData.status="Unable to process your password. Please try again.",e.abrupt("return");case 11:return this.formData.status="Encrypting and syncing data with new keys...",e.next=14,this.resyncData();case 14:n=e.sent,this.formData.statusError=!n,this.formData.processing=!n,n?(this.lockContinue=!1,this.changePassword?this.formData.status="Successfully changed password and synced all items.":this.securityUpdate&&(this.formData.status="Successfully performed security update and synced all items.")):this.formData.status=L;case 18:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"validateCurrentPassword",value:(r=d()(f.a.mark((function e(){var t,n,r,i,a,s,c,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.formData.currentPassword,n=this.securityUpdate?t:this.formData.newPassword,t&&0!==t.length){e.next=5;break}return this.alertManager.alert({text:"Please enter your current password."}),e.abrupt("return",!1);case 5:if(!this.changePassword){e.next=13;break}if(n&&0!==n.length){e.next=9;break}return this.alertManager.alert({text:"Please enter a new password."}),e.abrupt("return",!1);case 9:if(n===this.formData.newPasswordConfirmation){e.next=13;break}return this.alertManager.alert({text:"Your new password does not match its confirmation."}),this.formData.status=null,e.abrupt("return",!1);case 13:if(this.authManager.user.email){e.next=17;break}return this.alertManager.alert({text:"We don't have your email stored. Please log out then log back in to fix this issue."}),this.formData.status=null,e.abrupt("return",!1);case 17:if(r=this.authManager.getMinPasswordLength(),this.securityUpdate||!(n.length<r)){e.next=22;break}return i="Your password must be at least ".concat(r," characters in length. For your security, please choose a longer password or, ideally, a passphrase, and try again."),this.alertManager.alert({text:i}),e.abrupt("return",!1);case 22:return e.next=24,this.authManager.getAuthParams();case 24:return a=e.sent,s=this.formData.currentPassword,e.next=28,o.protocolManager.computeEncryptionKeysForUser(s,a);case 28:return c=e.sent,e.t0=c.mk,e.next=32,this.authManager.keys();case 32:return e.t1=e.sent.mk,(u=e.t0===e.t1)?this.currentServerPw=c.pw:this.alertManager.alert({text:"The current password you entered is not correct. Please try again."}),e.abrupt("return",u);case 36:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"resyncData",value:(n=d()(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modelManager.setAllItemsDirty();case 2:return e.next=4,this.syncManager.sync();case 4:if((t=e.sent)&&!t.error){e.next=10;break}return this.alertManager.alert({text:L}),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"processPasswordChange",value:(t=d()(f.a.mark((function e(){var t,n,r,i,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.securityUpdate?this.formData.currentPassword:this.formData.newPassword,n=this.currentServerPw,e.next=4,o.protocolManager.generateInitialKeysAndAuthParamsForUser(this.authManager.user.email,t);case 4:return r=e.sent,i=r.keys,a=r.authParams,e.next=9,this.syncManager.sync();case 9:return e.t0=this.authManager,e.next=12,this.syncManager.getServerURL();case 12:return e.t1=e.sent,e.t2=this.authManager.user.email,e.t3=n,e.t4=i,e.t5=a,e.next=19,e.t0.changePassword.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5);case 19:if(!(s=e.sent).error){e.next=25;break}return this.alertManager.alert({text:s.error.message?s.error.message:"There was an error changing your password. Please try again."}),e.abrupt("return",!1);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"downloadBackup",value:function(e){this.archiveManager.downloadBackup(e)}},{key:"dismiss",value:function(){this.lockContinue?this.alertManager.alert({text:"Cannot close window until pending tasks are complete."}):(this.$element.remove(),this.$scope.$destroy())}}]),e}(),vt=function e(){v()(this,e),this.restrict="E",this.template=st.a,this.controller=ht,this.controllerAs="ctrl",this.bindToController=!0,this.scope={type:"="}},mt=n(32),yt=n.n(mt),gt=function(){function e(t){v()(this,e),this.$element=t}return e.$inject=["$element"],y()(e,[{key:"dismiss",value:function(){this.$element.remove()}},{key:"accept",value:function(){this.callback(!0),this.dismiss()}},{key:"deny",value:function(){this.callback(!1),this.dismiss()}}]),e}(),bt=function e(){v()(this,e),this.restrict="E",this.template=yt.a,this.controller=gt,this.controllerAs="ctrl",this.bindToController=!0,this.scope={show:"=",component:"=",permissionsString:"=",callback:"="}},kt=n(33),wt=n.n(kt),xt=function(){function e(t,n,r){v()(this,e),this.$element=t,this.$timeout=n,this.privilegesManager=r}var t;return e.$inject=["$element","$timeout","privilegesManager"],y()(e,[{key:"$onInit",value:function(){var e=this;this.authParameters={},this.sessionLengthOptions=this.privilegesManager.getSessionLengthOptions(),this.privilegesManager.getSelectedSessionLength().then((function(t){e.$timeout((function(){e.selectedSessionLength=t}))})),this.privilegesManager.netCredentialsForAction(this.action).then((function(t){e.$timeout((function(){e.requiredCredentials=t.sort()}))}))}},{key:"selectSessionLength",value:function(e){this.selectedSessionLength=e}},{key:"promptForCredential",value:function(e){return this.privilegesManager.displayInfoForCredential(e).prompt}},{key:"cancel",value:function(){this.dismiss(),this.onCancel&&this.onCancel()}},{key:"isCredentialInFailureState",value:function(e){return!!this.failedCredentials&&null!=this.failedCredentials.find((function(t){return t===e}))}},{key:"validate",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.requiredCredentials[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=this.authParameters[o];s&&0!==s.length||e.push(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return this.failedCredentials=e,0===e.length}},{key:"submit",value:(t=d()(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validate()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.privilegesManager.authenticateAction(this.action,this.authParameters);case 4:t=e.sent,this.$timeout((function(){t.success?(n.privilegesManager.setSessionLength(n.selectedSessionLength),n.onSuccess(),n.dismiss()):n.failedCredentials=t.failedCredentials}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dismiss",value:function(){this.$element.remove()}}]),e}(),St=function e(){v()(this,e),this.restrict="E",this.template=wt.a,this.controller=xt,this.controllerAs="ctrl",this.bindToController=!0,this.scope={action:"=",onSuccess:"=",onCancel:"="}},$t=n(34),_t=n.n($t),Mt=function(){function e(t,n,r,i,a){v()(this,e),this.$element=n,this.$timeout=t,this.privilegesManager=r,this.hasPasscode=a.hasPasscode(),this.hasAccount=!i.offline(),this.reloadPrivileges()}var t,n;return e.$inject=["$timeout","$element","privilegesManager","authManager","passcodeManager"],y()(e,[{key:"displayInfoForCredential",value:function(e){var t=this.privilegesManager.displayInfoForCredential(e);return e===$.CredentialLocalPasscode?t.availability=this.hasPasscode:e===$.CredentialAccountPassword?t.availability=this.hasAccount:t.availability=!0,t}},{key:"displayInfoForAction",value:function(e){return this.privilegesManager.displayInfoForAction(e).label}},{key:"isCredentialRequiredForAction",value:function(e,t){return!!this.privileges&&this.privileges.isCredentialRequiredForAction(e,t)}},{key:"clearSession",value:(n=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.privilegesManager.clearSession();case 2:this.reloadPrivileges();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"reloadPrivileges",value:(t=d()(f.a.mark((function e(){var t,n,r,i,a,o,s,c,u=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.availableActions=this.privilegesManager.getAvailableActions(),this.availableCredentials=this.privilegesManager.getAvailableCredentials(),e.next=4,this.privilegesManager.getSessionExpirey();case 4:for(t=e.sent,this.sessionExpirey=t.toLocaleString(),this.sessionExpired=new Date>=t,this.credentialDisplayInfo={},n=!0,r=!1,i=void 0,e.prev=11,a=this.availableCredentials[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)s=o.value,this.credentialDisplayInfo[s]=this.displayInfoForCredential(s);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),r=!0,i=e.t0;case 19:e.prev=19,e.prev=20,n||null==a.return||a.return();case 22:if(e.prev=22,!r){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.next=29,this.privilegesManager.getPrivileges();case 29:c=e.sent,this.$timeout((function(){u.privileges=c}));case 31:case"end":return e.stop()}}),e,this,[[11,15,19,27],[20,,22,26]])}))),function(){return t.apply(this,arguments)})},{key:"checkboxValueChanged",value:function(e,t){this.privileges.toggleCredentialForAction(e,t),this.privilegesManager.savePrivileges()}},{key:"cancel",value:function(){this.dismiss(),this.onCancel&&this.onCancel()}},{key:"dismiss",value:function(){this.$element.remove()}}]),e}(),Ct=function e(){v()(this,e),this.restrict="E",this.template=_t.a,this.controller=Mt,this.controllerAs="ctrl",this.bindToController=!0,this.scope={}},At=n(35),Ot=n.n(At),It=function(){function e(t,n,r,i,a,o,s){var c=this;v()(this,e),this.$element=t,this.$scope=n,this.$timeout=r,this.alertManager=i,this.componentManager=a,this.modelManager=o,this.syncManager=s,this.createNote(),this.configureEditor(),n.$on("$destroy",(function(){c.identifier&&c.componentManager.deregisterHandler(c.identifier)}))}return e.$inject=["$element","$scope","$timeout","alertManager","componentManager","modelManager","syncManager"],y()(e,[{key:"createNote",value:function(){this.note=new o.SFItem({content:this.content,content_type:"Note"})}},{key:"configureEditor",value:function(){var e=this;this.note.uuid=this.uuid;var t=this.componentManager.editorForNote(this.note);if(this.note.uuid=o.protocolManager.crypto.generateUUIDSync(),t){var n=new o.SNComponent({content:t.content});n.readonly=!0,n.lockReadonly=!0,this.identifier=n.uuid,this.componentManager.registerHandler({identifier:this.identifier,areas:["editor-editor"],contextRequestHandler:function(t){if(t===e.editor)return e.note},componentForSessionKeyHandler:function(t){if(t===e.editor.sessionKey)return e.editor}}),this.editor=n}}},{key:"restore",value:function(e){var t=this,n=function(){var n;if(e){var r=Object.assign({},t.content);r.title&&(r.title+=" (copy)"),n=t.modelManager.createItem({content_type:"Note",content:r}),t.modelManager.addItem(n)}else{var i=t.uuid;(n=t.modelManager.findItem(i)).content=Object.assign({},t.content),t.modelManager.mapResponseItemsToLocalModels([n],o.SFModelManager.MappingSourceRemoteActionRetrieved)}t.modelManager.setItemDirty(n),t.syncManager.sync(),t.dismiss()};e?n():this.alertManager.confirm({text:"Are you sure you want to replace the current note's contents with what you see in this preview?",destructive:!0,onConfirm:n})}},{key:"dismiss",value:function(){this.$element.remove(),this.$scope.$destroy()}}]),e}(),Et=function e(){v()(this,e),this.restrict="E",this.template=Ot.a,this.controller=It,this.controllerAs="ctrl",this.bindToController=!0,this.scope={uuid:"=",content:"="}},Dt=n(36),Rt=n.n(Dt),Pt=function(){function e(t,n,r,i){v()(this,e),this.$timeout=t,this.alertManager=r,this.actionsManager=n,this.sessionHistory=i,this.diskEnabled=this.sessionHistory.diskEnabled,this.autoOptimize=this.sessionHistory.autoOptimize}return e.$inject=["$timeout","actionsManager","alertManager","sessionHistory"],y()(e,[{key:"$onInit",value:function(){this.reloadHistory()}},{key:"reloadHistory",value:function(){var e=this.sessionHistory.historyForItem(this.item);this.entries=e.entries.slice(0).sort((function(e,t){return e.item.updated_at<t.item.updated_at?1:-1})),this.history=e}},{key:"openRevision",value:function(e){this.actionsManager.presentRevisionPreviewModal(e.item.uuid,e.item.content)}},{key:"classForRevision",value:function(e){var t=e.operationVector();return 0===t?"default":1===t?"success":-1===t?"danger":void 0}},{key:"clearItemHistory",value:function(){var e=this;this.alertManager.confirm({text:"Are you sure you want to delete the local session history for this note?",destructive:!0,onConfirm:function(){e.sessionHistory.clearHistoryForItem(e.item).then((function(){e.$timeout((function(){e.reloadHistory()}))}))}})}},{key:"clearAllHistory",value:function(){var e=this;this.alertManager.confirm({text:"Are you sure you want to delete the local session history for all notes?",destructive:!0,onConfirm:function(){e.sessionHistory.clearAllHistory().then((function(){e.$timeout((function(){e.reloadHistory()}))}))}})}},{key:"toggleDiskSaving",value:function(){var e=this,t=function(){e.sessionHistory.toggleDiskSaving().then((function(){e.$timeout((function(){e.diskEnabled=e.sessionHistory.diskEnabled}))}))};this.sessionHistory.diskEnabled?t():this.alertManager.confirm({text:"Are you sure you want to save history to disk? This will decrease general \n        performance, especially as you type. You are advised to disable this feature \n        if you experience any lagging.",destructive:!0,onConfirm:t})}},{key:"toggleAutoOptimize",value:function(){var e=this;this.sessionHistory.toggleAutoOptimize().then((function(){e.$timeout((function(){e.autoOptimize=e.sessionHistory.autoOptimize}))}))}}]),e}(),Tt=function e(){v()(this,e),this.restrict="E",this.template=Rt.a,this.controller=Pt,this.controllerAs="ctrl",this.bindToController=!0,this.scope={item:"="}},jt=n(37),Ft=n.n(jt),Nt=function(){function e(t,n,r){v()(this,e),this.$timeout=t,this.archiveManager=n,this.syncManager=r,this.status={}}var t;return e.$inject=["$timeout","archiveManager","syncManager"],y()(e,[{key:"downloadBackup",value:function(e){this.archiveManager.downloadBackup(e),this.status.backupFinished=!0}},{key:"skipBackup",value:function(){this.status.backupFinished=!0}},{key:"performSyncResolution",value:(t=d()(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.status.resolving=!0,e.next=3,this.syncManager.resolveOutOfSync();case 3:this.$timeout((function(){t.status.resolving=!1,t.status.attemptedResolution=!0,t.syncManager.isOutOfSync()?t.status.fail=!0:t.status.success=!0}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"close",value:function(){var e=this;this.$timeout((function(){e.closeFunction()()}))}}]),e}(),Lt=function e(){v()(this,e),this.restrict="E",this.template=Ft.a,this.controller=Nt,this.controllerAs="ctrl",this.bindToController=!0,this.scope={closeFunction:"&"}};function Ut(e){return function(t){return e.trustAsResourceUrl(t)}}Ut.$inject=["$sce"];var Bt=function(){function e(t,n,r,i,a,o,s,c){v()(this,e),this.$compile=t,this.$rootScope=n,this.$timeout=r,this.alertManager=i,this.authManager=a,this.httpManager=o,this.modelManager=s,this.syncManager=c,this.previousPasswords=[]}var t,n,r,i,s,c,u,l;return e.$inject=["$compile","$rootScope","$timeout","alertManager","authManager","httpManager","modelManager","syncManager"],y()(e,[{key:"extensionsInContextOfItem",value:function(e){return this.extensions.filter((function(t){return Y.a.includes(t.supported_types,e.content_type)||t.actionsWithContextForItem(e).length>0}))}},{key:"loadExtensionInContextOfItem",value:(l=d()(f.a.mark((function e(t,n){var r,i,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={content_type:n.content_type,item_uuid:n.uuid},i=function(){},e.abrupt("return",this.httpManager.getAbsolute(t.url,r,i,i).then((function(e){return a.updateExtensionFromRemoteResponse(t,e),t})).catch((function(e){return console.error("Error loading extension",e),null})));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"updateExtensionFromRemoteResponse",value:function(e,t){t.description&&(e.description=t.description),t.supported_types&&(e.supported_types=t.supported_types),t.actions?e.actions=t.actions.map((function(e){return new o.Action(e)})):e.actions=[]}},{key:"executeAction",value:(u=d()(f.a.mark((function e(t,n,r){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.running=!0,e.t0=t.verb,e.next="get"===e.t0?4:"render"===e.t0?8:"show"===e.t0?12:"post"===e.t0?16:20;break;case 4:return e.next=6,this.handleGetAction(t);case 6:return i=e.sent,e.abrupt("break",21);case 8:return e.next=10,this.handleRenderAction(t);case 10:return i=e.sent,e.abrupt("break",21);case 12:return e.next=14,this.handleShowAction(t);case 14:return i=e.sent,e.abrupt("break",21);case 16:return e.next=18,this.handlePostAction(t,r,n);case 18:return i=e.sent,e.abrupt("break",21);case 20:return e.abrupt("break",21);case 21:return t.lastExecuted=new Date,t.running=!1,e.abrupt("return",i);case 24:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"decryptResponse",value:(c=d()(f.a.mark((function e(t,n){var r,i,a,s,c,u,l,p,d,h,v=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.item,e.next=3,o.protocolManager.decryptItem(r,n);case 3:if(r.errorDecrypting){e.next=5;break}return e.abrupt("return",{response:t,item:r});case 5:if(t.auth_params){e.next=8;break}return this.alertManager.alert({text:"We were unable to decrypt this revision using your current keys, \n            and this revision is missing metadata that would allow us to try different \n            keys to decrypt it. This can likely be fixed with some manual intervention. \n            Please email hello@standardnotes.org for assistance."}),e.abrupt("return",{});case 8:i=[],a=!0,s=!1,c=void 0,e.prev=12,u=this.previousPasswords[Symbol.iterator]();case 14:if(a=(l=u.next()).done){e.next=32;break}if(p=l.value,!i.includes(p)){e.next=18;break}return e.abrupt("continue",29);case 18:return i.push(p),e.next=21,o.protocolManager.computeEncryptionKeysForUser(p,t.auth_params);case 21:if(d=e.sent){e.next=24;break}return e.abrupt("continue",29);case 24:return e.next=26,this.decryptResponse(t,d);case 26:if(!(h=e.sent).item){e.next=29;break}return e.abrupt("return",h);case 29:a=!0,e.next=14;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(12),s=!0,c=e.t0;case 38:e.prev=38,e.prev=39,a||null==u.return||u.return();case 41:if(e.prev=41,!s){e.next=44;break}throw c;case 44:return e.finish(41);case 45:return e.finish(38);case 46:return e.abrupt("return",new Promise((function(e,r){v.presentPasswordModal((function(r){v.previousPasswords.push(r);var i=v.decryptResponse(t,n);e(i)}))})));case 47:case"end":return e.stop()}}),e,this,[[12,34,38,46],[39,,41,45]])}))),function(e,t){return c.apply(this,arguments)})},{key:"handlePostAction",value:(s=d()(f.a.mark((function e(t,n,r){var i,a,o,s,c=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="decrypted"===t.access_type,e.next=3,this.outgoingParamsForItem(n,r,i);case 3:return a=e.sent,o={items:[a]},s=function(){},e.abrupt("return",this.httpManager.postAbsolute(t.url,o,s,s).then((function(e){return t.error=!1,{response:e}})).catch((function(e){return t.error=!0,console.error("Action error response:",e),c.alertManager.alert({text:"An issue occurred while processing this action. Please try again."}),{response:e}})));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return s.apply(this,arguments)})},{key:"handleShowAction",value:(i=d()(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=window.open(t.url,"_blank"))&&n.focus(),e.abrupt("return",{response:null});case 3:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"handleGetAction",value:(r=d()(f.a.mark((function e(t){var n,r,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){},r=function(){var e=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.httpManager.getAbsolute(t.url,{},n,n).then(function(){var e=d()(f.a.mark((function e(n){var r,a,s,c,u,l,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.error=!1,e.t0=i,e.t1=n,e.next=5,i.authManager.keys();case 5:return e.t2=e.sent,e.next=8,e.t0.decryptResponse.call(e.t0,e.t1,e.t2);case 8:return e.next=10,i.modelManager.mapResponseItemsToLocalModels([n.item],o.SFModelManager.MappingSourceRemoteActionRetrieved);case 10:for(r=e.sent,a=!0,s=!1,c=void 0,e.prev=14,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)p=l.value,i.modelManager.setItemDirty(p,!0);e.next=22;break;case 18:e.prev=18,e.t3=e.catch(14),s=!0,c=e.t3;case 22:e.prev=22,e.prev=23,a||null==u.return||u.return();case 25:if(e.prev=25,!s){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return i.syncManager.sync(),e.abrupt("return",{response:n,item:n.item});case 32:case"end":return e.stop()}}),e,null,[[14,18,22,30],[23,,25,29]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var n=e&&e.error||{message:"An issue occurred while processing this action. Please try again."};return i.alertManager.alert({text:n.message}),t.error=!0,{error:n}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",new Promise((function(e,t){i.alertManager.confirm({text:"Are you sure you want to replace the current note contents with this action's results?",onConfirm:function(){r().then(e)}})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"handleRenderAction",value:(n=d()(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){},e.abrupt("return",this.httpManager.getAbsolute(t.url,{},n,n).then(function(){var e=d()(f.a.mark((function e(n){var i,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.error=!1,e.t0=r,e.t1=n,e.next=5,r.authManager.keys();case 5:return e.t2=e.sent,e.next=8,e.t0.decryptResponse.call(e.t0,e.t1,e.t2);case 8:return i=e.sent,a=r.modelManager.createItem(i.item),e.abrupt("return",{response:i.response,item:a});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var n=e&&e.error||{message:"An issue occurred while processing this action. Please try again."};return r.alertManager.alert({text:n.message}),t.error=!0,{error:n}})));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"outgoingParamsForItem",value:(t=d()(f.a.mark((function e(t,n){var r,i,a,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.next=3,this.authManager.keys();case 3:return i=e.sent,r&&(i=null),e.t0=o.SFItemParams,e.t1=t,e.t2=i,e.next=10,this.authManager.getAuthParams();case 10:return e.t3=e.sent,a=new e.t0(e.t1,e.t2,e.t3),e.abrupt("return",a.paramsForExtension());case 13:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"presentRevisionPreviewModal",value:function(e,t){var n=this.$rootScope.$new(!0);n.uuid=e,n.content=t;var r=this.$compile("<revision-preview-modal uuid='uuid' content='content' \n      class='sk-modal'></revision-preview-modal>")(n);a.a.element(document.body).append(r)}},{key:"presentPasswordModal",value:function(e){var t=this.$rootScope.$new(!0);t.type="password",t.title="Decryption Assistance",t.message="Unable to decrypt this item with your current keys. \n                     Please enter your account password at the time of this revision.",t.callback=e;var n=this.$compile("<input-modal type='type' message='message' \n     title='title' callback='callback'></input-modal>")(t);a.a.element(document.body).append(n)}},{key:"extensions",get:function(){return this.modelManager.validItemsForContentType("Extension")}}]),e}(),Ht=function(){function e(t,n,r,i){v()(this,e),this.passcodeManager=t,this.authManager=n,this.modelManager=r,this.privilegesManager=i}var t,n,r;return e.$inject=["passcodeManager","authManager","modelManager","privilegesManager"],y()(e,[{key:"downloadBackup",value:(r=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.downloadBackupOfItems(this.modelManager.allItems,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"downloadBackupOfItems",value:(n=d()(f.a.mark((function e(t,n){var r,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=d()(f.a.mark((function e(){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=12;break}if(!i.authManager.offline()||!i.passcodeManager.hasPasscode()){e.next=6;break}r=i.passcodeManager.keys(),a=i.passcodeManager.passcodeAuthParams(),e.next=12;break;case 6:return e.next=8,i.authManager.keys();case 8:return r=e.sent,e.next=11,i.authManager.getAuthParams();case 11:a=e.sent;case 12:i.__itemsData(t,r,a).then((function(e){var a=n?"Encrypted":"Decrypted";i.__downloadData(e,"Standard Notes ".concat(a," Backup - ").concat(i.__formattedDate(),".txt")),r||i.__downloadZippedItems(t)}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,this.privilegesManager.actionRequiresPrivilege($.ActionManageBackups);case 3:if(!e.sent){e.next=7;break}this.privilegesManager.presentPrivilegesModal($.ActionManageBackups,(function(){r()})),e.next=8;break;case 7:r();case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"__formattedDate",value:function(){var e="".concat(new Date),t=e.match(/^(.*?) \(/);return t.length>=2?t[1]:e}},{key:"__itemsData",value:(t=d()(f.a.mark((function e(t,n,r){var i,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modelManager.getJSONDataForItems(t,n,r);case 2:return i=e.sent,a=new Blob([i],{type:"text/json"}),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"__loadZip",value:function(e){if(window.zip)e();else{var t=document.createElement("script");t.src="/assets/zip/zip.js",t.async=!1,document.getElementsByTagName("head")[0].appendChild(t),t.onload=function(){zip.workerScriptsPath="assets/zip/",e()}}}},{key:"__downloadZippedItems",value:function(e){var t=this;this.__loadZip((function(){zip.createWriter(new zip.BlobWriter("application/zip"),(function(n){var r=0;!function i(){var a,o,s=e[r];"Note"===s.content_type?(a=s.content.title,o=s.content.text):(a=s.content_type,o=JSON.stringify(s.content,null,2)),a||(a="");var c=new Blob([o],{type:"text/plain"}),u=a.replace(/\//g,"").replace(/\\+/g,""),l="-".concat(s.uuid.split("-")[0],".txt");u=u.slice(0,255-l.length);var f="".concat(s.content_type,"/").concat(u).concat(l);n.add(f,new zip.BlobReader(c),(function(){++r<e.length?i():n.close((function(e){t.__downloadData(e,"Standard Notes Backup - ".concat(t.__formattedDate(),".zip")),n=null}))}))}()}),onerror)}))}},{key:"__hrefForData",value:function(e){return null!==this.textFile&&window.URL.revokeObjectURL(this.textFile),this.textFile=window.URL.createObjectURL(e),this.textFile}},{key:"__downloadData",value:function(e,t){var n=document.createElement("a");n.setAttribute("download",t),n.href=this.__hrefForData(e),document.body.appendChild(n),n.click(),n.remove()}}]),e}(),zt=n(12),Vt=n.n(zt),Wt=function(){function e(){v()(this,e),this.memory={}}return y()(e,[{key:"getItem",value:function(e){return this.memory[e]||null}},{key:"getItemSync",value:function(e){return this.getItem(e)}},{key:"setItem",value:function(e,t){this.memory[e]=t}},{key:"removeItem",value:function(e){delete this.memory[e]}},{key:"clear",value:function(){this.memory={}}},{key:"keys",value:function(){return Object.keys(this.memory)}},{key:"key",value:function(e){return Object.keys(this.memory)[e]}},{key:"length",get:function(){return Object.keys(this.memory).length}}]),e}(),Kt=function(e){function t(e,n){var r;return v()(this,t),(r=b()(this,w()(t).call(this))).dbManager=e,r.alertManager=n,r}var n,r,i,a,s,c,u,l,p,h,m;return t.$inject=["dbManager","alertManager"],S()(t,e),y()(t,[{key:"initialize",value:function(e,n){e?(this.storage=this.memoryStorage,this.itemsStorageMode=t.FixedEncrypted):n?(this.storage=this.memoryStorage,this.itemsStorageMode=t.Ephemeral):(this.storage=localStorage,this.itemsStorageMode=t.Fixed),this.modelStorageMode=n?t.Ephemeral:t.Fixed}},{key:"setItemsMode",value:function(e,n){var r=this.getVault(e);if(r!==this.storage||e!==this.itemsStorageMode||n){for(var i=this.storage.length,a=0;a<i;a++){var o=this.storage.key(a);r.setItem(o,this.storage.getItem(o))}this.itemsStorageMode=e,r!==this.storage&&this.storage.clear(),this.storage=r,e==t.FixedEncrypted?this.writeEncryptedStorageToDisk():e==t.Fixed&&this.removeItem("encryptedStorage",t.Fixed)}}},{key:"getVault",value:function(e){return e?e==t.Ephemeral||e==t.FixedEncrypted?this.memoryStorage:localStorage:this.storage}},{key:"setItem",value:(m=d()(f.a.mark((function e(n,r,i){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.getVault(i);try{a.setItem(n,r)}catch(e){console.error("Exception while trying to setItem in StorageManager:",e),this.alertManager.alert({text:"The application's local storage is out of space. If you have Session History save-to-disk enabled, please disable it, and try again."})}if(i!==t.FixedEncrypted&&(i||this.itemsStorageMode!==t.FixedEncrypted)){e.next=4;break}return e.abrupt("return",this.writeEncryptedStorageToDisk());case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return m.apply(this,arguments)})},{key:"getItem",value:(h=d()(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getItemSync(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"getItemSync",value:function(e,t){return this.getVault(t).getItem(e)}},{key:"removeItem",value:(p=d()(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getVault(n),e.abrupt("return",r.removeItem(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"clear",value:(l=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.memoryStorage.clear(),localStorage.clear();case 2:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"storageAsHash",value:function(){for(var e={},t=this.storage.length,n=0;n<t;n++){var r=this.storage.key(n);e[r]=this.storage.getItem(r)}return e}},{key:"setKeys",value:function(e,t){this.encryptedStorageKeys=e,this.encryptedStorageAuthParams=t}},{key:"writeEncryptedStorageToDisk",value:(u=d()(f.a.mark((function e(){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new o.SNEncryptedStorage).content.storage=this.storageAsHash(),r=new o.SFItemParams(n,this.encryptedStorageKeys,this.encryptedStorageAuthParams),e.next=5,r.paramsForSync();case 5:i=e.sent,this.setItem("encryptedStorage",JSON.stringify(i),t.Fixed);case 7:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"decryptStorage",value:(c=d()(f.a.mark((function e(){var n,r,i,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(this.getItemSync("encryptedStorage",t.Fixed)),e.next=3,o.protocolManager.decryptItem(n,this.encryptedStorageKeys);case 3:for(r=new o.SNEncryptedStorage(n),i=0,a=Object.keys(r.content.storage);i<a.length;i++)s=a[i],this.setItem(s,r.storage[s]);case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"hasPasscode",value:function(){return null!==this.getItemSync("encryptedStorage",t.Fixed)}},{key:"bestStorageMode",value:function(){return this.hasPasscode()?t.FixedEncrypted:t.Fixed}},{key:"setModelStorageMode",value:function(e){e!=this.modelStorageMode&&(e==t.Ephemeral&&this.dbManager.clearAllModels(null),this.modelStorageMode=e)}},{key:"getAllModels",value:(s=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.modelStorageMode!=t.Fixed){e.next=2;break}return e.abrupt("return",this.dbManager.getAllModels());case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"saveModel",value:(a=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveModels([t]));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"saveModels",value:(i=d()(f.a.mark((function e(n,r,i){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.modelStorageMode!=t.Fixed){e.next=2;break}return e.abrupt("return",this.dbManager.saveModels(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"deleteModel",value:(r=d()(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.modelStorageMode!=t.Fixed){e.next=2;break}return e.abrupt("return",this.dbManager.deleteModel(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"clearAllModels",value:(n=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.dbManager.clearAllModels());case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"memoryStorage",get:function(){return this._memoryStorage||(this._memoryStorage=new Wt),this._memoryStorage}}]),t}(o.SFStorageManager);Kt.FixedEncrypted="FixedEncrypted",Kt.Ephemeral="Ephemeral",Kt.Fixed="Fixed";var qt=function(e){function t(e,n,r,i,a,o,s,c){var u;return v()(this,t),(u=b()(this,w()(t).call(this,r,a,null,s))).$rootScope=o,u.$compile=c,u.modelManager=e,u.singletonManager=n,u.storageManager=r,u.dbManager=i,u}var n,r,i,s,c,u,l;return t.$inject=["modelManager","singletonManager","storageManager","dbManager","httpManager","$rootScope","$timeout","$compile"],S()(t,e),y()(t,[{key:"loadInitialData",value:function(){var e=this.storageManager.getItemSync("user");if(e)this.user=JSON.parse(e);else{var t=this.storageManager.getItemSync("uuid");t&&(this.user={uuid:t})}this.checkForSecurityUpdate()}},{key:"offline",value:function(){return!this.user}},{key:"isEphemeralSession",value:function(){return null!=this.ephemeral&&null!=this.ephemeral||(this.ephemeral=JSON.parse(this.storageManager.getItemSync("ephemeral",Kt.Fixed))),this.ephemeral}},{key:"setEphemeral",value:function(e){this.ephemeral=e,e?(this.storageManager.setModelStorageMode(Kt.Ephemeral),this.storageManager.setItemsMode(Kt.Ephemeral)):(this.storageManager.setModelStorageMode(Kt.Fixed),this.storageManager.setItemsMode(this.storageManager.bestStorageMode()),this.storageManager.setItem("ephemeral",JSON.stringify(!1),Kt.Fixed))}},{key:"getAuthParamsForEmail",value:(l=d()(f.a.mark((function e(n,r,i){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt()(w()(t.prototype),"getAuthParamsForEmail",this).call(this,n,r,i));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return l.apply(this,arguments)})},{key:"login",value:(u=d()(f.a.mark((function e(n,r,i,a,o,s){var c=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt()(w()(t.prototype),"login",this).call(this,n,r,i,o,s).then((function(e){return e.error||(c.setEphemeral(a),c.checkForSecurityUpdate()),e})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i,a){return u.apply(this,arguments)})},{key:"register",value:(c=d()(f.a.mark((function e(n,r,i,a){var o=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt()(w()(t.prototype),"register",this).call(this,n,r,i).then((function(e){return e.error||o.setEphemeral(a),e})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return c.apply(this,arguments)})},{key:"changePassword",value:(s=d()(f.a.mark((function e(n,r,i,a,o){var s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vt()(w()(t.prototype),"changePassword",this).call(this,n,r,i,a,o).then((function(e){return e.error||s.checkForSecurityUpdate(),e})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i){return s.apply(this,arguments)})},{key:"handleAuthResponse",value:(i=d()(f.a.mark((function e(n,r,i,a,o){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vt()(w()(t.prototype),"handleAuthResponse",this).call(this,n,r,i,a,o);case 3:this.user=n.user,this.storageManager.setItem("user",JSON.stringify(n.user)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.dbManager.displayOfflineAlert();case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t,n,r,a){return i.apply(this,arguments)})},{key:"verifyAccountPassword",value:(r=d()(f.a.mark((function e(t){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAuthParams();case 2:return n=e.sent,e.next=5,o.protocolManager.computeEncryptionKeysForUser(t,n);case 5:return r=e.sent,e.t0=r.mk,e.next=9,this.keys();case 9:return e.t1=e.sent.mk,i=e.t0===e.t1,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"checkForSecurityUpdate",value:(n=d()(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.offline()){e.next=2;break}return e.abrupt("return",!1);case 2:return t=o.protocolManager.version(),e.next=5,this.protocolVersion();case 5:return e.t0=e.sent,e.t1=t,(n=e.t0!==e.t1)!==this.securityUpdateAvailable&&(this.securityUpdateAvailable=n,this.$rootScope.$broadcast("security-update-status-changed")),e.abrupt("return",this.securityUpdateAvailable);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"presentPasswordWizard",value:function(e){var t=this.$rootScope.$new(!0);t.type=e;var n=this.$compile("<password-wizard type='type'></password-wizard>")(t);a.a.element(document.body).append(n)}},{key:"signOut",value:function(){Vt()(w()(t.prototype),"signout",this).call(this),this.user=null,this._authParams=null}}]),t}(o.SFAuthManager),Jt=function(e){function t(e,n,r,i,a,u,l){var f;return v()(this,t),(f=b()(this,w()(t).call(this,{modelManager:e,syncManager:n,desktopManager:r,nativeExtManager:i,alertManager:new o.SFAlertManager,$uiRunner:a.safeApply,$timeout:u,environment:c()?"desktop":"web",platform:s()}))).$compile=l,f.$rootScope=a,f}return t.$inject=["modelManager","syncManager","desktopManager","nativeExtManager","$rootScope","$timeout","$compile"],S()(t,e),y()(t,[{key:"openModalComponent",value:function(e){var t=this.$rootScope.$new(!0);t.component=e;var n=this.$compile("<component-modal component='component' class='sk-modal'></component-modal>")(t);a.a.element(document.body).append(n)}},{key:"presentPermissionsDialog",value:function(e){var t=this.$rootScope.$new(!0);t.permissionsString=e.permissionsString,t.component=e.component,t.callback=e.callback;var n=this.$compile("<permissions-modal component='component' permissions-string='permissionsString' callback='callback' class='sk-modal'></permissions-modal>")(t);a.a.element(document.body).append(n)}}]),t}(o.SNComponentManager),Gt=function(){function e(t){v()(this,e),this.locked=!0,this.alertManager=t}var t,n,r,i,a,o;return e.$inject=["alertManager"],y()(e,[{key:"displayOfflineAlert",value:function(){this.alertManager.alert({text:"There was an issue loading your offline database. This could happen for two reasons:\n\n1. You're in a private window in your browser. We can't save your data without access to the local database. Please use a non-private window.\n\n2. You have two windows of the app open at the same time. Please close any other app instances and reload the page."})}},{key:"setLocked",value:function(e){this.locked=e}},{key:"openDatabase",value:(o=d()(f.a.mark((function e(){var t,n,r,i=this,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},n=t.onUpgradeNeeded,!this.locked){e.next=3;break}return e.abrupt("return");case 3:return r=window.indexedDB.open("standardnotes",1),e.abrupt("return",new Promise((function(e,t){r.onerror=function(t){t.target.errorCode?i.alertManager.alert({text:"Offline database issue: "+t.target.errorCode}):i.displayOfflineAlert(),console.error("Offline database issue:",t),e(null)},r.onsuccess=function(t){var n=t.target.result;n.onversionchange=function(e){n.close()},n.onerror=function(e){console.error("Database error: "+e.target.errorCode)},e(n)},r.onblocked=function(e){console.error("Request blocked error:",e.target.errorCode)},r.onupgradeneeded=function(e){var t=e.target.result;t.onversionchange=function(e){t.close()};var r=t.createObjectStore("items",{keyPath:"uuid"});r.createIndex("uuid","uuid",{unique:!0}),r.transaction.oncomplete=function(e){1===t.version&&n&&n()}}})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getAllModels",value:(a=d()(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDatabase();case 2:return t=e.sent,n=t.transaction("items").objectStore("items"),r=[],e.abrupt("return",new Promise(function(){var e=d()(f.a.mark((function e(t,i){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openCursor().onsuccess=function(e){var n=e.target.result;n?(r.push(n.value),n.continue()):t(r)};case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"saveModel",value:(i=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.saveModels([t]);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"saveModels",value:(r=d()(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){r.alertManager.alert({text:"Unable to save changes locally due to an unknown system issue. Issue Code: ".concat(e.code," Issue Name: ").concat(e.name,".")})},e.abrupt("return",new Promise(function(){var e=d()(f.a.mark((function e(i,a){var o,s,c,u,l,p,h,v,m,y;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=3;break}return i(),e.abrupt("return");case 3:return e.next=5,r.openDatabase();case 5:o=e.sent,(s=o.transaction("items","readwrite")).oncomplete=function(e){},s.onerror=function(e){console.error("Transaction error:",e.target.errorCode),n(e.target.error)},s.onblocked=function(e){console.error("Transaction blocked error:",e.target.errorCode),n(e.target.error)},s.onabort=function(e){console.error("Offline saving aborted:",e);var t=e.target.error;"QuotaExceededError"==t.name?this.alertManager.alert({text:"Unable to save changes locally because your device is out of space. Please free up some disk space and try again, otherwise, your data may end up in an inconsistent state."}):n(t),a(t)},c=s.objectStore("items"),u=function(){var e=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=c.put(t);r.onerror=function(t){console.error("DB put error:",t.target.error),e()},r.onsuccess=e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=!0,p=!1,h=void 0,e.prev=16,v=t[Symbol.iterator]();case 18:if(l=(m=v.next()).done){e.next=25;break}return y=m.value,e.next=22,u(y);case 22:l=!0,e.next=18;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(16),p=!0,h=e.t0;case 31:e.prev=31,e.prev=32,l||null==v.return||v.return();case 34:if(e.prev=34,!p){e.next=37;break}throw h;case 37:return e.finish(34);case 38:return e.finish(31);case 39:i();case 40:case"end":return e.stop()}}),e,null,[[16,27,31,39],[32,,34,38]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"deleteModel",value:(n=d()(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=d()(f.a.mark((function e(r,i){var a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.openDatabase();case 2:a=e.sent,(o=a.transaction("items","readwrite").objectStore("items").delete(t.uuid)).onsuccess=function(e){r()},o.onerror=function(e){i()};case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"clearAllModels",value:(t=d()(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.indexedDB.deleteDatabase("standardnotes"),e.abrupt("return",new Promise((function(e,n){t.onerror=function(t){console.error("Error deleting database."),e()},t.onsuccess=function(t){e()},t.onblocked=function(t){console.error("Delete request blocked"),this.alertManager.alert({text:"Your browser is blocking Standard Notes from deleting the local database. Make sure there are no other open windows of this app and try again. If the issue persists, please manually delete app data to sign out."}),e()}})));case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}(),Yt=function(){function e(t,n,r,i,a,o,s){var u=this;v()(this,e),this.passcodeManager=o,this.modelManager=r,this.authManager=a,this.syncManager=i,this.$rootScope=t,this.appState=s,this.timeout=n,this.updateObservers=[],this.componentActivationObservers=[],this.isDesktop=c(),t.$on("initial-data-loaded",(function(){u.dataLoaded=!0,u.dataLoadHandler&&u.dataLoadHandler()})),t.$on("major-data-change",(function(){u.majorDataChangeHandler&&u.majorDataChangeHandler()}))}var t,n,r,i;return e.$inject=["$rootScope","$timeout","modelManager","syncManager","authManager","passcodeManager","appState"],y()(e,[{key:"saveBackup",value:function(){this.majorDataChangeHandler&&this.majorDataChangeHandler()}},{key:"getExtServerHost",value:function(){return console.assert(this.extServerHost,"extServerHost is null"),this.extServerHost}},{key:"convertComponentForTransmission",value:(i=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new o.SFItemParams(t).paramsForExportFile(!0));case 1:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"syncComponentsInstallation",value:function(e){var t=this;this.isDesktop&&Promise.all(e.map((function(e){return t.convertComponentForTransmission(e)}))).then((function(e){t.installationSyncHandler(e)}))}},{key:"installComponent",value:(r=d()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.convertComponentForTransmission(t);case 3:e.t1=e.sent,e.t0.installComponentHandler.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"registerUpdateObserver",value:function(e){var t={callback:e};return this.updateObservers.push(t),t}},{key:"searchText",value:function(e){this.isDesktop&&(this.lastSearchedText=e,this.searchHandler&&this.searchHandler(e))}},{key:"redoSearch",value:function(){this.lastSearchedText&&this.searchText(this.lastSearchedText)}},{key:"deregisterUpdateObserver",value:function(e){Y.a.pull(this.updateObservers,e)}},{key:"desktop_setSearchHandler",value:function(e){this.searchHandler=e}},{key:"desktop_windowGainedFocus",value:function(){this.$rootScope.$broadcast("window-gained-focus")}},{key:"desktop_windowLostFocus",value:function(){this.$rootScope.$broadcast("window-lost-focus")}},{key:"desktop_onComponentInstallationComplete",value:function(e,t){var n=this,r=this.modelManager.findItem(e.uuid);if(r){if(t)r.setAppDataItem("installError",t);else{for(var i=0,a=["package_info","local_url"];i<a.length;i++){var s=a[i];r[s]=e.content[s]}this.modelManager.notifySyncObserversOfModels([r],o.SFModelManager.MappingSourceDesktopInstalled),r.setAppDataItem("installError",null)}this.modelManager.setItemDirty(r),this.syncManager.sync(),this.timeout((function(){var e=!0,t=!1,i=void 0;try{for(var a,o=n.updateObservers[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){a.value.callback(r)}}catch(e){t=!0,i=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw i}}}))}}},{key:"desktop_registerComponentActivationObserver",value:function(e){var t={id:Math.random,callback:e};return this.componentActivationObservers.push(t),t}},{key:"desktop_deregisterComponentActivationObserver",value:function(e){Y.a.pull(this.componentActivationObservers,e)}},{key:"notifyComponentActivation",value:(n=d()(f.a.mark((function e(t){var n,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertComponentForTransmission(t);case 2:n=e.sent,this.timeout((function(){var e=!0,t=!1,i=void 0;try{for(var a,o=r.componentActivationObservers[Symbol.iterator]();!(e=(a=o.next()).done);e=!0)a.value.callback(n)}catch(e){t=!0,i=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw i}}}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"desktop_setExtServerHost",value:function(e){this.extServerHost=e,this.appState.desktopExtensionsReady()}},{key:"desktop_setComponentInstallationSyncHandler",value:function(e){this.installationSyncHandler=e}},{key:"desktop_setInstallComponentHandler",value:function(e){this.installComponentHandler=e}},{key:"desktop_setInitialDataLoadHandler",value:function(e){this.dataLoadHandler=e,this.dataLoaded&&this.dataLoadHandler()}},{key:"desktop_requestBackupFile",value:(t=d()(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.authManager.offline()||!this.passcodeManager.hasPasscode()){e.next=5;break}n=this.passcodeManager.keys(),r=this.passcodeManager.passcodeAuthParams(),e.next=11;break;case 5:return e.next=7,this.authManager.keys();case 7:return n=e.sent,e.next=10,this.authManager.getAuthParams();case 10:r=e.sent;case 11:this.modelManager.getAllItemsJSONData(n,r,!0).then((function(e){t(e)}));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"desktop_setMajorDataChangeHandler",value:function(e){this.majorDataChangeHandler=e}},{key:"desktop_didBeginBackup",value:function(){this.appState.beganBackupDownload()}},{key:"desktop_didFinishBackup",value:function(e){this.appState.endedBackupDownload({success:e})}}]),e}(),Zt=function(e){function t(e,n){var r;return v()(this,t),(r=b()(this,w()(t).call(this,n))).setJWTRequestHandler(d()(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getItem("jwt"));case 1:case"end":return t.stop()}}),t)})))),r}return t.$inject=["storageManager","$timeout"],S()(t,e),t}(o.SFHttpManager),Xt=function(e){function t(e,n,r,i,a,o,s){var c;return v()(this,t),(c=b()(this,w()(t).call(this,e,n,i,o))).componentManager=r,c.statusManager=a,c.desktopManager=s,c}return t.$inject=["modelManager","syncManager","componentManager","storageManager","statusManager","authManager","desktopManager"],S()(t,e),y()(t,[{key:"registeredMigrations",value:function(){return[this.editorToComponentMigration(),this.componentUrlToHostedUrl(),this.removeTagReferencesFromNotes()]}},{key:"editorToComponentMigration",value:function(){var e,t=this;return{name:"editor-to-component",content_type:"SN|Editor",handler:(e=d()(f.a.mark((function e(n){var r,i,a,o,s,c,u,l,p,d,h,v,m;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=!0,i=!1,a=void 0,e.prev=3,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)(c=s.value).url&&!t.componentManager.componentForUrl(c.url)&&((u=t.modelManager.createItem({content_type:"SN|Component",content:{url:c.url,name:c.name,area:"editor-editor"}})).setAppDataItem("data",c.data),t.modelManager.addItem(u),t.modelManager.setItemDirty(u,!0));e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),i=!0,a=e.t0;case 11:e.prev=11,e.prev=12,r||null==o.return||o.return();case 14:if(e.prev=14,!i){e.next=17;break}throw a;case 17:return e.finish(14);case 18:return e.finish(11);case 19:for(l=!0,p=!1,d=void 0,e.prev=22,h=n[Symbol.iterator]();!(l=(v=h.next()).done);l=!0)m=v.value,t.modelManager.setItemToBeDeleted(m);e.next=30;break;case 26:e.prev=26,e.t1=e.catch(22),p=!0,d=e.t1;case 30:e.prev=30,e.prev=31,l||null==h.return||h.return();case 33:if(e.prev=33,!p){e.next=36;break}throw d;case 36:return e.finish(33);case 37:return e.finish(30);case 38:t.syncManager.sync();case 39:case"end":return e.stop()}}),e,null,[[3,7,11,19],[12,,14,18],[22,26,30,38],[31,,33,37]])}))),function(t){return e.apply(this,arguments)})}}},{key:"componentUrlToHostedUrl",value:function(){var e,t=this;return{name:"component-url-to-hosted-url",content_type:"SN|Component",handler:(e=d()(f.a.mark((function e(n){var r,i,a,o,s,c,u,l,p,d,h,v,m,y,g;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,i=t.modelManager.validItemsForContentType("Note"),a=!0,o=!1,s=void 0,e.prev=5,c=i[Symbol.iterator]();case 7:if(a=(u=c.next()).done){e.next=31;break}for(l=u.value,p=!0,d=!1,h=void 0,e.prev=12,v=n[Symbol.iterator]();!(p=(m=v.next()).done);p=!0)y=m.value,(g=l.getDomainDataItem(y.hosted_url,Jt.ClientDataDomain))&&(l.setDomainDataItem(y.uuid,g,Jt.ClientDataDomain),l.setDomainDataItem(y.hosted_url,null,Jt.ClientDataDomain),t.modelManager.setItemDirty(l,!0),r=!0);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),d=!0,h=e.t0;case 20:e.prev=20,e.prev=21,p||null==v.return||v.return();case 23:if(e.prev=23,!d){e.next=26;break}throw h;case 26:return e.finish(23);case 27:return e.finish(20);case 28:a=!0,e.next=7;break;case 31:e.next=37;break;case 33:e.prev=33,e.t1=e.catch(5),o=!0,s=e.t1;case 37:e.prev=37,e.prev=38,a||null==c.return||c.return();case 40:if(e.prev=40,!o){e.next=43;break}throw s;case 43:return e.finish(40);case 44:return e.finish(37);case 45:r&&t.syncManager.sync();case 46:case"end":return e.stop()}}),e,null,[[5,33,37,45],[12,16,20,28],[21,,23,27],[38,,40,44]])}))),function(t){return e.apply(this,arguments)})}}},{key:"removeTagReferencesFromNotes",value:function(){var e,t=this;return{name:"remove-tag-references-from-notes",content_type:"Note",handler:(e=d()(f.a.mark((function e(n){var r,i,a,o,s,u,l,p,d,h,v,m,y,g,b,k,w;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.statusManager.addStatusFromString("Optimizing data..."),i=0,a=!0,o=!1,s=void 0,e.prev=6,u=n[Symbol.iterator]();case 8:if(a=(l=u.next()).done){e.next=47;break}if((p=l.value).content){e.next=12;break}return e.abrupt("continue",44);case 12:d=p.content.references,h=[],v=!0,m=!1,y=void 0,e.prev=17,g=d[Symbol.iterator]();case 19:if(v=(b=g.next()).done){e.next=29;break}if("Tag"==(k=b.value).content_type){e.next=24;break}return h.push(k),e.abrupt("continue",26);case 24:(w=t.modelManager.findItem(k.uuid))&&!w.hasRelationshipWithItem(p)&&(w.addItemAsRelationship(p),t.modelManager.setItemDirty(w,!0),i++);case 26:v=!0,e.next=19;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(17),m=!0,y=e.t0;case 35:e.prev=35,e.prev=36,v||null==g.return||g.return();case 38:if(e.prev=38,!m){e.next=41;break}throw y;case 41:return e.finish(38);case 42:return e.finish(35);case 43:h.length!=d.length&&(p.content.references=h,t.modelManager.setItemDirty(p,!0),i++);case 44:a=!0,e.next=8;break;case 47:e.next=53;break;case 49:e.prev=49,e.t1=e.catch(6),o=!0,s=e.t1;case 53:e.prev=53,e.prev=54,a||null==u.return||u.return();case 56:if(e.prev=56,!o){e.next=59;break}throw s;case 59:return e.finish(56);case 60:return e.finish(53);case 61:if(!(i>0)){e.next=70;break}return c()&&t.desktopManager.saveBackup(),r=t.statusManager.replaceStatusWithString(r,"".concat(i," items optimized.")),e.next=66,t.syncManager.sync();case 66:r=t.statusManager.replaceStatusWithString(r,"Optimization complete."),setTimeout((function(){t.statusManager.removeStatus(r)}),2e3),e.next=71;break;case 70:t.statusManager.removeStatus(r);case 71:case"end":return e.stop()}}),e,null,[[6,49,53,61],[17,31,35,43],[36,,38,42],[54,,56,60]])}))),function(t){return e.apply(this,arguments)})}}}]),t}(o.SFMigrationManager),Qt=function(e){function t(e,n){var r;return v()(this,t),(r=b()(this,w()(t).call(this,n))).notes=[],r.tags=[],r.components=[],r.storageManager=e,r.buildSystemSmartTags(),r}return t.$inject=["storageManager","$timeout"],S()(t,e),y()(t,[{key:"handleSignout",value:function(){Vt()(w()(t.prototype),"handleSignout",this).call(this),this.notes.length=0,this.tags.length=0,this.components.length=0}},{key:"noteCount",value:function(){return this.notes.filter((function(e){return!e.dummy})).length}},{key:"removeAllItemsFromMemory",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.items[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.deleted=!0}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.notifySyncObserversOfModels(this.items),this.handleSignout()}},{key:"findTag",value:function(e){return Y.a.find(this.tags,{title:e})}},{key:"findOrCreateTagByTitle",value:function(e){var t=this.findTag(e);return t||(t=this.createItem({content_type:"Tag",content:{title:e}}),this.addItem(t),this.setItemDirty(t,!0)),t}},{key:"addItems",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Vt()(w()(t.prototype),"addItems",this).call(this,e,r),e.forEach((function(e){r||("Tag"==e.content_type?Y.a.find(n.tags,{uuid:e.uuid})||n.tags.splice(Y.a.sortedIndexBy(n.tags,e,(function(e){return e.title?e.title.toLowerCase():""})),0,e):"Note"==e.content_type?Y.a.find(n.notes,{uuid:e.uuid})||n.notes.unshift(e):"SN|Component"==e.content_type&&(Y.a.find(n.components,{uuid:e.uuid})||n.components.unshift(e)))}))}},{key:"resortTag",value:function(e){Y.a.pull(this.tags,e),this.tags.splice(Y.a.sortedIndexBy(this.tags,e,(function(e){return e.title?e.title.toLowerCase():""})),0,e)}},{key:"setItemToBeDeleted",value:function(e){Vt()(w()(t.prototype),"setItemToBeDeleted",this).call(this,e),this.removeItemFromRespectiveArray(e)}},{key:"removeItemLocally",value:function(e,n){Vt()(w()(t.prototype),"removeItemLocally",this).call(this,e,n),this.removeItemFromRespectiveArray(e),this.storageManager.deleteModel(e).then(n)}},{key:"removeItemFromRespectiveArray",value:function(e){"Tag"==e.content_type?Y.a.remove(this.tags,{uuid:e.uuid}):"Note"==e.content_type?Y.a.remove(this.notes,{uuid:e.uuid}):"SN|Component"==e.content_type&&Y.a.remove(this.components,{uuid:e.uuid})}},{key:"notesMatchingSmartTag",value:function(e){var t=[new o.SFPredicate("content_type","=","Note"),e.content.predicate];if(!e.content.isTrashTag){var n=new o.SFPredicate("content.trashed","=",!1);t.push(n)}return this.itemsMatchingPredicates(t)}},{key:"trashSmartTag",value:function(){return this.systemSmartTags.find((function(e){return e.content.isTrashTag}))}},{key:"trashedItems",value:function(){return this.notesMatchingSmartTag(this.trashSmartTag())}},{key:"emptyTrash",value:function(){var e=this.trashedItems(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.setItemToBeDeleted(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"buildSystemSmartTags",value:function(){this.systemSmartTags=o.SNSmartTag.systemSmartTags()}},{key:"getSmartTagWithId",value:function(e){return this.getSmartTags().find((function(t){return t.uuid==e}))}},{key:"getSmartTags",value:function(){var e=this.validItemsForContentType("SN|SmartTag").sort((function(e,t){return e.content.title<t.content.title?-1:1}));return this.systemSmartTags.concat(e)}},{key:"humanReadableDisplayForContentType",value:function(e){return{Note:"note",Tag:"tag","SN|SmartTag":"smart tag",Extension:"action-based extension","SN|Component":"component","SN|Editor":"editor","SN|Theme":"theme","SF|Extension":"server extension","SF|MFA":"two-factor authentication setting","SN|FileSafe|Credentials":"FileSafe credential","SN|FileSafe|FileMetadata":"FileSafe file","SN|FileSafe|Integration":"FileSafe integration"}[e]}}]),t}(o.SFModelManager),en=function(){function e(t,n,r){v()(this,e),this.modelManager=t,this.syncManager=n,this.singletonManager=r,this.extManagerId="org.standardnotes.extensions-manager",this.batchManagerId="org.standardnotes.batch-manager",this.systemExtensions=[],this.resolveExtensionsManager(),this.resolveBatchManager()}return e.$inject=["modelManager","syncManager","singletonManager"],y()(e,[{key:"isSystemExtension",value:function(e){return this.systemExtensions.includes(e.uuid)}},{key:"resolveExtensionsManager",value:function(){var e=this,t=new o.SFPredicate("content_type","=","SN|Component"),n=new o.SFPredicate("package_info.identifier","=",this.extManagerId);this.singletonManager.registerSingleton([t,n],(function(t){e.systemExtensions.push(t.uuid);var n=!1;c()?t.local_url||(t.local_url=window._extensions_manager_location,n=!0):t.hosted_url||(t.hosted_url=window._extensions_manager_location,n=!0);var r=t.content.permissions.find((function(e){return"stream-items"==e.name}));r.content_types.includes("SN|ExtensionRepo")||(r.content_types.push("SN|ExtensionRepo"),n=!0),n&&(e.modelManager.setItemDirty(t,!0),e.syncManager.sync())}),(function(t){if(window._extensions_manager_location){var n={name:"Extensions",identifier:e.extManagerId},r={content_type:"SN|Component",content:{name:n.name,area:"rooms",package_info:n,permissions:[{name:"stream-items",content_types:["SN|Component","SN|Theme","SF|Extension","Extension","SF|MFA","SN|Editor","SN|ExtensionRepo"]}]}};c()?r.content.local_url=window._extensions_manager_location:r.content.hosted_url=window._extensions_manager_location;var i=e.modelManager.createItem(r);e.modelManager.addItem(i),e.modelManager.setItemDirty(i,!0),e.syncManager.sync(),e.systemExtensions.push(i.uuid),t(i)}else console.error("window._extensions_manager_location must be set.")}))}},{key:"resolveBatchManager",value:function(){var e=this,t=new o.SFPredicate("content_type","=","SN|Component"),n=new o.SFPredicate("package_info.identifier","=",this.batchManagerId);this.singletonManager.registerSingleton([t,n],(function(t){e.systemExtensions.push(t.uuid);var n=!1;c()?t.local_url||(t.local_url=window._batch_manager_location,n=!0):t.hosted_url||(t.hosted_url=window._batch_manager_location,n=!0),n&&(e.modelManager.setItemDirty(t,!0),e.syncManager.sync())}),(function(t){if(window._batch_manager_location){var n={name:"Batch Manager",identifier:e.batchManagerId},r={content_type:"SN|Component",content:{name:n.name,area:"modal",package_info:n,permissions:[{name:"stream-items",content_types:["Note","Tag","SN|SmartTag","SN|Component","SN|Theme","SN|UserPreferences","SF|Extension","Extension","SF|MFA","SN|Editor","SN|FileSafe|Credentials","SN|FileSafe|FileMetadata","SN|FileSafe|Integration"]}]}};c()?r.content.local_url=window._batch_manager_location:r.content.hosted_url=window._batch_manager_location;var i=e.modelManager.createItem(r);e.modelManager.addItem(i),e.modelManager.setItemDirty(i,!0),e.syncManager.sync(),e.systemExtensions.push(i.uuid),t(i)}else console.error("window._batch_manager_location must be set.")}))}}]),e}(),tn=function(){function e(t,n,r,i){v()(this,e),this.authManager=n,this.storageManager=r,this.syncManager=i,this.$rootScope=t,this._hasPasscode=null!=this.storageManager.getItemSync("offlineParams",Kt.Fixed),this._locked=this._hasPasscode,this.visibilityObservers=[],this.passcodeChangeObservers=[],this.configureAutoLock()}var t,n,r,i,a;return e.$inject=["$rootScope","authManager","storageManager","syncManager"],y()(e,[{key:"addPasscodeChangeObserver",value:function(e){this.passcodeChangeObservers.push(e)}},{key:"lockApplication",value:function(){window.location.reload(),this.cancelAutoLockTimer()}},{key:"isLocked",value:function(){return this._locked}},{key:"hasPasscode",value:function(){return this._hasPasscode}},{key:"keys",value:function(){return this._keys}},{key:"addVisibilityObserver",value:function(e){return this.visibilityObservers.push(e),e}},{key:"removeVisibilityObserver",value:function(e){Y.a.pull(this.visibilityObservers,e)}},{key:"notifiyVisibilityObservers",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.visibilityObservers[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){(0,i.value)(e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"setAutoLockInterval",value:(a=d()(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.storageManager.setItem(e.AutoLockIntervalKey,JSON.stringify(n),Kt.FixedEncrypted));case 1:case"end":return t.stop()}}),t,this)}))),function(e){return a.apply(this,arguments)})},{key:"getAutoLockInterval",value:(i=d()(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageManager.getItem(e.AutoLockIntervalKey,Kt.FixedEncrypted);case 2:if(!(n=t.sent)){t.next=7;break}return t.abrupt("return",JSON.parse(n));case 7:return t.abrupt("return",e.AutoLockIntervalNone);case 8:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"passcodeAuthParams",value:function(){var e=JSON.parse(this.storageManager.getItemSync("offlineParams",Kt.Fixed));if(e&&!e.version){var t=this.keys();t&&t.ak?e.version="002":e.version="001"}return e}},{key:"verifyPasscode",value:(r=d()(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=d()(f.a.mark((function e(r,i){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.passcodeAuthParams(),e.next=3,o.protocolManager.computeEncryptionKeysForUser(t,a);case 3:e.sent.pw!==a.hash?r(!1):r(!0);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"unlock",value:function(e,t){var n=this,r=this.passcodeAuthParams();o.protocolManager.computeEncryptionKeysForUser(e,r).then((function(e){e.pw===r.hash?(n._keys=e,n._authParams=r,n.decryptLocalStorage(e,r).then((function(){n._locked=!1,t(!0)}))):t(!1)}))}},{key:"setPasscode",value:function(e,t){var n=this,r=o.protocolManager.crypto.generateUUIDSync();o.protocolManager.generateInitialKeysAndAuthParamsForUser(r,e).then((function(e){var r=e.keys,i=e.authParams;i.hash=r.pw,n._keys=r,n._hasPasscode=!0,n._authParams=i,n.encryptLocalStorage(r,i),n.storageManager.setItem("offlineParams",JSON.stringify(i),Kt.Fixed),t(!0),n.notifyObserversOfPasscodeChange()}))}},{key:"changePasscode",value:function(e,t){this.setPasscode(e,t)}},{key:"clearPasscode",value:function(){this.storageManager.setItemsMode(this.authManager.isEphemeralSession()?Kt.Ephemeral:Kt.Fixed),this.storageManager.removeItem("offlineParams",Kt.Fixed),this._keys=null,this._hasPasscode=!1,this.notifyObserversOfPasscodeChange()}},{key:"notifyObserversOfPasscodeChange",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.passcodeChangeObservers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"encryptLocalStorage",value:function(e,t){this.storageManager.setKeys(e,t),this.storageManager.setItemsMode(this.authManager.isEphemeralSession()?Kt.Ephemeral:Kt.FixedEncrypted,!0)}},{key:"decryptLocalStorage",value:(n=d()(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.storageManager.setKeys(t,n),e.abrupt("return",this.storageManager.decryptStorage());case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"configureAutoLock",value:function(){var t=this;e.AutoLockPollFocusInterval=1e3,e.AutoLockIntervalNone=0,e.AutoLockIntervalImmediate=1,e.AutoLockIntervalOneMinute=6e4,e.AutoLockIntervalFiveMinutes=3e5,e.AutoLockIntervalTwentyMinutes=12e5,e.AutoLockIntervalOneHour=36e5,e.AutoLockIntervalKey="AutoLockIntervalKey",c()?(this.$rootScope.$on("window-lost-focus",(function(){t.documentVisibilityChanged(!1)})),this.$rootScope.$on("window-gained-focus",(function(){t.documentVisibilityChanged(!0)}))):(document.addEventListener("visibilitychange",(function(e){var n="visible"===document.visibilityState;t.documentVisibilityChanged(n)})),this.pollFocusTimeout=setInterval((function(){var e=document.hasFocus();e&&"hidden"===t.lastFocusState?t.documentVisibilityChanged(!0):e||"visible"!==t.lastFocusState||t.documentVisibilityChanged(!1),t.lastFocusState=e?"visible":"hidden"}),e.AutoLockPollFocusInterval))}},{key:"getAutoLockIntervalOptions",value:function(){return[{value:e.AutoLockIntervalNone,label:"Off"},{value:e.AutoLockIntervalImmediate,label:"Immediately"},{value:e.AutoLockIntervalOneMinute,label:"1m"},{value:e.AutoLockIntervalFiveMinutes,label:"5m"},{value:e.AutoLockIntervalTwentyMinutes,label:"20m"},{value:e.AutoLockIntervalOneHour,label:"1h"}]}},{key:"documentVisibilityChanged",value:function(e){e?(this.lockAfterDate&&new Date>this.lockAfterDate&&!this.isLocked()?this.lockApplication():this.isLocked()||this.syncManager.sync(),this.cancelAutoLockTimer()):this.beginAutoLockTimer(),this.notifiyVisibilityObservers(e)}},{key:"beginAutoLockTimer",value:(t=d()(f.a.mark((function t(){var n,r,i=this;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAutoLockInterval();case 2:if((n=t.sent)!=e.AutoLockIntervalNone){t.next=5;break}return t.abrupt("return");case 5:r=function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e),t},this.lockAfterDate=r(n/1e3),this.lockTimeout=setTimeout((function(){i.lockApplication(),i.lockAfterDate=null}),n);case 8:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancelAutoLockTimer",value:function(){clearTimeout(this.lockTimeout),this.lockAfterDate=null}}]),e}(),nn=function(e){function t(){return v()(this,t),b()(this,w()(t).apply(this,arguments))}return S()(t,e),y()(t,[{key:"previewTitle",value:function(){return this.item.updated_at.toLocaleString()}},{key:"previewSubTitle",value:function(){return this.hasPreviousEntry?this.textCharDiffLength<0?"".concat(-1*this.textCharDiffLength," characters removed"):this.textCharDiffLength>0?"".concat(this.textCharDiffLength," characters added"):"Title or metadata changed":"".concat(this.textCharDiffLength," characters loaded")}}]),t}(o.SFItemHistoryEntry),rn=function(e){function t(e,n,r,i,a){var s;v()(this,t),o.SFItemHistory.HistoryEntryClassMapping={Note:nn},i.addPasscodeChangeObserver((function(){s.saveToDisk()}));var c=function(){var e=d()(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=r.offline())){e.next=5;break}e.t0=i.passcodeAuthParams(),e.next=8;break;case 5:return e.next=7,r.getAuthParams();case 7:e.t0=e.sent;case 8:if(n=e.t0,!t){e.next=13;break}e.t1=i.keys(),e.next=16;break;case 13:return e.next=15,r.keys();case 15:e.t1=e.sent;case 16:return a=e.t1,e.abrupt("return",{keys:a,offline:t,auth_params:n});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s=b()(this,w()(t).call(this,e,n,c,["Note"],a))}return t.$inject=["modelManager","storageManager","authManager","passcodeManager","$timeout"],S()(t,e),t}(o.SFSessionHistoryManager),an=function(e){function t(e,n){return v()(this,t),b()(this,w()(t).call(this,e,n))}return t.$inject=["modelManager","syncManager"],S()(t,e),t}(o.SFSingletonManager),on=n(14),sn=n.n(on),cn=function(){function e(){v()(this,e),this.statuses=[],this.observers=[]}return y()(e,[{key:"statusFromString",value:function(e){return{string:e}}},{key:"replaceStatusWithString",value:function(e,t){return this.removeStatus(e),this.addStatusFromString(t)}},{key:"addStatusFromString",value:function(e){return this.addStatus(this.statusFromString(e))}},{key:"addStatus",value:function(e){if("object"===sn()(e))return this.statuses.push(e),this.notifyObservers(),e;console.error("Attempting to set non-object status",e)}},{key:"removeStatus",value:function(e){return Y.a.pull(this.statuses,e),this.notifyObservers(),null}},{key:"getStatusString",value:function(){var e="";return this.statuses.forEach((function(t,n){n>0&&(e+="  "),e+=t.string})),e}},{key:"notifyObservers",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.observers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(this.getStatusString())}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"addStatusObserver",value:function(e){this.observers.push(e)}},{key:"removeStatusObserver",value:function(e){Y.a.pull(this.statuses,e)}}]),e}(),un=function(e){function t(e,n,r,i,a,o,s){var c;return v()(this,t),(c=b()(this,w()(t).call(this,e,n,r,i,a))).$rootScope=s,c.$compile=o,c}return t.$inject=["modelManager","storageManager","httpManager","$timeout","$interval","$compile","$rootScope"],S()(t,e),y()(t,[{key:"presentConflictResolutionModal",value:function(e,t){var n=this.$rootScope.$new(!0);n.item1=e[0],n.item2=e[1],n.callback=t;var r=this.$compile("<conflict-resolution-modal item1='item1' item2='item2' callback='callback' class='sk-modal'></conflict-resolution-modal>")(n);a.a.element(document.body).append(r)}}]),t}(o.SFSyncManager),ln=function(){function e(t,n,r,i,a){var o=this;v()(this,e),this.componentManager=t,this.storageManager=r,this.desktopManager=n,this.activeThemes=[],e.CachedThemesKey="cachedThemes",this.registerObservers(),i.addPasscodeChangeObserver((function(){o.cacheThemes()})),n.isDesktop?a.addObserver((function(e,t){8===e&&o.activateCachedThemes()})):this.activateCachedThemes()}var t,n;return e.$inject=["componentManager","desktopManager","storageManager","passcodeManager","appState"],y()(e,[{key:"activateCachedThemes",value:function(){var e=this.getCachedThemes(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.activateTheme(o,!1)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"registerObservers",value:function(){var e=this;this.desktopManager.registerUpdateObserver((function(t){t.active&&t.isTheme()&&(e.deactivateTheme(t),setTimeout((function(){e.activateTheme(t)}),10))})),this.componentManager.registerHandler({identifier:"themeManager",areas:["themes"],activationHandler:function(t){t.active?e.activateTheme(t):e.deactivateTheme(t)}})}},{key:"hasActiveTheme",value:function(){return this.componentManager.getActiveThemes().length>0}},{key:"deactivateAllThemes",value:function(){var e=this.componentManager.getActiveThemes(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o&&this.componentManager.deactivateComponent(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.decacheThemes()}},{key:"activateTheme",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Y.a.find(this.activeThemes,{uuid:e.uuid})){this.activeThemes.push(e);var n=this.componentManager.urlForComponent(e),r=document.createElement("link");r.href=n,r.type="text/css",r.rel="stylesheet",r.media="screen,print",r.id=e.uuid,document.getElementsByTagName("head")[0].appendChild(r),t&&this.cacheThemes()}}},{key:"deactivateTheme",value:function(e){var t=document.getElementById(e.uuid);t&&(t.disabled=!0,t.parentNode.removeChild(t)),Y.a.remove(this.activeThemes,{uuid:e.uuid}),this.cacheThemes()}},{key:"cacheThemes",value:(n=d()(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.activeThemes.map(function(){var e=d()(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.SFItemParams(t),e.next=3,n.paramsForLocalStorage();case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=t.sent,r=JSON.stringify(n),t.abrupt("return",this.storageManager.setItem(e.CachedThemesKey,r,Kt.Fixed));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"decacheThemes",value:(t=d()(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.storageManager.removeItem(e.CachedThemesKey,Kt.Fixed));case 1:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"getCachedThemes",value:function(){var t=this.storageManager.getItemSync(e.CachedThemesKey,Kt.Fixed);return t?JSON.parse(t).map((function(e){return new o.SNTheme(e)})):[]}}]),e}(),fn=n(15),pn=function(e){function t(e){var n;return v()(this,t),(n=b()(this,w()(t).call(this))).$timeout=e,n}var n,r;return t.$inject=["$timeout"],S()(t,e),y()(t,[{key:"alert",value:(r=d()(f.a.mark((function e(){var t,n,r,i,a,o,s=this,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.title,r=t.text,i=t.closeButtonText,a=void 0===i?"OK":i,o=t.onClose,e.abrupt("return",new Promise((function(e,t){var i,c=[{text:a,style:"neutral",action:(i=d()(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o&&s.$timeout(o),e(!0);case 2:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})}];new fn.SKAlert({title:n,text:r,buttons:c}).present()})));case 2:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"confirm",value:(n=d()(f.a.mark((function e(){var t,n,r,i,a,o,s,c,u,l,p,h=this,v=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},n=t.title,r=t.text,i=t.confirmButtonText,a=void 0===i?"Confirm":i,o=t.cancelButtonText,s=void 0===o?"Cancel":o,c=t.onConfirm,u=t.onCancel,l=t.destructive,p=void 0!==l&&l,e.abrupt("return",new Promise((function(e,t){var i,o,l=[{text:s,style:"neutral",action:(o=d()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u&&h.$timeout(u),t(!1);case 2:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{text:a,style:p?"danger":"info",action:(i=d()(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c&&h.$timeout(c),e(!0);case 2:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})}];new fn.SKAlert({title:n,text:r,buttons:l}).present()})));case 2:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}]),t}(o.SFAlertManager);a.a.module("app",["ngSanitize"]),a.a.module("app").config(u).constant("appVersion","3.3.5"),a.a.module("app").directive("root",(function(){return new fe})).directive("tagsPanel",(function(){return new se})).directive("notesPanel",(function(){return new re})).directive("editorPanel",(function(){return new V})).directive("footer",(function(){return new J})).directive("lockScreen",(function(){return new ve})),a.a.module("app").directive("snAutofocus",["$timeout",me]).directive("clickOutside",["$document",ye]).directive("delayHide",ge).directive("elemReady",be).directive("fileChange",(function(){return{restrict:"A",scope:{handler:"&"},link:function(e,t){t.on("change",(function(t){e.$apply((function(){e.handler({files:t.target.files})}))}))}}})).directive("infiniteScroll",["$rootScope","$window","$timeout",ke]).directive("lowercase",(function(){return{require:"ngModel",link:function(e,t,n,r){var i=function(e){void 0===e&&(e="");var t=e.toLowerCase();return t!==e&&(r.$setViewValue(t),r.$render()),t};r.$parsers.push(i),i(e[n.ngModel])}}})).directive("selectOnClick",["$window",we]).directive("snEnter",(function(){return function(e,t,n){t.bind("keydown keypress",(function(t){13===t.which&&(e.$apply((function(){e.$eval(n.snEnter,{event:t})})),t.preventDefault())}))}})),a.a.module("app").directive("accountMenu",(function(){return new Ce})).directive("actionsMenu",(function(){return new Ee})).directive("componentModal",(function(){return new Te})).directive("componentView",["$rootScope","componentManager","desktopManager","$timeout",function(e,t,n,r){return new Le(e,t,n,r)}]).directive("conflictResolutionModal",(function(){return new ze})).directive("editorMenu",(function(){return new qe})).directive("inputModal",(function(){return new Ze})).directive("menuRow",(function(){return new tt})).directive("panelResizer",(function(){return new at})).directive("passwordWizard",(function(){return new vt})).directive("permissionsModal",(function(){return new bt})).directive("privilegesAuthModal",(function(){return new St})).directive("privilegesManagementModal",(function(){return new Ct})).directive("revisionPreviewModal",(function(){return new Et})).directive("sessionHistoryMenu",(function(){return new Tt})).directive("syncResolutionMenu",(function(){return new Lt})),a.a.module("app").filter("trusted",["$sce",Ut]),a.a.module("app").service("appState",M).service("preferencesManager",U).service("actionsManager",Bt).service("archiveManager",Ht).service("authManager",qt).service("componentManager",Jt).service("dbManager",Gt).service("desktopManager",Yt).service("httpManager",Zt).service("keyboardManager",D).service("migrationManager",Xt).service("modelManager",Qt).service("nativeExtManager",en).service("passcodeManager",tn).service("privilegesManager",$).service("sessionHistory",rn).service("singletonManager",an).service("statusManager",cn).service("storageManager",Kt).service("syncManager",un).service("alertManager",pn).service("themeManager",ln),o.SFItem.AppDomain="org.standardnotes.sn"}]);
//# sourceMappingURL=app.js.map